var uN=Object.defineProperty;var dN=(r,t,e)=>t in r?uN(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var It=(r,t,e)=>dN(r,typeof t!="symbol"?t+"":t,e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function e(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=e(i);fetch(i.href,s)}})();/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function rg(r){return r+.5|0}const vl=(r,t,e)=>Math.max(Math.min(r,e),t);function Ph(r){return vl(rg(r*2.55),0,255)}function Ul(r){return vl(rg(r*255),0,255)}function hA(r){return vl(rg(r/2.55)/100,0,1)}function u_(r){return vl(rg(r*100),0,100)}const Sa={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Dw=[..."0123456789ABCDEF"],hN=r=>Dw[r&15],fN=r=>Dw[(r&240)>>4]+Dw[r&15],rp=r=>(r&240)>>4===(r&15),gN=r=>rp(r.r)&&rp(r.g)&&rp(r.b)&&rp(r.a);function pN(r){var t=r.length,e;return r[0]==="#"&&(t===4||t===5?e={r:255&Sa[r[1]]*17,g:255&Sa[r[2]]*17,b:255&Sa[r[3]]*17,a:t===5?Sa[r[4]]*17:255}:(t===7||t===9)&&(e={r:Sa[r[1]]<<4|Sa[r[2]],g:Sa[r[3]]<<4|Sa[r[4]],b:Sa[r[5]]<<4|Sa[r[6]],a:t===9?Sa[r[7]]<<4|Sa[r[8]]:255})),e}const mN=(r,t)=>r<255?t(r):"";function bN(r){var t=gN(r)?hN:fN;return r?"#"+t(r.r)+t(r.g)+t(r.b)+mN(r.a,t):void 0}const yN=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function yk(r,t,e){const n=t*Math.min(e,1-e),i=(s,a=(s+r/30)%12)=>e-n*Math.max(Math.min(a-3,9-a,1),-1);return[i(0),i(8),i(4)]}function wN(r,t,e){const n=(i,s=(i+r/60)%6)=>e-e*t*Math.max(Math.min(s,4-s,1),0);return[n(5),n(3),n(1)]}function vN(r,t,e){const n=yk(r,1,.5);let i;for(t+e>1&&(i=1/(t+e),t*=i,e*=i),i=0;i<3;i++)n[i]*=1-t-e,n[i]+=t;return n}function xN(r,t,e,n,i){return r===i?(t-e)/n+(t<e?6:0):t===i?(e-r)/n+2:(r-t)/n+4}function Tv(r){const e=r.r/255,n=r.g/255,i=r.b/255,s=Math.max(e,n,i),a=Math.min(e,n,i),o=(s+a)/2;let A,l,c;return s!==a&&(c=s-a,l=o>.5?c/(2-s-a):c/(s+a),A=xN(e,n,i,c,s),A=A*60+.5),[A|0,l||0,o]}function Fv(r,t,e,n){return(Array.isArray(t)?r(t[0],t[1],t[2]):r(t,e,n)).map(Ul)}function Lv(r,t,e){return Fv(yk,r,t,e)}function _N(r,t,e){return Fv(vN,r,t,e)}function BN(r,t,e){return Fv(wN,r,t,e)}function wk(r){return(r%360+360)%360}function CN(r){const t=yN.exec(r);let e=255,n;if(!t)return;t[5]!==n&&(e=t[6]?Ph(+t[5]):Ul(+t[5]));const i=wk(+t[2]),s=+t[3]/100,a=+t[4]/100;return t[1]==="hwb"?n=_N(i,s,a):t[1]==="hsv"?n=BN(i,s,a):n=Lv(i,s,a),{r:n[0],g:n[1],b:n[2],a:e}}function EN(r,t){var e=Tv(r);e[0]=wk(e[0]+t),e=Lv(e),r.r=e[0],r.g=e[1],r.b=e[2]}function SN(r){if(!r)return;const t=Tv(r),e=t[0],n=u_(t[1]),i=u_(t[2]);return r.a<255?`hsla(${e}, ${n}%, ${i}%, ${hA(r.a)})`:`hsl(${e}, ${n}%, ${i}%)`}const d_={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},h_={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function kN(){const r={},t=Object.keys(h_),e=Object.keys(d_);let n,i,s,a,o;for(n=0;n<t.length;n++){for(a=o=t[n],i=0;i<e.length;i++)s=e[i],o=o.replace(s,d_[s]);s=parseInt(h_[a],16),r[o]=[s>>16&255,s>>8&255,s&255]}return r}let np;function IN(r){np||(np=kN(),np.transparent=[0,0,0,0]);const t=np[r.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const TN=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function FN(r){const t=TN.exec(r);let e=255,n,i,s;if(t){if(t[7]!==n){const a=+t[7];e=t[8]?Ph(a):vl(a*255,0,255)}return n=+t[1],i=+t[3],s=+t[5],n=255&(t[2]?Ph(n):vl(n,0,255)),i=255&(t[4]?Ph(i):vl(i,0,255)),s=255&(t[6]?Ph(s):vl(s,0,255)),{r:n,g:i,b:s,a:e}}}function LN(r){return r&&(r.a<255?`rgba(${r.r}, ${r.g}, ${r.b}, ${hA(r.a)})`:`rgb(${r.r}, ${r.g}, ${r.b})`)}const oy=r=>r<=.0031308?r*12.92:Math.pow(r,1/2.4)*1.055-.055,Pu=r=>r<=.04045?r/12.92:Math.pow((r+.055)/1.055,2.4);function UN(r,t,e){const n=Pu(hA(r.r)),i=Pu(hA(r.g)),s=Pu(hA(r.b));return{r:Ul(oy(n+e*(Pu(hA(t.r))-n))),g:Ul(oy(i+e*(Pu(hA(t.g))-i))),b:Ul(oy(s+e*(Pu(hA(t.b))-s))),a:r.a+e*(t.a-r.a)}}function ip(r,t,e){if(r){let n=Tv(r);n[t]=Math.max(0,Math.min(n[t]+n[t]*e,t===0?360:1)),n=Lv(n),r.r=n[0],r.g=n[1],r.b=n[2]}}function vk(r,t){return r&&Object.assign(t||{},r)}function f_(r){var t={r:0,g:0,b:0,a:255};return Array.isArray(r)?r.length>=3&&(t={r:r[0],g:r[1],b:r[2],a:255},r.length>3&&(t.a=Ul(r[3]))):(t=vk(r,{r:0,g:0,b:0,a:1}),t.a=Ul(t.a)),t}function PN(r){return r.charAt(0)==="r"?FN(r):CN(r)}class Sf{constructor(t){if(t instanceof Sf)return t;const e=typeof t;let n;e==="object"?n=f_(t):e==="string"&&(n=pN(t)||IN(t)||PN(t)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var t=vk(this._rgb);return t&&(t.a=hA(t.a)),t}set rgb(t){this._rgb=f_(t)}rgbString(){return this._valid?LN(this._rgb):void 0}hexString(){return this._valid?bN(this._rgb):void 0}hslString(){return this._valid?SN(this._rgb):void 0}mix(t,e){if(t){const n=this.rgb,i=t.rgb;let s;const a=e===s?.5:e,o=2*a-1,A=n.a-i.a,l=((o*A===-1?o:(o+A)/(1+o*A))+1)/2;s=1-l,n.r=255&l*n.r+s*i.r+.5,n.g=255&l*n.g+s*i.g+.5,n.b=255&l*n.b+s*i.b+.5,n.a=a*n.a+(1-a)*i.a,this.rgb=n}return this}interpolate(t,e){return t&&(this._rgb=UN(this._rgb,t._rgb,e)),this}clone(){return new Sf(this.rgb)}alpha(t){return this._rgb.a=Ul(t),this}clearer(t){const e=this._rgb;return e.a*=1-t,this}greyscale(){const t=this._rgb,e=rg(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=e,this}opaquer(t){const e=this._rgb;return e.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return ip(this._rgb,2,t),this}darken(t){return ip(this._rgb,2,-t),this}saturate(t){return ip(this._rgb,1,t),this}desaturate(t){return ip(this._rgb,1,-t),this}rotate(t){return EN(this._rgb,t),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function sA(){}const NN=(()=>{let r=0;return()=>r++})();function er(r){return r==null}function hn(r){if(Array.isArray&&Array.isArray(r))return!0;const t=Object.prototype.toString.call(r);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function cr(r){return r!==null&&Object.prototype.toString.call(r)==="[object Object]"}function Nn(r){return(typeof r=="number"||r instanceof Number)&&isFinite(+r)}function ua(r,t){return Nn(r)?r:t}function Oe(r,t){return typeof r>"u"?t:r}const DN=(r,t)=>typeof r=="string"&&r.endsWith("%")?parseFloat(r)/100:+r/t,xk=(r,t)=>typeof r=="string"&&r.endsWith("%")?parseFloat(r)/100*t:+r;function Re(r,t,e){if(r&&typeof r.call=="function")return r.apply(e,t)}function Ar(r,t,e,n){let i,s,a;if(hn(r))for(s=r.length,i=0;i<s;i++)t.call(e,r[i],i);else if(cr(r))for(a=Object.keys(r),s=a.length,i=0;i<s;i++)t.call(e,r[a[i]],a[i])}function Ym(r,t){let e,n,i,s;if(!r||!t||r.length!==t.length)return!1;for(e=0,n=r.length;e<n;++e)if(i=r[e],s=t[e],i.datasetIndex!==s.datasetIndex||i.index!==s.index)return!1;return!0}function Xm(r){if(hn(r))return r.map(Xm);if(cr(r)){const t=Object.create(null),e=Object.keys(r),n=e.length;let i=0;for(;i<n;++i)t[e[i]]=Xm(r[e[i]]);return t}return r}function _k(r){return["__proto__","prototype","constructor"].indexOf(r)===-1}function MN(r,t,e,n){if(!_k(r))return;const i=t[r],s=e[r];cr(i)&&cr(s)?Oo(i,s,n):t[r]=Xm(s)}function Oo(r,t,e){const n=hn(t)?t:[t],i=n.length;if(!cr(r))return r;e=e||{};const s=e.merger||MN;let a;for(let o=0;o<i;++o){if(a=n[o],!cr(a))continue;const A=Object.keys(a);for(let l=0,c=A.length;l<c;++l)s(A[l],r,a,e)}return r}function Jh(r,t){return Oo(r,t,{merger:RN})}function RN(r,t,e){if(!_k(r))return;const n=t[r],i=e[r];cr(n)&&cr(i)?Jh(n,i):Object.prototype.hasOwnProperty.call(t,r)||(t[r]=Xm(i))}const g_={"":r=>r,x:r=>r.x,y:r=>r.y};function QN(r){const t=r.split("."),e=[];let n="";for(const i of t)n+=i,n.endsWith("\\")?n=n.slice(0,-1)+".":(e.push(n),n="");return e}function ON(r){const t=QN(r);return e=>{for(const n of t){if(n==="")break;e=e&&e[n]}return e}}function jl(r,t){return(g_[t]||(g_[t]=ON(t)))(r)}function Uv(r){return r.charAt(0).toUpperCase()+r.slice(1)}const kf=r=>typeof r<"u",Gl=r=>typeof r=="function",p_=(r,t)=>{if(r.size!==t.size)return!1;for(const e of r)if(!t.has(e))return!1;return!0};function HN(r){return r.type==="mouseup"||r.type==="click"||r.type==="contextmenu"}const Fr=Math.PI,pn=2*Fr,VN=pn+Fr,Jm=Number.POSITIVE_INFINITY,$N=Fr/180,Xn=Fr/2,Bc=Fr/4,m_=Fr*2/3,xl=Math.log10,Pa=Math.sign;function Kc(r,t,e){return Math.abs(r-t)<e}function b_(r){const t=Math.round(r);r=Kc(r,t,r/1e3)?t:r;const e=Math.pow(10,Math.floor(xl(r))),n=r/e;return(n<=1?1:n<=2?2:n<=5?5:10)*e}function jN(r){const t=[],e=Math.sqrt(r);let n;for(n=1;n<e;n++)r%n===0&&(t.push(n),t.push(r/n));return e===(e|0)&&t.push(e),t.sort((i,s)=>i-s).pop(),t}function GN(r){return typeof r=="symbol"||typeof r=="object"&&r!==null&&!(Symbol.toPrimitive in r||"toString"in r||"valueOf"in r)}function _d(r){return!GN(r)&&!isNaN(parseFloat(r))&&isFinite(r)}function KN(r,t){const e=Math.round(r);return e-t<=r&&e+t>=r}function Bk(r,t,e){let n,i,s;for(n=0,i=r.length;n<i;n++)s=r[n][e],isNaN(s)||(t.min=Math.min(t.min,s),t.max=Math.max(t.max,s))}function za(r){return r*(Fr/180)}function Pv(r){return r*(180/Fr)}function y_(r){if(!Nn(r))return;let t=1,e=0;for(;Math.round(r*t)/t!==r;)t*=10,e++;return e}function Ck(r,t){const e=t.x-r.x,n=t.y-r.y,i=Math.sqrt(e*e+n*n);let s=Math.atan2(n,e);return s<-.5*Fr&&(s+=pn),{angle:s,distance:i}}function Mw(r,t){return Math.sqrt(Math.pow(t.x-r.x,2)+Math.pow(t.y-r.y,2))}function zN(r,t){return(r-t+VN)%pn-Fr}function As(r){return(r%pn+pn)%pn}function If(r,t,e,n){const i=As(r),s=As(t),a=As(e),o=As(s-i),A=As(a-i),l=As(i-s),c=As(i-a);return i===s||i===a||n&&s===a||o>A&&l<c}function Ui(r,t,e){return Math.max(t,Math.min(e,r))}function qN(r){return Ui(r,-32768,32767)}function bA(r,t,e,n=1e-6){return r>=Math.min(t,e)-n&&r<=Math.max(t,e)+n}function Nv(r,t,e){e=e||(a=>r[a]<t);let n=r.length-1,i=0,s;for(;n-i>1;)s=i+n>>1,e(s)?i=s:n=s;return{lo:i,hi:n}}const yA=(r,t,e,n)=>Nv(r,e,n?i=>{const s=r[i][t];return s<e||s===e&&r[i+1][t]===e}:i=>r[i][t]<e),WN=(r,t,e)=>Nv(r,e,n=>r[n][t]>=e);function YN(r,t,e){let n=0,i=r.length;for(;n<i&&r[n]<t;)n++;for(;i>n&&r[i-1]>e;)i--;return n>0||i<r.length?r.slice(n,i):r}const Ek=["push","pop","shift","splice","unshift"];function XN(r,t){if(r._chartjs){r._chartjs.listeners.push(t);return}Object.defineProperty(r,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),Ek.forEach(e=>{const n="_onData"+Uv(e),i=r[e];Object.defineProperty(r,e,{configurable:!0,enumerable:!1,value(...s){const a=i.apply(this,s);return r._chartjs.listeners.forEach(o=>{typeof o[n]=="function"&&o[n](...s)}),a}})})}function w_(r,t){const e=r._chartjs;if(!e)return;const n=e.listeners,i=n.indexOf(t);i!==-1&&n.splice(i,1),!(n.length>0)&&(Ek.forEach(s=>{delete r[s]}),delete r._chartjs)}function Sk(r){const t=new Set(r);return t.size===r.length?r:Array.from(t)}const kk=(function(){return typeof window>"u"?function(r){return r()}:window.requestAnimationFrame})();function Ik(r,t){let e=[],n=!1;return function(...i){e=i,n||(n=!0,kk.call(window,()=>{n=!1,r.apply(t,e)}))}}function JN(r,t){let e;return function(...n){return t?(clearTimeout(e),e=setTimeout(r,t,n)):r.apply(this,n),t}}const Dv=r=>r==="start"?"left":r==="end"?"right":"center",as=(r,t,e)=>r==="start"?t:r==="end"?e:(t+e)/2,ZN=(r,t,e,n)=>r===(n?"left":"right")?e:r==="center"?(t+e)/2:t;function Tk(r,t,e){const n=t.length;let i=0,s=n;if(r._sorted){const{iScale:a,vScale:o,_parsed:A}=r,l=r.dataset&&r.dataset.options?r.dataset.options.spanGaps:null,c=a.axis,{min:u,max:h,minDefined:d,maxDefined:m}=a.getUserBounds();if(d){if(i=Math.min(yA(A,c,u).lo,e?n:yA(t,c,a.getPixelForValue(u)).lo),l){const f=A.slice(0,i+1).reverse().findIndex(b=>!er(b[o.axis]));i-=Math.max(0,f)}i=Ui(i,0,n-1)}if(m){let f=Math.max(yA(A,a.axis,h,!0).hi+1,e?0:yA(t,c,a.getPixelForValue(h),!0).hi+1);if(l){const b=A.slice(f-1).findIndex(y=>!er(y[o.axis]));f+=Math.max(0,b)}s=Ui(f,i,n)-i}else s=n-i}return{start:i,count:s}}function Fk(r){const{xScale:t,yScale:e,_scaleRanges:n}=r,i={xmin:t.min,xmax:t.max,ymin:e.min,ymax:e.max};if(!n)return r._scaleRanges=i,!0;const s=n.xmin!==t.min||n.xmax!==t.max||n.ymin!==e.min||n.ymax!==e.max;return Object.assign(n,i),s}const sp=r=>r===0||r===1,v_=(r,t,e)=>-(Math.pow(2,10*(r-=1))*Math.sin((r-t)*pn/e)),x_=(r,t,e)=>Math.pow(2,-10*r)*Math.sin((r-t)*pn/e)+1,Zh={linear:r=>r,easeInQuad:r=>r*r,easeOutQuad:r=>-r*(r-2),easeInOutQuad:r=>(r/=.5)<1?.5*r*r:-.5*(--r*(r-2)-1),easeInCubic:r=>r*r*r,easeOutCubic:r=>(r-=1)*r*r+1,easeInOutCubic:r=>(r/=.5)<1?.5*r*r*r:.5*((r-=2)*r*r+2),easeInQuart:r=>r*r*r*r,easeOutQuart:r=>-((r-=1)*r*r*r-1),easeInOutQuart:r=>(r/=.5)<1?.5*r*r*r*r:-.5*((r-=2)*r*r*r-2),easeInQuint:r=>r*r*r*r*r,easeOutQuint:r=>(r-=1)*r*r*r*r+1,easeInOutQuint:r=>(r/=.5)<1?.5*r*r*r*r*r:.5*((r-=2)*r*r*r*r+2),easeInSine:r=>-Math.cos(r*Xn)+1,easeOutSine:r=>Math.sin(r*Xn),easeInOutSine:r=>-.5*(Math.cos(Fr*r)-1),easeInExpo:r=>r===0?0:Math.pow(2,10*(r-1)),easeOutExpo:r=>r===1?1:-Math.pow(2,-10*r)+1,easeInOutExpo:r=>sp(r)?r:r<.5?.5*Math.pow(2,10*(r*2-1)):.5*(-Math.pow(2,-10*(r*2-1))+2),easeInCirc:r=>r>=1?r:-(Math.sqrt(1-r*r)-1),easeOutCirc:r=>Math.sqrt(1-(r-=1)*r),easeInOutCirc:r=>(r/=.5)<1?-.5*(Math.sqrt(1-r*r)-1):.5*(Math.sqrt(1-(r-=2)*r)+1),easeInElastic:r=>sp(r)?r:v_(r,.075,.3),easeOutElastic:r=>sp(r)?r:x_(r,.075,.3),easeInOutElastic(r){return sp(r)?r:r<.5?.5*v_(r*2,.1125,.45):.5+.5*x_(r*2-1,.1125,.45)},easeInBack(r){return r*r*((1.70158+1)*r-1.70158)},easeOutBack(r){return(r-=1)*r*((1.70158+1)*r+1.70158)+1},easeInOutBack(r){let t=1.70158;return(r/=.5)<1?.5*(r*r*(((t*=1.525)+1)*r-t)):.5*((r-=2)*r*(((t*=1.525)+1)*r+t)+2)},easeInBounce:r=>1-Zh.easeOutBounce(1-r),easeOutBounce(r){return r<1/2.75?7.5625*r*r:r<2/2.75?7.5625*(r-=1.5/2.75)*r+.75:r<2.5/2.75?7.5625*(r-=2.25/2.75)*r+.9375:7.5625*(r-=2.625/2.75)*r+.984375},easeInOutBounce:r=>r<.5?Zh.easeInBounce(r*2)*.5:Zh.easeOutBounce(r*2-1)*.5+.5};function Mv(r){if(r&&typeof r=="object"){const t=r.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function __(r){return Mv(r)?r:new Sf(r)}function Ay(r){return Mv(r)?r:new Sf(r).saturate(.5).darken(.1).hexString()}const tD=["x","y","borderWidth","radius","tension"],eD=["color","borderColor","backgroundColor"];function rD(r){r.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),r.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),r.set("animations",{colors:{type:"color",properties:eD},numbers:{type:"number",properties:tD}}),r.describe("animations",{_fallback:"animation"}),r.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function nD(r){r.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const B_=new Map;function iD(r,t){t=t||{};const e=r+JSON.stringify(t);let n=B_.get(e);return n||(n=new Intl.NumberFormat(r,t),B_.set(e,n)),n}function ng(r,t,e){return iD(t,e).format(r)}const Lk={values(r){return hn(r)?r:""+r},numeric(r,t,e){if(r===0)return"0";const n=this.chart.options.locale;let i,s=r;if(e.length>1){const l=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(l<1e-4||l>1e15)&&(i="scientific"),s=sD(r,e)}const a=xl(Math.abs(s)),o=isNaN(a)?1:Math.max(Math.min(-1*Math.floor(a),20),0),A={notation:i,minimumFractionDigits:o,maximumFractionDigits:o};return Object.assign(A,this.options.ticks.format),ng(r,n,A)},logarithmic(r,t,e){if(r===0)return"0";const n=e[t].significand||r/Math.pow(10,Math.floor(xl(r)));return[1,2,3,5,10,15].includes(n)||t>.8*e.length?Lk.numeric.call(this,r,t,e):""}};function sD(r,t){let e=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(e)>=1&&r!==Math.floor(r)&&(e=r-Math.floor(r)),e}var z0={formatters:Lk};function aD(r){r.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:z0.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),r.route("scale.ticks","color","","color"),r.route("scale.grid","color","","borderColor"),r.route("scale.border","color","","borderColor"),r.route("scale.title","color","","color"),r.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),r.describe("scales",{_fallback:"scale"}),r.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const ru=Object.create(null),Rw=Object.create(null);function tf(r,t){if(!t)return r;const e=t.split(".");for(let n=0,i=e.length;n<i;++n){const s=e[n];r=r[s]||(r[s]=Object.create(null))}return r}function ly(r,t,e){return typeof t=="string"?Oo(tf(r,t),e):Oo(tf(r,""),t)}class oD{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=n=>n.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(n,i)=>Ay(i.backgroundColor),this.hoverBorderColor=(n,i)=>Ay(i.borderColor),this.hoverColor=(n,i)=>Ay(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return ly(this,t,e)}get(t){return tf(this,t)}describe(t,e){return ly(Rw,t,e)}override(t,e){return ly(ru,t,e)}route(t,e,n,i){const s=tf(this,t),a=tf(this,n),o="_"+e;Object.defineProperties(s,{[o]:{value:s[e],writable:!0},[e]:{enumerable:!0,get(){const A=this[o],l=a[i];return cr(A)?Object.assign({},l,A):Oe(A,l)},set(A){this[o]=A}}})}apply(t){t.forEach(e=>e(this))}}var mn=new oD({_scriptable:r=>!r.startsWith("on"),_indexable:r=>r!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[rD,nD,aD]);function AD(r){return!r||er(r.size)||er(r.family)?null:(r.style?r.style+" ":"")+(r.weight?r.weight+" ":"")+r.size+"px "+r.family}function Zm(r,t,e,n,i){let s=t[i];return s||(s=t[i]=r.measureText(i).width,e.push(i)),s>n&&(n=s),n}function lD(r,t,e,n){n=n||{};let i=n.data=n.data||{},s=n.garbageCollect=n.garbageCollect||[];n.font!==t&&(i=n.data={},s=n.garbageCollect=[],n.font=t),r.save(),r.font=t;let a=0;const o=e.length;let A,l,c,u,h;for(A=0;A<o;A++)if(u=e[A],u!=null&&!hn(u))a=Zm(r,i,s,a,u);else if(hn(u))for(l=0,c=u.length;l<c;l++)h=u[l],h!=null&&!hn(h)&&(a=Zm(r,i,s,a,h));r.restore();const d=s.length/2;if(d>e.length){for(A=0;A<d;A++)delete i[s[A]];s.splice(0,d)}return a}function Cc(r,t,e){const n=r.currentDevicePixelRatio,i=e!==0?Math.max(e/2,.5):0;return Math.round((t-i)*n)/n+i}function C_(r,t){!t&&!r||(t=t||r.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,r.width,r.height),t.restore())}function Qw(r,t,e,n){Uk(r,t,e,n,null)}function Uk(r,t,e,n,i){let s,a,o,A,l,c,u,h;const d=t.pointStyle,m=t.rotation,f=t.radius;let b=(m||0)*$N;if(d&&typeof d=="object"&&(s=d.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){r.save(),r.translate(e,n),r.rotate(b),r.drawImage(d,-d.width/2,-d.height/2,d.width,d.height),r.restore();return}if(!(isNaN(f)||f<=0)){switch(r.beginPath(),d){default:i?r.ellipse(e,n,i/2,f,0,0,pn):r.arc(e,n,f,0,pn),r.closePath();break;case"triangle":c=i?i/2:f,r.moveTo(e+Math.sin(b)*c,n-Math.cos(b)*f),b+=m_,r.lineTo(e+Math.sin(b)*c,n-Math.cos(b)*f),b+=m_,r.lineTo(e+Math.sin(b)*c,n-Math.cos(b)*f),r.closePath();break;case"rectRounded":l=f*.516,A=f-l,a=Math.cos(b+Bc)*A,u=Math.cos(b+Bc)*(i?i/2-l:A),o=Math.sin(b+Bc)*A,h=Math.sin(b+Bc)*(i?i/2-l:A),r.arc(e-u,n-o,l,b-Fr,b-Xn),r.arc(e+h,n-a,l,b-Xn,b),r.arc(e+u,n+o,l,b,b+Xn),r.arc(e-h,n+a,l,b+Xn,b+Fr),r.closePath();break;case"rect":if(!m){A=Math.SQRT1_2*f,c=i?i/2:A,r.rect(e-c,n-A,2*c,2*A);break}b+=Bc;case"rectRot":u=Math.cos(b)*(i?i/2:f),a=Math.cos(b)*f,o=Math.sin(b)*f,h=Math.sin(b)*(i?i/2:f),r.moveTo(e-u,n-o),r.lineTo(e+h,n-a),r.lineTo(e+u,n+o),r.lineTo(e-h,n+a),r.closePath();break;case"crossRot":b+=Bc;case"cross":u=Math.cos(b)*(i?i/2:f),a=Math.cos(b)*f,o=Math.sin(b)*f,h=Math.sin(b)*(i?i/2:f),r.moveTo(e-u,n-o),r.lineTo(e+u,n+o),r.moveTo(e+h,n-a),r.lineTo(e-h,n+a);break;case"star":u=Math.cos(b)*(i?i/2:f),a=Math.cos(b)*f,o=Math.sin(b)*f,h=Math.sin(b)*(i?i/2:f),r.moveTo(e-u,n-o),r.lineTo(e+u,n+o),r.moveTo(e+h,n-a),r.lineTo(e-h,n+a),b+=Bc,u=Math.cos(b)*(i?i/2:f),a=Math.cos(b)*f,o=Math.sin(b)*f,h=Math.sin(b)*(i?i/2:f),r.moveTo(e-u,n-o),r.lineTo(e+u,n+o),r.moveTo(e+h,n-a),r.lineTo(e-h,n+a);break;case"line":a=i?i/2:Math.cos(b)*f,o=Math.sin(b)*f,r.moveTo(e-a,n-o),r.lineTo(e+a,n+o);break;case"dash":r.moveTo(e,n),r.lineTo(e+Math.cos(b)*(i?i/2:f),n+Math.sin(b)*f);break;case!1:r.closePath();break}r.fill(),t.borderWidth>0&&r.stroke()}}function ko(r,t,e){return e=e||.5,!t||r&&r.x>t.left-e&&r.x<t.right+e&&r.y>t.top-e&&r.y<t.bottom+e}function q0(r,t){r.save(),r.beginPath(),r.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),r.clip()}function W0(r){r.restore()}function cD(r,t,e,n,i){if(!t)return r.lineTo(e.x,e.y);if(i==="middle"){const s=(t.x+e.x)/2;r.lineTo(s,t.y),r.lineTo(s,e.y)}else i==="after"!=!!n?r.lineTo(t.x,e.y):r.lineTo(e.x,t.y);r.lineTo(e.x,e.y)}function uD(r,t,e,n){if(!t)return r.lineTo(e.x,e.y);r.bezierCurveTo(n?t.cp1x:t.cp2x,n?t.cp1y:t.cp2y,n?e.cp2x:e.cp1x,n?e.cp2y:e.cp1y,e.x,e.y)}function dD(r,t){t.translation&&r.translate(t.translation[0],t.translation[1]),er(t.rotation)||r.rotate(t.rotation),t.color&&(r.fillStyle=t.color),t.textAlign&&(r.textAlign=t.textAlign),t.textBaseline&&(r.textBaseline=t.textBaseline)}function hD(r,t,e,n,i){if(i.strikethrough||i.underline){const s=r.measureText(n),a=t-s.actualBoundingBoxLeft,o=t+s.actualBoundingBoxRight,A=e-s.actualBoundingBoxAscent,l=e+s.actualBoundingBoxDescent,c=i.strikethrough?(A+l)/2:l;r.strokeStyle=r.fillStyle,r.beginPath(),r.lineWidth=i.decorationWidth||2,r.moveTo(a,c),r.lineTo(o,c),r.stroke()}}function fD(r,t){const e=r.fillStyle;r.fillStyle=t.color,r.fillRect(t.left,t.top,t.width,t.height),r.fillStyle=e}function nu(r,t,e,n,i,s={}){const a=hn(t)?t:[t],o=s.strokeWidth>0&&s.strokeColor!=="";let A,l;for(r.save(),r.font=i.string,dD(r,s),A=0;A<a.length;++A)l=a[A],s.backdrop&&fD(r,s.backdrop),o&&(s.strokeColor&&(r.strokeStyle=s.strokeColor),er(s.strokeWidth)||(r.lineWidth=s.strokeWidth),r.strokeText(l,e,n,s.maxWidth)),r.fillText(l,e,n,s.maxWidth),hD(r,e,n,l,s),n+=Number(i.lineHeight);r.restore()}function Tf(r,t){const{x:e,y:n,w:i,h:s,radius:a}=t;r.arc(e+a.topLeft,n+a.topLeft,a.topLeft,1.5*Fr,Fr,!0),r.lineTo(e,n+s-a.bottomLeft),r.arc(e+a.bottomLeft,n+s-a.bottomLeft,a.bottomLeft,Fr,Xn,!0),r.lineTo(e+i-a.bottomRight,n+s),r.arc(e+i-a.bottomRight,n+s-a.bottomRight,a.bottomRight,Xn,0,!0),r.lineTo(e+i,n+a.topRight),r.arc(e+i-a.topRight,n+a.topRight,a.topRight,0,-Xn,!0),r.lineTo(e+a.topLeft,n)}const gD=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,pD=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function mD(r,t){const e=(""+r).match(gD);if(!e||e[1]==="normal")return t*1.2;switch(r=+e[2],e[3]){case"px":return r;case"%":r/=100;break}return t*r}const bD=r=>+r||0;function Rv(r,t){const e={},n=cr(t),i=n?Object.keys(t):t,s=cr(r)?n?a=>Oe(r[a],r[t[a]]):a=>r[a]:()=>r;for(const a of i)e[a]=bD(s(a));return e}function Pk(r){return Rv(r,{top:"y",right:"x",bottom:"y",left:"x"})}function zc(r){return Rv(r,["topLeft","topRight","bottomLeft","bottomRight"])}function Wi(r){const t=Pk(r);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function ai(r,t){r=r||{},t=t||mn.font;let e=Oe(r.size,t.size);typeof e=="string"&&(e=parseInt(e,10));let n=Oe(r.style,t.style);n&&!(""+n).match(pD)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);const i={family:Oe(r.family,t.family),lineHeight:mD(Oe(r.lineHeight,t.lineHeight),e),size:e,style:n,weight:Oe(r.weight,t.weight),string:""};return i.string=AD(i),i}function dn(r,t,e,n){let i,s,a;for(i=0,s=r.length;i<s;++i)if(a=r[i],a!==void 0&&(t!==void 0&&typeof a=="function"&&(a=a(t)),e!==void 0&&hn(a)&&(a=a[e%a.length]),a!==void 0))return a}function yD(r,t,e){const{min:n,max:i}=r,s=xk(t,(i-n)/2),a=(o,A)=>e&&o===0?0:o+A;return{min:a(n,-Math.abs(s)),max:a(i,s)}}function ic(r,t){return Object.assign(Object.create(r),t)}function Qv(r,t=[""],e,n,i=()=>r[0]){const s=e||r;typeof n>"u"&&(n=Rk("_fallback",r));const a={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:r,_rootScopes:s,_fallback:n,_getTarget:i,override:o=>Qv([o,...r],t,s,n)};return new Proxy(a,{deleteProperty(o,A){return delete o[A],delete o._keys,delete r[0][A],!0},get(o,A){return Dk(o,A,()=>SD(A,t,r,o))},getOwnPropertyDescriptor(o,A){return Reflect.getOwnPropertyDescriptor(o._scopes[0],A)},getPrototypeOf(){return Reflect.getPrototypeOf(r[0])},has(o,A){return S_(o).includes(A)},ownKeys(o){return S_(o)},set(o,A,l){const c=o._storage||(o._storage=i());return o[A]=c[A]=l,delete o._keys,!0}})}function Bd(r,t,e,n){const i={_cacheable:!1,_proxy:r,_context:t,_subProxy:e,_stack:new Set,_descriptors:Nk(r,n),setContext:s=>Bd(r,s,e,n),override:s=>Bd(r.override(s),t,e,n)};return new Proxy(i,{deleteProperty(s,a){return delete s[a],delete r[a],!0},get(s,a,o){return Dk(s,a,()=>vD(s,a,o))},getOwnPropertyDescriptor(s,a){return s._descriptors.allKeys?Reflect.has(r,a)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(r,a)},getPrototypeOf(){return Reflect.getPrototypeOf(r)},has(s,a){return Reflect.has(r,a)},ownKeys(){return Reflect.ownKeys(r)},set(s,a,o){return r[a]=o,delete s[a],!0}})}function Nk(r,t={scriptable:!0,indexable:!0}){const{_scriptable:e=t.scriptable,_indexable:n=t.indexable,_allKeys:i=t.allKeys}=r;return{allKeys:i,scriptable:e,indexable:n,isScriptable:Gl(e)?e:()=>e,isIndexable:Gl(n)?n:()=>n}}const wD=(r,t)=>r?r+Uv(t):t,Ov=(r,t)=>cr(t)&&r!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function Dk(r,t,e){if(Object.prototype.hasOwnProperty.call(r,t)||t==="constructor")return r[t];const n=e();return r[t]=n,n}function vD(r,t,e){const{_proxy:n,_context:i,_subProxy:s,_descriptors:a}=r;let o=n[t];return Gl(o)&&a.isScriptable(t)&&(o=xD(t,o,r,e)),hn(o)&&o.length&&(o=_D(t,o,r,a.isIndexable)),Ov(t,o)&&(o=Bd(o,i,s&&s[t],a)),o}function xD(r,t,e,n){const{_proxy:i,_context:s,_subProxy:a,_stack:o}=e;if(o.has(r))throw new Error("Recursion detected: "+Array.from(o).join("->")+"->"+r);o.add(r);let A=t(s,a||n);return o.delete(r),Ov(r,A)&&(A=Hv(i._scopes,i,r,A)),A}function _D(r,t,e,n){const{_proxy:i,_context:s,_subProxy:a,_descriptors:o}=e;if(typeof s.index<"u"&&n(r))return t[s.index%t.length];if(cr(t[0])){const A=t,l=i._scopes.filter(c=>c!==A);t=[];for(const c of A){const u=Hv(l,i,r,c);t.push(Bd(u,s,a&&a[r],o))}}return t}function Mk(r,t,e){return Gl(r)?r(t,e):r}const BD=(r,t)=>r===!0?t:typeof r=="string"?jl(t,r):void 0;function CD(r,t,e,n,i){for(const s of t){const a=BD(e,s);if(a){r.add(a);const o=Mk(a._fallback,e,i);if(typeof o<"u"&&o!==e&&o!==n)return o}else if(a===!1&&typeof n<"u"&&e!==n)return null}return!1}function Hv(r,t,e,n){const i=t._rootScopes,s=Mk(t._fallback,e,n),a=[...r,...i],o=new Set;o.add(n);let A=E_(o,a,e,s||e,n);return A===null||typeof s<"u"&&s!==e&&(A=E_(o,a,s,A,n),A===null)?!1:Qv(Array.from(o),[""],i,s,()=>ED(t,e,n))}function E_(r,t,e,n,i){for(;e;)e=CD(r,t,e,n,i);return e}function ED(r,t,e){const n=r._getTarget();t in n||(n[t]={});const i=n[t];return hn(i)&&cr(e)?e:i||{}}function SD(r,t,e,n){let i;for(const s of t)if(i=Rk(wD(s,r),e),typeof i<"u")return Ov(r,i)?Hv(e,n,r,i):i}function Rk(r,t){for(const e of t){if(!e)continue;const n=e[r];if(typeof n<"u")return n}}function S_(r){let t=r._keys;return t||(t=r._keys=kD(r._scopes)),t}function kD(r){const t=new Set;for(const e of r)for(const n of Object.keys(e).filter(i=>!i.startsWith("_")))t.add(n);return Array.from(t)}function Qk(r,t,e,n){const{iScale:i}=r,{key:s="r"}=this._parsing,a=new Array(n);let o,A,l,c;for(o=0,A=n;o<A;++o)l=o+e,c=t[l],a[o]={r:i.parse(jl(c,s),l)};return a}const ID=Number.EPSILON||1e-14,Cd=(r,t)=>t<r.length&&!r[t].skip&&r[t],Ok=r=>r==="x"?"y":"x";function TD(r,t,e,n){const i=r.skip?t:r,s=t,a=e.skip?t:e,o=Mw(s,i),A=Mw(a,s);let l=o/(o+A),c=A/(o+A);l=isNaN(l)?0:l,c=isNaN(c)?0:c;const u=n*l,h=n*c;return{previous:{x:s.x-u*(a.x-i.x),y:s.y-u*(a.y-i.y)},next:{x:s.x+h*(a.x-i.x),y:s.y+h*(a.y-i.y)}}}function FD(r,t,e){const n=r.length;let i,s,a,o,A,l=Cd(r,0);for(let c=0;c<n-1;++c)if(A=l,l=Cd(r,c+1),!(!A||!l)){if(Kc(t[c],0,ID)){e[c]=e[c+1]=0;continue}i=e[c]/t[c],s=e[c+1]/t[c],o=Math.pow(i,2)+Math.pow(s,2),!(o<=9)&&(a=3/Math.sqrt(o),e[c]=i*a*t[c],e[c+1]=s*a*t[c])}}function LD(r,t,e="x"){const n=Ok(e),i=r.length;let s,a,o,A=Cd(r,0);for(let l=0;l<i;++l){if(a=o,o=A,A=Cd(r,l+1),!o)continue;const c=o[e],u=o[n];a&&(s=(c-a[e])/3,o[`cp1${e}`]=c-s,o[`cp1${n}`]=u-s*t[l]),A&&(s=(A[e]-c)/3,o[`cp2${e}`]=c+s,o[`cp2${n}`]=u+s*t[l])}}function UD(r,t="x"){const e=Ok(t),n=r.length,i=Array(n).fill(0),s=Array(n);let a,o,A,l=Cd(r,0);for(a=0;a<n;++a)if(o=A,A=l,l=Cd(r,a+1),!!A){if(l){const c=l[t]-A[t];i[a]=c!==0?(l[e]-A[e])/c:0}s[a]=o?l?Pa(i[a-1])!==Pa(i[a])?0:(i[a-1]+i[a])/2:i[a-1]:i[a]}FD(r,i,s),LD(r,s,t)}function ap(r,t,e){return Math.max(Math.min(r,e),t)}function PD(r,t){let e,n,i,s,a,o=ko(r[0],t);for(e=0,n=r.length;e<n;++e)a=s,s=o,o=e<n-1&&ko(r[e+1],t),s&&(i=r[e],a&&(i.cp1x=ap(i.cp1x,t.left,t.right),i.cp1y=ap(i.cp1y,t.top,t.bottom)),o&&(i.cp2x=ap(i.cp2x,t.left,t.right),i.cp2y=ap(i.cp2y,t.top,t.bottom)))}function ND(r,t,e,n,i){let s,a,o,A;if(t.spanGaps&&(r=r.filter(l=>!l.skip)),t.cubicInterpolationMode==="monotone")UD(r,i);else{let l=n?r[r.length-1]:r[0];for(s=0,a=r.length;s<a;++s)o=r[s],A=TD(l,o,r[Math.min(s+1,a-(n?0:1))%a],t.tension),o.cp1x=A.previous.x,o.cp1y=A.previous.y,o.cp2x=A.next.x,o.cp2y=A.next.y,l=o}t.capBezierPoints&&PD(r,e)}function Vv(){return typeof window<"u"&&typeof document<"u"}function $v(r){let t=r.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function t0(r,t,e){let n;return typeof r=="string"?(n=parseInt(r,10),r.indexOf("%")!==-1&&(n=n/100*t.parentNode[e])):n=r,n}const Y0=r=>r.ownerDocument.defaultView.getComputedStyle(r,null);function DD(r,t){return Y0(r).getPropertyValue(t)}const MD=["top","right","bottom","left"];function qc(r,t,e){const n={};e=e?"-"+e:"";for(let i=0;i<4;i++){const s=MD[i];n[s]=parseFloat(r[t+"-"+s+e])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}const RD=(r,t,e)=>(r>0||t>0)&&(!e||!e.shadowRoot);function QD(r,t){const e=r.touches,n=e&&e.length?e[0]:r,{offsetX:i,offsetY:s}=n;let a=!1,o,A;if(RD(i,s,r.target))o=i,A=s;else{const l=t.getBoundingClientRect();o=n.clientX-l.left,A=n.clientY-l.top,a=!0}return{x:o,y:A,box:a}}function Bo(r,t){if("native"in r)return r;const{canvas:e,currentDevicePixelRatio:n}=t,i=Y0(e),s=i.boxSizing==="border-box",a=qc(i,"padding"),o=qc(i,"border","width"),{x:A,y:l,box:c}=QD(r,e),u=a.left+(c&&o.left),h=a.top+(c&&o.top);let{width:d,height:m}=t;return s&&(d-=a.width+o.width,m-=a.height+o.height),{x:Math.round((A-u)/d*e.width/n),y:Math.round((l-h)/m*e.height/n)}}function OD(r,t,e){let n,i;if(t===void 0||e===void 0){const s=r&&$v(r);if(!s)t=r.clientWidth,e=r.clientHeight;else{const a=s.getBoundingClientRect(),o=Y0(s),A=qc(o,"border","width"),l=qc(o,"padding");t=a.width-l.width-A.width,e=a.height-l.height-A.height,n=t0(o.maxWidth,s,"clientWidth"),i=t0(o.maxHeight,s,"clientHeight")}}return{width:t,height:e,maxWidth:n||Jm,maxHeight:i||Jm}}const _l=r=>Math.round(r*10)/10;function HD(r,t,e,n){const i=Y0(r),s=qc(i,"margin"),a=t0(i.maxWidth,r,"clientWidth")||Jm,o=t0(i.maxHeight,r,"clientHeight")||Jm,A=OD(r,t,e);let{width:l,height:c}=A;if(i.boxSizing==="content-box"){const h=qc(i,"border","width"),d=qc(i,"padding");l-=d.width+h.width,c-=d.height+h.height}return l=Math.max(0,l-s.width),c=Math.max(0,n?l/n:c-s.height),l=_l(Math.min(l,a,A.maxWidth)),c=_l(Math.min(c,o,A.maxHeight)),l&&!c&&(c=_l(l/2)),(t!==void 0||e!==void 0)&&n&&A.height&&c>A.height&&(c=A.height,l=_l(Math.floor(c*n))),{width:l,height:c}}function k_(r,t,e){const n=t||1,i=_l(r.height*n),s=_l(r.width*n);r.height=_l(r.height),r.width=_l(r.width);const a=r.canvas;return a.style&&(e||!a.style.height&&!a.style.width)&&(a.style.height=`${r.height}px`,a.style.width=`${r.width}px`),r.currentDevicePixelRatio!==n||a.height!==i||a.width!==s?(r.currentDevicePixelRatio=n,a.height=i,a.width=s,r.ctx.setTransform(n,0,0,n,0,0),!0):!1}const VD=(function(){let r=!1;try{const t={get passive(){return r=!0,!1}};Vv()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return r})();function I_(r,t){const e=DD(r,t),n=e&&e.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function Ic(r,t,e,n){return{x:r.x+e*(t.x-r.x),y:r.y+e*(t.y-r.y)}}function $D(r,t,e,n){return{x:r.x+e*(t.x-r.x),y:n==="middle"?e<.5?r.y:t.y:n==="after"?e<1?r.y:t.y:e>0?t.y:r.y}}function jD(r,t,e,n){const i={x:r.cp2x,y:r.cp2y},s={x:t.cp1x,y:t.cp1y},a=Ic(r,i,e),o=Ic(i,s,e),A=Ic(s,t,e),l=Ic(a,o,e),c=Ic(o,A,e);return Ic(l,c,e)}const GD=function(r,t){return{x(e){return r+r+t-e},setWidth(e){t=e},textAlign(e){return e==="center"?e:e==="right"?"left":"right"},xPlus(e,n){return e-n},leftForLtr(e,n){return e-n}}},KD=function(){return{x(r){return r},setWidth(r){},textAlign(r){return r},xPlus(r,t){return r+t},leftForLtr(r,t){return r}}};function cd(r,t,e){return r?GD(t,e):KD()}function Hk(r,t){let e,n;(t==="ltr"||t==="rtl")&&(e=r.canvas.style,n=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",t,"important"),r.prevTextDirection=n)}function Vk(r,t){t!==void 0&&(delete r.prevTextDirection,r.canvas.style.setProperty("direction",t[0],t[1]))}function $k(r){return r==="angle"?{between:If,compare:zN,normalize:As}:{between:bA,compare:(t,e)=>t-e,normalize:t=>t}}function T_({start:r,end:t,count:e,loop:n,style:i}){return{start:r%e,end:t%e,loop:n&&(t-r+1)%e===0,style:i}}function zD(r,t,e){const{property:n,start:i,end:s}=e,{between:a,normalize:o}=$k(n),A=t.length;let{start:l,end:c,loop:u}=r,h,d;if(u){for(l+=A,c+=A,h=0,d=A;h<d&&a(o(t[l%A][n]),i,s);++h)l--,c--;l%=A,c%=A}return c<l&&(c+=A),{start:l,end:c,loop:u,style:r.style}}function jk(r,t,e){if(!e)return[r];const{property:n,start:i,end:s}=e,a=t.length,{compare:o,between:A,normalize:l}=$k(n),{start:c,end:u,loop:h,style:d}=zD(r,t,e),m=[];let f=!1,b=null,y,B,I;const C=()=>A(i,I,y)&&o(i,I)!==0,N=()=>o(s,y)===0||A(s,I,y),R=()=>f||C(),U=()=>!f||N();for(let x=c,v=c;x<=u;++x)B=t[x%a],!B.skip&&(y=l(B[n]),y!==I&&(f=A(y,i,s),b===null&&R()&&(b=o(y,i)===0?x:v),b!==null&&U()&&(m.push(T_({start:b,end:x,loop:h,count:a,style:d})),b=null),v=x,I=y));return b!==null&&m.push(T_({start:b,end:u,loop:h,count:a,style:d})),m}function Gk(r,t){const e=[],n=r.segments;for(let i=0;i<n.length;i++){const s=jk(n[i],r.points,t);s.length&&e.push(...s)}return e}function qD(r,t,e,n){let i=0,s=t-1;if(e&&!n)for(;i<t&&!r[i].skip;)i++;for(;i<t&&r[i].skip;)i++;for(i%=t,e&&(s+=i);s>i&&r[s%t].skip;)s--;return s%=t,{start:i,end:s}}function WD(r,t,e,n){const i=r.length,s=[];let a=t,o=r[t],A;for(A=t+1;A<=e;++A){const l=r[A%i];l.skip||l.stop?o.skip||(n=!1,s.push({start:t%i,end:(A-1)%i,loop:n}),t=a=l.stop?A:null):(a=A,o.skip&&(t=A)),o=l}return a!==null&&s.push({start:t%i,end:a%i,loop:n}),s}function YD(r,t){const e=r.points,n=r.options.spanGaps,i=e.length;if(!i)return[];const s=!!r._loop,{start:a,end:o}=qD(e,i,s,n);if(n===!0)return F_(r,[{start:a,end:o,loop:s}],e,t);const A=o<a?o+i:o,l=!!r._fullLoop&&a===0&&o===i-1;return F_(r,WD(e,a,A,l),e,t)}function F_(r,t,e,n){return!n||!n.setContext||!e?t:XD(r,t,e,n)}function XD(r,t,e,n){const i=r._chart.getContext(),s=L_(r.options),{_datasetIndex:a,options:{spanGaps:o}}=r,A=e.length,l=[];let c=s,u=t[0].start,h=u;function d(m,f,b,y){const B=o?-1:1;if(m!==f){for(m+=A;e[m%A].skip;)m-=B;for(;e[f%A].skip;)f+=B;m%A!==f%A&&(l.push({start:m%A,end:f%A,loop:b,style:y}),c=y,u=f%A)}}for(const m of t){u=o?u:m.start;let f=e[u%A],b;for(h=u+1;h<=m.end;h++){const y=e[h%A];b=L_(n.setContext(ic(i,{type:"segment",p0:f,p1:y,p0DataIndex:(h-1)%A,p1DataIndex:h%A,datasetIndex:a}))),JD(b,c)&&d(u,h-1,m.loop,c),f=y,c=b}u<h-1&&d(u,h-1,m.loop,c)}return l}function L_(r){return{backgroundColor:r.backgroundColor,borderCapStyle:r.borderCapStyle,borderDash:r.borderDash,borderDashOffset:r.borderDashOffset,borderJoinStyle:r.borderJoinStyle,borderWidth:r.borderWidth,borderColor:r.borderColor}}function JD(r,t){if(!t)return!1;const e=[],n=function(i,s){return Mv(s)?(e.includes(s)||e.push(s),e.indexOf(s)):s};return JSON.stringify(r,n)!==JSON.stringify(t,n)}function op(r,t,e){return r.options.clip?r[e]:t[e]}function ZD(r,t){const{xScale:e,yScale:n}=r;return e&&n?{left:op(e,t,"left"),right:op(e,t,"right"),top:op(n,t,"top"),bottom:op(n,t,"bottom")}:t}function Kk(r,t){const e=t._clip;if(e.disabled)return!1;const n=ZD(t,r.chartArea);return{left:e.left===!1?0:n.left-(e.left===!0?0:e.left),right:e.right===!1?r.width:n.right+(e.right===!0?0:e.right),top:e.top===!1?0:n.top-(e.top===!0?0:e.top),bottom:e.bottom===!1?r.height:n.bottom+(e.bottom===!0?0:e.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class tM{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,n,i){const s=e.listeners[i],a=e.duration;s.forEach(o=>o({chart:t,initial:e.initial,numSteps:a,currentStep:Math.min(n-e.start,a)}))}_refresh(){this._request||(this._running=!0,this._request=kk.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((n,i)=>{if(!n.running||!n.items.length)return;const s=n.items;let a=s.length-1,o=!1,A;for(;a>=0;--a)A=s[a],A._active?(A._total>n.duration&&(n.duration=A._total),A.tick(t),o=!0):(s[a]=s[s.length-1],s.pop());o&&(i.draw(),this._notify(i,n,t,"progress")),s.length||(n.running=!1,this._notify(i,n,t,"complete"),n.initial=!1),e+=s.length}),this._lastDate=t,e===0&&(this._running=!1)}_getAnims(t){const e=this._charts;let n=e.get(t);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,n)),n}listen(t,e,n){this._getAnims(t).listeners[e].push(n)}add(t,e){!e||!e.length||this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((n,i)=>Math.max(n,i._duration),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!(!e||!e.running||!e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const n=e.items;let i=n.length-1;for(;i>=0;--i)n[i].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var uA=new tM;const U_="transparent",eM={boolean(r,t,e){return e>.5?t:r},color(r,t,e){const n=__(r||U_),i=n.valid&&__(t||U_);return i&&i.valid?i.mix(n,e).hexString():t},number(r,t,e){return r+(t-r)*e}};class rM{constructor(t,e,n,i){const s=e[n];i=dn([t.to,i,s,t.from]);const a=dn([t.from,s,i]);this._active=!0,this._fn=t.fn||eM[t.type||typeof a],this._easing=Zh[t.easing]||Zh.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=n,this._from=a,this._to=i,this._promises=void 0}active(){return this._active}update(t,e,n){if(this._active){this._notify(!1);const i=this._target[this._prop],s=n-this._start,a=this._duration-s;this._start=n,this._duration=Math.floor(Math.max(a,t.duration)),this._total+=s,this._loop=!!t.loop,this._to=dn([t.to,e,i,t.from]),this._from=dn([t.from,i,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,n=this._duration,i=this._prop,s=this._from,a=this._loop,o=this._to;let A;if(this._active=s!==o&&(a||e<n),!this._active){this._target[i]=o,this._notify(!0);return}if(e<0){this._target[i]=s;return}A=e/n%2,A=a&&A>1?2-A:A,A=this._easing(Math.min(1,Math.max(0,A))),this._target[i]=this._fn(s,o,A)}wait(){const t=this._promises||(this._promises=[]);return new Promise((e,n)=>{t.push({res:e,rej:n})})}_notify(t){const e=t?"res":"rej",n=this._promises||[];for(let i=0;i<n.length;i++)n[i][e]()}}class zk{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!cr(t))return;const e=Object.keys(mn.animation),n=this._properties;Object.getOwnPropertyNames(t).forEach(i=>{const s=t[i];if(!cr(s))return;const a={};for(const o of e)a[o]=s[o];(hn(s.properties)&&s.properties||[i]).forEach(o=>{(o===i||!n.has(o))&&n.set(o,a)})})}_animateOptions(t,e){const n=e.options,i=iM(t,n);if(!i)return[];const s=this._createAnimations(i,n);return n.$shared&&nM(t.options.$animations,n).then(()=>{t.options=n},()=>{}),s}_createAnimations(t,e){const n=this._properties,i=[],s=t.$animations||(t.$animations={}),a=Object.keys(e),o=Date.now();let A;for(A=a.length-1;A>=0;--A){const l=a[A];if(l.charAt(0)==="$")continue;if(l==="options"){i.push(...this._animateOptions(t,e));continue}const c=e[l];let u=s[l];const h=n.get(l);if(u)if(h&&u.active()){u.update(h,c,o);continue}else u.cancel();if(!h||!h.duration){t[l]=c;continue}s[l]=u=new rM(h,t,l,c),i.push(u)}return i}update(t,e){if(this._properties.size===0){Object.assign(t,e);return}const n=this._createAnimations(t,e);if(n.length)return uA.add(this._chart,n),!0}}function nM(r,t){const e=[],n=Object.keys(t);for(let i=0;i<n.length;i++){const s=r[n[i]];s&&s.active()&&e.push(s.wait())}return Promise.all(e)}function iM(r,t){if(!t)return;let e=r.options;if(!e){r.options=t;return}return e.$shared&&(r.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e}function P_(r,t){const e=r&&r.options||{},n=e.reverse,i=e.min===void 0?t:0,s=e.max===void 0?t:0;return{start:n?s:i,end:n?i:s}}function sM(r,t,e){if(e===!1)return!1;const n=P_(r,e),i=P_(t,e);return{top:i.end,right:n.end,bottom:i.start,left:n.start}}function aM(r){let t,e,n,i;return cr(r)?(t=r.top,e=r.right,n=r.bottom,i=r.left):t=e=n=i=r,{top:t,right:e,bottom:n,left:i,disabled:r===!1}}function qk(r,t){const e=[],n=r._getSortedDatasetMetas(t);let i,s;for(i=0,s=n.length;i<s;++i)e.push(n[i].index);return e}function N_(r,t,e,n={}){const i=r.keys,s=n.mode==="single";let a,o,A,l;if(t===null)return;let c=!1;for(a=0,o=i.length;a<o;++a){if(A=+i[a],A===e){if(c=!0,n.all)continue;break}l=r.values[A],Nn(l)&&(s||t===0||Pa(t)===Pa(l))&&(t+=l)}return!c&&!n.all?0:t}function oM(r,t){const{iScale:e,vScale:n}=t,i=e.axis==="x"?"x":"y",s=n.axis==="x"?"x":"y",a=Object.keys(r),o=new Array(a.length);let A,l,c;for(A=0,l=a.length;A<l;++A)c=a[A],o[A]={[i]:c,[s]:r[c]};return o}function cy(r,t){const e=r&&r.options.stacked;return e||e===void 0&&t.stack!==void 0}function AM(r,t,e){return`${r.id}.${t.id}.${e.stack||e.type}`}function lM(r){const{min:t,max:e,minDefined:n,maxDefined:i}=r.getUserBounds();return{min:n?t:Number.NEGATIVE_INFINITY,max:i?e:Number.POSITIVE_INFINITY}}function cM(r,t,e){const n=r[t]||(r[t]={});return n[e]||(n[e]={})}function D_(r,t,e,n){for(const i of t.getMatchingVisibleMetas(n).reverse()){const s=r[i.index];if(e&&s>0||!e&&s<0)return i.index}return null}function M_(r,t){const{chart:e,_cachedMeta:n}=r,i=e._stacks||(e._stacks={}),{iScale:s,vScale:a,index:o}=n,A=s.axis,l=a.axis,c=AM(s,a,n),u=t.length;let h;for(let d=0;d<u;++d){const m=t[d],{[A]:f,[l]:b}=m,y=m._stacks||(m._stacks={});h=y[l]=cM(i,c,f),h[o]=b,h._top=D_(h,a,!0,n.type),h._bottom=D_(h,a,!1,n.type);const B=h._visualValues||(h._visualValues={});B[o]=b}}function uy(r,t){const e=r.scales;return Object.keys(e).filter(n=>e[n].axis===t).shift()}function uM(r,t){return ic(r,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function dM(r,t,e){return ic(r,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"})}function mh(r,t){const e=r.controller.index,n=r.vScale&&r.vScale.axis;if(n){t=t||r._parsed;for(const i of t){const s=i._stacks;if(!s||s[n]===void 0||s[n][e]===void 0)return;delete s[n][e],s[n]._visualValues!==void 0&&s[n]._visualValues[e]!==void 0&&delete s[n]._visualValues[e]}}}const dy=r=>r==="reset"||r==="none",R_=(r,t)=>t?r:Object.assign({},r),hM=(r,t,e)=>r&&!t.hidden&&t._stacked&&{keys:qk(e,!0),values:null};class Ya{constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=cy(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&mh(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,n=this.getDataset(),i=(u,h,d,m)=>u==="x"?h:u==="r"?m:d,s=e.xAxisID=Oe(n.xAxisID,uy(t,"x")),a=e.yAxisID=Oe(n.yAxisID,uy(t,"y")),o=e.rAxisID=Oe(n.rAxisID,uy(t,"r")),A=e.indexAxis,l=e.iAxisID=i(A,s,a,o),c=e.vAxisID=i(A,a,s,o);e.xScale=this.getScaleForId(s),e.yScale=this.getScaleForId(a),e.rScale=this.getScaleForId(o),e.iScale=this.getScaleForId(l),e.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&w_(this._data,this),t._stacked&&mh(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),n=this._data;if(cr(e)){const i=this._cachedMeta;this._data=oM(e,i)}else if(n!==e){if(n){w_(n,this);const i=this._cachedMeta;mh(i),i._parsed=[]}e&&Object.isExtensible(e)&&XN(e,this),this._syncList=[],this._data=e}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,n=this.getDataset();let i=!1;this._dataCheck();const s=e._stacked;e._stacked=cy(e.vScale,e),e.stack!==n.stack&&(i=!0,mh(e),e.stack=n.stack),this._resyncElements(t),(i||s!==e._stacked)&&(M_(this,e._parsed),e._stacked=cy(e.vScale,e))}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),n=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:n,_data:i}=this,{iScale:s,_stacked:a}=n,o=s.axis;let A=t===0&&e===i.length?!0:n._sorted,l=t>0&&n._parsed[t-1],c,u,h;if(this._parsing===!1)n._parsed=i,n._sorted=!0,h=i;else{hn(i[t])?h=this.parseArrayData(n,i,t,e):cr(i[t])?h=this.parseObjectData(n,i,t,e):h=this.parsePrimitiveData(n,i,t,e);const d=()=>u[o]===null||l&&u[o]<l[o];for(c=0;c<e;++c)n._parsed[c+t]=u=h[c],A&&(d()&&(A=!1),l=u);n._sorted=A}a&&M_(this,h)}parsePrimitiveData(t,e,n,i){const{iScale:s,vScale:a}=t,o=s.axis,A=a.axis,l=s.getLabels(),c=s===a,u=new Array(i);let h,d,m;for(h=0,d=i;h<d;++h)m=h+n,u[h]={[o]:c||s.parse(l[m],m),[A]:a.parse(e[m],m)};return u}parseArrayData(t,e,n,i){const{xScale:s,yScale:a}=t,o=new Array(i);let A,l,c,u;for(A=0,l=i;A<l;++A)c=A+n,u=e[c],o[A]={x:s.parse(u[0],c),y:a.parse(u[1],c)};return o}parseObjectData(t,e,n,i){const{xScale:s,yScale:a}=t,{xAxisKey:o="x",yAxisKey:A="y"}=this._parsing,l=new Array(i);let c,u,h,d;for(c=0,u=i;c<u;++c)h=c+n,d=e[h],l[c]={x:s.parse(jl(d,o),h),y:a.parse(jl(d,A),h)};return l}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,n){const i=this.chart,s=this._cachedMeta,a=e[t.axis],o={keys:qk(i,!0),values:e._stacks[t.axis]._visualValues};return N_(o,a,s.index,{mode:n})}updateRangeFromParsed(t,e,n,i){const s=n[e.axis];let a=s===null?NaN:s;const o=i&&n._stacks[e.axis];i&&o&&(i.values=o,a=N_(i,s,this._cachedMeta.index)),t.min=Math.min(t.min,a),t.max=Math.max(t.max,a)}getMinMax(t,e){const n=this._cachedMeta,i=n._parsed,s=n._sorted&&t===n.iScale,a=i.length,o=this._getOtherScale(t),A=hM(e,n,this.chart),l={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:u}=lM(o);let h,d;function m(){d=i[h];const f=d[o.axis];return!Nn(d[t.axis])||c>f||u<f}for(h=0;h<a&&!(!m()&&(this.updateRangeFromParsed(l,t,d,A),s));++h);if(s){for(h=a-1;h>=0;--h)if(!m()){this.updateRangeFromParsed(l,t,d,A);break}}return l}getAllParsedValues(t){const e=this._cachedMeta._parsed,n=[];let i,s,a;for(i=0,s=e.length;i<s;++i)a=e[i][t.axis],Nn(a)&&n.push(a);return n}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,n=e.iScale,i=e.vScale,s=this.getParsed(t);return{label:n?""+n.getLabelForValue(s[n.axis]):"",value:i?""+i.getLabelForValue(s[i.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=aM(Oe(this.options.clip,sM(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,n=this._cachedMeta,i=n.data||[],s=e.chartArea,a=[],o=this._drawStart||0,A=this._drawCount||i.length-o,l=this.options.drawActiveElementsOnTop;let c;for(n.dataset&&n.dataset.draw(t,s,o,A),c=o;c<o+A;++c){const u=i[c];u.hidden||(u.active&&l?a.push(u):u.draw(t,s))}for(c=0;c<a.length;++c)a[c].draw(t,s)}getStyle(t,e){const n=e?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(t||0,n)}getContext(t,e,n){const i=this.getDataset();let s;if(t>=0&&t<this._cachedMeta.data.length){const a=this._cachedMeta.data[t];s=a.$context||(a.$context=dM(this.getContext(),t,a)),s.parsed=this.getParsed(t),s.raw=i.data[t],s.index=s.dataIndex=t}else s=this.$context||(this.$context=uM(this.chart.getContext(),this.index)),s.dataset=i,s.index=s.datasetIndex=this.index;return s.active=!!e,s.mode=n,s}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",n){const i=e==="active",s=this._cachedDataOpts,a=t+"-"+e,o=s[a],A=this.enableOptionSharing&&kf(n);if(o)return R_(o,A);const l=this.chart.config,c=l.datasetElementScopeKeys(this._type,t),u=i?[`${t}Hover`,"hover",t,""]:[t,""],h=l.getOptionScopes(this.getDataset(),c),d=Object.keys(mn.elements[t]),m=()=>this.getContext(n,i,e),f=l.resolveNamedOptions(h,d,m,u);return f.$shared&&(f.$shared=A,s[a]=Object.freeze(R_(f,A))),f}_resolveAnimations(t,e,n){const i=this.chart,s=this._cachedDataOpts,a=`animation-${e}`,o=s[a];if(o)return o;let A;if(i.options.animation!==!1){const c=this.chart.config,u=c.datasetAnimationScopeKeys(this._type,e),h=c.getOptionScopes(this.getDataset(),u);A=c.createResolver(h,this.getContext(t,n,e))}const l=new zk(i,A&&A.animations);return A&&A._cacheable&&(s[a]=Object.freeze(l)),l}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||dy(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const n=this.resolveDataElementOptions(t,e),i=this._sharedOptions,s=this.getSharedOptions(n),a=this.includeOptions(e,s)||s!==i;return this.updateSharedOptions(s,e,n),{sharedOptions:s,includeOptions:a}}updateElement(t,e,n,i){dy(i)?Object.assign(t,n):this._resolveAnimations(e,i).update(t,n)}updateSharedOptions(t,e,n){t&&!dy(e)&&this._resolveAnimations(void 0,e).update(t,n)}_setStyle(t,e,n,i){t.active=i;const s=this.getStyle(e,i);this._resolveAnimations(e,n,i).update(t,{options:!i&&this.getSharedOptions(s)||s})}removeHoverStyle(t,e,n){this._setStyle(t,n,"active",!1)}setHoverStyle(t,e,n){this._setStyle(t,n,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,n=this._cachedMeta.data;for(const[o,A,l]of this._syncList)this[o](A,l);this._syncList=[];const i=n.length,s=e.length,a=Math.min(s,i);a&&this.parse(0,a),s>i?this._insertElements(i,s-i,t):s<i&&this._removeElements(s,i-s)}_insertElements(t,e,n=!0){const i=this._cachedMeta,s=i.data,a=t+e;let o;const A=l=>{for(l.length+=e,o=l.length-1;o>=a;o--)l[o]=l[o-e]};for(A(s),o=t;o<a;++o)s[o]=new this.dataElementType;this._parsing&&A(i._parsed),this.parse(t,e),n&&this.updateElements(s,t,e,"reset")}updateElements(t,e,n,i){}_removeElements(t,e){const n=this._cachedMeta;if(this._parsing){const i=n._parsed.splice(t,e);n._stacked&&mh(n,i)}n.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,n,i]=t;this[e](n,i)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const n=arguments.length-2;n&&this._sync(["_insertElements",t,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}It(Ya,"defaults",{}),It(Ya,"datasetElementType",null),It(Ya,"dataElementType",null);function fM(r,t){if(!r._cache.$bar){const e=r.getMatchingVisibleMetas(t);let n=[];for(let i=0,s=e.length;i<s;i++)n=n.concat(e[i].controller.getAllParsedValues(r));r._cache.$bar=Sk(n.sort((i,s)=>i-s))}return r._cache.$bar}function gM(r){const t=r.iScale,e=fM(t,r.type);let n=t._length,i,s,a,o;const A=()=>{a===32767||a===-32768||(kf(o)&&(n=Math.min(n,Math.abs(a-o)||n)),o=a)};for(i=0,s=e.length;i<s;++i)a=t.getPixelForValue(e[i]),A();for(o=void 0,i=0,s=t.ticks.length;i<s;++i)a=t.getPixelForTick(i),A();return n}function pM(r,t,e,n){const i=e.barThickness;let s,a;return er(i)?(s=t.min*e.categoryPercentage,a=e.barPercentage):(s=i*n,a=1),{chunk:s/n,ratio:a,start:t.pixels[r]-s/2}}function mM(r,t,e,n){const i=t.pixels,s=i[r];let a=r>0?i[r-1]:null,o=r<i.length-1?i[r+1]:null;const A=e.categoryPercentage;a===null&&(a=s-(o===null?t.end-t.start:o-s)),o===null&&(o=s+s-a);const l=s-(s-Math.min(a,o))/2*A;return{chunk:Math.abs(o-a)/2*A/n,ratio:e.barPercentage,start:l}}function bM(r,t,e,n){const i=e.parse(r[0],n),s=e.parse(r[1],n),a=Math.min(i,s),o=Math.max(i,s);let A=a,l=o;Math.abs(a)>Math.abs(o)&&(A=o,l=a),t[e.axis]=l,t._custom={barStart:A,barEnd:l,start:i,end:s,min:a,max:o}}function Wk(r,t,e,n){return hn(r)?bM(r,t,e,n):t[e.axis]=e.parse(r,n),t}function Q_(r,t,e,n){const i=r.iScale,s=r.vScale,a=i.getLabels(),o=i===s,A=[];let l,c,u,h;for(l=e,c=e+n;l<c;++l)h=t[l],u={},u[i.axis]=o||i.parse(a[l],l),A.push(Wk(h,u,s,l));return A}function hy(r){return r&&r.barStart!==void 0&&r.barEnd!==void 0}function yM(r,t,e){return r!==0?Pa(r):(t.isHorizontal()?1:-1)*(t.min>=e?1:-1)}function wM(r){let t,e,n,i,s;return r.horizontal?(t=r.base>r.x,e="left",n="right"):(t=r.base<r.y,e="bottom",n="top"),t?(i="end",s="start"):(i="start",s="end"),{start:e,end:n,reverse:t,top:i,bottom:s}}function vM(r,t,e,n){let i=t.borderSkipped;const s={};if(!i){r.borderSkipped=s;return}if(i===!0){r.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:a,end:o,reverse:A,top:l,bottom:c}=wM(r);i==="middle"&&e&&(r.enableBorderRadius=!0,(e._top||0)===n?i=l:(e._bottom||0)===n?i=c:(s[O_(c,a,o,A)]=!0,i=l)),s[O_(i,a,o,A)]=!0,r.borderSkipped=s}function O_(r,t,e,n){return n?(r=xM(r,t,e),r=H_(r,e,t)):r=H_(r,t,e),r}function xM(r,t,e){return r===t?e:r===e?t:r}function H_(r,t,e){return r==="start"?t:r==="end"?e:r}function _M(r,{inflateAmount:t},e){r.inflateAmount=t==="auto"?e===1?.33:0:t}class pm extends Ya{parsePrimitiveData(t,e,n,i){return Q_(t,e,n,i)}parseArrayData(t,e,n,i){return Q_(t,e,n,i)}parseObjectData(t,e,n,i){const{iScale:s,vScale:a}=t,{xAxisKey:o="x",yAxisKey:A="y"}=this._parsing,l=s.axis==="x"?o:A,c=a.axis==="x"?o:A,u=[];let h,d,m,f;for(h=n,d=n+i;h<d;++h)f=e[h],m={},m[s.axis]=s.parse(jl(f,l),h),u.push(Wk(jl(f,c),m,a,h));return u}updateRangeFromParsed(t,e,n,i){super.updateRangeFromParsed(t,e,n,i);const s=n._custom;s&&e===this._cachedMeta.vScale&&(t.min=Math.min(t.min,s.min),t.max=Math.max(t.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const e=this._cachedMeta,{iScale:n,vScale:i}=e,s=this.getParsed(t),a=s._custom,o=hy(a)?"["+a.start+", "+a.end+"]":""+i.getLabelForValue(s[i.axis]);return{label:""+n.getLabelForValue(s[n.axis]),value:o}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}updateElements(t,e,n,i){const s=i==="reset",{index:a,_cachedMeta:{vScale:o}}=this,A=o.getBasePixel(),l=o.isHorizontal(),c=this._getRuler(),{sharedOptions:u,includeOptions:h}=this._getSharedOptions(e,i);for(let d=e;d<e+n;d++){const m=this.getParsed(d),f=s||er(m[o.axis])?{base:A,head:A}:this._calculateBarValuePixels(d),b=this._calculateBarIndexPixels(d,c),y=(m._stacks||{})[o.axis],B={horizontal:l,base:f.base,enableBorderRadius:!y||hy(m._custom)||a===y._top||a===y._bottom,x:l?f.head:b.center,y:l?b.center:f.head,height:l?b.size:Math.abs(f.size),width:l?Math.abs(f.size):b.size};h&&(B.options=u||this.resolveDataElementOptions(d,t[d].active?"active":i));const I=B.options||t[d].options;vM(B,I,y,a),_M(B,I,c.ratio),this.updateElement(t[d],d,B,i)}}_getStacks(t,e){const{iScale:n}=this._cachedMeta,i=n.getMatchingVisibleMetas(this._type).filter(c=>c.controller.options.grouped),s=n.options.stacked,a=[],o=this._cachedMeta.controller.getParsed(e),A=o&&o[n.axis],l=c=>{const u=c._parsed.find(d=>d[n.axis]===A),h=u&&u[c.vScale.axis];if(er(h)||isNaN(h))return!0};for(const c of i)if(!(e!==void 0&&l(c))&&((s===!1||a.indexOf(c.stack)===-1||s===void 0&&c.stack===void 0)&&a.push(c.stack),c.index===t))break;return a.length||a.push(void 0),a}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const t=this.chart.scales,e=this.chart.options.indexAxis;return Object.keys(t).filter(n=>t[n].axis===e).shift()}_getAxis(){const t={},e=this.getFirstScaleIdForIndexAxis();for(const n of this.chart.data.datasets)t[Oe(this.chart.options.indexAxis==="x"?n.xAxisID:n.yAxisID,e)]=!0;return Object.keys(t)}_getStackIndex(t,e,n){const i=this._getStacks(t,n),s=e!==void 0?i.indexOf(e):-1;return s===-1?i.length-1:s}_getRuler(){const t=this.options,e=this._cachedMeta,n=e.iScale,i=[];let s,a;for(s=0,a=e.data.length;s<a;++s)i.push(n.getPixelForValue(this.getParsed(s)[n.axis],s));const o=t.barThickness;return{min:o||gM(e),pixels:i,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:t.grouped,ratio:o?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:e,_stacked:n,index:i},options:{base:s,minBarLength:a}}=this,o=s||0,A=this.getParsed(t),l=A._custom,c=hy(l);let u=A[e.axis],h=0,d=n?this.applyStack(e,A,n):u,m,f;d!==u&&(h=d-u,d=u),c&&(u=l.barStart,d=l.barEnd-l.barStart,u!==0&&Pa(u)!==Pa(l.barEnd)&&(h=0),h+=u);const b=!er(s)&&!c?s:h;let y=e.getPixelForValue(b);if(this.chart.getDataVisibility(t)?m=e.getPixelForValue(h+d):m=y,f=m-y,Math.abs(f)<a){f=yM(f,e,o)*a,u===o&&(y-=f/2);const B=e.getPixelForDecimal(0),I=e.getPixelForDecimal(1),C=Math.min(B,I),N=Math.max(B,I);y=Math.max(Math.min(y,N),C),m=y+f,n&&!c&&(A._stacks[e.axis]._visualValues[i]=e.getValueForPixel(m)-e.getValueForPixel(y))}if(y===e.getPixelForValue(o)){const B=Pa(f)*e.getLineWidthForValue(o)/2;y+=B,f-=B}return{size:f,base:y,head:m,center:m+f/2}}_calculateBarIndexPixels(t,e){const n=e.scale,i=this.options,s=i.skipNull,a=Oe(i.maxBarThickness,1/0);let o,A;const l=this._getAxisCount();if(e.grouped){const c=s?this._getStackCount(t):e.stackCount,u=i.barThickness==="flex"?mM(t,e,i,c*l):pM(t,e,i,c*l),h=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,d=this._getAxis().indexOf(Oe(h,this.getFirstScaleIdForIndexAxis())),m=this._getStackIndex(this.index,this._cachedMeta.stack,s?t:void 0)+d;o=u.start+u.chunk*m+u.chunk/2,A=Math.min(a,u.chunk*u.ratio)}else o=n.getPixelForValue(this.getParsed(t)[n.axis],t),A=Math.min(a,e.min*e.ratio);return{base:o-A/2,head:o+A/2,center:o,size:A}}draw(){const t=this._cachedMeta,e=t.vScale,n=t.data,i=n.length;let s=0;for(;s<i;++s)this.getParsed(s)[e.axis]!==null&&!n[s].hidden&&n[s].draw(this._ctx)}}It(pm,"id","bar"),It(pm,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),It(pm,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class mm extends Ya{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,e,n,i){const s=super.parsePrimitiveData(t,e,n,i);for(let a=0;a<s.length;a++)s[a]._custom=this.resolveDataElementOptions(a+n).radius;return s}parseArrayData(t,e,n,i){const s=super.parseArrayData(t,e,n,i);for(let a=0;a<s.length;a++){const o=e[n+a];s[a]._custom=Oe(o[2],this.resolveDataElementOptions(a+n).radius)}return s}parseObjectData(t,e,n,i){const s=super.parseObjectData(t,e,n,i);for(let a=0;a<s.length;a++){const o=e[n+a];s[a]._custom=Oe(o&&o.r&&+o.r,this.resolveDataElementOptions(a+n).radius)}return s}getMaxOverflow(){const t=this._cachedMeta.data;let e=0;for(let n=t.length-1;n>=0;--n)e=Math.max(e,t[n].size(this.resolveDataElementOptions(n))/2);return e>0&&e}getLabelAndValue(t){const e=this._cachedMeta,n=this.chart.data.labels||[],{xScale:i,yScale:s}=e,a=this.getParsed(t),o=i.getLabelForValue(a.x),A=s.getLabelForValue(a.y),l=a._custom;return{label:n[t]||"",value:"("+o+", "+A+(l?", "+l:"")+")"}}update(t){const e=this._cachedMeta.data;this.updateElements(e,0,e.length,t)}updateElements(t,e,n,i){const s=i==="reset",{iScale:a,vScale:o}=this._cachedMeta,{sharedOptions:A,includeOptions:l}=this._getSharedOptions(e,i),c=a.axis,u=o.axis;for(let h=e;h<e+n;h++){const d=t[h],m=!s&&this.getParsed(h),f={},b=f[c]=s?a.getPixelForDecimal(.5):a.getPixelForValue(m[c]),y=f[u]=s?o.getBasePixel():o.getPixelForValue(m[u]);f.skip=isNaN(b)||isNaN(y),l&&(f.options=A||this.resolveDataElementOptions(h,d.active?"active":i),s&&(f.options.radius=0)),this.updateElement(d,h,f,i)}}resolveDataElementOptions(t,e){const n=this.getParsed(t);let i=super.resolveDataElementOptions(t,e);i.$shared&&(i=Object.assign({},i,{$shared:!1}));const s=i.radius;return e!=="active"&&(i.radius=0),i.radius+=Oe(n&&n._custom,s),i}}It(mm,"id","bubble"),It(mm,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),It(mm,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function BM(r,t,e){let n=1,i=1,s=0,a=0;if(t<pn){const o=r,A=o+t,l=Math.cos(o),c=Math.sin(o),u=Math.cos(A),h=Math.sin(A),d=(I,C,N)=>If(I,o,A,!0)?1:Math.max(C,C*e,N,N*e),m=(I,C,N)=>If(I,o,A,!0)?-1:Math.min(C,C*e,N,N*e),f=d(0,l,u),b=d(Xn,c,h),y=m(Fr,l,u),B=m(Fr+Xn,c,h);n=(f-y)/2,i=(b-B)/2,s=-(f+y)/2,a=-(b+B)/2}return{ratioX:n,ratioY:i,offsetX:s,offsetY:a}}class Rc extends Ya{constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){const n=this.getDataset().data,i=this._cachedMeta;if(this._parsing===!1)i._parsed=n;else{let s=A=>+n[A];if(cr(n[t])){const{key:A="value"}=this._parsing;s=l=>+jl(n[l],A)}let a,o;for(a=t,o=t+e;a<o;++a)i._parsed[a]=s(a)}}_getRotation(){return za(this.options.rotation-90)}_getCircumference(){return za(this.options.circumference)}_getRotationExtents(){let t=pn,e=-pn;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const i=this.chart.getDatasetMeta(n).controller,s=i._getRotation(),a=i._getCircumference();t=Math.min(t,s),e=Math.max(e,s+a)}return{rotation:t,circumference:e-t}}update(t){const e=this.chart,{chartArea:n}=e,i=this._cachedMeta,s=i.data,a=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,o=Math.max((Math.min(n.width,n.height)-a)/2,0),A=Math.min(DN(this.options.cutout,o),1),l=this._getRingWeight(this.index),{circumference:c,rotation:u}=this._getRotationExtents(),{ratioX:h,ratioY:d,offsetX:m,offsetY:f}=BM(u,c,A),b=(n.width-a)/h,y=(n.height-a)/d,B=Math.max(Math.min(b,y)/2,0),I=xk(this.options.radius,B),C=Math.max(I*A,0),N=(I-C)/this._getVisibleDatasetWeightTotal();this.offsetX=m*I,this.offsetY=f*I,i.total=this.calculateTotal(),this.outerRadius=I-N*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-N*l,0),this.updateElements(s,0,s.length,t)}_circumference(t,e){const n=this.options,i=this._cachedMeta,s=this._getCircumference();return e&&n.animation.animateRotate||!this.chart.getDataVisibility(t)||i._parsed[t]===null||i.data[t].hidden?0:this.calculateCircumference(i._parsed[t]*s/pn)}updateElements(t,e,n,i){const s=i==="reset",a=this.chart,o=a.chartArea,l=a.options.animation,c=(o.left+o.right)/2,u=(o.top+o.bottom)/2,h=s&&l.animateScale,d=h?0:this.innerRadius,m=h?0:this.outerRadius,{sharedOptions:f,includeOptions:b}=this._getSharedOptions(e,i);let y=this._getRotation(),B;for(B=0;B<e;++B)y+=this._circumference(B,s);for(B=e;B<e+n;++B){const I=this._circumference(B,s),C=t[B],N={x:c+this.offsetX,y:u+this.offsetY,startAngle:y,endAngle:y+I,circumference:I,outerRadius:m,innerRadius:d};b&&(N.options=f||this.resolveDataElementOptions(B,C.active?"active":i)),y+=I,this.updateElement(C,B,N,i)}}calculateTotal(){const t=this._cachedMeta,e=t.data;let n=0,i;for(i=0;i<e.length;i++){const s=t._parsed[i];s!==null&&!isNaN(s)&&this.chart.getDataVisibility(i)&&!e[i].hidden&&(n+=Math.abs(s))}return n}calculateCircumference(t){const e=this._cachedMeta.total;return e>0&&!isNaN(t)?pn*(Math.abs(t)/e):0}getLabelAndValue(t){const e=this._cachedMeta,n=this.chart,i=n.data.labels||[],s=ng(e._parsed[t],n.options.locale);return{label:i[t]||"",value:s}}getMaxBorderWidth(t){let e=0;const n=this.chart;let i,s,a,o,A;if(!t){for(i=0,s=n.data.datasets.length;i<s;++i)if(n.isDatasetVisible(i)){a=n.getDatasetMeta(i),t=a.data,o=a.controller;break}}if(!t)return 0;for(i=0,s=t.length;i<s;++i)A=o.resolveDataElementOptions(i),A.borderAlign!=="inner"&&(e=Math.max(e,A.borderWidth||0,A.hoverBorderWidth||0));return e}getMaxOffset(t){let e=0;for(let n=0,i=t.length;n<i;++n){const s=this.resolveDataElementOptions(n);e=Math.max(e,s.offset||0,s.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let n=0;n<t;++n)this.chart.isDatasetVisible(n)&&(e+=this._getRingWeight(n));return e}_getRingWeight(t){return Math.max(Oe(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}It(Rc,"id","doughnut"),It(Rc,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),It(Rc,"descriptors",{_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")}),It(Rc,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data,{labels:{pointStyle:n,textAlign:i,color:s,useBorderRadius:a,borderRadius:o}}=t.legend.options;return e.labels.length&&e.datasets.length?e.labels.map((A,l)=>{const u=t.getDatasetMeta(0).controller.getStyle(l);return{text:A,fillStyle:u.backgroundColor,fontColor:s,hidden:!t.getDataVisibility(l),lineDash:u.borderDash,lineDashOffset:u.borderDashOffset,lineJoin:u.borderJoinStyle,lineWidth:u.borderWidth,strokeStyle:u.borderColor,textAlign:i,pointStyle:n,borderRadius:a&&(o||u.borderRadius),index:l}}):[]}},onClick(t,e,n){n.chart.toggleDataVisibility(e.index),n.chart.update()}}}});class bm extends Ya{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const e=this._cachedMeta,{dataset:n,data:i=[],_dataset:s}=e,a=this.chart._animationsDisabled;let{start:o,count:A}=Tk(e,i,a);this._drawStart=o,this._drawCount=A,Fk(e)&&(o=0,A=i.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!s._decimated,n.points=i;const l=this.resolveDatasetElementOptions(t);this.options.showLine||(l.borderWidth=0),l.segment=this.options.segment,this.updateElement(n,void 0,{animated:!a,options:l},t),this.updateElements(i,o,A,t)}updateElements(t,e,n,i){const s=i==="reset",{iScale:a,vScale:o,_stacked:A,_dataset:l}=this._cachedMeta,{sharedOptions:c,includeOptions:u}=this._getSharedOptions(e,i),h=a.axis,d=o.axis,{spanGaps:m,segment:f}=this.options,b=_d(m)?m:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||s||i==="none",B=e+n,I=t.length;let C=e>0&&this.getParsed(e-1);for(let N=0;N<I;++N){const R=t[N],U=y?R:{};if(N<e||N>=B){U.skip=!0;continue}const x=this.getParsed(N),v=er(x[d]),T=U[h]=a.getPixelForValue(x[h],N),E=U[d]=s||v?o.getBasePixel():o.getPixelForValue(A?this.applyStack(o,x,A):x[d],N);U.skip=isNaN(T)||isNaN(E)||v,U.stop=N>0&&Math.abs(x[h]-C[h])>b,f&&(U.parsed=x,U.raw=l.data[N]),u&&(U.options=c||this.resolveDataElementOptions(N,R.active?"active":i)),y||this.updateElement(R,N,U,i),C=x}}getMaxOverflow(){const t=this._cachedMeta,e=t.dataset,n=e.options&&e.options.borderWidth||0,i=t.data||[];if(!i.length)return n;const s=i[0].size(this.resolveDataElementOptions(0)),a=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(n,s,a)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}It(bm,"id","line"),It(bm,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),It(bm,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class ef extends Ya{constructor(t,e){super(t,e),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const e=this._cachedMeta,n=this.chart,i=n.data.labels||[],s=ng(e._parsed[t].r,n.options.locale);return{label:i[t]||"",value:s}}parseObjectData(t,e,n,i){return Qk.bind(this)(t,e,n,i)}update(t){const e=this._cachedMeta.data;this._updateRadius(),this.updateElements(e,0,e.length,t)}getMinMax(){const t=this._cachedMeta,e={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach((n,i)=>{const s=this.getParsed(i).r;!isNaN(s)&&this.chart.getDataVisibility(i)&&(s<e.min&&(e.min=s),s>e.max&&(e.max=s))}),e}_updateRadius(){const t=this.chart,e=t.chartArea,n=t.options,i=Math.min(e.right-e.left,e.bottom-e.top),s=Math.max(i/2,0),a=Math.max(n.cutoutPercentage?s/100*n.cutoutPercentage:1,0),o=(s-a)/t.getVisibleDatasetCount();this.outerRadius=s-o*this.index,this.innerRadius=this.outerRadius-o}updateElements(t,e,n,i){const s=i==="reset",a=this.chart,A=a.options.animation,l=this._cachedMeta.rScale,c=l.xCenter,u=l.yCenter,h=l.getIndexAngle(0)-.5*Fr;let d=h,m;const f=360/this.countVisibleElements();for(m=0;m<e;++m)d+=this._computeAngle(m,i,f);for(m=e;m<e+n;m++){const b=t[m];let y=d,B=d+this._computeAngle(m,i,f),I=a.getDataVisibility(m)?l.getDistanceFromCenterForValue(this.getParsed(m).r):0;d=B,s&&(A.animateScale&&(I=0),A.animateRotate&&(y=B=h));const C={x:c,y:u,innerRadius:0,outerRadius:I,startAngle:y,endAngle:B,options:this.resolveDataElementOptions(m,b.active?"active":i)};this.updateElement(b,m,C,i)}}countVisibleElements(){const t=this._cachedMeta;let e=0;return t.data.forEach((n,i)=>{!isNaN(this.getParsed(i).r)&&this.chart.getDataVisibility(i)&&e++}),e}_computeAngle(t,e,n){return this.chart.getDataVisibility(t)?za(this.resolveDataElementOptions(t,e).angle||n):0}}It(ef,"id","polarArea"),It(ef,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),It(ef,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:n,color:i}}=t.legend.options;return e.labels.map((s,a)=>{const A=t.getDatasetMeta(0).controller.getStyle(a);return{text:s,fillStyle:A.backgroundColor,strokeStyle:A.borderColor,fontColor:i,lineWidth:A.borderWidth,pointStyle:n,hidden:!t.getDataVisibility(a),index:a}})}return[]}},onClick(t,e,n){n.chart.toggleDataVisibility(e.index),n.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class Ow extends Rc{}It(Ow,"id","pie"),It(Ow,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class ym extends Ya{getLabelAndValue(t){const e=this._cachedMeta.vScale,n=this.getParsed(t);return{label:e.getLabels()[t],value:""+e.getLabelForValue(n[e.axis])}}parseObjectData(t,e,n,i){return Qk.bind(this)(t,e,n,i)}update(t){const e=this._cachedMeta,n=e.dataset,i=e.data||[],s=e.iScale.getLabels();if(n.points=i,t!=="resize"){const a=this.resolveDatasetElementOptions(t);this.options.showLine||(a.borderWidth=0);const o={_loop:!0,_fullLoop:s.length===i.length,options:a};this.updateElement(n,void 0,o,t)}this.updateElements(i,0,i.length,t)}updateElements(t,e,n,i){const s=this._cachedMeta.rScale,a=i==="reset";for(let o=e;o<e+n;o++){const A=t[o],l=this.resolveDataElementOptions(o,A.active?"active":i),c=s.getPointPositionForValue(o,this.getParsed(o).r),u=a?s.xCenter:c.x,h=a?s.yCenter:c.y,d={x:u,y:h,angle:c.angle,skip:isNaN(u)||isNaN(h),options:l};this.updateElement(A,o,d,i)}}}It(ym,"id","radar"),It(ym,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),It(ym,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class wm extends Ya{getLabelAndValue(t){const e=this._cachedMeta,n=this.chart.data.labels||[],{xScale:i,yScale:s}=e,a=this.getParsed(t),o=i.getLabelForValue(a.x),A=s.getLabelForValue(a.y);return{label:n[t]||"",value:"("+o+", "+A+")"}}update(t){const e=this._cachedMeta,{data:n=[]}=e,i=this.chart._animationsDisabled;let{start:s,count:a}=Tk(e,n,i);if(this._drawStart=s,this._drawCount=a,Fk(e)&&(s=0,a=n.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:o,_dataset:A}=e;o._chart=this.chart,o._datasetIndex=this.index,o._decimated=!!A._decimated,o.points=n;const l=this.resolveDatasetElementOptions(t);l.segment=this.options.segment,this.updateElement(o,void 0,{animated:!i,options:l},t)}else this.datasetElementType&&(delete e.dataset,this.datasetElementType=!1);this.updateElements(n,s,a,t)}addElements(){const{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,e,n,i){const s=i==="reset",{iScale:a,vScale:o,_stacked:A,_dataset:l}=this._cachedMeta,c=this.resolveDataElementOptions(e,i),u=this.getSharedOptions(c),h=this.includeOptions(i,u),d=a.axis,m=o.axis,{spanGaps:f,segment:b}=this.options,y=_d(f)?f:Number.POSITIVE_INFINITY,B=this.chart._animationsDisabled||s||i==="none";let I=e>0&&this.getParsed(e-1);for(let C=e;C<e+n;++C){const N=t[C],R=this.getParsed(C),U=B?N:{},x=er(R[m]),v=U[d]=a.getPixelForValue(R[d],C),T=U[m]=s||x?o.getBasePixel():o.getPixelForValue(A?this.applyStack(o,R,A):R[m],C);U.skip=isNaN(v)||isNaN(T)||x,U.stop=C>0&&Math.abs(R[d]-I[d])>y,b&&(U.parsed=R,U.raw=l.data[C]),h&&(U.options=u||this.resolveDataElementOptions(C,N.active?"active":i)),B||this.updateElement(N,C,U,i),I=R}this.updateSharedOptions(u,i,c)}getMaxOverflow(){const t=this._cachedMeta,e=t.data||[];if(!this.options.showLine){let o=0;for(let A=e.length-1;A>=0;--A)o=Math.max(o,e[A].size(this.resolveDataElementOptions(A))/2);return o>0&&o}const n=t.dataset,i=n.options&&n.options.borderWidth||0;if(!e.length)return i;const s=e[0].size(this.resolveDataElementOptions(0)),a=e[e.length-1].size(this.resolveDataElementOptions(e.length-1));return Math.max(i,s,a)/2}}It(wm,"id","scatter"),It(wm,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),It(wm,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var CM=Object.freeze({__proto__:null,BarController:pm,BubbleController:mm,DoughnutController:Rc,LineController:bm,PieController:Ow,PolarAreaController:ef,RadarController:ym,ScatterController:wm});function Ec(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class jv{constructor(t){It(this,"options");this.options=t||{}}static override(t){Object.assign(jv.prototype,t)}init(){}formats(){return Ec()}parse(){return Ec()}format(){return Ec()}add(){return Ec()}diff(){return Ec()}startOf(){return Ec()}endOf(){return Ec()}}var Yk={_date:jv};function EM(r,t,e,n){const{controller:i,data:s,_sorted:a}=r,o=i._cachedMeta.iScale,A=r.dataset&&r.dataset.options?r.dataset.options.spanGaps:null;if(o&&t===o.axis&&t!=="r"&&a&&s.length){const l=o._reversePixels?WN:yA;if(n){if(i._sharedOptions){const c=s[0],u=typeof c.getRange=="function"&&c.getRange(t);if(u){const h=l(s,t,e-u),d=l(s,t,e+u);return{lo:h.lo,hi:d.hi}}}}else{const c=l(s,t,e);if(A){const{vScale:u}=i._cachedMeta,{_parsed:h}=r,d=h.slice(0,c.lo+1).reverse().findIndex(f=>!er(f[u.axis]));c.lo-=Math.max(0,d);const m=h.slice(c.hi).findIndex(f=>!er(f[u.axis]));c.hi+=Math.max(0,m)}return c}}return{lo:0,hi:s.length-1}}function X0(r,t,e,n,i){const s=r.getSortedVisibleDatasetMetas(),a=e[t];for(let o=0,A=s.length;o<A;++o){const{index:l,data:c}=s[o],{lo:u,hi:h}=EM(s[o],t,a,i);for(let d=u;d<=h;++d){const m=c[d];m.skip||n(m,l,d)}}}function SM(r){const t=r.indexOf("x")!==-1,e=r.indexOf("y")!==-1;return function(n,i){const s=t?Math.abs(n.x-i.x):0,a=e?Math.abs(n.y-i.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(a,2))}}function fy(r,t,e,n,i){const s=[];return!i&&!r.isPointInArea(t)||X0(r,e,t,function(o,A,l){!i&&!ko(o,r.chartArea,0)||o.inRange(t.x,t.y,n)&&s.push({element:o,datasetIndex:A,index:l})},!0),s}function kM(r,t,e,n){let i=[];function s(a,o,A){const{startAngle:l,endAngle:c}=a.getProps(["startAngle","endAngle"],n),{angle:u}=Ck(a,{x:t.x,y:t.y});If(u,l,c)&&i.push({element:a,datasetIndex:o,index:A})}return X0(r,e,t,s),i}function IM(r,t,e,n,i,s){let a=[];const o=SM(e);let A=Number.POSITIVE_INFINITY;function l(c,u,h){const d=c.inRange(t.x,t.y,i);if(n&&!d)return;const m=c.getCenterPoint(i);if(!(!!s||r.isPointInArea(m))&&!d)return;const b=o(t,m);b<A?(a=[{element:c,datasetIndex:u,index:h}],A=b):b===A&&a.push({element:c,datasetIndex:u,index:h})}return X0(r,e,t,l),a}function gy(r,t,e,n,i,s){return!s&&!r.isPointInArea(t)?[]:e==="r"&&!n?kM(r,t,e,i):IM(r,t,e,n,i,s)}function V_(r,t,e,n,i){const s=[],a=e==="x"?"inXRange":"inYRange";let o=!1;return X0(r,e,t,(A,l,c)=>{A[a]&&A[a](t[e],i)&&(s.push({element:A,datasetIndex:l,index:c}),o=o||A.inRange(t.x,t.y,i))}),n&&!o?[]:s}var TM={modes:{index(r,t,e,n){const i=Bo(t,r),s=e.axis||"x",a=e.includeInvisible||!1,o=e.intersect?fy(r,i,s,n,a):gy(r,i,s,!1,n,a),A=[];return o.length?(r.getSortedVisibleDatasetMetas().forEach(l=>{const c=o[0].index,u=l.data[c];u&&!u.skip&&A.push({element:u,datasetIndex:l.index,index:c})}),A):[]},dataset(r,t,e,n){const i=Bo(t,r),s=e.axis||"xy",a=e.includeInvisible||!1;let o=e.intersect?fy(r,i,s,n,a):gy(r,i,s,!1,n,a);if(o.length>0){const A=o[0].datasetIndex,l=r.getDatasetMeta(A).data;o=[];for(let c=0;c<l.length;++c)o.push({element:l[c],datasetIndex:A,index:c})}return o},point(r,t,e,n){const i=Bo(t,r),s=e.axis||"xy",a=e.includeInvisible||!1;return fy(r,i,s,n,a)},nearest(r,t,e,n){const i=Bo(t,r),s=e.axis||"xy",a=e.includeInvisible||!1;return gy(r,i,s,e.intersect,n,a)},x(r,t,e,n){const i=Bo(t,r);return V_(r,i,"x",e.intersect,n)},y(r,t,e,n){const i=Bo(t,r);return V_(r,i,"y",e.intersect,n)}}};const Xk=["left","top","right","bottom"];function bh(r,t){return r.filter(e=>e.pos===t)}function $_(r,t){return r.filter(e=>Xk.indexOf(e.pos)===-1&&e.box.axis===t)}function yh(r,t){return r.sort((e,n)=>{const i=t?n:e,s=t?e:n;return i.weight===s.weight?i.index-s.index:i.weight-s.weight})}function FM(r){const t=[];let e,n,i,s,a,o;for(e=0,n=(r||[]).length;e<n;++e)i=r[e],{position:s,options:{stack:a,stackWeight:o=1}}=i,t.push({index:e,box:i,pos:s,horizontal:i.isHorizontal(),weight:i.weight,stack:a&&s+a,stackWeight:o});return t}function LM(r){const t={};for(const e of r){const{stack:n,pos:i,stackWeight:s}=e;if(!n||!Xk.includes(i))continue;const a=t[n]||(t[n]={count:0,placed:0,weight:0,size:0});a.count++,a.weight+=s}return t}function UM(r,t){const e=LM(r),{vBoxMaxWidth:n,hBoxMaxHeight:i}=t;let s,a,o;for(s=0,a=r.length;s<a;++s){o=r[s];const{fullSize:A}=o.box,l=e[o.stack],c=l&&o.stackWeight/l.weight;o.horizontal?(o.width=c?c*n:A&&t.availableWidth,o.height=i):(o.width=n,o.height=c?c*i:A&&t.availableHeight)}return e}function PM(r){const t=FM(r),e=yh(t.filter(l=>l.box.fullSize),!0),n=yh(bh(t,"left"),!0),i=yh(bh(t,"right")),s=yh(bh(t,"top"),!0),a=yh(bh(t,"bottom")),o=$_(t,"x"),A=$_(t,"y");return{fullSize:e,leftAndTop:n.concat(s),rightAndBottom:i.concat(A).concat(a).concat(o),chartArea:bh(t,"chartArea"),vertical:n.concat(i).concat(A),horizontal:s.concat(a).concat(o)}}function j_(r,t,e,n){return Math.max(r[e],t[e])+Math.max(r[n],t[n])}function Jk(r,t){r.top=Math.max(r.top,t.top),r.left=Math.max(r.left,t.left),r.bottom=Math.max(r.bottom,t.bottom),r.right=Math.max(r.right,t.right)}function NM(r,t,e,n){const{pos:i,box:s}=e,a=r.maxPadding;if(!cr(i)){e.size&&(r[i]-=e.size);const u=n[e.stack]||{size:0,count:1};u.size=Math.max(u.size,e.horizontal?s.height:s.width),e.size=u.size/u.count,r[i]+=e.size}s.getPadding&&Jk(a,s.getPadding());const o=Math.max(0,t.outerWidth-j_(a,r,"left","right")),A=Math.max(0,t.outerHeight-j_(a,r,"top","bottom")),l=o!==r.w,c=A!==r.h;return r.w=o,r.h=A,e.horizontal?{same:l,other:c}:{same:c,other:l}}function DM(r){const t=r.maxPadding;function e(n){const i=Math.max(t[n]-r[n],0);return r[n]+=i,i}r.y+=e("top"),r.x+=e("left"),e("right"),e("bottom")}function MM(r,t){const e=t.maxPadding;function n(i){const s={left:0,top:0,right:0,bottom:0};return i.forEach(a=>{s[a]=Math.max(t[a],e[a])}),s}return n(r?["left","right"]:["top","bottom"])}function Nh(r,t,e,n){const i=[];let s,a,o,A,l,c;for(s=0,a=r.length,l=0;s<a;++s){o=r[s],A=o.box,A.update(o.width||t.w,o.height||t.h,MM(o.horizontal,t));const{same:u,other:h}=NM(t,e,o,n);l|=u&&i.length,c=c||h,A.fullSize||i.push(o)}return l&&Nh(i,t,e,n)||c}function Ap(r,t,e,n,i){r.top=e,r.left=t,r.right=t+n,r.bottom=e+i,r.width=n,r.height=i}function G_(r,t,e,n){const i=e.padding;let{x:s,y:a}=t;for(const o of r){const A=o.box,l=n[o.stack]||{placed:0,weight:1},c=o.stackWeight/l.weight||1;if(o.horizontal){const u=t.w*c,h=l.size||A.height;kf(l.start)&&(a=l.start),A.fullSize?Ap(A,i.left,a,e.outerWidth-i.right-i.left,h):Ap(A,t.left+l.placed,a,u,h),l.start=a,l.placed+=u,a=A.bottom}else{const u=t.h*c,h=l.size||A.width;kf(l.start)&&(s=l.start),A.fullSize?Ap(A,s,i.top,h,e.outerHeight-i.bottom-i.top):Ap(A,s,t.top+l.placed,h,u),l.start=s,l.placed+=u,s=A.right}}t.x=s,t.y=a}var ds={addBox(r,t){r.boxes||(r.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},r.boxes.push(t)},removeBox(r,t){const e=r.boxes?r.boxes.indexOf(t):-1;e!==-1&&r.boxes.splice(e,1)},configure(r,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(r,t,e,n){if(!r)return;const i=Wi(r.options.layout.padding),s=Math.max(t-i.width,0),a=Math.max(e-i.height,0),o=PM(r.boxes),A=o.vertical,l=o.horizontal;Ar(r.boxes,f=>{typeof f.beforeLayout=="function"&&f.beforeLayout()});const c=A.reduce((f,b)=>b.box.options&&b.box.options.display===!1?f:f+1,0)||1,u=Object.freeze({outerWidth:t,outerHeight:e,padding:i,availableWidth:s,availableHeight:a,vBoxMaxWidth:s/2/c,hBoxMaxHeight:a/2}),h=Object.assign({},i);Jk(h,Wi(n));const d=Object.assign({maxPadding:h,w:s,h:a,x:i.left,y:i.top},i),m=UM(A.concat(l),u);Nh(o.fullSize,d,u,m),Nh(A,d,u,m),Nh(l,d,u,m)&&Nh(A,d,u,m),DM(d),G_(o.leftAndTop,d,u,m),d.x+=d.w,d.y+=d.h,G_(o.rightAndBottom,d,u,m),r.chartArea={left:d.left,top:d.top,right:d.left+d.w,bottom:d.top+d.h,height:d.h,width:d.w},Ar(o.chartArea,f=>{const b=f.box;Object.assign(b,r.chartArea),b.update(d.w,d.h,{left:0,top:0,right:0,bottom:0})})}};class Zk{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,n){}removeEventListener(t,e,n){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,n,i){return e=Math.max(0,e||t.width),n=n||t.height,{width:e,height:Math.max(0,i?Math.floor(e/i):n)}}isAttached(t){return!0}updateConfig(t){}}class RM extends Zk{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const vm="$chartjs",QM={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},K_=r=>r===null||r==="";function OM(r,t){const e=r.style,n=r.getAttribute("height"),i=r.getAttribute("width");if(r[vm]={initial:{height:n,width:i,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",K_(i)){const s=I_(r,"width");s!==void 0&&(r.width=s)}if(K_(n))if(r.style.height==="")r.height=r.width/(t||2);else{const s=I_(r,"height");s!==void 0&&(r.height=s)}return r}const tI=VD?{passive:!0}:!1;function HM(r,t,e){r&&r.addEventListener(t,e,tI)}function VM(r,t,e){r&&r.canvas&&r.canvas.removeEventListener(t,e,tI)}function $M(r,t){const e=QM[r.type]||r.type,{x:n,y:i}=Bo(r,t);return{type:e,chart:t,native:r,x:n!==void 0?n:null,y:i!==void 0?i:null}}function e0(r,t){for(const e of r)if(e===t||e.contains(t))return!0}function jM(r,t,e){const n=r.canvas,i=new MutationObserver(s=>{let a=!1;for(const o of s)a=a||e0(o.addedNodes,n),a=a&&!e0(o.removedNodes,n);a&&e()});return i.observe(document,{childList:!0,subtree:!0}),i}function GM(r,t,e){const n=r.canvas,i=new MutationObserver(s=>{let a=!1;for(const o of s)a=a||e0(o.removedNodes,n),a=a&&!e0(o.addedNodes,n);a&&e()});return i.observe(document,{childList:!0,subtree:!0}),i}const Ff=new Map;let z_=0;function eI(){const r=window.devicePixelRatio;r!==z_&&(z_=r,Ff.forEach((t,e)=>{e.currentDevicePixelRatio!==r&&t()}))}function KM(r,t){Ff.size||window.addEventListener("resize",eI),Ff.set(r,t)}function zM(r){Ff.delete(r),Ff.size||window.removeEventListener("resize",eI)}function qM(r,t,e){const n=r.canvas,i=n&&$v(n);if(!i)return;const s=Ik((o,A)=>{const l=i.clientWidth;e(o,A),l<i.clientWidth&&e()},window),a=new ResizeObserver(o=>{const A=o[0],l=A.contentRect.width,c=A.contentRect.height;l===0&&c===0||s(l,c)});return a.observe(i),KM(r,s),a}function py(r,t,e){e&&e.disconnect(),t==="resize"&&zM(r)}function WM(r,t,e){const n=r.canvas,i=Ik(s=>{r.ctx!==null&&e($M(s,r))},r);return HM(n,t,i),i}class YM extends Zk{acquireContext(t,e){const n=t&&t.getContext&&t.getContext("2d");return n&&n.canvas===t?(OM(t,e),n):null}releaseContext(t){const e=t.canvas;if(!e[vm])return!1;const n=e[vm].initial;["height","width"].forEach(s=>{const a=n[s];er(a)?e.removeAttribute(s):e.setAttribute(s,a)});const i=n.style||{};return Object.keys(i).forEach(s=>{e.style[s]=i[s]}),e.width=e.width,delete e[vm],!0}addEventListener(t,e,n){this.removeEventListener(t,e);const i=t.$proxies||(t.$proxies={}),a={attach:jM,detach:GM,resize:qM}[e]||WM;i[e]=a(t,e,n)}removeEventListener(t,e){const n=t.$proxies||(t.$proxies={}),i=n[e];if(!i)return;({attach:py,detach:py,resize:py}[e]||VM)(t,e,i),n[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,n,i){return HD(t,e,n,i)}isAttached(t){const e=t&&$v(t);return!!(e&&e.isConnected)}}function XM(r){return!Vv()||typeof OffscreenCanvas<"u"&&r instanceof OffscreenCanvas?RM:YM}var gm;let RA=(gm=class{constructor(){It(this,"x");It(this,"y");It(this,"active",!1);It(this,"options");It(this,"$animations")}tooltipPosition(t){const{x:e,y:n}=this.getProps(["x","y"],t);return{x:e,y:n}}hasValue(){return _d(this.x)&&_d(this.y)}getProps(t,e){const n=this.$animations;if(!e||!n)return this;const i={};return t.forEach(s=>{i[s]=n[s]&&n[s].active()?n[s]._to:this[s]}),i}},It(gm,"defaults",{}),It(gm,"defaultRoutes"),gm);function JM(r,t){const e=r.options.ticks,n=ZM(r),i=Math.min(e.maxTicksLimit||n,n),s=e.major.enabled?e6(t):[],a=s.length,o=s[0],A=s[a-1],l=[];if(a>i)return r6(t,l,s,a/i),l;const c=t6(s,t,i);if(a>0){let u,h;const d=a>1?Math.round((A-o)/(a-1)):null;for(lp(t,l,c,er(d)?0:o-d,o),u=0,h=a-1;u<h;u++)lp(t,l,c,s[u],s[u+1]);return lp(t,l,c,A,er(d)?t.length:A+d),l}return lp(t,l,c),l}function ZM(r){const t=r.options.offset,e=r._tickSize(),n=r._length/e+(t?0:1),i=r._maxLength/e;return Math.floor(Math.min(n,i))}function t6(r,t,e){const n=n6(r),i=t.length/e;if(!n)return Math.max(i,1);const s=jN(n);for(let a=0,o=s.length-1;a<o;a++){const A=s[a];if(A>i)return A}return Math.max(i,1)}function e6(r){const t=[];let e,n;for(e=0,n=r.length;e<n;e++)r[e].major&&t.push(e);return t}function r6(r,t,e,n){let i=0,s=e[0],a;for(n=Math.ceil(n),a=0;a<r.length;a++)a===s&&(t.push(r[a]),i++,s=e[i*n])}function lp(r,t,e,n,i){const s=Oe(n,0),a=Math.min(Oe(i,r.length),r.length);let o=0,A,l,c;for(e=Math.ceil(e),i&&(A=i-n,e=A/Math.floor(A/e)),c=s;c<0;)o++,c=Math.round(s+o*e);for(l=Math.max(s,0);l<a;l++)l===c&&(t.push(r[l]),o++,c=Math.round(s+o*e))}function n6(r){const t=r.length;let e,n;if(t<2)return!1;for(n=r[0],e=1;e<t;++e)if(r[e]-r[e-1]!==n)return!1;return n}const i6=r=>r==="left"?"right":r==="right"?"left":r,q_=(r,t,e)=>t==="top"||t==="left"?r[t]+e:r[t]-e,W_=(r,t)=>Math.min(t||r,r);function Y_(r,t){const e=[],n=r.length/t,i=r.length;let s=0;for(;s<i;s+=n)e.push(r[Math.floor(s)]);return e}function s6(r,t,e){const n=r.ticks.length,i=Math.min(t,n-1),s=r._startPixel,a=r._endPixel,o=1e-6;let A=r.getPixelForTick(i),l;if(!(e&&(n===1?l=Math.max(A-s,a-A):t===0?l=(r.getPixelForTick(1)-A)/2:l=(A-r.getPixelForTick(i-1))/2,A+=i<t?l:-l,A<s-o||A>a+o)))return A}function a6(r,t){Ar(r,e=>{const n=e.gc,i=n.length/2;let s;if(i>t){for(s=0;s<i;++s)delete e.data[n[s]];n.splice(0,i)}})}function wh(r){return r.drawTicks?r.tickLength:0}function X_(r,t){if(!r.display)return 0;const e=ai(r.font,t),n=Wi(r.padding);return(hn(r.text)?r.text.length:1)*e.lineHeight+n.height}function o6(r,t){return ic(r,{scale:t,type:"scale"})}function A6(r,t,e){return ic(r,{tick:e,index:t,type:"tick"})}function l6(r,t,e){let n=Dv(r);return(e&&t!=="right"||!e&&t==="right")&&(n=i6(n)),n}function c6(r,t,e,n){const{top:i,left:s,bottom:a,right:o,chart:A}=r,{chartArea:l,scales:c}=A;let u=0,h,d,m;const f=a-i,b=o-s;if(r.isHorizontal()){if(d=as(n,s,o),cr(e)){const y=Object.keys(e)[0],B=e[y];m=c[y].getPixelForValue(B)+f-t}else e==="center"?m=(l.bottom+l.top)/2+f-t:m=q_(r,e,t);h=o-s}else{if(cr(e)){const y=Object.keys(e)[0],B=e[y];d=c[y].getPixelForValue(B)-b+t}else e==="center"?d=(l.left+l.right)/2-b+t:d=q_(r,e,t);m=as(n,a,i),u=e==="left"?-Xn:Xn}return{titleX:d,titleY:m,maxWidth:h,rotation:u}}class mu extends RA{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:n,_suggestedMax:i}=this;return t=ua(t,Number.POSITIVE_INFINITY),e=ua(e,Number.NEGATIVE_INFINITY),n=ua(n,Number.POSITIVE_INFINITY),i=ua(i,Number.NEGATIVE_INFINITY),{min:ua(t,n),max:ua(e,i),minDefined:Nn(t),maxDefined:Nn(e)}}getMinMax(t){let{min:e,max:n,minDefined:i,maxDefined:s}=this.getUserBounds(),a;if(i&&s)return{min:e,max:n};const o=this.getMatchingVisibleMetas();for(let A=0,l=o.length;A<l;++A)a=o[A].controller.getMinMax(this,t),i||(e=Math.min(e,a.min)),s||(n=Math.max(n,a.max));return e=s&&e>n?n:e,n=i&&e>n?e:n,{min:ua(e,ua(n,e)),max:ua(n,ua(e,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Re(this.options.beforeUpdate,[this])}update(t,e,n){const{beginAtZero:i,grace:s,ticks:a}=this.options,o=a.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=yD(this,s,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const A=o<this.ticks.length;this._convertTicksToLabels(A?Y_(this.ticks,o):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),a.display&&(a.autoSkip||a.source==="auto")&&(this.ticks=JM(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),A&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,e,n;this.isHorizontal()?(e=this.left,n=this.right):(e=this.top,n=this.bottom,t=!t),this._startPixel=e,this._endPixel=n,this._reversePixels=t,this._length=n-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Re(this.options.afterUpdate,[this])}beforeSetDimensions(){Re(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Re(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),Re(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Re(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let n,i,s;for(n=0,i=t.length;n<i;n++)s=t[n],s.label=Re(e.callback,[s.value,n,t],this)}afterTickToLabelConversion(){Re(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Re(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,n=W_(this.ticks.length,t.ticks.maxTicksLimit),i=e.minRotation||0,s=e.maxRotation;let a=i,o,A,l;if(!this._isVisible()||!e.display||i>=s||n<=1||!this.isHorizontal()){this.labelRotation=i;return}const c=this._getLabelSizes(),u=c.widest.width,h=c.highest.height,d=Ui(this.chart.width-u,0,this.maxWidth);o=t.offset?this.maxWidth/n:d/(n-1),u+6>o&&(o=d/(n-(t.offset?.5:1)),A=this.maxHeight-wh(t.grid)-e.padding-X_(t.title,this.chart.options.font),l=Math.sqrt(u*u+h*h),a=Pv(Math.min(Math.asin(Ui((c.highest.height+6)/o,-1,1)),Math.asin(Ui(A/l,-1,1))-Math.asin(Ui(h/l,-1,1)))),a=Math.max(i,Math.min(s,a))),this.labelRotation=a}afterCalculateLabelRotation(){Re(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Re(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:n,title:i,grid:s}}=this,a=this._isVisible(),o=this.isHorizontal();if(a){const A=X_(i,e.options.font);if(o?(t.width=this.maxWidth,t.height=wh(s)+A):(t.height=this.maxHeight,t.width=wh(s)+A),n.display&&this.ticks.length){const{first:l,last:c,widest:u,highest:h}=this._getLabelSizes(),d=n.padding*2,m=za(this.labelRotation),f=Math.cos(m),b=Math.sin(m);if(o){const y=n.mirror?0:b*u.width+f*h.height;t.height=Math.min(this.maxHeight,t.height+y+d)}else{const y=n.mirror?0:f*u.width+b*h.height;t.width=Math.min(this.maxWidth,t.width+y+d)}this._calculatePadding(l,c,b,f)}}this._handleMargins(),o?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,n,i){const{ticks:{align:s,padding:a},position:o}=this.options,A=this.labelRotation!==0,l=o!=="top"&&this.axis==="x";if(this.isHorizontal()){const c=this.getPixelForTick(0)-this.left,u=this.right-this.getPixelForTick(this.ticks.length-1);let h=0,d=0;A?l?(h=i*t.width,d=n*e.height):(h=n*t.height,d=i*e.width):s==="start"?d=e.width:s==="end"?h=t.width:s!=="inner"&&(h=t.width/2,d=e.width/2),this.paddingLeft=Math.max((h-c+a)*this.width/(this.width-c),0),this.paddingRight=Math.max((d-u+a)*this.width/(this.width-u),0)}else{let c=e.height/2,u=t.height/2;s==="start"?(c=0,u=t.height):s==="end"&&(c=e.height,u=0),this.paddingTop=c+a,this.paddingBottom=u+a}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Re(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return e==="top"||e==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let e,n;for(e=0,n=t.length;e<n;e++)er(t[e].label)&&(t.splice(e,1),n--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let n=this.ticks;e<n.length&&(n=Y_(n,e)),this._labelSizes=t=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,n){const{ctx:i,_longestTextCache:s}=this,a=[],o=[],A=Math.floor(e/W_(e,n));let l=0,c=0,u,h,d,m,f,b,y,B,I,C,N;for(u=0;u<e;u+=A){if(m=t[u].label,f=this._resolveTickFontOptions(u),i.font=b=f.string,y=s[b]=s[b]||{data:{},gc:[]},B=f.lineHeight,I=C=0,!er(m)&&!hn(m))I=Zm(i,y.data,y.gc,I,m),C=B;else if(hn(m))for(h=0,d=m.length;h<d;++h)N=m[h],!er(N)&&!hn(N)&&(I=Zm(i,y.data,y.gc,I,N),C+=B);a.push(I),o.push(C),l=Math.max(I,l),c=Math.max(C,c)}a6(s,e);const R=a.indexOf(l),U=o.indexOf(c),x=v=>({width:a[v]||0,height:o[v]||0});return{first:x(0),last:x(e-1),widest:x(R),highest:x(U),widths:a,heights:o}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return qN(this._alignToPixels?Cc(this.chart,e,0):e)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const n=e[t];return n.$context||(n.$context=A6(this.getContext(),t,n))}return this.$context||(this.$context=o6(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,e=za(this.labelRotation),n=Math.abs(Math.cos(e)),i=Math.abs(Math.sin(e)),s=this._getLabelSizes(),a=t.autoSkipPadding||0,o=s?s.widest.width+a:0,A=s?s.highest.height+a:0;return this.isHorizontal()?A*n>o*i?o/n:A/i:A*i<o*n?A/n:o/i}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,n=this.chart,i=this.options,{grid:s,position:a,border:o}=i,A=s.offset,l=this.isHorizontal(),u=this.ticks.length+(A?1:0),h=wh(s),d=[],m=o.setContext(this.getContext()),f=m.display?m.width:0,b=f/2,y=function(ut){return Cc(n,ut,f)};let B,I,C,N,R,U,x,v,T,E,_,F;if(a==="top")B=y(this.bottom),U=this.bottom-h,v=B-b,E=y(t.top)+b,F=t.bottom;else if(a==="bottom")B=y(this.top),E=t.top,F=y(t.bottom)-b,U=B+b,v=this.top+h;else if(a==="left")B=y(this.right),R=this.right-h,x=B-b,T=y(t.left)+b,_=t.right;else if(a==="right")B=y(this.left),T=t.left,_=y(t.right)-b,R=B+b,x=this.left+h;else if(e==="x"){if(a==="center")B=y((t.top+t.bottom)/2+.5);else if(cr(a)){const ut=Object.keys(a)[0],nt=a[ut];B=y(this.chart.scales[ut].getPixelForValue(nt))}E=t.top,F=t.bottom,U=B+b,v=U+h}else if(e==="y"){if(a==="center")B=y((t.left+t.right)/2);else if(cr(a)){const ut=Object.keys(a)[0],nt=a[ut];B=y(this.chart.scales[ut].getPixelForValue(nt))}R=B-b,x=R-h,T=t.left,_=t.right}const k=Oe(i.ticks.maxTicksLimit,u),Z=Math.max(1,Math.ceil(u/k));for(I=0;I<u;I+=Z){const ut=this.getContext(I),nt=s.setContext(ut),j=o.setContext(ut),G=nt.lineWidth,pt=nt.color,q=j.dash||[],L=j.dashOffset,O=nt.tickWidth,V=nt.tickColor,X=nt.tickBorderDash||[],At=nt.tickBorderDashOffset;C=s6(this,I,A),C!==void 0&&(N=Cc(n,C,G),l?R=x=T=_=N:U=v=E=F=N,d.push({tx1:R,ty1:U,tx2:x,ty2:v,x1:T,y1:E,x2:_,y2:F,width:G,color:pt,borderDash:q,borderDashOffset:L,tickWidth:O,tickColor:V,tickBorderDash:X,tickBorderDashOffset:At}))}return this._ticksLength=u,this._borderValue=B,d}_computeLabelItems(t){const e=this.axis,n=this.options,{position:i,ticks:s}=n,a=this.isHorizontal(),o=this.ticks,{align:A,crossAlign:l,padding:c,mirror:u}=s,h=wh(n.grid),d=h+c,m=u?-c:d,f=-za(this.labelRotation),b=[];let y,B,I,C,N,R,U,x,v,T,E,_,F="middle";if(i==="top")R=this.bottom-m,U=this._getXAxisLabelAlignment();else if(i==="bottom")R=this.top+m,U=this._getXAxisLabelAlignment();else if(i==="left"){const Z=this._getYAxisLabelAlignment(h);U=Z.textAlign,N=Z.x}else if(i==="right"){const Z=this._getYAxisLabelAlignment(h);U=Z.textAlign,N=Z.x}else if(e==="x"){if(i==="center")R=(t.top+t.bottom)/2+d;else if(cr(i)){const Z=Object.keys(i)[0],ut=i[Z];R=this.chart.scales[Z].getPixelForValue(ut)+d}U=this._getXAxisLabelAlignment()}else if(e==="y"){if(i==="center")N=(t.left+t.right)/2-d;else if(cr(i)){const Z=Object.keys(i)[0],ut=i[Z];N=this.chart.scales[Z].getPixelForValue(ut)}U=this._getYAxisLabelAlignment(h).textAlign}e==="y"&&(A==="start"?F="top":A==="end"&&(F="bottom"));const k=this._getLabelSizes();for(y=0,B=o.length;y<B;++y){I=o[y],C=I.label;const Z=s.setContext(this.getContext(y));x=this.getPixelForTick(y)+s.labelOffset,v=this._resolveTickFontOptions(y),T=v.lineHeight,E=hn(C)?C.length:1;const ut=E/2,nt=Z.color,j=Z.textStrokeColor,G=Z.textStrokeWidth;let pt=U;a?(N=x,U==="inner"&&(y===B-1?pt=this.options.reverse?"left":"right":y===0?pt=this.options.reverse?"right":"left":pt="center"),i==="top"?l==="near"||f!==0?_=-E*T+T/2:l==="center"?_=-k.highest.height/2-ut*T+T:_=-k.highest.height+T/2:l==="near"||f!==0?_=T/2:l==="center"?_=k.highest.height/2-ut*T:_=k.highest.height-E*T,u&&(_*=-1),f!==0&&!Z.showLabelBackdrop&&(N+=T/2*Math.sin(f))):(R=x,_=(1-E)*T/2);let q;if(Z.showLabelBackdrop){const L=Wi(Z.backdropPadding),O=k.heights[y],V=k.widths[y];let X=_-L.top,At=0-L.left;switch(F){case"middle":X-=O/2;break;case"bottom":X-=O;break}switch(U){case"center":At-=V/2;break;case"right":At-=V;break;case"inner":y===B-1?At-=V:y>0&&(At-=V/2);break}q={left:At,top:X,width:V+L.width,height:O+L.height,color:Z.backdropColor}}b.push({label:C,font:v,textOffset:_,options:{rotation:f,color:nt,strokeColor:j,strokeWidth:G,textAlign:pt,textBaseline:F,translation:[N,R],backdrop:q}})}return b}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-za(this.labelRotation))return t==="top"?"left":"right";let i="center";return e.align==="start"?i="left":e.align==="end"?i="right":e.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:n,mirror:i,padding:s}}=this.options,a=this._getLabelSizes(),o=t+s,A=a.widest.width;let l,c;return e==="left"?i?(c=this.right+s,n==="near"?l="left":n==="center"?(l="center",c+=A/2):(l="right",c+=A)):(c=this.right-o,n==="near"?l="right":n==="center"?(l="center",c-=A/2):(l="left",c=this.left)):e==="right"?i?(c=this.left+s,n==="near"?l="right":n==="center"?(l="center",c-=A/2):(l="left",c-=A)):(c=this.left+o,n==="near"?l="left":n==="center"?(l="center",c+=A/2):(l="right",c=this.right)):l="right",{textAlign:l,x:c}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;if(e==="left"||e==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(e==="top"||e==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:n,top:i,width:s,height:a}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(n,i,s,a),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const i=this.ticks.findIndex(s=>s.value===t);return i>=0?e.setContext(this.getContext(i)).lineWidth:0}drawGrid(t){const e=this.options.grid,n=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let s,a;const o=(A,l,c)=>{!c.width||!c.color||(n.save(),n.lineWidth=c.width,n.strokeStyle=c.color,n.setLineDash(c.borderDash||[]),n.lineDashOffset=c.borderDashOffset,n.beginPath(),n.moveTo(A.x,A.y),n.lineTo(l.x,l.y),n.stroke(),n.restore())};if(e.display)for(s=0,a=i.length;s<a;++s){const A=i[s];e.drawOnChartArea&&o({x:A.x1,y:A.y1},{x:A.x2,y:A.y2},A),e.drawTicks&&o({x:A.tx1,y:A.ty1},{x:A.tx2,y:A.ty2},{color:A.tickColor,width:A.tickWidth,borderDash:A.tickBorderDash,borderDashOffset:A.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:n,grid:i}}=this,s=n.setContext(this.getContext()),a=n.display?s.width:0;if(!a)return;const o=i.setContext(this.getContext(0)).lineWidth,A=this._borderValue;let l,c,u,h;this.isHorizontal()?(l=Cc(t,this.left,a)-a/2,c=Cc(t,this.right,o)+o/2,u=h=A):(u=Cc(t,this.top,a)-a/2,h=Cc(t,this.bottom,o)+o/2,l=c=A),e.save(),e.lineWidth=s.width,e.strokeStyle=s.color,e.beginPath(),e.moveTo(l,u),e.lineTo(c,h),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const n=this.ctx,i=this._computeLabelArea();i&&q0(n,i);const s=this.getLabelItems(t);for(const a of s){const o=a.options,A=a.font,l=a.label,c=a.textOffset;nu(n,l,0,c,A,o)}i&&W0(n)}drawTitle(){const{ctx:t,options:{position:e,title:n,reverse:i}}=this;if(!n.display)return;const s=ai(n.font),a=Wi(n.padding),o=n.align;let A=s.lineHeight/2;e==="bottom"||e==="center"||cr(e)?(A+=a.bottom,hn(n.text)&&(A+=s.lineHeight*(n.text.length-1))):A+=a.top;const{titleX:l,titleY:c,maxWidth:u,rotation:h}=c6(this,A,e,o);nu(t,n.text,0,0,s,{color:n.color,maxWidth:u,rotation:h,textAlign:l6(o,e,i),textBaseline:"middle",translation:[l,c]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,n=Oe(t.grid&&t.grid.z,-1),i=Oe(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==mu.prototype.draw?[{z:e,draw:s=>{this.draw(s)}}]:[{z:n,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:e,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",i=[];let s,a;for(s=0,a=e.length;s<a;++s){const o=e[s];o[n]===this.id&&(!t||o.type===t)&&i.push(o)}return i}_resolveTickFontOptions(t){const e=this.options.ticks.setContext(this.getContext(t));return ai(e.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class cp{constructor(t,e,n){this.type=t,this.scope=e,this.override=n,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let n;h6(e)&&(n=this.register(e));const i=this.items,s=t.id,a=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+t);return s in i||(i[s]=t,u6(t,a,n),this.override&&mn.override(t.id,t.overrides)),a}get(t){return this.items[t]}unregister(t){const e=this.items,n=t.id,i=this.scope;n in e&&delete e[n],i&&n in mn[i]&&(delete mn[i][n],this.override&&delete ru[n])}}function u6(r,t,e){const n=Oo(Object.create(null),[e?mn.get(e):{},mn.get(t),r.defaults]);mn.set(t,n),r.defaultRoutes&&d6(t,r.defaultRoutes),r.descriptors&&mn.describe(t,r.descriptors)}function d6(r,t){Object.keys(t).forEach(e=>{const n=e.split("."),i=n.pop(),s=[r].concat(n).join("."),a=t[e].split("."),o=a.pop(),A=a.join(".");mn.route(s,i,A,o)})}function h6(r){return"id"in r&&"defaults"in r}class f6{constructor(){this.controllers=new cp(Ya,"datasets",!0),this.elements=new cp(RA,"elements"),this.plugins=new cp(Object,"plugins"),this.scales=new cp(mu,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,n){[...e].forEach(i=>{const s=n||this._getRegistryForType(i);n||s.isForType(i)||s===this.plugins&&i.id?this._exec(t,s,i):Ar(i,a=>{const o=n||this._getRegistryForType(a);this._exec(t,o,a)})})}_exec(t,e,n){const i=Uv(t);Re(n["before"+i],[],n),e[t](n),Re(n["after"+i],[],n)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const n=this._typedRegistries[e];if(n.isForType(t))return n}return this.plugins}_get(t,e,n){const i=e.get(t);if(i===void 0)throw new Error('"'+t+'" is not a registered '+n+".");return i}}var xo=new f6;class g6{constructor(){this._init=void 0}notify(t,e,n,i){if(e==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install")),this._init===void 0)return;const s=i?this._descriptors(t).filter(i):this._descriptors(t),a=this._notify(s,t,e,n);return e==="afterDestroy"&&(this._notify(s,t,"stop"),this._notify(this._init,t,"uninstall"),this._init=void 0),a}_notify(t,e,n,i){i=i||{};for(const s of t){const a=s.plugin,o=a[n],A=[e,i,s.options];if(Re(o,A,a)===!1&&i.cancelable)return!1}return!0}invalidate(){er(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const n=t&&t.config,i=Oe(n.options&&n.options.plugins,{}),s=p6(n);return i===!1&&!e?[]:b6(t,s,i,e)}_notifyStateChanges(t){const e=this._oldCache||[],n=this._cache,i=(s,a)=>s.filter(o=>!a.some(A=>o.plugin.id===A.plugin.id));this._notify(i(e,n),t,"stop"),this._notify(i(n,e),t,"start")}}function p6(r){const t={},e=[],n=Object.keys(xo.plugins.items);for(let s=0;s<n.length;s++)e.push(xo.getPlugin(n[s]));const i=r.plugins||[];for(let s=0;s<i.length;s++){const a=i[s];e.indexOf(a)===-1&&(e.push(a),t[a.id]=!0)}return{plugins:e,localIds:t}}function m6(r,t){return!t&&r===!1?null:r===!0?{}:r}function b6(r,{plugins:t,localIds:e},n,i){const s=[],a=r.getContext();for(const o of t){const A=o.id,l=m6(n[A],i);l!==null&&s.push({plugin:o,options:y6(r.config,{plugin:o,local:e[A]},l,a)})}return s}function y6(r,{plugin:t,local:e},n,i){const s=r.pluginScopeKeys(t),a=r.getOptionScopes(n,s);return e&&t.defaults&&a.push(t.defaults),r.createResolver(a,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Hw(r,t){const e=mn.datasets[r]||{};return((t.datasets||{})[r]||{}).indexAxis||t.indexAxis||e.indexAxis||"x"}function w6(r,t){let e=r;return r==="_index_"?e=t:r==="_value_"&&(e=t==="x"?"y":"x"),e}function v6(r,t){return r===t?"_index_":"_value_"}function J_(r){if(r==="x"||r==="y"||r==="r")return r}function x6(r){if(r==="top"||r==="bottom")return"x";if(r==="left"||r==="right")return"y"}function Vw(r,...t){if(J_(r))return r;for(const e of t){const n=e.axis||x6(e.position)||r.length>1&&J_(r[0].toLowerCase());if(n)return n}throw new Error(`Cannot determine type of '${r}' axis. Please provide 'axis' or 'position' option.`)}function Z_(r,t,e){if(e[t+"AxisID"]===r)return{axis:t}}function _6(r,t){if(t.data&&t.data.datasets){const e=t.data.datasets.filter(n=>n.xAxisID===r||n.yAxisID===r);if(e.length)return Z_(r,"x",e[0])||Z_(r,"y",e[0])}return{}}function B6(r,t){const e=ru[r.type]||{scales:{}},n=t.scales||{},i=Hw(r.type,t),s=Object.create(null);return Object.keys(n).forEach(a=>{const o=n[a];if(!cr(o))return console.error(`Invalid scale configuration for scale: ${a}`);if(o._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${a}`);const A=Vw(a,o,_6(a,r),mn.scales[o.type]),l=v6(A,i),c=e.scales||{};s[a]=Jh(Object.create(null),[{axis:A},o,c[A],c[l]])}),r.data.datasets.forEach(a=>{const o=a.type||r.type,A=a.indexAxis||Hw(o,t),c=(ru[o]||{}).scales||{};Object.keys(c).forEach(u=>{const h=w6(u,A),d=a[h+"AxisID"]||h;s[d]=s[d]||Object.create(null),Jh(s[d],[{axis:h},n[d],c[u]])})}),Object.keys(s).forEach(a=>{const o=s[a];Jh(o,[mn.scales[o.type],mn.scale])}),s}function rI(r){const t=r.options||(r.options={});t.plugins=Oe(t.plugins,{}),t.scales=B6(r,t)}function nI(r){return r=r||{},r.datasets=r.datasets||[],r.labels=r.labels||[],r}function C6(r){return r=r||{},r.data=nI(r.data),rI(r),r}const tB=new Map,iI=new Set;function up(r,t){let e=tB.get(r);return e||(e=t(),tB.set(r,e),iI.add(e)),e}const vh=(r,t,e)=>{const n=jl(t,e);n!==void 0&&r.add(n)};class E6{constructor(t){this._config=C6(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=nI(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),rI(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return up(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return up(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return up(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){const e=t.id,n=this.type;return up(`${n}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){const n=this._scopeCache;let i=n.get(t);return(!i||e)&&(i=new Map,n.set(t,i)),i}getOptionScopes(t,e,n){const{options:i,type:s}=this,a=this._cachedScopes(t,n),o=a.get(e);if(o)return o;const A=new Set;e.forEach(c=>{t&&(A.add(t),c.forEach(u=>vh(A,t,u))),c.forEach(u=>vh(A,i,u)),c.forEach(u=>vh(A,ru[s]||{},u)),c.forEach(u=>vh(A,mn,u)),c.forEach(u=>vh(A,Rw,u))});const l=Array.from(A);return l.length===0&&l.push(Object.create(null)),iI.has(e)&&a.set(e,l),l}chartOptionScopes(){const{options:t,type:e}=this;return[t,ru[e]||{},mn.datasets[e]||{},{type:e},mn,Rw]}resolveNamedOptions(t,e,n,i=[""]){const s={$shared:!0},{resolver:a,subPrefixes:o}=eB(this._resolverCache,t,i);let A=a;if(k6(a,e)){s.$shared=!1,n=Gl(n)?n():n;const l=this.createResolver(t,n,o);A=Bd(a,n,l)}for(const l of e)s[l]=A[l];return s}createResolver(t,e,n=[""],i){const{resolver:s}=eB(this._resolverCache,t,n);return cr(e)?Bd(s,e,void 0,i):s}}function eB(r,t,e){let n=r.get(t);n||(n=new Map,r.set(t,n));const i=e.join();let s=n.get(i);return s||(s={resolver:Qv(t,e),subPrefixes:e.filter(o=>!o.toLowerCase().includes("hover"))},n.set(i,s)),s}const S6=r=>cr(r)&&Object.getOwnPropertyNames(r).some(t=>Gl(r[t]));function k6(r,t){const{isScriptable:e,isIndexable:n}=Nk(r);for(const i of t){const s=e(i),a=n(i),o=(a||s)&&r[i];if(s&&(Gl(o)||S6(o))||a&&hn(o))return!0}return!1}var I6="4.5.1";const T6=["top","bottom","left","right","chartArea"];function rB(r,t){return r==="top"||r==="bottom"||T6.indexOf(r)===-1&&t==="x"}function nB(r,t){return function(e,n){return e[r]===n[r]?e[t]-n[t]:e[r]-n[r]}}function iB(r){const t=r.chart,e=t.options.animation;t.notifyPlugins("afterRender"),Re(e&&e.onComplete,[r],t)}function F6(r){const t=r.chart,e=t.options.animation;Re(e&&e.onProgress,[r],t)}function sI(r){return Vv()&&typeof r=="string"?r=document.getElementById(r):r&&r.length&&(r=r[0]),r&&r.canvas&&(r=r.canvas),r}const xm={},sB=r=>{const t=sI(r);return Object.values(xm).filter(e=>e.canvas===t).pop()};function L6(r,t,e){const n=Object.keys(r);for(const i of n){const s=+i;if(s>=t){const a=r[i];delete r[i],(e>0||s>t)&&(r[s+e]=a)}}}function U6(r,t,e,n){return!e||r.type==="mouseout"?null:n?t:r}var hl;let Od=(hl=class{static register(...t){xo.add(...t),aB()}static unregister(...t){xo.remove(...t),aB()}constructor(t,e){const n=this.config=new E6(e),i=sI(t),s=sB(i);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const a=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||XM(i)),this.platform.updateConfig(n);const o=this.platform.acquireContext(i,a.aspectRatio),A=o&&o.canvas,l=A&&A.height,c=A&&A.width;if(this.id=NN(),this.ctx=o,this.canvas=A,this.width=c,this.height=l,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new g6,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=JN(u=>this.update(u),a.resizeDelay||0),this._dataChanges=[],xm[this.id]=this,!o||!A){console.error("Failed to create chart: can't acquire context from the given item");return}uA.listen(this,"complete",iB),uA.listen(this,"progress",F6),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:n,height:i,_aspectRatio:s}=this;return er(t)?e&&s?s:i?n/i:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return xo}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():k_(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return C_(this.canvas,this.ctx),this}stop(){return uA.stop(this),this}resize(t,e){uA.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const n=this.options,i=this.canvas,s=n.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(i,t,e,s),o=n.devicePixelRatio||this.platform.getDevicePixelRatio(),A=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,k_(this,o,!0)&&(this.notifyPlugins("resize",{size:a}),Re(n.onResize,[this,a],this),this.attached&&this._doResize(A)&&this.render())}ensureScalesHaveIDs(){const e=this.options.scales||{};Ar(e,(n,i)=>{n.id=i})}buildOrUpdateScales(){const t=this.options,e=t.scales,n=this.scales,i=Object.keys(n).reduce((a,o)=>(a[o]=!1,a),{});let s=[];e&&(s=s.concat(Object.keys(e).map(a=>{const o=e[a],A=Vw(a,o),l=A==="r",c=A==="x";return{options:o,dposition:l?"chartArea":c?"bottom":"left",dtype:l?"radialLinear":c?"category":"linear"}}))),Ar(s,a=>{const o=a.options,A=o.id,l=Vw(A,o),c=Oe(o.type,a.dtype);(o.position===void 0||rB(o.position,l)!==rB(a.dposition))&&(o.position=a.dposition),i[A]=!0;let u=null;if(A in n&&n[A].type===c)u=n[A];else{const h=xo.getScale(c);u=new h({id:A,type:c,ctx:this.ctx,chart:this}),n[u.id]=u}u.init(o,t)}),Ar(i,(a,o)=>{a||delete n[o]}),Ar(n,a=>{ds.configure(this,a,a.options),ds.addBox(this,a)})}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,n=t.length;if(t.sort((i,s)=>i.index-s.index),n>e){for(let i=e;i<n;++i)this._destroyDatasetMeta(i);t.splice(e,n-e)}this._sortedMetasets=t.slice(0).sort(nB("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((n,i)=>{e.filter(s=>s===n._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let n,i;for(this._removeUnreferencedMetasets(),n=0,i=e.length;n<i;n++){const s=e[n];let a=this.getDatasetMeta(n);const o=s.type||this.config.type;if(a.type&&a.type!==o&&(this._destroyDatasetMeta(n),a=this.getDatasetMeta(n)),a.type=o,a.indexAxis=s.indexAxis||Hw(o,this.options),a.order=s.order||0,a.index=n,a.label=""+s.label,a.visible=this.isDatasetVisible(n),a.controller)a.controller.updateIndex(n),a.controller.linkScales();else{const A=xo.getController(o),{datasetElementType:l,dataElementType:c}=mn.datasets[o];Object.assign(A,{dataElementType:xo.getElement(c),datasetElementType:l&&xo.getElement(l)}),a.controller=new A(this,n),t.push(a.controller)}}return this._updateMetasets(),t}_resetElements(){Ar(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const n=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let l=0,c=this.data.datasets.length;l<c;l++){const{controller:u}=this.getDatasetMeta(l),h=!i&&s.indexOf(u)===-1;u.buildOrUpdateElements(h),a=Math.max(+u.getMaxOverflow(),a)}a=this._minPadding=n.layout.autoPadding?a:0,this._updateLayout(a),i||Ar(s,l=>{l.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(nB("z","_idx"));const{_active:o,_lastEvent:A}=this;A?this._eventHandler(A,!0):o.length&&this._updateHoverStyles(o,o,!0),this.render()}_updateScales(){Ar(this.scales,t=>{ds.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),n=new Set(t.events);(!p_(e,n)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:n,start:i,count:s}of e){const a=n==="_removeElements"?-s:s;L6(t,i,a)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,n=s=>new Set(t.filter(a=>a[0]===s).map((a,o)=>o+","+a.splice(1).join(","))),i=n(0);for(let s=1;s<e;s++)if(!p_(i,n(s)))return;return Array.from(i).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;ds.update(this,this.width,this.height,t);const e=this.chartArea,n=e.width<=0||e.height<=0;this._layers=[],Ar(this.boxes,i=>{n&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,s)=>{i._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let e=0,n=this.data.datasets.length;e<n;++e)this.getDatasetMeta(e).controller.configure();for(let e=0,n=this.data.datasets.length;e<n;++e)this._updateDataset(e,Gl(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const n=this.getDatasetMeta(t),i={meta:n,index:t,mode:e,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(n.controller._update(e),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(uA.has(this)?this.attached&&!uA.running(this)&&uA.start(this):(this.draw(),iB({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:n,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(n,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,n=[];let i,s;for(i=0,s=e.length;i<s;++i){const a=e[i];(!t||a.visible)&&n.push(a)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,n={meta:t,index:t.index,cancelable:!0},i=Kk(this,t);this.notifyPlugins("beforeDatasetDraw",n)!==!1&&(i&&q0(e,i),t.controller.draw(),i&&W0(e),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(t){return ko(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,n,i){const s=TM.modes[e];return typeof s=="function"?s(this,t,n,i):[]}getDatasetMeta(t){const e=this.data.datasets[t],n=this._metasets;let i=n.filter(s=>s&&s._dataset===e).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},n.push(i)),i}getContext(){return this.$context||(this.$context=ic(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const n=this.getDatasetMeta(t);return typeof n.hidden=="boolean"?!n.hidden:!e.hidden}setDatasetVisibility(t,e){const n=this.getDatasetMeta(t);n.hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,n){const i=n?"show":"hide",s=this.getDatasetMeta(t),a=s.controller._resolveAnimations(void 0,i);kf(e)?(s.data[e].hidden=!n,this.update()):(this.setDatasetVisibility(t,n),a.update(s,{visible:n}),this.update(o=>o.datasetIndex===t?i:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),uA.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),C_(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete xm[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,n=(s,a)=>{e.addEventListener(this,s,a),t[s]=a},i=(s,a,o)=>{s.offsetX=a,s.offsetY=o,this._eventHandler(s)};Ar(this.options.events,s=>n(s,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,n=(A,l)=>{e.addEventListener(this,A,l),t[A]=l},i=(A,l)=>{t[A]&&(e.removeEventListener(this,A,l),delete t[A])},s=(A,l)=>{this.canvas&&this.resize(A,l)};let a;const o=()=>{i("attach",o),this.attached=!0,this.resize(),n("resize",s),n("detach",a)};a=()=>{this.attached=!1,i("resize",s),this._stop(),this._resize(0,0),n("attach",o)},e.isAttached(this.canvas)?o():a()}unbindEvents(){Ar(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},Ar(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,n){const i=n?"set":"remove";let s,a,o,A;for(e==="dataset"&&(s=this.getDatasetMeta(t[0].datasetIndex),s.controller["_"+i+"DatasetHoverStyle"]()),o=0,A=t.length;o<A;++o){a=t[o];const l=a&&this.getDatasetMeta(a.datasetIndex).controller;l&&l[i+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],n=t.map(({datasetIndex:s,index:a})=>{const o=this.getDatasetMeta(s);if(!o)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:o.data[a],index:a}});!Ym(n,e)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,e))}notifyPlugins(t,e,n){return this._plugins.notify(this,t,e,n)}isPluginEnabled(t){return this._plugins._cache.filter(e=>e.plugin.id===t).length===1}_updateHoverStyles(t,e,n){const i=this.options.hover,s=(A,l)=>A.filter(c=>!l.some(u=>c.datasetIndex===u.datasetIndex&&c.index===u.index)),a=s(e,t),o=n?t:s(t,e);a.length&&this.updateHoverStyle(a,i.mode,!1),o.length&&i.mode&&this.updateHoverStyle(o,i.mode,!0)}_eventHandler(t,e){const n={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},i=a=>(a.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",n,i)===!1)return;const s=this._handleEvent(t,e,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,i),(s||n.changed)&&this.render(),this}_handleEvent(t,e,n){const{_active:i=[],options:s}=this,a=e,o=this._getActiveElements(t,i,n,a),A=HN(t),l=U6(t,this._lastEvent,n,A);n&&(this._lastEvent=null,Re(s.onHover,[t,o,this],this),A&&Re(s.onClick,[t,o,this],this));const c=!Ym(o,i);return(c||e)&&(this._active=o,this._updateHoverStyles(o,i,e)),this._lastEvent=l,c}_getActiveElements(t,e,n,i){if(t.type==="mouseout")return[];if(!n)return e;const s=this.options.hover;return this.getElementsAtEventForMode(t,s.mode,s,i)}},It(hl,"defaults",mn),It(hl,"instances",xm),It(hl,"overrides",ru),It(hl,"registry",xo),It(hl,"version",I6),It(hl,"getChart",sB),hl);function aB(){return Ar(Od.instances,r=>r._plugins.invalidate())}function P6(r,t,e){const{startAngle:n,x:i,y:s,outerRadius:a,innerRadius:o,options:A}=t,{borderWidth:l,borderJoinStyle:c}=A,u=Math.min(l/a,As(n-e));if(r.beginPath(),r.arc(i,s,a-l/2,n+u/2,e-u/2),o>0){const h=Math.min(l/o,As(n-e));r.arc(i,s,o+l/2,e-h/2,n+h/2,!0)}else{const h=Math.min(l/2,a*As(n-e));if(c==="round")r.arc(i,s,h,e-Fr/2,n+Fr/2,!0);else if(c==="bevel"){const d=2*h*h,m=-d*Math.cos(e+Fr/2)+i,f=-d*Math.sin(e+Fr/2)+s,b=d*Math.cos(n+Fr/2)+i,y=d*Math.sin(n+Fr/2)+s;r.lineTo(m,f),r.lineTo(b,y)}}r.closePath(),r.moveTo(0,0),r.rect(0,0,r.canvas.width,r.canvas.height),r.clip("evenodd")}function N6(r,t,e){const{startAngle:n,pixelMargin:i,x:s,y:a,outerRadius:o,innerRadius:A}=t;let l=i/o;r.beginPath(),r.arc(s,a,o,n-l,e+l),A>i?(l=i/A,r.arc(s,a,A,e+l,n-l,!0)):r.arc(s,a,i,e+Xn,n-Xn),r.closePath(),r.clip()}function D6(r){return Rv(r,["outerStart","outerEnd","innerStart","innerEnd"])}function M6(r,t,e,n){const i=D6(r.options.borderRadius),s=(e-t)/2,a=Math.min(s,n*t/2),o=A=>{const l=(e-Math.min(s,A))*n/2;return Ui(A,0,Math.min(s,l))};return{outerStart:o(i.outerStart),outerEnd:o(i.outerEnd),innerStart:Ui(i.innerStart,0,a),innerEnd:Ui(i.innerEnd,0,a)}}function Nu(r,t,e,n){return{x:e+r*Math.cos(t),y:n+r*Math.sin(t)}}function r0(r,t,e,n,i,s){const{x:a,y:o,startAngle:A,pixelMargin:l,innerRadius:c}=t,u=Math.max(t.outerRadius+n+e-l,0),h=c>0?c+n+e+l:0;let d=0;const m=i-A;if(n){const Z=c>0?c-n:0,ut=u>0?u-n:0,nt=(Z+ut)/2,j=nt!==0?m*nt/(nt+n):m;d=(m-j)/2}const f=Math.max(.001,m*u-e/Fr)/u,b=(m-f)/2,y=A+b+d,B=i-b-d,{outerStart:I,outerEnd:C,innerStart:N,innerEnd:R}=M6(t,h,u,B-y),U=u-I,x=u-C,v=y+I/U,T=B-C/x,E=h+N,_=h+R,F=y+N/E,k=B-R/_;if(r.beginPath(),s){const Z=(v+T)/2;if(r.arc(a,o,u,v,Z),r.arc(a,o,u,Z,T),C>0){const G=Nu(x,T,a,o);r.arc(G.x,G.y,C,T,B+Xn)}const ut=Nu(_,B,a,o);if(r.lineTo(ut.x,ut.y),R>0){const G=Nu(_,k,a,o);r.arc(G.x,G.y,R,B+Xn,k+Math.PI)}const nt=(B-R/h+(y+N/h))/2;if(r.arc(a,o,h,B-R/h,nt,!0),r.arc(a,o,h,nt,y+N/h,!0),N>0){const G=Nu(E,F,a,o);r.arc(G.x,G.y,N,F+Math.PI,y-Xn)}const j=Nu(U,y,a,o);if(r.lineTo(j.x,j.y),I>0){const G=Nu(U,v,a,o);r.arc(G.x,G.y,I,y-Xn,v)}}else{r.moveTo(a,o);const Z=Math.cos(v)*u+a,ut=Math.sin(v)*u+o;r.lineTo(Z,ut);const nt=Math.cos(T)*u+a,j=Math.sin(T)*u+o;r.lineTo(nt,j)}r.closePath()}function R6(r,t,e,n,i){const{fullCircles:s,startAngle:a,circumference:o}=t;let A=t.endAngle;if(s){r0(r,t,e,n,A,i);for(let l=0;l<s;++l)r.fill();isNaN(o)||(A=a+(o%pn||pn))}return r0(r,t,e,n,A,i),r.fill(),A}function Q6(r,t,e,n,i){const{fullCircles:s,startAngle:a,circumference:o,options:A}=t,{borderWidth:l,borderJoinStyle:c,borderDash:u,borderDashOffset:h,borderRadius:d}=A,m=A.borderAlign==="inner";if(!l)return;r.setLineDash(u||[]),r.lineDashOffset=h,m?(r.lineWidth=l*2,r.lineJoin=c||"round"):(r.lineWidth=l,r.lineJoin=c||"bevel");let f=t.endAngle;if(s){r0(r,t,e,n,f,i);for(let b=0;b<s;++b)r.stroke();isNaN(o)||(f=a+(o%pn||pn))}m&&N6(r,t,f),A.selfJoin&&f-a>=Fr&&d===0&&c!=="miter"&&P6(r,t,f),s||(r0(r,t,e,n,f,i),r.stroke())}class rd extends RA{constructor(e){super();It(this,"circumference");It(this,"endAngle");It(this,"fullCircles");It(this,"innerRadius");It(this,"outerRadius");It(this,"pixelMargin");It(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,n,i){const s=this.getProps(["x","y"],i),{angle:a,distance:o}=Ck(s,{x:e,y:n}),{startAngle:A,endAngle:l,innerRadius:c,outerRadius:u,circumference:h}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),d=(this.options.spacing+this.options.borderWidth)/2,m=Oe(h,l-A),f=If(a,A,l)&&A!==l,b=m>=pn||f,y=bA(o,c+d,u+d);return b&&y}getCenterPoint(e){const{x:n,y:i,startAngle:s,endAngle:a,innerRadius:o,outerRadius:A}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:l,spacing:c}=this.options,u=(s+a)/2,h=(o+A+c+l)/2;return{x:n+Math.cos(u)*h,y:i+Math.sin(u)*h}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:n,circumference:i}=this,s=(n.offset||0)/4,a=(n.spacing||0)/2,o=n.circular;if(this.pixelMargin=n.borderAlign==="inner"?.33:0,this.fullCircles=i>pn?Math.floor(i/pn):0,i===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const A=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(A)*s,Math.sin(A)*s);const l=1-Math.sin(Math.min(Fr,i||0)),c=s*l;e.fillStyle=n.backgroundColor,e.strokeStyle=n.borderColor,R6(e,this,c,a,o),Q6(e,this,c,a,o),e.restore()}}It(rd,"id","arc"),It(rd,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),It(rd,"defaultRoutes",{backgroundColor:"backgroundColor"}),It(rd,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"});function aI(r,t,e=t){r.lineCap=Oe(e.borderCapStyle,t.borderCapStyle),r.setLineDash(Oe(e.borderDash,t.borderDash)),r.lineDashOffset=Oe(e.borderDashOffset,t.borderDashOffset),r.lineJoin=Oe(e.borderJoinStyle,t.borderJoinStyle),r.lineWidth=Oe(e.borderWidth,t.borderWidth),r.strokeStyle=Oe(e.borderColor,t.borderColor)}function O6(r,t,e){r.lineTo(e.x,e.y)}function H6(r){return r.stepped?cD:r.tension||r.cubicInterpolationMode==="monotone"?uD:O6}function oI(r,t,e={}){const n=r.length,{start:i=0,end:s=n-1}=e,{start:a,end:o}=t,A=Math.max(i,a),l=Math.min(s,o),c=i<a&&s<a||i>o&&s>o;return{count:n,start:A,loop:t.loop,ilen:l<A&&!c?n+l-A:l-A}}function V6(r,t,e,n){const{points:i,options:s}=t,{count:a,start:o,loop:A,ilen:l}=oI(i,e,n),c=H6(s);let{move:u=!0,reverse:h}=n||{},d,m,f;for(d=0;d<=l;++d)m=i[(o+(h?l-d:d))%a],!m.skip&&(u?(r.moveTo(m.x,m.y),u=!1):c(r,f,m,h,s.stepped),f=m);return A&&(m=i[(o+(h?l:0))%a],c(r,f,m,h,s.stepped)),!!A}function $6(r,t,e,n){const i=t.points,{count:s,start:a,ilen:o}=oI(i,e,n),{move:A=!0,reverse:l}=n||{};let c=0,u=0,h,d,m,f,b,y;const B=C=>(a+(l?o-C:C))%s,I=()=>{f!==b&&(r.lineTo(c,b),r.lineTo(c,f),r.lineTo(c,y))};for(A&&(d=i[B(0)],r.moveTo(d.x,d.y)),h=0;h<=o;++h){if(d=i[B(h)],d.skip)continue;const C=d.x,N=d.y,R=C|0;R===m?(N<f?f=N:N>b&&(b=N),c=(u*c+C)/++u):(I(),r.lineTo(C,N),m=R,u=0,f=b=N),y=N}I()}function $w(r){const t=r.options,e=t.borderDash&&t.borderDash.length;return!r._decimated&&!r._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!e?$6:V6}function j6(r){return r.stepped?$D:r.tension||r.cubicInterpolationMode==="monotone"?jD:Ic}function G6(r,t,e,n){let i=t._path;i||(i=t._path=new Path2D,t.path(i,e,n)&&i.closePath()),aI(r,t.options),r.stroke(i)}function K6(r,t,e,n){const{segments:i,options:s}=t,a=$w(t);for(const o of i)aI(r,s,o.style),r.beginPath(),a(r,t,o,{start:e,end:e+n-1})&&r.closePath(),r.stroke()}const z6=typeof Path2D=="function";function q6(r,t,e,n){z6&&!t.options.segment?G6(r,t,e,n):K6(r,t,e,n)}class Bl extends RA{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){const n=this.options;if((n.tension||n.cubicInterpolationMode==="monotone")&&!n.stepped&&!this._pointsUpdated){const i=n.spanGaps?this._loop:this._fullLoop;ND(this._points,n,t,i,e),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=YD(this,this.options.segment))}first(){const t=this.segments,e=this.points;return t.length&&e[t[0].start]}last(){const t=this.segments,e=this.points,n=t.length;return n&&e[t[n-1].end]}interpolate(t,e){const n=this.options,i=t[e],s=this.points,a=Gk(this,{property:e,start:i,end:i});if(!a.length)return;const o=[],A=j6(n);let l,c;for(l=0,c=a.length;l<c;++l){const{start:u,end:h}=a[l],d=s[u],m=s[h];if(d===m){o.push(d);continue}const f=Math.abs((i-d[e])/(m[e]-d[e])),b=A(d,m,f,n.stepped);b[e]=t[e],o.push(b)}return o.length===1?o[0]:o}pathSegment(t,e,n){return $w(this)(t,this,e,n)}path(t,e,n){const i=this.segments,s=$w(this);let a=this._loop;e=e||0,n=n||this.points.length-e;for(const o of i)a&=s(t,this,o,{start:e,end:e+n-1});return!!a}draw(t,e,n,i){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(t.save(),q6(t,this,n,i),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}It(Bl,"id","line"),It(Bl,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),It(Bl,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),It(Bl,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"});function oB(r,t,e,n){const i=r.options,{[e]:s}=r.getProps([e],n);return Math.abs(t-s)<i.radius+i.hitRadius}class rf extends RA{constructor(e){super();It(this,"parsed");It(this,"skip");It(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,n,i){const s=this.options,{x:a,y:o}=this.getProps(["x","y"],i);return Math.pow(e-a,2)+Math.pow(n-o,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(e,n){return oB(this,e,"x",n)}inYRange(e,n){return oB(this,e,"y",n)}getCenterPoint(e){const{x:n,y:i}=this.getProps(["x","y"],e);return{x:n,y:i}}size(e){e=e||this.options||{};let n=e.radius||0;n=Math.max(n,n&&e.hoverRadius||0);const i=n&&e.borderWidth||0;return(n+i)*2}draw(e,n){const i=this.options;this.skip||i.radius<.1||!ko(this,n,this.size(i)/2)||(e.strokeStyle=i.borderColor,e.lineWidth=i.borderWidth,e.fillStyle=i.backgroundColor,Qw(e,i,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}It(rf,"id","point"),It(rf,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),It(rf,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function AI(r,t){const{x:e,y:n,base:i,width:s,height:a}=r.getProps(["x","y","base","width","height"],t);let o,A,l,c,u;return r.horizontal?(u=a/2,o=Math.min(e,i),A=Math.max(e,i),l=n-u,c=n+u):(u=s/2,o=e-u,A=e+u,l=Math.min(n,i),c=Math.max(n,i)),{left:o,top:l,right:A,bottom:c}}function Cl(r,t,e,n){return r?0:Ui(t,e,n)}function W6(r,t,e){const n=r.options.borderWidth,i=r.borderSkipped,s=Pk(n);return{t:Cl(i.top,s.top,0,e),r:Cl(i.right,s.right,0,t),b:Cl(i.bottom,s.bottom,0,e),l:Cl(i.left,s.left,0,t)}}function Y6(r,t,e){const{enableBorderRadius:n}=r.getProps(["enableBorderRadius"]),i=r.options.borderRadius,s=zc(i),a=Math.min(t,e),o=r.borderSkipped,A=n||cr(i);return{topLeft:Cl(!A||o.top||o.left,s.topLeft,0,a),topRight:Cl(!A||o.top||o.right,s.topRight,0,a),bottomLeft:Cl(!A||o.bottom||o.left,s.bottomLeft,0,a),bottomRight:Cl(!A||o.bottom||o.right,s.bottomRight,0,a)}}function X6(r){const t=AI(r),e=t.right-t.left,n=t.bottom-t.top,i=W6(r,e/2,n/2),s=Y6(r,e/2,n/2);return{outer:{x:t.left,y:t.top,w:e,h:n,radius:s},inner:{x:t.left+i.l,y:t.top+i.t,w:e-i.l-i.r,h:n-i.t-i.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,s.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(i.b,i.r))}}}}function my(r,t,e,n){const i=t===null,s=e===null,o=r&&!(i&&s)&&AI(r,n);return o&&(i||bA(t,o.left,o.right))&&(s||bA(e,o.top,o.bottom))}function J6(r){return r.topLeft||r.topRight||r.bottomLeft||r.bottomRight}function Z6(r,t){r.rect(t.x,t.y,t.w,t.h)}function by(r,t,e={}){const n=r.x!==e.x?-t:0,i=r.y!==e.y?-t:0,s=(r.x+r.w!==e.x+e.w?t:0)-n,a=(r.y+r.h!==e.y+e.h?t:0)-i;return{x:r.x+n,y:r.y+i,w:r.w+s,h:r.h+a,radius:r.radius}}class nf extends RA{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:n,backgroundColor:i}}=this,{inner:s,outer:a}=X6(this),o=J6(a.radius)?Tf:Z6;t.save(),(a.w!==s.w||a.h!==s.h)&&(t.beginPath(),o(t,by(a,e,s)),t.clip(),o(t,by(s,-e,a)),t.fillStyle=n,t.fill("evenodd")),t.beginPath(),o(t,by(s,e)),t.fillStyle=i,t.fill(),t.restore()}inRange(t,e,n){return my(this,t,e,n)}inXRange(t,e){return my(this,t,null,e)}inYRange(t,e){return my(this,null,t,e)}getCenterPoint(t){const{x:e,y:n,base:i,horizontal:s}=this.getProps(["x","y","base","horizontal"],t);return{x:s?(e+i)/2:e,y:s?n:(n+i)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}It(nf,"id","bar"),It(nf,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),It(nf,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var tR=Object.freeze({__proto__:null,ArcElement:rd,BarElement:nf,LineElement:Bl,PointElement:rf});const jw=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],AB=jw.map(r=>r.replace("rgb(","rgba(").replace(")",", 0.5)"));function lI(r){return jw[r%jw.length]}function cI(r){return AB[r%AB.length]}function eR(r,t){return r.borderColor=lI(t),r.backgroundColor=cI(t),++t}function rR(r,t){return r.backgroundColor=r.data.map(()=>lI(t++)),t}function nR(r,t){return r.backgroundColor=r.data.map(()=>cI(t++)),t}function iR(r){let t=0;return(e,n)=>{const i=r.getDatasetMeta(n).controller;i instanceof Rc?t=rR(e,t):i instanceof ef?t=nR(e,t):i&&(t=eR(e,t))}}function lB(r){let t;for(t in r)if(r[t].borderColor||r[t].backgroundColor)return!0;return!1}function sR(r){return r&&(r.borderColor||r.backgroundColor)}function aR(){return mn.borderColor!=="rgba(0,0,0,0.1)"||mn.backgroundColor!=="rgba(0,0,0,0.1)"}var oR={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(r,t,e){if(!e.enabled)return;const{data:{datasets:n},options:i}=r.config,{elements:s}=i,a=lB(n)||sR(i)||s&&lB(s)||aR();if(!e.forceOverride&&a)return;const o=iR(r);n.forEach(o)}};function AR(r,t,e,n,i){const s=i.samples||n;if(s>=e)return r.slice(t,t+e);const a=[],o=(e-2)/(s-2);let A=0;const l=t+e-1;let c=t,u,h,d,m,f;for(a[A++]=r[c],u=0;u<s-2;u++){let b=0,y=0,B;const I=Math.floor((u+1)*o)+1+t,C=Math.min(Math.floor((u+2)*o)+1,e)+t,N=C-I;for(B=I;B<C;B++)b+=r[B].x,y+=r[B].y;b/=N,y/=N;const R=Math.floor(u*o)+1+t,U=Math.min(Math.floor((u+1)*o)+1,e)+t,{x,y:v}=r[c];for(d=m=-1,B=R;B<U;B++)m=.5*Math.abs((x-b)*(r[B].y-v)-(x-r[B].x)*(y-v)),m>d&&(d=m,h=r[B],f=B);a[A++]=h,c=f}return a[A++]=r[l],a}function lR(r,t,e,n){let i=0,s=0,a,o,A,l,c,u,h,d,m,f;const b=[],y=t+e-1,B=r[t].x,C=r[y].x-B;for(a=t;a<t+e;++a){o=r[a],A=(o.x-B)/C*n,l=o.y;const N=A|0;if(N===c)l<m?(m=l,u=a):l>f&&(f=l,h=a),i=(s*i+o.x)/++s;else{const R=a-1;if(!er(u)&&!er(h)){const U=Math.min(u,h),x=Math.max(u,h);U!==d&&U!==R&&b.push({...r[U],x:i}),x!==d&&x!==R&&b.push({...r[x],x:i})}a>0&&R!==d&&b.push(r[R]),b.push(o),c=N,s=0,m=f=l,u=h=d=a}}return b}function uI(r){if(r._decimated){const t=r._data;delete r._decimated,delete r._data,Object.defineProperty(r,"data",{configurable:!0,enumerable:!0,writable:!0,value:t})}}function cB(r){r.data.datasets.forEach(t=>{uI(t)})}function cR(r,t){const e=t.length;let n=0,i;const{iScale:s}=r,{min:a,max:o,minDefined:A,maxDefined:l}=s.getUserBounds();return A&&(n=Ui(yA(t,s.axis,a).lo,0,e-1)),l?i=Ui(yA(t,s.axis,o).hi+1,n,e)-n:i=e-n,{start:n,count:i}}var uR={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(r,t,e)=>{if(!e.enabled){cB(r);return}const n=r.width;r.data.datasets.forEach((i,s)=>{const{_data:a,indexAxis:o}=i,A=r.getDatasetMeta(s),l=a||i.data;if(dn([o,r.options.indexAxis])==="y"||!A.controller.supportsDecimation)return;const c=r.scales[A.xAxisID];if(c.type!=="linear"&&c.type!=="time"||r.options.parsing)return;let{start:u,count:h}=cR(A,l);const d=e.threshold||4*n;if(h<=d){uI(i);return}er(a)&&(i._data=l,delete i.data,Object.defineProperty(i,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(f){this._data=f}}));let m;switch(e.algorithm){case"lttb":m=AR(l,u,h,n,e);break;case"min-max":m=lR(l,u,h,n);break;default:throw new Error(`Unsupported decimation algorithm '${e.algorithm}'`)}i._decimated=m})},destroy(r){cB(r)}};function dR(r,t,e){const n=r.segments,i=r.points,s=t.points,a=[];for(const o of n){let{start:A,end:l}=o;l=J0(A,l,i);const c=Gw(e,i[A],i[l],o.loop);if(!t.segments){a.push({source:o,target:c,start:i[A],end:i[l]});continue}const u=Gk(t,c);for(const h of u){const d=Gw(e,s[h.start],s[h.end],h.loop),m=jk(o,i,d);for(const f of m)a.push({source:f,target:h,start:{[e]:uB(c,d,"start",Math.max)},end:{[e]:uB(c,d,"end",Math.min)}})}}return a}function Gw(r,t,e,n){if(n)return;let i=t[r],s=e[r];return r==="angle"&&(i=As(i),s=As(s)),{property:r,start:i,end:s}}function hR(r,t){const{x:e=null,y:n=null}=r||{},i=t.points,s=[];return t.segments.forEach(({start:a,end:o})=>{o=J0(a,o,i);const A=i[a],l=i[o];n!==null?(s.push({x:A.x,y:n}),s.push({x:l.x,y:n})):e!==null&&(s.push({x:e,y:A.y}),s.push({x:e,y:l.y}))}),s}function J0(r,t,e){for(;t>r;t--){const n=e[t];if(!isNaN(n.x)&&!isNaN(n.y))break}return t}function uB(r,t,e,n){return r&&t?n(r[e],t[e]):r?r[e]:t?t[e]:0}function dI(r,t){let e=[],n=!1;return hn(r)?(n=!0,e=r):e=hR(r,t),e.length?new Bl({points:e,options:{tension:0},_loop:n,_fullLoop:n}):null}function dB(r){return r&&r.fill!==!1}function fR(r,t,e){let i=r[t].fill;const s=[t];let a;if(!e)return i;for(;i!==!1&&s.indexOf(i)===-1;){if(!Nn(i))return i;if(a=r[i],!a)return!1;if(a.visible)return i;s.push(i),i=a.fill}return!1}function gR(r,t,e){const n=yR(r);if(cr(n))return isNaN(n.value)?!1:n;let i=parseFloat(n);return Nn(i)&&Math.floor(i)===i?pR(n[0],t,i,e):["origin","start","end","stack","shape"].indexOf(n)>=0&&n}function pR(r,t,e,n){return(r==="-"||r==="+")&&(e=t+e),e===t||e<0||e>=n?!1:e}function mR(r,t){let e=null;return r==="start"?e=t.bottom:r==="end"?e=t.top:cr(r)?e=t.getPixelForValue(r.value):t.getBasePixel&&(e=t.getBasePixel()),e}function bR(r,t,e){let n;return r==="start"?n=e:r==="end"?n=t.options.reverse?t.min:t.max:cr(r)?n=r.value:n=t.getBaseValue(),n}function yR(r){const t=r.options,e=t.fill;let n=Oe(e&&e.target,e);return n===void 0&&(n=!!t.backgroundColor),n===!1||n===null?!1:n===!0?"origin":n}function wR(r){const{scale:t,index:e,line:n}=r,i=[],s=n.segments,a=n.points,o=vR(t,e);o.push(dI({x:null,y:t.bottom},n));for(let A=0;A<s.length;A++){const l=s[A];for(let c=l.start;c<=l.end;c++)xR(i,a[c],o)}return new Bl({points:i,options:{}})}function vR(r,t){const e=[],n=r.getMatchingVisibleMetas("line");for(let i=0;i<n.length;i++){const s=n[i];if(s.index===t)break;s.hidden||e.unshift(s.dataset)}return e}function xR(r,t,e){const n=[];for(let i=0;i<e.length;i++){const s=e[i],{first:a,last:o,point:A}=_R(s,t,"x");if(!(!A||a&&o)){if(a)n.unshift(A);else if(r.push(A),!o)break}}r.push(...n)}function _R(r,t,e){const n=r.interpolate(t,e);if(!n)return{};const i=n[e],s=r.segments,a=r.points;let o=!1,A=!1;for(let l=0;l<s.length;l++){const c=s[l],u=a[c.start][e],h=a[c.end][e];if(bA(i,u,h)){o=i===u,A=i===h;break}}return{first:o,last:A,point:n}}class hI{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,e,n){const{x:i,y:s,radius:a}=this;return e=e||{start:0,end:pn},t.arc(i,s,a,e.end,e.start,!0),!n.bounds}interpolate(t){const{x:e,y:n,radius:i}=this,s=t.angle;return{x:e+Math.cos(s)*i,y:n+Math.sin(s)*i,angle:s}}}function BR(r){const{chart:t,fill:e,line:n}=r;if(Nn(e))return CR(t,e);if(e==="stack")return wR(r);if(e==="shape")return!0;const i=ER(r);return i instanceof hI?i:dI(i,n)}function CR(r,t){const e=r.getDatasetMeta(t);return e&&r.isDatasetVisible(t)?e.dataset:null}function ER(r){return(r.scale||{}).getPointPositionForValue?kR(r):SR(r)}function SR(r){const{scale:t={},fill:e}=r,n=mR(e,t);if(Nn(n)){const i=t.isHorizontal();return{x:i?n:null,y:i?null:n}}return null}function kR(r){const{scale:t,fill:e}=r,n=t.options,i=t.getLabels().length,s=n.reverse?t.max:t.min,a=bR(e,t,s),o=[];if(n.grid.circular){const A=t.getPointPositionForValue(0,s);return new hI({x:A.x,y:A.y,radius:t.getDistanceFromCenterForValue(a)})}for(let A=0;A<i;++A)o.push(t.getPointPositionForValue(A,a));return o}function yy(r,t,e){const n=BR(t),{chart:i,index:s,line:a,scale:o,axis:A}=t,l=a.options,c=l.fill,u=l.backgroundColor,{above:h=u,below:d=u}=c||{},m=i.getDatasetMeta(s),f=Kk(i,m);n&&a.points.length&&(q0(r,e),IR(r,{line:a,target:n,above:h,below:d,area:e,scale:o,axis:A,clip:f}),W0(r))}function IR(r,t){const{line:e,target:n,above:i,below:s,area:a,scale:o,clip:A}=t,l=e._loop?"angle":t.axis;r.save();let c=s;s!==i&&(l==="x"?(hB(r,n,a.top),wy(r,{line:e,target:n,color:i,scale:o,property:l,clip:A}),r.restore(),r.save(),hB(r,n,a.bottom)):l==="y"&&(fB(r,n,a.left),wy(r,{line:e,target:n,color:s,scale:o,property:l,clip:A}),r.restore(),r.save(),fB(r,n,a.right),c=i)),wy(r,{line:e,target:n,color:c,scale:o,property:l,clip:A}),r.restore()}function hB(r,t,e){const{segments:n,points:i}=t;let s=!0,a=!1;r.beginPath();for(const o of n){const{start:A,end:l}=o,c=i[A],u=i[J0(A,l,i)];s?(r.moveTo(c.x,c.y),s=!1):(r.lineTo(c.x,e),r.lineTo(c.x,c.y)),a=!!t.pathSegment(r,o,{move:a}),a?r.closePath():r.lineTo(u.x,e)}r.lineTo(t.first().x,e),r.closePath(),r.clip()}function fB(r,t,e){const{segments:n,points:i}=t;let s=!0,a=!1;r.beginPath();for(const o of n){const{start:A,end:l}=o,c=i[A],u=i[J0(A,l,i)];s?(r.moveTo(c.x,c.y),s=!1):(r.lineTo(e,c.y),r.lineTo(c.x,c.y)),a=!!t.pathSegment(r,o,{move:a}),a?r.closePath():r.lineTo(e,u.y)}r.lineTo(e,t.first().y),r.closePath(),r.clip()}function wy(r,t){const{line:e,target:n,property:i,color:s,scale:a,clip:o}=t,A=dR(e,n,i);for(const{source:l,target:c,start:u,end:h}of A){const{style:{backgroundColor:d=s}={}}=l,m=n!==!0;r.save(),r.fillStyle=d,TR(r,a,o,m&&Gw(i,u,h)),r.beginPath();const f=!!e.pathSegment(r,l);let b;if(m){f?r.closePath():gB(r,n,h,i);const y=!!n.pathSegment(r,c,{move:f,reverse:!0});b=f&&y,b||gB(r,n,u,i)}r.closePath(),r.fill(b?"evenodd":"nonzero"),r.restore()}}function TR(r,t,e,n){const i=t.chart.chartArea,{property:s,start:a,end:o}=n||{};if(s==="x"||s==="y"){let A,l,c,u;s==="x"?(A=a,l=i.top,c=o,u=i.bottom):(A=i.left,l=a,c=i.right,u=o),r.beginPath(),e&&(A=Math.max(A,e.left),c=Math.min(c,e.right),l=Math.max(l,e.top),u=Math.min(u,e.bottom)),r.rect(A,l,c-A,u-l),r.clip()}}function gB(r,t,e,n){const i=t.interpolate(e,n);i&&r.lineTo(i.x,i.y)}var FR={id:"filler",afterDatasetsUpdate(r,t,e){const n=(r.data.datasets||[]).length,i=[];let s,a,o,A;for(a=0;a<n;++a)s=r.getDatasetMeta(a),o=s.dataset,A=null,o&&o.options&&o instanceof Bl&&(A={visible:r.isDatasetVisible(a),index:a,fill:gR(o,a,n),chart:r,axis:s.controller.options.indexAxis,scale:s.vScale,line:o}),s.$filler=A,i.push(A);for(a=0;a<n;++a)A=i[a],!(!A||A.fill===!1)&&(A.fill=fR(i,a,e.propagate))},beforeDraw(r,t,e){const n=e.drawTime==="beforeDraw",i=r.getSortedVisibleDatasetMetas(),s=r.chartArea;for(let a=i.length-1;a>=0;--a){const o=i[a].$filler;o&&(o.line.updateControlPoints(s,o.axis),n&&o.fill&&yy(r.ctx,o,s))}},beforeDatasetsDraw(r,t,e){if(e.drawTime!=="beforeDatasetsDraw")return;const n=r.getSortedVisibleDatasetMetas();for(let i=n.length-1;i>=0;--i){const s=n[i].$filler;dB(s)&&yy(r.ctx,s,r.chartArea)}},beforeDatasetDraw(r,t,e){const n=t.meta.$filler;!dB(n)||e.drawTime!=="beforeDatasetDraw"||yy(r.ctx,n,r.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const pB=(r,t)=>{let{boxHeight:e=t,boxWidth:n=t}=r;return r.usePointStyle&&(e=Math.min(e,t),n=r.pointStyleWidth||Math.min(n,t)),{boxWidth:n,boxHeight:e,itemHeight:Math.max(t,e)}},LR=(r,t)=>r!==null&&t!==null&&r.datasetIndex===t.datasetIndex&&r.index===t.index;class mB extends RA{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,n){this.maxWidth=t,this.maxHeight=e,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=Re(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(n=>t.filter(n,this.chart.data))),t.sort&&(e=e.sort((n,i)=>t.sort(n,i,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display){this.width=this.height=0;return}const n=t.labels,i=ai(n.font),s=i.size,a=this._computeTitleHeight(),{boxWidth:o,itemHeight:A}=pB(n,s);let l,c;e.font=i.string,this.isHorizontal()?(l=this.maxWidth,c=this._fitRows(a,s,o,A)+10):(c=this.maxHeight,l=this._fitCols(a,i,o,A)+10),this.width=Math.min(l,t.maxWidth||this.maxWidth),this.height=Math.min(c,t.maxHeight||this.maxHeight)}_fitRows(t,e,n,i){const{ctx:s,maxWidth:a,options:{labels:{padding:o}}}=this,A=this.legendHitBoxes=[],l=this.lineWidths=[0],c=i+o;let u=t;s.textAlign="left",s.textBaseline="middle";let h=-1,d=-c;return this.legendItems.forEach((m,f)=>{const b=n+e/2+s.measureText(m.text).width;(f===0||l[l.length-1]+b+2*o>a)&&(u+=c,l[l.length-(f>0?0:1)]=0,d+=c,h++),A[f]={left:0,top:d,row:h,width:b,height:i},l[l.length-1]+=b+o}),u}_fitCols(t,e,n,i){const{ctx:s,maxHeight:a,options:{labels:{padding:o}}}=this,A=this.legendHitBoxes=[],l=this.columnSizes=[],c=a-t;let u=o,h=0,d=0,m=0,f=0;return this.legendItems.forEach((b,y)=>{const{itemWidth:B,itemHeight:I}=UR(n,e,s,b,i);y>0&&d+I+2*o>c&&(u+=h+o,l.push({width:h,height:d}),m+=h+o,f++,h=d=0),A[y]={left:m,top:d,col:f,width:B,height:I},h=Math.max(h,B),d+=I+o}),u+=h,l.push({width:h,height:d}),u}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:n,labels:{padding:i},rtl:s}}=this,a=cd(s,this.left,this.width);if(this.isHorizontal()){let o=0,A=as(n,this.left+i,this.right-this.lineWidths[o]);for(const l of e)o!==l.row&&(o=l.row,A=as(n,this.left+i,this.right-this.lineWidths[o])),l.top+=this.top+t+i,l.left=a.leftForLtr(a.x(A),l.width),A+=l.width+i}else{let o=0,A=as(n,this.top+t+i,this.bottom-this.columnSizes[o].height);for(const l of e)l.col!==o&&(o=l.col,A=as(n,this.top+t+i,this.bottom-this.columnSizes[o].height)),l.top=A,l.left+=this.left+i,l.left=a.leftForLtr(a.x(l.left),l.width),A+=l.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;q0(t,this),this._draw(),W0(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:n,ctx:i}=this,{align:s,labels:a}=t,o=mn.color,A=cd(t.rtl,this.left,this.width),l=ai(a.font),{padding:c}=a,u=l.size,h=u/2;let d;this.drawTitle(),i.textAlign=A.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=l.string;const{boxWidth:m,boxHeight:f,itemHeight:b}=pB(a,u),y=function(R,U,x){if(isNaN(m)||m<=0||isNaN(f)||f<0)return;i.save();const v=Oe(x.lineWidth,1);if(i.fillStyle=Oe(x.fillStyle,o),i.lineCap=Oe(x.lineCap,"butt"),i.lineDashOffset=Oe(x.lineDashOffset,0),i.lineJoin=Oe(x.lineJoin,"miter"),i.lineWidth=v,i.strokeStyle=Oe(x.strokeStyle,o),i.setLineDash(Oe(x.lineDash,[])),a.usePointStyle){const T={radius:f*Math.SQRT2/2,pointStyle:x.pointStyle,rotation:x.rotation,borderWidth:v},E=A.xPlus(R,m/2),_=U+h;Uk(i,T,E,_,a.pointStyleWidth&&m)}else{const T=U+Math.max((u-f)/2,0),E=A.leftForLtr(R,m),_=zc(x.borderRadius);i.beginPath(),Object.values(_).some(F=>F!==0)?Tf(i,{x:E,y:T,w:m,h:f,radius:_}):i.rect(E,T,m,f),i.fill(),v!==0&&i.stroke()}i.restore()},B=function(R,U,x){nu(i,x.text,R,U+b/2,l,{strikethrough:x.hidden,textAlign:A.textAlign(x.textAlign)})},I=this.isHorizontal(),C=this._computeTitleHeight();I?d={x:as(s,this.left+c,this.right-n[0]),y:this.top+c+C,line:0}:d={x:this.left+c,y:as(s,this.top+C+c,this.bottom-e[0].height),line:0},Hk(this.ctx,t.textDirection);const N=b+c;this.legendItems.forEach((R,U)=>{i.strokeStyle=R.fontColor,i.fillStyle=R.fontColor;const x=i.measureText(R.text).width,v=A.textAlign(R.textAlign||(R.textAlign=a.textAlign)),T=m+h+x;let E=d.x,_=d.y;A.setWidth(this.width),I?U>0&&E+T+c>this.right&&(_=d.y+=N,d.line++,E=d.x=as(s,this.left+c,this.right-n[d.line])):U>0&&_+N>this.bottom&&(E=d.x=E+e[d.line].width+c,d.line++,_=d.y=as(s,this.top+C+c,this.bottom-e[d.line].height));const F=A.x(E);if(y(F,_,R),E=ZN(v,E+m+h,I?E+T:this.right,t.rtl),B(A.x(E),_,R),I)d.x+=T+c;else if(typeof R.text!="string"){const k=l.lineHeight;d.y+=fI(R,k)+c}else d.y+=N}),Vk(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,n=ai(e.font),i=Wi(e.padding);if(!e.display)return;const s=cd(t.rtl,this.left,this.width),a=this.ctx,o=e.position,A=n.size/2,l=i.top+A;let c,u=this.left,h=this.width;if(this.isHorizontal())h=Math.max(...this.lineWidths),c=this.top+l,u=as(t.align,u,this.right-h);else{const m=this.columnSizes.reduce((f,b)=>Math.max(f,b.height),0);c=l+as(t.align,this.top,this.bottom-m-t.labels.padding-this._computeTitleHeight())}const d=as(o,u,u+h);a.textAlign=s.textAlign(Dv(o)),a.textBaseline="middle",a.strokeStyle=e.color,a.fillStyle=e.color,a.font=n.string,nu(a,e.text,d,c,n)}_computeTitleHeight(){const t=this.options.title,e=ai(t.font),n=Wi(t.padding);return t.display?e.lineHeight+n.height:0}_getLegendItemAt(t,e){let n,i,s;if(bA(t,this.left,this.right)&&bA(e,this.top,this.bottom)){for(s=this.legendHitBoxes,n=0;n<s.length;++n)if(i=s[n],bA(t,i.left,i.left+i.width)&&bA(e,i.top,i.top+i.height))return this.legendItems[n]}return null}handleEvent(t){const e=this.options;if(!DR(t.type,e))return;const n=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const i=this._hoveredItem,s=LR(i,n);i&&!s&&Re(e.onLeave,[t,i,this],this),this._hoveredItem=n,n&&!s&&Re(e.onHover,[t,n,this],this)}else n&&Re(e.onClick,[t,n,this],this)}}function UR(r,t,e,n,i){const s=PR(n,r,t,e),a=NR(i,n,t.lineHeight);return{itemWidth:s,itemHeight:a}}function PR(r,t,e,n){let i=r.text;return i&&typeof i!="string"&&(i=i.reduce((s,a)=>s.length>a.length?s:a)),t+e.size/2+n.measureText(i).width}function NR(r,t,e){let n=r;return typeof t.text!="string"&&(n=fI(t,e)),n}function fI(r,t){const e=r.text?r.text.length:0;return t*e}function DR(r,t){return!!((r==="mousemove"||r==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(r==="click"||r==="mouseup"))}var MR={id:"legend",_element:mB,start(r,t,e){const n=r.legend=new mB({ctx:r.ctx,options:e,chart:r});ds.configure(r,n,e),ds.addBox(r,n)},stop(r){ds.removeBox(r,r.legend),delete r.legend},beforeUpdate(r,t,e){const n=r.legend;ds.configure(r,n,e),n.options=e},afterUpdate(r){const t=r.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(r,t){t.replay||r.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(r,t,e){const n=t.datasetIndex,i=e.chart;i.isDatasetVisible(n)?(i.hide(n),t.hidden=!0):(i.show(n),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:r=>r.chart.options.color,boxWidth:40,padding:10,generateLabels(r){const t=r.data.datasets,{labels:{usePointStyle:e,pointStyle:n,textAlign:i,color:s,useBorderRadius:a,borderRadius:o}}=r.legend.options;return r._getSortedDatasetMetas().map(A=>{const l=A.controller.getStyle(e?0:void 0),c=Wi(l.borderWidth);return{text:t[A.index].label,fillStyle:l.backgroundColor,fontColor:s,hidden:!A.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(c.width+c.height)/4,strokeStyle:l.borderColor,pointStyle:n||l.pointStyle,rotation:l.rotation,textAlign:i||l.textAlign,borderRadius:a&&(o||l.borderRadius),datasetIndex:A.index}},this)}},title:{color:r=>r.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:r=>!r.startsWith("on"),labels:{_scriptable:r=>!["generateLabels","filter","sort"].includes(r)}}};class Gv extends RA{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const n=this.options;if(this.left=0,this.top=0,!n.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=e;const i=hn(n.text)?n.text.length:1;this._padding=Wi(n.padding);const s=i*ai(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:e,left:n,bottom:i,right:s,options:a}=this,o=a.align;let A=0,l,c,u;return this.isHorizontal()?(c=as(o,n,s),u=e+t,l=s-n):(a.position==="left"?(c=n+t,u=as(o,i,e),A=Fr*-.5):(c=s-t,u=as(o,e,i),A=Fr*.5),l=i-e),{titleX:c,titleY:u,maxWidth:l,rotation:A}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const n=ai(e.font),s=n.lineHeight/2+this._padding.top,{titleX:a,titleY:o,maxWidth:A,rotation:l}=this._drawArgs(s);nu(t,e.text,0,0,n,{color:e.color,maxWidth:A,rotation:l,textAlign:Dv(e.align),textBaseline:"middle",translation:[a,o]})}}function RR(r,t){const e=new Gv({ctx:r.ctx,options:t,chart:r});ds.configure(r,e,t),ds.addBox(r,e),r.titleBlock=e}var QR={id:"title",_element:Gv,start(r,t,e){RR(r,e)},stop(r){const t=r.titleBlock;ds.removeBox(r,t),delete r.titleBlock},beforeUpdate(r,t,e){const n=r.titleBlock;ds.configure(r,n,e),n.options=e},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const dp=new WeakMap;var OR={id:"subtitle",start(r,t,e){const n=new Gv({ctx:r.ctx,options:e,chart:r});ds.configure(r,n,e),ds.addBox(r,n),dp.set(r,n)},stop(r){ds.removeBox(r,dp.get(r)),dp.delete(r)},beforeUpdate(r,t,e){const n=dp.get(r);ds.configure(r,n,e),n.options=e},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Dh={average(r){if(!r.length)return!1;let t,e,n=new Set,i=0,s=0;for(t=0,e=r.length;t<e;++t){const o=r[t].element;if(o&&o.hasValue()){const A=o.tooltipPosition();n.add(A.x),i+=A.y,++s}}return s===0||n.size===0?!1:{x:[...n].reduce((o,A)=>o+A)/n.size,y:i/s}},nearest(r,t){if(!r.length)return!1;let e=t.x,n=t.y,i=Number.POSITIVE_INFINITY,s,a,o;for(s=0,a=r.length;s<a;++s){const A=r[s].element;if(A&&A.hasValue()){const l=A.getCenterPoint(),c=Mw(t,l);c<i&&(i=c,o=A)}}if(o){const A=o.tooltipPosition();e=A.x,n=A.y}return{x:e,y:n}}};function wo(r,t){return t&&(hn(t)?Array.prototype.push.apply(r,t):r.push(t)),r}function dA(r){return(typeof r=="string"||r instanceof String)&&r.indexOf(`
`)>-1?r.split(`
`):r}function HR(r,t){const{element:e,datasetIndex:n,index:i}=t,s=r.getDatasetMeta(n).controller,{label:a,value:o}=s.getLabelAndValue(i);return{chart:r,label:a,parsed:s.getParsed(i),raw:r.data.datasets[n].data[i],formattedValue:o,dataset:s.getDataset(),dataIndex:i,datasetIndex:n,element:e}}function bB(r,t){const e=r.chart.ctx,{body:n,footer:i,title:s}=r,{boxWidth:a,boxHeight:o}=t,A=ai(t.bodyFont),l=ai(t.titleFont),c=ai(t.footerFont),u=s.length,h=i.length,d=n.length,m=Wi(t.padding);let f=m.height,b=0,y=n.reduce((C,N)=>C+N.before.length+N.lines.length+N.after.length,0);if(y+=r.beforeBody.length+r.afterBody.length,u&&(f+=u*l.lineHeight+(u-1)*t.titleSpacing+t.titleMarginBottom),y){const C=t.displayColors?Math.max(o,A.lineHeight):A.lineHeight;f+=d*C+(y-d)*A.lineHeight+(y-1)*t.bodySpacing}h&&(f+=t.footerMarginTop+h*c.lineHeight+(h-1)*t.footerSpacing);let B=0;const I=function(C){b=Math.max(b,e.measureText(C).width+B)};return e.save(),e.font=l.string,Ar(r.title,I),e.font=A.string,Ar(r.beforeBody.concat(r.afterBody),I),B=t.displayColors?a+2+t.boxPadding:0,Ar(n,C=>{Ar(C.before,I),Ar(C.lines,I),Ar(C.after,I)}),B=0,e.font=c.string,Ar(r.footer,I),e.restore(),b+=m.width,{width:b,height:f}}function VR(r,t){const{y:e,height:n}=t;return e<n/2?"top":e>r.height-n/2?"bottom":"center"}function $R(r,t,e,n){const{x:i,width:s}=n,a=e.caretSize+e.caretPadding;if(r==="left"&&i+s+a>t.width||r==="right"&&i-s-a<0)return!0}function jR(r,t,e,n){const{x:i,width:s}=e,{width:a,chartArea:{left:o,right:A}}=r;let l="center";return n==="center"?l=i<=(o+A)/2?"left":"right":i<=s/2?l="left":i>=a-s/2&&(l="right"),$R(l,r,t,e)&&(l="center"),l}function yB(r,t,e){const n=e.yAlign||t.yAlign||VR(r,e);return{xAlign:e.xAlign||t.xAlign||jR(r,t,e,n),yAlign:n}}function GR(r,t){let{x:e,width:n}=r;return t==="right"?e-=n:t==="center"&&(e-=n/2),e}function KR(r,t,e){let{y:n,height:i}=r;return t==="top"?n+=e:t==="bottom"?n-=i+e:n-=i/2,n}function wB(r,t,e,n){const{caretSize:i,caretPadding:s,cornerRadius:a}=r,{xAlign:o,yAlign:A}=e,l=i+s,{topLeft:c,topRight:u,bottomLeft:h,bottomRight:d}=zc(a);let m=GR(t,o);const f=KR(t,A,l);return A==="center"?o==="left"?m+=l:o==="right"&&(m-=l):o==="left"?m-=Math.max(c,h)+i:o==="right"&&(m+=Math.max(u,d)+i),{x:Ui(m,0,n.width-t.width),y:Ui(f,0,n.height-t.height)}}function hp(r,t,e){const n=Wi(e.padding);return t==="center"?r.x+r.width/2:t==="right"?r.x+r.width-n.right:r.x+n.left}function vB(r){return wo([],dA(r))}function zR(r,t,e){return ic(r,{tooltip:t,tooltipItems:e,type:"tooltip"})}function xB(r,t){const e=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return e?r.override(e):r}const gI={beforeTitle:sA,title(r){if(r.length>0){const t=r[0],e=t.chart.data.labels,n=e?e.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(n>0&&t.dataIndex<n)return e[t.dataIndex]}return""},afterTitle:sA,beforeBody:sA,beforeLabel:sA,label(r){if(this&&this.options&&this.options.mode==="dataset")return r.label+": "+r.formattedValue||r.formattedValue;let t=r.dataset.label||"";t&&(t+=": ");const e=r.formattedValue;return er(e)||(t+=e),t},labelColor(r){const e=r.chart.getDatasetMeta(r.datasetIndex).controller.getStyle(r.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(r){const e=r.chart.getDatasetMeta(r.datasetIndex).controller.getStyle(r.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:sA,afterBody:sA,beforeFooter:sA,footer:sA,afterFooter:sA};function Rs(r,t,e,n){const i=r[t].call(e,n);return typeof i>"u"?gI[t].call(e,n):i}class Kw extends RA{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,n=this.options.setContext(this.getContext()),i=n.enabled&&e.options.animation&&n.animations,s=new zk(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=zR(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,e){const{callbacks:n}=e,i=Rs(n,"beforeTitle",this,t),s=Rs(n,"title",this,t),a=Rs(n,"afterTitle",this,t);let o=[];return o=wo(o,dA(i)),o=wo(o,dA(s)),o=wo(o,dA(a)),o}getBeforeBody(t,e){return vB(Rs(e.callbacks,"beforeBody",this,t))}getBody(t,e){const{callbacks:n}=e,i=[];return Ar(t,s=>{const a={before:[],lines:[],after:[]},o=xB(n,s);wo(a.before,dA(Rs(o,"beforeLabel",this,s))),wo(a.lines,Rs(o,"label",this,s)),wo(a.after,dA(Rs(o,"afterLabel",this,s))),i.push(a)}),i}getAfterBody(t,e){return vB(Rs(e.callbacks,"afterBody",this,t))}getFooter(t,e){const{callbacks:n}=e,i=Rs(n,"beforeFooter",this,t),s=Rs(n,"footer",this,t),a=Rs(n,"afterFooter",this,t);let o=[];return o=wo(o,dA(i)),o=wo(o,dA(s)),o=wo(o,dA(a)),o}_createItems(t){const e=this._active,n=this.chart.data,i=[],s=[],a=[];let o=[],A,l;for(A=0,l=e.length;A<l;++A)o.push(HR(this.chart,e[A]));return t.filter&&(o=o.filter((c,u,h)=>t.filter(c,u,h,n))),t.itemSort&&(o=o.sort((c,u)=>t.itemSort(c,u,n))),Ar(o,c=>{const u=xB(t.callbacks,c);i.push(Rs(u,"labelColor",this,c)),s.push(Rs(u,"labelPointStyle",this,c)),a.push(Rs(u,"labelTextColor",this,c))}),this.labelColors=i,this.labelPointStyles=s,this.labelTextColors=a,this.dataPoints=o,o}update(t,e){const n=this.options.setContext(this.getContext()),i=this._active;let s,a=[];if(!i.length)this.opacity!==0&&(s={opacity:0});else{const o=Dh[n.position].call(this,i,this._eventPosition);a=this._createItems(n),this.title=this.getTitle(a,n),this.beforeBody=this.getBeforeBody(a,n),this.body=this.getBody(a,n),this.afterBody=this.getAfterBody(a,n),this.footer=this.getFooter(a,n);const A=this._size=bB(this,n),l=Object.assign({},o,A),c=yB(this.chart,n,l),u=wB(n,l,c,this.chart);this.xAlign=c.xAlign,this.yAlign=c.yAlign,s={opacity:1,x:u.x,y:u.y,width:A.width,height:A.height,caretX:o.x,caretY:o.y}}this._tooltipItems=a,this.$context=void 0,s&&this._resolveAnimations().update(this,s),t&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,n,i){const s=this.getCaretPosition(t,n,i);e.lineTo(s.x1,s.y1),e.lineTo(s.x2,s.y2),e.lineTo(s.x3,s.y3)}getCaretPosition(t,e,n){const{xAlign:i,yAlign:s}=this,{caretSize:a,cornerRadius:o}=n,{topLeft:A,topRight:l,bottomLeft:c,bottomRight:u}=zc(o),{x:h,y:d}=t,{width:m,height:f}=e;let b,y,B,I,C,N;return s==="center"?(C=d+f/2,i==="left"?(b=h,y=b-a,I=C+a,N=C-a):(b=h+m,y=b+a,I=C-a,N=C+a),B=b):(i==="left"?y=h+Math.max(A,c)+a:i==="right"?y=h+m-Math.max(l,u)-a:y=this.caretX,s==="top"?(I=d,C=I-a,b=y-a,B=y+a):(I=d+f,C=I+a,b=y+a,B=y-a),N=I),{x1:b,x2:y,x3:B,y1:I,y2:C,y3:N}}drawTitle(t,e,n){const i=this.title,s=i.length;let a,o,A;if(s){const l=cd(n.rtl,this.x,this.width);for(t.x=hp(this,n.titleAlign,n),e.textAlign=l.textAlign(n.titleAlign),e.textBaseline="middle",a=ai(n.titleFont),o=n.titleSpacing,e.fillStyle=n.titleColor,e.font=a.string,A=0;A<s;++A)e.fillText(i[A],l.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+o,A+1===s&&(t.y+=n.titleMarginBottom-o)}}_drawColorBox(t,e,n,i,s){const a=this.labelColors[n],o=this.labelPointStyles[n],{boxHeight:A,boxWidth:l}=s,c=ai(s.bodyFont),u=hp(this,"left",s),h=i.x(u),d=A<c.lineHeight?(c.lineHeight-A)/2:0,m=e.y+d;if(s.usePointStyle){const f={radius:Math.min(l,A)/2,pointStyle:o.pointStyle,rotation:o.rotation,borderWidth:1},b=i.leftForLtr(h,l)+l/2,y=m+A/2;t.strokeStyle=s.multiKeyBackground,t.fillStyle=s.multiKeyBackground,Qw(t,f,b,y),t.strokeStyle=a.borderColor,t.fillStyle=a.backgroundColor,Qw(t,f,b,y)}else{t.lineWidth=cr(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,t.strokeStyle=a.borderColor,t.setLineDash(a.borderDash||[]),t.lineDashOffset=a.borderDashOffset||0;const f=i.leftForLtr(h,l),b=i.leftForLtr(i.xPlus(h,1),l-2),y=zc(a.borderRadius);Object.values(y).some(B=>B!==0)?(t.beginPath(),t.fillStyle=s.multiKeyBackground,Tf(t,{x:f,y:m,w:l,h:A,radius:y}),t.fill(),t.stroke(),t.fillStyle=a.backgroundColor,t.beginPath(),Tf(t,{x:b,y:m+1,w:l-2,h:A-2,radius:y}),t.fill()):(t.fillStyle=s.multiKeyBackground,t.fillRect(f,m,l,A),t.strokeRect(f,m,l,A),t.fillStyle=a.backgroundColor,t.fillRect(b,m+1,l-2,A-2))}t.fillStyle=this.labelTextColors[n]}drawBody(t,e,n){const{body:i}=this,{bodySpacing:s,bodyAlign:a,displayColors:o,boxHeight:A,boxWidth:l,boxPadding:c}=n,u=ai(n.bodyFont);let h=u.lineHeight,d=0;const m=cd(n.rtl,this.x,this.width),f=function(x){e.fillText(x,m.x(t.x+d),t.y+h/2),t.y+=h+s},b=m.textAlign(a);let y,B,I,C,N,R,U;for(e.textAlign=a,e.textBaseline="middle",e.font=u.string,t.x=hp(this,b,n),e.fillStyle=n.bodyColor,Ar(this.beforeBody,f),d=o&&b!=="right"?a==="center"?l/2+c:l+2+c:0,C=0,R=i.length;C<R;++C){for(y=i[C],B=this.labelTextColors[C],e.fillStyle=B,Ar(y.before,f),I=y.lines,o&&I.length&&(this._drawColorBox(e,t,C,m,n),h=Math.max(u.lineHeight,A)),N=0,U=I.length;N<U;++N)f(I[N]),h=u.lineHeight;Ar(y.after,f)}d=0,h=u.lineHeight,Ar(this.afterBody,f),t.y-=s}drawFooter(t,e,n){const i=this.footer,s=i.length;let a,o;if(s){const A=cd(n.rtl,this.x,this.width);for(t.x=hp(this,n.footerAlign,n),t.y+=n.footerMarginTop,e.textAlign=A.textAlign(n.footerAlign),e.textBaseline="middle",a=ai(n.footerFont),e.fillStyle=n.footerColor,e.font=a.string,o=0;o<s;++o)e.fillText(i[o],A.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+n.footerSpacing}}drawBackground(t,e,n,i){const{xAlign:s,yAlign:a}=this,{x:o,y:A}=t,{width:l,height:c}=n,{topLeft:u,topRight:h,bottomLeft:d,bottomRight:m}=zc(i.cornerRadius);e.fillStyle=i.backgroundColor,e.strokeStyle=i.borderColor,e.lineWidth=i.borderWidth,e.beginPath(),e.moveTo(o+u,A),a==="top"&&this.drawCaret(t,e,n,i),e.lineTo(o+l-h,A),e.quadraticCurveTo(o+l,A,o+l,A+h),a==="center"&&s==="right"&&this.drawCaret(t,e,n,i),e.lineTo(o+l,A+c-m),e.quadraticCurveTo(o+l,A+c,o+l-m,A+c),a==="bottom"&&this.drawCaret(t,e,n,i),e.lineTo(o+d,A+c),e.quadraticCurveTo(o,A+c,o,A+c-d),a==="center"&&s==="left"&&this.drawCaret(t,e,n,i),e.lineTo(o,A+u),e.quadraticCurveTo(o,A,o+u,A),e.closePath(),e.fill(),i.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,n=this.$animations,i=n&&n.x,s=n&&n.y;if(i||s){const a=Dh[t.position].call(this,this._active,this._eventPosition);if(!a)return;const o=this._size=bB(this,t),A=Object.assign({},a,this._size),l=yB(e,t,A),c=wB(t,A,l,e);(i._to!==c.x||s._to!==c.y)&&(this.xAlign=l.xAlign,this.yAlign=l.yAlign,this.width=o.width,this.height=o.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,c))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(e);const i={width:this.width,height:this.height},s={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const a=Wi(e.padding),o=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&o&&(t.save(),t.globalAlpha=n,this.drawBackground(s,t,i,e),Hk(t,e.textDirection),s.y+=a.top,this.drawTitle(s,t,e),this.drawBody(s,t,e),this.drawFooter(s,t,e),Vk(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const n=this._active,i=t.map(({datasetIndex:o,index:A})=>{const l=this.chart.getDatasetMeta(o);if(!l)throw new Error("Cannot find a dataset at index "+o);return{datasetIndex:o,element:l.data[A],index:A}}),s=!Ym(n,i),a=this._positionChanged(i,e);(s||a)&&(this._active=i,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,n=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,s=this._active||[],a=this._getActiveElements(t,s,e,n),o=this._positionChanged(a,t),A=e||!Ym(a,s)||o;return A&&(this._active=a,(i.enabled||i.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),A}_getActiveElements(t,e,n,i){const s=this.options;if(t.type==="mouseout")return[];if(!i)return e.filter(o=>this.chart.data.datasets[o.datasetIndex]&&this.chart.getDatasetMeta(o.datasetIndex).controller.getParsed(o.index)!==void 0);const a=this.chart.getElementsAtEventForMode(t,s.mode,s,n);return s.reverse&&a.reverse(),a}_positionChanged(t,e){const{caretX:n,caretY:i,options:s}=this,a=Dh[s.position].call(this,t,e);return a!==!1&&(n!==a.x||i!==a.y)}}It(Kw,"positioners",Dh);var qR={id:"tooltip",_element:Kw,positioners:Dh,afterInit(r,t,e){e&&(r.tooltip=new Kw({chart:r,options:e}))},beforeUpdate(r,t,e){r.tooltip&&r.tooltip.initialize(e)},reset(r,t,e){r.tooltip&&r.tooltip.initialize(e)},afterDraw(r){const t=r.tooltip;if(t&&t._willRender()){const e={tooltip:t};if(r.notifyPlugins("beforeTooltipDraw",{...e,cancelable:!0})===!1)return;t.draw(r.ctx),r.notifyPlugins("afterTooltipDraw",e)}},afterEvent(r,t){if(r.tooltip){const e=t.replay;r.tooltip.handleEvent(t.event,e,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(r,t)=>t.bodyFont.size,boxWidth:(r,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:gI},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:r=>r!=="filter"&&r!=="itemSort"&&r!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},WR=Object.freeze({__proto__:null,Colors:oR,Decimation:uR,Filler:FR,Legend:MR,SubTitle:OR,Title:QR,Tooltip:qR});const YR=(r,t,e,n)=>(typeof t=="string"?(e=r.push(t)-1,n.unshift({index:e,label:t})):isNaN(t)&&(e=null),e);function XR(r,t,e,n){const i=r.indexOf(t);if(i===-1)return YR(r,t,e,n);const s=r.lastIndexOf(t);return i!==s?e:i}const JR=(r,t)=>r===null?null:Ui(Math.round(r),0,t);function _B(r){const t=this.getLabels();return r>=0&&r<t.length?t[r]:r}class zw extends mu{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const n=this.getLabels();for(const{index:i,label:s}of e)n[i]===s&&n.splice(i,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(er(t))return null;const n=this.getLabels();return e=isFinite(e)&&n[e]===t?e:XR(n,t,Oe(e,t),this._addedLabels),JR(e,n.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:n,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(n=0),e||(i=this.getLabels().length-1)),this.min=n,this.max=i}buildTicks(){const t=this.min,e=this.max,n=this.options.offset,i=[];let s=this.getLabels();s=t===0&&e===s.length-1?s:s.slice(t,e+1),this._valueRange=Math.max(s.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let a=t;a<=e;a++)i.push({value:a});return i}getLabelForValue(t){return _B.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}It(zw,"id","category"),It(zw,"defaults",{ticks:{callback:_B}});function ZR(r,t){const e=[],{bounds:i,step:s,min:a,max:o,precision:A,count:l,maxTicks:c,maxDigits:u,includeBounds:h}=r,d=s||1,m=c-1,{min:f,max:b}=t,y=!er(a),B=!er(o),I=!er(l),C=(b-f)/(u+1);let N=b_((b-f)/m/d)*d,R,U,x,v;if(N<1e-14&&!y&&!B)return[{value:f},{value:b}];v=Math.ceil(b/N)-Math.floor(f/N),v>m&&(N=b_(v*N/m/d)*d),er(A)||(R=Math.pow(10,A),N=Math.ceil(N*R)/R),i==="ticks"?(U=Math.floor(f/N)*N,x=Math.ceil(b/N)*N):(U=f,x=b),y&&B&&s&&KN((o-a)/s,N/1e3)?(v=Math.round(Math.min((o-a)/N,c)),N=(o-a)/v,U=a,x=o):I?(U=y?a:U,x=B?o:x,v=l-1,N=(x-U)/v):(v=(x-U)/N,Kc(v,Math.round(v),N/1e3)?v=Math.round(v):v=Math.ceil(v));const T=Math.max(y_(N),y_(U));R=Math.pow(10,er(A)?T:A),U=Math.round(U*R)/R,x=Math.round(x*R)/R;let E=0;for(y&&(h&&U!==a?(e.push({value:a}),U<a&&E++,Kc(Math.round((U+E*N)*R)/R,a,BB(a,C,r))&&E++):U<a&&E++);E<v;++E){const _=Math.round((U+E*N)*R)/R;if(B&&_>o)break;e.push({value:_})}return B&&h&&x!==o?e.length&&Kc(e[e.length-1].value,o,BB(o,C,r))?e[e.length-1].value=o:e.push({value:o}):(!B||x===o)&&e.push({value:x}),e}function BB(r,t,{horizontal:e,minRotation:n}){const i=za(n),s=(e?Math.sin(i):Math.cos(i))||.001,a=.75*t*(""+r).length;return Math.min(t/s,a)}class n0 extends mu{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return er(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:i,max:s}=this;const a=A=>i=e?i:A,o=A=>s=n?s:A;if(t){const A=Pa(i),l=Pa(s);A<0&&l<0?o(0):A>0&&l>0&&a(0)}if(i===s){let A=s===0?1:Math.abs(s*.05);o(s+A),t||a(i-A)}this.min=i,this.max=s}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:e,stepSize:n}=t,i;return n?(i=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),e=e||11),e&&(i=Math.min(e,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let n=this.getTickLimit();n=Math.max(2,n);const i={maxTicks:n,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:e.includeBounds!==!1},s=this._range||this,a=ZR(i,s);return t.bounds==="ticks"&&Bk(a,this,"value"),t.reverse?(a.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),a}configure(){const t=this.ticks;let e=this.min,n=this.max;if(super.configure(),this.options.offset&&t.length){const i=(n-e)/Math.max(t.length-1,1)/2;e-=i,n+=i}this._startValue=e,this._endValue=n,this._valueRange=n-e}getLabelForValue(t){return ng(t,this.chart.options.locale,this.options.ticks.format)}}class qw extends n0{determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=Nn(t)?t:0,this.max=Nn(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,n=za(this.options.ticks.minRotation),i=(t?Math.sin(n):Math.cos(n))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,s.lineHeight/i))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}It(qw,"id","linear"),It(qw,"defaults",{ticks:{callback:z0.formatters.numeric}});const Lf=r=>Math.floor(xl(r)),Sc=(r,t)=>Math.pow(10,Lf(r)+t);function CB(r){return r/Math.pow(10,Lf(r))===1}function EB(r,t,e){const n=Math.pow(10,e),i=Math.floor(r/n);return Math.ceil(t/n)-i}function tQ(r,t){const e=t-r;let n=Lf(e);for(;EB(r,t,n)>10;)n++;for(;EB(r,t,n)<10;)n--;return Math.min(n,Lf(r))}function eQ(r,{min:t,max:e}){t=ua(r.min,t);const n=[],i=Lf(t);let s=tQ(t,e),a=s<0?Math.pow(10,Math.abs(s)):1;const o=Math.pow(10,s),A=i>s?Math.pow(10,i):0,l=Math.round((t-A)*a)/a,c=Math.floor((t-A)/o/10)*o*10;let u=Math.floor((l-c)/Math.pow(10,s)),h=ua(r.min,Math.round((A+c+u*Math.pow(10,s))*a)/a);for(;h<e;)n.push({value:h,major:CB(h),significand:u}),u>=10?u=u<15?15:20:u++,u>=20&&(s++,u=2,a=s>=0?1:a),h=Math.round((A+c+u*Math.pow(10,s))*a)/a;const d=ua(r.max,h);return n.push({value:d,major:CB(d),significand:u}),n}class Ww extends mu{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){const n=n0.prototype.parse.apply(this,[t,e]);if(n===0){this._zero=!0;return}return Nn(n)&&n>0?n:null}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=Nn(t)?Math.max(0,t):null,this.max=Nn(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Nn(this._userMin)&&(this.min=t===Sc(this.min,0)?Sc(this.min,-1):Sc(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let n=this.min,i=this.max;const s=o=>n=t?n:o,a=o=>i=e?i:o;n===i&&(n<=0?(s(1),a(10)):(s(Sc(n,-1)),a(Sc(i,1)))),n<=0&&s(Sc(i,-1)),i<=0&&a(Sc(n,1)),this.min=n,this.max=i}buildTicks(){const t=this.options,e={min:this._userMin,max:this._userMax},n=eQ(e,this);return t.bounds==="ticks"&&Bk(n,this,"value"),t.reverse?(n.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),n}getLabelForValue(t){return t===void 0?"0":ng(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=xl(t),this._valueRange=xl(this.max)-xl(t)}getPixelForValue(t){return(t===void 0||t===0)&&(t=this.min),t===null||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(xl(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}}It(Ww,"id","logarithmic"),It(Ww,"defaults",{ticks:{callback:z0.formatters.logarithmic,major:{enabled:!0}}});function Yw(r){const t=r.ticks;if(t.display&&r.display){const e=Wi(t.backdropPadding);return Oe(t.font&&t.font.size,mn.font.size)+e.height}return 0}function rQ(r,t,e){return e=hn(e)?e:[e],{w:lD(r,t.string,e),h:e.length*t.lineHeight}}function SB(r,t,e,n,i){return r===n||r===i?{start:t-e/2,end:t+e/2}:r<n||r>i?{start:t-e,end:t}:{start:t,end:t+e}}function nQ(r){const t={l:r.left+r._padding.left,r:r.right-r._padding.right,t:r.top+r._padding.top,b:r.bottom-r._padding.bottom},e=Object.assign({},t),n=[],i=[],s=r._pointLabels.length,a=r.options.pointLabels,o=a.centerPointLabels?Fr/s:0;for(let A=0;A<s;A++){const l=a.setContext(r.getPointLabelContext(A));i[A]=l.padding;const c=r.getPointPosition(A,r.drawingArea+i[A],o),u=ai(l.font),h=rQ(r.ctx,u,r._pointLabels[A]);n[A]=h;const d=As(r.getIndexAngle(A)+o),m=Math.round(Pv(d)),f=SB(m,c.x,h.w,0,180),b=SB(m,c.y,h.h,90,270);iQ(e,t,d,f,b)}r.setCenterPoint(t.l-e.l,e.r-t.r,t.t-e.t,e.b-t.b),r._pointLabelItems=oQ(r,n,i)}function iQ(r,t,e,n,i){const s=Math.abs(Math.sin(e)),a=Math.abs(Math.cos(e));let o=0,A=0;n.start<t.l?(o=(t.l-n.start)/s,r.l=Math.min(r.l,t.l-o)):n.end>t.r&&(o=(n.end-t.r)/s,r.r=Math.max(r.r,t.r+o)),i.start<t.t?(A=(t.t-i.start)/a,r.t=Math.min(r.t,t.t-A)):i.end>t.b&&(A=(i.end-t.b)/a,r.b=Math.max(r.b,t.b+A))}function sQ(r,t,e){const n=r.drawingArea,{extra:i,additionalAngle:s,padding:a,size:o}=e,A=r.getPointPosition(t,n+i+a,s),l=Math.round(Pv(As(A.angle+Xn))),c=cQ(A.y,o.h,l),u=AQ(l),h=lQ(A.x,o.w,u);return{visible:!0,x:A.x,y:c,textAlign:u,left:h,top:c,right:h+o.w,bottom:c+o.h}}function aQ(r,t){if(!t)return!0;const{left:e,top:n,right:i,bottom:s}=r;return!(ko({x:e,y:n},t)||ko({x:e,y:s},t)||ko({x:i,y:n},t)||ko({x:i,y:s},t))}function oQ(r,t,e){const n=[],i=r._pointLabels.length,s=r.options,{centerPointLabels:a,display:o}=s.pointLabels,A={extra:Yw(s)/2,additionalAngle:a?Fr/i:0};let l;for(let c=0;c<i;c++){A.padding=e[c],A.size=t[c];const u=sQ(r,c,A);n.push(u),o==="auto"&&(u.visible=aQ(u,l),u.visible&&(l=u))}return n}function AQ(r){return r===0||r===180?"center":r<180?"left":"right"}function lQ(r,t,e){return e==="right"?r-=t:e==="center"&&(r-=t/2),r}function cQ(r,t,e){return e===90||e===270?r-=t/2:(e>270||e<90)&&(r-=t),r}function uQ(r,t,e){const{left:n,top:i,right:s,bottom:a}=e,{backdropColor:o}=t;if(!er(o)){const A=zc(t.borderRadius),l=Wi(t.backdropPadding);r.fillStyle=o;const c=n-l.left,u=i-l.top,h=s-n+l.width,d=a-i+l.height;Object.values(A).some(m=>m!==0)?(r.beginPath(),Tf(r,{x:c,y:u,w:h,h:d,radius:A}),r.fill()):r.fillRect(c,u,h,d)}}function dQ(r,t){const{ctx:e,options:{pointLabels:n}}=r;for(let i=t-1;i>=0;i--){const s=r._pointLabelItems[i];if(!s.visible)continue;const a=n.setContext(r.getPointLabelContext(i));uQ(e,a,s);const o=ai(a.font),{x:A,y:l,textAlign:c}=s;nu(e,r._pointLabels[i],A,l+o.lineHeight/2,o,{color:a.color,textAlign:c,textBaseline:"middle"})}}function pI(r,t,e,n){const{ctx:i}=r;if(e)i.arc(r.xCenter,r.yCenter,t,0,pn);else{let s=r.getPointPosition(0,t);i.moveTo(s.x,s.y);for(let a=1;a<n;a++)s=r.getPointPosition(a,t),i.lineTo(s.x,s.y)}}function hQ(r,t,e,n,i){const s=r.ctx,a=t.circular,{color:o,lineWidth:A}=t;!a&&!n||!o||!A||e<0||(s.save(),s.strokeStyle=o,s.lineWidth=A,s.setLineDash(i.dash||[]),s.lineDashOffset=i.dashOffset,s.beginPath(),pI(r,e,a,n),s.closePath(),s.stroke(),s.restore())}function fQ(r,t,e){return ic(r,{label:e,index:t,type:"pointLabel"})}class Mh extends n0{constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=Wi(Yw(this.options)/2),e=this.width=this.maxWidth-t.width,n=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+n/2+t.top),this.drawingArea=Math.floor(Math.min(e,n)/2)}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!1);this.min=Nn(t)&&!isNaN(t)?t:0,this.max=Nn(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Yw(this.options))}generateTickLabels(t){n0.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((e,n)=>{const i=Re(this.options.pointLabels.callback,[e,n],this);return i||i===0?i:""}).filter((e,n)=>this.chart.getDataVisibility(n))}fit(){const t=this.options;t.display&&t.pointLabels.display?nQ(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,n,i){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((n-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,n,i))}getIndexAngle(t){const e=pn/(this._pointLabels.length||1),n=this.options.startAngle||0;return As(t*e+za(n))}getDistanceFromCenterForValue(t){if(er(t))return NaN;const e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(er(t))return NaN;const e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){const e=this._pointLabels||[];if(t>=0&&t<e.length){const n=e[t];return fQ(this.getContext(),t,n)}}getPointPosition(t,e,n=0){const i=this.getIndexAngle(t)-Xn+n;return{x:Math.cos(i)*e+this.xCenter,y:Math.sin(i)*e+this.yCenter,angle:i}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:e,top:n,right:i,bottom:s}=this._pointLabelItems[t];return{left:e,top:n,right:i,bottom:s}}drawBackground(){const{backgroundColor:t,grid:{circular:e}}=this.options;if(t){const n=this.ctx;n.save(),n.beginPath(),pI(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),n.closePath(),n.fillStyle=t,n.fill(),n.restore()}}drawGrid(){const t=this.ctx,e=this.options,{angleLines:n,grid:i,border:s}=e,a=this._pointLabels.length;let o,A,l;if(e.pointLabels.display&&dQ(this,a),i.display&&this.ticks.forEach((c,u)=>{if(u!==0||u===0&&this.min<0){A=this.getDistanceFromCenterForValue(c.value);const h=this.getContext(u),d=i.setContext(h),m=s.setContext(h);hQ(this,d,A,a,m)}}),n.display){for(t.save(),o=a-1;o>=0;o--){const c=n.setContext(this.getPointLabelContext(o)),{color:u,lineWidth:h}=c;!h||!u||(t.lineWidth=h,t.strokeStyle=u,t.setLineDash(c.borderDash),t.lineDashOffset=c.borderDashOffset,A=this.getDistanceFromCenterForValue(e.reverse?this.min:this.max),l=this.getPointPosition(o,A),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(l.x,l.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,e=this.options,n=e.ticks;if(!n.display)return;const i=this.getIndexAngle(0);let s,a;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(i),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((o,A)=>{if(A===0&&this.min>=0&&!e.reverse)return;const l=n.setContext(this.getContext(A)),c=ai(l.font);if(s=this.getDistanceFromCenterForValue(this.ticks[A].value),l.showLabelBackdrop){t.font=c.string,a=t.measureText(o.label).width,t.fillStyle=l.backdropColor;const u=Wi(l.backdropPadding);t.fillRect(-a/2-u.left,-s-c.size/2-u.top,a+u.width,c.size+u.height)}nu(t,o.label,0,-s,c,{color:l.color,strokeColor:l.textStrokeColor,strokeWidth:l.textStrokeWidth})}),t.restore()}drawTitle(){}}It(Mh,"id","radialLinear"),It(Mh,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:z0.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(t){return t},padding:5,centerPointLabels:!1}}),It(Mh,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),It(Mh,"descriptors",{angleLines:{_fallback:"grid"}});const Z0={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Ks=Object.keys(Z0);function kB(r,t){return r-t}function IB(r,t){if(er(t))return null;const e=r._adapter,{parser:n,round:i,isoWeekday:s}=r._parseOpts;let a=t;return typeof n=="function"&&(a=n(a)),Nn(a)||(a=typeof n=="string"?e.parse(a,n):e.parse(a)),a===null?null:(i&&(a=i==="week"&&(_d(s)||s===!0)?e.startOf(a,"isoWeek",s):e.startOf(a,i)),+a)}function TB(r,t,e,n){const i=Ks.length;for(let s=Ks.indexOf(r);s<i-1;++s){const a=Z0[Ks[s]],o=a.steps?a.steps:Number.MAX_SAFE_INTEGER;if(a.common&&Math.ceil((e-t)/(o*a.size))<=n)return Ks[s]}return Ks[i-1]}function gQ(r,t,e,n,i){for(let s=Ks.length-1;s>=Ks.indexOf(e);s--){const a=Ks[s];if(Z0[a].common&&r._adapter.diff(i,n,a)>=t-1)return a}return Ks[e?Ks.indexOf(e):0]}function pQ(r){for(let t=Ks.indexOf(r)+1,e=Ks.length;t<e;++t)if(Z0[Ks[t]].common)return Ks[t]}function FB(r,t,e){if(!e)r[t]=!0;else if(e.length){const{lo:n,hi:i}=Nv(e,t),s=e[n]>=t?e[n]:e[i];r[s]=!0}}function mQ(r,t,e,n){const i=r._adapter,s=+i.startOf(t[0].value,n),a=t[t.length-1].value;let o,A;for(o=s;o<=a;o=+i.add(o,1,n))A=e[o],A>=0&&(t[A].major=!0);return t}function LB(r,t,e){const n=[],i={},s=t.length;let a,o;for(a=0;a<s;++a)o=t[a],i[o]=a,n.push({value:o,major:!1});return s===0||!e?n:mQ(r,n,i,e)}class Uf extends mu{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e={}){const n=t.time||(t.time={}),i=this._adapter=new Yk._date(t.adapters.date);i.init(e),Jh(n.displayFormats,i.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return t===void 0?null:IB(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,n=t.time.unit||"day";let{min:i,max:s,minDefined:a,maxDefined:o}=this.getUserBounds();function A(l){!a&&!isNaN(l.min)&&(i=Math.min(i,l.min)),!o&&!isNaN(l.max)&&(s=Math.max(s,l.max))}(!a||!o)&&(A(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&A(this.getMinMax(!1))),i=Nn(i)&&!isNaN(i)?i:+e.startOf(Date.now(),n),s=Nn(s)&&!isNaN(s)?s:+e.endOf(Date.now(),n)+1,this.min=Math.min(i,s-1),this.max=Math.max(i+1,s)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],n=t[t.length-1]),{min:e,max:n}}buildTicks(){const t=this.options,e=t.time,n=t.ticks,i=n.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const s=this.min,a=this.max,o=YN(i,s,a);return this._unit=e.unit||(n.autoSkip?TB(e.minUnit,this.min,this.max,this._getLabelCapacity(s)):gQ(this,o.length,e.minUnit,this.min,this.max)),this._majorUnit=!n.major.enabled||this._unit==="year"?void 0:pQ(this._unit),this.initOffsets(i),t.reverse&&o.reverse(),LB(this,o,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let e=0,n=0,i,s;this.options.offset&&t.length&&(i=this.getDecimalForValue(t[0]),t.length===1?e=1-i:e=(this.getDecimalForValue(t[1])-i)/2,s=this.getDecimalForValue(t[t.length-1]),t.length===1?n=s:n=(s-this.getDecimalForValue(t[t.length-2]))/2);const a=t.length<3?.5:.25;e=Ui(e,0,a),n=Ui(n,0,a),this._offsets={start:e,end:n,factor:1/(e+1+n)}}_generate(){const t=this._adapter,e=this.min,n=this.max,i=this.options,s=i.time,a=s.unit||TB(s.minUnit,e,n,this._getLabelCapacity(e)),o=Oe(i.ticks.stepSize,1),A=a==="week"?s.isoWeekday:!1,l=_d(A)||A===!0,c={};let u=e,h,d;if(l&&(u=+t.startOf(u,"isoWeek",A)),u=+t.startOf(u,l?"day":a),t.diff(n,e,a)>1e5*o)throw new Error(e+" and "+n+" are too far apart with stepSize of "+o+" "+a);const m=i.ticks.source==="data"&&this.getDataTimestamps();for(h=u,d=0;h<n;h=+t.add(h,o,a),d++)FB(c,h,m);return(h===n||i.bounds==="ticks"||d===1)&&FB(c,h,m),Object.keys(c).sort(kB).map(f=>+f)}getLabelForValue(t){const e=this._adapter,n=this.options.time;return n.tooltipFormat?e.format(t,n.tooltipFormat):e.format(t,n.displayFormats.datetime)}format(t,e){const i=this.options.time.displayFormats,s=this._unit,a=e||i[s];return this._adapter.format(t,a)}_tickFormatFunction(t,e,n,i){const s=this.options,a=s.ticks.callback;if(a)return Re(a,[t,e,n],this);const o=s.time.displayFormats,A=this._unit,l=this._majorUnit,c=A&&o[A],u=l&&o[l],h=n[e],d=l&&u&&h&&h.major;return this._adapter.format(t,i||(d?u:c))}generateTickLabels(t){let e,n,i;for(e=0,n=t.length;e<n;++e)i=t[e],i.label=this._tickFormatFunction(i.value,e,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,n=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+n)*e.factor)}getValueForPixel(t){const e=this._offsets,n=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+n*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,n=this.ctx.measureText(t).width,i=za(this.isHorizontal()?e.maxRotation:e.minRotation),s=Math.cos(i),a=Math.sin(i),o=this._resolveTickFontOptions(0).size;return{w:n*s+o*a,h:n*a+o*s}}_getLabelCapacity(t){const e=this.options.time,n=e.displayFormats,i=n[e.unit]||n.millisecond,s=this._tickFormatFunction(t,0,LB(this,[t],this._majorUnit),i),a=this._getLabelSize(s),o=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return o>0?o:1}getDataTimestamps(){let t=this._cache.data||[],e,n;if(t.length)return t;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(e=0,n=i.length;e<n;++e)t=t.concat(i[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let e,n;if(t.length)return t;const i=this.getLabels();for(e=0,n=i.length;e<n;++e)t.push(IB(this,i[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return Sk(t.sort(kB))}}It(Uf,"id","time"),It(Uf,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function fp(r,t,e){let n=0,i=r.length-1,s,a,o,A;e?(t>=r[n].pos&&t<=r[i].pos&&({lo:n,hi:i}=yA(r,"pos",t)),{pos:s,time:o}=r[n],{pos:a,time:A}=r[i]):(t>=r[n].time&&t<=r[i].time&&({lo:n,hi:i}=yA(r,"time",t)),{time:s,pos:o}=r[n],{time:a,pos:A}=r[i]);const l=a-s;return l?o+(A-o)*(t-s)/l:o}class Xw extends Uf{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=fp(e,this.min),this._tableRange=fp(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:n}=this,i=[],s=[];let a,o,A,l,c;for(a=0,o=t.length;a<o;++a)l=t[a],l>=e&&l<=n&&i.push(l);if(i.length<2)return[{time:e,pos:0},{time:n,pos:1}];for(a=0,o=i.length;a<o;++a)c=i[a+1],A=i[a-1],l=i[a],Math.round((c+A)/2)!==l&&s.push({time:l,pos:a/(o-1)});return s}_generate(){const t=this.min,e=this.max;let n=super.getDataTimestamps();return(!n.includes(t)||!n.length)&&n.splice(0,0,t),(!n.includes(e)||n.length===1)&&n.push(e),n.sort((i,s)=>i-s)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),n=this.getLabelTimestamps();return e.length&&n.length?t=this.normalize(e.concat(n)):t=e.length?e:n,t=this._cache.all=t,t}getDecimalForValue(t){return(fp(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,n=this.getDecimalForPixel(t)/e.factor-e.end;return fp(this._table,n*this._tableRange+this._minPos,!0)}}It(Xw,"id","timeseries"),It(Xw,"defaults",Uf.defaults);var bQ=Object.freeze({__proto__:null,CategoryScale:zw,LinearScale:qw,LogarithmicScale:Ww,RadialLinearScale:Mh,TimeScale:Uf,TimeSeriesScale:Xw});const mI=[CM,tR,WR,bQ],bI=6048e5,yQ=864e5,ig=6e4,sg=36e5,wQ=1e3,UB=Symbol.for("constructDateFrom");function Mn(r,t){return typeof r=="function"?r(t):r&&typeof r=="object"&&UB in r?r[UB](t):r instanceof Date?new r.constructor(t):new Date(t)}function Xe(r,t){return Mn(t||r,r)}function tb(r,t,e){const n=Xe(r,e==null?void 0:e.in);return isNaN(t)?Mn((e==null?void 0:e.in)||r,NaN):(t&&n.setDate(n.getDate()+t),n)}function Kv(r,t,e){const n=Xe(r,e==null?void 0:e.in);if(isNaN(t))return Mn(r,NaN);if(!t)return n;const i=n.getDate(),s=Mn(r,n.getTime());s.setMonth(n.getMonth()+t+1,0);const a=s.getDate();return i>=a?s:(n.setFullYear(s.getFullYear(),s.getMonth(),i),n)}function zv(r,t,e){return Mn(r,+Xe(r)+t)}function vQ(r,t,e){return zv(r,t*sg)}let xQ={};function bu(){return xQ}function Ho(r,t){var o,A,l,c;const e=bu(),n=(t==null?void 0:t.weekStartsOn)??((A=(o=t==null?void 0:t.locale)==null?void 0:o.options)==null?void 0:A.weekStartsOn)??e.weekStartsOn??((c=(l=e.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??0,i=Xe(r,t==null?void 0:t.in),s=i.getDay(),a=(s<n?7:0)+s-n;return i.setDate(i.getDate()-a),i.setHours(0,0,0,0),i}function Ed(r,t){return Ho(r,{...t,weekStartsOn:1})}function yI(r,t){const e=Xe(r,t==null?void 0:t.in),n=e.getFullYear(),i=Mn(e,0);i.setFullYear(n+1,0,4),i.setHours(0,0,0,0);const s=Ed(i),a=Mn(e,0);a.setFullYear(n,0,4),a.setHours(0,0,0,0);const o=Ed(a);return e.getTime()>=s.getTime()?n+1:e.getTime()>=o.getTime()?n:n-1}function i0(r){const t=Xe(r),e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),+r-+e}function yu(r,...t){const e=Mn.bind(null,t.find(n=>typeof n=="object"));return t.map(e)}function Jw(r,t){const e=Xe(r,t==null?void 0:t.in);return e.setHours(0,0,0,0),e}function wI(r,t,e){const[n,i]=yu(e==null?void 0:e.in,r,t),s=Jw(n),a=Jw(i),o=+s-i0(s),A=+a-i0(a);return Math.round((o-A)/yQ)}function _Q(r,t){const e=yI(r,t),n=Mn(r,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),Ed(n)}function BQ(r,t,e){const n=Xe(r,e==null?void 0:e.in);return n.setTime(n.getTime()+t*ig),n}function CQ(r,t,e){return Kv(r,t*3,e)}function EQ(r,t,e){return zv(r,t*1e3)}function SQ(r,t,e){return tb(r,t*7,e)}function kQ(r,t,e){return Kv(r,t*12,e)}function sf(r,t){const e=+Xe(r)-+Xe(t);return e<0?-1:e>0?1:e}function IQ(r){return r instanceof Date||typeof r=="object"&&Object.prototype.toString.call(r)==="[object Date]"}function vI(r){return!(!IQ(r)&&typeof r!="number"||isNaN(+Xe(r)))}function TQ(r,t,e){const[n,i]=yu(e==null?void 0:e.in,r,t),s=n.getFullYear()-i.getFullYear(),a=n.getMonth()-i.getMonth();return s*12+a}function FQ(r,t,e){const[n,i]=yu(e==null?void 0:e.in,r,t);return n.getFullYear()-i.getFullYear()}function xI(r,t,e){const[n,i]=yu(e==null?void 0:e.in,r,t),s=PB(n,i),a=Math.abs(wI(n,i));n.setDate(n.getDate()-s*a);const o=+(PB(n,i)===-s),A=s*(a-o);return A===0?0:A}function PB(r,t){const e=r.getFullYear()-t.getFullYear()||r.getMonth()-t.getMonth()||r.getDate()-t.getDate()||r.getHours()-t.getHours()||r.getMinutes()-t.getMinutes()||r.getSeconds()-t.getSeconds()||r.getMilliseconds()-t.getMilliseconds();return e<0?-1:e>0?1:e}function ag(r){return t=>{const n=(r?Math[r]:Math.trunc)(t);return n===0?0:n}}function LQ(r,t,e){const[n,i]=yu(e==null?void 0:e.in,r,t),s=(+n-+i)/sg;return ag(e==null?void 0:e.roundingMethod)(s)}function qv(r,t){return+Xe(r)-+Xe(t)}function UQ(r,t,e){const n=qv(r,t)/ig;return ag(e==null?void 0:e.roundingMethod)(n)}function _I(r,t){const e=Xe(r,t==null?void 0:t.in);return e.setHours(23,59,59,999),e}function BI(r,t){const e=Xe(r,t==null?void 0:t.in),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function PQ(r,t){const e=Xe(r,t==null?void 0:t.in);return+_I(e,t)==+BI(e,t)}function CI(r,t,e){const[n,i,s]=yu(e==null?void 0:e.in,r,r,t),a=sf(i,s),o=Math.abs(TQ(i,s));if(o<1)return 0;i.getMonth()===1&&i.getDate()>27&&i.setDate(30),i.setMonth(i.getMonth()-a*o);let A=sf(i,s)===-a;PQ(n)&&o===1&&sf(n,s)===1&&(A=!1);const l=a*(o-+A);return l===0?0:l}function NQ(r,t,e){const n=CI(r,t,e)/3;return ag(e==null?void 0:e.roundingMethod)(n)}function DQ(r,t,e){const n=qv(r,t)/1e3;return ag(e==null?void 0:e.roundingMethod)(n)}function MQ(r,t,e){const n=xI(r,t,e)/7;return ag(e==null?void 0:e.roundingMethod)(n)}function RQ(r,t,e){const[n,i]=yu(e==null?void 0:e.in,r,t),s=sf(n,i),a=Math.abs(FQ(n,i));n.setFullYear(1584),i.setFullYear(1584);const o=sf(n,i)===-s,A=s*(a-+o);return A===0?0:A}function QQ(r,t){const e=Xe(r,t==null?void 0:t.in),n=e.getMonth(),i=n-n%3;return e.setMonth(i,1),e.setHours(0,0,0,0),e}function OQ(r,t){const e=Xe(r,t==null?void 0:t.in);return e.setDate(1),e.setHours(0,0,0,0),e}function HQ(r,t){const e=Xe(r,t==null?void 0:t.in),n=e.getFullYear();return e.setFullYear(n+1,0,0),e.setHours(23,59,59,999),e}function EI(r,t){const e=Xe(r,t==null?void 0:t.in);return e.setFullYear(e.getFullYear(),0,1),e.setHours(0,0,0,0),e}function VQ(r,t){const e=Xe(r,t==null?void 0:t.in);return e.setMinutes(59,59,999),e}function $Q(r,t){var o,A;const e=bu(),n=e.weekStartsOn??((A=(o=e.locale)==null?void 0:o.options)==null?void 0:A.weekStartsOn)??0,i=Xe(r,t==null?void 0:t.in),s=i.getDay(),a=(s<n?-7:0)+6-(s-n);return i.setDate(i.getDate()+a),i.setHours(23,59,59,999),i}function jQ(r,t){const e=Xe(r,t==null?void 0:t.in);return e.setSeconds(59,999),e}function GQ(r,t){const e=Xe(r,t==null?void 0:t.in),n=e.getMonth(),i=n-n%3+3;return e.setMonth(i,0),e.setHours(23,59,59,999),e}function KQ(r,t){const e=Xe(r,t==null?void 0:t.in);return e.setMilliseconds(999),e}const zQ={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},qQ=(r,t,e)=>{let n;const i=zQ[r];return typeof i=="string"?n=i:t===1?n=i.one:n=i.other.replace("{{count}}",t.toString()),e!=null&&e.addSuffix?e.comparison&&e.comparison>0?"in "+n:n+" ago":n};function vy(r){return(t={})=>{const e=t.width?String(t.width):r.defaultWidth;return r.formats[e]||r.formats[r.defaultWidth]}}const WQ={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},YQ={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},XQ={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},JQ={date:vy({formats:WQ,defaultWidth:"full"}),time:vy({formats:YQ,defaultWidth:"full"}),dateTime:vy({formats:XQ,defaultWidth:"full"})},ZQ={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},tO=(r,t,e,n)=>ZQ[r];function xh(r){return(t,e)=>{const n=e!=null&&e.context?String(e.context):"standalone";let i;if(n==="formatting"&&r.formattingValues){const a=r.defaultFormattingWidth||r.defaultWidth,o=e!=null&&e.width?String(e.width):a;i=r.formattingValues[o]||r.formattingValues[a]}else{const a=r.defaultWidth,o=e!=null&&e.width?String(e.width):r.defaultWidth;i=r.values[o]||r.values[a]}const s=r.argumentCallback?r.argumentCallback(t):t;return i[s]}}const eO={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},rO={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},nO={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},iO={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},sO={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},aO={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},oO=(r,t)=>{const e=Number(r),n=e%100;if(n>20||n<10)switch(n%10){case 1:return e+"st";case 2:return e+"nd";case 3:return e+"rd"}return e+"th"},AO={ordinalNumber:oO,era:xh({values:eO,defaultWidth:"wide"}),quarter:xh({values:rO,defaultWidth:"wide",argumentCallback:r=>r-1}),month:xh({values:nO,defaultWidth:"wide"}),day:xh({values:iO,defaultWidth:"wide"}),dayPeriod:xh({values:sO,defaultWidth:"wide",formattingValues:aO,defaultFormattingWidth:"wide"})};function _h(r){return(t,e={})=>{const n=e.width,i=n&&r.matchPatterns[n]||r.matchPatterns[r.defaultMatchWidth],s=t.match(i);if(!s)return null;const a=s[0],o=n&&r.parsePatterns[n]||r.parsePatterns[r.defaultParseWidth],A=Array.isArray(o)?cO(o,u=>u.test(a)):lO(o,u=>u.test(a));let l;l=r.valueCallback?r.valueCallback(A):A,l=e.valueCallback?e.valueCallback(l):l;const c=t.slice(a.length);return{value:l,rest:c}}}function lO(r,t){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e)&&t(r[e]))return e}function cO(r,t){for(let e=0;e<r.length;e++)if(t(r[e]))return e}function uO(r){return(t,e={})=>{const n=t.match(r.matchPattern);if(!n)return null;const i=n[0],s=t.match(r.parsePattern);if(!s)return null;let a=r.valueCallback?r.valueCallback(s[0]):s[0];a=e.valueCallback?e.valueCallback(a):a;const o=t.slice(i.length);return{value:a,rest:o}}}const dO=/^(\d+)(th|st|nd|rd)?/i,hO=/\d+/i,fO={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},gO={any:[/^b/i,/^(a|c)/i]},pO={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},mO={any:[/1/i,/2/i,/3/i,/4/i]},bO={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},yO={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},wO={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},vO={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},xO={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},_O={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},BO={ordinalNumber:uO({matchPattern:dO,parsePattern:hO,valueCallback:r=>parseInt(r,10)}),era:_h({matchPatterns:fO,defaultMatchWidth:"wide",parsePatterns:gO,defaultParseWidth:"any"}),quarter:_h({matchPatterns:pO,defaultMatchWidth:"wide",parsePatterns:mO,defaultParseWidth:"any",valueCallback:r=>r+1}),month:_h({matchPatterns:bO,defaultMatchWidth:"wide",parsePatterns:yO,defaultParseWidth:"any"}),day:_h({matchPatterns:wO,defaultMatchWidth:"wide",parsePatterns:vO,defaultParseWidth:"any"}),dayPeriod:_h({matchPatterns:xO,defaultMatchWidth:"any",parsePatterns:_O,defaultParseWidth:"any"})},SI={code:"en-US",formatDistance:qQ,formatLong:JQ,formatRelative:tO,localize:AO,match:BO,options:{weekStartsOn:0,firstWeekContainsDate:1}};function CO(r,t){const e=Xe(r,t==null?void 0:t.in);return wI(e,EI(e))+1}function kI(r,t){const e=Xe(r,t==null?void 0:t.in),n=+Ed(e)-+_Q(e);return Math.round(n/bI)+1}function Wv(r,t){var c,u,h,d;const e=Xe(r,t==null?void 0:t.in),n=e.getFullYear(),i=bu(),s=(t==null?void 0:t.firstWeekContainsDate)??((u=(c=t==null?void 0:t.locale)==null?void 0:c.options)==null?void 0:u.firstWeekContainsDate)??i.firstWeekContainsDate??((d=(h=i.locale)==null?void 0:h.options)==null?void 0:d.firstWeekContainsDate)??1,a=Mn((t==null?void 0:t.in)||r,0);a.setFullYear(n+1,0,s),a.setHours(0,0,0,0);const o=Ho(a,t),A=Mn((t==null?void 0:t.in)||r,0);A.setFullYear(n,0,s),A.setHours(0,0,0,0);const l=Ho(A,t);return+e>=+o?n+1:+e>=+l?n:n-1}function EO(r,t){var o,A,l,c;const e=bu(),n=(t==null?void 0:t.firstWeekContainsDate)??((A=(o=t==null?void 0:t.locale)==null?void 0:o.options)==null?void 0:A.firstWeekContainsDate)??e.firstWeekContainsDate??((c=(l=e.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??1,i=Wv(r,t),s=Mn((t==null?void 0:t.in)||r,0);return s.setFullYear(i,0,n),s.setHours(0,0,0,0),Ho(s,t)}function II(r,t){const e=Xe(r,t==null?void 0:t.in),n=+Ho(e,t)-+EO(e,t);return Math.round(n/bI)+1}function Hr(r,t){const e=r<0?"-":"",n=Math.abs(r).toString().padStart(t,"0");return e+n}const Al={y(r,t){const e=r.getFullYear(),n=e>0?e:1-e;return Hr(t==="yy"?n%100:n,t.length)},M(r,t){const e=r.getMonth();return t==="M"?String(e+1):Hr(e+1,2)},d(r,t){return Hr(r.getDate(),t.length)},a(r,t){const e=r.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return e.toUpperCase();case"aaa":return e;case"aaaaa":return e[0];case"aaaa":default:return e==="am"?"a.m.":"p.m."}},h(r,t){return Hr(r.getHours()%12||12,t.length)},H(r,t){return Hr(r.getHours(),t.length)},m(r,t){return Hr(r.getMinutes(),t.length)},s(r,t){return Hr(r.getSeconds(),t.length)},S(r,t){const e=t.length,n=r.getMilliseconds(),i=Math.trunc(n*Math.pow(10,e-3));return Hr(i,t.length)}},Du={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},NB={G:function(r,t,e){const n=r.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return e.era(n,{width:"abbreviated"});case"GGGGG":return e.era(n,{width:"narrow"});case"GGGG":default:return e.era(n,{width:"wide"})}},y:function(r,t,e){if(t==="yo"){const n=r.getFullYear(),i=n>0?n:1-n;return e.ordinalNumber(i,{unit:"year"})}return Al.y(r,t)},Y:function(r,t,e,n){const i=Wv(r,n),s=i>0?i:1-i;if(t==="YY"){const a=s%100;return Hr(a,2)}return t==="Yo"?e.ordinalNumber(s,{unit:"year"}):Hr(s,t.length)},R:function(r,t){const e=yI(r);return Hr(e,t.length)},u:function(r,t){const e=r.getFullYear();return Hr(e,t.length)},Q:function(r,t,e){const n=Math.ceil((r.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return Hr(n,2);case"Qo":return e.ordinalNumber(n,{unit:"quarter"});case"QQQ":return e.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return e.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return e.quarter(n,{width:"wide",context:"formatting"})}},q:function(r,t,e){const n=Math.ceil((r.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return Hr(n,2);case"qo":return e.ordinalNumber(n,{unit:"quarter"});case"qqq":return e.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return e.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return e.quarter(n,{width:"wide",context:"standalone"})}},M:function(r,t,e){const n=r.getMonth();switch(t){case"M":case"MM":return Al.M(r,t);case"Mo":return e.ordinalNumber(n+1,{unit:"month"});case"MMM":return e.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return e.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return e.month(n,{width:"wide",context:"formatting"})}},L:function(r,t,e){const n=r.getMonth();switch(t){case"L":return String(n+1);case"LL":return Hr(n+1,2);case"Lo":return e.ordinalNumber(n+1,{unit:"month"});case"LLL":return e.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return e.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return e.month(n,{width:"wide",context:"standalone"})}},w:function(r,t,e,n){const i=II(r,n);return t==="wo"?e.ordinalNumber(i,{unit:"week"}):Hr(i,t.length)},I:function(r,t,e){const n=kI(r);return t==="Io"?e.ordinalNumber(n,{unit:"week"}):Hr(n,t.length)},d:function(r,t,e){return t==="do"?e.ordinalNumber(r.getDate(),{unit:"date"}):Al.d(r,t)},D:function(r,t,e){const n=CO(r);return t==="Do"?e.ordinalNumber(n,{unit:"dayOfYear"}):Hr(n,t.length)},E:function(r,t,e){const n=r.getDay();switch(t){case"E":case"EE":case"EEE":return e.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return e.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return e.day(n,{width:"short",context:"formatting"});case"EEEE":default:return e.day(n,{width:"wide",context:"formatting"})}},e:function(r,t,e,n){const i=r.getDay(),s=(i-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(s);case"ee":return Hr(s,2);case"eo":return e.ordinalNumber(s,{unit:"day"});case"eee":return e.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return e.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return e.day(i,{width:"short",context:"formatting"});case"eeee":default:return e.day(i,{width:"wide",context:"formatting"})}},c:function(r,t,e,n){const i=r.getDay(),s=(i-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(s);case"cc":return Hr(s,t.length);case"co":return e.ordinalNumber(s,{unit:"day"});case"ccc":return e.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return e.day(i,{width:"narrow",context:"standalone"});case"cccccc":return e.day(i,{width:"short",context:"standalone"});case"cccc":default:return e.day(i,{width:"wide",context:"standalone"})}},i:function(r,t,e){const n=r.getDay(),i=n===0?7:n;switch(t){case"i":return String(i);case"ii":return Hr(i,t.length);case"io":return e.ordinalNumber(i,{unit:"day"});case"iii":return e.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return e.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return e.day(n,{width:"short",context:"formatting"});case"iiii":default:return e.day(n,{width:"wide",context:"formatting"})}},a:function(r,t,e){const i=r.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return e.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return e.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return e.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return e.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(r,t,e){const n=r.getHours();let i;switch(n===12?i=Du.noon:n===0?i=Du.midnight:i=n/12>=1?"pm":"am",t){case"b":case"bb":return e.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return e.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return e.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return e.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(r,t,e){const n=r.getHours();let i;switch(n>=17?i=Du.evening:n>=12?i=Du.afternoon:n>=4?i=Du.morning:i=Du.night,t){case"B":case"BB":case"BBB":return e.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return e.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return e.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(r,t,e){if(t==="ho"){let n=r.getHours()%12;return n===0&&(n=12),e.ordinalNumber(n,{unit:"hour"})}return Al.h(r,t)},H:function(r,t,e){return t==="Ho"?e.ordinalNumber(r.getHours(),{unit:"hour"}):Al.H(r,t)},K:function(r,t,e){const n=r.getHours()%12;return t==="Ko"?e.ordinalNumber(n,{unit:"hour"}):Hr(n,t.length)},k:function(r,t,e){let n=r.getHours();return n===0&&(n=24),t==="ko"?e.ordinalNumber(n,{unit:"hour"}):Hr(n,t.length)},m:function(r,t,e){return t==="mo"?e.ordinalNumber(r.getMinutes(),{unit:"minute"}):Al.m(r,t)},s:function(r,t,e){return t==="so"?e.ordinalNumber(r.getSeconds(),{unit:"second"}):Al.s(r,t)},S:function(r,t){return Al.S(r,t)},X:function(r,t,e){const n=r.getTimezoneOffset();if(n===0)return"Z";switch(t){case"X":return MB(n);case"XXXX":case"XX":return Tc(n);case"XXXXX":case"XXX":default:return Tc(n,":")}},x:function(r,t,e){const n=r.getTimezoneOffset();switch(t){case"x":return MB(n);case"xxxx":case"xx":return Tc(n);case"xxxxx":case"xxx":default:return Tc(n,":")}},O:function(r,t,e){const n=r.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+DB(n,":");case"OOOO":default:return"GMT"+Tc(n,":")}},z:function(r,t,e){const n=r.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+DB(n,":");case"zzzz":default:return"GMT"+Tc(n,":")}},t:function(r,t,e){const n=Math.trunc(+r/1e3);return Hr(n,t.length)},T:function(r,t,e){return Hr(+r,t.length)}};function DB(r,t=""){const e=r>0?"-":"+",n=Math.abs(r),i=Math.trunc(n/60),s=n%60;return s===0?e+String(i):e+String(i)+t+Hr(s,2)}function MB(r,t){return r%60===0?(r>0?"-":"+")+Hr(Math.abs(r)/60,2):Tc(r,t)}function Tc(r,t=""){const e=r>0?"-":"+",n=Math.abs(r),i=Hr(Math.trunc(n/60),2),s=Hr(n%60,2);return e+i+t+s}const RB=(r,t)=>{switch(r){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},TI=(r,t)=>{switch(r){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},SO=(r,t)=>{const e=r.match(/(P+)(p+)?/)||[],n=e[1],i=e[2];if(!i)return RB(r,t);let s;switch(n){case"P":s=t.dateTime({width:"short"});break;case"PP":s=t.dateTime({width:"medium"});break;case"PPP":s=t.dateTime({width:"long"});break;case"PPPP":default:s=t.dateTime({width:"full"});break}return s.replace("{{date}}",RB(n,t)).replace("{{time}}",TI(i,t))},Zw={p:TI,P:SO},kO=/^D+$/,IO=/^Y+$/,TO=["D","DD","YY","YYYY"];function FI(r){return kO.test(r)}function LI(r){return IO.test(r)}function t1(r,t,e){const n=FO(r,t,e);if(console.warn(n),TO.includes(r))throw new RangeError(n)}function FO(r,t,e){const n=r[0]==="Y"?"years":"days of the month";return`Use \`${r.toLowerCase()}\` instead of \`${r}\` (in \`${t}\`) for formatting ${n} to the input \`${e}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const LO=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,UO=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,PO=/^'([^]*?)'?$/,NO=/''/g,DO=/[a-zA-Z]/;function MO(r,t,e){var c,u,h,d,m,f,b,y;const n=bu(),i=(e==null?void 0:e.locale)??n.locale??SI,s=(e==null?void 0:e.firstWeekContainsDate)??((u=(c=e==null?void 0:e.locale)==null?void 0:c.options)==null?void 0:u.firstWeekContainsDate)??n.firstWeekContainsDate??((d=(h=n.locale)==null?void 0:h.options)==null?void 0:d.firstWeekContainsDate)??1,a=(e==null?void 0:e.weekStartsOn)??((f=(m=e==null?void 0:e.locale)==null?void 0:m.options)==null?void 0:f.weekStartsOn)??n.weekStartsOn??((y=(b=n.locale)==null?void 0:b.options)==null?void 0:y.weekStartsOn)??0,o=Xe(r,e==null?void 0:e.in);if(!vI(o))throw new RangeError("Invalid time value");let A=t.match(UO).map(B=>{const I=B[0];if(I==="p"||I==="P"){const C=Zw[I];return C(B,i.formatLong)}return B}).join("").match(LO).map(B=>{if(B==="''")return{isToken:!1,value:"'"};const I=B[0];if(I==="'")return{isToken:!1,value:RO(B)};if(NB[I])return{isToken:!0,value:B};if(I.match(DO))throw new RangeError("Format string contains an unescaped latin alphabet character `"+I+"`");return{isToken:!1,value:B}});i.localize.preprocessor&&(A=i.localize.preprocessor(o,A));const l={firstWeekContainsDate:s,weekStartsOn:a,locale:i};return A.map(B=>{if(!B.isToken)return B.value;const I=B.value;(!(e!=null&&e.useAdditionalWeekYearTokens)&&LI(I)||!(e!=null&&e.useAdditionalDayOfYearTokens)&&FI(I))&&t1(I,t,String(r));const C=NB[I[0]];return C(o,I,i.localize,l)}).join("")}function RO(r){const t=r.match(PO);return t?t[1].replace(NO,"'"):r}function QO(){return Object.assign({},bu())}function OO(r,t){const e=Xe(r,t==null?void 0:t.in).getDay();return e===0?7:e}function HO(r,t){const e=VO(t)?new t(0):Mn(t,0);return e.setFullYear(r.getFullYear(),r.getMonth(),r.getDate()),e.setHours(r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()),e}function VO(r){var t;return typeof r=="function"&&((t=r.prototype)==null?void 0:t.constructor)===r}const $O=10;class UI{constructor(){It(this,"subPriority",0)}validate(t,e){return!0}}class jO extends UI{constructor(t,e,n,i,s){super(),this.value=t,this.validateValue=e,this.setValue=n,this.priority=i,s&&(this.subPriority=s)}validate(t,e){return this.validateValue(t,this.value,e)}set(t,e,n){return this.setValue(t,e,this.value,n)}}class GO extends UI{constructor(e,n){super();It(this,"priority",$O);It(this,"subPriority",-1);this.context=e||(i=>Mn(n,i))}set(e,n){return n.timestampIsSet?e:Mn(e,HO(e,this.context))}}let Ur=class{run(t,e,n,i){const s=this.parse(t,e,n,i);return s?{setter:new jO(s.value,this.validate,this.set,this.priority,this.subPriority),rest:s.rest}:null}validate(t,e,n){return!0}};class KO extends Ur{constructor(){super(...arguments);It(this,"priority",140);It(this,"incompatibleTokens",["R","u","t","T"])}parse(e,n,i){switch(n){case"G":case"GG":case"GGG":return i.era(e,{width:"abbreviated"})||i.era(e,{width:"narrow"});case"GGGGG":return i.era(e,{width:"narrow"});case"GGGG":default:return i.era(e,{width:"wide"})||i.era(e,{width:"abbreviated"})||i.era(e,{width:"narrow"})}}set(e,n,i){return n.era=i,e.setFullYear(i,0,1),e.setHours(0,0,0,0),e}}const Jn={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Co={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function Zn(r,t){return r&&{value:t(r.value),rest:r.rest}}function Cn(r,t){const e=t.match(r);return e?{value:parseInt(e[0],10),rest:t.slice(e[0].length)}:null}function Eo(r,t){const e=t.match(r);if(!e)return null;if(e[0]==="Z")return{value:0,rest:t.slice(1)};const n=e[1]==="+"?1:-1,i=e[2]?parseInt(e[2],10):0,s=e[3]?parseInt(e[3],10):0,a=e[5]?parseInt(e[5],10):0;return{value:n*(i*sg+s*ig+a*wQ),rest:t.slice(e[0].length)}}function PI(r){return Cn(Jn.anyDigitsSigned,r)}function Rn(r,t){switch(r){case 1:return Cn(Jn.singleDigit,t);case 2:return Cn(Jn.twoDigits,t);case 3:return Cn(Jn.threeDigits,t);case 4:return Cn(Jn.fourDigits,t);default:return Cn(new RegExp("^\\d{1,"+r+"}"),t)}}function s0(r,t){switch(r){case 1:return Cn(Jn.singleDigitSigned,t);case 2:return Cn(Jn.twoDigitsSigned,t);case 3:return Cn(Jn.threeDigitsSigned,t);case 4:return Cn(Jn.fourDigitsSigned,t);default:return Cn(new RegExp("^-?\\d{1,"+r+"}"),t)}}function Yv(r){switch(r){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function NI(r,t){const e=t>0,n=e?t:1-t;let i;if(n<=50)i=r||100;else{const s=n+50,a=Math.trunc(s/100)*100,o=r>=s%100;i=r+a-(o?100:0)}return e?i:1-i}function DI(r){return r%400===0||r%4===0&&r%100!==0}class zO extends Ur{constructor(){super(...arguments);It(this,"priority",130);It(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(e,n,i){const s=a=>({year:a,isTwoDigitYear:n==="yy"});switch(n){case"y":return Zn(Rn(4,e),s);case"yo":return Zn(i.ordinalNumber(e,{unit:"year"}),s);default:return Zn(Rn(n.length,e),s)}}validate(e,n){return n.isTwoDigitYear||n.year>0}set(e,n,i){const s=e.getFullYear();if(i.isTwoDigitYear){const o=NI(i.year,s);return e.setFullYear(o,0,1),e.setHours(0,0,0,0),e}const a=!("era"in n)||n.era===1?i.year:1-i.year;return e.setFullYear(a,0,1),e.setHours(0,0,0,0),e}}class qO extends Ur{constructor(){super(...arguments);It(this,"priority",130);It(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(e,n,i){const s=a=>({year:a,isTwoDigitYear:n==="YY"});switch(n){case"Y":return Zn(Rn(4,e),s);case"Yo":return Zn(i.ordinalNumber(e,{unit:"year"}),s);default:return Zn(Rn(n.length,e),s)}}validate(e,n){return n.isTwoDigitYear||n.year>0}set(e,n,i,s){const a=Wv(e,s);if(i.isTwoDigitYear){const A=NI(i.year,a);return e.setFullYear(A,0,s.firstWeekContainsDate),e.setHours(0,0,0,0),Ho(e,s)}const o=!("era"in n)||n.era===1?i.year:1-i.year;return e.setFullYear(o,0,s.firstWeekContainsDate),e.setHours(0,0,0,0),Ho(e,s)}}class WO extends Ur{constructor(){super(...arguments);It(this,"priority",130);It(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(e,n){return s0(n==="R"?4:n.length,e)}set(e,n,i){const s=Mn(e,0);return s.setFullYear(i,0,4),s.setHours(0,0,0,0),Ed(s)}}class YO extends Ur{constructor(){super(...arguments);It(this,"priority",130);It(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(e,n){return s0(n==="u"?4:n.length,e)}set(e,n,i){return e.setFullYear(i,0,1),e.setHours(0,0,0,0),e}}class XO extends Ur{constructor(){super(...arguments);It(this,"priority",120);It(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(e,n,i){switch(n){case"Q":case"QQ":return Rn(n.length,e);case"Qo":return i.ordinalNumber(e,{unit:"quarter"});case"QQQ":return i.quarter(e,{width:"abbreviated",context:"formatting"})||i.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return i.quarter(e,{width:"narrow",context:"formatting"});case"QQQQ":default:return i.quarter(e,{width:"wide",context:"formatting"})||i.quarter(e,{width:"abbreviated",context:"formatting"})||i.quarter(e,{width:"narrow",context:"formatting"})}}validate(e,n){return n>=1&&n<=4}set(e,n,i){return e.setMonth((i-1)*3,1),e.setHours(0,0,0,0),e}}class JO extends Ur{constructor(){super(...arguments);It(this,"priority",120);It(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(e,n,i){switch(n){case"q":case"qq":return Rn(n.length,e);case"qo":return i.ordinalNumber(e,{unit:"quarter"});case"qqq":return i.quarter(e,{width:"abbreviated",context:"standalone"})||i.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return i.quarter(e,{width:"narrow",context:"standalone"});case"qqqq":default:return i.quarter(e,{width:"wide",context:"standalone"})||i.quarter(e,{width:"abbreviated",context:"standalone"})||i.quarter(e,{width:"narrow",context:"standalone"})}}validate(e,n){return n>=1&&n<=4}set(e,n,i){return e.setMonth((i-1)*3,1),e.setHours(0,0,0,0),e}}class ZO extends Ur{constructor(){super(...arguments);It(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);It(this,"priority",110)}parse(e,n,i){const s=a=>a-1;switch(n){case"M":return Zn(Cn(Jn.month,e),s);case"MM":return Zn(Rn(2,e),s);case"Mo":return Zn(i.ordinalNumber(e,{unit:"month"}),s);case"MMM":return i.month(e,{width:"abbreviated",context:"formatting"})||i.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return i.month(e,{width:"narrow",context:"formatting"});case"MMMM":default:return i.month(e,{width:"wide",context:"formatting"})||i.month(e,{width:"abbreviated",context:"formatting"})||i.month(e,{width:"narrow",context:"formatting"})}}validate(e,n){return n>=0&&n<=11}set(e,n,i){return e.setMonth(i,1),e.setHours(0,0,0,0),e}}class t8 extends Ur{constructor(){super(...arguments);It(this,"priority",110);It(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(e,n,i){const s=a=>a-1;switch(n){case"L":return Zn(Cn(Jn.month,e),s);case"LL":return Zn(Rn(2,e),s);case"Lo":return Zn(i.ordinalNumber(e,{unit:"month"}),s);case"LLL":return i.month(e,{width:"abbreviated",context:"standalone"})||i.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return i.month(e,{width:"narrow",context:"standalone"});case"LLLL":default:return i.month(e,{width:"wide",context:"standalone"})||i.month(e,{width:"abbreviated",context:"standalone"})||i.month(e,{width:"narrow",context:"standalone"})}}validate(e,n){return n>=0&&n<=11}set(e,n,i){return e.setMonth(i,1),e.setHours(0,0,0,0),e}}function e8(r,t,e){const n=Xe(r,e==null?void 0:e.in),i=II(n,e)-t;return n.setDate(n.getDate()-i*7),Xe(n,e==null?void 0:e.in)}class r8 extends Ur{constructor(){super(...arguments);It(this,"priority",100);It(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(e,n,i){switch(n){case"w":return Cn(Jn.week,e);case"wo":return i.ordinalNumber(e,{unit:"week"});default:return Rn(n.length,e)}}validate(e,n){return n>=1&&n<=53}set(e,n,i,s){return Ho(e8(e,i,s),s)}}function n8(r,t,e){const n=Xe(r,e==null?void 0:e.in),i=kI(n,e)-t;return n.setDate(n.getDate()-i*7),n}class i8 extends Ur{constructor(){super(...arguments);It(this,"priority",100);It(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(e,n,i){switch(n){case"I":return Cn(Jn.week,e);case"Io":return i.ordinalNumber(e,{unit:"week"});default:return Rn(n.length,e)}}validate(e,n){return n>=1&&n<=53}set(e,n,i){return Ed(n8(e,i))}}const s8=[31,28,31,30,31,30,31,31,30,31,30,31],a8=[31,29,31,30,31,30,31,31,30,31,30,31];class o8 extends Ur{constructor(){super(...arguments);It(this,"priority",90);It(this,"subPriority",1);It(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(e,n,i){switch(n){case"d":return Cn(Jn.date,e);case"do":return i.ordinalNumber(e,{unit:"date"});default:return Rn(n.length,e)}}validate(e,n){const i=e.getFullYear(),s=DI(i),a=e.getMonth();return s?n>=1&&n<=a8[a]:n>=1&&n<=s8[a]}set(e,n,i){return e.setDate(i),e.setHours(0,0,0,0),e}}class A8 extends Ur{constructor(){super(...arguments);It(this,"priority",90);It(this,"subpriority",1);It(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(e,n,i){switch(n){case"D":case"DD":return Cn(Jn.dayOfYear,e);case"Do":return i.ordinalNumber(e,{unit:"date"});default:return Rn(n.length,e)}}validate(e,n){const i=e.getFullYear();return DI(i)?n>=1&&n<=366:n>=1&&n<=365}set(e,n,i){return e.setMonth(0,i),e.setHours(0,0,0,0),e}}function Xv(r,t,e){var u,h,d,m;const n=bu(),i=(e==null?void 0:e.weekStartsOn)??((h=(u=e==null?void 0:e.locale)==null?void 0:u.options)==null?void 0:h.weekStartsOn)??n.weekStartsOn??((m=(d=n.locale)==null?void 0:d.options)==null?void 0:m.weekStartsOn)??0,s=Xe(r,e==null?void 0:e.in),a=s.getDay(),A=(t%7+7)%7,l=7-i,c=t<0||t>6?t-(a+l)%7:(A+l)%7-(a+l)%7;return tb(s,c,e)}class l8 extends Ur{constructor(){super(...arguments);It(this,"priority",90);It(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(e,n,i){switch(n){case"E":case"EE":case"EEE":return i.day(e,{width:"abbreviated",context:"formatting"})||i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return i.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"});case"EEEE":default:return i.day(e,{width:"wide",context:"formatting"})||i.day(e,{width:"abbreviated",context:"formatting"})||i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"})}}validate(e,n){return n>=0&&n<=6}set(e,n,i,s){return e=Xv(e,i,s),e.setHours(0,0,0,0),e}}class c8 extends Ur{constructor(){super(...arguments);It(this,"priority",90);It(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(e,n,i,s){const a=o=>{const A=Math.floor((o-1)/7)*7;return(o+s.weekStartsOn+6)%7+A};switch(n){case"e":case"ee":return Zn(Rn(n.length,e),a);case"eo":return Zn(i.ordinalNumber(e,{unit:"day"}),a);case"eee":return i.day(e,{width:"abbreviated",context:"formatting"})||i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"});case"eeeee":return i.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"});case"eeee":default:return i.day(e,{width:"wide",context:"formatting"})||i.day(e,{width:"abbreviated",context:"formatting"})||i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"})}}validate(e,n){return n>=0&&n<=6}set(e,n,i,s){return e=Xv(e,i,s),e.setHours(0,0,0,0),e}}class u8 extends Ur{constructor(){super(...arguments);It(this,"priority",90);It(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(e,n,i,s){const a=o=>{const A=Math.floor((o-1)/7)*7;return(o+s.weekStartsOn+6)%7+A};switch(n){case"c":case"cc":return Zn(Rn(n.length,e),a);case"co":return Zn(i.ordinalNumber(e,{unit:"day"}),a);case"ccc":return i.day(e,{width:"abbreviated",context:"standalone"})||i.day(e,{width:"short",context:"standalone"})||i.day(e,{width:"narrow",context:"standalone"});case"ccccc":return i.day(e,{width:"narrow",context:"standalone"});case"cccccc":return i.day(e,{width:"short",context:"standalone"})||i.day(e,{width:"narrow",context:"standalone"});case"cccc":default:return i.day(e,{width:"wide",context:"standalone"})||i.day(e,{width:"abbreviated",context:"standalone"})||i.day(e,{width:"short",context:"standalone"})||i.day(e,{width:"narrow",context:"standalone"})}}validate(e,n){return n>=0&&n<=6}set(e,n,i,s){return e=Xv(e,i,s),e.setHours(0,0,0,0),e}}function d8(r,t,e){const n=Xe(r,e==null?void 0:e.in),i=OO(n,e),s=t-i;return tb(n,s,e)}class h8 extends Ur{constructor(){super(...arguments);It(this,"priority",90);It(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(e,n,i){const s=a=>a===0?7:a;switch(n){case"i":case"ii":return Rn(n.length,e);case"io":return i.ordinalNumber(e,{unit:"day"});case"iii":return Zn(i.day(e,{width:"abbreviated",context:"formatting"})||i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"}),s);case"iiiii":return Zn(i.day(e,{width:"narrow",context:"formatting"}),s);case"iiiiii":return Zn(i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"}),s);case"iiii":default:return Zn(i.day(e,{width:"wide",context:"formatting"})||i.day(e,{width:"abbreviated",context:"formatting"})||i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"}),s)}}validate(e,n){return n>=1&&n<=7}set(e,n,i){return e=d8(e,i),e.setHours(0,0,0,0),e}}class f8 extends Ur{constructor(){super(...arguments);It(this,"priority",80);It(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(e,n,i){switch(n){case"a":case"aa":case"aaa":return i.dayPeriod(e,{width:"abbreviated",context:"formatting"})||i.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return i.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaa":default:return i.dayPeriod(e,{width:"wide",context:"formatting"})||i.dayPeriod(e,{width:"abbreviated",context:"formatting"})||i.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,n,i){return e.setHours(Yv(i),0,0,0),e}}class g8 extends Ur{constructor(){super(...arguments);It(this,"priority",80);It(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(e,n,i){switch(n){case"b":case"bb":case"bbb":return i.dayPeriod(e,{width:"abbreviated",context:"formatting"})||i.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return i.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbb":default:return i.dayPeriod(e,{width:"wide",context:"formatting"})||i.dayPeriod(e,{width:"abbreviated",context:"formatting"})||i.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,n,i){return e.setHours(Yv(i),0,0,0),e}}class p8 extends Ur{constructor(){super(...arguments);It(this,"priority",80);It(this,"incompatibleTokens",["a","b","t","T"])}parse(e,n,i){switch(n){case"B":case"BB":case"BBB":return i.dayPeriod(e,{width:"abbreviated",context:"formatting"})||i.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return i.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBB":default:return i.dayPeriod(e,{width:"wide",context:"formatting"})||i.dayPeriod(e,{width:"abbreviated",context:"formatting"})||i.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,n,i){return e.setHours(Yv(i),0,0,0),e}}class m8 extends Ur{constructor(){super(...arguments);It(this,"priority",70);It(this,"incompatibleTokens",["H","K","k","t","T"])}parse(e,n,i){switch(n){case"h":return Cn(Jn.hour12h,e);case"ho":return i.ordinalNumber(e,{unit:"hour"});default:return Rn(n.length,e)}}validate(e,n){return n>=1&&n<=12}set(e,n,i){const s=e.getHours()>=12;return s&&i<12?e.setHours(i+12,0,0,0):!s&&i===12?e.setHours(0,0,0,0):e.setHours(i,0,0,0),e}}class b8 extends Ur{constructor(){super(...arguments);It(this,"priority",70);It(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(e,n,i){switch(n){case"H":return Cn(Jn.hour23h,e);case"Ho":return i.ordinalNumber(e,{unit:"hour"});default:return Rn(n.length,e)}}validate(e,n){return n>=0&&n<=23}set(e,n,i){return e.setHours(i,0,0,0),e}}class y8 extends Ur{constructor(){super(...arguments);It(this,"priority",70);It(this,"incompatibleTokens",["h","H","k","t","T"])}parse(e,n,i){switch(n){case"K":return Cn(Jn.hour11h,e);case"Ko":return i.ordinalNumber(e,{unit:"hour"});default:return Rn(n.length,e)}}validate(e,n){return n>=0&&n<=11}set(e,n,i){return e.getHours()>=12&&i<12?e.setHours(i+12,0,0,0):e.setHours(i,0,0,0),e}}class w8 extends Ur{constructor(){super(...arguments);It(this,"priority",70);It(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(e,n,i){switch(n){case"k":return Cn(Jn.hour24h,e);case"ko":return i.ordinalNumber(e,{unit:"hour"});default:return Rn(n.length,e)}}validate(e,n){return n>=1&&n<=24}set(e,n,i){const s=i<=24?i%24:i;return e.setHours(s,0,0,0),e}}class v8 extends Ur{constructor(){super(...arguments);It(this,"priority",60);It(this,"incompatibleTokens",["t","T"])}parse(e,n,i){switch(n){case"m":return Cn(Jn.minute,e);case"mo":return i.ordinalNumber(e,{unit:"minute"});default:return Rn(n.length,e)}}validate(e,n){return n>=0&&n<=59}set(e,n,i){return e.setMinutes(i,0,0),e}}class x8 extends Ur{constructor(){super(...arguments);It(this,"priority",50);It(this,"incompatibleTokens",["t","T"])}parse(e,n,i){switch(n){case"s":return Cn(Jn.second,e);case"so":return i.ordinalNumber(e,{unit:"second"});default:return Rn(n.length,e)}}validate(e,n){return n>=0&&n<=59}set(e,n,i){return e.setSeconds(i,0),e}}class _8 extends Ur{constructor(){super(...arguments);It(this,"priority",30);It(this,"incompatibleTokens",["t","T"])}parse(e,n){const i=s=>Math.trunc(s*Math.pow(10,-n.length+3));return Zn(Rn(n.length,e),i)}set(e,n,i){return e.setMilliseconds(i),e}}class B8 extends Ur{constructor(){super(...arguments);It(this,"priority",10);It(this,"incompatibleTokens",["t","T","x"])}parse(e,n){switch(n){case"X":return Eo(Co.basicOptionalMinutes,e);case"XX":return Eo(Co.basic,e);case"XXXX":return Eo(Co.basicOptionalSeconds,e);case"XXXXX":return Eo(Co.extendedOptionalSeconds,e);case"XXX":default:return Eo(Co.extended,e)}}set(e,n,i){return n.timestampIsSet?e:Mn(e,e.getTime()-i0(e)-i)}}class C8 extends Ur{constructor(){super(...arguments);It(this,"priority",10);It(this,"incompatibleTokens",["t","T","X"])}parse(e,n){switch(n){case"x":return Eo(Co.basicOptionalMinutes,e);case"xx":return Eo(Co.basic,e);case"xxxx":return Eo(Co.basicOptionalSeconds,e);case"xxxxx":return Eo(Co.extendedOptionalSeconds,e);case"xxx":default:return Eo(Co.extended,e)}}set(e,n,i){return n.timestampIsSet?e:Mn(e,e.getTime()-i0(e)-i)}}class E8 extends Ur{constructor(){super(...arguments);It(this,"priority",40);It(this,"incompatibleTokens","*")}parse(e){return PI(e)}set(e,n,i){return[Mn(e,i*1e3),{timestampIsSet:!0}]}}class S8 extends Ur{constructor(){super(...arguments);It(this,"priority",20);It(this,"incompatibleTokens","*")}parse(e){return PI(e)}set(e,n,i){return[Mn(e,i),{timestampIsSet:!0}]}}const k8={G:new KO,y:new zO,Y:new qO,R:new WO,u:new YO,Q:new XO,q:new JO,M:new ZO,L:new t8,w:new r8,I:new i8,d:new o8,D:new A8,E:new l8,e:new c8,c:new u8,i:new h8,a:new f8,b:new g8,B:new p8,h:new m8,H:new b8,K:new y8,k:new w8,m:new v8,s:new x8,S:new _8,X:new B8,x:new C8,t:new E8,T:new S8},I8=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,T8=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,F8=/^'([^]*?)'?$/,L8=/''/g,U8=/\S/,P8=/[a-zA-Z]/;function N8(r,t,e,n){var b,y,B,I,C,N,R,U;const i=()=>Mn((n==null?void 0:n.in)||e,NaN),s=QO(),a=(n==null?void 0:n.locale)??s.locale??SI,o=(n==null?void 0:n.firstWeekContainsDate)??((y=(b=n==null?void 0:n.locale)==null?void 0:b.options)==null?void 0:y.firstWeekContainsDate)??s.firstWeekContainsDate??((I=(B=s.locale)==null?void 0:B.options)==null?void 0:I.firstWeekContainsDate)??1,A=(n==null?void 0:n.weekStartsOn)??((N=(C=n==null?void 0:n.locale)==null?void 0:C.options)==null?void 0:N.weekStartsOn)??s.weekStartsOn??((U=(R=s.locale)==null?void 0:R.options)==null?void 0:U.weekStartsOn)??0;if(!t)return r?i():Xe(e,n==null?void 0:n.in);const l={firstWeekContainsDate:o,weekStartsOn:A,locale:a},c=[new GO(n==null?void 0:n.in,e)],u=t.match(T8).map(x=>{const v=x[0];if(v in Zw){const T=Zw[v];return T(x,a.formatLong)}return x}).join("").match(I8),h=[];for(let x of u){!(n!=null&&n.useAdditionalWeekYearTokens)&&LI(x)&&t1(x,t,r),!(n!=null&&n.useAdditionalDayOfYearTokens)&&FI(x)&&t1(x,t,r);const v=x[0],T=k8[v];if(T){const{incompatibleTokens:E}=T;if(Array.isArray(E)){const F=h.find(k=>E.includes(k.token)||k.token===v);if(F)throw new RangeError(`The format string mustn't contain \`${F.fullToken}\` and \`${x}\` at the same time`)}else if(T.incompatibleTokens==="*"&&h.length>0)throw new RangeError(`The format string mustn't contain \`${x}\` and any other token at the same time`);h.push({token:v,fullToken:x});const _=T.run(r,x,a.match,l);if(!_)return i();c.push(_.setter),r=_.rest}else{if(v.match(P8))throw new RangeError("Format string contains an unescaped latin alphabet character `"+v+"`");if(x==="''"?x="'":v==="'"&&(x=D8(x)),r.indexOf(x)===0)r=r.slice(x.length);else return i()}}if(r.length>0&&U8.test(r))return i();const d=c.map(x=>x.priority).sort((x,v)=>v-x).filter((x,v,T)=>T.indexOf(x)===v).map(x=>c.filter(v=>v.priority===x).sort((v,T)=>T.subPriority-v.subPriority)).map(x=>x[0]);let m=Xe(e,n==null?void 0:n.in);if(isNaN(+m))return i();const f={};for(const x of d){if(!x.validate(m,l))return i();const v=x.set(m,f,l);Array.isArray(v)?(m=v[0],Object.assign(f,v[1])):m=v}return m}function D8(r){return r.match(F8)[1].replace(L8,"'")}function M8(r,t){const e=Xe(r,t==null?void 0:t.in);return e.setMinutes(0,0,0),e}function R8(r,t){const e=Xe(r,t==null?void 0:t.in);return e.setSeconds(0,0),e}function Q8(r,t){const e=Xe(r,t==null?void 0:t.in);return e.setMilliseconds(0),e}function O8(r,t){const e=()=>Mn(t==null?void 0:t.in,NaN),n=(t==null?void 0:t.additionalDigits)??2,i=j8(r);let s;if(i.date){const l=G8(i.date,n);s=K8(l.restDateString,l.year)}if(!s||isNaN(+s))return e();const a=+s;let o=0,A;if(i.time&&(o=z8(i.time),isNaN(o)))return e();if(i.timezone){if(A=q8(i.timezone),isNaN(A))return e()}else{const l=new Date(a+o),c=Xe(0,t==null?void 0:t.in);return c.setFullYear(l.getUTCFullYear(),l.getUTCMonth(),l.getUTCDate()),c.setHours(l.getUTCHours(),l.getUTCMinutes(),l.getUTCSeconds(),l.getUTCMilliseconds()),c}return Xe(a+o+A,t==null?void 0:t.in)}const gp={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},H8=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,V8=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,$8=/^([+-])(\d{2})(?::?(\d{2}))?$/;function j8(r){const t={},e=r.split(gp.dateTimeDelimiter);let n;if(e.length>2)return t;if(/:/.test(e[0])?n=e[0]:(t.date=e[0],n=e[1],gp.timeZoneDelimiter.test(t.date)&&(t.date=r.split(gp.timeZoneDelimiter)[0],n=r.substr(t.date.length,r.length))),n){const i=gp.timezone.exec(n);i?(t.time=n.replace(i[1],""),t.timezone=i[1]):t.time=n}return t}function G8(r,t){const e=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),n=r.match(e);if(!n)return{year:NaN,restDateString:""};const i=n[1]?parseInt(n[1]):null,s=n[2]?parseInt(n[2]):null;return{year:s===null?i:s*100,restDateString:r.slice((n[1]||n[2]).length)}}function K8(r,t){if(t===null)return new Date(NaN);const e=r.match(H8);if(!e)return new Date(NaN);const n=!!e[4],i=Bh(e[1]),s=Bh(e[2])-1,a=Bh(e[3]),o=Bh(e[4]),A=Bh(e[5])-1;if(n)return Z8(t,o,A)?W8(t,o,A):new Date(NaN);{const l=new Date(0);return!X8(t,s,a)||!J8(t,i)?new Date(NaN):(l.setUTCFullYear(t,s,Math.max(i,a)),l)}}function Bh(r){return r?parseInt(r):1}function z8(r){const t=r.match(V8);if(!t)return NaN;const e=xy(t[1]),n=xy(t[2]),i=xy(t[3]);return tH(e,n,i)?e*sg+n*ig+i*1e3:NaN}function xy(r){return r&&parseFloat(r.replace(",","."))||0}function q8(r){if(r==="Z")return 0;const t=r.match($8);if(!t)return 0;const e=t[1]==="+"?-1:1,n=parseInt(t[2]),i=t[3]&&parseInt(t[3])||0;return eH(n,i)?e*(n*sg+i*ig):NaN}function W8(r,t,e){const n=new Date(0);n.setUTCFullYear(r,0,4);const i=n.getUTCDay()||7,s=(t-1)*7+e+1-i;return n.setUTCDate(n.getUTCDate()+s),n}const Y8=[31,null,31,30,31,30,31,31,30,31,30,31];function MI(r){return r%400===0||r%4===0&&r%100!==0}function X8(r,t,e){return t>=0&&t<=11&&e>=1&&e<=(Y8[t]||(MI(r)?29:28))}function J8(r,t){return t>=1&&t<=(MI(r)?366:365)}function Z8(r,t,e){return t>=1&&t<=53&&e>=0&&e<=6}function tH(r,t,e){return r===24?t===0&&e===0:e>=0&&e<60&&t>=0&&t<60&&r>=0&&r<25}function eH(r,t){return t>=0&&t<=59}/*!
 * chartjs-adapter-date-fns v3.0.0
 * https://www.chartjs.org
 * (c) 2022 chartjs-adapter-date-fns Contributors
 * Released under the MIT license
 */const rH={datetime:"MMM d, yyyy, h:mm:ss aaaa",millisecond:"h:mm:ss.SSS aaaa",second:"h:mm:ss aaaa",minute:"h:mm aaaa",hour:"ha",day:"MMM d",week:"PP",month:"MMM yyyy",quarter:"qqq - yyyy",year:"yyyy"};Yk._date.override({_id:"date-fns",formats:function(){return rH},parse:function(r,t){if(r===null||typeof r>"u")return null;const e=typeof r;return e==="number"||r instanceof Date?r=Xe(r):e==="string"&&(typeof t=="string"?r=N8(r,t,new Date,this.options):r=O8(r,this.options)),vI(r)?r.getTime():null},format:function(r,t){return MO(r,t,this.options)},add:function(r,t,e){switch(e){case"millisecond":return zv(r,t);case"second":return EQ(r,t);case"minute":return BQ(r,t);case"hour":return vQ(r,t);case"day":return tb(r,t);case"week":return SQ(r,t);case"month":return Kv(r,t);case"quarter":return CQ(r,t);case"year":return kQ(r,t);default:return r}},diff:function(r,t,e){switch(e){case"millisecond":return qv(r,t);case"second":return DQ(r,t);case"minute":return UQ(r,t);case"hour":return LQ(r,t);case"day":return xI(r,t);case"week":return MQ(r,t);case"month":return CI(r,t);case"quarter":return NQ(r,t);case"year":return RQ(r,t);default:return 0}},startOf:function(r,t,e){switch(t){case"second":return Q8(r);case"minute":return R8(r);case"hour":return M8(r);case"day":return Jw(r);case"week":return Ho(r);case"isoWeek":return Ho(r,{weekStartsOn:+e});case"month":return OQ(r);case"quarter":return QQ(r);case"year":return EI(r);default:return r}},endOf:function(r,t){switch(t){case"second":return KQ(r);case"minute":return jQ(r);case"hour":return VQ(r);case"day":return _I(r);case"week":return $Q(r);case"month":return BI(r);case"quarter":return GQ(r);case"year":return HQ(r);default:return r}}});/*!
 * chartjs-plugin-datalabels v2.2.0
 * https://chartjs-plugin-datalabels.netlify.app
 * (c) 2017-2022 chartjs-plugin-datalabels contributors
 * Released under the MIT license
 */var QB=(function(){if(typeof window<"u"){if(window.devicePixelRatio)return window.devicePixelRatio;var r=window.screen;if(r)return(r.deviceXDPI||1)/(r.logicalXDPI||1)}return 1})(),af={toTextLines:function(r){var t=[],e;for(r=[].concat(r);r.length;)e=r.pop(),typeof e=="string"?t.unshift.apply(t,e.split(`
`)):Array.isArray(e)?r.push.apply(r,e):er(r)||t.unshift(""+e);return t},textSize:function(r,t,e){var n=[].concat(t),i=n.length,s=r.font,a=0,o;for(r.font=e.string,o=0;o<i;++o)a=Math.max(r.measureText(n[o]).width,a);return r.font=s,{height:i*e.lineHeight,width:a}},bound:function(r,t,e){return Math.max(r,Math.min(t,e))},arrayDiff:function(r,t){var e=r.slice(),n=[],i,s,a,o;for(i=0,a=t.length;i<a;++i)o=t[i],s=e.indexOf(o),s===-1?n.push([o,1]):e.splice(s,1);for(i=0,a=e.length;i<a;++i)n.push([e[i],-1]);return n},rasterize:function(r){return Math.round(r*QB)/QB}};function _y(r,t){var e=t.x,n=t.y;if(e===null)return{x:0,y:-1};if(n===null)return{x:1,y:0};var i=r.x-e,s=r.y-n,a=Math.sqrt(i*i+s*s);return{x:a?i/a:0,y:a?s/a:-1}}function nH(r,t,e,n,i){switch(i){case"center":e=n=0;break;case"bottom":e=0,n=1;break;case"right":e=1,n=0;break;case"left":e=-1,n=0;break;case"top":e=0,n=-1;break;case"start":e=-e,n=-n;break;case"end":break;default:i*=Math.PI/180,e=Math.cos(i),n=Math.sin(i);break}return{x:r,y:t,vx:e,vy:n}}var iH=0,RI=1,QI=2,OI=4,HI=8;function pp(r,t,e){var n=iH;return r<e.left?n|=RI:r>e.right&&(n|=QI),t<e.top?n|=HI:t>e.bottom&&(n|=OI),n}function sH(r,t){for(var e=r.x0,n=r.y0,i=r.x1,s=r.y1,a=pp(e,n,t),o=pp(i,s,t),A,l,c;!(!(a|o)||a&o);)A=a||o,A&HI?(l=e+(i-e)*(t.top-n)/(s-n),c=t.top):A&OI?(l=e+(i-e)*(t.bottom-n)/(s-n),c=t.bottom):A&QI?(c=n+(s-n)*(t.right-e)/(i-e),l=t.right):A&RI&&(c=n+(s-n)*(t.left-e)/(i-e),l=t.left),A===a?(e=l,n=c,a=pp(e,n,t)):(i=l,s=c,o=pp(i,s,t));return{x0:e,x1:i,y0:n,y1:s}}function mp(r,t){var e=t.anchor,n=r,i,s;return t.clamp&&(n=sH(n,t.area)),e==="start"?(i=n.x0,s=n.y0):e==="end"?(i=n.x1,s=n.y1):(i=(n.x0+n.x1)/2,s=(n.y0+n.y1)/2),nH(i,s,r.vx,r.vy,t.align)}var bp={arc:function(r,t){var e=(r.startAngle+r.endAngle)/2,n=Math.cos(e),i=Math.sin(e),s=r.innerRadius,a=r.outerRadius;return mp({x0:r.x+n*s,y0:r.y+i*s,x1:r.x+n*a,y1:r.y+i*a,vx:n,vy:i},t)},point:function(r,t){var e=_y(r,t.origin),n=e.x*r.options.radius,i=e.y*r.options.radius;return mp({x0:r.x-n,y0:r.y-i,x1:r.x+n,y1:r.y+i,vx:e.x,vy:e.y},t)},bar:function(r,t){var e=_y(r,t.origin),n=r.x,i=r.y,s=0,a=0;return r.horizontal?(n=Math.min(r.x,r.base),s=Math.abs(r.base-r.x)):(i=Math.min(r.y,r.base),a=Math.abs(r.base-r.y)),mp({x0:n,y0:i+a,x1:n+s,y1:i,vx:e.x,vy:e.y},t)},fallback:function(r,t){var e=_y(r,t.origin);return mp({x0:r.x,y0:r.y,x1:r.x+(r.width||0),y1:r.y+(r.height||0),vx:e.x,vy:e.y},t)}},wA=af.rasterize;function aH(r){var t=r.borderWidth||0,e=r.padding,n=r.size.height,i=r.size.width,s=-i/2,a=-n/2;return{frame:{x:s-e.left-t,y:a-e.top-t,w:i+e.width+t*2,h:n+e.height+t*2},text:{x:s,y:a,w:i,h:n}}}function oH(r,t){var e=t.chart.getDatasetMeta(t.datasetIndex).vScale;if(!e)return null;if(e.xCenter!==void 0&&e.yCenter!==void 0)return{x:e.xCenter,y:e.yCenter};var n=e.getBasePixel();return r.horizontal?{x:n,y:null}:{x:null,y:n}}function AH(r){return r instanceof rd?bp.arc:r instanceof rf?bp.point:r instanceof nf?bp.bar:bp.fallback}function lH(r,t,e,n,i,s){var a=Math.PI/2;if(s){var o=Math.min(s,i/2,n/2),A=t+o,l=e+o,c=t+n-o,u=e+i-o;r.moveTo(t,l),A<c&&l<u?(r.arc(A,l,o,-Math.PI,-a),r.arc(c,l,o,-a,0),r.arc(c,u,o,0,a),r.arc(A,u,o,a,Math.PI)):A<c?(r.moveTo(A,e),r.arc(c,l,o,-a,a),r.arc(A,l,o,a,Math.PI+a)):l<u?(r.arc(A,l,o,-Math.PI,0),r.arc(A,u,o,0,Math.PI)):r.arc(A,l,o,-Math.PI,Math.PI),r.closePath(),r.moveTo(t,e)}else r.rect(t,e,n,i)}function cH(r,t,e){var n=e.backgroundColor,i=e.borderColor,s=e.borderWidth;!n&&(!i||!s)||(r.beginPath(),lH(r,wA(t.x)+s/2,wA(t.y)+s/2,wA(t.w)-s,wA(t.h)-s,e.borderRadius),r.closePath(),n&&(r.fillStyle=n,r.fill()),i&&s&&(r.strokeStyle=i,r.lineWidth=s,r.lineJoin="miter",r.stroke()))}function uH(r,t,e){var n=e.lineHeight,i=r.w,s=r.x,a=r.y+n/2;return t==="center"?s+=i/2:(t==="end"||t==="right")&&(s+=i),{h:n,w:i,x:s,y:a}}function dH(r,t,e){var n=r.shadowBlur,i=e.stroked,s=wA(e.x),a=wA(e.y),o=wA(e.w);i&&r.strokeText(t,s,a,o),e.filled&&(n&&i&&(r.shadowBlur=0),r.fillText(t,s,a,o),n&&i&&(r.shadowBlur=n))}function hH(r,t,e,n){var i=n.textAlign,s=n.color,a=!!s,o=n.font,A=t.length,l=n.textStrokeColor,c=n.textStrokeWidth,u=l&&c,h;if(!(!A||!a&&!u))for(e=uH(e,i,o),r.font=o.string,r.textAlign=i,r.textBaseline="middle",r.shadowBlur=n.textShadowBlur,r.shadowColor=n.textShadowColor,a&&(r.fillStyle=s),u&&(r.lineJoin="round",r.lineWidth=c,r.strokeStyle=l),h=0,A=t.length;h<A;++h)dH(r,t[h],{stroked:u,filled:a,w:e.w,x:e.x,y:e.y+e.h*h})}var VI=function(r,t,e,n){var i=this;i._config=r,i._index=n,i._model=null,i._rects=null,i._ctx=t,i._el=e};Oo(VI.prototype,{_modelize:function(r,t,e,n){var i=this,s=i._index,a=ai(dn([e.font,{}],n,s)),o=dn([e.color,mn.color],n,s);return{align:dn([e.align,"center"],n,s),anchor:dn([e.anchor,"center"],n,s),area:n.chart.chartArea,backgroundColor:dn([e.backgroundColor,null],n,s),borderColor:dn([e.borderColor,null],n,s),borderRadius:dn([e.borderRadius,0],n,s),borderWidth:dn([e.borderWidth,0],n,s),clamp:dn([e.clamp,!1],n,s),clip:dn([e.clip,!1],n,s),color:o,display:r,font:a,lines:t,offset:dn([e.offset,4],n,s),opacity:dn([e.opacity,1],n,s),origin:oH(i._el,n),padding:Wi(dn([e.padding,4],n,s)),positioner:AH(i._el),rotation:dn([e.rotation,0],n,s)*(Math.PI/180),size:af.textSize(i._ctx,t,a),textAlign:dn([e.textAlign,"start"],n,s),textShadowBlur:dn([e.textShadowBlur,0],n,s),textShadowColor:dn([e.textShadowColor,o],n,s),textStrokeColor:dn([e.textStrokeColor,o],n,s),textStrokeWidth:dn([e.textStrokeWidth,0],n,s)}},update:function(r){var t=this,e=null,n=null,i=t._index,s=t._config,a,o,A,l=dn([s.display,!0],r,i);l&&(a=r.dataset.data[i],o=Oe(Re(s.formatter,[a,r]),a),A=er(o)?[]:af.toTextLines(o),A.length&&(e=t._modelize(l,A,s,r),n=aH(e))),t._model=e,t._rects=n},geometry:function(){return this._rects?this._rects.frame:{}},rotation:function(){return this._model?this._model.rotation:0},visible:function(){return this._model&&this._model.opacity},model:function(){return this._model},draw:function(r,t){var e=this,n=r.ctx,i=e._model,s=e._rects,a;this.visible()&&(n.save(),i.clip&&(a=i.area,n.beginPath(),n.rect(a.left,a.top,a.right-a.left,a.bottom-a.top),n.clip()),n.globalAlpha=af.bound(0,i.opacity,1),n.translate(wA(t.x),wA(t.y)),n.rotate(i.rotation),cH(n,s.frame,i),hH(n,i.lines,s.text,i),n.restore())}});var fH=Number.MIN_SAFE_INTEGER||-9007199254740991,gH=Number.MAX_SAFE_INTEGER||9007199254740991;function Ch(r,t,e){var n=Math.cos(e),i=Math.sin(e),s=t.x,a=t.y;return{x:s+n*(r.x-s)-i*(r.y-a),y:a+i*(r.x-s)+n*(r.y-a)}}function OB(r,t){var e=gH,n=fH,i=t.origin,s,a,o,A,l;for(s=0;s<r.length;++s)a=r[s],o=a.x-i.x,A=a.y-i.y,l=t.vx*o+t.vy*A,e=Math.min(e,l),n=Math.max(n,l);return{min:e,max:n}}function yp(r,t){var e=t.x-r.x,n=t.y-r.y,i=Math.sqrt(e*e+n*n);return{vx:(t.x-r.x)/i,vy:(t.y-r.y)/i,origin:r,ln:i}}var $I=function(){this._rotation=0,this._rect={x:0,y:0,w:0,h:0}};Oo($I.prototype,{center:function(){var r=this._rect;return{x:r.x+r.w/2,y:r.y+r.h/2}},update:function(r,t,e){this._rotation=e,this._rect={x:t.x+r.x,y:t.y+r.y,w:t.w,h:t.h}},contains:function(r){var t=this,e=1,n=t._rect;return r=Ch(r,t.center(),-t._rotation),!(r.x<n.x-e||r.y<n.y-e||r.x>n.x+n.w+e*2||r.y>n.y+n.h+e*2)},intersects:function(r){var t=this._points(),e=r._points(),n=[yp(t[0],t[1]),yp(t[0],t[3])],i,s,a;for(this._rotation!==r._rotation&&n.push(yp(e[0],e[1]),yp(e[0],e[3])),i=0;i<n.length;++i)if(s=OB(t,n[i]),a=OB(e,n[i]),s.max<a.min||a.max<s.min)return!1;return!0},_points:function(){var r=this,t=r._rect,e=r._rotation,n=r.center();return[Ch({x:t.x,y:t.y},n,e),Ch({x:t.x+t.w,y:t.y},n,e),Ch({x:t.x+t.w,y:t.y+t.h},n,e),Ch({x:t.x,y:t.y+t.h},n,e)]}});function jI(r,t,e){var n=t.positioner(r,t),i=n.vx,s=n.vy;if(!i&&!s)return{x:n.x,y:n.y};var a=e.w,o=e.h,A=t.rotation,l=Math.abs(a/2*Math.cos(A))+Math.abs(o/2*Math.sin(A)),c=Math.abs(a/2*Math.sin(A))+Math.abs(o/2*Math.cos(A)),u=1/Math.max(Math.abs(i),Math.abs(s));return l*=i*u,c*=s*u,l+=t.offset*i,c+=t.offset*s,{x:n.x+l,y:n.y+c}}function pH(r,t){var e,n,i,s;for(e=r.length-1;e>=0;--e)for(i=r[e].$layout,n=e-1;n>=0&&i._visible;--n)s=r[n].$layout,s._visible&&i._box.intersects(s._box)&&t(i,s);return r}function mH(r){var t,e,n,i,s,a,o;for(t=0,e=r.length;t<e;++t)n=r[t],i=n.$layout,i._visible&&(o=new Proxy(n._el,{get:(A,l)=>A.getProps([l],!0)[l]}),s=n.geometry(),a=jI(o,n.model(),s),i._box.update(a,s,n.rotation()));return pH(r,function(A,l){var c=A._hidable,u=l._hidable;c&&u||u?l._visible=!1:c&&(A._visible=!1)})}var of={prepare:function(r){var t=[],e,n,i,s,a;for(e=0,i=r.length;e<i;++e)for(n=0,s=r[e].length;n<s;++n)a=r[e][n],t.push(a),a.$layout={_box:new $I,_hidable:!1,_visible:!0,_set:e,_idx:a._index};return t.sort(function(o,A){var l=o.$layout,c=A.$layout;return l._idx===c._idx?c._set-l._set:c._idx-l._idx}),this.update(t),t},update:function(r){var t=!1,e,n,i,s,a;for(e=0,n=r.length;e<n;++e)i=r[e],s=i.model(),a=i.$layout,a._hidable=s&&s.display==="auto",a._visible=i.visible(),t|=a._hidable;t&&mH(r)},lookup:function(r,t){var e,n;for(e=r.length-1;e>=0;--e)if(n=r[e].$layout,n&&n._visible&&n._box.contains(t))return r[e];return null},draw:function(r,t){var e,n,i,s,a,o;for(e=0,n=t.length;e<n;++e)i=t[e],s=i.$layout,s._visible&&(a=i.geometry(),o=jI(i._el,i.model(),a),s._box.update(o,a,i.rotation()),i.draw(r,o))}},bH=function(r){if(er(r))return null;var t=r,e,n,i;if(cr(r))if(!er(r.label))t=r.label;else if(!er(r.r))t=r.r;else for(t="",e=Object.keys(r),i=0,n=e.length;i<n;++i)t+=(i!==0?", ":"")+e[i]+": "+r[e[i]];return""+t},yH={align:"center",anchor:"center",backgroundColor:null,borderColor:null,borderRadius:0,borderWidth:0,clamp:!1,clip:!1,color:void 0,display:!0,font:{family:void 0,lineHeight:1.2,size:void 0,style:void 0,weight:null},formatter:bH,labels:void 0,listeners:{},offset:4,opacity:1,padding:{top:4,right:4,bottom:4,left:4},rotation:0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,textShadowBlur:0,textShadowColor:void 0},Qs="$datalabels",GI="$default";function wH(r,t){var e=r.datalabels,n={},i=[],s,a;return e===!1?null:(e===!0&&(e={}),t=Oo({},[t,e]),s=t.labels||{},a=Object.keys(s),delete t.labels,a.length?a.forEach(function(o){s[o]&&i.push(Oo({},[t,s[o],{_key:o}]))}):i.push(t),n=i.reduce(function(o,A){return Ar(A.listeners||{},function(l,c){o[c]=o[c]||{},o[c][A._key||GI]=l}),delete A.listeners,o},{}),{labels:i,listeners:n})}function e1(r,t,e,n){if(t){var i=e.$context,s=e.$groups,a;t[s._set]&&(a=t[s._set][s._key],a&&Re(a,[i,n])===!0&&(r[Qs]._dirty=!0,e.update(i)))}}function vH(r,t,e,n,i){var s,a;!e&&!n||(e?n?e!==n&&(a=s=!0):a=!0:s=!0,a&&e1(r,t.leave,e,i),s&&e1(r,t.enter,n,i))}function xH(r,t){var e=r[Qs],n=e._listeners,i,s;if(!(!n.enter&&!n.leave)){if(t.type==="mousemove")s=of.lookup(e._labels,t);else if(t.type!=="mouseout")return;i=e._hovered,e._hovered=s,vH(r,n,i,s,t)}}function _H(r,t){var e=r[Qs],n=e._listeners.click,i=n&&of.lookup(e._labels,t);i&&e1(r,n,i,t)}var Jv={id:"datalabels",defaults:yH,beforeInit:function(r){r[Qs]={_actives:[]}},beforeUpdate:function(r){var t=r[Qs];t._listened=!1,t._listeners={},t._datasets=[],t._labels=[]},afterDatasetUpdate:function(r,t,e){var n=t.index,i=r[Qs],s=i._datasets[n]=[],a=r.isDatasetVisible(n),o=r.data.datasets[n],A=wH(o,e),l=t.meta.data||[],c=r.ctx,u,h,d,m,f,b,y,B;for(c.save(),u=0,d=l.length;u<d;++u)if(y=l[u],y[Qs]=[],a&&y&&r.getDataVisibility(u)&&!y.skip)for(h=0,m=A.labels.length;h<m;++h)f=A.labels[h],b=f._key,B=new VI(f,c,y,u),B.$groups={_set:n,_key:b||GI},B.$context={active:!1,chart:r,dataIndex:u,dataset:o,datasetIndex:n},B.update(B.$context),y[Qs].push(B),s.push(B);c.restore(),Oo(i._listeners,A.listeners,{merger:function(I,C,N){C[I]=C[I]||{},C[I][t.index]=N[I],i._listened=!0}})},afterUpdate:function(r){r[Qs]._labels=of.prepare(r[Qs]._datasets)},afterDatasetsDraw:function(r){of.draw(r,r[Qs]._labels)},beforeEvent:function(r,t){if(r[Qs]._listened){var e=t.event;switch(e.type){case"mousemove":case"mouseout":xH(r,e);break;case"click":_H(r,e);break}}},afterEvent:function(r){var t=r[Qs],e=t._actives,n=t._actives=r.getActiveElements(),i=af.arrayDiff(e,n),s,a,o,A,l,c,u;for(s=0,a=i.length;s<a;++s)if(l=i[s],l[1])for(u=l[0].element[Qs]||[],o=0,A=u.length;o<A;++o)c=u[o],c.$context.active=l[1]===1,c.update(c.$context);(t._dirty||i.length)&&(of.update(t._labels),r.render()),delete t._dirty}},wp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Zv(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var By={exports:{}};/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */var HB;function BH(){return HB||(HB=1,(function(r){(function(t,e,n,i){var s=["","webkit","Moz","MS","ms","o"],a=e.createElement("div"),o="function",A=Math.round,l=Math.abs,c=Date.now;function u(J,lt,mt){return setTimeout(I(J,mt),lt)}function h(J,lt,mt){return Array.isArray(J)?(d(J,mt[lt],mt),!0):!1}function d(J,lt,mt){var Dt;if(J)if(J.forEach)J.forEach(lt,mt);else if(J.length!==i)for(Dt=0;Dt<J.length;)lt.call(mt,J[Dt],Dt,J),Dt++;else for(Dt in J)J.hasOwnProperty(Dt)&&lt.call(mt,J[Dt],Dt,J)}function m(J,lt,mt){var Dt="DEPRECATED METHOD: "+lt+`
`+mt+` AT 
`;return function(){var Jt=new Error("get-stack-trace"),ce=Jt&&Jt.stack?Jt.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",qe=t.console&&(t.console.warn||t.console.log);return qe&&qe.call(t.console,Dt,ce),J.apply(this,arguments)}}var f;typeof Object.assign!="function"?f=function(lt){if(lt===i||lt===null)throw new TypeError("Cannot convert undefined or null to object");for(var mt=Object(lt),Dt=1;Dt<arguments.length;Dt++){var Jt=arguments[Dt];if(Jt!==i&&Jt!==null)for(var ce in Jt)Jt.hasOwnProperty(ce)&&(mt[ce]=Jt[ce])}return mt}:f=Object.assign;var b=m(function(lt,mt,Dt){for(var Jt=Object.keys(mt),ce=0;ce<Jt.length;)(!Dt||Dt&&lt[Jt[ce]]===i)&&(lt[Jt[ce]]=mt[Jt[ce]]),ce++;return lt},"extend","Use `assign`."),y=m(function(lt,mt){return b(lt,mt,!0)},"merge","Use `assign`.");function B(J,lt,mt){var Dt=lt.prototype,Jt;Jt=J.prototype=Object.create(Dt),Jt.constructor=J,Jt._super=Dt,mt&&f(Jt,mt)}function I(J,lt){return function(){return J.apply(lt,arguments)}}function C(J,lt){return typeof J==o?J.apply(lt&&lt[0]||i,lt):J}function N(J,lt){return J===i?lt:J}function R(J,lt,mt){d(T(lt),function(Dt){J.addEventListener(Dt,mt,!1)})}function U(J,lt,mt){d(T(lt),function(Dt){J.removeEventListener(Dt,mt,!1)})}function x(J,lt){for(;J;){if(J==lt)return!0;J=J.parentNode}return!1}function v(J,lt){return J.indexOf(lt)>-1}function T(J){return J.trim().split(/\s+/g)}function E(J,lt,mt){if(J.indexOf&&!mt)return J.indexOf(lt);for(var Dt=0;Dt<J.length;){if(mt&&J[Dt][mt]==lt||!mt&&J[Dt]===lt)return Dt;Dt++}return-1}function _(J){return Array.prototype.slice.call(J,0)}function F(J,lt,mt){for(var Dt=[],Jt=[],ce=0;ce<J.length;){var qe=J[ce][lt];E(Jt,qe)<0&&Dt.push(J[ce]),Jt[ce]=qe,ce++}return Dt=Dt.sort(function(Ir,Zr){return Ir[lt]>Zr[lt]}),Dt}function k(J,lt){for(var mt,Dt,Jt=lt[0].toUpperCase()+lt.slice(1),ce=0;ce<s.length;){if(mt=s[ce],Dt=mt?mt+Jt:lt,Dt in J)return Dt;ce++}return i}var Z=1;function ut(){return Z++}function nt(J){var lt=J.ownerDocument||J;return lt.defaultView||lt.parentWindow||t}var j=/mobile|tablet|ip(ad|hone|od)|android/i,G="ontouchstart"in t,pt=k(t,"PointerEvent")!==i,q=G&&j.test(navigator.userAgent),L="touch",O="pen",V="mouse",X="kinect",At=25,et=1,st=2,dt=4,vt=8,_t=1,Mt=2,Ot=4,D=8,$=16,bt=Mt|Ot,rt=D|$,W=bt|rt,at=["x","y"],Ct=["clientX","clientY"];function xt(J,lt){var mt=this;this.manager=J,this.callback=lt,this.element=J.element,this.target=J.options.inputTarget,this.domHandler=function(Dt){C(J.options.enable,[J])&&mt.handler(Dt)},this.init()}xt.prototype={handler:function(){},init:function(){this.evEl&&R(this.element,this.evEl,this.domHandler),this.evTarget&&R(this.target,this.evTarget,this.domHandler),this.evWin&&R(nt(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&U(this.element,this.evEl,this.domHandler),this.evTarget&&U(this.target,this.evTarget,this.domHandler),this.evWin&&U(nt(this.element),this.evWin,this.domHandler)}};function yt(J){var lt,mt=J.options.inputClass;return mt?lt=mt:pt?lt=ke:q?lt=li:G?lt=$r:lt=De,new lt(J,kt)}function kt(J,lt,mt){var Dt=mt.pointers.length,Jt=mt.changedPointers.length,ce=lt&et&&Dt-Jt===0,qe=lt&(dt|vt)&&Dt-Jt===0;mt.isFirst=!!ce,mt.isFinal=!!qe,ce&&(J.session={}),mt.eventType=lt,Rt(J,mt),J.emit("hammer.input",mt),J.recognize(mt),J.session.prevInput=mt}function Rt(J,lt){var mt=J.session,Dt=lt.pointers,Jt=Dt.length;mt.firstInput||(mt.firstInput=se(lt)),Jt>1&&!mt.firstMultiple?mt.firstMultiple=se(lt):Jt===1&&(mt.firstMultiple=!1);var ce=mt.firstInput,qe=mt.firstMultiple,Kr=qe?qe.center:ce.center,Ir=lt.center=te(Dt);lt.timeStamp=c(),lt.deltaTime=lt.timeStamp-ce.timeStamp,lt.angle=Ae(Kr,Ir),lt.distance=ie(Kr,Ir),Lt(mt,lt),lt.offsetDirection=ve(lt.deltaX,lt.deltaY);var Zr=ae(lt.deltaTime,lt.deltaX,lt.deltaY);lt.overallVelocityX=Zr.x,lt.overallVelocityY=Zr.y,lt.overallVelocity=l(Zr.x)>l(Zr.y)?Zr.x:Zr.y,lt.scale=qe?re(qe.pointers,Dt):1,lt.rotation=qe?ee(qe.pointers,Dt):0,lt.maxPointers=mt.prevInput?lt.pointers.length>mt.prevInput.maxPointers?lt.pointers.length:mt.prevInput.maxPointers:lt.pointers.length,Qt(mt,lt);var Xi=J.element;x(lt.srcEvent.target,Xi)&&(Xi=lt.srcEvent.target),lt.target=Xi}function Lt(J,lt){var mt=lt.center,Dt=J.offsetDelta||{},Jt=J.prevDelta||{},ce=J.prevInput||{};(lt.eventType===et||ce.eventType===dt)&&(Jt=J.prevDelta={x:ce.deltaX||0,y:ce.deltaY||0},Dt=J.offsetDelta={x:mt.x,y:mt.y}),lt.deltaX=Jt.x+(mt.x-Dt.x),lt.deltaY=Jt.y+(mt.y-Dt.y)}function Qt(J,lt){var mt=J.lastInterval||lt,Dt=lt.timeStamp-mt.timeStamp,Jt,ce,qe,Kr;if(lt.eventType!=vt&&(Dt>At||mt.velocity===i)){var Ir=lt.deltaX-mt.deltaX,Zr=lt.deltaY-mt.deltaY,Xi=ae(Dt,Ir,Zr);ce=Xi.x,qe=Xi.y,Jt=l(Xi.x)>l(Xi.y)?Xi.x:Xi.y,Kr=ve(Ir,Zr),J.lastInterval=lt}else Jt=mt.velocity,ce=mt.velocityX,qe=mt.velocityY,Kr=mt.direction;lt.velocity=Jt,lt.velocityX=ce,lt.velocityY=qe,lt.direction=Kr}function se(J){for(var lt=[],mt=0;mt<J.pointers.length;)lt[mt]={clientX:A(J.pointers[mt].clientX),clientY:A(J.pointers[mt].clientY)},mt++;return{timeStamp:c(),pointers:lt,center:te(lt),deltaX:J.deltaX,deltaY:J.deltaY}}function te(J){var lt=J.length;if(lt===1)return{x:A(J[0].clientX),y:A(J[0].clientY)};for(var mt=0,Dt=0,Jt=0;Jt<lt;)mt+=J[Jt].clientX,Dt+=J[Jt].clientY,Jt++;return{x:A(mt/lt),y:A(Dt/lt)}}function ae(J,lt,mt){return{x:lt/J||0,y:mt/J||0}}function ve(J,lt){return J===lt?_t:l(J)>=l(lt)?J<0?Mt:Ot:lt<0?D:$}function ie(J,lt,mt){mt||(mt=at);var Dt=lt[mt[0]]-J[mt[0]],Jt=lt[mt[1]]-J[mt[1]];return Math.sqrt(Dt*Dt+Jt*Jt)}function Ae(J,lt,mt){mt||(mt=at);var Dt=lt[mt[0]]-J[mt[0]],Jt=lt[mt[1]]-J[mt[1]];return Math.atan2(Jt,Dt)*180/Math.PI}function ee(J,lt){return Ae(lt[1],lt[0],Ct)+Ae(J[1],J[0],Ct)}function re(J,lt){return ie(lt[0],lt[1],Ct)/ie(J[0],J[1],Ct)}var he={mousedown:et,mousemove:st,mouseup:dt},Fe="mousedown",xe="mousemove mouseup";function De(){this.evEl=Fe,this.evWin=xe,this.pressed=!1,xt.apply(this,arguments)}B(De,xt,{handler:function(lt){var mt=he[lt.type];mt&et&&lt.button===0&&(this.pressed=!0),mt&st&&lt.which!==1&&(mt=dt),this.pressed&&(mt&dt&&(this.pressed=!1),this.callback(this.manager,mt,{pointers:[lt],changedPointers:[lt],pointerType:V,srcEvent:lt}))}});var Le={pointerdown:et,pointermove:st,pointerup:dt,pointercancel:vt,pointerout:vt},or={2:L,3:O,4:V,5:X},kr="pointerdown",Se="pointermove pointerup pointercancel";t.MSPointerEvent&&!t.PointerEvent&&(kr="MSPointerDown",Se="MSPointerMove MSPointerUp MSPointerCancel");function ke(){this.evEl=kr,this.evWin=Se,xt.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}B(ke,xt,{handler:function(lt){var mt=this.store,Dt=!1,Jt=lt.type.toLowerCase().replace("ms",""),ce=Le[Jt],qe=or[lt.pointerType]||lt.pointerType,Kr=qe==L,Ir=E(mt,lt.pointerId,"pointerId");ce&et&&(lt.button===0||Kr)?Ir<0&&(mt.push(lt),Ir=mt.length-1):ce&(dt|vt)&&(Dt=!0),!(Ir<0)&&(mt[Ir]=lt,this.callback(this.manager,ce,{pointers:mt,changedPointers:[lt],pointerType:qe,srcEvent:lt}),Dt&&mt.splice(Ir,1))}});var rr={touchstart:et,touchmove:st,touchend:dt,touchcancel:vt},ei="touchstart",_n="touchstart touchmove touchend touchcancel";function Yi(){this.evTarget=ei,this.evWin=_n,this.started=!1,xt.apply(this,arguments)}B(Yi,xt,{handler:function(lt){var mt=rr[lt.type];if(mt===et&&(this.started=!0),!!this.started){var Dt=Ai.call(this,lt,mt);mt&(dt|vt)&&Dt[0].length-Dt[1].length===0&&(this.started=!1),this.callback(this.manager,mt,{pointers:Dt[0],changedPointers:Dt[1],pointerType:L,srcEvent:lt})}}});function Ai(J,lt){var mt=_(J.touches),Dt=_(J.changedTouches);return lt&(dt|vt)&&(mt=F(mt.concat(Dt),"identifier")),[mt,Dt]}var Ne={touchstart:et,touchmove:st,touchend:dt,touchcancel:vt},Ys="touchstart touchmove touchend touchcancel";function li(){this.evTarget=Ys,this.targetIds={},xt.apply(this,arguments)}B(li,xt,{handler:function(lt){var mt=Ne[lt.type],Dt=Ni.call(this,lt,mt);Dt&&this.callback(this.manager,mt,{pointers:Dt[0],changedPointers:Dt[1],pointerType:L,srcEvent:lt})}});function Ni(J,lt){var mt=_(J.touches),Dt=this.targetIds;if(lt&(et|st)&&mt.length===1)return Dt[mt[0].identifier]=!0,[mt,mt];var Jt,ce,qe=_(J.changedTouches),Kr=[],Ir=this.target;if(ce=mt.filter(function(Zr){return x(Zr.target,Ir)}),lt===et)for(Jt=0;Jt<ce.length;)Dt[ce[Jt].identifier]=!0,Jt++;for(Jt=0;Jt<qe.length;)Dt[qe[Jt].identifier]&&Kr.push(qe[Jt]),lt&(dt|vt)&&delete Dt[qe[Jt].identifier],Jt++;if(Kr.length)return[F(ce.concat(Kr),"identifier"),Kr]}var Di=2500,Mr=25;function $r(){xt.apply(this,arguments);var J=I(this.handler,this);this.touch=new li(this.manager,J),this.mouse=new De(this.manager,J),this.primaryTouch=null,this.lastTouches=[]}B($r,xt,{handler:function(lt,mt,Dt){var Jt=Dt.pointerType==L,ce=Dt.pointerType==V;if(!(ce&&Dt.sourceCapabilities&&Dt.sourceCapabilities.firesTouchEvents)){if(Jt)Qn.call(this,mt,Dt);else if(ce&&Xs.call(this,Dt))return;this.callback(lt,mt,Dt)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function Qn(J,lt){J&et?(this.primaryTouch=lt.changedPointers[0].identifier,ci.call(this,lt)):J&(dt|vt)&&ci.call(this,lt)}function ci(J){var lt=J.changedPointers[0];if(lt.identifier===this.primaryTouch){var mt={x:lt.clientX,y:lt.clientY};this.lastTouches.push(mt);var Dt=this.lastTouches,Jt=function(){var ce=Dt.indexOf(mt);ce>-1&&Dt.splice(ce,1)};setTimeout(Jt,Di)}}function Xs(J){for(var lt=J.srcEvent.clientX,mt=J.srcEvent.clientY,Dt=0;Dt<this.lastTouches.length;Dt++){var Jt=this.lastTouches[Dt],ce=Math.abs(lt-Jt.x),qe=Math.abs(mt-Jt.y);if(ce<=Mr&&qe<=Mr)return!0}return!1}var Mi=k(a.style,"touchAction"),Ri=Mi!==i,wi="compute",Qi="auto",vi="manipulation",xi="none",_i="pan-x",Bi="pan-y",Cs=Js();function Es(J,lt){this.manager=J,this.set(lt)}Es.prototype={set:function(J){J==wi&&(J=this.compute()),Ri&&this.manager.element.style&&Cs[J]&&(this.manager.element.style[Mi]=J),this.actions=J.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var J=[];return d(this.manager.recognizers,function(lt){C(lt.options.enable,[lt])&&(J=J.concat(lt.getTouchAction()))}),Ss(J.join(" "))},preventDefaults:function(J){var lt=J.srcEvent,mt=J.offsetDirection;if(this.manager.session.prevented){lt.preventDefault();return}var Dt=this.actions,Jt=v(Dt,xi)&&!Cs[xi],ce=v(Dt,Bi)&&!Cs[Bi],qe=v(Dt,_i)&&!Cs[_i];if(Jt){var Kr=J.pointers.length===1,Ir=J.distance<2,Zr=J.deltaTime<250;if(Kr&&Ir&&Zr)return}if(!(qe&&ce)&&(Jt||ce&&mt&bt||qe&&mt&rt))return this.preventSrc(lt)},preventSrc:function(J){this.manager.session.prevented=!0,J.preventDefault()}};function Ss(J){if(v(J,xi))return xi;var lt=v(J,_i),mt=v(J,Bi);return lt&&mt?xi:lt||mt?lt?_i:Bi:v(J,vi)?vi:Qi}function Js(){if(!Ri)return!1;var J={},lt=t.CSS&&t.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(mt){J[mt]=lt?t.CSS.supports("touch-action",mt):!0}),J}var ks=1,ui=2,Is=4,yn=8,Ci=yn,Ts=16,ri=32;function Oi(J){this.options=f({},this.defaults,J||{}),this.id=ut(),this.manager=null,this.options.enable=N(this.options.enable,!0),this.state=ks,this.simultaneous={},this.requireFail=[]}Oi.prototype={defaults:{},set:function(J){return f(this.options,J),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(J){if(h(J,"recognizeWith",this))return this;var lt=this.simultaneous;return J=Zs(J,this),lt[J.id]||(lt[J.id]=J,J.recognizeWith(this)),this},dropRecognizeWith:function(J){return h(J,"dropRecognizeWith",this)?this:(J=Zs(J,this),delete this.simultaneous[J.id],this)},requireFailure:function(J){if(h(J,"requireFailure",this))return this;var lt=this.requireFail;return J=Zs(J,this),E(lt,J)===-1&&(lt.push(J),J.requireFailure(this)),this},dropRequireFailure:function(J){if(h(J,"dropRequireFailure",this))return this;J=Zs(J,this);var lt=E(this.requireFail,J);return lt>-1&&this.requireFail.splice(lt,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(J){return!!this.simultaneous[J.id]},emit:function(J){var lt=this,mt=this.state;function Dt(Jt){lt.manager.emit(Jt,J)}mt<yn&&Dt(lt.options.event+ao(mt)),Dt(lt.options.event),J.additionalEvent&&Dt(J.additionalEvent),mt>=yn&&Dt(lt.options.event+ao(mt))},tryEmit:function(J){if(this.canEmit())return this.emit(J);this.state=ri},canEmit:function(){for(var J=0;J<this.requireFail.length;){if(!(this.requireFail[J].state&(ri|ks)))return!1;J++}return!0},recognize:function(J){var lt=f({},J);if(!C(this.options.enable,[this,lt])){this.reset(),this.state=ri;return}this.state&(Ci|Ts|ri)&&(this.state=ks),this.state=this.process(lt),this.state&(ui|Is|yn|Ts)&&this.tryEmit(lt)},process:function(J){},getTouchAction:function(){},reset:function(){}};function ao(J){return J&Ts?"cancel":J&yn?"end":J&Is?"move":J&ui?"start":""}function oo(J){return J==$?"down":J==D?"up":J==Mt?"left":J==Ot?"right":""}function Zs(J,lt){var mt=lt.manager;return mt?mt.get(J):J}function wn(){Oi.apply(this,arguments)}B(wn,Oi,{defaults:{pointers:1},attrTest:function(J){var lt=this.options.pointers;return lt===0||J.pointers.length===lt},process:function(J){var lt=this.state,mt=J.eventType,Dt=lt&(ui|Is),Jt=this.attrTest(J);return Dt&&(mt&vt||!Jt)?lt|Ts:Dt||Jt?mt&dt?lt|yn:lt&ui?lt|Is:ui:ri}});function ur(){wn.apply(this,arguments),this.pX=null,this.pY=null}B(ur,wn,{defaults:{event:"pan",threshold:10,pointers:1,direction:W},getTouchAction:function(){var J=this.options.direction,lt=[];return J&bt&&lt.push(Bi),J&rt&&lt.push(_i),lt},directionTest:function(J){var lt=this.options,mt=!0,Dt=J.distance,Jt=J.direction,ce=J.deltaX,qe=J.deltaY;return Jt&lt.direction||(lt.direction&bt?(Jt=ce===0?_t:ce<0?Mt:Ot,mt=ce!=this.pX,Dt=Math.abs(J.deltaX)):(Jt=qe===0?_t:qe<0?D:$,mt=qe!=this.pY,Dt=Math.abs(J.deltaY))),J.direction=Jt,mt&&Dt>lt.threshold&&Jt&lt.direction},attrTest:function(J){return wn.prototype.attrTest.call(this,J)&&(this.state&ui||!(this.state&ui)&&this.directionTest(J))},emit:function(J){this.pX=J.deltaX,this.pY=J.deltaY;var lt=oo(J.direction);lt&&(J.additionalEvent=this.options.event+lt),this._super.emit.call(this,J)}});function Fs(){wn.apply(this,arguments)}B(Fs,wn,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[xi]},attrTest:function(J){return this._super.attrTest.call(this,J)&&(Math.abs(J.scale-1)>this.options.threshold||this.state&ui)},emit:function(J){if(J.scale!==1){var lt=J.scale<1?"in":"out";J.additionalEvent=this.options.event+lt}this._super.emit.call(this,J)}});function Ls(){Oi.apply(this,arguments),this._timer=null,this._input=null}B(Ls,Oi,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Qi]},process:function(J){var lt=this.options,mt=J.pointers.length===lt.pointers,Dt=J.distance<lt.threshold,Jt=J.deltaTime>lt.time;if(this._input=J,!Dt||!mt||J.eventType&(dt|vt)&&!Jt)this.reset();else if(J.eventType&et)this.reset(),this._timer=u(function(){this.state=Ci,this.tryEmit()},lt.time,this);else if(J.eventType&dt)return Ci;return ri},reset:function(){clearTimeout(this._timer)},emit:function(J){this.state===Ci&&(J&&J.eventType&dt?this.manager.emit(this.options.event+"up",J):(this._input.timeStamp=c(),this.manager.emit(this.options.event,this._input)))}});function Hi(){wn.apply(this,arguments)}B(Hi,wn,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[xi]},attrTest:function(J){return this._super.attrTest.call(this,J)&&(Math.abs(J.rotation)>this.options.threshold||this.state&ui)}});function lr(){wn.apply(this,arguments)}B(lr,wn,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:bt|rt,pointers:1},getTouchAction:function(){return ur.prototype.getTouchAction.call(this)},attrTest:function(J){var lt=this.options.direction,mt;return lt&(bt|rt)?mt=J.overallVelocity:lt&bt?mt=J.overallVelocityX:lt&rt&&(mt=J.overallVelocityY),this._super.attrTest.call(this,J)&&lt&J.offsetDirection&&J.distance>this.options.threshold&&J.maxPointers==this.options.pointers&&l(mt)>this.options.velocity&&J.eventType&dt},emit:function(J){var lt=oo(J.offsetDirection);lt&&this.manager.emit(this.options.event+lt,J),this.manager.emit(this.options.event,J)}});function On(){Oi.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}B(On,Oi,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[vi]},process:function(J){var lt=this.options,mt=J.pointers.length===lt.pointers,Dt=J.distance<lt.threshold,Jt=J.deltaTime<lt.time;if(this.reset(),J.eventType&et&&this.count===0)return this.failTimeout();if(Dt&&Jt&&mt){if(J.eventType!=dt)return this.failTimeout();var ce=this.pTime?J.timeStamp-this.pTime<lt.interval:!0,qe=!this.pCenter||ie(this.pCenter,J.center)<lt.posThreshold;this.pTime=J.timeStamp,this.pCenter=J.center,!qe||!ce?this.count=1:this.count+=1,this._input=J;var Kr=this.count%lt.taps;if(Kr===0)return this.hasRequireFailures()?(this._timer=u(function(){this.state=Ci,this.tryEmit()},lt.interval,this),ui):Ci}return ri},failTimeout:function(){return this._timer=u(function(){this.state=ri},this.options.interval,this),ri},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Ci&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function kn(J,lt){return lt=lt||{},lt.recognizers=N(lt.recognizers,kn.defaults.preset),new lo(J,lt)}kn.VERSION="2.0.7",kn.defaults={domEvents:!1,touchAction:wi,enable:!0,inputTarget:null,inputClass:null,preset:[[Hi,{enable:!1}],[Fs,{enable:!1},["rotate"]],[lr,{direction:bt}],[ur,{direction:bt},["swipe"]],[On],[On,{event:"doubletap",taps:2},["tap"]],[Ls]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var Rr=1,Ao=2;function lo(J,lt){this.options=f({},kn.defaults,lt||{}),this.options.inputTarget=this.options.inputTarget||J,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=J,this.input=yt(this),this.touchAction=new Es(this,this.options.touchAction),VA(this,!0),d(this.options.recognizers,function(mt){var Dt=this.add(new mt[0](mt[1]));mt[2]&&Dt.recognizeWith(mt[2]),mt[3]&&Dt.requireFailure(mt[3])},this)}lo.prototype={set:function(J){return f(this.options,J),J.touchAction&&this.touchAction.update(),J.inputTarget&&(this.input.destroy(),this.input.target=J.inputTarget,this.input.init()),this},stop:function(J){this.session.stopped=J?Ao:Rr},recognize:function(J){var lt=this.session;if(!lt.stopped){this.touchAction.preventDefaults(J);var mt,Dt=this.recognizers,Jt=lt.curRecognizer;(!Jt||Jt&&Jt.state&Ci)&&(Jt=lt.curRecognizer=null);for(var ce=0;ce<Dt.length;)mt=Dt[ce],lt.stopped!==Ao&&(!Jt||mt==Jt||mt.canRecognizeWith(Jt))?mt.recognize(J):mt.reset(),!Jt&&mt.state&(ui|Is|yn)&&(Jt=lt.curRecognizer=mt),ce++}},get:function(J){if(J instanceof Oi)return J;for(var lt=this.recognizers,mt=0;mt<lt.length;mt++)if(lt[mt].options.event==J)return lt[mt];return null},add:function(J){if(h(J,"add",this))return this;var lt=this.get(J.options.event);return lt&&this.remove(lt),this.recognizers.push(J),J.manager=this,this.touchAction.update(),J},remove:function(J){if(h(J,"remove",this))return this;if(J=this.get(J),J){var lt=this.recognizers,mt=E(lt,J);mt!==-1&&(lt.splice(mt,1),this.touchAction.update())}return this},on:function(J,lt){if(J!==i&&lt!==i){var mt=this.handlers;return d(T(J),function(Dt){mt[Dt]=mt[Dt]||[],mt[Dt].push(lt)}),this}},off:function(J,lt){if(J!==i){var mt=this.handlers;return d(T(J),function(Dt){lt?mt[Dt]&&mt[Dt].splice(E(mt[Dt],lt),1):delete mt[Dt]}),this}},emit:function(J,lt){this.options.domEvents&&hc(J,lt);var mt=this.handlers[J]&&this.handlers[J].slice();if(!(!mt||!mt.length)){lt.type=J,lt.preventDefault=function(){lt.srcEvent.preventDefault()};for(var Dt=0;Dt<mt.length;)mt[Dt](lt),Dt++}},destroy:function(){this.element&&VA(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function VA(J,lt){var mt=J.element;if(mt.style){var Dt;d(J.options.cssProps,function(Jt,ce){Dt=k(mt.style,ce),lt?(J.oldCssProps[Dt]=mt.style[Dt],mt.style[Dt]=Jt):mt.style[Dt]=J.oldCssProps[Dt]||""}),lt||(J.oldCssProps={})}}function hc(J,lt){var mt=e.createEvent("Event");mt.initEvent(J,!0,!0),mt.gesture=lt,lt.target.dispatchEvent(mt)}f(kn,{INPUT_START:et,INPUT_MOVE:st,INPUT_END:dt,INPUT_CANCEL:vt,STATE_POSSIBLE:ks,STATE_BEGAN:ui,STATE_CHANGED:Is,STATE_ENDED:yn,STATE_RECOGNIZED:Ci,STATE_CANCELLED:Ts,STATE_FAILED:ri,DIRECTION_NONE:_t,DIRECTION_LEFT:Mt,DIRECTION_RIGHT:Ot,DIRECTION_UP:D,DIRECTION_DOWN:$,DIRECTION_HORIZONTAL:bt,DIRECTION_VERTICAL:rt,DIRECTION_ALL:W,Manager:lo,Input:xt,TouchAction:Es,TouchInput:li,MouseInput:De,PointerEventInput:ke,TouchMouseInput:$r,SingleTouchInput:Yi,Recognizer:Oi,AttrRecognizer:wn,Tap:On,Pan:ur,Swipe:lr,Pinch:Fs,Rotate:Hi,Press:Ls,on:R,off:U,each:d,merge:y,extend:b,assign:f,inherit:B,bindFn:I,prefixed:k});var Us=typeof t<"u"?t:typeof self<"u"?self:{};Us.Hammer=kn,r.exports?r.exports=kn:t[n]=kn})(window,document,"Hammer")})(By)),By.exports}var CH=BH();const Af=Zv(CH);/*!
* chartjs-plugin-zoom v2.2.0
* https://www.chartjs.org/chartjs-plugin-zoom/2.2.0/
 * (c) 2016-2024 chartjs-plugin-zoom Contributors
 * Released under the MIT License
 */const Pf=r=>r&&r.enabled&&r.modifierKey,KI=(r,t)=>r&&t[r+"Key"],t2=(r,t)=>r&&!t[r+"Key"];function Kl(r,t,e){return r===void 0?!0:typeof r=="string"?r.indexOf(t)!==-1:typeof r=="function"?r({chart:e}).indexOf(t)!==-1:!1}function Cy(r,t){return typeof r=="function"&&(r=r({chart:t})),typeof r=="string"?{x:r.indexOf("x")!==-1,y:r.indexOf("y")!==-1}:{x:!1,y:!1}}function EH(r,t){let e;return function(){return clearTimeout(e),e=setTimeout(r,t),t}}function SH({x:r,y:t},e){const n=e.scales,i=Object.keys(n);for(let s=0;s<i.length;s++){const a=n[i[s]];if(t>=a.top&&t<=a.bottom&&r>=a.left&&r<=a.right)return a}return null}function zI(r,t,e){const{mode:n="xy",scaleMode:i,overScaleMode:s}=r||{},a=SH(t,e),o=Cy(n,e),A=Cy(i,e);if(s){const c=Cy(s,e);for(const u of["x","y"])c[u]&&(A[u]=o[u],o[u]=!1)}if(a&&A[a.axis])return[a];const l=[];return Ar(e.scales,function(c){o[c.axis]&&l.push(c)}),l}const r1=new WeakMap;function En(r){let t=r1.get(r);return t||(t={originalScaleLimits:{},updatedScaleLimits:{},handlers:{},panDelta:{},dragging:!1,panning:!1},r1.set(r,t)),t}function kH(r){r1.delete(r)}function qI(r,t,e,n){const i=Math.max(0,Math.min(1,(r-t)/e||0)),s=1-i;return{min:n*i,max:n*s}}function WI(r,t){const e=r.isHorizontal()?t.x:t.y;return r.getValueForPixel(e)}function YI(r,t,e){const n=r.max-r.min,i=n*(t-1),s=WI(r,e);return qI(s,r.min,n,i)}function IH(r,t,e){const n=WI(r,e);if(n===void 0)return{min:r.min,max:r.max};const i=Math.log10(r.min),s=Math.log10(r.max),a=Math.log10(n),o=s-i,A=o*(t-1),l=qI(a,i,o,A);return{min:Math.pow(10,i+l.min),max:Math.pow(10,s-l.max)}}function TH(r,t){return t&&(t[r.id]||t[r.axis])||{}}function VB(r,t,e,n,i){let s=e[n];if(s==="original"){const a=r.originalScaleLimits[t.id][n];s=Oe(a.options,a.scale)}return Oe(s,i)}function FH(r,t,e){const n=r.getValueForPixel(t),i=r.getValueForPixel(e);return{min:Math.min(n,i),max:Math.max(n,i)}}function LH(r,{min:t,max:e,minLimit:n,maxLimit:i},s){const a=(r-e+t)/2;t-=a,e+=a;const o=s.min.options??s.min.scale,A=s.max.options??s.max.scale,l=r/1e6;return Kc(t,o,l)&&(t=o),Kc(e,A,l)&&(e=A),t<n?(t=n,e=Math.min(n+r,i)):e>i&&(e=i,t=Math.max(i-r,n)),{min:t,max:e}}function wu(r,{min:t,max:e},n,i=!1){const s=En(r.chart),{options:a}=r,o=TH(r,n),{minRange:A=0}=o,l=VB(s,r,o,"min",-1/0),c=VB(s,r,o,"max",1/0);if(i==="pan"&&(t<l||e>c))return!0;const u=r.max-r.min,h=i?Math.max(e-t,A):u;if(i&&h===A&&u<=A)return!0;const d=LH(h,{min:t,max:e,minLimit:l,maxLimit:c},s.originalScaleLimits[r.id]);return a.min=d.min,a.max=d.max,s.updatedScaleLimits[r.id]=d,r.parse(d.min)!==r.min||r.parse(d.max)!==r.max}function UH(r,t,e,n){const i=YI(r,t,e),s={min:r.min+i.min,max:r.max-i.max};return wu(r,s,n,!0)}function PH(r,t,e,n){const i=IH(r,t,e);return wu(r,i,n,!0)}function NH(r,t,e,n){wu(r,FH(r,t,e),n,!0)}const $B=r=>r===0||isNaN(r)?0:r<0?Math.min(Math.round(r),-1):Math.max(Math.round(r),1);function DH(r){const e=r.getLabels().length-1;r.min>0&&(r.min-=1),r.max<e&&(r.max+=1)}function MH(r,t,e,n){const i=YI(r,t,e);r.min===r.max&&t<1&&DH(r);const s={min:r.min+$B(i.min),max:r.max-$B(i.max)};return wu(r,s,n,!0)}function RH(r){return r.isHorizontal()?r.width:r.height}function QH(r,t,e){const i=r.getLabels().length-1;let{min:s,max:a}=r;const o=Math.max(a-s,1),A=Math.round(RH(r)/Math.max(o,10)),l=Math.round(Math.abs(t/A));let c;return t<-A?(a=Math.min(a+l,i),s=o===1?a:a-o,c=a===i):t>A&&(s=Math.max(0,s-l),a=o===1?s:s+o,c=s===0),wu(r,{min:s,max:a},e)||c}const OH={second:500,minute:30*1e3,hour:1800*1e3,day:720*60*1e3,week:3.5*24*60*60*1e3,month:360*60*60*1e3,quarter:1440*60*60*1e3,year:4368*60*60*1e3};function XI(r,t,e,n=!1){const{min:i,max:s,options:a}=r,o=a.time&&a.time.round,A=OH[o]||0,l=r.getValueForPixel(r.getPixelForValue(i+A)-t),c=r.getValueForPixel(r.getPixelForValue(s+A)-t);return isNaN(l)||isNaN(c)?!0:wu(r,{min:l,max:c},e,n?"pan":!1)}function jB(r,t,e){return XI(r,t,e,!0)}const n1={category:MH,default:UH,logarithmic:PH},i1={default:NH},s1={category:QH,default:XI,logarithmic:jB,timeseries:jB};function HH(r,t,e){const{id:n,options:{min:i,max:s}}=r;if(!t[n]||!e[n])return!0;const a=e[n];return a.min!==i||a.max!==s}function GB(r,t){Ar(r,(e,n)=>{t[n]||delete r[n]})}function Hd(r,t){const{scales:e}=r,{originalScaleLimits:n,updatedScaleLimits:i}=t;return Ar(e,function(s){HH(s,n,i)&&(n[s.id]={min:{scale:s.min,options:s.options.min},max:{scale:s.max,options:s.options.max}})}),GB(n,e),GB(i,e),n}function KB(r,t,e,n){const i=n1[r.type]||n1.default;Re(i,[r,t,e,n])}function zB(r,t,e,n){const i=i1[r.type]||i1.default;Re(i,[r,t,e,n])}function VH(r){const t=r.chartArea;return{x:(t.left+t.right)/2,y:(t.top+t.bottom)/2}}function e2(r,t,e="none",n="api"){const{x:i=1,y:s=1,focalPoint:a=VH(r)}=typeof t=="number"?{x:t,y:t}:t,o=En(r),{options:{limits:A,zoom:l}}=o;Hd(r,o);const c=i!==1,u=s!==1,h=zI(l,a,r);Ar(h||r.scales,function(d){d.isHorizontal()&&c?KB(d,i,a,A):!d.isHorizontal()&&u&&KB(d,s,a,A)}),r.update(e),Re(l.onZoom,[{chart:r,trigger:n}])}function JI(r,t,e,n="none",i="api"){const s=En(r),{options:{limits:a,zoom:o}}=s,{mode:A="xy"}=o;Hd(r,s);const l=Kl(A,"x",r),c=Kl(A,"y",r);Ar(r.scales,function(u){u.isHorizontal()&&l?zB(u,t.x,e.x,a):!u.isHorizontal()&&c&&zB(u,t.y,e.y,a)}),r.update(n),Re(o.onZoom,[{chart:r,trigger:i}])}function $H(r,t,e,n="none",i="api"){var o;const s=En(r);Hd(r,s);const a=r.scales[t];wu(a,e,void 0,!0),r.update(n),Re((o=s.options.zoom)==null?void 0:o.onZoom,[{chart:r,trigger:i}])}function jH(r,t="default"){const e=En(r),n=Hd(r,e);Ar(r.scales,function(i){const s=i.options;n[i.id]?(s.min=n[i.id].min.options,s.max=n[i.id].max.options):(delete s.min,delete s.max),delete e.updatedScaleLimits[i.id]}),r.update(t),Re(e.options.zoom.onZoomComplete,[{chart:r}])}function GH(r,t){const e=r.originalScaleLimits[t];if(!e)return;const{min:n,max:i}=e;return Oe(i.options,i.scale)-Oe(n.options,n.scale)}function KH(r){const t=En(r);let e=1,n=1;return Ar(r.scales,function(i){const s=GH(t,i.id);if(s){const a=Math.round(s/(i.max-i.min)*100)/100;e=Math.min(e,a),n=Math.max(n,a)}}),e<1?e:n}function qB(r,t,e,n){const{panDelta:i}=n,s=i[r.id]||0;Pa(s)===Pa(t)&&(t+=s);const a=s1[r.type]||s1.default;Re(a,[r,t,e])?i[r.id]=0:i[r.id]=t}function ZI(r,t,e,n="none"){const{x:i=0,y:s=0}=typeof t=="number"?{x:t,y:t}:t,a=En(r),{options:{pan:o,limits:A}}=a,{onPan:l}=o||{};Hd(r,a);const c=i!==0,u=s!==0;Ar(e||r.scales,function(h){h.isHorizontal()&&c?qB(h,i,A,a):!h.isHorizontal()&&u&&qB(h,s,A,a)}),r.update(n),Re(l,[{chart:r}])}function tT(r){const t=En(r);Hd(r,t);const e={};for(const n of Object.keys(r.scales)){const{min:i,max:s}=t.originalScaleLimits[n]||{min:{},max:{}};e[n]={min:i.scale,max:s.scale}}return e}function zH(r){const t=En(r),e={};for(const n of Object.keys(r.scales))e[n]=t.updatedScaleLimits[n];return e}function qH(r){const t=tT(r);for(const e of Object.keys(r.scales)){const{min:n,max:i}=t[e];if(n!==void 0&&r.scales[e].min!==n||i!==void 0&&r.scales[e].max!==i)return!0}return!1}function WB(r){const t=En(r);return t.panning||t.dragging}const YB=(r,t,e)=>Math.min(e,Math.max(t,r));function js(r,t){const{handlers:e}=En(r),n=e[t];n&&n.target&&(n.target.removeEventListener(t,n),delete e[t])}function lf(r,t,e,n){const{handlers:i,options:s}=En(r),a=i[e];if(a&&a.target===t)return;js(r,e),i[e]=A=>n(r,A,s),i[e].target=t;const o=e==="wheel"?!1:void 0;t.addEventListener(e,i[e],{passive:o})}function WH(r,t){const e=En(r);e.dragStart&&(e.dragging=!0,e.dragEnd=t,r.update("none"))}function YH(r,t){const e=En(r);!e.dragStart||t.key!=="Escape"||(js(r,"keydown"),e.dragging=!1,e.dragStart=e.dragEnd=null,r.update("none"))}function a1(r,t){if(r.target!==t.canvas){const e=t.canvas.getBoundingClientRect();return{x:r.clientX-e.left,y:r.clientY-e.top}}return Bo(r,t)}function eT(r,t,e){const{onZoomStart:n,onZoomRejected:i}=e;if(n){const s=a1(t,r);if(Re(n,[{chart:r,event:t,point:s}])===!1)return Re(i,[{chart:r,event:t}]),!1}}function XH(r,t){if(r.legend){const s=Bo(t,r);if(ko(s,r.legend))return}const e=En(r),{pan:n,zoom:i={}}=e.options;if(t.button!==0||KI(Pf(n),t)||t2(Pf(i.drag),t))return Re(i.onZoomRejected,[{chart:r,event:t}]);eT(r,t,i)!==!1&&(e.dragStart=t,lf(r,r.canvas.ownerDocument,"mousemove",WH),lf(r,window.document,"keydown",YH))}function JH({begin:r,end:t},e){let n=t.x-r.x,i=t.y-r.y;const s=Math.abs(n/i);s>e?n=Math.sign(n)*Math.abs(i*e):s<e&&(i=Math.sign(i)*Math.abs(n/e)),t.x=r.x+n,t.y=r.y+i}function XB(r,t,e,{min:n,max:i,prop:s}){r[n]=YB(Math.min(e.begin[s],e.end[s]),t[n],t[i]),r[i]=YB(Math.max(e.begin[s],e.end[s]),t[n],t[i])}function ZH(r,t,e){const n={begin:a1(t.dragStart,r),end:a1(t.dragEnd,r)};if(e){const i=r.chartArea.width/r.chartArea.height;JH(n,i)}return n}function rT(r,t,e,n){const i=Kl(t,"x",r),s=Kl(t,"y",r),{top:a,left:o,right:A,bottom:l,width:c,height:u}=r.chartArea,h={top:a,left:o,right:A,bottom:l},d=ZH(r,e,n&&i&&s);i&&XB(h,r.chartArea,d,{min:"left",max:"right",prop:"x"}),s&&XB(h,r.chartArea,d,{min:"top",max:"bottom",prop:"y"});const m=h.right-h.left,f=h.bottom-h.top;return{...h,width:m,height:f,zoomX:i&&m?1+(c-m)/c:1,zoomY:s&&f?1+(u-f)/u:1}}function t7(r,t){const e=En(r);if(!e.dragStart)return;js(r,"mousemove");const{mode:n,onZoomComplete:i,drag:{threshold:s=0,maintainAspectRatio:a}}=e.options.zoom,o=rT(r,n,{dragStart:e.dragStart,dragEnd:t},a),A=Kl(n,"x",r)?o.width:0,l=Kl(n,"y",r)?o.height:0,c=Math.sqrt(A*A+l*l);if(e.dragStart=e.dragEnd=null,c<=s){e.dragging=!1,r.update("none");return}JI(r,{x:o.left,y:o.top},{x:o.right,y:o.bottom},"zoom","drag"),e.dragging=!1,e.filterNextClick=!0,Re(i,[{chart:r}])}function e7(r,t,e){if(t2(Pf(e.wheel),t)){Re(e.onZoomRejected,[{chart:r,event:t}]);return}if(eT(r,t,e)!==!1&&(t.cancelable&&t.preventDefault(),t.deltaY!==void 0))return!0}function r7(r,t){const{handlers:{onZoomComplete:e},options:{zoom:n}}=En(r);if(!e7(r,t,n))return;const i=t.target.getBoundingClientRect(),s=n.wheel.speed,a=t.deltaY>=0?2-1/(1-s):1+s,o={x:a,y:a,focalPoint:{x:t.clientX-i.left,y:t.clientY-i.top}};e2(r,o,"zoom","wheel"),Re(e,[{chart:r}])}function n7(r,t,e,n){e&&(En(r).handlers[t]=EH(()=>Re(e,[{chart:r}]),n))}function i7(r,t){const e=r.canvas,{wheel:n,drag:i,onZoomComplete:s}=t.zoom;n.enabled?(lf(r,e,"wheel",r7),n7(r,"onZoomComplete",s,250)):js(r,"wheel"),i.enabled?(lf(r,e,"mousedown",XH),lf(r,e.ownerDocument,"mouseup",t7)):(js(r,"mousedown"),js(r,"mousemove"),js(r,"mouseup"),js(r,"keydown"))}function s7(r){js(r,"mousedown"),js(r,"mousemove"),js(r,"mouseup"),js(r,"wheel"),js(r,"click"),js(r,"keydown")}function a7(r,t){return function(e,n){const{pan:i,zoom:s={}}=t.options;if(!i||!i.enabled)return!1;const a=n&&n.srcEvent;return a&&!t.panning&&n.pointerType==="mouse"&&(t2(Pf(i),a)||KI(Pf(s.drag),a))?(Re(i.onPanRejected,[{chart:r,event:n}]),!1):!0}}function o7(r,t){const e=Math.abs(r.clientX-t.clientX),n=Math.abs(r.clientY-t.clientY),i=e/n;let s,a;return i>.3&&i<1.7?s=a=!0:e>n?s=!0:a=!0,{x:s,y:a}}function nT(r,t,e){if(t.scale){const{center:n,pointers:i}=e,s=1/t.scale*e.scale,a=e.target.getBoundingClientRect(),o=o7(i[0],i[1]),A=t.options.zoom.mode,l={x:o.x&&Kl(A,"x",r)?s:1,y:o.y&&Kl(A,"y",r)?s:1,focalPoint:{x:n.x-a.left,y:n.y-a.top}};e2(r,l,"zoom","pinch"),t.scale=e.scale}}function A7(r,t,e){if(t.options.zoom.pinch.enabled){const n=Bo(e,r);Re(t.options.zoom.onZoomStart,[{chart:r,event:e,point:n}])===!1?(t.scale=null,Re(t.options.zoom.onZoomRejected,[{chart:r,event:e}])):t.scale=1}}function l7(r,t,e){t.scale&&(nT(r,t,e),t.scale=null,Re(t.options.zoom.onZoomComplete,[{chart:r}]))}function iT(r,t,e){const n=t.delta;n&&(t.panning=!0,ZI(r,{x:e.deltaX-n.x,y:e.deltaY-n.y},t.panScales),t.delta={x:e.deltaX,y:e.deltaY})}function c7(r,t,e){const{enabled:n,onPanStart:i,onPanRejected:s}=t.options.pan;if(!n)return;const a=e.target.getBoundingClientRect(),o={x:e.center.x-a.left,y:e.center.y-a.top};if(Re(i,[{chart:r,event:e,point:o}])===!1)return Re(s,[{chart:r,event:e}]);t.panScales=zI(t.options.pan,o,r),t.delta={x:0,y:0},iT(r,t,e)}function u7(r,t){t.delta=null,t.panning&&(t.panning=!1,t.filterNextClick=!0,Re(t.options.pan.onPanComplete,[{chart:r}]))}const o1=new WeakMap;function JB(r,t){const e=En(r),n=r.canvas,{pan:i,zoom:s}=t,a=new Af.Manager(n);s&&s.pinch.enabled&&(a.add(new Af.Pinch),a.on("pinchstart",o=>A7(r,e,o)),a.on("pinch",o=>nT(r,e,o)),a.on("pinchend",o=>l7(r,e,o))),i&&i.enabled&&(a.add(new Af.Pan({threshold:i.threshold,enable:a7(r,e)})),a.on("panstart",o=>c7(r,e,o)),a.on("panmove",o=>iT(r,e,o)),a.on("panend",()=>u7(r,e))),o1.set(r,a)}function ZB(r){const t=o1.get(r);t&&(t.remove("pinchstart"),t.remove("pinch"),t.remove("pinchend"),t.remove("panstart"),t.remove("pan"),t.remove("panend"),t.destroy(),o1.delete(r))}function d7(r,t){var a,o,A,l;const{pan:e,zoom:n}=r,{pan:i,zoom:s}=t;return((o=(a=n==null?void 0:n.zoom)==null?void 0:a.pinch)==null?void 0:o.enabled)!==((l=(A=s==null?void 0:s.zoom)==null?void 0:A.pinch)==null?void 0:l.enabled)||(e==null?void 0:e.enabled)!==(i==null?void 0:i.enabled)||(e==null?void 0:e.threshold)!==(i==null?void 0:i.threshold)}var h7="2.2.0";function vp(r,t,e){const n=e.zoom.drag,{dragStart:i,dragEnd:s}=En(r);if(n.drawTime!==t||!s)return;const{left:a,top:o,width:A,height:l}=rT(r,e.zoom.mode,{dragStart:i,dragEnd:s},n.maintainAspectRatio),c=r.ctx;c.save(),c.beginPath(),c.fillStyle=n.backgroundColor||"rgba(225,225,225,0.3)",c.fillRect(a,o,A,l),n.borderWidth>0&&(c.lineWidth=n.borderWidth,c.strokeStyle=n.borderColor||"rgba(225,225,225)",c.strokeRect(a,o,A,l)),c.restore()}var sT={id:"zoom",version:h7,defaults:{pan:{enabled:!1,mode:"xy",threshold:10,modifierKey:null},zoom:{wheel:{enabled:!1,speed:.1,modifierKey:null},drag:{enabled:!1,drawTime:"beforeDatasetsDraw",modifierKey:null},pinch:{enabled:!1},mode:"xy"}},start:function(r,t,e){const n=En(r);n.options=e,Object.prototype.hasOwnProperty.call(e.zoom,"enabled")&&console.warn("The option `zoom.enabled` is no longer supported. Please use `zoom.wheel.enabled`, `zoom.drag.enabled`, or `zoom.pinch.enabled`."),(Object.prototype.hasOwnProperty.call(e.zoom,"overScaleMode")||Object.prototype.hasOwnProperty.call(e.pan,"overScaleMode"))&&console.warn("The option `overScaleMode` is deprecated. Please use `scaleMode` instead (and update `mode` as desired)."),Af&&JB(r,e),r.pan=(i,s,a)=>ZI(r,i,s,a),r.zoom=(i,s)=>e2(r,i,s),r.zoomRect=(i,s,a)=>JI(r,i,s,a),r.zoomScale=(i,s,a)=>$H(r,i,s,a),r.resetZoom=i=>jH(r,i),r.getZoomLevel=()=>KH(r),r.getInitialScaleBounds=()=>tT(r),r.getZoomedScaleBounds=()=>zH(r),r.isZoomedOrPanned=()=>qH(r),r.isZoomingOrPanning=()=>WB(r)},beforeEvent(r,{event:t}){if(WB(r))return!1;if(t.type==="click"||t.type==="mouseup"){const e=En(r);if(e.filterNextClick)return e.filterNextClick=!1,!1}},beforeUpdate:function(r,t,e){const n=En(r),i=n.options;n.options=e,d7(i,e)&&(ZB(r),JB(r,e)),i7(r,e)},beforeDatasetsDraw(r,t,e){vp(r,"beforeDatasetsDraw",e)},afterDatasetsDraw(r,t,e){vp(r,"afterDatasetsDraw",e)},beforeDraw(r,t,e){vp(r,"beforeDraw",e)},afterDraw(r,t,e){vp(r,"afterDraw",e)},stop:function(r){s7(r),Af&&ZB(r),kH(r)},panFunctions:s1,zoomFunctions:n1,zoomRectFunctions:i1};/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var A1=function(r,t){return A1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},A1(r,t)};function no(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");A1(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var l1=function(){return l1=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},l1.apply(this,arguments)};function xs(r,t,e,n){function i(s){return s instanceof e?s:new e(function(a){a(s)})}return new(e||(e=Promise))(function(s,a){function o(c){try{l(n.next(c))}catch(u){a(u)}}function A(c){try{l(n.throw(c))}catch(u){a(u)}}function l(c){c.done?s(c.value):i(c.value).then(o,A)}l((n=n.apply(r,[])).next())})}function ss(r,t){var e={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,a;return a={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(l){return function(c){return A([l,c])}}function A(l){if(n)throw new TypeError("Generator is already executing.");for(;e;)try{if(n=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return e.label++,{value:l[1],done:!1};case 5:e.label++,i=l[1],l=[0];continue;case 7:l=e.ops.pop(),e.trys.pop();continue;default:if(s=e.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){e=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){e.label=l[1];break}if(l[0]===6&&e.label<s[1]){e.label=s[1],s=l;break}if(s&&e.label<s[2]){e.label=s[2],e.ops.push(l);break}s[2]&&e.ops.pop(),e.trys.pop();continue}l=t.call(r,e)}catch(c){l=[6,c],i=0}finally{n=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function xp(r,t,e){if(arguments.length===2)for(var n=0,i=t.length,s;n<i;n++)(s||!(n in t))&&(s||(s=Array.prototype.slice.call(t,0,n)),s[n]=t[n]);return r.concat(s||t)}var LA=(function(){function r(t,e,n,i){this.left=t,this.top=e,this.width=n,this.height=i}return r.prototype.add=function(t,e,n,i){return new r(this.left+t,this.top+e,this.width+n,this.height+i)},r.fromClientRect=function(t,e){return new r(e.left+t.windowBounds.left,e.top+t.windowBounds.top,e.width,e.height)},r.fromDOMRectList=function(t,e){var n=Array.from(e).find(function(i){return i.width!==0});return n?new r(n.left+t.windowBounds.left,n.top+t.windowBounds.top,n.width,n.height):r.EMPTY},r.EMPTY=new r(0,0,0,0),r})(),eb=function(r,t){return LA.fromClientRect(r,t.getBoundingClientRect())},f7=function(r){var t=r.body,e=r.documentElement;if(!t||!e)throw new Error("Unable to get document size");var n=Math.max(Math.max(t.scrollWidth,e.scrollWidth),Math.max(t.offsetWidth,e.offsetWidth),Math.max(t.clientWidth,e.clientWidth)),i=Math.max(Math.max(t.scrollHeight,e.scrollHeight),Math.max(t.offsetHeight,e.offsetHeight),Math.max(t.clientHeight,e.clientHeight));return new LA(0,0,n,i)},rb=function(r){for(var t=[],e=0,n=r.length;e<n;){var i=r.charCodeAt(e++);if(i>=55296&&i<=56319&&e<n){var s=r.charCodeAt(e++);(s&64512)===56320?t.push(((i&1023)<<10)+(s&1023)+65536):(t.push(i),e--)}else t.push(i)}return t},Kn=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,r);var e=r.length;if(!e)return"";for(var n=[],i=-1,s="";++i<e;){var a=r[i];a<=65535?n.push(a):(a-=65536,n.push((a>>10)+55296,a%1024+56320)),(i+1===e||n.length>16384)&&(s+=String.fromCharCode.apply(String,n),n.length=0)}return s},t5="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",g7=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var _p=0;_p<t5.length;_p++)g7[t5.charCodeAt(_p)]=_p;var e5="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Rh=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Bp=0;Bp<e5.length;Bp++)Rh[e5.charCodeAt(Bp)]=Bp;var p7=function(r){var t=r.length*.75,e=r.length,n,i=0,s,a,o,A;r[r.length-1]==="="&&(t--,r[r.length-2]==="="&&t--);var l=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(t):new Array(t),c=Array.isArray(l)?l:new Uint8Array(l);for(n=0;n<e;n+=4)s=Rh[r.charCodeAt(n)],a=Rh[r.charCodeAt(n+1)],o=Rh[r.charCodeAt(n+2)],A=Rh[r.charCodeAt(n+3)],c[i++]=s<<2|a>>4,c[i++]=(a&15)<<4|o>>2,c[i++]=(o&3)<<6|A&63;return l},m7=function(r){for(var t=r.length,e=[],n=0;n<t;n+=2)e.push(r[n+1]<<8|r[n]);return e},b7=function(r){for(var t=r.length,e=[],n=0;n<t;n+=4)e.push(r[n+3]<<24|r[n+2]<<16|r[n+1]<<8|r[n]);return e},Wc=5,r2=11,Ey=2,y7=r2-Wc,aT=65536>>Wc,w7=1<<Wc,Sy=w7-1,v7=1024>>Wc,x7=aT+v7,_7=x7,B7=32,C7=_7+B7,E7=65536>>r2,S7=1<<y7,k7=S7-1,r5=function(r,t,e){return r.slice?r.slice(t,e):new Uint16Array(Array.prototype.slice.call(r,t,e))},I7=function(r,t,e){return r.slice?r.slice(t,e):new Uint32Array(Array.prototype.slice.call(r,t,e))},T7=function(r,t){var e=p7(r),n=Array.isArray(e)?b7(e):new Uint32Array(e),i=Array.isArray(e)?m7(e):new Uint16Array(e),s=24,a=r5(i,s/2,n[4]/2),o=n[5]===2?r5(i,(s+n[4])/2):I7(n,Math.ceil((s+n[4])/4));return new F7(n[0],n[1],n[2],n[3],a,o)},F7=(function(){function r(t,e,n,i,s,a){this.initialValue=t,this.errorValue=e,this.highStart=n,this.highValueIndex=i,this.index=s,this.data=a}return r.prototype.get=function(t){var e;if(t>=0){if(t<55296||t>56319&&t<=65535)return e=this.index[t>>Wc],e=(e<<Ey)+(t&Sy),this.data[e];if(t<=65535)return e=this.index[aT+(t-55296>>Wc)],e=(e<<Ey)+(t&Sy),this.data[e];if(t<this.highStart)return e=C7-E7+(t>>r2),e=this.index[e],e+=t>>Wc&k7,e=this.index[e],e=(e<<Ey)+(t&Sy),this.data[e];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},r})(),n5="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",L7=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Cp=0;Cp<n5.length;Cp++)L7[n5.charCodeAt(Cp)]=Cp;var U7="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",i5=50,P7=1,oT=2,AT=3,N7=4,D7=5,s5=7,lT=8,a5=9,El=10,c1=11,o5=12,u1=13,M7=14,Qh=15,d1=16,Ep=17,Eh=18,R7=19,A5=20,h1=21,Sh=22,ky=23,Mu=24,ca=25,Oh=26,Hh=27,Ru=28,Q7=29,Uc=30,O7=31,Sp=32,kp=33,f1=34,g1=35,p1=36,Nf=37,m1=38,_m=39,Bm=40,Iy=41,cT=42,H7=43,V7=[9001,65288],uT="!",hr="",Ip="",b1=T7(U7),aA=[Uc,p1],y1=[P7,oT,AT,D7],dT=[El,lT],l5=[Hh,Oh],$7=y1.concat(dT),c5=[m1,_m,Bm,f1,g1],j7=[Qh,u1],G7=function(r,t){t===void 0&&(t="strict");var e=[],n=[],i=[];return r.forEach(function(s,a){var o=b1.get(s);if(o>i5?(i.push(!0),o-=i5):i.push(!1),["normal","auto","loose"].indexOf(t)!==-1&&[8208,8211,12316,12448].indexOf(s)!==-1)return n.push(a),e.push(d1);if(o===N7||o===c1){if(a===0)return n.push(a),e.push(Uc);var A=e[a-1];return $7.indexOf(A)===-1?(n.push(n[a-1]),e.push(A)):(n.push(a),e.push(Uc))}if(n.push(a),o===O7)return e.push(t==="strict"?h1:Nf);if(o===cT||o===Q7)return e.push(Uc);if(o===H7)return s>=131072&&s<=196605||s>=196608&&s<=262141?e.push(Nf):e.push(Uc);e.push(o)}),[n,e,i]},Ty=function(r,t,e,n){var i=n[e];if(Array.isArray(r)?r.indexOf(i)!==-1:r===i)for(var s=e;s<=n.length;){s++;var a=n[s];if(a===t)return!0;if(a!==El)break}if(i===El)for(var s=e;s>0;){s--;var o=n[s];if(Array.isArray(r)?r.indexOf(o)!==-1:r===o)for(var A=e;A<=n.length;){A++;var a=n[A];if(a===t)return!0;if(a!==El)break}if(o!==El)break}return!1},u5=function(r,t){for(var e=r;e>=0;){var n=t[e];if(n===El)e--;else return n}return 0},K7=function(r,t,e,n,i){if(e[n]===0)return hr;var s=n-1;if(Array.isArray(i)&&i[s]===!0)return hr;var a=s-1,o=s+1,A=t[s],l=a>=0?t[a]:0,c=t[o];if(A===oT&&c===AT)return hr;if(y1.indexOf(A)!==-1)return uT;if(y1.indexOf(c)!==-1||dT.indexOf(c)!==-1)return hr;if(u5(s,t)===lT)return Ip;if(b1.get(r[s])===c1||(A===Sp||A===kp)&&b1.get(r[o])===c1||A===s5||c===s5||A===a5||[El,u1,Qh].indexOf(A)===-1&&c===a5||[Ep,Eh,R7,Mu,Ru].indexOf(c)!==-1||u5(s,t)===Sh||Ty(ky,Sh,s,t)||Ty([Ep,Eh],h1,s,t)||Ty(o5,o5,s,t))return hr;if(A===El)return Ip;if(A===ky||c===ky)return hr;if(c===d1||A===d1)return Ip;if([u1,Qh,h1].indexOf(c)!==-1||A===M7||l===p1&&j7.indexOf(A)!==-1||A===Ru&&c===p1||c===A5||aA.indexOf(c)!==-1&&A===ca||aA.indexOf(A)!==-1&&c===ca||A===Hh&&[Nf,Sp,kp].indexOf(c)!==-1||[Nf,Sp,kp].indexOf(A)!==-1&&c===Oh||aA.indexOf(A)!==-1&&l5.indexOf(c)!==-1||l5.indexOf(A)!==-1&&aA.indexOf(c)!==-1||[Hh,Oh].indexOf(A)!==-1&&(c===ca||[Sh,Qh].indexOf(c)!==-1&&t[o+1]===ca)||[Sh,Qh].indexOf(A)!==-1&&c===ca||A===ca&&[ca,Ru,Mu].indexOf(c)!==-1)return hr;if([ca,Ru,Mu,Ep,Eh].indexOf(c)!==-1)for(var u=s;u>=0;){var h=t[u];if(h===ca)return hr;if([Ru,Mu].indexOf(h)!==-1)u--;else break}if([Hh,Oh].indexOf(c)!==-1)for(var u=[Ep,Eh].indexOf(A)!==-1?a:s;u>=0;){var h=t[u];if(h===ca)return hr;if([Ru,Mu].indexOf(h)!==-1)u--;else break}if(m1===A&&[m1,_m,f1,g1].indexOf(c)!==-1||[_m,f1].indexOf(A)!==-1&&[_m,Bm].indexOf(c)!==-1||[Bm,g1].indexOf(A)!==-1&&c===Bm||c5.indexOf(A)!==-1&&[A5,Oh].indexOf(c)!==-1||c5.indexOf(c)!==-1&&A===Hh||aA.indexOf(A)!==-1&&aA.indexOf(c)!==-1||A===Mu&&aA.indexOf(c)!==-1||aA.concat(ca).indexOf(A)!==-1&&c===Sh&&V7.indexOf(r[o])===-1||aA.concat(ca).indexOf(c)!==-1&&A===Eh)return hr;if(A===Iy&&c===Iy){for(var d=e[s],m=1;d>0&&(d--,t[d]===Iy);)m++;if(m%2!==0)return hr}return A===Sp&&c===kp?hr:Ip},z7=function(r,t){t||(t={lineBreak:"normal",wordBreak:"normal"});var e=G7(r,t.lineBreak),n=e[0],i=e[1],s=e[2];(t.wordBreak==="break-all"||t.wordBreak==="break-word")&&(i=i.map(function(o){return[ca,Uc,cT].indexOf(o)!==-1?Nf:o}));var a=t.wordBreak==="keep-all"?s.map(function(o,A){return o&&r[A]>=19968&&r[A]<=40959}):void 0;return[n,i,a]},q7=(function(){function r(t,e,n,i){this.codePoints=t,this.required=e===uT,this.start=n,this.end=i}return r.prototype.slice=function(){return Kn.apply(void 0,this.codePoints.slice(this.start,this.end))},r})(),W7=function(r,t){var e=rb(r),n=z7(e,t),i=n[0],s=n[1],a=n[2],o=e.length,A=0,l=0;return{next:function(){if(l>=o)return{done:!0,value:null};for(var c=hr;l<o&&(c=K7(e,s,i,++l,a))===hr;);if(c!==hr||l===o){var u=new q7(e,c,A,l);return A=l,{value:u,done:!1}}return{done:!0,value:null}}}},Y7=1,X7=2,og=4,d5=8,a0=10,h5=47,cf=92,J7=9,Z7=32,Tp=34,kh=61,t9=35,e9=36,r9=37,Fp=39,Lp=40,Ih=41,n9=95,$s=45,i9=33,s9=60,a9=62,o9=64,A9=91,l9=93,c9=61,u9=123,Up=63,d9=125,f5=124,h9=126,f9=128,g5=65533,Fy=42,Qc=43,g9=44,p9=58,m9=59,Df=46,b9=0,y9=8,w9=11,v9=14,x9=31,_9=127,bo=-1,hT=48,fT=97,gT=101,B9=102,C9=117,E9=122,pT=65,mT=69,bT=70,S9=85,k9=90,ls=function(r){return r>=hT&&r<=57},I9=function(r){return r>=55296&&r<=57343},Qu=function(r){return ls(r)||r>=pT&&r<=bT||r>=fT&&r<=B9},T9=function(r){return r>=fT&&r<=E9},F9=function(r){return r>=pT&&r<=k9},L9=function(r){return T9(r)||F9(r)},U9=function(r){return r>=f9},Pp=function(r){return r===a0||r===J7||r===Z7},o0=function(r){return L9(r)||U9(r)||r===n9},p5=function(r){return o0(r)||ls(r)||r===$s},P9=function(r){return r>=b9&&r<=y9||r===w9||r>=v9&&r<=x9||r===_9},pl=function(r,t){return r!==cf?!1:t!==a0},Np=function(r,t,e){return r===$s?o0(t)||pl(t,e):o0(r)?!0:!!(r===cf&&pl(r,t))},Ly=function(r,t,e){return r===Qc||r===$s?ls(t)?!0:t===Df&&ls(e):ls(r===Df?t:r)},N9=function(r){var t=0,e=1;(r[t]===Qc||r[t]===$s)&&(r[t]===$s&&(e=-1),t++);for(var n=[];ls(r[t]);)n.push(r[t++]);var i=n.length?parseInt(Kn.apply(void 0,n),10):0;r[t]===Df&&t++;for(var s=[];ls(r[t]);)s.push(r[t++]);var a=s.length,o=a?parseInt(Kn.apply(void 0,s),10):0;(r[t]===mT||r[t]===gT)&&t++;var A=1;(r[t]===Qc||r[t]===$s)&&(r[t]===$s&&(A=-1),t++);for(var l=[];ls(r[t]);)l.push(r[t++]);var c=l.length?parseInt(Kn.apply(void 0,l),10):0;return e*(i+o*Math.pow(10,-a))*Math.pow(10,A*c)},D9={type:2},M9={type:3},R9={type:4},Q9={type:13},O9={type:8},H9={type:21},V9={type:9},$9={type:10},j9={type:11},G9={type:12},K9={type:14},Dp={type:23},z9={type:1},q9={type:25},W9={type:24},Y9={type:26},X9={type:27},J9={type:28},Z9={type:29},tV={type:31},w1={type:32},yT=(function(){function r(){this._value=[]}return r.prototype.write=function(t){this._value=this._value.concat(rb(t))},r.prototype.read=function(){for(var t=[],e=this.consumeToken();e!==w1;)t.push(e),e=this.consumeToken();return t},r.prototype.consumeToken=function(){var t=this.consumeCodePoint();switch(t){case Tp:return this.consumeStringToken(Tp);case t9:var e=this.peekCodePoint(0),n=this.peekCodePoint(1),i=this.peekCodePoint(2);if(p5(e)||pl(n,i)){var s=Np(e,n,i)?X7:Y7,a=this.consumeName();return{type:5,value:a,flags:s}}break;case e9:if(this.peekCodePoint(0)===kh)return this.consumeCodePoint(),Q9;break;case Fp:return this.consumeStringToken(Fp);case Lp:return D9;case Ih:return M9;case Fy:if(this.peekCodePoint(0)===kh)return this.consumeCodePoint(),K9;break;case Qc:if(Ly(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case g9:return R9;case $s:var o=t,A=this.peekCodePoint(0),l=this.peekCodePoint(1);if(Ly(o,A,l))return this.reconsumeCodePoint(t),this.consumeNumericToken();if(Np(o,A,l))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();if(A===$s&&l===a9)return this.consumeCodePoint(),this.consumeCodePoint(),W9;break;case Df:if(Ly(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case h5:if(this.peekCodePoint(0)===Fy)for(this.consumeCodePoint();;){var c=this.consumeCodePoint();if(c===Fy&&(c=this.consumeCodePoint(),c===h5))return this.consumeToken();if(c===bo)return this.consumeToken()}break;case p9:return Y9;case m9:return X9;case s9:if(this.peekCodePoint(0)===i9&&this.peekCodePoint(1)===$s&&this.peekCodePoint(2)===$s)return this.consumeCodePoint(),this.consumeCodePoint(),q9;break;case o9:var u=this.peekCodePoint(0),h=this.peekCodePoint(1),d=this.peekCodePoint(2);if(Np(u,h,d)){var a=this.consumeName();return{type:7,value:a}}break;case A9:return J9;case cf:if(pl(t,this.peekCodePoint(0)))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();break;case l9:return Z9;case c9:if(this.peekCodePoint(0)===kh)return this.consumeCodePoint(),O9;break;case u9:return j9;case d9:return G9;case C9:case S9:var m=this.peekCodePoint(0),f=this.peekCodePoint(1);return m===Qc&&(Qu(f)||f===Up)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(t),this.consumeIdentLikeToken();case f5:if(this.peekCodePoint(0)===kh)return this.consumeCodePoint(),V9;if(this.peekCodePoint(0)===f5)return this.consumeCodePoint(),H9;break;case h9:if(this.peekCodePoint(0)===kh)return this.consumeCodePoint(),$9;break;case bo:return w1}return Pp(t)?(this.consumeWhiteSpace(),tV):ls(t)?(this.reconsumeCodePoint(t),this.consumeNumericToken()):o0(t)?(this.reconsumeCodePoint(t),this.consumeIdentLikeToken()):{type:6,value:Kn(t)}},r.prototype.consumeCodePoint=function(){var t=this._value.shift();return typeof t>"u"?-1:t},r.prototype.reconsumeCodePoint=function(t){this._value.unshift(t)},r.prototype.peekCodePoint=function(t){return t>=this._value.length?-1:this._value[t]},r.prototype.consumeUnicodeRangeToken=function(){for(var t=[],e=this.consumeCodePoint();Qu(e)&&t.length<6;)t.push(e),e=this.consumeCodePoint();for(var n=!1;e===Up&&t.length<6;)t.push(e),e=this.consumeCodePoint(),n=!0;if(n){var i=parseInt(Kn.apply(void 0,t.map(function(A){return A===Up?hT:A})),16),s=parseInt(Kn.apply(void 0,t.map(function(A){return A===Up?bT:A})),16);return{type:30,start:i,end:s}}var a=parseInt(Kn.apply(void 0,t),16);if(this.peekCodePoint(0)===$s&&Qu(this.peekCodePoint(1))){this.consumeCodePoint(),e=this.consumeCodePoint();for(var o=[];Qu(e)&&o.length<6;)o.push(e),e=this.consumeCodePoint();var s=parseInt(Kn.apply(void 0,o),16);return{type:30,start:a,end:s}}else return{type:30,start:a,end:a}},r.prototype.consumeIdentLikeToken=function(){var t=this.consumeName();return t.toLowerCase()==="url"&&this.peekCodePoint(0)===Lp?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===Lp?(this.consumeCodePoint(),{type:19,value:t}):{type:20,value:t}},r.prototype.consumeUrlToken=function(){var t=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===bo)return{type:22,value:""};var e=this.peekCodePoint(0);if(e===Fp||e===Tp){var n=this.consumeStringToken(this.consumeCodePoint());return n.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===bo||this.peekCodePoint(0)===Ih)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),Dp)}for(;;){var i=this.consumeCodePoint();if(i===bo||i===Ih)return{type:22,value:Kn.apply(void 0,t)};if(Pp(i))return this.consumeWhiteSpace(),this.peekCodePoint(0)===bo||this.peekCodePoint(0)===Ih?(this.consumeCodePoint(),{type:22,value:Kn.apply(void 0,t)}):(this.consumeBadUrlRemnants(),Dp);if(i===Tp||i===Fp||i===Lp||P9(i))return this.consumeBadUrlRemnants(),Dp;if(i===cf)if(pl(i,this.peekCodePoint(0)))t.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),Dp;else t.push(i)}},r.prototype.consumeWhiteSpace=function(){for(;Pp(this.peekCodePoint(0));)this.consumeCodePoint()},r.prototype.consumeBadUrlRemnants=function(){for(;;){var t=this.consumeCodePoint();if(t===Ih||t===bo)return;pl(t,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},r.prototype.consumeStringSlice=function(t){for(var e=5e4,n="";t>0;){var i=Math.min(e,t);n+=Kn.apply(void 0,this._value.splice(0,i)),t-=i}return this._value.shift(),n},r.prototype.consumeStringToken=function(t){var e="",n=0;do{var i=this._value[n];if(i===bo||i===void 0||i===t)return e+=this.consumeStringSlice(n),{type:0,value:e};if(i===a0)return this._value.splice(0,n),z9;if(i===cf){var s=this._value[n+1];s!==bo&&s!==void 0&&(s===a0?(e+=this.consumeStringSlice(n),n=-1,this._value.shift()):pl(i,s)&&(e+=this.consumeStringSlice(n),e+=Kn(this.consumeEscapedCodePoint()),n=-1))}n++}while(!0)},r.prototype.consumeNumber=function(){var t=[],e=og,n=this.peekCodePoint(0);for((n===Qc||n===$s)&&t.push(this.consumeCodePoint());ls(this.peekCodePoint(0));)t.push(this.consumeCodePoint());n=this.peekCodePoint(0);var i=this.peekCodePoint(1);if(n===Df&&ls(i))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),e=d5;ls(this.peekCodePoint(0));)t.push(this.consumeCodePoint());n=this.peekCodePoint(0),i=this.peekCodePoint(1);var s=this.peekCodePoint(2);if((n===mT||n===gT)&&((i===Qc||i===$s)&&ls(s)||ls(i)))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),e=d5;ls(this.peekCodePoint(0));)t.push(this.consumeCodePoint());return[N9(t),e]},r.prototype.consumeNumericToken=function(){var t=this.consumeNumber(),e=t[0],n=t[1],i=this.peekCodePoint(0),s=this.peekCodePoint(1),a=this.peekCodePoint(2);if(Np(i,s,a)){var o=this.consumeName();return{type:15,number:e,flags:n,unit:o}}return i===r9?(this.consumeCodePoint(),{type:16,number:e,flags:n}):{type:17,number:e,flags:n}},r.prototype.consumeEscapedCodePoint=function(){var t=this.consumeCodePoint();if(Qu(t)){for(var e=Kn(t);Qu(this.peekCodePoint(0))&&e.length<6;)e+=Kn(this.consumeCodePoint());Pp(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(e,16);return n===0||I9(n)||n>1114111?g5:n}return t===bo?g5:t},r.prototype.consumeName=function(){for(var t="";;){var e=this.consumeCodePoint();if(p5(e))t+=Kn(e);else if(pl(e,this.peekCodePoint(0)))t+=Kn(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(e),t}},r})(),wT=(function(){function r(t){this._tokens=t}return r.create=function(t){var e=new yT;return e.write(t),new r(e.read())},r.parseValue=function(t){return r.create(t).parseComponentValue()},r.parseValues=function(t){return r.create(t).parseComponentValues()},r.prototype.parseComponentValue=function(){for(var t=this.consumeToken();t.type===31;)t=this.consumeToken();if(t.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(t);var e=this.consumeComponentValue();do t=this.consumeToken();while(t.type===31);if(t.type===32)return e;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},r.prototype.parseComponentValues=function(){for(var t=[];;){var e=this.consumeComponentValue();if(e.type===32)return t;t.push(e),t.push()}},r.prototype.consumeComponentValue=function(){var t=this.consumeToken();switch(t.type){case 11:case 28:case 2:return this.consumeSimpleBlock(t.type);case 19:return this.consumeFunction(t)}return t},r.prototype.consumeSimpleBlock=function(t){for(var e={type:t,values:[]},n=this.consumeToken();;){if(n.type===32||rV(n,t))return e;this.reconsumeToken(n),e.values.push(this.consumeComponentValue()),n=this.consumeToken()}},r.prototype.consumeFunction=function(t){for(var e={name:t.value,values:[],type:18};;){var n=this.consumeToken();if(n.type===32||n.type===3)return e;this.reconsumeToken(n),e.values.push(this.consumeComponentValue())}},r.prototype.consumeToken=function(){var t=this._tokens.shift();return typeof t>"u"?w1:t},r.prototype.reconsumeToken=function(t){this._tokens.unshift(t)},r})(),Ag=function(r){return r.type===15},Vd=function(r){return r.type===17},Gr=function(r){return r.type===20},eV=function(r){return r.type===0},v1=function(r,t){return Gr(r)&&r.value===t},vT=function(r){return r.type!==31},Sd=function(r){return r.type!==31&&r.type!==4},$o=function(r){var t=[],e=[];return r.forEach(function(n){if(n.type===4){if(e.length===0)throw new Error("Error parsing function args, zero tokens for arg");t.push(e),e=[];return}n.type!==31&&e.push(n)}),e.length&&t.push(e),t},rV=function(r,t){return t===11&&r.type===12||t===28&&r.type===29?!0:t===2&&r.type===3},zl=function(r){return r.type===17||r.type===15},ii=function(r){return r.type===16||zl(r)},xT=function(r){return r.length>1?[r[0],r[1]]:[r[0]]},zi={type:17,number:0,flags:og},n2={type:16,number:50,flags:og},Sl={type:16,number:100,flags:og},Vh=function(r,t,e){var n=r[0],i=r[1];return[on(n,t),on(typeof i<"u"?i:n,e)]},on=function(r,t){if(r.type===16)return r.number/100*t;if(Ag(r))switch(r.unit){case"rem":case"em":return 16*r.number;case"px":default:return r.number}return r.number},_T="deg",BT="grad",CT="rad",ET="turn",nb={name:"angle",parse:function(r,t){if(t.type===15)switch(t.unit){case _T:return Math.PI*t.number/180;case BT:return Math.PI/200*t.number;case CT:return t.number;case ET:return Math.PI*2*t.number}throw new Error("Unsupported angle type")}},ST=function(r){return r.type===15&&(r.unit===_T||r.unit===BT||r.unit===CT||r.unit===ET)},kT=function(r){var t=r.filter(Gr).map(function(e){return e.value}).join(" ");switch(t){case"to bottom right":case"to right bottom":case"left top":case"top left":return[zi,zi];case"to top":case"bottom":return Ta(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[zi,Sl];case"to right":case"left":return Ta(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[Sl,Sl];case"to bottom":case"top":return Ta(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[Sl,zi];case"to left":case"right":return Ta(270)}return 0},Ta=function(r){return Math.PI*r/180},Pl={name:"color",parse:function(r,t){if(t.type===18){var e=nV[t.name];if(typeof e>"u")throw new Error('Attempting to parse an unsupported color function "'+t.name+'"');return e(r,t.values)}if(t.type===5){if(t.value.length===3){var n=t.value.substring(0,1),i=t.value.substring(1,2),s=t.value.substring(2,3);return kl(parseInt(n+n,16),parseInt(i+i,16),parseInt(s+s,16),1)}if(t.value.length===4){var n=t.value.substring(0,1),i=t.value.substring(1,2),s=t.value.substring(2,3),a=t.value.substring(3,4);return kl(parseInt(n+n,16),parseInt(i+i,16),parseInt(s+s,16),parseInt(a+a,16)/255)}if(t.value.length===6){var n=t.value.substring(0,2),i=t.value.substring(2,4),s=t.value.substring(4,6);return kl(parseInt(n,16),parseInt(i,16),parseInt(s,16),1)}if(t.value.length===8){var n=t.value.substring(0,2),i=t.value.substring(2,4),s=t.value.substring(4,6),a=t.value.substring(6,8);return kl(parseInt(n,16),parseInt(i,16),parseInt(s,16),parseInt(a,16)/255)}}if(t.type===20){var o=SA[t.value.toUpperCase()];if(typeof o<"u")return o}return SA.TRANSPARENT}},Nl=function(r){return(255&r)===0},Si=function(r){var t=255&r,e=255&r>>8,n=255&r>>16,i=255&r>>24;return t<255?"rgba("+i+","+n+","+e+","+t/255+")":"rgb("+i+","+n+","+e+")"},kl=function(r,t,e,n){return(r<<24|t<<16|e<<8|Math.round(n*255)<<0)>>>0},m5=function(r,t){if(r.type===17)return r.number;if(r.type===16){var e=t===3?1:255;return t===3?r.number/100*e:Math.round(r.number/100*e)}return 0},b5=function(r,t){var e=t.filter(Sd);if(e.length===3){var n=e.map(m5),i=n[0],s=n[1],a=n[2];return kl(i,s,a,1)}if(e.length===4){var o=e.map(m5),i=o[0],s=o[1],a=o[2],A=o[3];return kl(i,s,a,A)}return 0};function Uy(r,t,e){return e<0&&(e+=1),e>=1&&(e-=1),e<1/6?(t-r)*e*6+r:e<1/2?t:e<2/3?(t-r)*6*(2/3-e)+r:r}var y5=function(r,t){var e=t.filter(Sd),n=e[0],i=e[1],s=e[2],a=e[3],o=(n.type===17?Ta(n.number):nb.parse(r,n))/(Math.PI*2),A=ii(i)?i.number/100:0,l=ii(s)?s.number/100:0,c=typeof a<"u"&&ii(a)?on(a,1):1;if(A===0)return kl(l*255,l*255,l*255,1);var u=l<=.5?l*(A+1):l+A-l*A,h=l*2-u,d=Uy(h,u,o+1/3),m=Uy(h,u,o),f=Uy(h,u,o-1/3);return kl(d*255,m*255,f*255,c)},nV={hsl:y5,hsla:y5,rgb:b5,rgba:b5},uf=function(r,t){return Pl.parse(r,wT.create(t).parseComponentValue())},SA={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},iV={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(r,t){return t.map(function(e){if(Gr(e))switch(e.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},sV={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},ib=function(r,t){var e=Pl.parse(r,t[0]),n=t[1];return n&&ii(n)?{color:e,stop:n}:{color:e,stop:null}},w5=function(r,t){var e=r[0],n=r[r.length-1];e.stop===null&&(e.stop=zi),n.stop===null&&(n.stop=Sl);for(var i=[],s=0,a=0;a<r.length;a++){var o=r[a].stop;if(o!==null){var A=on(o,t);A>s?i.push(A):i.push(s),s=A}else i.push(null)}for(var l=null,a=0;a<i.length;a++){var c=i[a];if(c===null)l===null&&(l=a);else if(l!==null){for(var u=a-l,h=i[l-1],d=(c-h)/(u+1),m=1;m<=u;m++)i[l+m-1]=d*m;l=null}}return r.map(function(f,b){var y=f.color;return{color:y,stop:Math.max(Math.min(1,i[b]/t),0)}})},aV=function(r,t,e){var n=t/2,i=e/2,s=on(r[0],t)-n,a=i-on(r[1],e);return(Math.atan2(a,s)+Math.PI*2)%(Math.PI*2)},oV=function(r,t,e){var n=typeof r=="number"?r:aV(r,t,e),i=Math.abs(t*Math.sin(n))+Math.abs(e*Math.cos(n)),s=t/2,a=e/2,o=i/2,A=Math.sin(n-Math.PI/2)*o,l=Math.cos(n-Math.PI/2)*o;return[i,s-l,s+l,a-A,a+A]},$a=function(r,t){return Math.sqrt(r*r+t*t)},v5=function(r,t,e,n,i){var s=[[0,0],[0,t],[r,0],[r,t]];return s.reduce(function(a,o){var A=o[0],l=o[1],c=$a(e-A,n-l);return(i?c<a.optimumDistance:c>a.optimumDistance)?{optimumCorner:o,optimumDistance:c}:a},{optimumDistance:i?1/0:-1/0,optimumCorner:null}).optimumCorner},AV=function(r,t,e,n,i){var s=0,a=0;switch(r.size){case 0:r.shape===0?s=a=Math.min(Math.abs(t),Math.abs(t-n),Math.abs(e),Math.abs(e-i)):r.shape===1&&(s=Math.min(Math.abs(t),Math.abs(t-n)),a=Math.min(Math.abs(e),Math.abs(e-i)));break;case 2:if(r.shape===0)s=a=Math.min($a(t,e),$a(t,e-i),$a(t-n,e),$a(t-n,e-i));else if(r.shape===1){var o=Math.min(Math.abs(e),Math.abs(e-i))/Math.min(Math.abs(t),Math.abs(t-n)),A=v5(n,i,t,e,!0),l=A[0],c=A[1];s=$a(l-t,(c-e)/o),a=o*s}break;case 1:r.shape===0?s=a=Math.max(Math.abs(t),Math.abs(t-n),Math.abs(e),Math.abs(e-i)):r.shape===1&&(s=Math.max(Math.abs(t),Math.abs(t-n)),a=Math.max(Math.abs(e),Math.abs(e-i)));break;case 3:if(r.shape===0)s=a=Math.max($a(t,e),$a(t,e-i),$a(t-n,e),$a(t-n,e-i));else if(r.shape===1){var o=Math.max(Math.abs(e),Math.abs(e-i))/Math.max(Math.abs(t),Math.abs(t-n)),u=v5(n,i,t,e,!1),l=u[0],c=u[1];s=$a(l-t,(c-e)/o),a=o*s}break}return Array.isArray(r.size)&&(s=on(r.size[0],n),a=r.size.length===2?on(r.size[1],i):s),[s,a]},lV=function(r,t){var e=Ta(180),n=[];return $o(t).forEach(function(i,s){if(s===0){var a=i[0];if(a.type===20&&a.value==="to"){e=kT(i);return}else if(ST(a)){e=nb.parse(r,a);return}}var o=ib(r,i);n.push(o)}),{angle:e,stops:n,type:1}},Mp=function(r,t){var e=Ta(180),n=[];return $o(t).forEach(function(i,s){if(s===0){var a=i[0];if(a.type===20&&["top","left","right","bottom"].indexOf(a.value)!==-1){e=kT(i);return}else if(ST(a)){e=(nb.parse(r,a)+Ta(270))%Ta(360);return}}var o=ib(r,i);n.push(o)}),{angle:e,stops:n,type:1}},cV=function(r,t){var e=Ta(180),n=[],i=1,s=0,a=3,o=[];return $o(t).forEach(function(A,l){var c=A[0];if(l===0){if(Gr(c)&&c.value==="linear"){i=1;return}else if(Gr(c)&&c.value==="radial"){i=2;return}}if(c.type===18){if(c.name==="from"){var u=Pl.parse(r,c.values[0]);n.push({stop:zi,color:u})}else if(c.name==="to"){var u=Pl.parse(r,c.values[0]);n.push({stop:Sl,color:u})}else if(c.name==="color-stop"){var h=c.values.filter(Sd);if(h.length===2){var u=Pl.parse(r,h[1]),d=h[0];Vd(d)&&n.push({stop:{type:16,number:d.number*100,flags:d.flags},color:u})}}}}),i===1?{angle:(e+Ta(180))%Ta(360),stops:n,type:i}:{size:a,shape:s,stops:n,position:o,type:i}},IT="closest-side",TT="farthest-side",FT="closest-corner",LT="farthest-corner",UT="circle",PT="ellipse",NT="cover",DT="contain",uV=function(r,t){var e=0,n=3,i=[],s=[];return $o(t).forEach(function(a,o){var A=!0;if(o===0){var l=!1;A=a.reduce(function(u,h){if(l)if(Gr(h))switch(h.value){case"center":return s.push(n2),u;case"top":case"left":return s.push(zi),u;case"right":case"bottom":return s.push(Sl),u}else(ii(h)||zl(h))&&s.push(h);else if(Gr(h))switch(h.value){case UT:return e=0,!1;case PT:return e=1,!1;case"at":return l=!0,!1;case IT:return n=0,!1;case NT:case TT:return n=1,!1;case DT:case FT:return n=2,!1;case LT:return n=3,!1}else if(zl(h)||ii(h))return Array.isArray(n)||(n=[]),n.push(h),!1;return u},A)}if(A){var c=ib(r,a);i.push(c)}}),{size:n,shape:e,stops:i,position:s,type:2}},Rp=function(r,t){var e=0,n=3,i=[],s=[];return $o(t).forEach(function(a,o){var A=!0;if(o===0?A=a.reduce(function(c,u){if(Gr(u))switch(u.value){case"center":return s.push(n2),!1;case"top":case"left":return s.push(zi),!1;case"right":case"bottom":return s.push(Sl),!1}else if(ii(u)||zl(u))return s.push(u),!1;return c},A):o===1&&(A=a.reduce(function(c,u){if(Gr(u))switch(u.value){case UT:return e=0,!1;case PT:return e=1,!1;case DT:case IT:return n=0,!1;case TT:return n=1,!1;case FT:return n=2,!1;case NT:case LT:return n=3,!1}else if(zl(u)||ii(u))return Array.isArray(n)||(n=[]),n.push(u),!1;return c},A)),A){var l=ib(r,a);i.push(l)}}),{size:n,shape:e,stops:i,position:s,type:2}},dV=function(r){return r.type===1},hV=function(r){return r.type===2},i2={name:"image",parse:function(r,t){if(t.type===22){var e={url:t.value,type:0};return r.cache.addImage(t.value),e}if(t.type===18){var n=MT[t.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported image function "'+t.name+'"');return n(r,t.values)}throw new Error("Unsupported image type "+t.type)}};function fV(r){return!(r.type===20&&r.value==="none")&&(r.type!==18||!!MT[r.name])}var MT={"linear-gradient":lV,"-moz-linear-gradient":Mp,"-ms-linear-gradient":Mp,"-o-linear-gradient":Mp,"-webkit-linear-gradient":Mp,"radial-gradient":uV,"-moz-radial-gradient":Rp,"-ms-radial-gradient":Rp,"-o-radial-gradient":Rp,"-webkit-radial-gradient":Rp,"-webkit-gradient":cV},gV={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(r,t){if(t.length===0)return[];var e=t[0];return e.type===20&&e.value==="none"?[]:t.filter(function(n){return Sd(n)&&fV(n)}).map(function(n){return i2.parse(r,n)})}},pV={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(r,t){return t.map(function(e){if(Gr(e))switch(e.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},mV={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(r,t){return $o(t).map(function(e){return e.filter(ii)}).map(xT)}},bV={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(r,t){return $o(t).map(function(e){return e.filter(Gr).map(function(n){return n.value}).join(" ")}).map(yV)}},yV=function(r){switch(r){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},ud;(function(r){r.AUTO="auto",r.CONTAIN="contain",r.COVER="cover"})(ud||(ud={}));var wV={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(r,t){return $o(t).map(function(e){return e.filter(vV)})}},vV=function(r){return Gr(r)||ii(r)},sb=function(r){return{name:"border-"+r+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},xV=sb("top"),_V=sb("right"),BV=sb("bottom"),CV=sb("left"),ab=function(r){return{name:"border-radius-"+r,initialValue:"0 0",prefix:!1,type:1,parse:function(t,e){return xT(e.filter(ii))}}},EV=ab("top-left"),SV=ab("top-right"),kV=ab("bottom-right"),IV=ab("bottom-left"),ob=function(r){return{name:"border-"+r+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(t,e){switch(e){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},TV=ob("top"),FV=ob("right"),LV=ob("bottom"),UV=ob("left"),Ab=function(r){return{name:"border-"+r+"-width",initialValue:"0",type:0,prefix:!1,parse:function(t,e){return Ag(e)?e.number:0}}},PV=Ab("top"),NV=Ab("right"),DV=Ab("bottom"),MV=Ab("left"),RV={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},QV={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(r,t){switch(t){case"rtl":return 1;case"ltr":default:return 0}}},OV={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(r,t){return t.filter(Gr).reduce(function(e,n){return e|HV(n.value)},0)}},HV=function(r){switch(r){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},VV={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(r,t){switch(t){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},$V={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(r,t){return t.type===20&&t.value==="normal"?0:t.type===17||t.type===15?t.number:0}},A0;(function(r){r.NORMAL="normal",r.STRICT="strict"})(A0||(A0={}));var jV={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(r,t){switch(t){case"strict":return A0.STRICT;case"normal":default:return A0.NORMAL}}},GV={name:"line-height",initialValue:"normal",prefix:!1,type:4},x5=function(r,t){return Gr(r)&&r.value==="normal"?1.2*t:r.type===17?t*r.number:ii(r)?on(r,t):t},KV={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(r,t){return t.type===20&&t.value==="none"?null:i2.parse(r,t)}},zV={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(r,t){switch(t){case"inside":return 0;case"outside":default:return 1}}},x1={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(r,t){switch(t){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},lb=function(r){return{name:"margin-"+r,initialValue:"0",prefix:!1,type:4}},qV=lb("top"),WV=lb("right"),YV=lb("bottom"),XV=lb("left"),JV={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(r,t){return t.filter(Gr).map(function(e){switch(e.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},ZV={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(r,t){switch(t){case"break-word":return"break-word";case"normal":default:return"normal"}}},cb=function(r){return{name:"padding-"+r,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},t$=cb("top"),e$=cb("right"),r$=cb("bottom"),n$=cb("left"),i$={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(r,t){switch(t){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},s$={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(r,t){switch(t){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},a$={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(r,t){return t.length===1&&v1(t[0],"none")?[]:$o(t).map(function(e){for(var n={color:SA.TRANSPARENT,offsetX:zi,offsetY:zi,blur:zi},i=0,s=0;s<e.length;s++){var a=e[s];zl(a)?(i===0?n.offsetX=a:i===1?n.offsetY=a:n.blur=a,i++):n.color=Pl.parse(r,a)}return n})}},o$={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(r,t){switch(t){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},A$={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(r,t){if(t.type===20&&t.value==="none")return null;if(t.type===18){var e=u$[t.name];if(typeof e>"u")throw new Error('Attempting to parse an unsupported transform function "'+t.name+'"');return e(t.values)}return null}},l$=function(r){var t=r.filter(function(e){return e.type===17}).map(function(e){return e.number});return t.length===6?t:null},c$=function(r){var t=r.filter(function(A){return A.type===17}).map(function(A){return A.number}),e=t[0],n=t[1];t[2],t[3];var i=t[4],s=t[5];t[6],t[7],t[8],t[9],t[10],t[11];var a=t[12],o=t[13];return t[14],t[15],t.length===16?[e,n,i,s,a,o]:null},u$={matrix:l$,matrix3d:c$},_5={type:16,number:50,flags:og},d$=[_5,_5],h$={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(r,t){var e=t.filter(ii);return e.length!==2?d$:[e[0],e[1]]}},f$={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(r,t){switch(t){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},df;(function(r){r.NORMAL="normal",r.BREAK_ALL="break-all",r.KEEP_ALL="keep-all"})(df||(df={}));var g$={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(r,t){switch(t){case"break-all":return df.BREAK_ALL;case"keep-all":return df.KEEP_ALL;case"normal":default:return df.NORMAL}}},p$={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(r,t){if(t.type===20)return{auto:!0,order:0};if(Vd(t))return{auto:!1,order:t.number};throw new Error("Invalid z-index number parsed")}},RT={name:"time",parse:function(r,t){if(t.type===15)switch(t.unit.toLowerCase()){case"s":return 1e3*t.number;case"ms":return t.number}throw new Error("Unsupported time type")}},m$={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(r,t){return Vd(t)?t.number:1}},b$={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},y$={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(r,t){return t.filter(Gr).map(function(e){switch(e.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(e){return e!==0})}},w$={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(r,t){var e=[],n=[];return t.forEach(function(i){switch(i.type){case 20:case 0:e.push(i.value);break;case 17:e.push(i.number.toString());break;case 4:n.push(e.join(" ")),e.length=0;break}}),e.length&&n.push(e.join(" ")),n.map(function(i){return i.indexOf(" ")===-1?i:"'"+i+"'"})}},v$={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},x$={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(r,t){if(Vd(t))return t.number;if(Gr(t))switch(t.value){case"bold":return 700;case"normal":default:return 400}return 400}},_$={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(r,t){return t.filter(Gr).map(function(e){return e.value})}},B$={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(r,t){switch(t){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},mi=function(r,t){return(r&t)!==0},C$={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(r,t){if(t.length===0)return[];var e=t[0];return e.type===20&&e.value==="none"?[]:t}},E$={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(r,t){if(t.length===0)return null;var e=t[0];if(e.type===20&&e.value==="none")return null;for(var n=[],i=t.filter(vT),s=0;s<i.length;s++){var a=i[s],o=i[s+1];if(a.type===20){var A=o&&Vd(o)?o.number:1;n.push({counter:a.value,increment:A})}}return n}},S$={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(r,t){if(t.length===0)return[];for(var e=[],n=t.filter(vT),i=0;i<n.length;i++){var s=n[i],a=n[i+1];if(Gr(s)&&s.value!=="none"){var o=a&&Vd(a)?a.number:0;e.push({counter:s.value,reset:o})}}return e}},k$={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(r,t){return t.filter(Ag).map(function(e){return RT.parse(r,e)})}},I$={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(r,t){if(t.length===0)return null;var e=t[0];if(e.type===20&&e.value==="none")return null;var n=[],i=t.filter(eV);if(i.length%2!==0)return null;for(var s=0;s<i.length;s+=2){var a=i[s].value,o=i[s+1].value;n.push({open:a,close:o})}return n}},B5=function(r,t,e){if(!r)return"";var n=r[Math.min(t,r.length-1)];return n?e?n.open:n.close:""},T$={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(r,t){return t.length===1&&v1(t[0],"none")?[]:$o(t).map(function(e){for(var n={color:255,offsetX:zi,offsetY:zi,blur:zi,spread:zi,inset:!1},i=0,s=0;s<e.length;s++){var a=e[s];v1(a,"inset")?n.inset=!0:zl(a)?(i===0?n.offsetX=a:i===1?n.offsetY=a:i===2?n.blur=a:n.spread=a,i++):n.color=Pl.parse(r,a)}return n})}},F$={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(r,t){var e=[0,1,2],n=[];return t.filter(Gr).forEach(function(i){switch(i.value){case"stroke":n.push(1);break;case"fill":n.push(0);break;case"markers":n.push(2);break}}),e.forEach(function(i){n.indexOf(i)===-1&&n.push(i)}),n}},L$={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},U$={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(r,t){return Ag(t)?t.number:0}},P$=(function(){function r(t,e){var n,i;this.animationDuration=fe(t,k$,e.animationDuration),this.backgroundClip=fe(t,iV,e.backgroundClip),this.backgroundColor=fe(t,sV,e.backgroundColor),this.backgroundImage=fe(t,gV,e.backgroundImage),this.backgroundOrigin=fe(t,pV,e.backgroundOrigin),this.backgroundPosition=fe(t,mV,e.backgroundPosition),this.backgroundRepeat=fe(t,bV,e.backgroundRepeat),this.backgroundSize=fe(t,wV,e.backgroundSize),this.borderTopColor=fe(t,xV,e.borderTopColor),this.borderRightColor=fe(t,_V,e.borderRightColor),this.borderBottomColor=fe(t,BV,e.borderBottomColor),this.borderLeftColor=fe(t,CV,e.borderLeftColor),this.borderTopLeftRadius=fe(t,EV,e.borderTopLeftRadius),this.borderTopRightRadius=fe(t,SV,e.borderTopRightRadius),this.borderBottomRightRadius=fe(t,kV,e.borderBottomRightRadius),this.borderBottomLeftRadius=fe(t,IV,e.borderBottomLeftRadius),this.borderTopStyle=fe(t,TV,e.borderTopStyle),this.borderRightStyle=fe(t,FV,e.borderRightStyle),this.borderBottomStyle=fe(t,LV,e.borderBottomStyle),this.borderLeftStyle=fe(t,UV,e.borderLeftStyle),this.borderTopWidth=fe(t,PV,e.borderTopWidth),this.borderRightWidth=fe(t,NV,e.borderRightWidth),this.borderBottomWidth=fe(t,DV,e.borderBottomWidth),this.borderLeftWidth=fe(t,MV,e.borderLeftWidth),this.boxShadow=fe(t,T$,e.boxShadow),this.color=fe(t,RV,e.color),this.direction=fe(t,QV,e.direction),this.display=fe(t,OV,e.display),this.float=fe(t,VV,e.cssFloat),this.fontFamily=fe(t,w$,e.fontFamily),this.fontSize=fe(t,v$,e.fontSize),this.fontStyle=fe(t,B$,e.fontStyle),this.fontVariant=fe(t,_$,e.fontVariant),this.fontWeight=fe(t,x$,e.fontWeight),this.letterSpacing=fe(t,$V,e.letterSpacing),this.lineBreak=fe(t,jV,e.lineBreak),this.lineHeight=fe(t,GV,e.lineHeight),this.listStyleImage=fe(t,KV,e.listStyleImage),this.listStylePosition=fe(t,zV,e.listStylePosition),this.listStyleType=fe(t,x1,e.listStyleType),this.marginTop=fe(t,qV,e.marginTop),this.marginRight=fe(t,WV,e.marginRight),this.marginBottom=fe(t,YV,e.marginBottom),this.marginLeft=fe(t,XV,e.marginLeft),this.opacity=fe(t,m$,e.opacity);var s=fe(t,JV,e.overflow);this.overflowX=s[0],this.overflowY=s[s.length>1?1:0],this.overflowWrap=fe(t,ZV,e.overflowWrap),this.paddingTop=fe(t,t$,e.paddingTop),this.paddingRight=fe(t,e$,e.paddingRight),this.paddingBottom=fe(t,r$,e.paddingBottom),this.paddingLeft=fe(t,n$,e.paddingLeft),this.paintOrder=fe(t,F$,e.paintOrder),this.position=fe(t,s$,e.position),this.textAlign=fe(t,i$,e.textAlign),this.textDecorationColor=fe(t,b$,(n=e.textDecorationColor)!==null&&n!==void 0?n:e.color),this.textDecorationLine=fe(t,y$,(i=e.textDecorationLine)!==null&&i!==void 0?i:e.textDecoration),this.textShadow=fe(t,a$,e.textShadow),this.textTransform=fe(t,o$,e.textTransform),this.transform=fe(t,A$,e.transform),this.transformOrigin=fe(t,h$,e.transformOrigin),this.visibility=fe(t,f$,e.visibility),this.webkitTextStrokeColor=fe(t,L$,e.webkitTextStrokeColor),this.webkitTextStrokeWidth=fe(t,U$,e.webkitTextStrokeWidth),this.wordBreak=fe(t,g$,e.wordBreak),this.zIndex=fe(t,p$,e.zIndex)}return r.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},r.prototype.isTransparent=function(){return Nl(this.backgroundColor)},r.prototype.isTransformed=function(){return this.transform!==null},r.prototype.isPositioned=function(){return this.position!==0},r.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},r.prototype.isFloating=function(){return this.float!==0},r.prototype.isInlineLevel=function(){return mi(this.display,4)||mi(this.display,33554432)||mi(this.display,268435456)||mi(this.display,536870912)||mi(this.display,67108864)||mi(this.display,134217728)},r})(),N$=(function(){function r(t,e){this.content=fe(t,C$,e.content),this.quotes=fe(t,I$,e.quotes)}return r})(),C5=(function(){function r(t,e){this.counterIncrement=fe(t,E$,e.counterIncrement),this.counterReset=fe(t,S$,e.counterReset)}return r})(),fe=function(r,t,e){var n=new yT,i=e!==null&&typeof e<"u"?e.toString():t.initialValue;n.write(i);var s=new wT(n.read());switch(t.type){case 2:var a=s.parseComponentValue();return t.parse(r,Gr(a)?a.value:t.initialValue);case 0:return t.parse(r,s.parseComponentValue());case 1:return t.parse(r,s.parseComponentValues());case 4:return s.parseComponentValue();case 3:switch(t.format){case"angle":return nb.parse(r,s.parseComponentValue());case"color":return Pl.parse(r,s.parseComponentValue());case"image":return i2.parse(r,s.parseComponentValue());case"length":var o=s.parseComponentValue();return zl(o)?o:zi;case"length-percentage":var A=s.parseComponentValue();return ii(A)?A:zi;case"time":return RT.parse(r,s.parseComponentValue())}break}},D$="data-html2canvas-debug",M$=function(r){var t=r.getAttribute(D$);switch(t){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},_1=function(r,t){var e=M$(r);return e===1||t===e},jo=(function(){function r(t,e){if(this.context=t,this.textNodes=[],this.elements=[],this.flags=0,_1(e,3))debugger;this.styles=new P$(t,window.getComputedStyle(e,null)),E1(e)&&(this.styles.animationDuration.some(function(n){return n>0})&&(e.style.animationDuration="0s"),this.styles.transform!==null&&(e.style.transform="none")),this.bounds=eb(this.context,e),_1(e,4)&&(this.flags|=16)}return r})(),R$="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",E5="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",$h=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Qp=0;Qp<E5.length;Qp++)$h[E5.charCodeAt(Qp)]=Qp;var Q$=function(r){var t=r.length*.75,e=r.length,n,i=0,s,a,o,A;r[r.length-1]==="="&&(t--,r[r.length-2]==="="&&t--);var l=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(t):new Array(t),c=Array.isArray(l)?l:new Uint8Array(l);for(n=0;n<e;n+=4)s=$h[r.charCodeAt(n)],a=$h[r.charCodeAt(n+1)],o=$h[r.charCodeAt(n+2)],A=$h[r.charCodeAt(n+3)],c[i++]=s<<2|a>>4,c[i++]=(a&15)<<4|o>>2,c[i++]=(o&3)<<6|A&63;return l},O$=function(r){for(var t=r.length,e=[],n=0;n<t;n+=2)e.push(r[n+1]<<8|r[n]);return e},H$=function(r){for(var t=r.length,e=[],n=0;n<t;n+=4)e.push(r[n+3]<<24|r[n+2]<<16|r[n+1]<<8|r[n]);return e},Yc=5,s2=11,Py=2,V$=s2-Yc,QT=65536>>Yc,$$=1<<Yc,Ny=$$-1,j$=1024>>Yc,G$=QT+j$,K$=G$,z$=32,q$=K$+z$,W$=65536>>s2,Y$=1<<V$,X$=Y$-1,S5=function(r,t,e){return r.slice?r.slice(t,e):new Uint16Array(Array.prototype.slice.call(r,t,e))},J$=function(r,t,e){return r.slice?r.slice(t,e):new Uint32Array(Array.prototype.slice.call(r,t,e))},Z$=function(r,t){var e=Q$(r),n=Array.isArray(e)?H$(e):new Uint32Array(e),i=Array.isArray(e)?O$(e):new Uint16Array(e),s=24,a=S5(i,s/2,n[4]/2),o=n[5]===2?S5(i,(s+n[4])/2):J$(n,Math.ceil((s+n[4])/4));return new tj(n[0],n[1],n[2],n[3],a,o)},tj=(function(){function r(t,e,n,i,s,a){this.initialValue=t,this.errorValue=e,this.highStart=n,this.highValueIndex=i,this.index=s,this.data=a}return r.prototype.get=function(t){var e;if(t>=0){if(t<55296||t>56319&&t<=65535)return e=this.index[t>>Yc],e=(e<<Py)+(t&Ny),this.data[e];if(t<=65535)return e=this.index[QT+(t-55296>>Yc)],e=(e<<Py)+(t&Ny),this.data[e];if(t<this.highStart)return e=q$-W$+(t>>s2),e=this.index[e],e+=t>>Yc&X$,e=this.index[e],e=(e<<Py)+(t&Ny),this.data[e];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},r})(),k5="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ej=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Op=0;Op<k5.length;Op++)ej[k5.charCodeAt(Op)]=Op;var rj=1,Dy=2,My=3,I5=4,T5=5,nj=7,F5=8,Ry=9,Qy=10,L5=11,U5=12,P5=13,N5=14,Oy=15,ij=function(r){for(var t=[],e=0,n=r.length;e<n;){var i=r.charCodeAt(e++);if(i>=55296&&i<=56319&&e<n){var s=r.charCodeAt(e++);(s&64512)===56320?t.push(((i&1023)<<10)+(s&1023)+65536):(t.push(i),e--)}else t.push(i)}return t},sj=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,r);var e=r.length;if(!e)return"";for(var n=[],i=-1,s="";++i<e;){var a=r[i];a<=65535?n.push(a):(a-=65536,n.push((a>>10)+55296,a%1024+56320)),(i+1===e||n.length>16384)&&(s+=String.fromCharCode.apply(String,n),n.length=0)}return s},aj=Z$(R$),ka="",Hy="",oj=function(r){return aj.get(r)},Aj=function(r,t,e){var n=e-2,i=t[n],s=t[e-1],a=t[e];if(s===Dy&&a===My)return ka;if(s===Dy||s===My||s===I5||a===Dy||a===My||a===I5)return Hy;if(s===F5&&[F5,Ry,L5,U5].indexOf(a)!==-1||(s===L5||s===Ry)&&(a===Ry||a===Qy)||(s===U5||s===Qy)&&a===Qy||a===P5||a===T5||a===nj||s===rj)return ka;if(s===P5&&a===N5){for(;i===T5;)i=t[--n];if(i===N5)return ka}if(s===Oy&&a===Oy){for(var o=0;i===Oy;)o++,i=t[--n];if(o%2===0)return ka}return Hy},lj=function(r){var t=ij(r),e=t.length,n=0,i=0,s=t.map(oj);return{next:function(){if(n>=e)return{done:!0,value:null};for(var a=ka;n<e&&(a=Aj(t,s,++n))===ka;);if(a!==ka||n===e){var o=sj.apply(null,t.slice(i,n));return i=n,{value:o,done:!1}}return{done:!0,value:null}}}},cj=function(r){for(var t=lj(r),e=[],n;!(n=t.next()).done;)n.value&&e.push(n.value.slice());return e},uj=function(r){var t=123;if(r.createRange){var e=r.createRange();if(e.getBoundingClientRect){var n=r.createElement("boundtest");n.style.height=t+"px",n.style.display="block",r.body.appendChild(n),e.selectNode(n);var i=e.getBoundingClientRect(),s=Math.round(i.height);if(r.body.removeChild(n),s===t)return!0}}return!1},dj=function(r){var t=r.createElement("boundtest");t.style.width="50px",t.style.display="block",t.style.fontSize="12px",t.style.letterSpacing="0px",t.style.wordSpacing="0px",r.body.appendChild(t);var e=r.createRange();t.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var n=t.firstChild,i=rb(n.data).map(function(A){return Kn(A)}),s=0,a={},o=i.every(function(A,l){e.setStart(n,s),e.setEnd(n,s+A.length);var c=e.getBoundingClientRect();s+=A.length;var u=c.x>a.x||c.y>a.y;return a=c,l===0?!0:u});return r.body.removeChild(t),o},hj=function(){return typeof new Image().crossOrigin<"u"},fj=function(){return typeof new XMLHttpRequest().responseType=="string"},gj=function(r){var t=new Image,e=r.createElement("canvas"),n=e.getContext("2d");if(!n)return!1;t.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(t,0,0),e.toDataURL()}catch{return!1}return!0},D5=function(r){return r[0]===0&&r[1]===255&&r[2]===0&&r[3]===255},pj=function(r){var t=r.createElement("canvas"),e=100;t.width=e,t.height=e;var n=t.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,e,e);var i=new Image,s=t.toDataURL();i.src=s;var a=B1(e,e,0,0,i);return n.fillStyle="red",n.fillRect(0,0,e,e),M5(a).then(function(o){n.drawImage(o,0,0);var A=n.getImageData(0,0,e,e).data;n.fillStyle="red",n.fillRect(0,0,e,e);var l=r.createElement("div");return l.style.backgroundImage="url("+s+")",l.style.height=e+"px",D5(A)?M5(B1(e,e,0,0,l)):Promise.reject(!1)}).then(function(o){return n.drawImage(o,0,0),D5(n.getImageData(0,0,e,e).data)}).catch(function(){return!1})},B1=function(r,t,e,n,i){var s="http://www.w3.org/2000/svg",a=document.createElementNS(s,"svg"),o=document.createElementNS(s,"foreignObject");return a.setAttributeNS(null,"width",r.toString()),a.setAttributeNS(null,"height",t.toString()),o.setAttributeNS(null,"width","100%"),o.setAttributeNS(null,"height","100%"),o.setAttributeNS(null,"x",e.toString()),o.setAttributeNS(null,"y",n.toString()),o.setAttributeNS(null,"externalResourcesRequired","true"),a.appendChild(o),o.appendChild(i),a},M5=function(r){return new Promise(function(t,e){var n=new Image;n.onload=function(){return t(n)},n.onerror=e,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(r))})},Gi={get SUPPORT_RANGE_BOUNDS(){var r=uj(document);return Object.defineProperty(Gi,"SUPPORT_RANGE_BOUNDS",{value:r}),r},get SUPPORT_WORD_BREAKING(){var r=Gi.SUPPORT_RANGE_BOUNDS&&dj(document);return Object.defineProperty(Gi,"SUPPORT_WORD_BREAKING",{value:r}),r},get SUPPORT_SVG_DRAWING(){var r=gj(document);return Object.defineProperty(Gi,"SUPPORT_SVG_DRAWING",{value:r}),r},get SUPPORT_FOREIGNOBJECT_DRAWING(){var r=typeof Array.from=="function"&&typeof window.fetch=="function"?pj(document):Promise.resolve(!1);return Object.defineProperty(Gi,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:r}),r},get SUPPORT_CORS_IMAGES(){var r=hj();return Object.defineProperty(Gi,"SUPPORT_CORS_IMAGES",{value:r}),r},get SUPPORT_RESPONSE_TYPE(){var r=fj();return Object.defineProperty(Gi,"SUPPORT_RESPONSE_TYPE",{value:r}),r},get SUPPORT_CORS_XHR(){var r="withCredentials"in new XMLHttpRequest;return Object.defineProperty(Gi,"SUPPORT_CORS_XHR",{value:r}),r},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var r=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(Gi,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:r}),r}},hf=(function(){function r(t,e){this.text=t,this.bounds=e}return r})(),mj=function(r,t,e,n){var i=wj(t,e),s=[],a=0;return i.forEach(function(o){if(e.textDecorationLine.length||o.trim().length>0)if(Gi.SUPPORT_RANGE_BOUNDS){var A=R5(n,a,o.length).getClientRects();if(A.length>1){var l=a2(o),c=0;l.forEach(function(h){s.push(new hf(h,LA.fromDOMRectList(r,R5(n,c+a,h.length).getClientRects()))),c+=h.length})}else s.push(new hf(o,LA.fromDOMRectList(r,A)))}else{var u=n.splitText(o.length);s.push(new hf(o,bj(r,n))),n=u}else Gi.SUPPORT_RANGE_BOUNDS||(n=n.splitText(o.length));a+=o.length}),s},bj=function(r,t){var e=t.ownerDocument;if(e){var n=e.createElement("html2canvaswrapper");n.appendChild(t.cloneNode(!0));var i=t.parentNode;if(i){i.replaceChild(n,t);var s=eb(r,n);return n.firstChild&&i.replaceChild(n.firstChild,n),s}}return LA.EMPTY},R5=function(r,t,e){var n=r.ownerDocument;if(!n)throw new Error("Node has no owner document");var i=n.createRange();return i.setStart(r,t),i.setEnd(r,t+e),i},a2=function(r){if(Gi.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(t.segment(r)).map(function(e){return e.segment})}return cj(r)},yj=function(r,t){if(Gi.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(e.segment(r)).map(function(n){return n.segment})}return xj(r,t)},wj=function(r,t){return t.letterSpacing!==0?a2(r):yj(r,t)},vj=[32,160,4961,65792,65793,4153,4241],xj=function(r,t){for(var e=W7(r,{lineBreak:t.lineBreak,wordBreak:t.overflowWrap==="break-word"?"break-word":t.wordBreak}),n=[],i,s=function(){if(i.value){var a=i.value.slice(),o=rb(a),A="";o.forEach(function(l){vj.indexOf(l)===-1?A+=Kn(l):(A.length&&n.push(A),n.push(Kn(l)),A="")}),A.length&&n.push(A)}};!(i=e.next()).done;)s();return n},_j=(function(){function r(t,e,n){this.text=Bj(e.data,n.textTransform),this.textBounds=mj(t,this.text,n,e)}return r})(),Bj=function(r,t){switch(t){case 1:return r.toLowerCase();case 3:return r.replace(Cj,Ej);case 2:return r.toUpperCase();default:return r}},Cj=/(^|\s|:|-|\(|\))([a-z])/g,Ej=function(r,t,e){return r.length>0?t+e.toUpperCase():r},OT=(function(r){no(t,r);function t(e,n){var i=r.call(this,e,n)||this;return i.src=n.currentSrc||n.src,i.intrinsicWidth=n.naturalWidth,i.intrinsicHeight=n.naturalHeight,i.context.cache.addImage(i.src),i}return t})(jo),HT=(function(r){no(t,r);function t(e,n){var i=r.call(this,e,n)||this;return i.canvas=n,i.intrinsicWidth=n.width,i.intrinsicHeight=n.height,i}return t})(jo),VT=(function(r){no(t,r);function t(e,n){var i=r.call(this,e,n)||this,s=new XMLSerializer,a=eb(e,n);return n.setAttribute("width",a.width+"px"),n.setAttribute("height",a.height+"px"),i.svg="data:image/svg+xml,"+encodeURIComponent(s.serializeToString(n)),i.intrinsicWidth=n.width.baseVal.value,i.intrinsicHeight=n.height.baseVal.value,i.context.cache.addImage(i.svg),i}return t})(jo),$T=(function(r){no(t,r);function t(e,n){var i=r.call(this,e,n)||this;return i.value=n.value,i}return t})(jo),C1=(function(r){no(t,r);function t(e,n){var i=r.call(this,e,n)||this;return i.start=n.start,i.reversed=typeof n.reversed=="boolean"&&n.reversed===!0,i}return t})(jo),Sj=[{type:15,flags:0,unit:"px",number:3}],kj=[{type:16,flags:0,number:50}],Ij=function(r){return r.width>r.height?new LA(r.left+(r.width-r.height)/2,r.top,r.height,r.height):r.width<r.height?new LA(r.left,r.top+(r.height-r.width)/2,r.width,r.width):r},Tj=function(r){var t=r.type===Fj?new Array(r.value.length+1).join(""):r.value;return t.length===0?r.placeholder||"":t},l0="checkbox",c0="radio",Fj="password",Q5=707406591,o2=(function(r){no(t,r);function t(e,n){var i=r.call(this,e,n)||this;switch(i.type=n.type.toLowerCase(),i.checked=n.checked,i.value=Tj(n),(i.type===l0||i.type===c0)&&(i.styles.backgroundColor=3739148031,i.styles.borderTopColor=i.styles.borderRightColor=i.styles.borderBottomColor=i.styles.borderLeftColor=2779096575,i.styles.borderTopWidth=i.styles.borderRightWidth=i.styles.borderBottomWidth=i.styles.borderLeftWidth=1,i.styles.borderTopStyle=i.styles.borderRightStyle=i.styles.borderBottomStyle=i.styles.borderLeftStyle=1,i.styles.backgroundClip=[0],i.styles.backgroundOrigin=[0],i.bounds=Ij(i.bounds)),i.type){case l0:i.styles.borderTopRightRadius=i.styles.borderTopLeftRadius=i.styles.borderBottomRightRadius=i.styles.borderBottomLeftRadius=Sj;break;case c0:i.styles.borderTopRightRadius=i.styles.borderTopLeftRadius=i.styles.borderBottomRightRadius=i.styles.borderBottomLeftRadius=kj;break}return i}return t})(jo),jT=(function(r){no(t,r);function t(e,n){var i=r.call(this,e,n)||this,s=n.options[n.selectedIndex||0];return i.value=s&&s.text||"",i}return t})(jo),GT=(function(r){no(t,r);function t(e,n){var i=r.call(this,e,n)||this;return i.value=n.value,i}return t})(jo),KT=(function(r){no(t,r);function t(e,n){var i=r.call(this,e,n)||this;i.src=n.src,i.width=parseInt(n.width,10)||0,i.height=parseInt(n.height,10)||0,i.backgroundColor=i.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){i.tree=qT(e,n.contentWindow.document.documentElement);var s=n.contentWindow.document.documentElement?uf(e,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):SA.TRANSPARENT,a=n.contentWindow.document.body?uf(e,getComputedStyle(n.contentWindow.document.body).backgroundColor):SA.TRANSPARENT;i.backgroundColor=Nl(s)?Nl(a)?i.styles.backgroundColor:a:s}}catch{}return i}return t})(jo),Lj=["OL","UL","MENU"],Cm=function(r,t,e,n){for(var i=t.firstChild,s=void 0;i;i=s)if(s=i.nextSibling,WT(i)&&i.data.trim().length>0)e.textNodes.push(new _j(r,i,e.styles));else if(nd(i))if(ZT(i)&&i.assignedNodes)i.assignedNodes().forEach(function(o){return Cm(r,o,e,n)});else{var a=zT(r,i);a.styles.isVisible()&&(Uj(i,a,n)?a.flags|=4:Pj(a.styles)&&(a.flags|=2),Lj.indexOf(i.tagName)!==-1&&(a.flags|=8),e.elements.push(a),i.slot,i.shadowRoot?Cm(r,i.shadowRoot,a,n):!u0(i)&&!YT(i)&&!d0(i)&&Cm(r,i,a,n))}},zT=function(r,t){return S1(t)?new OT(r,t):XT(t)?new HT(r,t):YT(t)?new VT(r,t):Nj(t)?new $T(r,t):Dj(t)?new C1(r,t):Mj(t)?new o2(r,t):d0(t)?new jT(r,t):u0(t)?new GT(r,t):JT(t)?new KT(r,t):new jo(r,t)},qT=function(r,t){var e=zT(r,t);return e.flags|=4,Cm(r,t,e,e),e},Uj=function(r,t,e){return t.styles.isPositionedWithZIndex()||t.styles.opacity<1||t.styles.isTransformed()||A2(r)&&e.styles.isTransparent()},Pj=function(r){return r.isPositioned()||r.isFloating()},WT=function(r){return r.nodeType===Node.TEXT_NODE},nd=function(r){return r.nodeType===Node.ELEMENT_NODE},E1=function(r){return nd(r)&&typeof r.style<"u"&&!Em(r)},Em=function(r){return typeof r.className=="object"},Nj=function(r){return r.tagName==="LI"},Dj=function(r){return r.tagName==="OL"},Mj=function(r){return r.tagName==="INPUT"},Rj=function(r){return r.tagName==="HTML"},YT=function(r){return r.tagName==="svg"},A2=function(r){return r.tagName==="BODY"},XT=function(r){return r.tagName==="CANVAS"},O5=function(r){return r.tagName==="VIDEO"},S1=function(r){return r.tagName==="IMG"},JT=function(r){return r.tagName==="IFRAME"},H5=function(r){return r.tagName==="STYLE"},Qj=function(r){return r.tagName==="SCRIPT"},u0=function(r){return r.tagName==="TEXTAREA"},d0=function(r){return r.tagName==="SELECT"},ZT=function(r){return r.tagName==="SLOT"},V5=function(r){return r.tagName.indexOf("-")>0},Oj=(function(){function r(){this.counters={}}return r.prototype.getCounterValue=function(t){var e=this.counters[t];return e&&e.length?e[e.length-1]:1},r.prototype.getCounterValues=function(t){var e=this.counters[t];return e||[]},r.prototype.pop=function(t){var e=this;t.forEach(function(n){return e.counters[n].pop()})},r.prototype.parse=function(t){var e=this,n=t.counterIncrement,i=t.counterReset,s=!0;n!==null&&n.forEach(function(o){var A=e.counters[o.counter];A&&o.increment!==0&&(s=!1,A.length||A.push(1),A[Math.max(0,A.length-1)]+=o.increment)});var a=[];return s&&i.forEach(function(o){var A=e.counters[o.counter];a.push(o.counter),A||(A=e.counters[o.counter]=[]),A.push(o.reset)}),a},r})(),$5={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},j5={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Hj={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Vj={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Ou=function(r,t,e,n,i,s){return r<t||r>e?Mf(r,i,s.length>0):n.integers.reduce(function(a,o,A){for(;r>=o;)r-=o,a+=n.values[A];return a},"")+s},t4=function(r,t,e,n){var i="";do e||r--,i=n(r)+i,r/=t;while(r*t>=t);return i},Gn=function(r,t,e,n,i){var s=e-t+1;return(r<0?"-":"")+(t4(Math.abs(r),s,n,function(a){return Kn(Math.floor(a%s)+t)})+i)},kc=function(r,t,e){e===void 0&&(e=". ");var n=t.length;return t4(Math.abs(r),n,!1,function(i){return t[Math.floor(i%n)]})+e},zu=1,fl=2,gl=4,jh=8,oA=function(r,t,e,n,i,s){if(r<-9999||r>9999)return Mf(r,4,i.length>0);var a=Math.abs(r),o=i;if(a===0)return t[0]+o;for(var A=0;a>0&&A<=4;A++){var l=a%10;l===0&&mi(s,zu)&&o!==""?o=t[l]+o:l>1||l===1&&A===0||l===1&&A===1&&mi(s,fl)||l===1&&A===1&&mi(s,gl)&&r>100||l===1&&A>1&&mi(s,jh)?o=t[l]+(A>0?e[A-1]:"")+o:l===1&&A>0&&(o=e[A-1]+o),a=Math.floor(a/10)}return(r<0?n:"")+o},G5="",K5="",z5="",Vy="",Mf=function(r,t,e){var n=e?". ":"",i=e?"":"",s=e?", ":"",a=e?" ":"";switch(t){case 0:return""+a;case 1:return""+a;case 2:return""+a;case 5:var o=Gn(r,48,57,!0,n);return o.length<4?"0"+o:o;case 4:return kc(r,"",i);case 6:return Ou(r,1,3999,$5,3,n).toLowerCase();case 7:return Ou(r,1,3999,$5,3,n);case 8:return Gn(r,945,969,!1,n);case 9:return Gn(r,97,122,!1,n);case 10:return Gn(r,65,90,!1,n);case 11:return Gn(r,1632,1641,!0,n);case 12:case 49:return Ou(r,1,9999,j5,3,n);case 35:return Ou(r,1,9999,j5,3,n).toLowerCase();case 13:return Gn(r,2534,2543,!0,n);case 14:case 30:return Gn(r,6112,6121,!0,n);case 15:return kc(r,"",i);case 16:return kc(r,"",i);case 17:case 48:return oA(r,"",G5,"",i,fl|gl|jh);case 47:return oA(r,"",K5,"",i,zu|fl|gl|jh);case 42:return oA(r,"",G5,"",i,fl|gl|jh);case 41:return oA(r,"",K5,"",i,zu|fl|gl|jh);case 26:return oA(r,"","",z5,i,0);case 25:return oA(r,"","",z5,i,zu|fl|gl);case 31:return oA(r,"","",Vy,s,zu|fl|gl);case 33:return oA(r,"","",Vy,s,0);case 32:return oA(r,"","",Vy,s,zu|fl|gl);case 18:return Gn(r,2406,2415,!0,n);case 20:return Ou(r,1,19999,Vj,3,n);case 21:return Gn(r,2790,2799,!0,n);case 22:return Gn(r,2662,2671,!0,n);case 22:return Ou(r,1,10999,Hj,3,n);case 23:return kc(r,"");case 24:return kc(r,"");case 27:return Gn(r,3302,3311,!0,n);case 28:return kc(r,"",i);case 29:return kc(r,"",i);case 34:return Gn(r,3792,3801,!0,n);case 37:return Gn(r,6160,6169,!0,n);case 38:return Gn(r,4160,4169,!0,n);case 39:return Gn(r,2918,2927,!0,n);case 40:return Gn(r,1776,1785,!0,n);case 43:return Gn(r,3046,3055,!0,n);case 44:return Gn(r,3174,3183,!0,n);case 45:return Gn(r,3664,3673,!0,n);case 46:return Gn(r,3872,3881,!0,n);case 3:default:return Gn(r,48,57,!0,n)}},e4="data-html2canvas-ignore",q5=(function(){function r(t,e,n){if(this.context=t,this.options=n,this.scrolledElements=[],this.referenceElement=e,this.counters=new Oj,this.quoteDepth=0,!e.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(e.ownerDocument.documentElement,!1)}return r.prototype.toIFrame=function(t,e){var n=this,i=$j(t,e);if(!i.contentWindow)return Promise.reject("Unable to find iframe window");var s=t.defaultView.pageXOffset,a=t.defaultView.pageYOffset,o=i.contentWindow,A=o.document,l=Kj(i).then(function(){return xs(n,void 0,void 0,function(){var c,u;return ss(this,function(h){switch(h.label){case 0:return this.scrolledElements.forEach(Yj),o&&(o.scrollTo(e.left,e.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(o.scrollY!==e.top||o.scrollX!==e.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(o.scrollX-e.left,o.scrollY-e.top,0,0))),c=this.options.onclone,u=this.clonedReferenceElement,typeof u>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:A.fonts&&A.fonts.ready?[4,A.fonts.ready]:[3,2];case 1:h.sent(),h.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,Gj(A)]:[3,4];case 3:h.sent(),h.label=4;case 4:return typeof c=="function"?[2,Promise.resolve().then(function(){return c(A,u)}).then(function(){return i})]:[2,i]}})})});return A.open(),A.write(qj(document.doctype)+"<html></html>"),Wj(this.referenceElement.ownerDocument,s,a),A.replaceChild(A.adoptNode(this.documentElement),A.documentElement),A.close(),l},r.prototype.createElementClone=function(t){if(_1(t,2))debugger;if(XT(t))return this.createCanvasClone(t);if(O5(t))return this.createVideoClone(t);if(H5(t))return this.createStyleClone(t);var e=t.cloneNode(!1);return S1(e)&&(S1(t)&&t.currentSrc&&t.currentSrc!==t.src&&(e.src=t.currentSrc,e.srcset=""),e.loading==="lazy"&&(e.loading="eager")),V5(e)?this.createCustomElementClone(e):e},r.prototype.createCustomElementClone=function(t){var e=document.createElement("html2canvascustomelement");return $y(t.style,e),e},r.prototype.createStyleClone=function(t){try{var e=t.sheet;if(e&&e.cssRules){var n=[].slice.call(e.cssRules,0).reduce(function(s,a){return a&&typeof a.cssText=="string"?s+a.cssText:s},""),i=t.cloneNode(!1);return i.textContent=n,i}}catch(s){if(this.context.logger.error("Unable to access cssRules property",s),s.name!=="SecurityError")throw s}return t.cloneNode(!1)},r.prototype.createCanvasClone=function(t){var e;if(this.options.inlineImages&&t.ownerDocument){var n=t.ownerDocument.createElement("img");try{return n.src=t.toDataURL(),n}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",t)}}var i=t.cloneNode(!1);try{i.width=t.width,i.height=t.height;var s=t.getContext("2d"),a=i.getContext("2d");if(a)if(!this.options.allowTaint&&s)a.putImageData(s.getImageData(0,0,t.width,t.height),0,0);else{var o=(e=t.getContext("webgl2"))!==null&&e!==void 0?e:t.getContext("webgl");if(o){var A=o.getContextAttributes();(A==null?void 0:A.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",t)}a.drawImage(t,0,0)}return i}catch{this.context.logger.info("Unable to clone canvas as it is tainted",t)}return i},r.prototype.createVideoClone=function(t){var e=t.ownerDocument.createElement("canvas");e.width=t.offsetWidth,e.height=t.offsetHeight;var n=e.getContext("2d");try{return n&&(n.drawImage(t,0,0,e.width,e.height),this.options.allowTaint||n.getImageData(0,0,e.width,e.height)),e}catch{this.context.logger.info("Unable to clone video as it is tainted",t)}var i=t.ownerDocument.createElement("canvas");return i.width=t.offsetWidth,i.height=t.offsetHeight,i},r.prototype.appendChildNode=function(t,e,n){(!nd(e)||!Qj(e)&&!e.hasAttribute(e4)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(e)))&&(!this.options.copyStyles||!nd(e)||!H5(e))&&t.appendChild(this.cloneNode(e,n))},r.prototype.cloneChildNodes=function(t,e,n){for(var i=this,s=t.shadowRoot?t.shadowRoot.firstChild:t.firstChild;s;s=s.nextSibling)if(nd(s)&&ZT(s)&&typeof s.assignedNodes=="function"){var a=s.assignedNodes();a.length&&a.forEach(function(o){return i.appendChildNode(e,o,n)})}else this.appendChildNode(e,s,n)},r.prototype.cloneNode=function(t,e){if(WT(t))return document.createTextNode(t.data);if(!t.ownerDocument)return t.cloneNode(!1);var n=t.ownerDocument.defaultView;if(n&&nd(t)&&(E1(t)||Em(t))){var i=this.createElementClone(t);i.style.transitionProperty="none";var s=n.getComputedStyle(t),a=n.getComputedStyle(t,":before"),o=n.getComputedStyle(t,":after");this.referenceElement===t&&E1(i)&&(this.clonedReferenceElement=i),A2(i)&&Zj(i);var A=this.counters.parse(new C5(this.context,s)),l=this.resolvePseudoContent(t,i,a,ff.BEFORE);V5(t)&&(e=!0),O5(t)||this.cloneChildNodes(t,i,e),l&&i.insertBefore(l,i.firstChild);var c=this.resolvePseudoContent(t,i,o,ff.AFTER);return c&&i.appendChild(c),this.counters.pop(A),(s&&(this.options.copyStyles||Em(t))&&!JT(t)||e)&&$y(s,i),(t.scrollTop!==0||t.scrollLeft!==0)&&this.scrolledElements.push([i,t.scrollLeft,t.scrollTop]),(u0(t)||d0(t))&&(u0(i)||d0(i))&&(i.value=t.value),i}return t.cloneNode(!1)},r.prototype.resolvePseudoContent=function(t,e,n,i){var s=this;if(n){var a=n.content,o=e.ownerDocument;if(!(!o||!a||a==="none"||a==="-moz-alt-content"||n.display==="none")){this.counters.parse(new C5(this.context,n));var A=new N$(this.context,n),l=o.createElement("html2canvaspseudoelement");$y(n,l),A.content.forEach(function(u){if(u.type===0)l.appendChild(o.createTextNode(u.value));else if(u.type===22){var h=o.createElement("img");h.src=u.value,h.style.opacity="1",l.appendChild(h)}else if(u.type===18){if(u.name==="attr"){var d=u.values.filter(Gr);d.length&&l.appendChild(o.createTextNode(t.getAttribute(d[0].value)||""))}else if(u.name==="counter"){var m=u.values.filter(Sd),f=m[0],b=m[1];if(f&&Gr(f)){var y=s.counters.getCounterValue(f.value),B=b&&Gr(b)?x1.parse(s.context,b.value):3;l.appendChild(o.createTextNode(Mf(y,B,!1)))}}else if(u.name==="counters"){var I=u.values.filter(Sd),f=I[0],C=I[1],b=I[2];if(f&&Gr(f)){var N=s.counters.getCounterValues(f.value),R=b&&Gr(b)?x1.parse(s.context,b.value):3,U=C&&C.type===0?C.value:"",x=N.map(function(E){return Mf(E,R,!1)}).join(U);l.appendChild(o.createTextNode(x))}}}else if(u.type===20)switch(u.value){case"open-quote":l.appendChild(o.createTextNode(B5(A.quotes,s.quoteDepth++,!0)));break;case"close-quote":l.appendChild(o.createTextNode(B5(A.quotes,--s.quoteDepth,!1)));break;default:l.appendChild(o.createTextNode(u.value))}}),l.className=k1+" "+I1;var c=i===ff.BEFORE?" "+k1:" "+I1;return Em(e)?e.className.baseValue+=c:e.className+=c,l}}},r.destroy=function(t){return t.parentNode?(t.parentNode.removeChild(t),!0):!1},r})(),ff;(function(r){r[r.BEFORE=0]="BEFORE",r[r.AFTER=1]="AFTER"})(ff||(ff={}));var $j=function(r,t){var e=r.createElement("iframe");return e.className="html2canvas-container",e.style.visibility="hidden",e.style.position="fixed",e.style.left="-10000px",e.style.top="0px",e.style.border="0",e.width=t.width.toString(),e.height=t.height.toString(),e.scrolling="no",e.setAttribute(e4,"true"),r.body.appendChild(e),e},jj=function(r){return new Promise(function(t){if(r.complete){t();return}if(!r.src){t();return}r.onload=t,r.onerror=t})},Gj=function(r){return Promise.all([].slice.call(r.images,0).map(jj))},Kj=function(r){return new Promise(function(t,e){var n=r.contentWindow;if(!n)return e("No window assigned for iframe");var i=n.document;n.onload=r.onload=function(){n.onload=r.onload=null;var s=setInterval(function(){i.body.childNodes.length>0&&i.readyState==="complete"&&(clearInterval(s),t(r))},50)}})},zj=["all","d","content"],$y=function(r,t){for(var e=r.length-1;e>=0;e--){var n=r.item(e);zj.indexOf(n)===-1&&t.style.setProperty(n,r.getPropertyValue(n))}return t},qj=function(r){var t="";return r&&(t+="<!DOCTYPE ",r.name&&(t+=r.name),r.internalSubset&&(t+=r.internalSubset),r.publicId&&(t+='"'+r.publicId+'"'),r.systemId&&(t+='"'+r.systemId+'"'),t+=">"),t},Wj=function(r,t,e){r&&r.defaultView&&(t!==r.defaultView.pageXOffset||e!==r.defaultView.pageYOffset)&&r.defaultView.scrollTo(t,e)},Yj=function(r){var t=r[0],e=r[1],n=r[2];t.scrollLeft=e,t.scrollTop=n},Xj=":before",Jj=":after",k1="___html2canvas___pseudoelement_before",I1="___html2canvas___pseudoelement_after",W5=`{
    content: "" !important;
    display: none !important;
}`,Zj=function(r){tG(r,"."+k1+Xj+W5+`
         .`+I1+Jj+W5)},tG=function(r,t){var e=r.ownerDocument;if(e){var n=e.createElement("style");n.textContent=t,r.appendChild(n)}},r4=(function(){function r(){}return r.getOrigin=function(t){var e=r._link;return e?(e.href=t,e.href=e.href,e.protocol+e.hostname+e.port):"about:blank"},r.isSameOrigin=function(t){return r.getOrigin(t)===r._origin},r.setContext=function(t){r._link=t.document.createElement("a"),r._origin=r.getOrigin(t.location.href)},r._origin="about:blank",r})(),eG=(function(){function r(t,e){this.context=t,this._options=e,this._cache={}}return r.prototype.addImage=function(t){var e=Promise.resolve();return this.has(t)||(Gy(t)||sG(t))&&(this._cache[t]=this.loadImage(t)).catch(function(){}),e},r.prototype.match=function(t){return this._cache[t]},r.prototype.loadImage=function(t){return xs(this,void 0,void 0,function(){var e,n,i,s,a=this;return ss(this,function(o){switch(o.label){case 0:return e=r4.isSameOrigin(t),n=!jy(t)&&this._options.useCORS===!0&&Gi.SUPPORT_CORS_IMAGES&&!e,i=!jy(t)&&!e&&!Gy(t)&&typeof this._options.proxy=="string"&&Gi.SUPPORT_CORS_XHR&&!n,!e&&this._options.allowTaint===!1&&!jy(t)&&!Gy(t)&&!i&&!n?[2]:(s=t,i?[4,this.proxy(s)]:[3,2]);case 1:s=o.sent(),o.label=2;case 2:return this.context.logger.debug("Added image "+t.substring(0,256)),[4,new Promise(function(A,l){var c=new Image;c.onload=function(){return A(c)},c.onerror=l,(aG(s)||n)&&(c.crossOrigin="anonymous"),c.src=s,c.complete===!0&&setTimeout(function(){return A(c)},500),a._options.imageTimeout>0&&setTimeout(function(){return l("Timed out ("+a._options.imageTimeout+"ms) loading image")},a._options.imageTimeout)})];case 3:return[2,o.sent()]}})})},r.prototype.has=function(t){return typeof this._cache[t]<"u"},r.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},r.prototype.proxy=function(t){var e=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var i=t.substring(0,256);return new Promise(function(s,a){var o=Gi.SUPPORT_RESPONSE_TYPE?"blob":"text",A=new XMLHttpRequest;A.onload=function(){if(A.status===200)if(o==="text")s(A.response);else{var u=new FileReader;u.addEventListener("load",function(){return s(u.result)},!1),u.addEventListener("error",function(h){return a(h)},!1),u.readAsDataURL(A.response)}else a("Failed to proxy resource "+i+" with status code "+A.status)},A.onerror=a;var l=n.indexOf("?")>-1?"&":"?";if(A.open("GET",""+n+l+"url="+encodeURIComponent(t)+"&responseType="+o),o!=="text"&&A instanceof XMLHttpRequest&&(A.responseType=o),e._options.imageTimeout){var c=e._options.imageTimeout;A.timeout=c,A.ontimeout=function(){return a("Timed out ("+c+"ms) proxying "+i)}}A.send()})},r})(),rG=/^data:image\/svg\+xml/i,nG=/^data:image\/.*;base64,/i,iG=/^data:image\/.*/i,sG=function(r){return Gi.SUPPORT_SVG_DRAWING||!oG(r)},jy=function(r){return iG.test(r)},aG=function(r){return nG.test(r)},Gy=function(r){return r.substr(0,4)==="blob"},oG=function(r){return r.substr(-3).toLowerCase()==="svg"||rG.test(r)},ue=(function(){function r(t,e){this.type=0,this.x=t,this.y=e}return r.prototype.add=function(t,e){return new r(this.x+t,this.y+e)},r})(),Hu=function(r,t,e){return new ue(r.x+(t.x-r.x)*e,r.y+(t.y-r.y)*e)},Hp=(function(){function r(t,e,n,i){this.type=1,this.start=t,this.startControl=e,this.endControl=n,this.end=i}return r.prototype.subdivide=function(t,e){var n=Hu(this.start,this.startControl,t),i=Hu(this.startControl,this.endControl,t),s=Hu(this.endControl,this.end,t),a=Hu(n,i,t),o=Hu(i,s,t),A=Hu(a,o,t);return e?new r(this.start,n,a,A):new r(A,o,s,this.end)},r.prototype.add=function(t,e){return new r(this.start.add(t,e),this.startControl.add(t,e),this.endControl.add(t,e),this.end.add(t,e))},r.prototype.reverse=function(){return new r(this.end,this.endControl,this.startControl,this.start)},r})(),Ia=function(r){return r.type===1},AG=(function(){function r(t){var e=t.styles,n=t.bounds,i=Vh(e.borderTopLeftRadius,n.width,n.height),s=i[0],a=i[1],o=Vh(e.borderTopRightRadius,n.width,n.height),A=o[0],l=o[1],c=Vh(e.borderBottomRightRadius,n.width,n.height),u=c[0],h=c[1],d=Vh(e.borderBottomLeftRadius,n.width,n.height),m=d[0],f=d[1],b=[];b.push((s+A)/n.width),b.push((m+u)/n.width),b.push((a+f)/n.height),b.push((l+h)/n.height);var y=Math.max.apply(Math,b);y>1&&(s/=y,a/=y,A/=y,l/=y,u/=y,h/=y,m/=y,f/=y);var B=n.width-A,I=n.height-h,C=n.width-u,N=n.height-f,R=e.borderTopWidth,U=e.borderRightWidth,x=e.borderBottomWidth,v=e.borderLeftWidth,T=on(e.paddingTop,t.bounds.width),E=on(e.paddingRight,t.bounds.width),_=on(e.paddingBottom,t.bounds.width),F=on(e.paddingLeft,t.bounds.width);this.topLeftBorderDoubleOuterBox=s>0||a>0?vn(n.left+v/3,n.top+R/3,s-v/3,a-R/3,Nr.TOP_LEFT):new ue(n.left+v/3,n.top+R/3),this.topRightBorderDoubleOuterBox=s>0||a>0?vn(n.left+B,n.top+R/3,A-U/3,l-R/3,Nr.TOP_RIGHT):new ue(n.left+n.width-U/3,n.top+R/3),this.bottomRightBorderDoubleOuterBox=u>0||h>0?vn(n.left+C,n.top+I,u-U/3,h-x/3,Nr.BOTTOM_RIGHT):new ue(n.left+n.width-U/3,n.top+n.height-x/3),this.bottomLeftBorderDoubleOuterBox=m>0||f>0?vn(n.left+v/3,n.top+N,m-v/3,f-x/3,Nr.BOTTOM_LEFT):new ue(n.left+v/3,n.top+n.height-x/3),this.topLeftBorderDoubleInnerBox=s>0||a>0?vn(n.left+v*2/3,n.top+R*2/3,s-v*2/3,a-R*2/3,Nr.TOP_LEFT):new ue(n.left+v*2/3,n.top+R*2/3),this.topRightBorderDoubleInnerBox=s>0||a>0?vn(n.left+B,n.top+R*2/3,A-U*2/3,l-R*2/3,Nr.TOP_RIGHT):new ue(n.left+n.width-U*2/3,n.top+R*2/3),this.bottomRightBorderDoubleInnerBox=u>0||h>0?vn(n.left+C,n.top+I,u-U*2/3,h-x*2/3,Nr.BOTTOM_RIGHT):new ue(n.left+n.width-U*2/3,n.top+n.height-x*2/3),this.bottomLeftBorderDoubleInnerBox=m>0||f>0?vn(n.left+v*2/3,n.top+N,m-v*2/3,f-x*2/3,Nr.BOTTOM_LEFT):new ue(n.left+v*2/3,n.top+n.height-x*2/3),this.topLeftBorderStroke=s>0||a>0?vn(n.left+v/2,n.top+R/2,s-v/2,a-R/2,Nr.TOP_LEFT):new ue(n.left+v/2,n.top+R/2),this.topRightBorderStroke=s>0||a>0?vn(n.left+B,n.top+R/2,A-U/2,l-R/2,Nr.TOP_RIGHT):new ue(n.left+n.width-U/2,n.top+R/2),this.bottomRightBorderStroke=u>0||h>0?vn(n.left+C,n.top+I,u-U/2,h-x/2,Nr.BOTTOM_RIGHT):new ue(n.left+n.width-U/2,n.top+n.height-x/2),this.bottomLeftBorderStroke=m>0||f>0?vn(n.left+v/2,n.top+N,m-v/2,f-x/2,Nr.BOTTOM_LEFT):new ue(n.left+v/2,n.top+n.height-x/2),this.topLeftBorderBox=s>0||a>0?vn(n.left,n.top,s,a,Nr.TOP_LEFT):new ue(n.left,n.top),this.topRightBorderBox=A>0||l>0?vn(n.left+B,n.top,A,l,Nr.TOP_RIGHT):new ue(n.left+n.width,n.top),this.bottomRightBorderBox=u>0||h>0?vn(n.left+C,n.top+I,u,h,Nr.BOTTOM_RIGHT):new ue(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=m>0||f>0?vn(n.left,n.top+N,m,f,Nr.BOTTOM_LEFT):new ue(n.left,n.top+n.height),this.topLeftPaddingBox=s>0||a>0?vn(n.left+v,n.top+R,Math.max(0,s-v),Math.max(0,a-R),Nr.TOP_LEFT):new ue(n.left+v,n.top+R),this.topRightPaddingBox=A>0||l>0?vn(n.left+Math.min(B,n.width-U),n.top+R,B>n.width+U?0:Math.max(0,A-U),Math.max(0,l-R),Nr.TOP_RIGHT):new ue(n.left+n.width-U,n.top+R),this.bottomRightPaddingBox=u>0||h>0?vn(n.left+Math.min(C,n.width-v),n.top+Math.min(I,n.height-x),Math.max(0,u-U),Math.max(0,h-x),Nr.BOTTOM_RIGHT):new ue(n.left+n.width-U,n.top+n.height-x),this.bottomLeftPaddingBox=m>0||f>0?vn(n.left+v,n.top+Math.min(N,n.height-x),Math.max(0,m-v),Math.max(0,f-x),Nr.BOTTOM_LEFT):new ue(n.left+v,n.top+n.height-x),this.topLeftContentBox=s>0||a>0?vn(n.left+v+F,n.top+R+T,Math.max(0,s-(v+F)),Math.max(0,a-(R+T)),Nr.TOP_LEFT):new ue(n.left+v+F,n.top+R+T),this.topRightContentBox=A>0||l>0?vn(n.left+Math.min(B,n.width+v+F),n.top+R+T,B>n.width+v+F?0:A-v+F,l-(R+T),Nr.TOP_RIGHT):new ue(n.left+n.width-(U+E),n.top+R+T),this.bottomRightContentBox=u>0||h>0?vn(n.left+Math.min(C,n.width-(v+F)),n.top+Math.min(I,n.height+R+T),Math.max(0,u-(U+E)),h-(x+_),Nr.BOTTOM_RIGHT):new ue(n.left+n.width-(U+E),n.top+n.height-(x+_)),this.bottomLeftContentBox=m>0||f>0?vn(n.left+v+F,n.top+N,Math.max(0,m-(v+F)),f-(x+_),Nr.BOTTOM_LEFT):new ue(n.left+v+F,n.top+n.height-(x+_))}return r})(),Nr;(function(r){r[r.TOP_LEFT=0]="TOP_LEFT",r[r.TOP_RIGHT=1]="TOP_RIGHT",r[r.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",r[r.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(Nr||(Nr={}));var vn=function(r,t,e,n,i){var s=4*((Math.sqrt(2)-1)/3),a=e*s,o=n*s,A=r+e,l=t+n;switch(i){case Nr.TOP_LEFT:return new Hp(new ue(r,l),new ue(r,l-o),new ue(A-a,t),new ue(A,t));case Nr.TOP_RIGHT:return new Hp(new ue(r,t),new ue(r+a,t),new ue(A,l-o),new ue(A,l));case Nr.BOTTOM_RIGHT:return new Hp(new ue(A,t),new ue(A,t+o),new ue(r+a,l),new ue(r,l));case Nr.BOTTOM_LEFT:default:return new Hp(new ue(A,l),new ue(A-a,l),new ue(r,t+o),new ue(r,t))}},h0=function(r){return[r.topLeftBorderBox,r.topRightBorderBox,r.bottomRightBorderBox,r.bottomLeftBorderBox]},lG=function(r){return[r.topLeftContentBox,r.topRightContentBox,r.bottomRightContentBox,r.bottomLeftContentBox]},f0=function(r){return[r.topLeftPaddingBox,r.topRightPaddingBox,r.bottomRightPaddingBox,r.bottomLeftPaddingBox]},cG=(function(){function r(t,e,n){this.offsetX=t,this.offsetY=e,this.matrix=n,this.type=0,this.target=6}return r})(),Vp=(function(){function r(t,e){this.path=t,this.target=e,this.type=1}return r})(),uG=(function(){function r(t){this.opacity=t,this.type=2,this.target=6}return r})(),dG=function(r){return r.type===0},n4=function(r){return r.type===1},hG=function(r){return r.type===2},Y5=function(r,t){return r.length===t.length?r.some(function(e,n){return e===t[n]}):!1},fG=function(r,t,e,n,i){return r.map(function(s,a){switch(a){case 0:return s.add(t,e);case 1:return s.add(t+n,e);case 2:return s.add(t+n,e+i);case 3:return s.add(t,e+i)}return s})},i4=(function(){function r(t){this.element=t,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return r})(),s4=(function(){function r(t,e){if(this.container=t,this.parent=e,this.effects=[],this.curves=new AG(this.container),this.container.styles.opacity<1&&this.effects.push(new uG(this.container.styles.opacity)),this.container.styles.transform!==null){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,i=this.container.bounds.top+this.container.styles.transformOrigin[1].number,s=this.container.styles.transform;this.effects.push(new cG(n,i,s))}if(this.container.styles.overflowX!==0){var a=h0(this.curves),o=f0(this.curves);Y5(a,o)?this.effects.push(new Vp(a,6)):(this.effects.push(new Vp(a,2)),this.effects.push(new Vp(o,4)))}}return r.prototype.getEffects=function(t){for(var e=[2,3].indexOf(this.container.styles.position)===-1,n=this.parent,i=this.effects.slice(0);n;){var s=n.effects.filter(function(A){return!n4(A)});if(e||n.container.styles.position!==0||!n.parent){if(i.unshift.apply(i,s),e=[2,3].indexOf(n.container.styles.position)===-1,n.container.styles.overflowX!==0){var a=h0(n.curves),o=f0(n.curves);Y5(a,o)||i.unshift(new Vp(o,6))}}else i.unshift.apply(i,s);n=n.parent}return i.filter(function(A){return mi(A.target,t)})},r})(),T1=function(r,t,e,n){r.container.elements.forEach(function(i){var s=mi(i.flags,4),a=mi(i.flags,2),o=new s4(i,r);mi(i.styles.display,2048)&&n.push(o);var A=mi(i.flags,8)?[]:n;if(s||a){var l=s||i.styles.isPositioned()?e:t,c=new i4(o);if(i.styles.isPositioned()||i.styles.opacity<1||i.styles.isTransformed()){var u=i.styles.zIndex.order;if(u<0){var h=0;l.negativeZIndex.some(function(m,f){return u>m.element.container.styles.zIndex.order?(h=f,!1):h>0}),l.negativeZIndex.splice(h,0,c)}else if(u>0){var d=0;l.positiveZIndex.some(function(m,f){return u>=m.element.container.styles.zIndex.order?(d=f+1,!1):d>0}),l.positiveZIndex.splice(d,0,c)}else l.zeroOrAutoZIndexOrTransformedOrOpacity.push(c)}else i.styles.isFloating()?l.nonPositionedFloats.push(c):l.nonPositionedInlineLevel.push(c);T1(o,c,s?c:e,A)}else i.styles.isInlineLevel()?t.inlineLevel.push(o):t.nonInlineLevel.push(o),T1(o,t,e,A);mi(i.flags,8)&&a4(i,A)})},a4=function(r,t){for(var e=r instanceof C1?r.start:1,n=r instanceof C1?r.reversed:!1,i=0;i<t.length;i++){var s=t[i];s.container instanceof $T&&typeof s.container.value=="number"&&s.container.value!==0&&(e=s.container.value),s.listValue=Mf(e,s.container.styles.listStyleType,!0),e+=n?-1:1}},gG=function(r){var t=new s4(r,null),e=new i4(t),n=[];return T1(t,e,e,n),a4(t.container,n),e},X5=function(r,t){switch(t){case 0:return Fa(r.topLeftBorderBox,r.topLeftPaddingBox,r.topRightBorderBox,r.topRightPaddingBox);case 1:return Fa(r.topRightBorderBox,r.topRightPaddingBox,r.bottomRightBorderBox,r.bottomRightPaddingBox);case 2:return Fa(r.bottomRightBorderBox,r.bottomRightPaddingBox,r.bottomLeftBorderBox,r.bottomLeftPaddingBox);case 3:default:return Fa(r.bottomLeftBorderBox,r.bottomLeftPaddingBox,r.topLeftBorderBox,r.topLeftPaddingBox)}},pG=function(r,t){switch(t){case 0:return Fa(r.topLeftBorderBox,r.topLeftBorderDoubleOuterBox,r.topRightBorderBox,r.topRightBorderDoubleOuterBox);case 1:return Fa(r.topRightBorderBox,r.topRightBorderDoubleOuterBox,r.bottomRightBorderBox,r.bottomRightBorderDoubleOuterBox);case 2:return Fa(r.bottomRightBorderBox,r.bottomRightBorderDoubleOuterBox,r.bottomLeftBorderBox,r.bottomLeftBorderDoubleOuterBox);case 3:default:return Fa(r.bottomLeftBorderBox,r.bottomLeftBorderDoubleOuterBox,r.topLeftBorderBox,r.topLeftBorderDoubleOuterBox)}},mG=function(r,t){switch(t){case 0:return Fa(r.topLeftBorderDoubleInnerBox,r.topLeftPaddingBox,r.topRightBorderDoubleInnerBox,r.topRightPaddingBox);case 1:return Fa(r.topRightBorderDoubleInnerBox,r.topRightPaddingBox,r.bottomRightBorderDoubleInnerBox,r.bottomRightPaddingBox);case 2:return Fa(r.bottomRightBorderDoubleInnerBox,r.bottomRightPaddingBox,r.bottomLeftBorderDoubleInnerBox,r.bottomLeftPaddingBox);case 3:default:return Fa(r.bottomLeftBorderDoubleInnerBox,r.bottomLeftPaddingBox,r.topLeftBorderDoubleInnerBox,r.topLeftPaddingBox)}},bG=function(r,t){switch(t){case 0:return $p(r.topLeftBorderStroke,r.topRightBorderStroke);case 1:return $p(r.topRightBorderStroke,r.bottomRightBorderStroke);case 2:return $p(r.bottomRightBorderStroke,r.bottomLeftBorderStroke);case 3:default:return $p(r.bottomLeftBorderStroke,r.topLeftBorderStroke)}},$p=function(r,t){var e=[];return Ia(r)?e.push(r.subdivide(.5,!1)):e.push(r),Ia(t)?e.push(t.subdivide(.5,!0)):e.push(t),e},Fa=function(r,t,e,n){var i=[];return Ia(r)?i.push(r.subdivide(.5,!1)):i.push(r),Ia(e)?i.push(e.subdivide(.5,!0)):i.push(e),Ia(n)?i.push(n.subdivide(.5,!0).reverse()):i.push(n),Ia(t)?i.push(t.subdivide(.5,!1).reverse()):i.push(t),i},o4=function(r){var t=r.bounds,e=r.styles;return t.add(e.borderLeftWidth,e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth),-(e.borderTopWidth+e.borderBottomWidth))},g0=function(r){var t=r.styles,e=r.bounds,n=on(t.paddingLeft,e.width),i=on(t.paddingRight,e.width),s=on(t.paddingTop,e.width),a=on(t.paddingBottom,e.width);return e.add(n+t.borderLeftWidth,s+t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth+n+i),-(t.borderTopWidth+t.borderBottomWidth+s+a))},yG=function(r,t){return r===0?t.bounds:r===2?g0(t):o4(t)},wG=function(r,t){return r===0?t.bounds:r===2?g0(t):o4(t)},Ky=function(r,t,e){var n=yG(qu(r.styles.backgroundOrigin,t),r),i=wG(qu(r.styles.backgroundClip,t),r),s=vG(qu(r.styles.backgroundSize,t),e,n),a=s[0],o=s[1],A=Vh(qu(r.styles.backgroundPosition,t),n.width-a,n.height-o),l=xG(qu(r.styles.backgroundRepeat,t),A,s,n,i),c=Math.round(n.left+A[0]),u=Math.round(n.top+A[1]);return[l,c,u,a,o]},Vu=function(r){return Gr(r)&&r.value===ud.AUTO},jp=function(r){return typeof r=="number"},vG=function(r,t,e){var n=t[0],i=t[1],s=t[2],a=r[0],o=r[1];if(!a)return[0,0];if(ii(a)&&o&&ii(o))return[on(a,e.width),on(o,e.height)];var A=jp(s);if(Gr(a)&&(a.value===ud.CONTAIN||a.value===ud.COVER)){if(jp(s)){var l=e.width/e.height;return l<s!=(a.value===ud.COVER)?[e.width,e.width/s]:[e.height*s,e.height]}return[e.width,e.height]}var c=jp(n),u=jp(i),h=c||u;if(Vu(a)&&(!o||Vu(o))){if(c&&u)return[n,i];if(!A&&!h)return[e.width,e.height];if(h&&A){var d=c?n:i*s,m=u?i:n/s;return[d,m]}var f=c?n:e.width,b=u?i:e.height;return[f,b]}if(A){var y=0,B=0;return ii(a)?y=on(a,e.width):ii(o)&&(B=on(o,e.height)),Vu(a)?y=B*s:(!o||Vu(o))&&(B=y/s),[y,B]}var I=null,C=null;if(ii(a)?I=on(a,e.width):o&&ii(o)&&(C=on(o,e.height)),I!==null&&(!o||Vu(o))&&(C=c&&u?I/n*i:e.height),C!==null&&Vu(a)&&(I=c&&u?C/i*n:e.width),I!==null&&C!==null)return[I,C];throw new Error("Unable to calculate background-size for element")},qu=function(r,t){var e=r[t];return typeof e>"u"?r[0]:e},xG=function(r,t,e,n,i){var s=t[0],a=t[1],o=e[0],A=e[1];switch(r){case 2:return[new ue(Math.round(n.left),Math.round(n.top+a)),new ue(Math.round(n.left+n.width),Math.round(n.top+a)),new ue(Math.round(n.left+n.width),Math.round(A+n.top+a)),new ue(Math.round(n.left),Math.round(A+n.top+a))];case 3:return[new ue(Math.round(n.left+s),Math.round(n.top)),new ue(Math.round(n.left+s+o),Math.round(n.top)),new ue(Math.round(n.left+s+o),Math.round(n.height+n.top)),new ue(Math.round(n.left+s),Math.round(n.height+n.top))];case 1:return[new ue(Math.round(n.left+s),Math.round(n.top+a)),new ue(Math.round(n.left+s+o),Math.round(n.top+a)),new ue(Math.round(n.left+s+o),Math.round(n.top+a+A)),new ue(Math.round(n.left+s),Math.round(n.top+a+A))];default:return[new ue(Math.round(i.left),Math.round(i.top)),new ue(Math.round(i.left+i.width),Math.round(i.top)),new ue(Math.round(i.left+i.width),Math.round(i.height+i.top)),new ue(Math.round(i.left),Math.round(i.height+i.top))]}},_G="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",J5="Hidden Text",BG=(function(){function r(t){this._data={},this._document=t}return r.prototype.parseMetrics=function(t,e){var n=this._document.createElement("div"),i=this._document.createElement("img"),s=this._document.createElement("span"),a=this._document.body;n.style.visibility="hidden",n.style.fontFamily=t,n.style.fontSize=e,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",a.appendChild(n),i.src=_G,i.width=1,i.height=1,i.style.margin="0",i.style.padding="0",i.style.verticalAlign="baseline",s.style.fontFamily=t,s.style.fontSize=e,s.style.margin="0",s.style.padding="0",s.appendChild(this._document.createTextNode(J5)),n.appendChild(s),n.appendChild(i);var o=i.offsetTop-s.offsetTop+2;n.removeChild(s),n.appendChild(this._document.createTextNode(J5)),n.style.lineHeight="normal",i.style.verticalAlign="super";var A=i.offsetTop-n.offsetTop+2;return a.removeChild(n),{baseline:o,middle:A}},r.prototype.getMetrics=function(t,e){var n=t+" "+e;return typeof this._data[n]>"u"&&(this._data[n]=this.parseMetrics(t,e)),this._data[n]},r})(),A4=(function(){function r(t,e){this.context=t,this.options=e}return r})(),CG=1e4,EG=(function(r){no(t,r);function t(e,n){var i=r.call(this,e,n)||this;return i._activeEffects=[],i.canvas=n.canvas?n.canvas:document.createElement("canvas"),i.ctx=i.canvas.getContext("2d"),n.canvas||(i.canvas.width=Math.floor(n.width*n.scale),i.canvas.height=Math.floor(n.height*n.scale),i.canvas.style.width=n.width+"px",i.canvas.style.height=n.height+"px"),i.fontMetrics=new BG(document),i.ctx.scale(i.options.scale,i.options.scale),i.ctx.translate(-n.x,-n.y),i.ctx.textBaseline="bottom",i._activeEffects=[],i.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),i}return t.prototype.applyEffects=function(e){for(var n=this;this._activeEffects.length;)this.popEffect();e.forEach(function(i){return n.applyEffect(i)})},t.prototype.applyEffect=function(e){this.ctx.save(),hG(e)&&(this.ctx.globalAlpha=e.opacity),dG(e)&&(this.ctx.translate(e.offsetX,e.offsetY),this.ctx.transform(e.matrix[0],e.matrix[1],e.matrix[2],e.matrix[3],e.matrix[4],e.matrix[5]),this.ctx.translate(-e.offsetX,-e.offsetY)),n4(e)&&(this.path(e.path),this.ctx.clip()),this._activeEffects.push(e)},t.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},t.prototype.renderStack=function(e){return xs(this,void 0,void 0,function(){var n;return ss(this,function(i){switch(i.label){case 0:return n=e.element.container.styles,n.isVisible()?[4,this.renderStackContent(e)]:[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}})})},t.prototype.renderNode=function(e){return xs(this,void 0,void 0,function(){return ss(this,function(n){switch(n.label){case 0:if(mi(e.container.flags,16))debugger;return e.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(e)]:[3,3];case 1:return n.sent(),[4,this.renderNodeContent(e)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},t.prototype.renderTextWithLetterSpacing=function(e,n,i){var s=this;if(n===0)this.ctx.fillText(e.text,e.bounds.left,e.bounds.top+i);else{var a=a2(e.text);a.reduce(function(o,A){return s.ctx.fillText(A,o,e.bounds.top+i),o+s.ctx.measureText(A).width},e.bounds.left)}},t.prototype.createFontStyle=function(e){var n=e.fontVariant.filter(function(a){return a==="normal"||a==="small-caps"}).join(""),i=FG(e.fontFamily).join(", "),s=Ag(e.fontSize)?""+e.fontSize.number+e.fontSize.unit:e.fontSize.number+"px";return[[e.fontStyle,n,e.fontWeight,s,i].join(" "),i,s]},t.prototype.renderTextNode=function(e,n){return xs(this,void 0,void 0,function(){var i,s,a,o,A,l,c,u,h=this;return ss(this,function(d){return i=this.createFontStyle(n),s=i[0],a=i[1],o=i[2],this.ctx.font=s,this.ctx.direction=n.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",A=this.fontMetrics.getMetrics(a,o),l=A.baseline,c=A.middle,u=n.paintOrder,e.textBounds.forEach(function(m){u.forEach(function(f){switch(f){case 0:h.ctx.fillStyle=Si(n.color),h.renderTextWithLetterSpacing(m,n.letterSpacing,l);var b=n.textShadow;b.length&&m.text.trim().length&&(b.slice(0).reverse().forEach(function(y){h.ctx.shadowColor=Si(y.color),h.ctx.shadowOffsetX=y.offsetX.number*h.options.scale,h.ctx.shadowOffsetY=y.offsetY.number*h.options.scale,h.ctx.shadowBlur=y.blur.number,h.renderTextWithLetterSpacing(m,n.letterSpacing,l)}),h.ctx.shadowColor="",h.ctx.shadowOffsetX=0,h.ctx.shadowOffsetY=0,h.ctx.shadowBlur=0),n.textDecorationLine.length&&(h.ctx.fillStyle=Si(n.textDecorationColor||n.color),n.textDecorationLine.forEach(function(y){switch(y){case 1:h.ctx.fillRect(m.bounds.left,Math.round(m.bounds.top+l),m.bounds.width,1);break;case 2:h.ctx.fillRect(m.bounds.left,Math.round(m.bounds.top),m.bounds.width,1);break;case 3:h.ctx.fillRect(m.bounds.left,Math.ceil(m.bounds.top+c),m.bounds.width,1);break}}));break;case 1:n.webkitTextStrokeWidth&&m.text.trim().length&&(h.ctx.strokeStyle=Si(n.webkitTextStrokeColor),h.ctx.lineWidth=n.webkitTextStrokeWidth,h.ctx.lineJoin=window.chrome?"miter":"round",h.ctx.strokeText(m.text,m.bounds.left,m.bounds.top+l)),h.ctx.strokeStyle="",h.ctx.lineWidth=0,h.ctx.lineJoin="miter";break}})}),[2]})})},t.prototype.renderReplacedElement=function(e,n,i){if(i&&e.intrinsicWidth>0&&e.intrinsicHeight>0){var s=g0(e),a=f0(n);this.path(a),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(i,0,0,e.intrinsicWidth,e.intrinsicHeight,s.left,s.top,s.width,s.height),this.ctx.restore()}},t.prototype.renderNodeContent=function(e){return xs(this,void 0,void 0,function(){var n,i,s,a,o,A,B,B,l,c,u,h,C,d,m,N,f,b,y,B,I,C,N;return ss(this,function(R){switch(R.label){case 0:this.applyEffects(e.getEffects(4)),n=e.container,i=e.curves,s=n.styles,a=0,o=n.textNodes,R.label=1;case 1:return a<o.length?(A=o[a],[4,this.renderTextNode(A,s)]):[3,4];case 2:R.sent(),R.label=3;case 3:return a++,[3,1];case 4:if(!(n instanceof OT))return[3,8];R.label=5;case 5:return R.trys.push([5,7,,8]),[4,this.context.cache.match(n.src)];case 6:return B=R.sent(),this.renderReplacedElement(n,i,B),[3,8];case 7:return R.sent(),this.context.logger.error("Error loading image "+n.src),[3,8];case 8:if(n instanceof HT&&this.renderReplacedElement(n,i,n.canvas),!(n instanceof VT))return[3,12];R.label=9;case 9:return R.trys.push([9,11,,12]),[4,this.context.cache.match(n.svg)];case 10:return B=R.sent(),this.renderReplacedElement(n,i,B),[3,12];case 11:return R.sent(),this.context.logger.error("Error loading svg "+n.svg.substring(0,255)),[3,12];case 12:return n instanceof KT&&n.tree?(l=new t(this.context,{scale:this.options.scale,backgroundColor:n.backgroundColor,x:0,y:0,width:n.width,height:n.height}),[4,l.render(n.tree)]):[3,14];case 13:c=R.sent(),n.width&&n.height&&this.ctx.drawImage(c,0,0,n.width,n.height,n.bounds.left,n.bounds.top,n.bounds.width,n.bounds.height),R.label=14;case 14:if(n instanceof o2&&(u=Math.min(n.bounds.width,n.bounds.height),n.type===l0?n.checked&&(this.ctx.save(),this.path([new ue(n.bounds.left+u*.39363,n.bounds.top+u*.79),new ue(n.bounds.left+u*.16,n.bounds.top+u*.5549),new ue(n.bounds.left+u*.27347,n.bounds.top+u*.44071),new ue(n.bounds.left+u*.39694,n.bounds.top+u*.5649),new ue(n.bounds.left+u*.72983,n.bounds.top+u*.23),new ue(n.bounds.left+u*.84,n.bounds.top+u*.34085),new ue(n.bounds.left+u*.39363,n.bounds.top+u*.79)]),this.ctx.fillStyle=Si(Q5),this.ctx.fill(),this.ctx.restore()):n.type===c0&&n.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(n.bounds.left+u/2,n.bounds.top+u/2,u/4,0,Math.PI*2,!0),this.ctx.fillStyle=Si(Q5),this.ctx.fill(),this.ctx.restore())),SG(n)&&n.value.length){switch(h=this.createFontStyle(s),C=h[0],d=h[1],m=this.fontMetrics.getMetrics(C,d).baseline,this.ctx.font=C,this.ctx.fillStyle=Si(s.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=IG(n.styles.textAlign),N=g0(n),f=0,n.styles.textAlign){case 1:f+=N.width/2;break;case 2:f+=N.width;break}b=N.add(f,0,0,-N.height/2+1),this.ctx.save(),this.path([new ue(N.left,N.top),new ue(N.left+N.width,N.top),new ue(N.left+N.width,N.top+N.height),new ue(N.left,N.top+N.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new hf(n.value,b),s.letterSpacing,m),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!mi(n.styles.display,2048))return[3,20];if(n.styles.listStyleImage===null)return[3,19];if(y=n.styles.listStyleImage,y.type!==0)return[3,18];B=void 0,I=y.url,R.label=15;case 15:return R.trys.push([15,17,,18]),[4,this.context.cache.match(I)];case 16:return B=R.sent(),this.ctx.drawImage(B,n.bounds.left-(B.width+10),n.bounds.top),[3,18];case 17:return R.sent(),this.context.logger.error("Error loading list-style-image "+I),[3,18];case 18:return[3,20];case 19:e.listValue&&n.styles.listStyleType!==-1&&(C=this.createFontStyle(s)[0],this.ctx.font=C,this.ctx.fillStyle=Si(s.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",N=new LA(n.bounds.left,n.bounds.top+on(n.styles.paddingTop,n.bounds.width),n.bounds.width,x5(s.lineHeight,s.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new hf(e.listValue,N),s.letterSpacing,x5(s.lineHeight,s.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),R.label=20;case 20:return[2]}})})},t.prototype.renderStackContent=function(e){return xs(this,void 0,void 0,function(){var n,i,y,s,a,y,o,A,y,l,c,y,u,h,y,d,m,y,f,b,y;return ss(this,function(B){switch(B.label){case 0:if(mi(e.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(e.element)];case 1:B.sent(),n=0,i=e.negativeZIndex,B.label=2;case 2:return n<i.length?(y=i[n],[4,this.renderStack(y)]):[3,5];case 3:B.sent(),B.label=4;case 4:return n++,[3,2];case 5:return[4,this.renderNodeContent(e.element)];case 6:B.sent(),s=0,a=e.nonInlineLevel,B.label=7;case 7:return s<a.length?(y=a[s],[4,this.renderNode(y)]):[3,10];case 8:B.sent(),B.label=9;case 9:return s++,[3,7];case 10:o=0,A=e.nonPositionedFloats,B.label=11;case 11:return o<A.length?(y=A[o],[4,this.renderStack(y)]):[3,14];case 12:B.sent(),B.label=13;case 13:return o++,[3,11];case 14:l=0,c=e.nonPositionedInlineLevel,B.label=15;case 15:return l<c.length?(y=c[l],[4,this.renderStack(y)]):[3,18];case 16:B.sent(),B.label=17;case 17:return l++,[3,15];case 18:u=0,h=e.inlineLevel,B.label=19;case 19:return u<h.length?(y=h[u],[4,this.renderNode(y)]):[3,22];case 20:B.sent(),B.label=21;case 21:return u++,[3,19];case 22:d=0,m=e.zeroOrAutoZIndexOrTransformedOrOpacity,B.label=23;case 23:return d<m.length?(y=m[d],[4,this.renderStack(y)]):[3,26];case 24:B.sent(),B.label=25;case 25:return d++,[3,23];case 26:f=0,b=e.positiveZIndex,B.label=27;case 27:return f<b.length?(y=b[f],[4,this.renderStack(y)]):[3,30];case 28:B.sent(),B.label=29;case 29:return f++,[3,27];case 30:return[2]}})})},t.prototype.mask=function(e){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(e.slice(0).reverse()),this.ctx.closePath()},t.prototype.path=function(e){this.ctx.beginPath(),this.formatPath(e),this.ctx.closePath()},t.prototype.formatPath=function(e){var n=this;e.forEach(function(i,s){var a=Ia(i)?i.start:i;s===0?n.ctx.moveTo(a.x,a.y):n.ctx.lineTo(a.x,a.y),Ia(i)&&n.ctx.bezierCurveTo(i.startControl.x,i.startControl.y,i.endControl.x,i.endControl.y,i.end.x,i.end.y)})},t.prototype.renderRepeat=function(e,n,i,s){this.path(e),this.ctx.fillStyle=n,this.ctx.translate(i,s),this.ctx.fill(),this.ctx.translate(-i,-s)},t.prototype.resizeImage=function(e,n,i){var s;if(e.width===n&&e.height===i)return e;var a=(s=this.canvas.ownerDocument)!==null&&s!==void 0?s:document,o=a.createElement("canvas");o.width=Math.max(1,n),o.height=Math.max(1,i);var A=o.getContext("2d");return A.drawImage(e,0,0,e.width,e.height,0,0,n,i),o},t.prototype.renderBackgroundImage=function(e){return xs(this,void 0,void 0,function(){var n,i,s,a,o,A;return ss(this,function(l){switch(l.label){case 0:n=e.styles.backgroundImage.length-1,i=function(c){var u,h,d,T,ut,nt,F,k,x,m,T,ut,nt,F,k,f,b,y,B,I,C,N,R,U,x,v,T,E,_,F,k,Z,ut,nt,j,G,pt,q,L,O,V,X;return ss(this,function(At){switch(At.label){case 0:if(c.type!==0)return[3,5];u=void 0,h=c.url,At.label=1;case 1:return At.trys.push([1,3,,4]),[4,s.context.cache.match(h)];case 2:return u=At.sent(),[3,4];case 3:return At.sent(),s.context.logger.error("Error loading background-image "+h),[3,4];case 4:return u&&(d=Ky(e,n,[u.width,u.height,u.width/u.height]),T=d[0],ut=d[1],nt=d[2],F=d[3],k=d[4],x=s.ctx.createPattern(s.resizeImage(u,F,k),"repeat"),s.renderRepeat(T,x,ut,nt)),[3,6];case 5:dV(c)?(m=Ky(e,n,[null,null,null]),T=m[0],ut=m[1],nt=m[2],F=m[3],k=m[4],f=oV(c.angle,F,k),b=f[0],y=f[1],B=f[2],I=f[3],C=f[4],N=document.createElement("canvas"),N.width=F,N.height=k,R=N.getContext("2d"),U=R.createLinearGradient(y,I,B,C),w5(c.stops,b).forEach(function(et){return U.addColorStop(et.stop,Si(et.color))}),R.fillStyle=U,R.fillRect(0,0,F,k),F>0&&k>0&&(x=s.ctx.createPattern(N,"repeat"),s.renderRepeat(T,x,ut,nt))):hV(c)&&(v=Ky(e,n,[null,null,null]),T=v[0],E=v[1],_=v[2],F=v[3],k=v[4],Z=c.position.length===0?[n2]:c.position,ut=on(Z[0],F),nt=on(Z[Z.length-1],k),j=AV(c,ut,nt,F,k),G=j[0],pt=j[1],G>0&&pt>0&&(q=s.ctx.createRadialGradient(E+ut,_+nt,0,E+ut,_+nt,G),w5(c.stops,G*2).forEach(function(et){return q.addColorStop(et.stop,Si(et.color))}),s.path(T),s.ctx.fillStyle=q,G!==pt?(L=e.bounds.left+.5*e.bounds.width,O=e.bounds.top+.5*e.bounds.height,V=pt/G,X=1/V,s.ctx.save(),s.ctx.translate(L,O),s.ctx.transform(1,0,0,V,0,0),s.ctx.translate(-L,-O),s.ctx.fillRect(E,X*(_-O)+O,F,k*X),s.ctx.restore()):s.ctx.fill())),At.label=6;case 6:return n--,[2]}})},s=this,a=0,o=e.styles.backgroundImage.slice(0).reverse(),l.label=1;case 1:return a<o.length?(A=o[a],[5,i(A)]):[3,4];case 2:l.sent(),l.label=3;case 3:return a++,[3,1];case 4:return[2]}})})},t.prototype.renderSolidBorder=function(e,n,i){return xs(this,void 0,void 0,function(){return ss(this,function(s){return this.path(X5(i,n)),this.ctx.fillStyle=Si(e),this.ctx.fill(),[2]})})},t.prototype.renderDoubleBorder=function(e,n,i,s){return xs(this,void 0,void 0,function(){var a,o;return ss(this,function(A){switch(A.label){case 0:return n<3?[4,this.renderSolidBorder(e,i,s)]:[3,2];case 1:return A.sent(),[2];case 2:return a=pG(s,i),this.path(a),this.ctx.fillStyle=Si(e),this.ctx.fill(),o=mG(s,i),this.path(o),this.ctx.fill(),[2]}})})},t.prototype.renderNodeBackgroundAndBorders=function(e){return xs(this,void 0,void 0,function(){var n,i,s,a,o,A,l,c,u=this;return ss(this,function(h){switch(h.label){case 0:return this.applyEffects(e.getEffects(2)),n=e.container.styles,i=!Nl(n.backgroundColor)||n.backgroundImage.length,s=[{style:n.borderTopStyle,color:n.borderTopColor,width:n.borderTopWidth},{style:n.borderRightStyle,color:n.borderRightColor,width:n.borderRightWidth},{style:n.borderBottomStyle,color:n.borderBottomColor,width:n.borderBottomWidth},{style:n.borderLeftStyle,color:n.borderLeftColor,width:n.borderLeftWidth}],a=kG(qu(n.backgroundClip,0),e.curves),i||n.boxShadow.length?(this.ctx.save(),this.path(a),this.ctx.clip(),Nl(n.backgroundColor)||(this.ctx.fillStyle=Si(n.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(e.container)]):[3,2];case 1:h.sent(),this.ctx.restore(),n.boxShadow.slice(0).reverse().forEach(function(d){u.ctx.save();var m=h0(e.curves),f=d.inset?0:CG,b=fG(m,-f+(d.inset?1:-1)*d.spread.number,(d.inset?1:-1)*d.spread.number,d.spread.number*(d.inset?-2:2),d.spread.number*(d.inset?-2:2));d.inset?(u.path(m),u.ctx.clip(),u.mask(b)):(u.mask(m),u.ctx.clip(),u.path(b)),u.ctx.shadowOffsetX=d.offsetX.number+f,u.ctx.shadowOffsetY=d.offsetY.number,u.ctx.shadowColor=Si(d.color),u.ctx.shadowBlur=d.blur.number,u.ctx.fillStyle=d.inset?Si(d.color):"rgba(0,0,0,1)",u.ctx.fill(),u.ctx.restore()}),h.label=2;case 2:o=0,A=0,l=s,h.label=3;case 3:return A<l.length?(c=l[A],c.style!==0&&!Nl(c.color)&&c.width>0?c.style!==2?[3,5]:[4,this.renderDashedDottedBorder(c.color,c.width,o,e.curves,2)]:[3,11]):[3,13];case 4:return h.sent(),[3,11];case 5:return c.style!==3?[3,7]:[4,this.renderDashedDottedBorder(c.color,c.width,o,e.curves,3)];case 6:return h.sent(),[3,11];case 7:return c.style!==4?[3,9]:[4,this.renderDoubleBorder(c.color,c.width,o,e.curves)];case 8:return h.sent(),[3,11];case 9:return[4,this.renderSolidBorder(c.color,o,e.curves)];case 10:h.sent(),h.label=11;case 11:o++,h.label=12;case 12:return A++,[3,3];case 13:return[2]}})})},t.prototype.renderDashedDottedBorder=function(e,n,i,s,a){return xs(this,void 0,void 0,function(){var o,A,l,c,u,h,d,m,f,b,y,B,I,C,N,R,N,R;return ss(this,function(U){return this.ctx.save(),o=bG(s,i),A=X5(s,i),a===2&&(this.path(A),this.ctx.clip()),Ia(A[0])?(l=A[0].start.x,c=A[0].start.y):(l=A[0].x,c=A[0].y),Ia(A[1])?(u=A[1].end.x,h=A[1].end.y):(u=A[1].x,h=A[1].y),i===0||i===2?d=Math.abs(l-u):d=Math.abs(c-h),this.ctx.beginPath(),a===3?this.formatPath(o):this.formatPath(A.slice(0,2)),m=n<3?n*3:n*2,f=n<3?n*2:n,a===3&&(m=n,f=n),b=!0,d<=m*2?b=!1:d<=m*2+f?(y=d/(2*m+f),m*=y,f*=y):(B=Math.floor((d+f)/(m+f)),I=(d-B*m)/(B-1),C=(d-(B+1)*m)/B,f=C<=0||Math.abs(f-I)<Math.abs(f-C)?I:C),b&&(a===3?this.ctx.setLineDash([0,m+f]):this.ctx.setLineDash([m,f])),a===3?(this.ctx.lineCap="round",this.ctx.lineWidth=n):this.ctx.lineWidth=n*2+1.1,this.ctx.strokeStyle=Si(e),this.ctx.stroke(),this.ctx.setLineDash([]),a===2&&(Ia(A[0])&&(N=A[3],R=A[0],this.ctx.beginPath(),this.formatPath([new ue(N.end.x,N.end.y),new ue(R.start.x,R.start.y)]),this.ctx.stroke()),Ia(A[1])&&(N=A[1],R=A[2],this.ctx.beginPath(),this.formatPath([new ue(N.end.x,N.end.y),new ue(R.start.x,R.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},t.prototype.render=function(e){return xs(this,void 0,void 0,function(){var n;return ss(this,function(i){switch(i.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Si(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),n=gG(e),[4,this.renderStack(n)];case 1:return i.sent(),this.applyEffects([]),[2,this.canvas]}})})},t})(A4),SG=function(r){return r instanceof GT||r instanceof jT?!0:r instanceof o2&&r.type!==c0&&r.type!==l0},kG=function(r,t){switch(r){case 0:return h0(t);case 2:return lG(t);case 1:default:return f0(t)}},IG=function(r){switch(r){case 1:return"center";case 2:return"right";case 0:default:return"left"}},TG=["-apple-system","system-ui"],FG=function(r){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?r.filter(function(t){return TG.indexOf(t)===-1}):r},LG=(function(r){no(t,r);function t(e,n){var i=r.call(this,e,n)||this;return i.canvas=n.canvas?n.canvas:document.createElement("canvas"),i.ctx=i.canvas.getContext("2d"),i.options=n,i.canvas.width=Math.floor(n.width*n.scale),i.canvas.height=Math.floor(n.height*n.scale),i.canvas.style.width=n.width+"px",i.canvas.style.height=n.height+"px",i.ctx.scale(i.options.scale,i.options.scale),i.ctx.translate(-n.x,-n.y),i.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),i}return t.prototype.render=function(e){return xs(this,void 0,void 0,function(){var n,i;return ss(this,function(s){switch(s.label){case 0:return n=B1(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,e),[4,UG(n)];case 1:return i=s.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Si(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(i,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},t})(A4),UG=function(r){return new Promise(function(t,e){var n=new Image;n.onload=function(){t(n)},n.onerror=e,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(r))})},PG=(function(){function r(t){var e=t.id,n=t.enabled;this.id=e,this.enabled=n,this.start=Date.now()}return r.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,xp([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},r.prototype.getTime=function(){return Date.now()-this.start},r.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,xp([this.id,this.getTime()+"ms"],t))},r.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,xp([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},r.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,xp([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},r.instances={},r})(),NG=(function(){function r(t,e){var n;this.windowBounds=e,this.instanceName="#"+r.instanceCount++,this.logger=new PG({id:this.instanceName,enabled:t.logging}),this.cache=(n=t.cache)!==null&&n!==void 0?n:new eG(this,t)}return r.instanceCount=1,r})(),l4=function(r,t){return t===void 0&&(t={}),DG(r,t)};typeof window<"u"&&r4.setContext(window);var DG=function(r,t){return xs(void 0,void 0,void 0,function(){var e,n,i,s,a,o,A,l,c,u,h,d,m,f,b,y,B,I,C,N,U,R,U,x,v,T,E,_,F,k,Z,ut,nt,j,G,pt,q,L,O,V;return ss(this,function(X){switch(X.label){case 0:if(!r||typeof r!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(e=r.ownerDocument,!e)throw new Error("Element is not attached to a Document");if(n=e.defaultView,!n)throw new Error("Document is not attached to a Window");return i={allowTaint:(x=t.allowTaint)!==null&&x!==void 0?x:!1,imageTimeout:(v=t.imageTimeout)!==null&&v!==void 0?v:15e3,proxy:t.proxy,useCORS:(T=t.useCORS)!==null&&T!==void 0?T:!1},s=l1({logging:(E=t.logging)!==null&&E!==void 0?E:!0,cache:t.cache},i),a={windowWidth:(_=t.windowWidth)!==null&&_!==void 0?_:n.innerWidth,windowHeight:(F=t.windowHeight)!==null&&F!==void 0?F:n.innerHeight,scrollX:(k=t.scrollX)!==null&&k!==void 0?k:n.pageXOffset,scrollY:(Z=t.scrollY)!==null&&Z!==void 0?Z:n.pageYOffset},o=new LA(a.scrollX,a.scrollY,a.windowWidth,a.windowHeight),A=new NG(s,o),l=(ut=t.foreignObjectRendering)!==null&&ut!==void 0?ut:!1,c={allowTaint:(nt=t.allowTaint)!==null&&nt!==void 0?nt:!1,onclone:t.onclone,ignoreElements:t.ignoreElements,inlineImages:l,copyStyles:l},A.logger.debug("Starting document clone with size "+o.width+"x"+o.height+" scrolled to "+-o.left+","+-o.top),u=new q5(A,r,c),h=u.clonedReferenceElement,h?[4,u.toIFrame(e,o)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return d=X.sent(),m=A2(h)||Rj(h)?f7(h.ownerDocument):eb(A,h),f=m.width,b=m.height,y=m.left,B=m.top,I=MG(A,h,t.backgroundColor),C={canvas:t.canvas,backgroundColor:I,scale:(G=(j=t.scale)!==null&&j!==void 0?j:n.devicePixelRatio)!==null&&G!==void 0?G:1,x:((pt=t.x)!==null&&pt!==void 0?pt:0)+y,y:((q=t.y)!==null&&q!==void 0?q:0)+B,width:(L=t.width)!==null&&L!==void 0?L:Math.ceil(f),height:(O=t.height)!==null&&O!==void 0?O:Math.ceil(b)},l?(A.logger.debug("Document cloned, using foreign object rendering"),U=new LG(A,C),[4,U.render(h)]):[3,3];case 2:return N=X.sent(),[3,5];case 3:return A.logger.debug("Document cloned, element located at "+y+","+B+" with size "+f+"x"+b+" using computed rendering"),A.logger.debug("Starting DOM parsing"),R=qT(A,h),I===R.styles.backgroundColor&&(R.styles.backgroundColor=SA.TRANSPARENT),A.logger.debug("Starting renderer for element at "+C.x+","+C.y+" with size "+C.width+"x"+C.height),U=new EG(A,C),[4,U.render(R)];case 4:N=X.sent(),X.label=5;case 5:return(!((V=t.removeContainer)!==null&&V!==void 0)||V)&&(q5.destroy(d)||A.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),A.logger.debug("Finished rendering"),[2,N]}})})},MG=function(r,t,e){var n=t.ownerDocument,i=n.documentElement?uf(r,getComputedStyle(n.documentElement).backgroundColor):SA.TRANSPARENT,s=n.body?uf(r,getComputedStyle(n.body).backgroundColor):SA.TRANSPARENT,a=typeof e=="string"?uf(r,e):e===null?SA.TRANSPARENT:4294967295;return t===n.documentElement?Nl(i)?Nl(s)?a:s:i:a};const RG=Object.freeze(Object.defineProperty({__proto__:null,default:l4},Symbol.toStringTag,{value:"Module"})),QG="modulepreload",OG=function(r){return"/"+r},Z5={},Sm=function(t,e,n){let i=Promise.resolve();if(e&&e.length>0){let a=function(l){return Promise.all(l.map(c=>Promise.resolve(c).then(u=>({status:"fulfilled",value:u}),u=>({status:"rejected",reason:u}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),A=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=a(e.map(l=>{if(l=OG(l),l in Z5)return;Z5[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const h=document.createElement("link");if(h.rel=c?"stylesheet":QG,c||(h.as="script"),h.crossOrigin="",h.href=l,A&&h.setAttribute("nonce",A),document.head.appendChild(h),c)return new Promise((d,m)=>{h.addEventListener("load",d),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return i.then(a=>{for(const o of a||[])o.status==="rejected"&&s(o.reason);return t().catch(s)})};function Vr(r){"@babel/helpers - typeof";return Vr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vr(r)}var to=Uint8Array,fa=Uint16Array,l2=Int32Array,c2=new to([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),u2=new to([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),tC=new to([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),c4=function(r,t){for(var e=new fa(31),n=0;n<31;++n)e[n]=t+=1<<r[n-1];for(var i=new l2(e[30]),n=1;n<30;++n)for(var s=e[n];s<e[n+1];++s)i[s]=s-e[n]<<5|n;return{b:e,r:i}},u4=c4(c2,2),HG=u4.b,F1=u4.r;HG[28]=258,F1[258]=28;var VG=c4(u2,0),eC=VG.r,L1=new fa(32768);for(var fn=0;fn<32768;++fn){var ll=(fn&43690)>>1|(fn&21845)<<1;ll=(ll&52428)>>2|(ll&13107)<<2,ll=(ll&61680)>>4|(ll&3855)<<4,L1[fn]=((ll&65280)>>8|(ll&255)<<8)>>1}var gf=(function(r,t,e){for(var n=r.length,i=0,s=new fa(t);i<n;++i)r[i]&&++s[r[i]-1];var a=new fa(t);for(i=1;i<t;++i)a[i]=a[i-1]+s[i-1]<<1;var o;if(e){o=new fa(1<<t);var A=15-t;for(i=0;i<n;++i)if(r[i])for(var l=i<<4|r[i],c=t-r[i],u=a[r[i]-1]++<<c,h=u|(1<<c)-1;u<=h;++u)o[L1[u]>>A]=l}else for(o=new fa(n),i=0;i<n;++i)r[i]&&(o[i]=L1[a[r[i]-1]++]>>15-r[i]);return o}),iu=new to(288);for(var fn=0;fn<144;++fn)iu[fn]=8;for(var fn=144;fn<256;++fn)iu[fn]=9;for(var fn=256;fn<280;++fn)iu[fn]=7;for(var fn=280;fn<288;++fn)iu[fn]=8;var p0=new to(32);for(var fn=0;fn<32;++fn)p0[fn]=5;var $G=gf(iu,9,0),jG=gf(p0,5,0),d4=function(r){return(r+7)/8|0},GG=function(r,t,e){return(e==null||e>r.length)&&(e=r.length),new to(r.subarray(t,e))},AA=function(r,t,e){e<<=t&7;var n=t/8|0;r[n]|=e,r[n+1]|=e>>8},Th=function(r,t,e){e<<=t&7;var n=t/8|0;r[n]|=e,r[n+1]|=e>>8,r[n+2]|=e>>16},zy=function(r,t){for(var e=[],n=0;n<r.length;++n)r[n]&&e.push({s:n,f:r[n]});var i=e.length,s=e.slice();if(!i)return{t:f4,l:0};if(i==1){var a=new to(e[0].s+1);return a[e[0].s]=1,{t:a,l:1}}e.sort(function(N,R){return N.f-R.f}),e.push({s:-1,f:25001});var o=e[0],A=e[1],l=0,c=1,u=2;for(e[0]={s:-1,f:o.f+A.f,l:o,r:A};c!=i-1;)o=e[e[l].f<e[u].f?l++:u++],A=e[l!=c&&e[l].f<e[u].f?l++:u++],e[c++]={s:-1,f:o.f+A.f,l:o,r:A};for(var h=s[0].s,n=1;n<i;++n)s[n].s>h&&(h=s[n].s);var d=new fa(h+1),m=U1(e[c-1],d,0);if(m>t){var n=0,f=0,b=m-t,y=1<<b;for(s.sort(function(R,U){return d[U.s]-d[R.s]||R.f-U.f});n<i;++n){var B=s[n].s;if(d[B]>t)f+=y-(1<<m-d[B]),d[B]=t;else break}for(f>>=b;f>0;){var I=s[n].s;d[I]<t?f-=1<<t-d[I]++-1:++n}for(;n>=0&&f;--n){var C=s[n].s;d[C]==t&&(--d[C],++f)}m=t}return{t:new to(d),l:m}},U1=function(r,t,e){return r.s==-1?Math.max(U1(r.l,t,e+1),U1(r.r,t,e+1)):t[r.s]=e},rC=function(r){for(var t=r.length;t&&!r[--t];);for(var e=new fa(++t),n=0,i=r[0],s=1,a=function(A){e[n++]=A},o=1;o<=t;++o)if(r[o]==i&&o!=t)++s;else{if(!i&&s>2){for(;s>138;s-=138)a(32754);s>2&&(a(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(a(i),--s;s>6;s-=6)a(8304);s>2&&(a(s-3<<5|8208),s=0)}for(;s--;)a(i);s=1,i=r[o]}return{c:e.subarray(0,n),n:t}},Fh=function(r,t){for(var e=0,n=0;n<t.length;++n)e+=r[n]*t[n];return e},h4=function(r,t,e){var n=e.length,i=d4(t+2);r[i]=n&255,r[i+1]=n>>8,r[i+2]=r[i]^255,r[i+3]=r[i+1]^255;for(var s=0;s<n;++s)r[i+s+4]=e[s];return(i+4+n)*8},nC=function(r,t,e,n,i,s,a,o,A,l,c){AA(t,c++,e),++i[256];for(var u=zy(i,15),h=u.t,d=u.l,m=zy(s,15),f=m.t,b=m.l,y=rC(h),B=y.c,I=y.n,C=rC(f),N=C.c,R=C.n,U=new fa(19),x=0;x<B.length;++x)++U[B[x]&31];for(var x=0;x<N.length;++x)++U[N[x]&31];for(var v=zy(U,7),T=v.t,E=v.l,_=19;_>4&&!T[tC[_-1]];--_);var F=l+5<<3,k=Fh(i,iu)+Fh(s,p0)+a,Z=Fh(i,h)+Fh(s,f)+a+14+3*_+Fh(U,T)+2*U[16]+3*U[17]+7*U[18];if(A>=0&&F<=k&&F<=Z)return h4(t,c,r.subarray(A,A+l));var ut,nt,j,G;if(AA(t,c,1+(Z<k)),c+=2,Z<k){ut=gf(h,d,0),nt=h,j=gf(f,b,0),G=f;var pt=gf(T,E,0);AA(t,c,I-257),AA(t,c+5,R-1),AA(t,c+10,_-4),c+=14;for(var x=0;x<_;++x)AA(t,c+3*x,T[tC[x]]);c+=3*_;for(var q=[B,N],L=0;L<2;++L)for(var O=q[L],x=0;x<O.length;++x){var V=O[x]&31;AA(t,c,pt[V]),c+=T[V],V>15&&(AA(t,c,O[x]>>5&127),c+=O[x]>>12)}}else ut=$G,nt=iu,j=jG,G=p0;for(var x=0;x<o;++x){var X=n[x];if(X>255){var V=X>>18&31;Th(t,c,ut[V+257]),c+=nt[V+257],V>7&&(AA(t,c,X>>23&31),c+=c2[V]);var At=X&31;Th(t,c,j[At]),c+=G[At],At>3&&(Th(t,c,X>>5&8191),c+=u2[At])}else Th(t,c,ut[X]),c+=nt[X]}return Th(t,c,ut[256]),c+nt[256]},KG=new l2([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),f4=new to(0),zG=function(r,t,e,n,i,s){var a=s.z||r.length,o=new to(n+a+5*(1+Math.ceil(a/7e3))+i),A=o.subarray(n,o.length-i),l=s.l,c=(s.r||0)&7;if(t){c&&(A[0]=s.r>>3);for(var u=KG[t-1],h=u>>13,d=u&8191,m=(1<<e)-1,f=s.p||new fa(32768),b=s.h||new fa(m+1),y=Math.ceil(e/3),B=2*y,I=function(D){return(r[D]^r[D+1]<<y^r[D+2]<<B)&m},C=new l2(25e3),N=new fa(288),R=new fa(32),U=0,x=0,v=s.i||0,T=0,E=s.w||0,_=0;v+2<a;++v){var F=I(v),k=v&32767,Z=b[F];if(f[k]=Z,b[F]=k,E<=v){var ut=a-v;if((U>7e3||T>24576)&&(ut>423||!l)){c=nC(r,A,0,C,N,R,x,T,_,v-_,c),T=U=x=0,_=v;for(var nt=0;nt<286;++nt)N[nt]=0;for(var nt=0;nt<30;++nt)R[nt]=0}var j=2,G=0,pt=d,q=k-Z&32767;if(ut>2&&F==I(v-q))for(var L=Math.min(h,ut)-1,O=Math.min(32767,v),V=Math.min(258,ut);q<=O&&--pt&&k!=Z;){if(r[v+j]==r[v+j-q]){for(var X=0;X<V&&r[v+X]==r[v+X-q];++X);if(X>j){if(j=X,G=q,X>L)break;for(var At=Math.min(q,X-2),et=0,nt=0;nt<At;++nt){var st=v-q+nt&32767,dt=f[st],vt=st-dt&32767;vt>et&&(et=vt,Z=st)}}}k=Z,Z=f[k],q+=k-Z&32767}if(G){C[T++]=268435456|F1[j]<<18|eC[G];var _t=F1[j]&31,Mt=eC[G]&31;x+=c2[_t]+u2[Mt],++N[257+_t],++R[Mt],E=v+j,++U}else C[T++]=r[v],++N[r[v]]}}for(v=Math.max(v,E);v<a;++v)C[T++]=r[v],++N[r[v]];c=nC(r,A,l,C,N,R,x,T,_,v-_,c),l||(s.r=c&7|A[c/8|0]<<3,c-=7,s.h=b,s.p=f,s.i=v,s.w=E)}else{for(var v=s.w||0;v<a+l;v+=65535){var Ot=v+65535;Ot>=a&&(A[c/8|0]=l,Ot=a),c=h4(A,c+1,r.subarray(v,Ot))}s.i=a}return GG(o,0,n+d4(c)+i)},g4=function(){var r=1,t=0;return{p:function(e){for(var n=r,i=t,s=e.length|0,a=0;a!=s;){for(var o=Math.min(a+2655,s);a<o;++a)i+=n+=e[a];n=(n&65535)+15*(n>>16),i=(i&65535)+15*(i>>16)}r=n,t=i},d:function(){return r%=65521,t%=65521,(r&255)<<24|(r&65280)<<8|(t&255)<<8|t>>8}}},qG=function(r,t,e,n,i){if(!i&&(i={l:1},t.dictionary)){var s=t.dictionary.subarray(-32768),a=new to(s.length+r.length);a.set(s),a.set(r,s.length),r=a,i.w=s.length}return zG(r,t.level==null?6:t.level,t.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(r.length)))*1.5):20:12+t.mem,e,n,i)},p4=function(r,t,e){for(;e;++t)r[t]=e,e>>>=8},WG=function(r,t){var e=t.level,n=e==0?0:e<6?1:e==9?3:2;if(r[0]=120,r[1]=n<<6|(t.dictionary&&32),r[1]|=31-(r[0]<<8|r[1])%31,t.dictionary){var i=g4();i.p(t.dictionary),p4(r,2,i.d())}};function P1(r,t){t||(t={});var e=g4();e.p(r);var n=qG(r,t,t.dictionary?6:2,4);return WG(n,t),p4(n,n.length-4,e.d()),n}var YG=typeof TextDecoder<"u"&&new TextDecoder,XG=0;try{YG.decode(f4,{stream:!0}),XG=1}catch{}function JG(r){if(Array.isArray(r))return r}function ZG(r,t){var e=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(e!=null){var n,i,s,a,o=[],A=!0,l=!1;try{if(s=(e=e.call(r)).next,t!==0)for(;!(A=(n=s.call(e)).done)&&(o.push(n.value),o.length!==t);A=!0);}catch(c){l=!0,i=c}finally{try{if(!A&&e.return!=null&&(a=e.return(),Object(a)!==a))return}finally{if(l)throw i}}return o}}function iC(r,t){(t==null||t>r.length)&&(t=r.length);for(var e=0,n=Array(t);e<t;e++)n[e]=r[e];return n}function tK(r,t){if(r){if(typeof r=="string")return iC(r,t);var e={}.toString.call(r).slice(8,-1);return e==="Object"&&r.constructor&&(e=r.constructor.name),e==="Map"||e==="Set"?Array.from(r):e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?iC(r,t):void 0}}function eK(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sC(r,t){return JG(r)||ZG(r,t)||tK(r,t)||eK()}function aC(r,t="utf8"){return new TextDecoder(t).decode(r)}const rK=new TextEncoder;function nK(r){return rK.encode(r)}const iK=1024*8,sK=(()=>{const r=new Uint8Array(4),t=new Uint32Array(r.buffer);return!((t[0]=1)&r[0])})(),qy={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class d2{constructor(t=iK,e={}){It(this,"buffer");It(this,"byteLength");It(this,"byteOffset");It(this,"length");It(this,"offset");It(this,"lastWrittenByte");It(this,"littleEndian");It(this,"_data");It(this,"_mark");It(this,"_marks");let n=!1;typeof t=="number"?t=new ArrayBuffer(t):(n=!0,this.lastWrittenByte=t.byteLength);const i=e.offset?e.offset>>>0:0,s=t.byteLength-i;let a=i;(ArrayBuffer.isView(t)||t instanceof d2)&&(t.byteLength!==t.buffer.byteLength&&(a=t.byteOffset+i),t=t.buffer),n?this.lastWrittenByte=s:this.lastWrittenByte=0,this.buffer=t,this.length=s,this.byteLength=s,this.byteOffset=a,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,a,s),this._mark=0,this._marks=[]}available(t=1){return this.offset+t<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(t=1){return this.offset+=t,this}back(t=1){return this.offset-=t,this}seek(t){return this.offset=t,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const t=this._marks.pop();if(t===void 0)throw new Error("Mark stack empty");return this.seek(t),this}rewind(){return this.offset=0,this}ensureAvailable(t=1){if(!this.available(t)){const n=(this.offset+t)*2,i=new Uint8Array(n);i.set(new Uint8Array(this.buffer)),this.buffer=i.buffer,this.length=n,this.byteLength=n,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(t=1){return this.readArray(t,"uint8")}readArray(t,e){const n=qy[e].BYTES_PER_ELEMENT*t,i=this.byteOffset+this.offset,s=this.buffer.slice(i,i+n);if(this.littleEndian===sK&&e!=="uint8"&&e!=="int8"){const o=new Uint8Array(this.buffer.slice(i,i+n));o.reverse();const A=new qy[e](o.buffer);return this.offset+=n,A.reverse(),A}const a=new qy[e](s);return this.offset+=n,a}readInt16(){const t=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}readUint16(){const t=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,t}readInt32(){const t=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}readUint32(){const t=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat32(){const t=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat64(){const t=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}readBigInt64(){const t=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,t}readBigUint64(){const t=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,t}readChar(){return String.fromCharCode(this.readInt8())}readChars(t=1){let e="";for(let n=0;n<t;n++)e+=this.readChar();return e}readUtf8(t=1){return aC(this.readBytes(t))}decodeText(t=1,e="utf8"){return aC(this.readBytes(t),e)}writeBoolean(t){return this.writeUint8(t?255:0),this}writeInt8(t){return this.ensureAvailable(1),this._data.setInt8(this.offset++,t),this._updateLastWrittenByte(),this}writeUint8(t){return this.ensureAvailable(1),this._data.setUint8(this.offset++,t),this._updateLastWrittenByte(),this}writeByte(t){return this.writeUint8(t)}writeBytes(t){this.ensureAvailable(t.length);for(let e=0;e<t.length;e++)this._data.setUint8(this.offset++,t[e]);return this._updateLastWrittenByte(),this}writeInt16(t){return this.ensureAvailable(2),this._data.setInt16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(t){return this.ensureAvailable(2),this._data.setUint16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(t){return this.ensureAvailable(4),this._data.setInt32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(t){return this.ensureAvailable(4),this._data.setUint32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(t){return this.ensureAvailable(4),this._data.setFloat32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(t){return this.ensureAvailable(8),this._data.setFloat64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(t){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(t){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(t){return this.writeUint8(t.charCodeAt(0))}writeChars(t){for(let e=0;e<t.length;e++)this.writeUint8(t.charCodeAt(e));return this}writeUtf8(t){return this.writeBytes(nK(t))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function $d(r){let t=r.length;for(;--t>=0;)r[t]=0}const aK=3,oK=258,m4=29,AK=256,lK=AK+1+m4,b4=30,cK=512,uK=new Array((lK+2)*2);$d(uK);const dK=new Array(b4*2);$d(dK);const hK=new Array(cK);$d(hK);const fK=new Array(oK-aK+1);$d(fK);const gK=new Array(m4);$d(gK);const pK=new Array(b4);$d(pK);const mK=(r,t,e,n)=>{let i=r&65535|0,s=r>>>16&65535|0,a=0;for(;e!==0;){a=e>2e3?2e3:e,e-=a;do i=i+t[n++]|0,s=s+i|0;while(--a);i%=65521,s%=65521}return i|s<<16|0};var N1=mK;const bK=()=>{let r,t=[];for(var e=0;e<256;e++){r=e;for(var n=0;n<8;n++)r=r&1?3988292384^r>>>1:r>>>1;t[e]=r}return t},yK=new Uint32Array(bK()),wK=(r,t,e,n)=>{const i=yK,s=n+e;r^=-1;for(let a=n;a<s;a++)r=r>>>8^i[(r^t[a])&255];return r^-1};var yo=wK,D1={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},y4={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const vK=(r,t)=>Object.prototype.hasOwnProperty.call(r,t);var xK=function(r){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const e=t.shift();if(e){if(typeof e!="object")throw new TypeError(e+"must be non-object");for(const n in e)vK(e,n)&&(r[n]=e[n])}}return r},_K=r=>{let t=0;for(let n=0,i=r.length;n<i;n++)t+=r[n].length;const e=new Uint8Array(t);for(let n=0,i=0,s=r.length;n<s;n++){let a=r[n];e.set(a,i),i+=a.length}return e},w4={assign:xK,flattenChunks:_K};let v4=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{v4=!1}const Rf=new Uint8Array(256);for(let r=0;r<256;r++)Rf[r]=r>=252?6:r>=248?5:r>=240?4:r>=224?3:r>=192?2:1;Rf[254]=Rf[254]=1;var BK=r=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(r);let t,e,n,i,s,a=r.length,o=0;for(i=0;i<a;i++)e=r.charCodeAt(i),(e&64512)===55296&&i+1<a&&(n=r.charCodeAt(i+1),(n&64512)===56320&&(e=65536+(e-55296<<10)+(n-56320),i++)),o+=e<128?1:e<2048?2:e<65536?3:4;for(t=new Uint8Array(o),s=0,i=0;s<o;i++)e=r.charCodeAt(i),(e&64512)===55296&&i+1<a&&(n=r.charCodeAt(i+1),(n&64512)===56320&&(e=65536+(e-55296<<10)+(n-56320),i++)),e<128?t[s++]=e:e<2048?(t[s++]=192|e>>>6,t[s++]=128|e&63):e<65536?(t[s++]=224|e>>>12,t[s++]=128|e>>>6&63,t[s++]=128|e&63):(t[s++]=240|e>>>18,t[s++]=128|e>>>12&63,t[s++]=128|e>>>6&63,t[s++]=128|e&63);return t};const CK=(r,t)=>{if(t<65534&&r.subarray&&v4)return String.fromCharCode.apply(null,r.length===t?r:r.subarray(0,t));let e="";for(let n=0;n<t;n++)e+=String.fromCharCode(r[n]);return e};var EK=(r,t)=>{const e=t||r.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(r.subarray(0,t));let n,i;const s=new Array(e*2);for(i=0,n=0;n<e;){let a=r[n++];if(a<128){s[i++]=a;continue}let o=Rf[a];if(o>4){s[i++]=65533,n+=o-1;continue}for(a&=o===2?31:o===3?15:7;o>1&&n<e;)a=a<<6|r[n++]&63,o--;if(o>1){s[i++]=65533;continue}a<65536?s[i++]=a:(a-=65536,s[i++]=55296|a>>10&1023,s[i++]=56320|a&1023)}return CK(s,i)},SK=(r,t)=>{t=t||r.length,t>r.length&&(t=r.length);let e=t-1;for(;e>=0&&(r[e]&192)===128;)e--;return e<0||e===0?t:e+Rf[r[e]]>t?e:t},M1={string2buf:BK,buf2string:EK,utf8border:SK};function kK(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var IK=kK;const Gp=16209,TK=16191;var FK=function(t,e){let n,i,s,a,o,A,l,c,u,h,d,m,f,b,y,B,I,C,N,R,U,x,v,T;const E=t.state;n=t.next_in,v=t.input,i=n+(t.avail_in-5),s=t.next_out,T=t.output,a=s-(e-t.avail_out),o=s+(t.avail_out-257),A=E.dmax,l=E.wsize,c=E.whave,u=E.wnext,h=E.window,d=E.hold,m=E.bits,f=E.lencode,b=E.distcode,y=(1<<E.lenbits)-1,B=(1<<E.distbits)-1;t:do{m<15&&(d+=v[n++]<<m,m+=8,d+=v[n++]<<m,m+=8),I=f[d&y];e:for(;;){if(C=I>>>24,d>>>=C,m-=C,C=I>>>16&255,C===0)T[s++]=I&65535;else if(C&16){N=I&65535,C&=15,C&&(m<C&&(d+=v[n++]<<m,m+=8),N+=d&(1<<C)-1,d>>>=C,m-=C),m<15&&(d+=v[n++]<<m,m+=8,d+=v[n++]<<m,m+=8),I=b[d&B];r:for(;;){if(C=I>>>24,d>>>=C,m-=C,C=I>>>16&255,C&16){if(R=I&65535,C&=15,m<C&&(d+=v[n++]<<m,m+=8,m<C&&(d+=v[n++]<<m,m+=8)),R+=d&(1<<C)-1,R>A){t.msg="invalid distance too far back",E.mode=Gp;break t}if(d>>>=C,m-=C,C=s-a,R>C){if(C=R-C,C>c&&E.sane){t.msg="invalid distance too far back",E.mode=Gp;break t}if(U=0,x=h,u===0){if(U+=l-C,C<N){N-=C;do T[s++]=h[U++];while(--C);U=s-R,x=T}}else if(u<C){if(U+=l+u-C,C-=u,C<N){N-=C;do T[s++]=h[U++];while(--C);if(U=0,u<N){C=u,N-=C;do T[s++]=h[U++];while(--C);U=s-R,x=T}}}else if(U+=u-C,C<N){N-=C;do T[s++]=h[U++];while(--C);U=s-R,x=T}for(;N>2;)T[s++]=x[U++],T[s++]=x[U++],T[s++]=x[U++],N-=3;N&&(T[s++]=x[U++],N>1&&(T[s++]=x[U++]))}else{U=s-R;do T[s++]=T[U++],T[s++]=T[U++],T[s++]=T[U++],N-=3;while(N>2);N&&(T[s++]=T[U++],N>1&&(T[s++]=T[U++]))}}else if((C&64)===0){I=b[(I&65535)+(d&(1<<C)-1)];continue r}else{t.msg="invalid distance code",E.mode=Gp;break t}break}}else if((C&64)===0){I=f[(I&65535)+(d&(1<<C)-1)];continue e}else if(C&32){E.mode=TK;break t}else{t.msg="invalid literal/length code",E.mode=Gp;break t}break}}while(n<i&&s<o);N=m>>3,n-=N,m-=N<<3,d&=(1<<m)-1,t.next_in=n,t.next_out=s,t.avail_in=n<i?5+(i-n):5-(n-i),t.avail_out=s<o?257+(o-s):257-(s-o),E.hold=d,E.bits=m};const $u=15,oC=852,AC=592,lC=0,Wy=1,cC=2,LK=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),UK=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),PK=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),NK=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),DK=(r,t,e,n,i,s,a,o)=>{const A=o.bits;let l=0,c=0,u=0,h=0,d=0,m=0,f=0,b=0,y=0,B=0,I,C,N,R,U,x=null,v;const T=new Uint16Array($u+1),E=new Uint16Array($u+1);let _=null,F,k,Z;for(l=0;l<=$u;l++)T[l]=0;for(c=0;c<n;c++)T[t[e+c]]++;for(d=A,h=$u;h>=1&&T[h]===0;h--);if(d>h&&(d=h),h===0)return i[s++]=1<<24|64<<16|0,i[s++]=1<<24|64<<16|0,o.bits=1,0;for(u=1;u<h&&T[u]===0;u++);for(d<u&&(d=u),b=1,l=1;l<=$u;l++)if(b<<=1,b-=T[l],b<0)return-1;if(b>0&&(r===lC||h!==1))return-1;for(E[1]=0,l=1;l<$u;l++)E[l+1]=E[l]+T[l];for(c=0;c<n;c++)t[e+c]!==0&&(a[E[t[e+c]]++]=c);if(r===lC?(x=_=a,v=20):r===Wy?(x=LK,_=UK,v=257):(x=PK,_=NK,v=0),B=0,c=0,l=u,U=s,m=d,f=0,N=-1,y=1<<d,R=y-1,r===Wy&&y>oC||r===cC&&y>AC)return 1;for(;;){F=l-f,a[c]+1<v?(k=0,Z=a[c]):a[c]>=v?(k=_[a[c]-v],Z=x[a[c]-v]):(k=96,Z=0),I=1<<l-f,C=1<<m,u=C;do C-=I,i[U+(B>>f)+C]=F<<24|k<<16|Z|0;while(C!==0);for(I=1<<l-1;B&I;)I>>=1;if(I!==0?(B&=I-1,B+=I):B=0,c++,--T[l]===0){if(l===h)break;l=t[e+a[c]]}if(l>d&&(B&R)!==N){for(f===0&&(f=d),U+=u,m=l-f,b=1<<m;m+f<h&&(b-=T[m+f],!(b<=0));)m++,b<<=1;if(y+=1<<m,r===Wy&&y>oC||r===cC&&y>AC)return 1;N=B&R,i[N]=d<<24|m<<16|U-s|0}}return B!==0&&(i[U+B]=l-f<<24|64<<16|0),o.bits=d,0};var pf=DK;const MK=0,x4=1,_4=2,{Z_FINISH:uC,Z_BLOCK:RK,Z_TREES:Kp,Z_OK:su,Z_STREAM_END:QK,Z_NEED_DICT:OK,Z_STREAM_ERROR:Da,Z_DATA_ERROR:B4,Z_MEM_ERROR:C4,Z_BUF_ERROR:HK,Z_DEFLATED:dC}=y4,ub=16180,hC=16181,fC=16182,gC=16183,pC=16184,mC=16185,bC=16186,yC=16187,wC=16188,vC=16189,m0=16190,lA=16191,Yy=16192,xC=16193,Xy=16194,_C=16195,BC=16196,CC=16197,EC=16198,zp=16199,qp=16200,SC=16201,kC=16202,IC=16203,TC=16204,FC=16205,Jy=16206,LC=16207,UC=16208,xn=16209,E4=16210,S4=16211,VK=852,$K=592,jK=15,GK=jK,PC=r=>(r>>>24&255)+(r>>>8&65280)+((r&65280)<<8)+((r&255)<<24);function KK(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const vu=r=>{if(!r)return 1;const t=r.state;return!t||t.strm!==r||t.mode<ub||t.mode>S4?1:0},k4=r=>{if(vu(r))return Da;const t=r.state;return r.total_in=r.total_out=t.total=0,r.msg="",t.wrap&&(r.adler=t.wrap&1),t.mode=ub,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(VK),t.distcode=t.distdyn=new Int32Array($K),t.sane=1,t.back=-1,su},I4=r=>{if(vu(r))return Da;const t=r.state;return t.wsize=0,t.whave=0,t.wnext=0,k4(r)},T4=(r,t)=>{let e;if(vu(r))return Da;const n=r.state;return t<0?(e=0,t=-t):(e=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?Da:(n.window!==null&&n.wbits!==t&&(n.window=null),n.wrap=e,n.wbits=t,I4(r))},F4=(r,t)=>{if(!r)return Da;const e=new KK;r.state=e,e.strm=r,e.window=null,e.mode=ub;const n=T4(r,t);return n!==su&&(r.state=null),n},zK=r=>F4(r,GK);let NC=!0,Zy,tw;const qK=r=>{if(NC){Zy=new Int32Array(512),tw=new Int32Array(32);let t=0;for(;t<144;)r.lens[t++]=8;for(;t<256;)r.lens[t++]=9;for(;t<280;)r.lens[t++]=7;for(;t<288;)r.lens[t++]=8;for(pf(x4,r.lens,0,288,Zy,0,r.work,{bits:9}),t=0;t<32;)r.lens[t++]=5;pf(_4,r.lens,0,32,tw,0,r.work,{bits:5}),NC=!1}r.lencode=Zy,r.lenbits=9,r.distcode=tw,r.distbits=5},L4=(r,t,e,n)=>{let i;const s=r.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),n>=s.wsize?(s.window.set(t.subarray(e-s.wsize,e),0),s.wnext=0,s.whave=s.wsize):(i=s.wsize-s.wnext,i>n&&(i=n),s.window.set(t.subarray(e-n,e-n+i),s.wnext),n-=i,n?(s.window.set(t.subarray(e-n,e),0),s.wnext=n,s.whave=s.wsize):(s.wnext+=i,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=i))),0},WK=(r,t)=>{let e,n,i,s,a,o,A,l,c,u,h,d,m,f,b=0,y,B,I,C,N,R,U,x;const v=new Uint8Array(4);let T,E;const _=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(vu(r)||!r.output||!r.input&&r.avail_in!==0)return Da;e=r.state,e.mode===lA&&(e.mode=Yy),a=r.next_out,i=r.output,A=r.avail_out,s=r.next_in,n=r.input,o=r.avail_in,l=e.hold,c=e.bits,u=o,h=A,x=su;t:for(;;)switch(e.mode){case ub:if(e.wrap===0){e.mode=Yy;break}for(;c<16;){if(o===0)break t;o--,l+=n[s++]<<c,c+=8}if(e.wrap&2&&l===35615){e.wbits===0&&(e.wbits=15),e.check=0,v[0]=l&255,v[1]=l>>>8&255,e.check=yo(e.check,v,2,0),l=0,c=0,e.mode=hC;break}if(e.head&&(e.head.done=!1),!(e.wrap&1)||(((l&255)<<8)+(l>>8))%31){r.msg="incorrect header check",e.mode=xn;break}if((l&15)!==dC){r.msg="unknown compression method",e.mode=xn;break}if(l>>>=4,c-=4,U=(l&15)+8,e.wbits===0&&(e.wbits=U),U>15||U>e.wbits){r.msg="invalid window size",e.mode=xn;break}e.dmax=1<<e.wbits,e.flags=0,r.adler=e.check=1,e.mode=l&512?vC:lA,l=0,c=0;break;case hC:for(;c<16;){if(o===0)break t;o--,l+=n[s++]<<c,c+=8}if(e.flags=l,(e.flags&255)!==dC){r.msg="unknown compression method",e.mode=xn;break}if(e.flags&57344){r.msg="unknown header flags set",e.mode=xn;break}e.head&&(e.head.text=l>>8&1),e.flags&512&&e.wrap&4&&(v[0]=l&255,v[1]=l>>>8&255,e.check=yo(e.check,v,2,0)),l=0,c=0,e.mode=fC;case fC:for(;c<32;){if(o===0)break t;o--,l+=n[s++]<<c,c+=8}e.head&&(e.head.time=l),e.flags&512&&e.wrap&4&&(v[0]=l&255,v[1]=l>>>8&255,v[2]=l>>>16&255,v[3]=l>>>24&255,e.check=yo(e.check,v,4,0)),l=0,c=0,e.mode=gC;case gC:for(;c<16;){if(o===0)break t;o--,l+=n[s++]<<c,c+=8}e.head&&(e.head.xflags=l&255,e.head.os=l>>8),e.flags&512&&e.wrap&4&&(v[0]=l&255,v[1]=l>>>8&255,e.check=yo(e.check,v,2,0)),l=0,c=0,e.mode=pC;case pC:if(e.flags&1024){for(;c<16;){if(o===0)break t;o--,l+=n[s++]<<c,c+=8}e.length=l,e.head&&(e.head.extra_len=l),e.flags&512&&e.wrap&4&&(v[0]=l&255,v[1]=l>>>8&255,e.check=yo(e.check,v,2,0)),l=0,c=0}else e.head&&(e.head.extra=null);e.mode=mC;case mC:if(e.flags&1024&&(d=e.length,d>o&&(d=o),d&&(e.head&&(U=e.head.extra_len-e.length,e.head.extra||(e.head.extra=new Uint8Array(e.head.extra_len)),e.head.extra.set(n.subarray(s,s+d),U)),e.flags&512&&e.wrap&4&&(e.check=yo(e.check,n,d,s)),o-=d,s+=d,e.length-=d),e.length))break t;e.length=0,e.mode=bC;case bC:if(e.flags&2048){if(o===0)break t;d=0;do U=n[s+d++],e.head&&U&&e.length<65536&&(e.head.name+=String.fromCharCode(U));while(U&&d<o);if(e.flags&512&&e.wrap&4&&(e.check=yo(e.check,n,d,s)),o-=d,s+=d,U)break t}else e.head&&(e.head.name=null);e.length=0,e.mode=yC;case yC:if(e.flags&4096){if(o===0)break t;d=0;do U=n[s+d++],e.head&&U&&e.length<65536&&(e.head.comment+=String.fromCharCode(U));while(U&&d<o);if(e.flags&512&&e.wrap&4&&(e.check=yo(e.check,n,d,s)),o-=d,s+=d,U)break t}else e.head&&(e.head.comment=null);e.mode=wC;case wC:if(e.flags&512){for(;c<16;){if(o===0)break t;o--,l+=n[s++]<<c,c+=8}if(e.wrap&4&&l!==(e.check&65535)){r.msg="header crc mismatch",e.mode=xn;break}l=0,c=0}e.head&&(e.head.hcrc=e.flags>>9&1,e.head.done=!0),r.adler=e.check=0,e.mode=lA;break;case vC:for(;c<32;){if(o===0)break t;o--,l+=n[s++]<<c,c+=8}r.adler=e.check=PC(l),l=0,c=0,e.mode=m0;case m0:if(e.havedict===0)return r.next_out=a,r.avail_out=A,r.next_in=s,r.avail_in=o,e.hold=l,e.bits=c,OK;r.adler=e.check=1,e.mode=lA;case lA:if(t===RK||t===Kp)break t;case Yy:if(e.last){l>>>=c&7,c-=c&7,e.mode=Jy;break}for(;c<3;){if(o===0)break t;o--,l+=n[s++]<<c,c+=8}switch(e.last=l&1,l>>>=1,c-=1,l&3){case 0:e.mode=xC;break;case 1:if(qK(e),e.mode=zp,t===Kp){l>>>=2,c-=2;break t}break;case 2:e.mode=BC;break;case 3:r.msg="invalid block type",e.mode=xn}l>>>=2,c-=2;break;case xC:for(l>>>=c&7,c-=c&7;c<32;){if(o===0)break t;o--,l+=n[s++]<<c,c+=8}if((l&65535)!==(l>>>16^65535)){r.msg="invalid stored block lengths",e.mode=xn;break}if(e.length=l&65535,l=0,c=0,e.mode=Xy,t===Kp)break t;case Xy:e.mode=_C;case _C:if(d=e.length,d){if(d>o&&(d=o),d>A&&(d=A),d===0)break t;i.set(n.subarray(s,s+d),a),o-=d,s+=d,A-=d,a+=d,e.length-=d;break}e.mode=lA;break;case BC:for(;c<14;){if(o===0)break t;o--,l+=n[s++]<<c,c+=8}if(e.nlen=(l&31)+257,l>>>=5,c-=5,e.ndist=(l&31)+1,l>>>=5,c-=5,e.ncode=(l&15)+4,l>>>=4,c-=4,e.nlen>286||e.ndist>30){r.msg="too many length or distance symbols",e.mode=xn;break}e.have=0,e.mode=CC;case CC:for(;e.have<e.ncode;){for(;c<3;){if(o===0)break t;o--,l+=n[s++]<<c,c+=8}e.lens[_[e.have++]]=l&7,l>>>=3,c-=3}for(;e.have<19;)e.lens[_[e.have++]]=0;if(e.lencode=e.lendyn,e.lenbits=7,T={bits:e.lenbits},x=pf(MK,e.lens,0,19,e.lencode,0,e.work,T),e.lenbits=T.bits,x){r.msg="invalid code lengths set",e.mode=xn;break}e.have=0,e.mode=EC;case EC:for(;e.have<e.nlen+e.ndist;){for(;b=e.lencode[l&(1<<e.lenbits)-1],y=b>>>24,B=b>>>16&255,I=b&65535,!(y<=c);){if(o===0)break t;o--,l+=n[s++]<<c,c+=8}if(I<16)l>>>=y,c-=y,e.lens[e.have++]=I;else{if(I===16){for(E=y+2;c<E;){if(o===0)break t;o--,l+=n[s++]<<c,c+=8}if(l>>>=y,c-=y,e.have===0){r.msg="invalid bit length repeat",e.mode=xn;break}U=e.lens[e.have-1],d=3+(l&3),l>>>=2,c-=2}else if(I===17){for(E=y+3;c<E;){if(o===0)break t;o--,l+=n[s++]<<c,c+=8}l>>>=y,c-=y,U=0,d=3+(l&7),l>>>=3,c-=3}else{for(E=y+7;c<E;){if(o===0)break t;o--,l+=n[s++]<<c,c+=8}l>>>=y,c-=y,U=0,d=11+(l&127),l>>>=7,c-=7}if(e.have+d>e.nlen+e.ndist){r.msg="invalid bit length repeat",e.mode=xn;break}for(;d--;)e.lens[e.have++]=U}}if(e.mode===xn)break;if(e.lens[256]===0){r.msg="invalid code -- missing end-of-block",e.mode=xn;break}if(e.lenbits=9,T={bits:e.lenbits},x=pf(x4,e.lens,0,e.nlen,e.lencode,0,e.work,T),e.lenbits=T.bits,x){r.msg="invalid literal/lengths set",e.mode=xn;break}if(e.distbits=6,e.distcode=e.distdyn,T={bits:e.distbits},x=pf(_4,e.lens,e.nlen,e.ndist,e.distcode,0,e.work,T),e.distbits=T.bits,x){r.msg="invalid distances set",e.mode=xn;break}if(e.mode=zp,t===Kp)break t;case zp:e.mode=qp;case qp:if(o>=6&&A>=258){r.next_out=a,r.avail_out=A,r.next_in=s,r.avail_in=o,e.hold=l,e.bits=c,FK(r,h),a=r.next_out,i=r.output,A=r.avail_out,s=r.next_in,n=r.input,o=r.avail_in,l=e.hold,c=e.bits,e.mode===lA&&(e.back=-1);break}for(e.back=0;b=e.lencode[l&(1<<e.lenbits)-1],y=b>>>24,B=b>>>16&255,I=b&65535,!(y<=c);){if(o===0)break t;o--,l+=n[s++]<<c,c+=8}if(B&&(B&240)===0){for(C=y,N=B,R=I;b=e.lencode[R+((l&(1<<C+N)-1)>>C)],y=b>>>24,B=b>>>16&255,I=b&65535,!(C+y<=c);){if(o===0)break t;o--,l+=n[s++]<<c,c+=8}l>>>=C,c-=C,e.back+=C}if(l>>>=y,c-=y,e.back+=y,e.length=I,B===0){e.mode=FC;break}if(B&32){e.back=-1,e.mode=lA;break}if(B&64){r.msg="invalid literal/length code",e.mode=xn;break}e.extra=B&15,e.mode=SC;case SC:if(e.extra){for(E=e.extra;c<E;){if(o===0)break t;o--,l+=n[s++]<<c,c+=8}e.length+=l&(1<<e.extra)-1,l>>>=e.extra,c-=e.extra,e.back+=e.extra}e.was=e.length,e.mode=kC;case kC:for(;b=e.distcode[l&(1<<e.distbits)-1],y=b>>>24,B=b>>>16&255,I=b&65535,!(y<=c);){if(o===0)break t;o--,l+=n[s++]<<c,c+=8}if((B&240)===0){for(C=y,N=B,R=I;b=e.distcode[R+((l&(1<<C+N)-1)>>C)],y=b>>>24,B=b>>>16&255,I=b&65535,!(C+y<=c);){if(o===0)break t;o--,l+=n[s++]<<c,c+=8}l>>>=C,c-=C,e.back+=C}if(l>>>=y,c-=y,e.back+=y,B&64){r.msg="invalid distance code",e.mode=xn;break}e.offset=I,e.extra=B&15,e.mode=IC;case IC:if(e.extra){for(E=e.extra;c<E;){if(o===0)break t;o--,l+=n[s++]<<c,c+=8}e.offset+=l&(1<<e.extra)-1,l>>>=e.extra,c-=e.extra,e.back+=e.extra}if(e.offset>e.dmax){r.msg="invalid distance too far back",e.mode=xn;break}e.mode=TC;case TC:if(A===0)break t;if(d=h-A,e.offset>d){if(d=e.offset-d,d>e.whave&&e.sane){r.msg="invalid distance too far back",e.mode=xn;break}d>e.wnext?(d-=e.wnext,m=e.wsize-d):m=e.wnext-d,d>e.length&&(d=e.length),f=e.window}else f=i,m=a-e.offset,d=e.length;d>A&&(d=A),A-=d,e.length-=d;do i[a++]=f[m++];while(--d);e.length===0&&(e.mode=qp);break;case FC:if(A===0)break t;i[a++]=e.length,A--,e.mode=qp;break;case Jy:if(e.wrap){for(;c<32;){if(o===0)break t;o--,l|=n[s++]<<c,c+=8}if(h-=A,r.total_out+=h,e.total+=h,e.wrap&4&&h&&(r.adler=e.check=e.flags?yo(e.check,i,h,a-h):N1(e.check,i,h,a-h)),h=A,e.wrap&4&&(e.flags?l:PC(l))!==e.check){r.msg="incorrect data check",e.mode=xn;break}l=0,c=0}e.mode=LC;case LC:if(e.wrap&&e.flags){for(;c<32;){if(o===0)break t;o--,l+=n[s++]<<c,c+=8}if(e.wrap&4&&l!==(e.total&4294967295)){r.msg="incorrect length check",e.mode=xn;break}l=0,c=0}e.mode=UC;case UC:x=QK;break t;case xn:x=B4;break t;case E4:return C4;case S4:default:return Da}return r.next_out=a,r.avail_out=A,r.next_in=s,r.avail_in=o,e.hold=l,e.bits=c,(e.wsize||h!==r.avail_out&&e.mode<xn&&(e.mode<Jy||t!==uC))&&L4(r,r.output,r.next_out,h-r.avail_out),u-=r.avail_in,h-=r.avail_out,r.total_in+=u,r.total_out+=h,e.total+=h,e.wrap&4&&h&&(r.adler=e.check=e.flags?yo(e.check,i,h,r.next_out-h):N1(e.check,i,h,r.next_out-h)),r.data_type=e.bits+(e.last?64:0)+(e.mode===lA?128:0)+(e.mode===zp||e.mode===Xy?256:0),(u===0&&h===0||t===uC)&&x===su&&(x=HK),x},YK=r=>{if(vu(r))return Da;let t=r.state;return t.window&&(t.window=null),r.state=null,su},XK=(r,t)=>{if(vu(r))return Da;const e=r.state;return(e.wrap&2)===0?Da:(e.head=t,t.done=!1,su)},JK=(r,t)=>{const e=t.length;let n,i,s;return vu(r)||(n=r.state,n.wrap!==0&&n.mode!==m0)?Da:n.mode===m0&&(i=1,i=N1(i,t,e,0),i!==n.check)?B4:(s=L4(r,t,e,e),s?(n.mode=E4,C4):(n.havedict=1,su))};var ZK=I4,tz=T4,ez=k4,rz=zK,nz=F4,iz=WK,sz=YK,az=XK,oz=JK,Az="pako inflate (from Nodeca project)",fA={inflateReset:ZK,inflateReset2:tz,inflateResetKeep:ez,inflateInit:rz,inflateInit2:nz,inflate:iz,inflateEnd:sz,inflateGetHeader:az,inflateSetDictionary:oz,inflateInfo:Az};function lz(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var cz=lz;const U4=Object.prototype.toString,{Z_NO_FLUSH:uz,Z_FINISH:dz,Z_OK:Qf,Z_STREAM_END:ew,Z_NEED_DICT:rw,Z_STREAM_ERROR:hz,Z_DATA_ERROR:DC,Z_MEM_ERROR:fz}=y4;function lg(r){this.options=w4.assign({chunkSize:1024*64,windowBits:15,to:""},r||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(r&&r.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15)===0&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new IK,this.strm.avail_out=0;let e=fA.inflateInit2(this.strm,t.windowBits);if(e!==Qf)throw new Error(D1[e]);if(this.header=new cz,fA.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=M1.string2buf(t.dictionary):U4.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(e=fA.inflateSetDictionary(this.strm,t.dictionary),e!==Qf)))throw new Error(D1[e])}lg.prototype.push=function(r,t){const e=this.strm,n=this.options.chunkSize,i=this.options.dictionary;let s,a,o;if(this.ended)return!1;for(t===~~t?a=t:a=t===!0?dz:uz,U4.call(r)==="[object ArrayBuffer]"?e.input=new Uint8Array(r):e.input=r,e.next_in=0,e.avail_in=e.input.length;;){for(e.avail_out===0&&(e.output=new Uint8Array(n),e.next_out=0,e.avail_out=n),s=fA.inflate(e,a),s===rw&&i&&(s=fA.inflateSetDictionary(e,i),s===Qf?s=fA.inflate(e,a):s===DC&&(s=rw));e.avail_in>0&&s===ew&&e.state.wrap>0&&r[e.next_in]!==0;)fA.inflateReset(e),s=fA.inflate(e,a);switch(s){case hz:case DC:case rw:case fz:return this.onEnd(s),this.ended=!0,!1}if(o=e.avail_out,e.next_out&&(e.avail_out===0||s===ew))if(this.options.to==="string"){let A=M1.utf8border(e.output,e.next_out),l=e.next_out-A,c=M1.buf2string(e.output,A);e.next_out=l,e.avail_out=n-l,l&&e.output.set(e.output.subarray(A,A+l),0),this.onData(c)}else this.onData(e.output.length===e.next_out?e.output:e.output.subarray(0,e.next_out));if(!(s===Qf&&o===0)){if(s===ew)return s=fA.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(e.avail_in===0)break}}return!0};lg.prototype.onData=function(r){this.chunks.push(r)};lg.prototype.onEnd=function(r){r===Qf&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=w4.flattenChunks(this.chunks)),this.chunks=[],this.err=r,this.msg=this.strm.msg};function gz(r,t){const e=new lg(t);if(e.push(r),e.err)throw e.msg||D1[e.err];return e.result}var pz=lg,mz=gz,bz={Inflate:pz,inflate:mz};const{Inflate:yz,inflate:wz}=bz;var MC=yz,vz=wz;const P4=[];for(let r=0;r<256;r++){let t=r;for(let e=0;e<8;e++)t&1?t=3988292384^t>>>1:t=t>>>1;P4[r]=t}const RC=4294967295;function xz(r,t,e){let n=r;for(let i=0;i<e;i++)n=P4[(n^t[i])&255]^n>>>8;return n}function _z(r,t){return(xz(RC,r,t)^RC)>>>0}function QC(r,t,e){const n=r.readUint32(),i=_z(new Uint8Array(r.buffer,r.byteOffset+r.offset-t-4,t),t);if(i!==n)throw new Error(`CRC mismatch for chunk ${e}. Expected ${n}, found ${i}`)}function N4(r,t,e){for(let n=0;n<e;n++)t[n]=r[n]}function D4(r,t,e,n){let i=0;for(;i<n;i++)t[i]=r[i];for(;i<e;i++)t[i]=r[i]+t[i-n]&255}function M4(r,t,e,n){let i=0;if(e.length===0)for(;i<n;i++)t[i]=r[i];else for(;i<n;i++)t[i]=r[i]+e[i]&255}function R4(r,t,e,n,i){let s=0;if(e.length===0){for(;s<i;s++)t[s]=r[s];for(;s<n;s++)t[s]=r[s]+(t[s-i]>>1)&255}else{for(;s<i;s++)t[s]=r[s]+(e[s]>>1)&255;for(;s<n;s++)t[s]=r[s]+(t[s-i]+e[s]>>1)&255}}function Q4(r,t,e,n,i){let s=0;if(e.length===0){for(;s<i;s++)t[s]=r[s];for(;s<n;s++)t[s]=r[s]+t[s-i]&255}else{for(;s<i;s++)t[s]=r[s]+e[s]&255;for(;s<n;s++)t[s]=r[s]+Bz(t[s-i],e[s],e[s-i])&255}}function Bz(r,t,e){const n=r+t-e,i=Math.abs(n-r),s=Math.abs(n-t),a=Math.abs(n-e);return i<=s&&i<=a?r:s<=a?t:e}function Cz(r,t,e,n,i,s){switch(r){case 0:N4(t,e,i);break;case 1:D4(t,e,i,s);break;case 2:M4(t,e,n,i);break;case 3:R4(t,e,n,i,s);break;case 4:Q4(t,e,n,i,s);break;default:throw new Error(`Unsupported filter: ${r}`)}}const Ez=new Uint16Array([255]),Sz=new Uint8Array(Ez.buffer),kz=Sz[0]===255;function Iz(r){const{data:t,width:e,height:n,channels:i,depth:s}=r,a=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],o=Math.ceil(s/8)*i,A=new Uint8Array(n*e*o);let l=0;for(let c=0;c<7;c++){const u=a[c],h=Math.ceil((e-u.x)/u.xStep),d=Math.ceil((n-u.y)/u.yStep);if(h<=0||d<=0)continue;const m=h*o,f=new Uint8Array(m);for(let b=0;b<d;b++){const y=t[l++],B=t.subarray(l,l+m);l+=m;const I=new Uint8Array(m);Cz(y,B,I,f,m,o),f.set(I);for(let C=0;C<h;C++){const N=u.x+C*u.xStep,R=u.y+b*u.yStep;if(!(N>=e||R>=n))for(let U=0;U<o;U++)A[(R*e+N)*o+U]=I[C*o+U]}}}if(s===16){const c=new Uint16Array(A.buffer);if(kz)for(let u=0;u<c.length;u++)c[u]=Tz(c[u]);return c}else return A}function Tz(r){return(r&255)<<8|r>>8&255}const Fz=new Uint16Array([255]),Lz=new Uint8Array(Fz.buffer),Uz=Lz[0]===255,Pz=new Uint8Array(0);function OC(r){const{data:t,width:e,height:n,channels:i,depth:s}=r,a=Math.ceil(s/8)*i,o=Math.ceil(s/8*i*e),A=new Uint8Array(n*o);let l=Pz,c=0,u,h;for(let d=0;d<n;d++){switch(u=t.subarray(c+1,c+1+o),h=A.subarray(d*o,(d+1)*o),t[c]){case 0:N4(u,h,o);break;case 1:D4(u,h,o,a);break;case 2:M4(u,h,l,o);break;case 3:R4(u,h,l,o,a);break;case 4:Q4(u,h,l,o,a);break;default:throw new Error(`Unsupported filter: ${t[c]}`)}l=h,c+=o+1}if(s===16){const d=new Uint16Array(A.buffer);if(Uz)for(let m=0;m<d.length;m++)d[m]=Nz(d[m]);return d}else return A}function Nz(r){return(r&255)<<8|r>>8&255}const km=Uint8Array.of(137,80,78,71,13,10,26,10);function HC(r){if(!Dz(r.readBytes(km.length)))throw new Error("wrong PNG signature")}function Dz(r){if(r.length<km.length)return!1;for(let t=0;t<km.length;t++)if(r[t]!==km[t])return!1;return!0}const Mz="tEXt",Rz=0,O4=new TextDecoder("latin1");function Qz(r){if(Hz(r),r.length===0||r.length>79)throw new Error("keyword length must be between 1 and 79")}const Oz=/^[\u0000-\u00FF]*$/;function Hz(r){if(!Oz.test(r))throw new Error("invalid latin1 text")}function Vz(r,t,e){const n=H4(t);r[n]=$z(t,e-n.length-1)}function H4(r){for(r.mark();r.readByte()!==Rz;);const t=r.offset;r.reset();const e=O4.decode(r.readBytes(t-r.offset-1));return r.skip(1),Qz(e),e}function $z(r,t){return O4.decode(r.readBytes(t))}const la={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},nw={UNKNOWN:-1,DEFLATE:0},VC={UNKNOWN:-1,ADAPTIVE:0},iw={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},Wp={NONE:0,BACKGROUND:1,PREVIOUS:2},sw={SOURCE:0,OVER:1};class jz extends d2{constructor(e,n={}){super(e);It(this,"_checkCrc");It(this,"_inflator");It(this,"_png");It(this,"_apng");It(this,"_end");It(this,"_hasPalette");It(this,"_palette");It(this,"_hasTransparency");It(this,"_transparency");It(this,"_compressionMethod");It(this,"_filterMethod");It(this,"_interlaceMethod");It(this,"_colorType");It(this,"_isAnimated");It(this,"_numberOfFrames");It(this,"_numberOfPlays");It(this,"_frames");It(this,"_writingDataChunks");const{checkCrc:i=!1}=n;this._checkCrc=i,this._inflator=new MC,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=nw.UNKNOWN,this._filterMethod=VC.UNKNOWN,this._interlaceMethod=iw.UNKNOWN,this._colorType=la.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(HC(this);!this._end;){const e=this.readUint32(),n=this.readChars(4);this.decodeChunk(e,n)}return this.decodeImage(),this._png}decodeApng(){for(HC(this);!this._end;){const e=this.readUint32(),n=this.readChars(4);this.decodeApngChunk(e,n)}return this.decodeApngImage(),this._apng}decodeChunk(e,n){const i=this.offset;switch(n){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(e);break;case"IDAT":this.decodeIDAT(e);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(e);break;case"iCCP":this.decodeiCCP(e);break;case Mz:Vz(this._png.text,this,e);break;case"pHYs":this.decodepHYs();break;default:this.skip(e);break}if(this.offset-i!==e)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?QC(this,e+4,n):this.skip(4)}decodeApngChunk(e,n){const i=this.offset;switch(n!=="fdAT"&&n!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),n){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(e);break;default:this.decodeChunk(e,n),this.offset=i+e;break}if(this.offset-i!==e)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?QC(this,e+4,n):this.skip(4)}decodeIHDR(){const e=this._png;e.width=this.readUint32(),e.height=this.readUint32(),e.depth=Gz(this.readUint8());const n=this.readUint8();this._colorType=n;let i;switch(n){case la.GREYSCALE:i=1;break;case la.TRUECOLOUR:i=3;break;case la.INDEXED_COLOUR:i=1;break;case la.GREYSCALE_ALPHA:i=2;break;case la.TRUECOLOUR_ALPHA:i=4;break;case la.UNKNOWN:default:throw new Error(`Unknown color type: ${n}`)}if(this._png.channels=i,this._compressionMethod=this.readUint8(),this._compressionMethod!==nw.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const e={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(e)}decodePLTE(e){if(e%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${e}`);const n=e/3;this._hasPalette=!0;const i=[];this._palette=i;for(let s=0;s<n;s++)i.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(e){this._writingDataChunks=!0;const n=e,i=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,i,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodeFDAT(e){this._writingDataChunks=!0;let n=e,i=this.offset+this.byteOffset;if(i+=4,n-=4,this._inflator.push(new Uint8Array(this.buffer,i,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodetRNS(e){switch(this._colorType){case la.GREYSCALE:case la.TRUECOLOUR:{if(e%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${e}`);if(e/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${e/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(e/2);for(let n=0;n<e/2;n++)this._transparency[n]=this.readUint16();break}case la.INDEXED_COLOUR:{if(e>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${e} vs ${this._palette.length})`);let n=0;for(;n<e;n++){const i=this.readByte();this._palette[n].push(i)}for(;n<this._palette.length;n++)this._palette[n].push(255);break}case la.UNKNOWN:case la.GREYSCALE_ALPHA:case la.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(e){const n=H4(this),i=this.readUint8();if(i!==nw.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${i}`);const s=this.readBytes(e-n.length-2);this._png.iccEmbeddedProfile={name:n,profile:vz(s)}}decodepHYs(){const e=this.readUint32(),n=this.readUint32(),i=this.readByte();this._png.resolution={x:e,y:n,unit:i}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let e=0;e<this._numberOfFrames;e++){const n={sequenceNumber:this._frames[e].sequenceNumber,delayNumber:this._frames[e].delayNumber,delayDenominator:this._frames[e].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},i=this._frames.at(e);if(i){if(i.data=OC({data:i.data,width:i.width,height:i.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),e===0||i.xOffset===0&&i.yOffset===0&&i.width===this._png.width&&i.height===this._png.height)n.data=i.data;else{const s=this._apng.frames.at(e-1);this.disposeFrame(i,s,n),this.addFrameDataToCanvas(n,i)}this._apng.frames.push(n)}}return this._apng}disposeFrame(e,n,i){switch(e.disposeOp){case Wp.NONE:break;case Wp.BACKGROUND:for(let s=0;s<this._png.height;s++)for(let a=0;a<this._png.width;a++){const o=(s*e.width+a)*this._png.channels;for(let A=0;A<this._png.channels;A++)i.data[o+A]=0}break;case Wp.PREVIOUS:i.data.set(n.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(e,n){const i=1<<this._png.depth,s=(a,o)=>{const A=((a+n.yOffset)*this._png.width+n.xOffset+o)*this._png.channels,l=(a*n.width+o)*this._png.channels;return{index:A,frameIndex:l}};switch(n.blendOp){case sw.SOURCE:for(let a=0;a<n.height;a++)for(let o=0;o<n.width;o++){const{index:A,frameIndex:l}=s(a,o);for(let c=0;c<this._png.channels;c++)e.data[A+c]=n.data[l+c]}break;case sw.OVER:for(let a=0;a<n.height;a++)for(let o=0;o<n.width;o++){const{index:A,frameIndex:l}=s(a,o);for(let c=0;c<this._png.channels;c++){const u=n.data[l+this._png.channels-1]/i,h=c%(this._png.channels-1)===0?1:n.data[l+c],d=Math.floor(u*h+(1-u)*e.data[A+c]);e.data[A+c]+=d}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var n;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const e=this._isAnimated?((n=this._frames)==null?void 0:n.at(0)).data:this._inflator.result;if(this._filterMethod!==VC.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===iw.NO_INTERLACE)this._png.data=OC({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===iw.ADAM7)this._png.data=Iz({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const e=this._inflator.result,n=this._frames.at(-1);n?n.data=e:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:Wp.NONE,blendOp:sw.SOURCE,data:e}),this._inflator=new MC,this._writingDataChunks=!1}}function Gz(r){if(r!==1&&r!==2&&r!==4&&r!==8&&r!==16)throw new Error(`invalid bit depth: ${r}`);return r}var $C;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.METRE=1]="METRE"})($C||($C={}));function Kz(r,t){return new jz(r,t).decode()}var Ge=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function aw(){Ge.console&&typeof Ge.console.log=="function"&&Ge.console.log.apply(Ge.console,arguments)}var Xr={log:aw,warn:function(r){Ge.console&&(typeof Ge.console.warn=="function"?Ge.console.warn.apply(Ge.console,arguments):aw.call(null,arguments))},error:function(r){Ge.console&&(typeof Ge.console.error=="function"?Ge.console.error.apply(Ge.console,arguments):aw(r))}};function ow(r,t,e){var n=new XMLHttpRequest;n.open("GET",r),n.responseType="blob",n.onload=function(){Fc(n.response,t,e)},n.onerror=function(){Xr.error("could not download file")},n.send()}function jC(r){var t=new XMLHttpRequest;t.open("HEAD",r,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function Yp(r){try{r.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),r.dispatchEvent(t)}}var Fc=Ge.saveAs||((typeof window>"u"?"undefined":Vr(window))!=="object"||window!==Ge?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(r,t,e){var n=Ge.URL||Ge.webkitURL,i=document.createElement("a");t=t||r.name||"download",i.download=t,i.rel="noopener",typeof r=="string"?(i.href=r,i.origin!==location.origin?jC(i.href)?ow(r,t,e):Yp(i,i.target="_blank"):Yp(i)):(i.href=n.createObjectURL(r),setTimeout(function(){n.revokeObjectURL(i.href)},4e4),setTimeout(function(){Yp(i)},0))}:"msSaveOrOpenBlob"in navigator?function(r,t,e){if(t=t||r.name||"download",typeof r=="string")if(jC(r))ow(r,t,e);else{var n=document.createElement("a");n.href=r,n.target="_blank",setTimeout(function(){Yp(n)})}else navigator.msSaveOrOpenBlob((function(i,s){return s===void 0?s={autoBom:!1}:Vr(s)!=="object"&&(Xr.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i})(r,e),t)}:function(r,t,e,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof r=="string")return ow(r,t,e);var i=r.type==="application/octet-stream",s=/constructor/i.test(Ge.HTMLElement)||Ge.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||i&&s)&&(typeof FileReader>"u"?"undefined":Vr(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var c=o.result;c=a?c:c.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=c:location=c,n=null},o.readAsDataURL(r)}else{var A=Ge.URL||Ge.webkitURL,l=A.createObjectURL(r);n?n.location=l:location.href=l,n=null,setTimeout(function(){A.revokeObjectURL(l)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function V4(r){var t;r=r||"",this.ok=!1,r.charAt(0)=="#"&&(r=r.substr(1,6)),r={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[r=(r=r.replace(/ /g,"")).toLowerCase()]||r;for(var e=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],n=0;n<e.length;n++){var i=e[n].re,s=e[n].process,a=i.exec(r);a&&(t=s(a),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),A=this.g.toString(16),l=this.b.toString(16);return o.length==1&&(o="0"+o),A.length==1&&(A="0"+A),l.length==1&&(l="0"+l),"#"+o+A+l}}var Im=Ge.atob.bind(Ge),GC=Ge.btoa.bind(Ge);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Aw(r,t){var e=r[0],n=r[1],i=r[2],s=r[3];e=ts(e,n,i,s,t[0],7,-680876936),s=ts(s,e,n,i,t[1],12,-389564586),i=ts(i,s,e,n,t[2],17,606105819),n=ts(n,i,s,e,t[3],22,-1044525330),e=ts(e,n,i,s,t[4],7,-176418897),s=ts(s,e,n,i,t[5],12,1200080426),i=ts(i,s,e,n,t[6],17,-1473231341),n=ts(n,i,s,e,t[7],22,-45705983),e=ts(e,n,i,s,t[8],7,1770035416),s=ts(s,e,n,i,t[9],12,-1958414417),i=ts(i,s,e,n,t[10],17,-42063),n=ts(n,i,s,e,t[11],22,-1990404162),e=ts(e,n,i,s,t[12],7,1804603682),s=ts(s,e,n,i,t[13],12,-40341101),i=ts(i,s,e,n,t[14],17,-1502002290),e=es(e,n=ts(n,i,s,e,t[15],22,1236535329),i,s,t[1],5,-165796510),s=es(s,e,n,i,t[6],9,-1069501632),i=es(i,s,e,n,t[11],14,643717713),n=es(n,i,s,e,t[0],20,-373897302),e=es(e,n,i,s,t[5],5,-701558691),s=es(s,e,n,i,t[10],9,38016083),i=es(i,s,e,n,t[15],14,-660478335),n=es(n,i,s,e,t[4],20,-405537848),e=es(e,n,i,s,t[9],5,568446438),s=es(s,e,n,i,t[14],9,-1019803690),i=es(i,s,e,n,t[3],14,-187363961),n=es(n,i,s,e,t[8],20,1163531501),e=es(e,n,i,s,t[13],5,-1444681467),s=es(s,e,n,i,t[2],9,-51403784),i=es(i,s,e,n,t[7],14,1735328473),e=rs(e,n=es(n,i,s,e,t[12],20,-1926607734),i,s,t[5],4,-378558),s=rs(s,e,n,i,t[8],11,-2022574463),i=rs(i,s,e,n,t[11],16,1839030562),n=rs(n,i,s,e,t[14],23,-35309556),e=rs(e,n,i,s,t[1],4,-1530992060),s=rs(s,e,n,i,t[4],11,1272893353),i=rs(i,s,e,n,t[7],16,-155497632),n=rs(n,i,s,e,t[10],23,-1094730640),e=rs(e,n,i,s,t[13],4,681279174),s=rs(s,e,n,i,t[0],11,-358537222),i=rs(i,s,e,n,t[3],16,-722521979),n=rs(n,i,s,e,t[6],23,76029189),e=rs(e,n,i,s,t[9],4,-640364487),s=rs(s,e,n,i,t[12],11,-421815835),i=rs(i,s,e,n,t[15],16,530742520),e=ns(e,n=rs(n,i,s,e,t[2],23,-995338651),i,s,t[0],6,-198630844),s=ns(s,e,n,i,t[7],10,1126891415),i=ns(i,s,e,n,t[14],15,-1416354905),n=ns(n,i,s,e,t[5],21,-57434055),e=ns(e,n,i,s,t[12],6,1700485571),s=ns(s,e,n,i,t[3],10,-1894986606),i=ns(i,s,e,n,t[10],15,-1051523),n=ns(n,i,s,e,t[1],21,-2054922799),e=ns(e,n,i,s,t[8],6,1873313359),s=ns(s,e,n,i,t[15],10,-30611744),i=ns(i,s,e,n,t[6],15,-1560198380),n=ns(n,i,s,e,t[13],21,1309151649),e=ns(e,n,i,s,t[4],6,-145523070),s=ns(s,e,n,i,t[11],10,-1120210379),i=ns(i,s,e,n,t[2],15,718787259),n=ns(n,i,s,e,t[9],21,-343485551),r[0]=Il(e,r[0]),r[1]=Il(n,r[1]),r[2]=Il(i,r[2]),r[3]=Il(s,r[3])}function db(r,t,e,n,i,s){return t=Il(Il(t,r),Il(n,s)),Il(t<<i|t>>>32-i,e)}function ts(r,t,e,n,i,s,a){return db(t&e|~t&n,r,t,i,s,a)}function es(r,t,e,n,i,s,a){return db(t&n|e&~n,r,t,i,s,a)}function rs(r,t,e,n,i,s,a){return db(t^e^n,r,t,i,s,a)}function ns(r,t,e,n,i,s,a){return db(e^(t|~n),r,t,i,s,a)}function $4(r){var t,e=r.length,n=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=r.length;t+=64)Aw(n,zz(r.substring(t-64,t)));r=r.substring(t-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<r.length;t++)i[t>>2]|=r.charCodeAt(t)<<(t%4<<3);if(i[t>>2]|=128<<(t%4<<3),t>55)for(Aw(n,i),t=0;t<16;t++)i[t]=0;return i[14]=8*e,Aw(n,i),n}function zz(r){var t,e=[];for(t=0;t<64;t+=4)e[t>>2]=r.charCodeAt(t)+(r.charCodeAt(t+1)<<8)+(r.charCodeAt(t+2)<<16)+(r.charCodeAt(t+3)<<24);return e}var KC="0123456789abcdef".split("");function qz(r){for(var t="",e=0;e<4;e++)t+=KC[r>>8*e+4&15]+KC[r>>8*e&15];return t}function Wz(r){return String.fromCharCode(255&r,(65280&r)>>8,(16711680&r)>>16,(4278190080&r)>>24)}function R1(r){return $4(r).map(Wz).join("")}var Yz=(function(r){for(var t=0;t<r.length;t++)r[t]=qz(r[t]);return r.join("")})($4("hello"))!="5d41402abc4b2a76b9719d911017c592";function Il(r,t){if(Yz){var e=(65535&r)+(65535&t);return(r>>16)+(t>>16)+(e>>16)<<16|65535&e}return r+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Q1(r,t){var e,n,i,s;if(r!==e){for(var a=(i=r,s=1+(256/r.length|0),new Array(s+1).join(i)),o=[],A=0;A<256;A++)o[A]=A;var l=0;for(A=0;A<256;A++){var c=o[A];l=(l+c+a.charCodeAt(A))%256,o[A]=o[l],o[l]=c}e=r,n=o}else o=n;var u=t.length,h=0,d=0,m="";for(A=0;A<u;A++)d=(d+(c=o[h=(h+1)%256]))%256,o[h]=o[d],o[d]=c,a=o[(o[h]+o[d])%256],m+=String.fromCharCode(t.charCodeAt(A)^a);return m}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var zC={print:4,modify:8,copy:16,"annot-forms":32};function Wu(r,t,e,n){this.v=1,this.r=2;var i=192;r.forEach(function(o){if(zC.perm!==void 0)throw new Error("Invalid permission: "+o);i+=zC[o]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(t+this.padding).substr(0,32),a=(e+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,a),this.P=-(1+(255^i)),this.encryptionKey=R1(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=Q1(this.encryptionKey,this.padding)}function Yu(r){if(/[^\u0000-\u00ff]/.test(r))throw new Error("Invalid PDF Name Object: "+r+", Only accept ASCII characters.");for(var t="",e=r.length,n=0;n<e;n++){var i=r.charCodeAt(n);t+=i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?"#"+("0"+i.toString(16)).slice(-2):r[n]}return t}function qC(r){if(Vr(r)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(e,n,i){if(i=i||!1,typeof e!="string"||typeof n!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(e)||(t[e]={});var s=Math.random().toString(35);return t[e][s]=[n,!!i],s},this.unsubscribe=function(e){for(var n in t)if(t[n][e])return delete t[n][e],Object.keys(t[n]).length===0&&delete t[n],!0;return!1},this.publish=function(e){if(t.hasOwnProperty(e)){var n=Array.prototype.slice.call(arguments,1),i=[];for(var s in t[e]){var a=t[e][s];try{a[0].apply(r,n)}catch(o){Ge.console&&Xr.error("jsPDF PubSub Error",o.message,o)}a[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function b0(r){if(!(this instanceof b0))return new b0(r);var t="opacity,stroke-opacity".split(",");for(var e in r)r.hasOwnProperty(e)&&t.indexOf(e)>=0&&(this[e]=r[e]);this.id="",this.objectNumber=-1}function j4(r,t){this.gState=r,this.matrix=t,this.id="",this.objectNumber=-1}function Pc(r,t,e,n,i){if(!(this instanceof Pc))return new Pc(r,t,e,n,i);this.type=r==="axial"?2:3,this.coords=t,this.colors=e,j4.call(this,n,i)}function id(r,t,e,n,i){if(!(this instanceof id))return new id(r,t,e,n,i);this.boundingBox=r,this.xStep=t,this.yStep=e,this.stream="",this.cloneIndex=0,j4.call(this,n,i)}function _e(r){var t,e=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],i=arguments[2],s=arguments[3],a=[],o=1,A=16,l="S",c=null;Vr(r=r||{})==="object"&&(e=r.orientation,n=r.unit||n,i=r.format||i,s=r.compress||r.compressPdf||s,(c=r.encryption||null)!==null&&(c.userPassword=c.userPassword||"",c.ownerPassword=c.ownerPassword||"",c.userPermissions=c.userPermissions||[]),o=typeof r.userUnit=="number"?Math.abs(r.userUnit):1,r.precision!==void 0&&(t=r.precision),r.floatPrecision!==void 0&&(A=r.floatPrecision),l=r.defaultPathOperation||"S"),a=r.filters||(s===!0?["FlateEncode"]:a),n=n||"mm",e=(""+(e||"P")).toLowerCase();var u=r.putOnlyUsedFonts||!1,h={},d={internal:{},__private__:{}};d.__private__.PubSub=qC;var m="1.3",f=d.__private__.getPdfVersion=function(){return m};d.__private__.setPdfVersion=function(S){m=S};var b={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};d.__private__.getPageFormats=function(){return b};var y=d.__private__.getPageFormat=function(S){return b[S]};i=i||"a4";var B="compat",I="advanced",C=B;function N(){this.saveGraphicsState(),$(new Ne(ve,0,0,-ve,0,Ra()*ve).toString()+" cm"),this.setFontSize(this.getFontSize()/ve),l="n",C=I}function R(){this.restoreGraphicsState(),l="S",C=B}var U=d.__private__.combineFontStyleAndFontWeight=function(S,K){if(S=="bold"&&K=="normal"||S=="bold"&&K==400||S=="normal"&&K=="italic"||S=="bold"&&K=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return K&&(S=K==400||K==="normal"?S==="italic"?"italic":"normal":K!=700&&K!=="bold"||S!=="normal"?(K==700?"bold":K)+""+S:"bold"),S};d.advancedAPI=function(S){var K=C===B;return K&&N.call(this),typeof S!="function"||(S(this),K&&R.call(this)),this},d.compatAPI=function(S){var K=C===I;return K&&R.call(this),typeof S!="function"||(S(this),K&&N.call(this)),this},d.isAdvancedAPI=function(){return C===I};var x,v=function(S){if(C!==I)throw new Error(S+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},T=d.roundToPrecision=d.__private__.roundToPrecision=function(S,K){var ht=t||K;if(isNaN(S)||isNaN(ht))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return S.toFixed(ht).replace(/0+$/,"")};x=d.hpf=d.__private__.hpf=typeof A=="number"?function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.hpf");return T(S,A)}:A==="smart"?function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.hpf");return T(S,S>-1&&S<1?16:5)}:function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.hpf");return T(S,16)};var E=d.f2=d.__private__.f2=function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.f2");return T(S,2)},_=d.__private__.f3=function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.f3");return T(S,3)},F=d.scale=d.__private__.scale=function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.scale");return C===B?S*ve:C===I?S:void 0},k=function(S){return F((function(K){return C===B?Ra()-K:C===I?K:void 0})(S))};d.__private__.setPrecision=d.setPrecision=function(S){typeof parseInt(S,10)=="number"&&(t=parseInt(S,10))};var Z,ut="00000000000000000000000000000000",nt=d.__private__.getFileId=function(){return ut},j=d.__private__.setFileId=function(S){return ut=S!==void 0&&/^[a-fA-F0-9]{32}$/.test(S)?S.toUpperCase():ut.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),c!==null&&(Rr=new Wu(c.userPermissions,c.userPassword,c.ownerPassword,ut)),ut};d.setFileId=function(S){return j(S),this},d.getFileId=function(){return nt()};var G=d.__private__.convertDateToPDFDate=function(S){var K=S.getTimezoneOffset(),ht=K<0?"+":"-",wt=Math.floor(Math.abs(K/60)),St=Math.abs(K%60),$t=[ht,V(wt),"'",V(St),"'"].join("");return["D:",S.getFullYear(),V(S.getMonth()+1),V(S.getDate()),V(S.getHours()),V(S.getMinutes()),V(S.getSeconds()),$t].join("")},pt=d.__private__.convertPDFDateToDate=function(S){var K=parseInt(S.substr(2,4),10),ht=parseInt(S.substr(6,2),10)-1,wt=parseInt(S.substr(8,2),10),St=parseInt(S.substr(10,2),10),$t=parseInt(S.substr(12,2),10),Yt=parseInt(S.substr(14,2),10);return new Date(K,ht,wt,St,$t,Yt,0)},q=d.__private__.setCreationDate=function(S){var K;if(S===void 0&&(S=new Date),S instanceof Date)K=G(S);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(S))throw new Error("Invalid argument passed to jsPDF.setCreationDate");K=S}return Z=K},L=d.__private__.getCreationDate=function(S){var K=Z;return S==="jsDate"&&(K=pt(Z)),K};d.setCreationDate=function(S){return q(S),this},d.getCreationDate=function(S){return L(S)};var O,V=d.__private__.padd2=function(S){return("0"+parseInt(S)).slice(-2)},X=d.__private__.padd2Hex=function(S){return("00"+(S=S.toString())).substr(S.length)},At=0,et=[],st=[],dt=0,vt=[],_t=[],Mt=!1,Ot=st;d.__private__.setCustomOutputDestination=function(S){Mt=!0,Ot=S};var D=function(S){Mt||(Ot=S)};d.__private__.resetCustomOutputDestination=function(){Mt=!1,Ot=st};var $=d.__private__.out=function(S){return S=S.toString(),dt+=S.length+1,Ot.push(S),Ot},bt=d.__private__.write=function(S){return $(arguments.length===1?S.toString():Array.prototype.join.call(arguments," "))},rt=d.__private__.getArrayBuffer=function(S){for(var K=S.length,ht=new ArrayBuffer(K),wt=new Uint8Array(ht);K--;)wt[K]=S.charCodeAt(K);return ht},W=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];d.__private__.getStandardFonts=function(){return W};var at=r.fontSize||16;d.__private__.setFontSize=d.setFontSize=function(S){return at=C===I?S/ve:S,this};var Ct,xt=d.__private__.getFontSize=d.getFontSize=function(){return C===B?at:at*ve},yt=r.R2L||!1;d.__private__.setR2L=d.setR2L=function(S){return yt=S,this},d.__private__.getR2L=d.getR2L=function(){return yt};var kt,Rt=d.__private__.setZoomMode=function(S){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(S))Ct=S;else if(isNaN(S)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(S)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+S+'" is not recognized.');Ct=S}else Ct=parseInt(S,10)};d.__private__.getZoomMode=function(){return Ct};var Lt,Qt=d.__private__.setPageMode=function(S){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(S)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+S+'" is not recognized.');kt=S};d.__private__.getPageMode=function(){return kt};var se=d.__private__.setLayoutMode=function(S){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(S)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+S+'" is not recognized.');Lt=S};d.__private__.getLayoutMode=function(){return Lt},d.__private__.setDisplayMode=d.setDisplayMode=function(S,K,ht){return Rt(S),se(K),Qt(ht),this};var te={title:"",subject:"",author:"",keywords:"",creator:""};d.__private__.getDocumentProperty=function(S){if(Object.keys(te).indexOf(S)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return te[S]},d.__private__.getDocumentProperties=function(){return te},d.__private__.setDocumentProperties=d.setProperties=d.setDocumentProperties=function(S){for(var K in te)te.hasOwnProperty(K)&&S[K]&&(te[K]=S[K]);return this},d.__private__.setDocumentProperty=function(S,K){if(Object.keys(te).indexOf(S)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return te[S]=K};var ae,ve,ie,Ae,ee,re={},he={},Fe=[],xe={},De={},Le={},or={},kr=null,Se=0,ke=[],rr=new qC(d),ei=r.hotfixes||[],_n={},Yi={},Ai=[],Ne=function S(K,ht,wt,St,$t,Yt){if(!(this instanceof S))return new S(K,ht,wt,St,$t,Yt);isNaN(K)&&(K=1),isNaN(ht)&&(ht=0),isNaN(wt)&&(wt=0),isNaN(St)&&(St=1),isNaN($t)&&($t=0),isNaN(Yt)&&(Yt=0),this._matrix=[K,ht,wt,St,$t,Yt]};Object.defineProperty(Ne.prototype,"sx",{get:function(){return this._matrix[0]},set:function(S){this._matrix[0]=S}}),Object.defineProperty(Ne.prototype,"shy",{get:function(){return this._matrix[1]},set:function(S){this._matrix[1]=S}}),Object.defineProperty(Ne.prototype,"shx",{get:function(){return this._matrix[2]},set:function(S){this._matrix[2]=S}}),Object.defineProperty(Ne.prototype,"sy",{get:function(){return this._matrix[3]},set:function(S){this._matrix[3]=S}}),Object.defineProperty(Ne.prototype,"tx",{get:function(){return this._matrix[4]},set:function(S){this._matrix[4]=S}}),Object.defineProperty(Ne.prototype,"ty",{get:function(){return this._matrix[5]},set:function(S){this._matrix[5]=S}}),Object.defineProperty(Ne.prototype,"a",{get:function(){return this._matrix[0]},set:function(S){this._matrix[0]=S}}),Object.defineProperty(Ne.prototype,"b",{get:function(){return this._matrix[1]},set:function(S){this._matrix[1]=S}}),Object.defineProperty(Ne.prototype,"c",{get:function(){return this._matrix[2]},set:function(S){this._matrix[2]=S}}),Object.defineProperty(Ne.prototype,"d",{get:function(){return this._matrix[3]},set:function(S){this._matrix[3]=S}}),Object.defineProperty(Ne.prototype,"e",{get:function(){return this._matrix[4]},set:function(S){this._matrix[4]=S}}),Object.defineProperty(Ne.prototype,"f",{get:function(){return this._matrix[5]},set:function(S){this._matrix[5]=S}}),Object.defineProperty(Ne.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Ne.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Ne.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Ne.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Ne.prototype.join=function(S){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(x).join(S)},Ne.prototype.multiply=function(S){var K=S.sx*this.sx+S.shy*this.shx,ht=S.sx*this.shy+S.shy*this.sy,wt=S.shx*this.sx+S.sy*this.shx,St=S.shx*this.shy+S.sy*this.sy,$t=S.tx*this.sx+S.ty*this.shx+this.tx,Yt=S.tx*this.shy+S.ty*this.sy+this.ty;return new Ne(K,ht,wt,St,$t,Yt)},Ne.prototype.decompose=function(){var S=this.sx,K=this.shy,ht=this.shx,wt=this.sy,St=this.tx,$t=this.ty,Yt=Math.sqrt(S*S+K*K),me=(S/=Yt)*ht+(K/=Yt)*wt;ht-=S*me,wt-=K*me;var Be=Math.sqrt(ht*ht+wt*wt);return me/=Be,S*(wt/=Be)<K*(ht/=Be)&&(S=-S,K=-K,me=-me,Yt=-Yt),{scale:new Ne(Yt,0,0,Be,0,0),translate:new Ne(1,0,0,1,St,$t),rotate:new Ne(S,K,-K,S,0,0),skew:new Ne(1,0,me,1,0,0)}},Ne.prototype.toString=function(S){return this.join(" ")},Ne.prototype.inversed=function(){var S=this.sx,K=this.shy,ht=this.shx,wt=this.sy,St=this.tx,$t=this.ty,Yt=1/(S*wt-K*ht),me=wt*Yt,Be=-K*Yt,Me=-ht*Yt,Ie=S*Yt;return new Ne(me,Be,Me,Ie,-me*St-Me*$t,-Be*St-Ie*$t)},Ne.prototype.applyToPoint=function(S){var K=S.x*this.sx+S.y*this.shx+this.tx,ht=S.x*this.shy+S.y*this.sy+this.ty;return new ta(K,ht)},Ne.prototype.applyToRectangle=function(S){var K=this.applyToPoint(S),ht=this.applyToPoint(new ta(S.x+S.w,S.y+S.h));return new zA(K.x,K.y,ht.x-K.x,ht.y-K.y)},Ne.prototype.clone=function(){var S=this.sx,K=this.shy,ht=this.shx,wt=this.sy,St=this.tx,$t=this.ty;return new Ne(S,K,ht,wt,St,$t)},d.Matrix=Ne;var Ys=d.matrixMult=function(S,K){return K.multiply(S)},li=new Ne(1,0,0,1,0,0);d.unitMatrix=d.identityMatrix=li;var Ni=function(S,K){if(!De[S]){var ht=(K instanceof Pc?"Sh":"P")+(Object.keys(xe).length+1).toString(10);K.id=ht,De[S]=ht,xe[ht]=K,rr.publish("addPattern",K)}};d.ShadingPattern=Pc,d.TilingPattern=id,d.addShadingPattern=function(S,K){return v("addShadingPattern()"),Ni(S,K),this},d.beginTilingPattern=function(S){v("beginTilingPattern()"),ho(S.boundingBox[0],S.boundingBox[1],S.boundingBox[2]-S.boundingBox[0],S.boundingBox[3]-S.boundingBox[1],S.matrix)},d.endTilingPattern=function(S,K){v("endTilingPattern()"),K.stream=_t[O].join(`
`),Ni(S,K),rr.publish("endTilingPattern",K),Ai.pop().restore()};var Di,Mr=d.__private__.newObject=function(){var S=$r();return Qn(S,!0),S},$r=d.__private__.newObjectDeferred=function(){return At++,et[At]=function(){return dt},At},Qn=function(S,K){return K=typeof K=="boolean"&&K,et[S]=dt,K&&$(S+" 0 obj"),S},ci=d.__private__.newAdditionalObject=function(){var S={objId:$r(),content:""};return vt.push(S),S},Xs=$r(),Mi=$r(),Ri=d.__private__.decodeColorString=function(S){var K=S.split(" ");if(K.length!==2||K[1]!=="g"&&K[1]!=="G")K.length!==5||K[4]!=="k"&&K[4]!=="K"||(K=[(1-K[0])*(1-K[3]),(1-K[1])*(1-K[3]),(1-K[2])*(1-K[3]),"r"]);else{var ht=parseFloat(K[0]);K=[ht,ht,ht,"r"]}for(var wt="#",St=0;St<3;St++)wt+=("0"+Math.floor(255*parseFloat(K[St])).toString(16)).slice(-2);return wt},wi=d.__private__.encodeColorString=function(S){var K;typeof S=="string"&&(S={ch1:S});var ht=S.ch1,wt=S.ch2,St=S.ch3,$t=S.ch4,Yt=S.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof ht=="string"&&ht.charAt(0)!=="#"){var me=new V4(ht);if(me.ok)ht=me.toHex();else if(!/^\d*\.?\d*$/.test(ht))throw new Error('Invalid color "'+ht+'" passed to jsPDF.encodeColorString.')}if(typeof ht=="string"&&/^#[0-9A-Fa-f]{3}$/.test(ht)&&(ht="#"+ht[1]+ht[1]+ht[2]+ht[2]+ht[3]+ht[3]),typeof ht=="string"&&/^#[0-9A-Fa-f]{6}$/.test(ht)){var Be=parseInt(ht.substr(1),16);ht=Be>>16&255,wt=Be>>8&255,St=255&Be}if(wt===void 0||$t===void 0&&ht===wt&&wt===St)K=typeof ht=="string"?ht+" "+Yt[0]:S.precision===2?E(ht/255)+" "+Yt[0]:_(ht/255)+" "+Yt[0];else if($t===void 0||Vr($t)==="object"){if($t&&!isNaN($t.a)&&$t.a===0)return["1.","1.","1.",Yt[1]].join(" ");K=typeof ht=="string"?[ht,wt,St,Yt[1]].join(" "):S.precision===2?[E(ht/255),E(wt/255),E(St/255),Yt[1]].join(" "):[_(ht/255),_(wt/255),_(St/255),Yt[1]].join(" ")}else K=typeof ht=="string"?[ht,wt,St,$t,Yt[2]].join(" "):S.precision===2?[E(ht),E(wt),E(St),E($t),Yt[2]].join(" "):[_(ht),_(wt),_(St),_($t),Yt[2]].join(" ");return K},Qi=d.__private__.getFilters=function(){return a},vi=d.__private__.putStream=function(S){var K=(S=S||{}).data||"",ht=S.filters||Qi(),wt=S.alreadyAppliedFilters||[],St=S.addLength1||!1,$t=K.length,Yt=S.objectId,me=function(M){return M};if(c!==null&&Yt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");c!==null&&(me=Rr.encryptor(Yt,0));var Be={};ht===!0&&(ht=["FlateEncode"]);var Me=S.additionalKeyValues||[],Ie=(Be=_e.API.processDataByFilters!==void 0?_e.API.processDataByFilters(K,ht):{data:K,reverseChain:[]}).reverseChain+(Array.isArray(wt)?wt.join(" "):wt.toString());if(Be.data.length!==0&&(Me.push({key:"Length",value:Be.data.length}),St===!0&&Me.push({key:"Length1",value:$t})),Ie.length!=0)if(Ie.split("/").length-1==1)Me.push({key:"Filter",value:Ie});else{Me.push({key:"Filter",value:"["+Ie+"]"});for(var wr=0;wr<Me.length;wr+=1)if(Me[wr].key==="DecodeParms"){for(var en=[],zr=0;zr<Be.reverseChain.split("/").length-1;zr+=1)en.push("null");en.push(Me[wr].value),Me[wr].value="["+en.join(" ")+"]"}}$("<<");for(var p=0;p<Me.length;p++)$("/"+Me[p].key+" "+Me[p].value);$(">>"),Be.data.length!==0&&($("stream"),$(me(Be.data)),$("endstream"))},xi=d.__private__.putPage=function(S){var K=S.number,ht=S.data,wt=S.objId,St=S.contentsObjId;Qn(wt,!0),$("<</Type /Page"),$("/Parent "+S.rootDictionaryObjId+" 0 R"),$("/Resources "+S.resourceDictionaryObjId+" 0 R"),$("/MediaBox ["+parseFloat(x(S.mediaBox.bottomLeftX))+" "+parseFloat(x(S.mediaBox.bottomLeftY))+" "+x(S.mediaBox.topRightX)+" "+x(S.mediaBox.topRightY)+"]"),S.cropBox!==null&&$("/CropBox ["+x(S.cropBox.bottomLeftX)+" "+x(S.cropBox.bottomLeftY)+" "+x(S.cropBox.topRightX)+" "+x(S.cropBox.topRightY)+"]"),S.bleedBox!==null&&$("/BleedBox ["+x(S.bleedBox.bottomLeftX)+" "+x(S.bleedBox.bottomLeftY)+" "+x(S.bleedBox.topRightX)+" "+x(S.bleedBox.topRightY)+"]"),S.trimBox!==null&&$("/TrimBox ["+x(S.trimBox.bottomLeftX)+" "+x(S.trimBox.bottomLeftY)+" "+x(S.trimBox.topRightX)+" "+x(S.trimBox.topRightY)+"]"),S.artBox!==null&&$("/ArtBox ["+x(S.artBox.bottomLeftX)+" "+x(S.artBox.bottomLeftY)+" "+x(S.artBox.topRightX)+" "+x(S.artBox.topRightY)+"]"),typeof S.userUnit=="number"&&S.userUnit!==1&&$("/UserUnit "+S.userUnit),rr.publish("putPage",{objId:wt,pageContext:ke[K],pageNumber:K,page:ht}),$("/Contents "+St+" 0 R"),$(">>"),$("endobj");var $t=ht.join(`
`);return C===I&&($t+=`
Q`),Qn(St,!0),vi({data:$t,filters:Qi(),objectId:St}),$("endobj"),wt},_i=d.__private__.putPages=function(){var S,K,ht=[];for(S=1;S<=Se;S++)ke[S].objId=$r(),ke[S].contentsObjId=$r();for(S=1;S<=Se;S++)ht.push(xi({number:S,data:_t[S],objId:ke[S].objId,contentsObjId:ke[S].contentsObjId,mediaBox:ke[S].mediaBox,cropBox:ke[S].cropBox,bleedBox:ke[S].bleedBox,trimBox:ke[S].trimBox,artBox:ke[S].artBox,userUnit:ke[S].userUnit,rootDictionaryObjId:Xs,resourceDictionaryObjId:Mi}));Qn(Xs,!0),$("<</Type /Pages");var wt="/Kids [";for(K=0;K<Se;K++)wt+=ht[K]+" 0 R ";$(wt+"]"),$("/Count "+Se),$(">>"),$("endobj"),rr.publish("postPutPages")},Bi=function(S){rr.publish("putFont",{font:S,out:$,newObject:Mr,putStream:vi}),S.isAlreadyPutted!==!0&&(S.objectNumber=Mr(),$("<<"),$("/Type /Font"),$("/BaseFont /"+Yu(S.postScriptName)),$("/Subtype /Type1"),typeof S.encoding=="string"&&$("/Encoding /"+S.encoding),$("/FirstChar 32"),$("/LastChar 255"),$(">>"),$("endobj"))},Cs=function(S){S.objectNumber=Mr();var K=[];K.push({key:"Type",value:"/XObject"}),K.push({key:"Subtype",value:"/Form"}),K.push({key:"BBox",value:"["+[x(S.x),x(S.y),x(S.x+S.width),x(S.y+S.height)].join(" ")+"]"}),K.push({key:"Matrix",value:"["+S.matrix.toString()+"]"});var ht=S.pages[1].join(`
`);vi({data:ht,additionalKeyValues:K,objectId:S.objectNumber}),$("endobj")},Es=function(S,K){K||(K=21);var ht=Mr(),wt=(function(Yt,me){var Be,Me=[],Ie=1/(me-1);for(Be=0;Be<1;Be+=Ie)Me.push(Be);if(Me.push(1),Yt[0].offset!=0){var wr={offset:0,color:Yt[0].color};Yt.unshift(wr)}if(Yt[Yt.length-1].offset!=1){var en={offset:1,color:Yt[Yt.length-1].color};Yt.push(en)}for(var zr="",p=0,M=0;M<Me.length;M++){for(Be=Me[M];Be>Yt[p+1].offset;)p++;var H=Yt[p].offset,ot=(Be-H)/(Yt[p+1].offset-H),Tt=Yt[p].color,Nt=Yt[p+1].color;zr+=X(Math.round((1-ot)*Tt[0]+ot*Nt[0]).toString(16))+X(Math.round((1-ot)*Tt[1]+ot*Nt[1]).toString(16))+X(Math.round((1-ot)*Tt[2]+ot*Nt[2]).toString(16))}return zr.trim()})(S.colors,K),St=[];St.push({key:"FunctionType",value:"0"}),St.push({key:"Domain",value:"[0.0 1.0]"}),St.push({key:"Size",value:"["+K+"]"}),St.push({key:"BitsPerSample",value:"8"}),St.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),St.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),vi({data:wt,additionalKeyValues:St,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:ht}),$("endobj"),S.objectNumber=Mr(),$("<< /ShadingType "+S.type),$("/ColorSpace /DeviceRGB");var $t="/Coords ["+x(parseFloat(S.coords[0]))+" "+x(parseFloat(S.coords[1]))+" ";S.type===2?$t+=x(parseFloat(S.coords[2]))+" "+x(parseFloat(S.coords[3])):$t+=x(parseFloat(S.coords[2]))+" "+x(parseFloat(S.coords[3]))+" "+x(parseFloat(S.coords[4]))+" "+x(parseFloat(S.coords[5])),$($t+="]"),S.matrix&&$("/Matrix ["+S.matrix.toString()+"]"),$("/Function "+ht+" 0 R"),$("/Extend [true true]"),$(">>"),$("endobj")},Ss=function(S,K){var ht=$r(),wt=Mr();K.push({resourcesOid:ht,objectOid:wt}),S.objectNumber=wt;var St=[];St.push({key:"Type",value:"/Pattern"}),St.push({key:"PatternType",value:"1"}),St.push({key:"PaintType",value:"1"}),St.push({key:"TilingType",value:"1"}),St.push({key:"BBox",value:"["+S.boundingBox.map(x).join(" ")+"]"}),St.push({key:"XStep",value:x(S.xStep)}),St.push({key:"YStep",value:x(S.yStep)}),St.push({key:"Resources",value:ht+" 0 R"}),S.matrix&&St.push({key:"Matrix",value:"["+S.matrix.toString()+"]"}),vi({data:S.stream,additionalKeyValues:St,objectId:S.objectNumber}),$("endobj")},Js=function(S){for(var K in S.objectNumber=Mr(),$("<<"),S)switch(K){case"opacity":$("/ca "+E(S[K]));break;case"stroke-opacity":$("/CA "+E(S[K]))}$(">>"),$("endobj")},ks=function(S){Qn(S.resourcesOid,!0),$("<<"),$("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var K in $("/Font <<"),re)re.hasOwnProperty(K)&&(u===!1||u===!0&&h.hasOwnProperty(K))&&$("/"+K+" "+re[K].objectNumber+" 0 R");$(">>")})(),(function(){if(Object.keys(xe).length>0){for(var K in $("/Shading <<"),xe)xe.hasOwnProperty(K)&&xe[K]instanceof Pc&&xe[K].objectNumber>=0&&$("/"+K+" "+xe[K].objectNumber+" 0 R");rr.publish("putShadingPatternDict"),$(">>")}})(),(function(K){if(Object.keys(xe).length>0){for(var ht in $("/Pattern <<"),xe)xe.hasOwnProperty(ht)&&xe[ht]instanceof d.TilingPattern&&xe[ht].objectNumber>=0&&xe[ht].objectNumber<K&&$("/"+ht+" "+xe[ht].objectNumber+" 0 R");rr.publish("putTilingPatternDict"),$(">>")}})(S.objectOid),(function(){if(Object.keys(Le).length>0){var K;for(K in $("/ExtGState <<"),Le)Le.hasOwnProperty(K)&&Le[K].objectNumber>=0&&$("/"+K+" "+Le[K].objectNumber+" 0 R");rr.publish("putGStateDict"),$(">>")}})(),(function(){for(var K in $("/XObject <<"),_n)_n.hasOwnProperty(K)&&_n[K].objectNumber>=0&&$("/"+K+" "+_n[K].objectNumber+" 0 R");rr.publish("putXobjectDict"),$(">>")})(),$(">>"),$("endobj")},ui=function(S){he[S.fontName]=he[S.fontName]||{},he[S.fontName][S.fontStyle]=S.id},Is=function(S,K,ht,wt,St){var $t={id:"F"+(Object.keys(re).length+1).toString(10),postScriptName:S,fontName:K,fontStyle:ht,encoding:wt,isStandardFont:St||!1,metadata:{}};return rr.publish("addFont",{font:$t,instance:this}),re[$t.id]=$t,ui($t),$t.id},yn=d.__private__.pdfEscape=d.pdfEscape=function(S,K){return(function(ht,wt){var St,$t,Yt,me,Be,Me,Ie,wr,en;if(Yt=(wt=wt||{}).sourceEncoding||"Unicode",Be=wt.outputEncoding,(wt.autoencode||Be)&&re[ae].metadata&&re[ae].metadata[Yt]&&re[ae].metadata[Yt].encoding&&(me=re[ae].metadata[Yt].encoding,!Be&&re[ae].encoding&&(Be=re[ae].encoding),!Be&&me.codePages&&(Be=me.codePages[0]),typeof Be=="string"&&(Be=me[Be]),Be)){for(Ie=!1,Me=[],St=0,$t=ht.length;St<$t;St++)(wr=Be[ht.charCodeAt(St)])?Me.push(String.fromCharCode(wr)):Me.push(ht[St]),Me[St].charCodeAt(0)>>8&&(Ie=!0);ht=Me.join("")}for(St=ht.length;Ie===void 0&&St!==0;)ht.charCodeAt(St-1)>>8&&(Ie=!0),St--;if(!Ie)return ht;for(Me=wt.noBOM?[]:[254,255],St=0,$t=ht.length;St<$t;St++){if((en=(wr=ht.charCodeAt(St))>>8)>>8)throw new Error("Character at position "+St+" of string '"+ht+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Me.push(en),Me.push(wr-(en<<8))}return String.fromCharCode.apply(void 0,Me)})(S,K).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ci=d.__private__.beginPage=function(S){_t[++Se]=[],ke[Se]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(S[0]),topRightY:Number(S[1])}},Oi(Se),D(_t[O])},Ts=function(S,K){var ht,wt,St;switch(e=K||e,typeof S=="string"&&(ht=y(S.toLowerCase()),Array.isArray(ht)&&(wt=ht[0],St=ht[1])),Array.isArray(S)&&(wt=S[0]*ve,St=S[1]*ve),isNaN(wt)&&(wt=i[0],St=i[1]),(wt>14400||St>14400)&&(Xr.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),wt=Math.min(14400,wt),St=Math.min(14400,St)),i=[wt,St],e.substr(0,1)){case"l":St>wt&&(i=[St,wt]);break;case"p":wt>St&&(i=[St,wt])}Ci(i),fc(Ps),$(jA),Ns!==0&&$(Ns+" J"),KA!==0&&$(KA+" j"),rr.publish("addPage",{pageNumber:Se})},ri=function(S){S>0&&S<=Se&&(_t.splice(S,1),ke.splice(S,1),Se--,O>Se&&(O=Se),this.setPage(O))},Oi=function(S){S>0&&S<=Se&&(O=S)},ao=d.__private__.getNumberOfPages=d.getNumberOfPages=function(){return _t.length-1},oo=function(S,K,ht){var wt,St=void 0;return ht=ht||{},S=S!==void 0?S:re[ae].fontName,K=K!==void 0?K:re[ae].fontStyle,wt=S.toLowerCase(),he[wt]!==void 0&&he[wt][K]!==void 0?St=he[wt][K]:he[S]!==void 0&&he[S][K]!==void 0?St=he[S][K]:ht.disableWarning===!1&&Xr.warn("Unable to look up font label for font '"+S+"', '"+K+"'. Refer to getFontList() for available fonts."),St||ht.noFallback||(St=he.times[K])==null&&(St=he.times.normal),St},Zs=d.__private__.putInfo=function(){var S=Mr(),K=function(wt){return wt};for(var ht in c!==null&&(K=Rr.encryptor(S,0)),$("<<"),$("/Producer ("+yn(K("jsPDF "+_e.version))+")"),te)te.hasOwnProperty(ht)&&te[ht]&&$("/"+ht.substr(0,1).toUpperCase()+ht.substr(1)+" ("+yn(K(te[ht]))+")");$("/CreationDate ("+yn(K(Z))+")"),$(">>"),$("endobj")},wn=d.__private__.putCatalog=function(S){var K=(S=S||{}).rootDictionaryObjId||Xs;switch(Mr(),$("<<"),$("/Type /Catalog"),$("/Pages "+K+" 0 R"),Ct||(Ct="fullwidth"),Ct){case"fullwidth":$("/OpenAction [3 0 R /FitH null]");break;case"fullheight":$("/OpenAction [3 0 R /FitV null]");break;case"fullpage":$("/OpenAction [3 0 R /Fit]");break;case"original":$("/OpenAction [3 0 R /XYZ null null 1]");break;default:var ht=""+Ct;ht.substr(ht.length-1)==="%"&&(Ct=parseInt(Ct)/100),typeof Ct=="number"&&$("/OpenAction [3 0 R /XYZ null null "+E(Ct)+"]")}switch(Lt||(Lt="continuous"),Lt){case"continuous":$("/PageLayout /OneColumn");break;case"single":$("/PageLayout /SinglePage");break;case"two":case"twoleft":$("/PageLayout /TwoColumnLeft");break;case"tworight":$("/PageLayout /TwoColumnRight")}kt&&$("/PageMode /"+kt),rr.publish("putCatalog"),$(">>"),$("endobj")},ur=d.__private__.putTrailer=function(){$("trailer"),$("<<"),$("/Size "+(At+1)),$("/Root "+At+" 0 R"),$("/Info "+(At-1)+" 0 R"),c!==null&&$("/Encrypt "+Rr.oid+" 0 R"),$("/ID [ <"+ut+"> <"+ut+"> ]"),$(">>")},Fs=d.__private__.putHeader=function(){$("%PDF-"+m),$("%")},Ls=d.__private__.putXRef=function(){var S="0000000000";$("xref"),$("0 "+(At+1)),$("0000000000 65535 f ");for(var K=1;K<=At;K++)typeof et[K]=="function"?$((S+et[K]()).slice(-10)+" 00000 n "):et[K]!==void 0?$((S+et[K]).slice(-10)+" 00000 n "):$("0000000000 00000 n ")},Hi=d.__private__.buildDocument=function(){var S;At=0,dt=0,st=[],et=[],vt=[],Xs=$r(),Mi=$r(),D(st),rr.publish("buildDocument"),Fs(),_i(),(function(){rr.publish("putAdditionalObjects");for(var ht=0;ht<vt.length;ht++){var wt=vt[ht];Qn(wt.objId,!0),$(wt.content),$("endobj")}rr.publish("postPutAdditionalObjects")})(),S=[],(function(){for(var ht in re)re.hasOwnProperty(ht)&&(u===!1||u===!0&&h.hasOwnProperty(ht))&&Bi(re[ht])})(),(function(){var ht;for(ht in Le)Le.hasOwnProperty(ht)&&Js(Le[ht])})(),(function(){for(var ht in _n)_n.hasOwnProperty(ht)&&Cs(_n[ht])})(),(function(ht){var wt;for(wt in xe)xe.hasOwnProperty(wt)&&(xe[wt]instanceof Pc?Es(xe[wt]):xe[wt]instanceof id&&Ss(xe[wt],ht))})(S),rr.publish("putResources"),S.forEach(ks),ks({resourcesOid:Mi,objectOid:Number.MAX_SAFE_INTEGER}),rr.publish("postPutResources"),c!==null&&(Rr.oid=Mr(),$("<<"),$("/Filter /Standard"),$("/V "+Rr.v),$("/R "+Rr.r),$("/U <"+Rr.toHexString(Rr.U)+">"),$("/O <"+Rr.toHexString(Rr.O)+">"),$("/P "+Rr.P),$(">>"),$("endobj")),Zs(),wn();var K=dt;return Ls(),ur(),$("startxref"),$(""+K),$("%%EOF"),D(_t[O]),st.join(`
`)},lr=d.__private__.getBlob=function(S){return new Blob([rt(S)],{type:"application/pdf"})},On=d.output=d.__private__.output=(Di=function(S,K){switch(typeof(K=K||{})=="string"?K={filename:K}:K.filename=K.filename||"generated.pdf",S){case void 0:return Hi();case"save":d.save(K.filename);break;case"arraybuffer":return rt(Hi());case"blob":return lr(Hi());case"bloburi":case"bloburl":if(Ge.URL!==void 0&&typeof Ge.URL.createObjectURL=="function")return Ge.URL&&Ge.URL.createObjectURL(lr(Hi()))||void 0;Xr.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var ht="",wt=Hi();try{ht=GC(wt)}catch{ht=GC(unescape(encodeURIComponent(wt)))}return"data:application/pdf;filename="+K.filename+";base64,"+ht;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Ge)==="[object Window]"){var St="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",$t=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';K.pdfObjectUrl&&(St=K.pdfObjectUrl,$t="");var Yt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+St+'"'+$t+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(K)+");<\/script></body></html>",me=Ge.open();return me!==null&&me.document.write(Yt),me}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Ge)==="[object Window]"){var Be='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(K.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+K.filename+'" width="500px" height="400px" /></body></html>',Me=Ge.open();if(Me!==null){Me.document.write(Be);var Ie=this;Me.document.documentElement.querySelector("#pdfViewer").onload=function(){Me.document.title=K.filename,Me.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Ie.output("bloburl"))}}return Me}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Ge)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var wr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",K)+'"></iframe></body></html>',en=Ge.open();if(en!==null&&(en.document.write(wr),en.document.title=K.filename),en||typeof safari>"u")return en;break;case"datauri":case"dataurl":return Ge.document.location.href=this.output("datauristring",K);default:return null}},Di.foo=function(){try{return Di.apply(this,arguments)}catch(ht){var S=ht.stack||"";~S.indexOf(" at ")&&(S=S.split(" at ")[1]);var K="Error in function "+S.split(`
`)[0].split("<")[0]+": "+ht.message;if(!Ge.console)throw new Error(K);Ge.console.error(K,ht),Ge.alert&&alert(K)}},Di.foo.bar=Di,Di.foo),kn=function(S){return Array.isArray(ei)===!0&&ei.indexOf(S)>-1};switch(n){case"pt":ve=1;break;case"mm":ve=72/25.4;break;case"cm":ve=72/2.54;break;case"in":ve=72;break;case"px":ve=kn("px_scaling")==1?.75:96/72;break;case"pc":case"em":ve=12;break;case"ex":ve=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);ve=n}var Rr=null;q(),j();var Ao=d.__private__.getPageInfo=d.getPageInfo=function(S){if(isNaN(S)||S%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:ke[S].objId,pageNumber:S,pageContext:ke[S]}},lo=d.__private__.getPageInfoByObjId=function(S){if(isNaN(S)||S%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var K in ke)if(ke[K].objId===S)break;return Ao(K)},VA=d.__private__.getCurrentPageInfo=d.getCurrentPageInfo=function(){return{objId:ke[O].objId,pageNumber:O,pageContext:ke[O]}};d.addPage=function(){return Ts.apply(this,arguments),this},d.setPage=function(){return Oi.apply(this,arguments),D.call(this,_t[O]),this},d.insertPage=function(S){return this.addPage(),this.movePage(O,S),this},d.movePage=function(S,K){var ht,wt;if(S>K){ht=_t[S],wt=ke[S];for(var St=S;St>K;St--)_t[St]=_t[St-1],ke[St]=ke[St-1];_t[K]=ht,ke[K]=wt,this.setPage(K)}else if(S<K){ht=_t[S],wt=ke[S];for(var $t=S;$t<K;$t++)_t[$t]=_t[$t+1],ke[$t]=ke[$t+1];_t[K]=ht,ke[K]=wt,this.setPage(K)}return this},d.deletePage=function(){return ri.apply(this,arguments),this},d.__private__.text=d.text=function(S,K,ht,wt,St){var $t,Yt,me,Be,Me,Ie,wr,en,zr,p=(wt=wt||{}).scope||this;if(typeof S=="number"&&typeof K=="number"&&(typeof ht=="string"||Array.isArray(ht))){var M=ht;ht=K,K=S,S=M}if(arguments[3]instanceof Ne==0?(me=arguments[4],Be=arguments[5],Vr(wr=arguments[3])==="object"&&wr!==null||(typeof me=="string"&&(Be=me,me=null),typeof wr=="string"&&(Be=wr,wr=null),typeof wr=="number"&&(me=wr,wr=null),wt={flags:wr,angle:me,align:Be})):(v("The transform parameter of text() with a Matrix value"),zr=St),isNaN(K)||isNaN(ht)||S==null)throw new Error("Invalid arguments passed to jsPDF.text");if(S.length===0)return p;var H,ot="",Tt=typeof wt.lineHeightFactor=="number"?wt.lineHeightFactor:Ko,Nt=p.internal.scaleFactor;function ne(Pr){return Pr=Pr.split("	").join(Array(wt.TabLen||9).join(" ")),yn(Pr,wr)}function je(Pr){for(var Wr,Vn=Pr.concat(),di=[],eA=Vn.length;eA--;)typeof(Wr=Vn.shift())=="string"?di.push(Wr):Array.isArray(Pr)&&(Wr.length===1||Wr[1]===void 0&&Wr[2]===void 0)?di.push(Wr[0]):di.push([Wr[0],Wr[1],Wr[2]]);return di}function qr(Pr,Wr){var Vn;if(typeof Pr=="string")Vn=Wr(Pr)[0];else if(Array.isArray(Pr)){for(var di,eA,ch=Pr.concat(),Lu=[],Qg=ch.length;Qg--;)typeof(di=ch.shift())=="string"?Lu.push(Wr(di)[0]):Array.isArray(di)&&typeof di[0]=="string"&&(eA=Wr(di[0],di[1],di[2]),Lu.push([eA[0],eA[1],eA[2]]));Vn=Lu}return Vn}var dr=!1,rn=!0;if(typeof S=="string")dr=!0;else if(Array.isArray(S)){var Ei=S.concat();Yt=[];for(var bs,cn=Ei.length;cn--;)(typeof(bs=Ei.shift())!="string"||Array.isArray(bs)&&typeof bs[0]!="string")&&(rn=!1);dr=rn}if(dr===!1)throw new Error('Type of text must be string or Array. "'+S+'" is not recognized.');typeof S=="string"&&(S=S.match(/[\r?\n]/)?S.split(/\r\n|\r|\n/g):[S]);var Ji=at/p.internal.scaleFactor,xa=Ji*(Tt-1);switch(wt.baseline){case"bottom":ht-=xa;break;case"top":ht+=Ji-xa;break;case"hanging":ht+=Ji-2*xa;break;case"middle":ht+=Ji/2-xa}if((Ie=wt.maxWidth||0)>0&&(typeof S=="string"?S=p.splitTextToSize(S,Ie):Object.prototype.toString.call(S)==="[object Array]"&&(S=S.reduce(function(Pr,Wr){return Pr.concat(p.splitTextToSize(Wr,Ie))},[]))),$t={text:S,x:K,y:ht,options:wt,mutex:{pdfEscape:yn,activeFontKey:ae,fonts:re,activeFontSize:at}},rr.publish("preProcessText",$t),S=$t.text,me=(wt=$t.options).angle,zr instanceof Ne==0&&me&&typeof me=="number"){me*=Math.PI/180,wt.rotationDirection===0&&(me=-me),C===I&&(me=-me);var Jo=Math.cos(me),rh=Math.sin(me);zr=new Ne(Jo,rh,-rh,Jo,0,0)}else me&&me instanceof Ne&&(zr=me);C!==I||zr||(zr=li),(Me=wt.charSpace||Wo)!==void 0&&(ot+=x(F(Me))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(en=wt.horizontalScale)!==void 0&&(ot+=x(100*en)+` Tz
`),wt.lang;var In=-1,Zo=wt.renderingMode!==void 0?wt.renderingMode:wt.stroke,Tu=p.internal.getCurrentPageInfo().pageContext;switch(Zo){case 0:case!1:case"fill":In=0;break;case 1:case!0:case"stroke":In=1;break;case 2:case"fillThenStroke":In=2;break;case 3:case"invisible":In=3;break;case 4:case"fillAndAddForClipping":In=4;break;case 5:case"strokeAndAddPathForClipping":In=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":In=6;break;case 7:case"addToPathForClipping":In=7}var Mg=Tu.usedRenderingMode!==void 0?Tu.usedRenderingMode:-1;In!==-1?ot+=In+` Tr
`:Mg!==-1&&(ot+=`0 Tr
`),In!==-1&&(Tu.usedRenderingMode=In),Be=wt.align||"left";var _a,yc=at*Tt,nh=p.internal.pageSize.getWidth(),ih=re[ae];Me=wt.charSpace||Wo,Ie=wt.maxWidth||0,wr=Object.assign({autoencode:!0,noBOM:!0},wt.flags);var WA=[],wc=function(Pr){return p.getStringUnitWidth(Pr,{font:ih,charSpace:Me,fontSize:at,doKerning:!1})*at/Nt};if(Object.prototype.toString.call(S)==="[object Array]"){var ea;Yt=je(S),Be!=="left"&&(_a=Yt.map(wc));var ra,YA=0;if(Be==="right"){K-=_a[0],S=[],cn=Yt.length;for(var tA=0;tA<cn;tA++)tA===0?(ra=ps(K),ea=wa(ht)):(ra=F(YA-_a[tA]),ea=-yc),S.push([Yt[tA],ra,ea]),YA=_a[tA]}else if(Be==="center"){K-=_a[0]/2,S=[],cn=Yt.length;for(var XA=0;XA<cn;XA++)XA===0?(ra=ps(K),ea=wa(ht)):(ra=F((YA-_a[XA])/2),ea=-yc),S.push([Yt[XA],ra,ea]),YA=_a[XA]}else if(Be==="left"){S=[],cn=Yt.length;for(var sh=0;sh<cn;sh++)S.push(Yt[sh])}else if(Be==="justify"&&ih.encoding==="Identity-H"){S=[],cn=Yt.length,Ie=Ie!==0?Ie:nh;for(var Fu=0,Hn=0;Hn<cn;Hn++)if(ea=Hn===0?wa(ht):-yc,ra=Hn===0?ps(K):Fu,Hn<cn-1){var Rg=F((Ie-_a[Hn])/(Yt[Hn].split(" ").length-1)),go=Yt[Hn].split(" ");S.push([go[0]+" ",ra,ea]),Fu=0;for(var po=1;po<go.length;po++){var ah=(wc(go[po-1]+" "+go[po])-wc(go[po]))*Nt+Rg;po==go.length-1?S.push([go[po],ah,0]):S.push([go[po]+" ",ah,0]),Fu-=ah}}else S.push([Yt[Hn],ra,ea]);S.push(["",Fu,0])}else{if(Be!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(S=[],cn=Yt.length,Ie=Ie!==0?Ie:nh,Hn=0;Hn<cn;Hn++){ea=Hn===0?wa(ht):-yc,ra=Hn===0?ps(K):0;var oh=Yt[Hn].split(" ").length-1,Ah=oh>0?(Ie-_a[Hn])/oh:0;Hn<cn-1?WA.push(x(F(Ah))):WA.push(0),S.push([Yt[Hn],ra,ea])}}}(typeof wt.R2L=="boolean"?wt.R2L:yt)===!0&&(S=qr(S,function(Pr,Wr,Vn){return[Pr.split("").reverse().join(""),Wr,Vn]})),$t={text:S,x:K,y:ht,options:wt,mutex:{pdfEscape:yn,activeFontKey:ae,fonts:re,activeFontSize:at}},rr.publish("postProcessText",$t),S=$t.text,H=$t.mutex.isHex||!1;var lh=re[ae].encoding;lh!=="WinAnsiEncoding"&&lh!=="StandardEncoding"||(S=qr(S,function(Pr,Wr,Vn){return[ne(Pr),Wr,Vn]})),Yt=je(S),S=[];for(var JA,ZA,tl,vc=Array.isArray(Yt[0])?1:0,el="",xc=function(Pr,Wr,Vn){var di="";return Vn instanceof Ne?(Vn=typeof wt.angle=="number"?Ys(Vn,new Ne(1,0,0,1,Pr,Wr)):Ys(new Ne(1,0,0,1,Pr,Wr),Vn),C===I&&(Vn=Ys(new Ne(1,0,0,-1,0,0),Vn)),di=Vn.join(" ")+` Tm
`):di=x(Pr)+" "+x(Wr)+` Td
`,di},Ba=0;Ba<Yt.length;Ba++){switch(el="",vc){case 1:tl=(H?"<":"(")+Yt[Ba][0]+(H?">":")"),JA=parseFloat(Yt[Ba][1]),ZA=parseFloat(Yt[Ba][2]);break;case 0:tl=(H?"<":"(")+Yt[Ba]+(H?">":")"),JA=ps(K),ZA=wa(ht)}WA!==void 0&&WA[Ba]!==void 0&&(el=WA[Ba]+` Tw
`),Ba===0?S.push(el+xc(JA,ZA,zr)+tl):vc===0?S.push(el+tl):vc===1&&S.push(el+xc(JA,ZA,zr)+tl)}S=vc===0?S.join(` Tj
T* `):S.join(` Tj
`),S+=` Tj
`;var mo=`BT
/`;return mo+=ae+" "+at+` Tf
`,mo+=x(at*Tt)+` TL
`,mo+=co+`
`,mo+=ot,mo+=S,$(mo+="ET"),h[ae]=!0,p};var hc=d.__private__.clip=d.clip=function(S){return $(S==="evenodd"?"W*":"W"),this};d.clipEvenOdd=function(){return hc("evenodd")},d.__private__.discardPath=d.discardPath=function(){return $("n"),this};var Us=d.__private__.isValidStyle=function(S){var K=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(S)!==-1&&(K=!0),K};d.__private__.setDefaultPathOperation=d.setDefaultPathOperation=function(S){return Us(S)&&(l=S),this};var J=d.__private__.getStyle=d.getStyle=function(S){var K=l;switch(S){case"D":case"S":K="S";break;case"F":K="f";break;case"FD":case"DF":K="B";break;case"f":case"f*":case"B":case"B*":K=S}return K},lt=d.close=function(){return $("h"),this};d.stroke=function(){return $("S"),this},d.fill=function(S){return mt("f",S),this},d.fillEvenOdd=function(S){return mt("f*",S),this},d.fillStroke=function(S){return mt("B",S),this},d.fillStrokeEvenOdd=function(S){return mt("B*",S),this};var mt=function(S,K){Vr(K)==="object"?ce(K,S):$(S)},Dt=function(S){S===null||C===I&&S===void 0||(S=J(S),$(S))};function Jt(S,K,ht,wt,St){var $t=new id(K||this.boundingBox,ht||this.xStep,wt||this.yStep,this.gState,St||this.matrix);$t.stream=this.stream;var Yt=S+"$$"+this.cloneIndex+++"$$";return Ni(Yt,$t),$t}var ce=function(S,K){var ht=De[S.key],wt=xe[ht];if(wt instanceof Pc)$("q"),$(qe(K)),wt.gState&&d.setGState(wt.gState),$(S.matrix.toString()+" cm"),$("/"+ht+" sh"),$("Q");else if(wt instanceof id){var St=new Ne(1,0,0,-1,0,Ra());S.matrix&&(St=St.multiply(S.matrix||li),ht=Jt.call(wt,S.key,S.boundingBox,S.xStep,S.yStep,St).id),$("q"),$("/Pattern cs"),$("/"+ht+" scn"),wt.gState&&d.setGState(wt.gState),$(K),$("Q")}},qe=function(S){switch(S){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Kr=d.moveTo=function(S,K){return $(x(F(S))+" "+x(k(K))+" m"),this},Ir=d.lineTo=function(S,K){return $(x(F(S))+" "+x(k(K))+" l"),this},Zr=d.curveTo=function(S,K,ht,wt,St,$t){return $([x(F(S)),x(k(K)),x(F(ht)),x(k(wt)),x(F(St)),x(k($t)),"c"].join(" ")),this};d.__private__.line=d.line=function(S,K,ht,wt,St){if(isNaN(S)||isNaN(K)||isNaN(ht)||isNaN(wt)||!Us(St))throw new Error("Invalid arguments passed to jsPDF.line");return C===B?this.lines([[ht-S,wt-K]],S,K,[1,1],St||"S"):this.lines([[ht-S,wt-K]],S,K,[1,1]).stroke()},d.__private__.lines=d.lines=function(S,K,ht,wt,St,$t){var Yt,me,Be,Me,Ie,wr,en,zr,p,M,H,ot;if(typeof S=="number"&&(ot=ht,ht=K,K=S,S=ot),wt=wt||[1,1],$t=$t||!1,isNaN(K)||isNaN(ht)||!Array.isArray(S)||!Array.isArray(wt)||!Us(St)||typeof $t!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Kr(K,ht),Yt=wt[0],me=wt[1],Me=S.length,M=K,H=ht,Be=0;Be<Me;Be++)(Ie=S[Be]).length===2?(M=Ie[0]*Yt+M,H=Ie[1]*me+H,Ir(M,H)):(wr=Ie[0]*Yt+M,en=Ie[1]*me+H,zr=Ie[2]*Yt+M,p=Ie[3]*me+H,M=Ie[4]*Yt+M,H=Ie[5]*me+H,Zr(wr,en,zr,p,M,H));return $t&&lt(),Dt(St),this},d.path=function(S){for(var K=0;K<S.length;K++){var ht=S[K],wt=ht.c;switch(ht.op){case"m":Kr(wt[0],wt[1]);break;case"l":Ir(wt[0],wt[1]);break;case"c":Zr.apply(this,wt);break;case"h":lt()}}return this},d.__private__.rect=d.rect=function(S,K,ht,wt,St){if(isNaN(S)||isNaN(K)||isNaN(ht)||isNaN(wt)||!Us(St))throw new Error("Invalid arguments passed to jsPDF.rect");return C===B&&(wt=-wt),$([x(F(S)),x(k(K)),x(F(ht)),x(F(wt)),"re"].join(" ")),Dt(St),this},d.__private__.triangle=d.triangle=function(S,K,ht,wt,St,$t,Yt){if(isNaN(S)||isNaN(K)||isNaN(ht)||isNaN(wt)||isNaN(St)||isNaN($t)||!Us(Yt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[ht-S,wt-K],[St-ht,$t-wt],[S-St,K-$t]],S,K,[1,1],Yt,!0),this},d.__private__.roundedRect=d.roundedRect=function(S,K,ht,wt,St,$t,Yt){if(isNaN(S)||isNaN(K)||isNaN(ht)||isNaN(wt)||isNaN(St)||isNaN($t)||!Us(Yt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var me=4/3*(Math.SQRT2-1);return St=Math.min(St,.5*ht),$t=Math.min($t,.5*wt),this.lines([[ht-2*St,0],[St*me,0,St,$t-$t*me,St,$t],[0,wt-2*$t],[0,$t*me,-St*me,$t,-St,$t],[2*St-ht,0],[-St*me,0,-St,-$t*me,-St,-$t],[0,2*$t-wt],[0,-$t*me,St*me,-$t,St,-$t]],S+St,K,[1,1],Yt,!0),this},d.__private__.ellipse=d.ellipse=function(S,K,ht,wt,St){if(isNaN(S)||isNaN(K)||isNaN(ht)||isNaN(wt)||!Us(St))throw new Error("Invalid arguments passed to jsPDF.ellipse");var $t=4/3*(Math.SQRT2-1)*ht,Yt=4/3*(Math.SQRT2-1)*wt;return Kr(S+ht,K),Zr(S+ht,K-Yt,S+$t,K-wt,S,K-wt),Zr(S-$t,K-wt,S-ht,K-Yt,S-ht,K),Zr(S-ht,K+Yt,S-$t,K+wt,S,K+wt),Zr(S+$t,K+wt,S+ht,K+Yt,S+ht,K),Dt(St),this},d.__private__.circle=d.circle=function(S,K,ht,wt){if(isNaN(S)||isNaN(K)||isNaN(ht)||!Us(wt))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(S,K,ht,ht,wt)},d.setFont=function(S,K,ht){return ht&&(K=U(K,ht)),ae=oo(S,K,{disableWarning:!1}),this};var Xi=d.__private__.getFont=d.getFont=function(){return re[oo.apply(d,arguments)]};d.__private__.getFontList=d.getFontList=function(){var S,K,ht={};for(S in he)if(he.hasOwnProperty(S))for(K in ht[S]=[],he[S])he[S].hasOwnProperty(K)&&ht[S].push(K);return ht},d.addFont=function(S,K,ht,wt,St){var $t=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&$t.indexOf(arguments[3])!==-1?St=arguments[3]:arguments[3]&&$t.indexOf(arguments[3])==-1&&(ht=U(ht,wt)),Is.call(this,S,K,ht,St=St||"Identity-H")};var Ko,Ps=r.lineWidth||.200025,$e=d.__private__.getLineWidth=d.getLineWidth=function(){return Ps},fc=d.__private__.setLineWidth=d.setLineWidth=function(S){return Ps=S,$(x(F(S))+" w"),this};d.__private__.setLineDash=_e.API.setLineDash=_e.API.setLineDashPattern=function(S,K){if(S=S||[],K=K||0,isNaN(K)||!Array.isArray(S))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return S=S.map(function(ht){return x(F(ht))}).join(" "),K=x(F(K)),$("["+S+"] "+K+" d"),this};var $A=d.__private__.getLineHeight=d.getLineHeight=function(){return at*Ko};d.__private__.getLineHeight=d.getLineHeight=function(){return at*Ko};var ku=d.__private__.setLineHeightFactor=d.setLineHeightFactor=function(S){return typeof(S=S||1.15)=="number"&&(Ko=S),this},zo=d.__private__.getLineHeightFactor=d.getLineHeightFactor=function(){return Ko};ku(r.lineHeight);var ps=d.__private__.getHorizontalCoordinate=function(S){return F(S)},wa=d.__private__.getVerticalCoordinate=function(S){return C===I?S:ke[O].mediaBox.topRightY-ke[O].mediaBox.bottomLeftY-F(S)},gc=d.__private__.getHorizontalCoordinateString=d.getHorizontalCoordinateString=function(S){return x(ps(S))},tn=d.__private__.getVerticalCoordinateString=d.getVerticalCoordinateString=function(S){return x(wa(S))},jA=r.strokeColor||"0 G";d.__private__.getStrokeColor=d.getDrawColor=function(){return Ri(jA)},d.__private__.setStrokeColor=d.setDrawColor=function(S,K,ht,wt){return jA=wi({ch1:S,ch2:K,ch3:ht,ch4:wt,pdfColorType:"draw",precision:2}),$(jA),this};var pc=r.fillColor||"0 g";d.__private__.getFillColor=d.getFillColor=function(){return Ri(pc)},d.__private__.setFillColor=d.setFillColor=function(S,K,ht,wt){return pc=wi({ch1:S,ch2:K,ch3:ht,ch4:wt,pdfColorType:"fill",precision:2}),$(pc),this};var co=r.textColor||"0 g",qo=d.__private__.getTextColor=d.getTextColor=function(){return Ri(co)};d.__private__.setTextColor=d.setTextColor=function(S,K,ht,wt){return co=wi({ch1:S,ch2:K,ch3:ht,ch4:wt,pdfColorType:"text",precision:3}),this};var Wo=r.charSpace,GA=d.__private__.getCharSpace=d.getCharSpace=function(){return parseFloat(Wo||0)};d.__private__.setCharSpace=d.setCharSpace=function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Wo=S,this};var Ns=0;d.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},d.__private__.setLineCap=d.setLineCap=function(S){var K=d.CapJoinStyles[S];if(K===void 0)throw new Error("Line cap style of '"+S+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ns=K,$(K+" J"),this};var KA=0;d.__private__.setLineJoin=d.setLineJoin=function(S){var K=d.CapJoinStyles[S];if(K===void 0)throw new Error("Line join style of '"+S+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return KA=K,$(K+" j"),this},d.__private__.setLineMiterLimit=d.__private__.setMiterLimit=d.setLineMiterLimit=d.setMiterLimit=function(S){if(S=S||0,isNaN(S))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return $(x(F(S))+" M"),this},d.GState=b0,d.setGState=function(S){(S=typeof S=="string"?Le[or[S]]:Yo(null,S)).equals(kr)||($("/"+S.id+" gs"),kr=S)};var Yo=function(S,K){if(!S||!or[S]){var ht=!1;for(var wt in Le)if(Le.hasOwnProperty(wt)&&Le[wt].equals(K)){ht=!0;break}if(ht)K=Le[wt];else{var St="GS"+(Object.keys(Le).length+1).toString(10);Le[St]=K,K.id=St}return S&&(or[S]=K.id),rr.publish("addGState",K),K}};d.addGState=function(S,K){return Yo(S,K),this},d.saveGraphicsState=function(){return $("q"),Fe.push({key:ae,size:at,color:co}),this},d.restoreGraphicsState=function(){$("Q");var S=Fe.pop();return ae=S.key,at=S.size,co=S.color,kr=null,this},d.setCurrentTransformationMatrix=function(S){return $(S.toString()+" cm"),this},d.comment=function(S){return $("#"+S),this};var ta=function(S,K){var ht=S||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return ht},set:function($t){isNaN($t)||(ht=parseFloat($t))}});var wt=K||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return wt},set:function($t){isNaN($t)||(wt=parseFloat($t))}});var St="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return St},set:function($t){St=$t.toString()}}),this},zA=function(S,K,ht,wt){ta.call(this,S,K),this.type="rect";var St=ht||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return St},set:function(Yt){isNaN(Yt)||(St=parseFloat(Yt))}});var $t=wt||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return $t},set:function(Yt){isNaN(Yt)||($t=parseFloat(Yt))}}),this},uo=function(){this.page=Se,this.currentPage=O,this.pages=_t.slice(0),this.pagesContext=ke.slice(0),this.x=ie,this.y=Ae,this.matrix=ee,this.width=Xo(O),this.height=va(O),this.outputDestination=Ot,this.id="",this.objectNumber=-1};uo.prototype.restore=function(){Se=this.page,O=this.currentPage,ke=this.pagesContext,_t=this.pages,ie=this.x,Ae=this.y,ee=this.matrix,Iu(O,this.width),ms(O,this.height),Ot=this.outputDestination};var ho=function(S,K,ht,wt,St){Ai.push(new uo),Se=O=0,_t=[],ie=S,Ae=K,ee=St,Ci([ht,wt])};for(var fo in d.beginFormObject=function(S,K,ht,wt,St){return ho(S,K,ht,wt,St),this},d.endFormObject=function(S){return(function(K){if(Yi[K])Ai.pop().restore();else{var ht=new uo,wt="Xo"+(Object.keys(_n).length+1).toString(10);ht.id=wt,Yi[K]=wt,_n[wt]=ht,rr.publish("addFormObject",ht),Ai.pop().restore()}})(S),this},d.doFormObject=function(S,K){var ht=_n[Yi[S]];return $("q"),$(K.toString()+" cm"),$("/"+ht.id+" Do"),$("Q"),this},d.getFormObject=function(S){var K=_n[Yi[S]];return{x:K.x,y:K.y,width:K.width,height:K.height,matrix:K.matrix}},d.save=function(S,K){return S=S||"generated.pdf",(K=K||{}).returnPromise=K.returnPromise||!1,K.returnPromise===!1?(Fc(lr(Hi()),S),typeof Fc.unload=="function"&&Ge.setTimeout&&setTimeout(Fc.unload,911),this):new Promise(function(ht,wt){try{var St=Fc(lr(Hi()),S);typeof Fc.unload=="function"&&Ge.setTimeout&&setTimeout(Fc.unload,911),ht(St)}catch($t){wt($t.message)}})},_e.API)_e.API.hasOwnProperty(fo)&&(fo==="events"&&_e.API.events.length?(function(S,K){var ht,wt,St;for(St=K.length-1;St!==-1;St--)ht=K[St][0],wt=K[St][1],S.subscribe.apply(S,[ht].concat(typeof wt=="function"?[wt]:wt))})(rr,_e.API.events):d[fo]=_e.API[fo]);function Xo(S){return ke[S].mediaBox.topRightX-ke[S].mediaBox.bottomLeftX}function Iu(S,K){ke[S].mediaBox.topRightX=K+ke[S].mediaBox.bottomLeftX}function va(S){return ke[S].mediaBox.topRightY-ke[S].mediaBox.bottomLeftY}function ms(S,K){ke[S].mediaBox.topRightY=K+ke[S].mediaBox.bottomLeftY}var mc=d.getPageWidth=function(S){return Xo(S=S||O)/ve},bc=d.setPageWidth=function(S,K){Iu(S,K*ve)},Ra=d.getPageHeight=function(S){return va(S=S||O)/ve},qA=d.setPageHeight=function(S,K){ms(S,K*ve)};return d.internal={pdfEscape:yn,getStyle:J,getFont:Xi,getFontSize:xt,getCharSpace:GA,getTextColor:qo,getLineHeight:$A,getLineHeightFactor:zo,getLineWidth:$e,write:bt,getHorizontalCoordinate:ps,getVerticalCoordinate:wa,getCoordinateString:gc,getVerticalCoordinateString:tn,collections:{},newObject:Mr,newAdditionalObject:ci,newObjectDeferred:$r,newObjectDeferredBegin:Qn,getFilters:Qi,putStream:vi,events:rr,scaleFactor:ve,pageSize:{getWidth:function(){return mc(O)},setWidth:function(S){bc(O,S)},getHeight:function(){return Ra(O)},setHeight:function(S){qA(O,S)}},encryptionOptions:c,encryption:Rr,getEncryptor:function(S){return c!==null?Rr.encryptor(S,0):function(K){return K}},output:On,getNumberOfPages:ao,pages:_t,out:$,f2:E,f3:_,getPageInfo:Ao,getPageInfoByObjId:lo,getCurrentPageInfo:VA,getPDFVersion:f,Point:ta,Rectangle:zA,Matrix:Ne,hasHotfix:kn},Object.defineProperty(d.internal.pageSize,"width",{get:function(){return mc(O)},set:function(S){bc(O,S)},enumerable:!0,configurable:!0}),Object.defineProperty(d.internal.pageSize,"height",{get:function(){return Ra(O)},set:function(S){qA(O,S)},enumerable:!0,configurable:!0}),(function(S){for(var K=0,ht=W.length;K<ht;K++){var wt=Is.call(this,S[K][0],S[K][1],S[K][2],W[K][3],!0);u===!1&&(h[wt]=!0);var St=S[K][0].split("-");ui({id:wt,fontName:St[0],fontStyle:St[1]||""})}rr.publish("addFonts",{fonts:re,dictionary:he})}).call(d,W),ae="F1",Ts(i,e),rr.publish("initialized"),d}Wu.prototype.lsbFirstWord=function(r){return String.fromCharCode(255&r,r>>8&255,r>>16&255,r>>24&255)},Wu.prototype.toHexString=function(r){return r.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Wu.prototype.hexToBytes=function(r){for(var t=[],e=0;e<r.length;e+=2)t.push(String.fromCharCode(parseInt(r.substr(e,2),16)));return t.join("")},Wu.prototype.processOwnerPassword=function(r,t){return Q1(R1(t).substr(0,5),r)},Wu.prototype.encryptor=function(r,t){var e=R1(this.encryptionKey+String.fromCharCode(255&r,r>>8&255,r>>16&255,255&t,t>>8&255)).substr(0,10);return function(n){return Q1(e,n)}},b0.prototype.equals=function(r){var t,e="id,objectNumber,equals";if(!r||Vr(r)!==Vr(this))return!1;var n=0;for(t in this)if(!(e.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!r.hasOwnProperty(t)||this[t]!==r[t])return!1;n++}for(t in r)r.hasOwnProperty(t)&&e.indexOf(t)<0&&n--;return n===0},_e.API={events:[]},_e.version="3.0.3";var Ln=_e.API,h2=1,xu=function(r){return r.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},ju=function(r){return r.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},We=function(r){return r.toFixed(2)},cl=function(r){return r.toFixed(5)};Ln.__acroform__={};var Ws=function(r,t){r.prototype=Object.create(t.prototype),r.prototype.constructor=r},WC=function(r){return r*h2},vo=function(r){var t=new K4,e=we.internal.getHeight(r)||0,n=we.internal.getWidth(r)||0;return t.BBox=[0,0,Number(We(n)),Number(We(e))],t},Xz=Ln.__acroform__.setBit=function(r,t){if(r=r||0,t=t||0,isNaN(r)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return r|1<<t},Jz=Ln.__acroform__.clearBit=function(r,t){if(r=r||0,t=t||0,isNaN(r)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return r&~(1<<t)},Zz=Ln.__acroform__.getBit=function(r,t){if(isNaN(r)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return r&1<<t?1:0},qn=Ln.__acroform__.getBitForPdf=function(r,t){if(isNaN(r)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return Zz(r,t-1)},Wn=Ln.__acroform__.setBitForPdf=function(r,t){if(isNaN(r)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Xz(r,t-1)},Yn=Ln.__acroform__.clearBitForPdf=function(r,t){if(isNaN(r)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Jz(r,t-1)},tq=Ln.__acroform__.calculateCoordinates=function(r,t){var e=t.internal.getHorizontalCoordinate,n=t.internal.getVerticalCoordinate,i=r[0],s=r[1],a=r[2],o=r[3],A={};return A.lowerLeft_X=e(i)||0,A.lowerLeft_Y=n(s+o)||0,A.upperRight_X=e(i+a)||0,A.upperRight_Y=n(s)||0,[Number(We(A.lowerLeft_X)),Number(We(A.lowerLeft_Y)),Number(We(A.upperRight_X)),Number(We(A.upperRight_Y))]},eq=function(r){if(r.appearanceStreamContent)return r.appearanceStreamContent;if(r.V||r.DV){var t=[],e=r._V||r.DV,n=O1(r,e),i=r.scope.internal.getFont(r.fontName,r.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(r.scope.__private__.encodeColorString(r.color)),t.push("/"+i+" "+We(n.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(n.text),t.push("ET"),t.push("Q"),t.push("EMC");var s=vo(r);return s.scope=r.scope,s.stream=t.join(`
`),s}},O1=function(r,t){var e=r.fontSize===0?r.maxFontSize:r.fontSize,n={text:"",fontSize:""},i=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");i=r.multiline?i.map(function(E){return E.split(`
`)}):i.map(function(E){return[E]});var s=e,a=we.internal.getHeight(r)||0;a=a<0?-a:a;var o=we.internal.getWidth(r)||0;o=o<0?-o:o;var A=function(E,_,F){if(E+1<i.length){var k=_+" "+i[E+1][0];return Xp(k,r,F).width<=o-4}return!1};s++;t:for(;s>0;){t="",s--;var l,c,u=Xp("3",r,s).height,h=r.multiline?a-s:(a-u)/2,d=h+=2,m=0,f=0,b=0;if(s<=0){t=`(...) Tj
`,t+="% Width of Text: "+Xp(t,r,s=12).width+", FieldWidth:"+o+`
`;break}for(var y="",B=0,I=0;I<i.length;I++)if(i.hasOwnProperty(I)){var C=!1;if(i[I].length!==1&&b!==i[I].length-1){if((u+2)*(B+2)+2>a)continue t;y+=i[I][b],C=!0,f=I,I--}else{y=(y+=i[I][b]+" ").substr(y.length-1)==" "?y.substr(0,y.length-1):y;var N=parseInt(I),R=A(N,y,s),U=I>=i.length-1;if(R&&!U){y+=" ",b=0;continue}if(R||U){if(U)f=N;else if(r.multiline&&(u+2)*(B+2)+2>a)continue t}else{if(!r.multiline||(u+2)*(B+2)+2>a)continue t;f=N}}for(var x="",v=m;v<=f;v++){var T=i[v];if(r.multiline){if(v===f){x+=T[b]+" ",b=(b+1)%T.length;continue}if(v===m){x+=T[T.length-1]+" ";continue}}x+=T[0]+" "}switch(x=x.substr(x.length-1)==" "?x.substr(0,x.length-1):x,c=Xp(x,r,s).width,r.textAlign){case"right":l=o-c-2;break;case"center":l=(o-c)/2;break;default:l=2}t+=We(l)+" "+We(d)+` Td
`,t+="("+xu(x)+`) Tj
`,t+=-We(l)+` 0 Td
`,d=-(s+2),c=0,m=C?f:f+1,B++,y=""}break}return n.text=t,n.fontSize=s,n},Xp=function(r,t,e){var n=t.scope.internal.getFont(t.fontName,t.fontStyle),i=t.scope.getStringUnitWidth(r,{font:n,fontSize:parseFloat(e),charSpace:0})*parseFloat(e);return{height:t.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(e),charSpace:0})*parseFloat(e)*1.5,width:i}},rq={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},nq=function(r,t){var e={type:"reference",object:r};t.internal.getPageInfo(r.page).pageContext.annotations.find(function(n){return n.type===e.type&&n.object===e.object})===void 0&&t.internal.getPageInfo(r.page).pageContext.annotations.push(e)},iq=function(r,t){if(t.scope=r,r.internal!==void 0&&(r.internal.acroformPlugin===void 0||r.internal.acroformPlugin.isInitialized===!1)){if(io.FieldNum=0,r.internal.acroformPlugin=JSON.parse(JSON.stringify(rq)),r.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");h2=r.internal.scaleFactor,r.internal.acroformPlugin.acroFormDictionaryRoot=new z4,r.internal.acroformPlugin.acroFormDictionaryRoot.scope=r,r.internal.acroformPlugin.acroFormDictionaryRoot._eventID=r.internal.events.subscribe("postPutResources",function(){(function(e){e.internal.events.unsubscribe(e.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete e.internal.acroformPlugin.acroFormDictionaryRoot._eventID,e.internal.acroformPlugin.printedOut=!0})(r)}),r.internal.events.subscribe("buildDocument",function(){(function(e){e.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=e.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in n)if(n.hasOwnProperty(i)){var s=n[i];s.objId=void 0,s.hasAnnotation&&nq(s,e)}})(r)}),r.internal.events.subscribe("putCatalog",function(){(function(e){if(e.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");e.internal.write("/AcroForm "+e.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(r)}),r.internal.events.subscribe("postPutPages",function(e){(function(n,i){var s=!n;for(var a in n||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(a)){var o=n[a],A=[],l=o.Rect;if(o.Rect&&(o.Rect=tq(o.Rect,i)),i.internal.newObjectDeferredBegin(o.objId,!0),o.DA=we.createDefaultAppearanceStream(o),Vr(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(A=o.getKeyValueListForStream()),o.Rect=l,o.hasAppearanceStream&&!o.appearanceStreamContent){var c=eq(o);A.push({key:"AP",value:"<</N "+c+">>"}),i.internal.acroformPlugin.xForms.push(c)}if(o.appearanceStreamContent){var u="";for(var h in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(h)){var d=o.appearanceStreamContent[h];if(u+="/"+h+" ",u+="<<",Object.keys(d).length>=1||Array.isArray(d)){for(var a in d)if(d.hasOwnProperty(a)){var m=d[a];typeof m=="function"&&(m=m.call(i,o)),u+="/"+a+" "+m+" ",i.internal.acroformPlugin.xForms.indexOf(m)>=0||i.internal.acroformPlugin.xForms.push(m)}}else typeof(m=d)=="function"&&(m=m.call(i,o)),u+="/"+a+" "+m,i.internal.acroformPlugin.xForms.indexOf(m)>=0||i.internal.acroformPlugin.xForms.push(m);u+=">>"}A.push({key:"AP",value:`<<
`+u+">>"})}i.internal.putStream({additionalKeyValues:A,objectId:o.objId}),i.internal.out("endobj")}s&&(function(f,b){for(var y in f)if(f.hasOwnProperty(y)){var B=y,I=f[y];b.internal.newObjectDeferredBegin(I.objId,!0),Vr(I)==="object"&&typeof I.putStream=="function"&&I.putStream(),delete f[B]}})(i.internal.acroformPlugin.xForms,i)})(e,r)}),r.internal.acroformPlugin.isInitialized=!0}},G4=Ln.__acroform__.arrayToPdfArray=function(r,t,e){var n=function(a){return a};if(Array.isArray(r)){for(var i="[",s=0;s<r.length;s++)switch(s!==0&&(i+=" "),Vr(r[s])){case"boolean":case"number":case"object":i+=r[s].toString();break;case"string":r[s].substr(0,1)!=="/"?(t!==void 0&&e&&(n=e.internal.getEncryptor(t)),i+="("+xu(n(r[s].toString()))+")"):i+=r[s].toString()}return i+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},lw=function(r,t,e){var n=function(i){return i};return t!==void 0&&e&&(n=e.internal.getEncryptor(t)),(r=r||"").toString(),"("+xu(n(r))+")"},Io=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(r){this._objId=r}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Io.prototype.toString=function(){return this.objId+" 0 R"},Io.prototype.putStream=function(){var r=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:r,objectId:this.objId}),this.scope.internal.out("endobj")},Io.prototype.getKeyValueListForStream=function(){var r=[],t=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var e in t)if(Object.getOwnPropertyDescriptor(this,t[e]).configurable===!1){var n=t[e],i=this[n];i&&(Array.isArray(i)?r.push({key:n,value:G4(i,this.objId,this.scope)}):i instanceof Io?(i.scope=this.scope,r.push({key:n,value:i.objId+" 0 R"})):typeof i!="function"&&r.push({key:n,value:i}))}return r};var K4=function(){Io.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var r,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(e){r=e.trim()},get:function(){return r||null}})};Ws(K4,Io);var z4=function(){Io.call(this);var r,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(r){var e=function(n){return n};return this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),"("+xu(e(r))+")"}},set:function(e){r=e}})};Ws(z4,Io);var io=function r(){Io.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute F supplied.');t=y}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!qn(t,3)},set:function(y){y?this.F=Wn(t,3):this.F=Yn(t,3)}});var e=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return e},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute Ff supplied.');e=y}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(y){n=y!==void 0?y:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(y){n[0]=y}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(y){n[1]=y}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(y){n[2]=y}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(y){n[3]=y}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(y){switch(y){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=y;break;default:throw new Error('Invalid value "'+y+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof y0)return;s="FieldObject"+r.FieldNum++}var y=function(B){return B};return this.scope&&(y=this.scope.internal.getEncryptor(this.objId)),"("+xu(y(s))+")"},set:function(y){s=y.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(y){s=y}});var a="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return a},set:function(y){a=y}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(y){o=y}});var A=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return A},set:function(y){A=y}});var l=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return l===void 0?50/h2:l},set:function(y){l=y}});var c="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return c},set:function(y){c=y}});var u="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!u||this instanceof y0||this instanceof Xc))return lw(u,this.objId,this.scope)},set:function(y){y=y.toString(),u=y}});var h=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof Ti==0?lw(h,this.objId,this.scope):h},set:function(y){y=y.toString(),h=this instanceof Ti==0?y.substr(0,1)==="("?ju(y.substr(1,y.length-2)):ju(y):y}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ti==1?ju(h.substr(1,h.length-1)):h},set:function(y){y=y.toString(),h=this instanceof Ti==1?"/"+y:y}});var d=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(d)return d},set:function(y){this.V=y}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(d)return this instanceof Ti==0?lw(d,this.objId,this.scope):d},set:function(y){y=y.toString(),d=this instanceof Ti==0?y.substr(0,1)==="("?ju(y.substr(1,y.length-2)):ju(y):y}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ti==1?ju(d.substr(1,d.length-1)):d},set:function(y){y=y.toString(),d=this instanceof Ti==1?"/"+y:y}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var m,f=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return f},set:function(y){y=!!y,f=y}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(m)return m},set:function(y){m=y}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!qn(this.Ff,1)},set:function(y){y?this.Ff=Wn(this.Ff,1):this.Ff=Yn(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!qn(this.Ff,2)},set:function(y){y?this.Ff=Wn(this.Ff,2):this.Ff=Yn(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!qn(this.Ff,3)},set:function(y){y?this.Ff=Wn(this.Ff,3):this.Ff=Yn(this.Ff,3)}});var b=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(b!==null)return b},set:function(y){if([0,1,2].indexOf(y)===-1)throw new Error('Invalid value "'+y+'" for attribute Q supplied.');b=y}}),Object.defineProperty(this,"textAlign",{get:function(){var y;switch(b){case 0:default:y="left";break;case 1:y="center";break;case 2:y="right"}return y},configurable:!0,enumerable:!0,set:function(y){switch(y){case"right":case 2:b=2;break;case"center":case 1:b=1;break;default:b=0}}})};Ws(io,Io);var dd=function(){io.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var r=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return r},set:function(e){r=e}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return r},set:function(e){r=e}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return G4(t,this.objId,this.scope)},set:function(e){var n,i;i=[],typeof(n=e)=="string"&&(i=(function(s,a,o){o||(o=1);for(var A,l=[];A=a.exec(s);)l.push(A[o]);return l})(n,/\((.*?)\)/g)),t=i}}),this.getOptions=function(){return t},this.setOptions=function(e){t=e,this.sort&&t.sort()},this.addOption=function(e){e=(e=e||"").toString(),t.push(e),this.sort&&t.sort()},this.removeOption=function(e,n){for(n=n||!1,e=(e=e||"").toString();t.indexOf(e)!==-1&&(t.splice(t.indexOf(e),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!qn(this.Ff,18)},set:function(e){e?this.Ff=Wn(this.Ff,18):this.Ff=Yn(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!qn(this.Ff,19)},set:function(e){this.combo===!0&&(e?this.Ff=Wn(this.Ff,19):this.Ff=Yn(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!qn(this.Ff,20)},set:function(e){e?(this.Ff=Wn(this.Ff,20),t.sort()):this.Ff=Yn(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!qn(this.Ff,22)},set:function(e){e?this.Ff=Wn(this.Ff,22):this.Ff=Yn(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!qn(this.Ff,23)},set:function(e){e?this.Ff=Wn(this.Ff,23):this.Ff=Yn(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!qn(this.Ff,27)},set:function(e){e?this.Ff=Wn(this.Ff,27):this.Ff=Yn(this.Ff,27)}}),this.hasAppearanceStream=!1};Ws(dd,io);var hd=function(){dd.call(this),this.fontName="helvetica",this.combo=!1};Ws(hd,dd);var fd=function(){hd.call(this),this.combo=!0};Ws(fd,hd);var Tm=function(){fd.call(this),this.edit=!0};Ws(Tm,fd);var Ti=function(){io.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!qn(this.Ff,15)},set:function(e){e?this.Ff=Wn(this.Ff,15):this.Ff=Yn(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!qn(this.Ff,16)},set:function(e){e?this.Ff=Wn(this.Ff,16):this.Ff=Yn(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!qn(this.Ff,17)},set:function(e){e?this.Ff=Wn(this.Ff,17):this.Ff=Yn(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!qn(this.Ff,26)},set:function(e){e?this.Ff=Wn(this.Ff,26):this.Ff=Yn(this.Ff,26)}});var r,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var e=function(s){return s};if(this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var n,i=[];for(n in i.push("<<"),t)i.push("/"+n+" ("+xu(e(t[n]))+")");return i.push(">>"),i.join(`
`)}},set:function(e){Vr(e)==="object"&&(t=e)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(e){typeof e=="string"&&(t.CA=e)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(e){r=e}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(e){r="/"+e}})};Ws(Ti,io);var Fm=function(){Ti.call(this),this.pushButton=!0};Ws(Fm,Ti);var gd=function(){Ti.call(this),this.radio=!0,this.pushButton=!1;var r=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return r},set:function(t){r=t!==void 0?t:[]}})};Ws(gd,Ti);var y0=function(){var r,t;io.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return r},set:function(i){r=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(i){t=i}});var e,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(o){return o};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var s,a=[];for(s in a.push("<<"),n)a.push("/"+s+" ("+xu(i(n[s]))+")");return a.push(">>"),a.join(`
`)},set:function(i){Vr(i)==="object"&&(n=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(i){typeof i=="string"&&(n.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(i){e=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(i){e="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=we.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Ws(y0,io),gd.prototype.setAppearance=function(r){if(!("createAppearanceStream"in r)||!("getCA"in r))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var e=this.Kids[t];e.appearanceStreamContent=r.createAppearanceStream(e.optionName),e.caption=r.getCA()}},gd.prototype.createOption=function(r){var t=new y0;return t.Parent=this,t.optionName=r,this.Kids.push(t),sq.call(this.scope,t),t};var Lm=function(){Ti.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=we.CheckBox.createAppearanceStream()};Ws(Lm,Ti);var Xc=function(){io.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!qn(this.Ff,13)},set:function(t){t?this.Ff=Wn(this.Ff,13):this.Ff=Yn(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!qn(this.Ff,21)},set:function(t){t?this.Ff=Wn(this.Ff,21):this.Ff=Yn(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!qn(this.Ff,23)},set:function(t){t?this.Ff=Wn(this.Ff,23):this.Ff=Yn(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!qn(this.Ff,24)},set:function(t){t?this.Ff=Wn(this.Ff,24):this.Ff=Yn(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!qn(this.Ff,25)},set:function(t){t?this.Ff=Wn(this.Ff,25):this.Ff=Yn(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!qn(this.Ff,26)},set:function(t){t?this.Ff=Wn(this.Ff,26):this.Ff=Yn(this.Ff,26)}});var r=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return r},set:function(t){r=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return r},set:function(t){Number.isInteger(t)&&(r=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Ws(Xc,io);var Um=function(){Xc.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!qn(this.Ff,14)},set:function(r){r?this.Ff=Wn(this.Ff,14):this.Ff=Yn(this.Ff,14)}}),this.password=!0};Ws(Um,Xc);var we={CheckBox:{createAppearanceStream:function(){return{N:{On:we.CheckBox.YesNormal},D:{On:we.CheckBox.YesPushDown,Off:we.CheckBox.OffPushDown}}},YesPushDown:function(r){var t=vo(r);t.scope=r.scope;var e=[],n=r.scope.internal.getFont(r.fontName,r.fontStyle).id,i=r.scope.__private__.encodeColorString(r.color),s=O1(r,r.caption);return e.push("0.749023 g"),e.push("0 0 "+We(we.internal.getWidth(r))+" "+We(we.internal.getHeight(r))+" re"),e.push("f"),e.push("BMC"),e.push("q"),e.push("0 0 1 rg"),e.push("/"+n+" "+We(s.fontSize)+" Tf "+i),e.push("BT"),e.push(s.text),e.push("ET"),e.push("Q"),e.push("EMC"),t.stream=e.join(`
`),t},YesNormal:function(r){var t=vo(r);t.scope=r.scope;var e=r.scope.internal.getFont(r.fontName,r.fontStyle).id,n=r.scope.__private__.encodeColorString(r.color),i=[],s=we.internal.getHeight(r),a=we.internal.getWidth(r),o=O1(r,r.caption);return i.push("1 g"),i.push("0 0 "+We(a)+" "+We(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+We(a-1)+" "+We(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+e+" "+We(o.fontSize)+" Tf "+n),i.push(o.text),i.push("ET"),i.push("Q"),t.stream=i.join(`
`),t},OffPushDown:function(r){var t=vo(r);t.scope=r.scope;var e=[];return e.push("0.749023 g"),e.push("0 0 "+We(we.internal.getWidth(r))+" "+We(we.internal.getHeight(r))+" re"),e.push("f"),t.stream=e.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(r){var t={D:{Off:we.RadioButton.Circle.OffPushDown},N:{}};return t.N[r]=we.RadioButton.Circle.YesNormal,t.D[r]=we.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(r){var t=vo(r);t.scope=r.scope;var e=[],n=we.internal.getWidth(r)<=we.internal.getHeight(r)?we.internal.getWidth(r)/4:we.internal.getHeight(r)/4;n=Number((.9*n).toFixed(5));var i=we.internal.Bezier_C,s=Number((n*i).toFixed(5));return e.push("q"),e.push("1 0 0 1 "+cl(we.internal.getWidth(r)/2)+" "+cl(we.internal.getHeight(r)/2)+" cm"),e.push(n+" 0 m"),e.push(n+" "+s+" "+s+" "+n+" 0 "+n+" c"),e.push("-"+s+" "+n+" -"+n+" "+s+" -"+n+" 0 c"),e.push("-"+n+" -"+s+" -"+s+" -"+n+" 0 -"+n+" c"),e.push(s+" -"+n+" "+n+" -"+s+" "+n+" 0 c"),e.push("f"),e.push("Q"),t.stream=e.join(`
`),t},YesPushDown:function(r){var t=vo(r);t.scope=r.scope;var e=[],n=we.internal.getWidth(r)<=we.internal.getHeight(r)?we.internal.getWidth(r)/4:we.internal.getHeight(r)/4;n=Number((.9*n).toFixed(5));var i=Number((2*n).toFixed(5)),s=Number((i*we.internal.Bezier_C).toFixed(5)),a=Number((n*we.internal.Bezier_C).toFixed(5));return e.push("0.749023 g"),e.push("q"),e.push("1 0 0 1 "+cl(we.internal.getWidth(r)/2)+" "+cl(we.internal.getHeight(r)/2)+" cm"),e.push(i+" 0 m"),e.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),e.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),e.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),e.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),e.push("f"),e.push("Q"),e.push("0 g"),e.push("q"),e.push("1 0 0 1 "+cl(we.internal.getWidth(r)/2)+" "+cl(we.internal.getHeight(r)/2)+" cm"),e.push(n+" 0 m"),e.push(n+" "+a+" "+a+" "+n+" 0 "+n+" c"),e.push("-"+a+" "+n+" -"+n+" "+a+" -"+n+" 0 c"),e.push("-"+n+" -"+a+" -"+a+" -"+n+" 0 -"+n+" c"),e.push(a+" -"+n+" "+n+" -"+a+" "+n+" 0 c"),e.push("f"),e.push("Q"),t.stream=e.join(`
`),t},OffPushDown:function(r){var t=vo(r);t.scope=r.scope;var e=[],n=we.internal.getWidth(r)<=we.internal.getHeight(r)?we.internal.getWidth(r)/4:we.internal.getHeight(r)/4;n=Number((.9*n).toFixed(5));var i=Number((2*n).toFixed(5)),s=Number((i*we.internal.Bezier_C).toFixed(5));return e.push("0.749023 g"),e.push("q"),e.push("1 0 0 1 "+cl(we.internal.getWidth(r)/2)+" "+cl(we.internal.getHeight(r)/2)+" cm"),e.push(i+" 0 m"),e.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),e.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),e.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),e.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),e.push("f"),e.push("Q"),t.stream=e.join(`
`),t}},Cross:{createAppearanceStream:function(r){var t={D:{Off:we.RadioButton.Cross.OffPushDown},N:{}};return t.N[r]=we.RadioButton.Cross.YesNormal,t.D[r]=we.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(r){var t=vo(r);t.scope=r.scope;var e=[],n=we.internal.calculateCross(r);return e.push("q"),e.push("1 1 "+We(we.internal.getWidth(r)-2)+" "+We(we.internal.getHeight(r)-2)+" re"),e.push("W"),e.push("n"),e.push(We(n.x1.x)+" "+We(n.x1.y)+" m"),e.push(We(n.x2.x)+" "+We(n.x2.y)+" l"),e.push(We(n.x4.x)+" "+We(n.x4.y)+" m"),e.push(We(n.x3.x)+" "+We(n.x3.y)+" l"),e.push("s"),e.push("Q"),t.stream=e.join(`
`),t},YesPushDown:function(r){var t=vo(r);t.scope=r.scope;var e=we.internal.calculateCross(r),n=[];return n.push("0.749023 g"),n.push("0 0 "+We(we.internal.getWidth(r))+" "+We(we.internal.getHeight(r))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+We(we.internal.getWidth(r)-2)+" "+We(we.internal.getHeight(r)-2)+" re"),n.push("W"),n.push("n"),n.push(We(e.x1.x)+" "+We(e.x1.y)+" m"),n.push(We(e.x2.x)+" "+We(e.x2.y)+" l"),n.push(We(e.x4.x)+" "+We(e.x4.y)+" m"),n.push(We(e.x3.x)+" "+We(e.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(r){var t=vo(r);t.scope=r.scope;var e=[];return e.push("0.749023 g"),e.push("0 0 "+We(we.internal.getWidth(r))+" "+We(we.internal.getHeight(r))+" re"),e.push("f"),t.stream=e.join(`
`),t}}},createDefaultAppearanceStream:function(r){var t=r.scope.internal.getFont(r.fontName,r.fontStyle).id,e=r.scope.__private__.encodeColorString(r.color);return"/"+t+" "+r.fontSize+" Tf "+e}};we.internal={Bezier_C:.551915024494,calculateCross:function(r){var t=we.internal.getWidth(r),e=we.internal.getHeight(r),n=Math.min(t,e);return{x1:{x:(t-n)/2,y:(e-n)/2+n},x2:{x:(t-n)/2+n,y:(e-n)/2},x3:{x:(t-n)/2,y:(e-n)/2},x4:{x:(t-n)/2+n,y:(e-n)/2+n}}}},we.internal.getWidth=function(r){var t=0;return Vr(r)==="object"&&(t=WC(r.Rect[2])),t},we.internal.getHeight=function(r){var t=0;return Vr(r)==="object"&&(t=WC(r.Rect[3])),t};var sq=Ln.addField=function(r){if(iq(this,r),!(r instanceof io))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=r).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),r.page=r.scope.internal.getCurrentPageInfo().pageNumber,this};Ln.AcroFormChoiceField=dd,Ln.AcroFormListBox=hd,Ln.AcroFormComboBox=fd,Ln.AcroFormEditBox=Tm,Ln.AcroFormButton=Ti,Ln.AcroFormPushButton=Fm,Ln.AcroFormRadioButton=gd,Ln.AcroFormCheckBox=Lm,Ln.AcroFormTextField=Xc,Ln.AcroFormPasswordField=Um,Ln.AcroFormAppearance=we,Ln.AcroForm={ChoiceField:dd,ListBox:hd,ComboBox:fd,EditBox:Tm,Button:Ti,PushButton:Fm,RadioButton:gd,CheckBox:Lm,TextField:Xc,PasswordField:Um,Appearance:we},_e.AcroForm={ChoiceField:dd,ListBox:hd,ComboBox:fd,EditBox:Tm,Button:Ti,PushButton:Fm,RadioButton:gd,CheckBox:Lm,TextField:Xc,PasswordField:Um,Appearance:we};_e.AcroForm;function q4(r){return r.reduce(function(t,e,n){return t[e]=n,t},{})}(function(r){var t="addImage_";r.__addimage__={};var e="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=r.__addimage__.getImageFileTypeByImageData=function(E,_){var F,k,Z,ut,nt,j=e;if((_=_||e)==="RGBA"||E.data!==void 0&&E.data instanceof Uint8ClampedArray&&"height"in E&&"width"in E)return"RGBA";if(R(E))for(nt in n)for(Z=n[nt],F=0;F<Z.length;F+=1){for(ut=!0,k=0;k<Z[F].length;k+=1)if(Z[F][k]!==void 0&&Z[F][k]!==E[k]){ut=!1;break}if(ut===!0){j=nt;break}}else for(nt in n)for(Z=n[nt],F=0;F<Z.length;F+=1){for(ut=!0,k=0;k<Z[F].length;k+=1)if(Z[F][k]!==void 0&&Z[F][k]!==E.charCodeAt(k)){ut=!1;break}if(ut===!0){j=nt;break}}return j===e&&_!==e&&(j=_),j},s=function E(_){for(var F=this.internal.write,k=this.internal.putStream,Z=(0,this.internal.getFilters)();Z.indexOf("FlateEncode")!==-1;)Z.splice(Z.indexOf("FlateEncode"),1);_.objectId=this.internal.newObject();var ut=[];if(ut.push({key:"Type",value:"/XObject"}),ut.push({key:"Subtype",value:"/Image"}),ut.push({key:"Width",value:_.width}),ut.push({key:"Height",value:_.height}),_.colorSpace===y.INDEXED?ut.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(_.palette.length/3-1)+" "+("sMask"in _&&_.sMask!==void 0?_.objectId+2:_.objectId+1)+" 0 R]"}):(ut.push({key:"ColorSpace",value:"/"+_.colorSpace}),_.colorSpace===y.DEVICE_CMYK&&ut.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),ut.push({key:"BitsPerComponent",value:_.bitsPerComponent}),"decodeParameters"in _&&_.decodeParameters!==void 0&&ut.push({key:"DecodeParms",value:"<<"+_.decodeParameters+">>"}),"transparency"in _&&Array.isArray(_.transparency)&&_.transparency.length>0){for(var nt="",j=0,G=_.transparency.length;j<G;j++)nt+=_.transparency[j]+" "+_.transparency[j]+" ";ut.push({key:"Mask",value:"["+nt+"]"})}_.sMask!==void 0&&ut.push({key:"SMask",value:_.objectId+1+" 0 R"});var pt=_.filter!==void 0?["/"+_.filter]:void 0;if(k({data:_.data,additionalKeyValues:ut,alreadyAppliedFilters:pt,objectId:_.objectId}),F("endobj"),"sMask"in _&&_.sMask!==void 0){var q,L=(q=_.sMaskBitsPerComponent)!==null&&q!==void 0?q:_.bitsPerComponent,O={width:_.width,height:_.height,colorSpace:"DeviceGray",bitsPerComponent:L,data:_.sMask};"filter"in _&&(O.decodeParameters="/Predictor ".concat(_.predictor," /Colors 1 /BitsPerComponent ").concat(L," /Columns ").concat(_.width),O.filter=_.filter),E.call(this,O)}if(_.colorSpace===y.INDEXED){var V=this.internal.newObject();k({data:x(new Uint8Array(_.palette)),objectId:V}),F("endobj")}},a=function(){var E=this.internal.collections[t+"images"];for(var _ in E)s.call(this,E[_])},o=function(){var E,_=this.internal.collections[t+"images"],F=this.internal.write;for(var k in _)F("/I"+(E=_[k]).index,E.objectId,"0","R")},A=function(){this.internal.collections[t+"images"]||(this.internal.collections[t+"images"]={},this.internal.events.subscribe("putResources",a),this.internal.events.subscribe("putXobjectDict",o))},l=function(){var E=this.internal.collections[t+"images"];return A.call(this),E},c=function(){return Object.keys(this.internal.collections[t+"images"]).length},u=function(E){return typeof r["process"+E.toUpperCase()]=="function"},h=function(E){return Vr(E)==="object"&&E.nodeType===1},d=function(E,_){if(E.nodeName==="IMG"&&E.hasAttribute("src")){var F=""+E.getAttribute("src");if(F.indexOf("data:image/")===0)return Im(unescape(F).split("base64,").pop());var k=r.loadFile(F,!0);if(k!==void 0)return k}if(E.nodeName==="CANVAS"){if(E.width===0||E.height===0)throw new Error("Given canvas must have data. Canvas width: "+E.width+", height: "+E.height);var Z;switch(_){case"PNG":Z="image/png";break;case"WEBP":Z="image/webp";break;default:Z="image/jpeg"}return Im(E.toDataURL(Z,1).split("base64,").pop())}},m=function(E){var _=this.internal.collections[t+"images"];if(_){for(var F in _)if(E===_[F].alias)return _[F]}},f=function(E,_,F){return E||_||(E=-96,_=-96),E<0&&(E=-1*F.width*72/E/this.internal.scaleFactor),_<0&&(_=-1*F.height*72/_/this.internal.scaleFactor),E===0&&(E=_*F.width/F.height),_===0&&(_=E*F.height/F.width),[E,_]},b=function(E,_,F,k,Z,ut){var nt=f.call(this,F,k,Z),j=this.internal.getCoordinateString,G=this.internal.getVerticalCoordinateString,pt=l.call(this);if(F=nt[0],k=nt[1],pt[Z.index]=Z,ut){ut*=Math.PI/180;var q=Math.cos(ut),L=Math.sin(ut),O=function(X){return X.toFixed(4)},V=[O(q),O(L),O(-1*L),O(q),0,0,"cm"]}this.internal.write("q"),ut?(this.internal.write([1,"0","0",1,j(E),G(_+k),"cm"].join(" ")),this.internal.write(V.join(" ")),this.internal.write([j(F),"0","0",j(k),"0","0","cm"].join(" "))):this.internal.write([j(F),"0","0",j(k),j(E),G(_+k),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+Z.index+" Do"),this.internal.write("Q")},y=r.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};r.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var B=r.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},I=r.__addimage__.sHashCode=function(E){var _,F,k=0;if(typeof E=="string")for(F=E.length,_=0;_<F;_++)k=(k<<5)-k+E.charCodeAt(_),k|=0;else if(R(E))for(F=E.byteLength/2,_=0;_<F;_++)k=(k<<5)-k+E[_],k|=0;return k},C=r.__addimage__.validateStringAsBase64=function(E){(E=E||"").toString().trim();var _=!0;return E.length===0&&(_=!1),E.length%4!=0&&(_=!1),/^[A-Za-z0-9+/]+$/.test(E.substr(0,E.length-2))===!1&&(_=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(E.substr(-2))===!1&&(_=!1),_},N=r.__addimage__.extractImageFromDataUrl=function(E){if(E==null||!(E=E.trim()).startsWith("data:"))return null;var _=E.indexOf(",");return _<0?null:E.substring(0,_).trim().endsWith("base64")?E.substring(_+1):null};r.__addimage__.isArrayBuffer=function(E){return E instanceof ArrayBuffer};var R=r.__addimage__.isArrayBufferView=function(E){return E instanceof Int8Array||E instanceof Uint8Array||E instanceof Uint8ClampedArray||E instanceof Int16Array||E instanceof Uint16Array||E instanceof Int32Array||E instanceof Uint32Array||E instanceof Float32Array||E instanceof Float64Array},U=r.__addimage__.binaryStringToUint8Array=function(E){for(var _=E.length,F=new Uint8Array(_),k=0;k<_;k++)F[k]=E.charCodeAt(k);return F},x=r.__addimage__.arrayBufferToBinaryString=function(E){for(var _="",F=R(E)?E:new Uint8Array(E),k=0;k<F.length;k+=8192)_+=String.fromCharCode.apply(null,F.subarray(k,k+8192));return _};r.addImage=function(){var E,_,F,k,Z,ut,nt,j,G;if(typeof arguments[1]=="number"?(_=e,F=arguments[1],k=arguments[2],Z=arguments[3],ut=arguments[4],nt=arguments[5],j=arguments[6],G=arguments[7]):(_=arguments[1],F=arguments[2],k=arguments[3],Z=arguments[4],ut=arguments[5],nt=arguments[6],j=arguments[7],G=arguments[8]),Vr(E=arguments[0])==="object"&&!h(E)&&"imageData"in E){var pt=E;E=pt.imageData,_=pt.format||_||e,F=pt.x||F||0,k=pt.y||k||0,Z=pt.w||pt.width||Z,ut=pt.h||pt.height||ut,nt=pt.alias||nt,j=pt.compression||j,G=pt.rotation||pt.angle||G}var q=this.internal.getFilters();if(j===void 0&&q.indexOf("FlateEncode")!==-1&&(j="SLOW"),isNaN(F)||isNaN(k))throw new Error("Invalid coordinates passed to jsPDF.addImage");A.call(this);var L=v.call(this,E,_,nt,j);return b.call(this,F,k,Z,ut,L,G),this};var v=function(E,_,F,k){var Z,ut,nt;if(typeof E=="string"&&i(E)===e){E=unescape(E);var j=T(E,!1);(j!==""||(j=r.loadFile(E,!0))!==void 0)&&(E=j)}if(h(E)&&(E=d(E,_)),_=i(E,_),!u(_))throw new Error("addImage does not support files of type '"+_+"', please ensure that a plugin for '"+_+"' support is added.");if(((nt=F)==null||nt.length===0)&&(F=(function(G){return typeof G=="string"||R(G)?I(G):R(G.data)?I(G.data):null})(E)),(Z=m.call(this,F))||(E instanceof Uint8Array||_==="RGBA"||(ut=E,E=U(E)),Z=this["process"+_.toUpperCase()](E,c.call(this),F,(function(G){return G&&typeof G=="string"&&(G=G.toUpperCase()),G in r.image_compression?G:B.NONE})(k),ut)),!Z)throw new Error("An unknown error occurred whilst processing the image.");return Z},T=r.__addimage__.convertBase64ToBinaryString=function(E,_){_=typeof _!="boolean"||_;var F,k="";if(typeof E=="string"){var Z;F=(Z=N(E))!==null&&Z!==void 0?Z:E;try{k=Im(F)}catch(ut){if(_)throw C(F)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+ut.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return k};r.getImageProperties=function(E){var _,F,k="";if(h(E)&&(E=d(E)),typeof E=="string"&&i(E)===e&&((k=T(E,!1))===""&&(k=r.loadFile(E)||""),E=k),F=i(E),!u(F))throw new Error("addImage does not support files of type '"+F+"', please ensure that a plugin for '"+F+"' support is added.");if(E instanceof Uint8Array||(E=U(E)),!(_=this["process"+F.toUpperCase()](E)))throw new Error("An unknown error occurred whilst processing the image");return _.fileType=F,_}})(_e.API),(function(r){var t=function(e){if(e!==void 0&&e!="")return!0};_e.API.events.push(["addPage",function(e){this.internal.getPageInfo(e.pageNumber).pageContext.annotations=[]}]),r.events.push(["putPage",function(e){for(var n,i,s,a=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,A=this.internal.getPageInfoByObjId(e.objId),l=e.pageContext.annotations,c=!1,u=0;u<l.length&&!c;u++)switch((n=l[u]).type){case"link":(t(n.options.url)||t(n.options.pageNumber))&&(c=!0);break;case"reference":case"text":case"freetext":c=!0}if(c!=0){this.internal.write("/Annots [");for(var h=0;h<l.length;h++){n=l[h];var d=this.internal.pdfEscape,m=this.internal.getEncryptor(e.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var f=this.internal.newAdditionalObject(),b=this.internal.newAdditionalObject(),y=this.internal.getEncryptor(f.objId),B=n.title||"Note";s="<</Type /Annot /Subtype /Text "+(i="/Rect ["+a(n.bounds.x)+" "+o(n.bounds.y+n.bounds.h)+" "+a(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y)+"] ")+"/Contents ("+d(y(n.contents))+")",s+=" /Popup "+b.objId+" 0 R",s+=" /P "+A.objId+" 0 R",s+=" /T ("+d(y(B))+") >>",f.content=s;var I=f.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+a(n.bounds.x+30)+" "+o(n.bounds.y+n.bounds.h)+" "+a(n.bounds.x+n.bounds.w+30)+" "+o(n.bounds.y)+"] ")+" /Parent "+I,n.open&&(s+=" /Open true"),s+=" >>",b.content=s,this.internal.write(f.objId,"0 R",b.objId,"0 R");break;case"freetext":i="/Rect ["+a(n.bounds.x)+" "+o(n.bounds.y)+" "+a(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y+n.bounds.h)+"] ";var C=n.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+d(m(n.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+C+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(n.options.name){var N=this.annotations._nameMap[n.options.name];n.options.pageNumber=N.page,n.options.top=N.y}else n.options.top||(n.options.top=0);if(i="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",s="",n.options.url)s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+d(m(n.options.url))+") >>";else if(n.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,s+=" /FitV "+n.options.left+"]";break;default:var R=o(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),s+=" /XYZ "+n.options.left+" "+R+" "+n.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),r.createAnnotation=function(e){var n=this.internal.getCurrentPageInfo();switch(e.type){case"link":this.link(e.bounds.x,e.bounds.y,e.bounds.w,e.bounds.h,e);break;case"text":case"freetext":n.pageContext.annotations.push(e)}},r.link=function(e,n,i,s,a){var o=this.internal.getCurrentPageInfo(),A=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:A(e),y:l(n),w:A(e+i),h:l(n+s)},options:a,type:"link"})},r.textWithLink=function(e,n,i,s){var a,o,A=this.getTextWidth(e),l=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){o=s.maxWidth;var c=this.splitTextToSize(e,o).length;a=Math.ceil(l*c)}else o=A,a=l;return this.text(e,n,i,s),i+=.2*l,s.align==="center"&&(n-=A/2),s.align==="right"&&(n-=A),this.link(n,i-l,o,a,s),A},r.getTextWidth=function(e){var n=this.internal.getFontSize();return this.getStringUnitWidth(e)*n/this.internal.scaleFactor}})(_e.API),(function(r){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},e={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];r.__arabicParser__={};var s=r.__arabicParser__.isInArabicSubstitutionA=function(f){return t[f.charCodeAt(0)]!==void 0},a=r.__arabicParser__.isArabicLetter=function(f){return typeof f=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(f)},o=r.__arabicParser__.isArabicEndLetter=function(f){return a(f)&&s(f)&&t[f.charCodeAt(0)].length<=2},A=r.__arabicParser__.isArabicAlfLetter=function(f){return a(f)&&i.indexOf(f.charCodeAt(0))>=0};r.__arabicParser__.arabicLetterHasIsolatedForm=function(f){return a(f)&&s(f)&&t[f.charCodeAt(0)].length>=1};var l=r.__arabicParser__.arabicLetterHasFinalForm=function(f){return a(f)&&s(f)&&t[f.charCodeAt(0)].length>=2};r.__arabicParser__.arabicLetterHasInitialForm=function(f){return a(f)&&s(f)&&t[f.charCodeAt(0)].length>=3};var c=r.__arabicParser__.arabicLetterHasMedialForm=function(f){return a(f)&&s(f)&&t[f.charCodeAt(0)].length==4},u=r.__arabicParser__.resolveLigatures=function(f){var b=0,y=e,B="",I=0;for(b=0;b<f.length;b+=1)y[f.charCodeAt(b)]!==void 0?(I++,typeof(y=y[f.charCodeAt(b)])=="number"&&(B+=String.fromCharCode(y),y=e,I=0),b===f.length-1&&(y=e,B+=f.charAt(b-(I-1)),b-=I-1,I=0)):(y=e,B+=f.charAt(b-I),b-=I,I=0);return B};r.__arabicParser__.isArabicDiacritic=function(f){return f!==void 0&&n[f.charCodeAt(0)]!==void 0};var h=r.__arabicParser__.getCorrectForm=function(f,b,y){return a(f)?s(f)===!1?-1:!l(f)||!a(b)&&!a(y)||!a(y)&&o(b)||o(f)&&!a(b)||o(f)&&A(b)||o(f)&&o(b)?0:c(f)&&a(b)&&!o(b)&&a(y)&&l(y)?3:o(f)||!a(y)?1:2:-1},d=function(f){var b=0,y=0,B=0,I="",C="",N="",R=(f=f||"").split("\\s+"),U=[];for(b=0;b<R.length;b+=1){for(U.push(""),y=0;y<R[b].length;y+=1)I=R[b][y],C=R[b][y-1],N=R[b][y+1],a(I)?(B=h(I,C,N),U[b]+=B!==-1?String.fromCharCode(t[I.charCodeAt(0)][B]):I):U[b]+=I;U[b]=u(U[b])}return U.join(" ")},m=r.__arabicParser__.processArabic=r.processArabic=function(){var f,b=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,y=[];if(Array.isArray(b)){var B=0;for(y=[],B=0;B<b.length;B+=1)Array.isArray(b[B])?y.push([d(b[B][0]),b[B][1],b[B][2]]):y.push([d(b[B])]);f=y}else f=d(b);return typeof arguments[0]=="string"?f:(arguments[0].text=f,arguments[0])};r.events.push(["preProcessText",m])})(_e.API),_e.API.autoPrint=function(r){var t;return(r=r||{}).variant=r.variant||"non-conform",r.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})),this},(function(r){var t=function(){var e=void 0;Object.defineProperty(this,"pdf",{get:function(){return e},set:function(o){e=o}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(o){n=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(o){i=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(o){s=o}});var a={};Object.defineProperty(this,"style",{get:function(){return a},set:function(o){a=o}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(e,n){var i;if((e=e||"2d")!=="2d")return null;for(i in n)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=n[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},r.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])})(_e.API),(function(r){var t={left:0,top:0,bottom:0,right:0},e=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var A=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return A},set:function(f){A=f}});var l=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return l},set:function(f){l=f}});var c=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return c},set:function(f){c=f}});var u=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return u},set:function(f){u=f}});var h=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return h},set:function(f){h=f}});var d=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return d},set:function(f){d=f}});var m=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return m},set:function(f){m=f}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},r.setHeaderFunction=function(A){return n.call(this),this.internal.__cell__.headerFunction=typeof A=="function"?A:void 0,this},r.getTextDimensions=function(A,l){n.call(this);var c=(l=l||{}).fontSize||this.getFontSize(),u=l.font||this.getFont(),h=l.scaleFactor||this.internal.scaleFactor,d=0,m=0,f=0,b=this;if(!Array.isArray(A)&&typeof A!="string"){if(typeof A!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");A=String(A)}var y=l.maxWidth;y>0?typeof A=="string"?A=this.splitTextToSize(A,y):Object.prototype.toString.call(A)==="[object Array]"&&(A=A.reduce(function(I,C){return I.concat(b.splitTextToSize(C,y))},[])):A=Array.isArray(A)?A:[A];for(var B=0;B<A.length;B++)d<(f=this.getStringUnitWidth(A[B],{font:u})*c)&&(d=f);return d!==0&&(m=A.length),{w:d/=h,h:Math.max((m*c*this.getLineHeightFactor()-c*(this.getLineHeightFactor()-1))/h,0)}},r.cellAddPage=function(){n.call(this),this.addPage();var A=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new s(A.left,A.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var a=r.cell=function(){var A;A=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var l=this.internal.__cell__.lastCell,c=this.internal.__cell__.padding,u=this.internal.__cell__.margins||t,h=this.internal.__cell__.tableHeaderRow,d=this.internal.__cell__.printHeaders;return l.lineNumber!==void 0&&(l.lineNumber===A.lineNumber?(A.x=(l.x||0)+(l.width||0),A.y=l.y||0):l.y+l.height+A.height+u.bottom>this.getPageHeight()?(this.cellAddPage(),A.y=u.top,d&&h&&(this.printHeaderRow(A.lineNumber,!0),A.y+=h[0].height)):A.y=l.y+l.height||A.y),A.text[0]!==void 0&&(this.rect(A.x,A.y,A.width,A.height,e===!0?"FD":void 0),A.align==="right"?this.text(A.text,A.x+A.width-c,A.y+c,{align:"right",baseline:"top"}):A.align==="center"?this.text(A.text,A.x+A.width/2,A.y+c,{align:"center",baseline:"top",maxWidth:A.width-c-c}):this.text(A.text,A.x+c,A.y+c,{align:"left",baseline:"top",maxWidth:A.width-c-c})),this.internal.__cell__.lastCell=A,this};r.table=function(A,l,c,u,h){if(n.call(this),!c)throw new Error("No data for PDF table.");var d,m,f,b,y=[],B=[],I=[],C={},N={},R=[],U=[],x=(h=h||{}).autoSize||!1,v=h.printHeaders!==!1,T=h.css&&h.css["font-size"]!==void 0?16*h.css["font-size"]:h.fontSize||12,E=h.margins||Object.assign({width:this.getPageWidth()},t),_=typeof h.padding=="number"?h.padding:3,F=h.headerBackgroundColor||"#c8c8c8",k=h.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=v,this.internal.__cell__.margins=E,this.internal.__cell__.table_font_size=T,this.internal.__cell__.padding=_,this.internal.__cell__.headerBackgroundColor=F,this.internal.__cell__.headerTextColor=k,this.setFontSize(T),u==null)B=y=Object.keys(c[0]),I=y.map(function(){return"left"});else if(Array.isArray(u)&&Vr(u[0])==="object")for(y=u.map(function(pt){return pt.name}),B=u.map(function(pt){return pt.prompt||pt.name||""}),I=u.map(function(pt){return pt.align||"left"}),d=0;d<u.length;d+=1)N[u[d].name]=.7499990551181103*u[d].width;else Array.isArray(u)&&typeof u[0]=="string"&&(B=y=u,I=y.map(function(){return"left"}));if(x||Array.isArray(u)&&typeof u[0]=="string")for(d=0;d<y.length;d+=1){for(C[b=y[d]]=c.map(function(pt){return pt[b]}),this.setFont(void 0,"bold"),R.push(this.getTextDimensions(B[d],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),m=C[b],this.setFont(void 0,"normal"),f=0;f<m.length;f+=1)R.push(this.getTextDimensions(m[f],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);N[b]=Math.max.apply(null,R)+_+_,R=[]}if(v){var Z={};for(d=0;d<y.length;d+=1)Z[y[d]]={},Z[y[d]].text=B[d],Z[y[d]].align=I[d];var ut=o.call(this,Z,N);U=y.map(function(pt){return new s(A,l,N[pt],ut,Z[pt].text,void 0,Z[pt].align)}),this.setTableHeaderRow(U),this.printHeaderRow(1,!1)}var nt=u.reduce(function(pt,q){return pt[q.name]=q.align,pt},{});for(d=0;d<c.length;d+=1){"rowStart"in h&&h.rowStart instanceof Function&&h.rowStart({row:d,data:c[d]},this);var j=o.call(this,c[d],N);for(f=0;f<y.length;f+=1){var G=c[d][y[f]];"cellStart"in h&&h.cellStart instanceof Function&&h.cellStart({row:d,col:f,data:G},this),a.call(this,new s(A,l,N[y[f]],j,G,d+2,nt[y[f]]))}}return this.internal.__cell__.table_x=A,this.internal.__cell__.table_y=l,this};var o=function(A,l){var c=this.internal.__cell__.padding,u=this.internal.__cell__.table_font_size,h=this.internal.scaleFactor;return Object.keys(A).map(function(d){var m=A[d];return this.splitTextToSize(m.hasOwnProperty("text")?m.text:m,l[d]-c-c)},this).map(function(d){return this.getLineHeightFactor()*d.length*u/h+c+c},this).reduce(function(d,m){return Math.max(d,m)},0)};r.setTableHeaderRow=function(A){n.call(this),this.internal.__cell__.tableHeaderRow=A},r.printHeaderRow=function(A,l){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var c;if(e=!0,typeof this.internal.__cell__.headerFunction=="function"){var u=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(u[0],u[1],u[2],u[3],void 0,-1)}this.setFont(void 0,"bold");for(var h=[],d=0;d<this.internal.__cell__.tableHeaderRow.length;d+=1){c=this.internal.__cell__.tableHeaderRow[d].clone(),l&&(c.y=this.internal.__cell__.margins.top||0,h.push(c)),c.lineNumber=A;var m=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),a.call(this,c),this.setTextColor(m)}h.length>0&&this.setTableHeaderRow(h),this.setFont(void 0,"normal"),e=!1}})(_e.API);var W4={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Y4=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],H1=q4(Y4),X4=[100,200,300,400,500,600,700,800,900],aq=q4(X4);function cw(r){var t=r.family.replace(/"|'/g,"").toLowerCase(),e=(function(s){return W4[s=s||"normal"]?s:"normal"})(r.style),n=(function(s){return s?typeof s=="number"?s>=100&&s<=900&&s%100==0?s:400:/^\d00$/.test(s)?parseInt(s):s==="bold"?700:400:400})(r.weight),i=(function(s){return typeof H1[s=s||"normal"]=="number"?s:"normal"})(r.stretch);return{family:t,style:e,weight:n,stretch:i,src:r.src||[],ref:r.ref||{name:t,style:[i,e,n].join(" ")}}}function YC(r,t,e,n){var i;for(i=e;i>=0&&i<t.length;i+=n)if(r[t[i]])return r[t[i]];for(i=e;i>=0&&i<t.length;i-=n)if(r[t[i]])return r[t[i]]}var oq={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},XC={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function JC(r){return[r.stretch,r.style,r.weight,r.family].join(" ")}function ZC(r){return r.trimLeft()}function Aq(r,t){for(var e=0;e<r.length;){if(r.charAt(e)===t)return[r.substring(0,e),r.substring(e+1)];e+=1}return null}function lq(r){var t=r.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],r.substring(t[0].length)]}var Jp,tE,eE,Gu,Zp,rE,nE,iE,uw=["times"];function sE(r,t,e,n,i){var s=4,a=oE;switch(i){case _e.API.image_compression.FAST:s=1,a=aE;break;case _e.API.image_compression.MEDIUM:s=6,a=AE;break;case _e.API.image_compression.SLOW:s=9,a=lE}r=(function(A,l,c,u){for(var h,d=A.length/l,m=new Uint8Array(A.length+d),f=[cq,aE,oE,AE,lE],b=0;b<d;b+=1){var y=b*l,B=A.subarray(y,y+l);if(u)m.set(u(B,c,h),y+b);else{for(var I=f.length,C=[],N=0;N<I;N+=1)C[N]=f[N](B,c,h);var R=dq(C.concat());m.set(C[R],y+b)}h=B}return m})(r,t,Math.ceil(e*n/8),a);var o=P1(r,{level:s});return _e.API.__addimage__.arrayBufferToBinaryString(o)}function cq(r){var t=Array.apply([],r);return t.unshift(0),t}function aE(r,t){var e=r.length,n=[];n[0]=1;for(var i=0;i<e;i+=1){var s=r[i-t]||0;n[i+1]=r[i]-s+256&255}return n}function oE(r,t,e){var n=r.length,i=[];i[0]=2;for(var s=0;s<n;s+=1){var a=e&&e[s]||0;i[s+1]=r[s]-a+256&255}return i}function AE(r,t,e){var n=r.length,i=[];i[0]=3;for(var s=0;s<n;s+=1){var a=r[s-t]||0,o=e&&e[s]||0;i[s+1]=r[s]+256-(a+o>>>1)&255}return i}function lE(r,t,e){var n=r.length,i=[];i[0]=4;for(var s=0;s<n;s+=1){var a=uq(r[s-t]||0,e&&e[s]||0,e&&e[s-t]||0);i[s+1]=r[s]-a+256&255}return i}function uq(r,t,e){if(r===t&&t===e)return r;var n=Math.abs(t-e),i=Math.abs(r-e),s=Math.abs(r+t-e-e);return n<=i&&n<=s?r:i<=s?t:e}function dq(r){var t=r.map(function(e){return e.reduce(function(n,i){return n+Math.abs(i)},0)});return t.indexOf(Math.min.apply(null,t))}function dw(r,t,e){var n=t*e,i=Math.floor(n/8),s=16-(n-8*i+e),a=(1<<e)-1;return J4(r,i)>>s&a}function cE(r,t,e,n){var i=e*n,s=Math.floor(i/8),a=16-(i-8*s+n),o=(1<<n)-1,A=(t&o)<<a;(function(l,c,u){if(c+1<l.byteLength)l.setUint16(c,u,!1);else{var h=u>>8&255;l.setUint8(c,h)}})(r,s,J4(r,s)&~(o<<a)&65535|A)}function J4(r,t){return t+1<r.byteLength?r.getUint16(t,!1):r.getUint8(t)<<8}function hq(r){var t=0;if(r[t++]!==71||r[t++]!==73||r[t++]!==70||r[t++]!==56||(r[t++]+1&253)!=56||r[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var e=r[t++]|r[t++]<<8,n=r[t++]|r[t++]<<8,i=r[t++],s=i>>7,a=1<<1+(7&i);r[t++],r[t++];var o=null,A=null;s&&(o=t,A=a,t+=3*a);var l=!0,c=[],u=0,h=null,d=0,m=null;for(this.width=e,this.height=n;l&&t<r.length;)switch(r[t++]){case 33:switch(r[t++]){case 255:if(r[t]!==11||r[t+1]==78&&r[t+2]==69&&r[t+3]==84&&r[t+4]==83&&r[t+5]==67&&r[t+6]==65&&r[t+7]==80&&r[t+8]==69&&r[t+9]==50&&r[t+10]==46&&r[t+11]==48&&r[t+12]==3&&r[t+13]==1&&r[t+16]==0)t+=14,m=r[t++]|r[t++]<<8,t++;else for(t+=12;;){if(!((E=r[t++])>=0))throw Error("Invalid block size");if(E===0)break;t+=E}break;case 249:if(r[t++]!==4||r[t+4]!==0)throw new Error("Invalid graphics extension block.");var f=r[t++];u=r[t++]|r[t++]<<8,h=r[t++],1&f||(h=null),d=f>>2&7,t++;break;case 254:for(;;){if(!((E=r[t++])>=0))throw Error("Invalid block size");if(E===0)break;t+=E}break;default:throw new Error("Unknown graphic control label: 0x"+r[t-1].toString(16))}break;case 44:var b=r[t++]|r[t++]<<8,y=r[t++]|r[t++]<<8,B=r[t++]|r[t++]<<8,I=r[t++]|r[t++]<<8,C=r[t++],N=C>>6&1,R=1<<1+(7&C),U=o,x=A,v=!1;C>>7&&(v=!0,U=t,x=R,t+=3*R);var T=t;for(t++;;){var E;if(!((E=r[t++])>=0))throw Error("Invalid block size");if(E===0)break;t+=E}c.push({x:b,y,width:B,height:I,has_local_palette:v,palette_offset:U,palette_size:x,data_offset:T,data_length:t-T,transparent_index:h,interlaced:!!N,delay:u,disposal:d});break;case 59:l=!1;break;default:throw new Error("Unknown gif block: 0x"+r[t-1].toString(16))}this.numFrames=function(){return c.length},this.loopCount=function(){return m},this.frameInfo=function(_){if(_<0||_>=c.length)throw new Error("Frame index out of range.");return c[_]},this.decodeAndBlitFrameBGRA=function(_,F){var k=this.frameInfo(_),Z=k.width*k.height,ut=new Uint8Array(Z);uE(r,k.data_offset,ut,Z);var nt=k.palette_offset,j=k.transparent_index;j===null&&(j=256);var G=k.width,pt=e-G,q=G,L=4*(k.y*e+k.x),O=4*((k.y+k.height)*e+k.x),V=L,X=4*pt;k.interlaced===!0&&(X+=4*e*7);for(var At=8,et=0,st=ut.length;et<st;++et){var dt=ut[et];if(q===0&&(q=G,(V+=X)>=O&&(X=4*pt+4*e*(At-1),V=L+(G+pt)*(At<<1),At>>=1)),dt===j)V+=4;else{var vt=r[nt+3*dt],_t=r[nt+3*dt+1],Mt=r[nt+3*dt+2];F[V++]=Mt,F[V++]=_t,F[V++]=vt,F[V++]=255}--q}},this.decodeAndBlitFrameRGBA=function(_,F){var k=this.frameInfo(_),Z=k.width*k.height,ut=new Uint8Array(Z);uE(r,k.data_offset,ut,Z);var nt=k.palette_offset,j=k.transparent_index;j===null&&(j=256);var G=k.width,pt=e-G,q=G,L=4*(k.y*e+k.x),O=4*((k.y+k.height)*e+k.x),V=L,X=4*pt;k.interlaced===!0&&(X+=4*e*7);for(var At=8,et=0,st=ut.length;et<st;++et){var dt=ut[et];if(q===0&&(q=G,(V+=X)>=O&&(X=4*pt+4*e*(At-1),V=L+(G+pt)*(At<<1),At>>=1)),dt===j)V+=4;else{var vt=r[nt+3*dt],_t=r[nt+3*dt+1],Mt=r[nt+3*dt+2];F[V++]=vt,F[V++]=_t,F[V++]=Mt,F[V++]=255}--q}}}function uE(r,t,e,n){for(var i=r[t++],s=1<<i,a=s+1,o=a+1,A=i+1,l=(1<<A)-1,c=0,u=0,h=0,d=r[t++],m=new Int32Array(4096),f=null;;){for(;c<16&&d!==0;)u|=r[t++]<<c,c+=8,d===1?d=r[t++]:--d;if(c<A)break;var b=u&l;if(u>>=A,c-=A,b!==s){if(b===a)break;for(var y=b<o?b:f,B=0,I=y;I>s;)I=m[I]>>8,++B;var C=I;if(h+B+(y!==b?1:0)>n)return void Xr.log("Warning, gif stream longer than expected.");e[h++]=C;var N=h+=B;for(y!==b&&(e[h++]=C),I=y;B--;)I=m[I],e[--N]=255&I,I>>=8;f!==null&&o<4096&&(m[o++]=f<<8|C,o>=l+1&&A<12&&(++A,l=l<<1|1)),f=b}else o=a+1,l=(1<<(A=i+1))-1,f=null}return h!==n&&Xr.log("Warning, gif stream shorter than expected."),e}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function hw(r){var t,e,n,i,s,a=Math.floor,o=new Array(64),A=new Array(64),l=new Array(64),c=new Array(64),u=new Array(65535),h=new Array(65535),d=new Array(64),m=new Array(64),f=[],b=0,y=7,B=new Array(64),I=new Array(64),C=new Array(64),N=new Array(256),R=new Array(2048),U=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],x=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],v=[0,1,2,3,4,5,6,7,8,9,10,11],T=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],E=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],_=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],F=[0,1,2,3,4,5,6,7,8,9,10,11],k=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Z=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function ut(L,O){for(var V=0,X=0,At=new Array,et=1;et<=16;et++){for(var st=1;st<=L[et];st++)At[O[X]]=[],At[O[X]][0]=V,At[O[X]][1]=et,X++,V++;V*=2}return At}function nt(L){for(var O=L[0],V=L[1]-1;V>=0;)O&1<<V&&(b|=1<<y),V--,--y<0&&(b==255?(j(255),j(0)):j(b),y=7,b=0)}function j(L){f.push(L)}function G(L){j(L>>8&255),j(255&L)}function pt(L,O,V,X,At){for(var et,st=At[0],dt=At[240],vt=(function(at,Ct){var xt,yt,kt,Rt,Lt,Qt,se,te,ae,ve,ie=0;for(ae=0;ae<8;++ae){xt=at[ie],yt=at[ie+1],kt=at[ie+2],Rt=at[ie+3],Lt=at[ie+4],Qt=at[ie+5],se=at[ie+6];var Ae=xt+(te=at[ie+7]),ee=xt-te,re=yt+se,he=yt-se,Fe=kt+Qt,xe=kt-Qt,De=Rt+Lt,Le=Rt-Lt,or=Ae+De,kr=Ae-De,Se=re+Fe,ke=re-Fe;at[ie]=or+Se,at[ie+4]=or-Se;var rr=.707106781*(ke+kr);at[ie+2]=kr+rr,at[ie+6]=kr-rr;var ei=.382683433*((or=Le+xe)-(ke=he+ee)),_n=.5411961*or+ei,Yi=1.306562965*ke+ei,Ai=.707106781*(Se=xe+he),Ne=ee+Ai,Ys=ee-Ai;at[ie+5]=Ys+_n,at[ie+3]=Ys-_n,at[ie+1]=Ne+Yi,at[ie+7]=Ne-Yi,ie+=8}for(ie=0,ae=0;ae<8;++ae){xt=at[ie],yt=at[ie+8],kt=at[ie+16],Rt=at[ie+24],Lt=at[ie+32],Qt=at[ie+40],se=at[ie+48];var li=xt+(te=at[ie+56]),Ni=xt-te,Di=yt+se,Mr=yt-se,$r=kt+Qt,Qn=kt-Qt,ci=Rt+Lt,Xs=Rt-Lt,Mi=li+ci,Ri=li-ci,wi=Di+$r,Qi=Di-$r;at[ie]=Mi+wi,at[ie+32]=Mi-wi;var vi=.707106781*(Qi+Ri);at[ie+16]=Ri+vi,at[ie+48]=Ri-vi;var xi=.382683433*((Mi=Xs+Qn)-(Qi=Mr+Ni)),_i=.5411961*Mi+xi,Bi=1.306562965*Qi+xi,Cs=.707106781*(wi=Qn+Mr),Es=Ni+Cs,Ss=Ni-Cs;at[ie+40]=Ss+_i,at[ie+24]=Ss-_i,at[ie+8]=Es+Bi,at[ie+56]=Es-Bi,ie++}for(ae=0;ae<64;++ae)ve=at[ae]*Ct[ae],d[ae]=ve>0?ve+.5|0:ve-.5|0;return d})(L,O),_t=0;_t<64;++_t)m[U[_t]]=vt[_t];var Mt=m[0]-V;V=m[0],Mt==0?nt(X[0]):(nt(X[h[et=32767+Mt]]),nt(u[et]));for(var Ot=63;Ot>0&&m[Ot]==0;)Ot--;if(Ot==0)return nt(st),V;for(var D,$=1;$<=Ot;){for(var bt=$;m[$]==0&&$<=Ot;)++$;var rt=$-bt;if(rt>=16){D=rt>>4;for(var W=1;W<=D;++W)nt(dt);rt&=15}et=32767+m[$],nt(At[(rt<<4)+h[et]]),nt(u[et]),$++}return Ot!=63&&nt(st),V}function q(L){L=Math.min(Math.max(L,1),100),s!=L&&((function(O){for(var V=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],X=0;X<64;X++){var At=a((V[X]*O+50)/100);At=Math.min(Math.max(At,1),255),o[U[X]]=At}for(var et=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],st=0;st<64;st++){var dt=a((et[st]*O+50)/100);dt=Math.min(Math.max(dt,1),255),A[U[st]]=dt}for(var vt=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],_t=0,Mt=0;Mt<8;Mt++)for(var Ot=0;Ot<8;Ot++)l[_t]=1/(o[U[_t]]*vt[Mt]*vt[Ot]*8),c[_t]=1/(A[U[_t]]*vt[Mt]*vt[Ot]*8),_t++})(L<50?Math.floor(5e3/L):Math.floor(200-2*L)),s=L)}this.encode=function(L,O){O&&q(O),f=new Array,b=0,y=7,G(65496),G(65504),G(16),j(74),j(70),j(73),j(70),j(0),j(1),j(1),j(0),G(1),G(1),j(0),j(0),(function(){G(65499),G(132),j(0);for(var yt=0;yt<64;yt++)j(o[yt]);j(1);for(var kt=0;kt<64;kt++)j(A[kt])})(),(function(yt,kt){G(65472),G(17),j(8),G(kt),G(yt),j(3),j(1),j(17),j(0),j(2),j(17),j(1),j(3),j(17),j(1)})(L.width,L.height),(function(){G(65476),G(418),j(0);for(var yt=0;yt<16;yt++)j(x[yt+1]);for(var kt=0;kt<=11;kt++)j(v[kt]);j(16);for(var Rt=0;Rt<16;Rt++)j(T[Rt+1]);for(var Lt=0;Lt<=161;Lt++)j(E[Lt]);j(1);for(var Qt=0;Qt<16;Qt++)j(_[Qt+1]);for(var se=0;se<=11;se++)j(F[se]);j(17);for(var te=0;te<16;te++)j(k[te+1]);for(var ae=0;ae<=161;ae++)j(Z[ae])})(),G(65498),G(12),j(3),j(1),j(0),j(2),j(17),j(3),j(17),j(0),j(63),j(0);var V=0,X=0,At=0;b=0,y=7,this.encode.displayName="_encode_";for(var et,st,dt,vt,_t,Mt,Ot,D,$,bt=L.data,rt=L.width,W=L.height,at=4*rt,Ct=0;Ct<W;){for(et=0;et<at;){for(_t=at*Ct+et,Ot=-1,D=0,$=0;$<64;$++)Mt=_t+(D=$>>3)*at+(Ot=4*(7&$)),Ct+D>=W&&(Mt-=at*(Ct+1+D-W)),et+Ot>=at&&(Mt-=et+Ot-at+4),st=bt[Mt++],dt=bt[Mt++],vt=bt[Mt++],B[$]=(R[st]+R[dt+256|0]+R[vt+512|0]>>16)-128,I[$]=(R[st+768|0]+R[dt+1024|0]+R[vt+1280|0]>>16)-128,C[$]=(R[st+1280|0]+R[dt+1536|0]+R[vt+1792|0]>>16)-128;V=pt(B,l,V,t,n),X=pt(I,c,X,e,i),At=pt(C,c,At,e,i),et+=32}Ct+=8}if(y>=0){var xt=[];xt[1]=y+1,xt[0]=(1<<y+1)-1,nt(xt)}return G(65497),new Uint8Array(f)},r=r||50,(function(){for(var L=String.fromCharCode,O=0;O<256;O++)N[O]=L(O)})(),t=ut(x,v),e=ut(_,F),n=ut(T,E),i=ut(k,Z),(function(){for(var L=1,O=2,V=1;V<=15;V++){for(var X=L;X<O;X++)h[32767+X]=V,u[32767+X]=[],u[32767+X][1]=V,u[32767+X][0]=X;for(var At=-(O-1);At<=-L;At++)h[32767+At]=V,u[32767+At]=[],u[32767+At][1]=V,u[32767+At][0]=O-1+At;L<<=1,O<<=1}})(),(function(){for(var L=0;L<256;L++)R[L]=19595*L,R[L+256|0]=38470*L,R[L+512|0]=7471*L+32768,R[L+768|0]=-11059*L,R[L+1024|0]=-21709*L,R[L+1280|0]=32768*L+8421375,R[L+1536|0]=-27439*L,R[L+1792|0]=-5329*L})(),q(r)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Va(r,t){if(this.pos=0,this.buffer=r,this.datav=new DataView(r.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function dE(r){function t(v){if(!v)throw Error("assert :P")}function e(v,T,E){for(var _=0;4>_;_++)if(v[T+_]!=E.charCodeAt(_))return!0;return!1}function n(v,T,E,_,F){for(var k=0;k<F;k++)v[T+k]=E[_+k]}function i(v,T,E,_){for(var F=0;F<_;F++)v[T+F]=E}function s(v){return new Int32Array(v)}function a(v,T){for(var E=[],_=0;_<v;_++)E.push(new T);return E}function o(v,T){var E=[];return(function _(F,k,Z){for(var ut=Z[k],nt=0;nt<ut&&(F.push(Z.length>k+1?[]:new T),!(Z.length<k+1));nt++)_(F[nt],k+1,Z)})(E,0,v),E}var A=function(){var v=this;function T(g,w){for(var P=1<<w-1>>>0;g&P;)P>>>=1;return P?(g&P-1)+P:g}function E(g,w,P,Q,z){t(!(Q%P));do g[w+(Q-=P)]=z;while(0<Q)}function _(g,w,P,Q,z){if(t(2328>=z),512>=z)var Y=s(512);else if((Y=s(z))==null)return 0;return(function(tt,it,ct,ft,Bt,Pt){var gt,Et,Ft=it,Ht=1<<ct,Ut=s(16),jt=s(16);for(t(Bt!=0),t(ft!=null),t(tt!=null),t(0<ct),Et=0;Et<Bt;++Et){if(15<ft[Et])return 0;++Ut[ft[Et]]}if(Ut[0]==Bt)return 0;for(jt[1]=0,gt=1;15>gt;++gt){if(Ut[gt]>1<<gt)return 0;jt[gt+1]=jt[gt]+Ut[gt]}for(Et=0;Et<Bt;++Et)gt=ft[Et],0<ft[Et]&&(Pt[jt[gt]++]=Et);if(jt[15]==1)return(ft=new F).g=0,ft.value=Pt[0],E(tt,Ft,1,Ht,ft),Ht;var Gt,Zt=-1,Xt=Ht-1,Te=0,ye=1,nr=1,Ce=1<<ct;for(Et=0,gt=1,Bt=2;gt<=ct;++gt,Bt<<=1){if(ye+=nr<<=1,0>(nr-=Ut[gt]))return 0;for(;0<Ut[gt];--Ut[gt])(ft=new F).g=gt,ft.value=Pt[Et++],E(tt,Ft+Te,Bt,Ce,ft),Te=T(Te,gt)}for(gt=ct+1,Bt=2;15>=gt;++gt,Bt<<=1){if(ye+=nr<<=1,0>(nr-=Ut[gt]))return 0;for(;0<Ut[gt];--Ut[gt]){if(ft=new F,(Te&Xt)!=Zt){for(Ft+=Ce,Gt=1<<(Zt=gt)-ct;15>Zt&&!(0>=(Gt-=Ut[Zt]));)++Zt,Gt<<=1;Ht+=Ce=1<<(Gt=Zt-ct),tt[it+(Zt=Te&Xt)].g=Gt+ct,tt[it+Zt].value=Ft-it-Zt}ft.g=gt-ct,ft.value=Pt[Et++],E(tt,Ft+(Te>>ct),Bt,Ce,ft),Te=T(Te,gt)}}return ye!=2*jt[15]-1?0:Ht})(g,w,P,Q,z,Y)}function F(){this.value=this.g=0}function k(){this.value=this.g=0}function Z(){this.G=a(5,F),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=a(wc,k)}function ut(g,w,P,Q){t(g!=null),t(w!=null),t(2147483648>Q),g.Ca=254,g.I=0,g.b=-8,g.Ka=0,g.oa=w,g.pa=P,g.Jd=w,g.Yc=P+Q,g.Zc=4<=Q?P+Q-4+1:P,st(g)}function nt(g,w){for(var P=0;0<w--;)P|=vt(g,128)<<w;return P}function j(g,w){var P=nt(g,w);return dt(g)?-P:P}function G(g,w,P,Q){var z,Y=0;for(t(g!=null),t(w!=null),t(4294967288>Q),g.Sb=Q,g.Ra=0,g.u=0,g.h=0,4<Q&&(Q=4),z=0;z<Q;++z)Y+=w[P+z]<<8*z;g.Ra=Y,g.bb=Q,g.oa=w,g.pa=P}function pt(g){for(;8<=g.u&&g.bb<g.Sb;)g.Ra>>>=8,g.Ra+=g.oa[g.pa+g.bb]<<YA-8>>>0,++g.bb,g.u-=8;X(g)&&(g.h=1,g.u=0)}function q(g,w){if(t(0<=w),!g.h&&w<=ra){var P=V(g)&ea[w];return g.u+=w,pt(g),P}return g.h=1,g.u=0}function L(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function O(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function V(g){return g.Ra>>>(g.u&YA-1)>>>0}function X(g){return t(g.bb<=g.Sb),g.h||g.bb==g.Sb&&g.u>YA}function At(g,w){g.u=w,g.h=X(g)}function et(g){g.u>=tA&&(t(g.u>=tA),pt(g))}function st(g){t(g!=null&&g.oa!=null),g.pa<g.Zc?(g.I=(g.oa[g.pa++]|g.I<<8)>>>0,g.b+=8):(t(g!=null&&g.oa!=null),g.pa<g.Yc?(g.b+=8,g.I=g.oa[g.pa++]|g.I<<8):g.Ka?g.b=0:(g.I<<=8,g.b+=8,g.Ka=1))}function dt(g){return nt(g,1)}function vt(g,w){var P=g.Ca;0>g.b&&st(g);var Q=g.b,z=P*w>>>8,Y=(g.I>>>Q>z)+0;for(Y?(P-=z,g.I-=z+1<<Q>>>0):P=z+1,Q=P,z=0;256<=Q;)z+=8,Q>>=8;return Q=7^z+XA[Q],g.b-=Q,g.Ca=(P<<Q)-1,Y}function _t(g,w,P){g[w+0]=P>>24&255,g[w+1]=P>>16&255,g[w+2]=P>>8&255,g[w+3]=255&P}function Mt(g,w){return g[w+0]|g[w+1]<<8}function Ot(g,w){return Mt(g,w)|g[w+2]<<16}function D(g,w){return Mt(g,w)|Mt(g,w+2)<<16}function $(g,w){var P=1<<w;return t(g!=null),t(0<w),g.X=s(P),g.X==null?0:(g.Mb=32-w,g.Xa=w,1)}function bt(g,w){t(g!=null),t(w!=null),t(g.Xa==w.Xa),n(w.X,0,g.X,0,1<<w.Xa)}function rt(){this.X=[],this.Xa=this.Mb=0}function W(g,w,P,Q){t(P!=null),t(Q!=null);var z=P[0],Y=Q[0];return z==0&&(z=(g*Y+w/2)/w),Y==0&&(Y=(w*z+g/2)/g),0>=z||0>=Y?0:(P[0]=z,Q[0]=Y,1)}function at(g,w){return g+(1<<w)-1>>>w}function Ct(g,w){return((4278255360&g)+(4278255360&w)>>>0&4278255360)+((16711935&g)+(16711935&w)>>>0&16711935)>>>0}function xt(g,w){v[w]=function(P,Q,z,Y,tt,it,ct){var ft;for(ft=0;ft<tt;++ft){var Bt=v[g](it[ct+ft-1],z,Y+ft);it[ct+ft]=Ct(P[Q+ft],Bt)}}}function yt(){this.ud=this.hd=this.jd=0}function kt(g,w){return((4278124286&(g^w))>>>1)+(g&w)>>>0}function Rt(g){return 0<=g&&256>g?g:0>g?0:255<g?255:void 0}function Lt(g,w){return Rt(g+(g-w+.5>>1))}function Qt(g,w,P){return Math.abs(w-P)-Math.abs(g-P)}function se(g,w,P,Q,z,Y,tt){for(Q=Y[tt-1],P=0;P<z;++P)Y[tt+P]=Q=Ct(g[w+P],Q)}function te(g,w,P,Q,z){var Y;for(Y=0;Y<P;++Y){var tt=g[w+Y],it=tt>>8&255,ct=16711935&(ct=(ct=16711935&tt)+((it<<16)+it));Q[z+Y]=(4278255360&tt)+ct>>>0}}function ae(g,w){w.jd=255&g,w.hd=g>>8&255,w.ud=g>>16&255}function ve(g,w,P,Q,z,Y){var tt;for(tt=0;tt<Q;++tt){var it=w[P+tt],ct=it>>>8,ft=it,Bt=255&(Bt=(Bt=it>>>16)+((g.jd<<24>>24)*(ct<<24>>24)>>>5));ft=255&(ft=(ft+=(g.hd<<24>>24)*(ct<<24>>24)>>>5)+((g.ud<<24>>24)*(Bt<<24>>24)>>>5)),z[Y+tt]=(4278255360&it)+(Bt<<16)+ft}}function ie(g,w,P,Q,z){v[w]=function(Y,tt,it,ct,ft,Bt,Pt,gt,Et){for(ct=Pt;ct<gt;++ct)for(Pt=0;Pt<Et;++Pt)ft[Bt++]=z(it[Q(Y[tt++])])},v[g]=function(Y,tt,it,ct,ft,Bt,Pt){var gt=8>>Y.b,Et=Y.Ea,Ft=Y.K[0],Ht=Y.w;if(8>gt)for(Y=(1<<Y.b)-1,Ht=(1<<gt)-1;tt<it;++tt){var Ut,jt=0;for(Ut=0;Ut<Et;++Ut)Ut&Y||(jt=Q(ct[ft++])),Bt[Pt++]=z(Ft[jt&Ht]),jt>>=gt}else v["VP8LMapColor"+P](ct,ft,Ft,Ht,Bt,Pt,tt,it,Et)}}function Ae(g,w,P,Q,z){for(P=w+P;w<P;){var Y=g[w++];Q[z++]=Y>>16&255,Q[z++]=Y>>8&255,Q[z++]=255&Y}}function ee(g,w,P,Q,z){for(P=w+P;w<P;){var Y=g[w++];Q[z++]=Y>>16&255,Q[z++]=Y>>8&255,Q[z++]=255&Y,Q[z++]=Y>>24&255}}function re(g,w,P,Q,z){for(P=w+P;w<P;){var Y=(tt=g[w++])>>16&240|tt>>12&15,tt=240&tt|tt>>28&15;Q[z++]=Y,Q[z++]=tt}}function he(g,w,P,Q,z){for(P=w+P;w<P;){var Y=(tt=g[w++])>>16&248|tt>>13&7,tt=tt>>5&224|tt>>3&31;Q[z++]=Y,Q[z++]=tt}}function Fe(g,w,P,Q,z){for(P=w+P;w<P;){var Y=g[w++];Q[z++]=255&Y,Q[z++]=Y>>8&255,Q[z++]=Y>>16&255}}function xe(g,w,P,Q,z,Y){if(Y==0)for(P=w+P;w<P;)_t(Q,((Y=g[w++])[0]>>24|Y[1]>>8&65280|Y[2]<<8&16711680|Y[3]<<24)>>>0),z+=32;else n(Q,z,g,w,P)}function De(g,w){v[w][0]=v[g+"0"],v[w][1]=v[g+"1"],v[w][2]=v[g+"2"],v[w][3]=v[g+"3"],v[w][4]=v[g+"4"],v[w][5]=v[g+"5"],v[w][6]=v[g+"6"],v[w][7]=v[g+"7"],v[w][8]=v[g+"8"],v[w][9]=v[g+"9"],v[w][10]=v[g+"10"],v[w][11]=v[g+"11"],v[w][12]=v[g+"12"],v[w][13]=v[g+"13"],v[w][14]=v[g+"0"],v[w][15]=v[g+"0"]}function Le(g){return g==zb||g==qb||g==Gg||g==Wb}function or(){this.eb=[],this.size=this.A=this.fb=0}function kr(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Se(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new or,this.f.kb=new kr,this.sd=null}function ke(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function rr(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function ei(g){return alert("todo:WebPSamplerProcessPlane"),g.T}function _n(g,w){var P=g.T,Q=w.ba.f.RGBA,z=Q.eb,Y=Q.fb+g.ka*Q.A,tt=Ea[w.ba.S],it=g.y,ct=g.O,ft=g.f,Bt=g.N,Pt=g.ea,gt=g.W,Et=w.cc,Ft=w.dc,Ht=w.Mc,Ut=w.Nc,jt=g.ka,Gt=g.ka+g.T,Zt=g.U,Xt=Zt+1>>1;for(jt==0?tt(it,ct,null,null,ft,Bt,Pt,gt,ft,Bt,Pt,gt,z,Y,null,null,Zt):(tt(w.ec,w.fc,it,ct,Et,Ft,Ht,Ut,ft,Bt,Pt,gt,z,Y-Q.A,z,Y,Zt),++P);jt+2<Gt;jt+=2)Et=ft,Ft=Bt,Ht=Pt,Ut=gt,Bt+=g.Rc,gt+=g.Rc,Y+=2*Q.A,tt(it,(ct+=2*g.fa)-g.fa,it,ct,Et,Ft,Ht,Ut,ft,Bt,Pt,gt,z,Y-Q.A,z,Y,Zt);return ct+=g.fa,g.j+Gt<g.o?(n(w.ec,w.fc,it,ct,Zt),n(w.cc,w.dc,ft,Bt,Xt),n(w.Mc,w.Nc,Pt,gt,Xt),P--):1&Gt||tt(it,ct,null,null,ft,Bt,Pt,gt,ft,Bt,Pt,gt,z,Y+Q.A,null,null,Zt),P}function Yi(g,w,P){var Q=g.F,z=[g.J];if(Q!=null){var Y=g.U,tt=w.ba.S,it=tt==jg||tt==Gg;w=w.ba.f.RGBA;var ct=[0],ft=g.ka;ct[0]=g.T,g.Kb&&(ft==0?--ct[0]:(--ft,z[0]-=g.width),g.j+g.ka+g.T==g.o&&(ct[0]=g.o-g.j-ft));var Bt=w.eb;ft=w.fb+ft*w.A,g=Nx(Q,z[0],g.width,Y,ct,Bt,ft+(it?0:3),w.A),t(P==ct),g&&Le(tt)&&uh(Bt,ft,it,Y,ct,w.A)}return 0}function Ai(g){var w=g.ma,P=w.ba.S,Q=11>P,z=P==Vg||P==$g||P==jg||P==Kb||P==12||Le(P);if(w.memory=null,w.Ib=null,w.Jb=null,w.Nd=null,!nh(w.Oa,g,z?11:12))return 0;if(z&&Le(P)&&ne(),g.da)alert("todo:use_scaling");else{if(Q){if(w.Ib=ei,g.Kb){if(P=g.U+1>>1,w.memory=s(g.U+2*P),w.memory==null)return 0;w.ec=w.memory,w.fc=0,w.cc=w.ec,w.dc=w.fc+g.U,w.Mc=w.cc,w.Nc=w.dc+P,w.Ib=_n,ne()}}else alert("todo:EmitYUV");z&&(w.Jb=Yi,Q&&Tt())}if(Q&&!Xx){for(g=0;256>g;++g)KP[g]=89858*(g-128)+zg>>Kg,WP[g]=-22014*(g-128)+zg,qP[g]=-45773*(g-128),zP[g]=113618*(g-128)+zg>>Kg;for(g=hh;g<Jb;++g)w=76283*(g-16)+zg>>Kg,YP[g-hh]=In(w,255),XP[g-hh]=In(w+8>>4,15);Xx=1}return 1}function Ne(g){var w=g.ma,P=g.U,Q=g.T;return t(!(1&g.ka)),0>=P||0>=Q?0:(P=w.Ib(g,w),w.Jb!=null&&w.Jb(g,w,P),w.Dc+=P,1)}function Ys(g){g.ma.memory=null}function li(g,w,P,Q){return q(g,8)!=47?0:(w[0]=q(g,14)+1,P[0]=q(g,14)+1,Q[0]=q(g,1),q(g,3)!=0?0:!g.h)}function Ni(g,w){if(4>g)return g+1;var P=g-2>>1;return(2+(1&g)<<P)+q(w,P)+1}function Di(g,w){return 120<w?w-120:1<=(P=((P=LP[w-1])>>4)*g+(8-(15&P)))?P:1;var P}function Mr(g,w,P){var Q=V(P),z=g[w+=255&Q].g-8;return 0<z&&(At(P,P.u+8),Q=V(P),w+=g[w].value,w+=Q&(1<<z)-1),At(P,P.u+g[w].g),g[w].value}function $r(g,w,P){return P.g+=g.g,P.value+=g.value<<w>>>0,t(8>=P.g),g.g}function Qn(g,w,P){var Q=g.xc;return t((w=Q==0?0:g.vc[g.md*(P>>Q)+(w>>Q)])<g.Wb),g.Ya[w]}function ci(g,w,P,Q){var z=g.ab,Y=g.c*w,tt=g.C;w=tt+w;var it=P,ct=Q;for(Q=g.Ta,P=g.Ua;0<z--;){var ft=g.gc[z],Bt=tt,Pt=w,gt=it,Et=ct,Ft=(ct=Q,it=P,ft.Ea);switch(t(Bt<Pt),t(Pt<=ft.nc),ft.hc){case 2:Hn(gt,Et,(Pt-Bt)*Ft,ct,it);break;case 0:var Ht=Bt,Ut=Pt,jt=ct,Gt=it,Zt=(Ce=ft).Ea;Ht==0&&(sh(gt,Et,null,null,1,jt,Gt),se(gt,Et+1,0,0,Zt-1,jt,Gt+1),Et+=Zt,Gt+=Zt,++Ht);for(var Xt=1<<Ce.b,Te=Xt-1,ye=at(Zt,Ce.b),nr=Ce.K,Ce=Ce.w+(Ht>>Ce.b)*ye;Ht<Ut;){var br=nr,hi=Ce,ir=1;for(Fu(gt,Et,jt,Gt-Zt,1,jt,Gt);ir<Zt;){var Ee=(ir&~Te)+Xt;Ee>Zt&&(Ee=Zt),(0,oh[br[hi++]>>8&15])(gt,Et+ +ir,jt,Gt+ir-Zt,Ee-ir,jt,Gt+ir),ir=Ee}Et+=Zt,Gt+=Zt,++Ht&Te||(Ce+=ye)}Pt!=ft.nc&&n(ct,it-Ft,ct,it+(Pt-Bt-1)*Ft,Ft);break;case 1:for(Ft=gt,Ut=Et,Zt=(gt=ft.Ea)-(Gt=gt&~(jt=(Et=1<<ft.b)-1)),Ht=at(gt,ft.b),Xt=ft.K,ft=ft.w+(Bt>>ft.b)*Ht;Bt<Pt;){for(Te=Xt,ye=ft,nr=new yt,Ce=Ut+Gt,br=Ut+gt;Ut<Ce;)ae(Te[ye++],nr),Ah(nr,Ft,Ut,Et,ct,it),Ut+=Et,it+=Et;Ut<br&&(ae(Te[ye++],nr),Ah(nr,Ft,Ut,Zt,ct,it),Ut+=Zt,it+=Zt),++Bt&jt||(ft+=Ht)}break;case 3:if(gt==ct&&Et==it&&0<ft.b){for(Ut=ct,gt=Ft=it+(Pt-Bt)*Ft-(Gt=(Pt-Bt)*at(ft.Ea,ft.b)),Et=ct,jt=it,Ht=[],Gt=(Zt=Gt)-1;0<=Gt;--Gt)Ht[Gt]=Et[jt+Gt];for(Gt=Zt-1;0<=Gt;--Gt)Ut[gt+Gt]=Ht[Gt];Rg(ft,Bt,Pt,ct,Ft,ct,it)}else Rg(ft,Bt,Pt,gt,Et,ct,it)}it=Q,ct=P}ct!=P&&n(Q,P,it,ct,Y)}function Xs(g,w){var P=g.V,Q=g.Ba+g.c*g.C,z=w-g.C;if(t(w<=g.l.o),t(16>=z),0<z){var Y=g.l,tt=g.Ta,it=g.Ua,ct=Y.width;if(ci(g,z,P,Q),z=it=[it],t((P=g.C)<(Q=w)),t(Y.v<Y.va),Q>Y.o&&(Q=Y.o),P<Y.j){var ft=Y.j-P;P=Y.j,z[0]+=ft*ct}if(P>=Q?P=0:(z[0]+=4*Y.v,Y.ka=P-Y.j,Y.U=Y.va-Y.v,Y.T=Q-P,P=1),P){if(it=it[0],11>(P=g.ca).S){var Bt=P.f.RGBA,Pt=(Q=P.S,z=Y.U,Y=Y.T,ft=Bt.eb,Bt.A),gt=Y;for(Bt=Bt.fb+g.Ma*Bt.A;0<gt--;){var Et=tt,Ft=it,Ht=z,Ut=ft,jt=Bt;switch(Q){case Hg:lh(Et,Ft,Ht,Ut,jt);break;case Vg:JA(Et,Ft,Ht,Ut,jt);break;case zb:JA(Et,Ft,Ht,Ut,jt),uh(Ut,jt,0,Ht,1,0);break;case Vx:vc(Et,Ft,Ht,Ut,jt);break;case $g:xe(Et,Ft,Ht,Ut,jt,1);break;case qb:xe(Et,Ft,Ht,Ut,jt,1),uh(Ut,jt,0,Ht,1,0);break;case jg:xe(Et,Ft,Ht,Ut,jt,0);break;case Gg:xe(Et,Ft,Ht,Ut,jt,0),uh(Ut,jt,1,Ht,1,0);break;case Kb:ZA(Et,Ft,Ht,Ut,jt);break;case Wb:ZA(Et,Ft,Ht,Ut,jt),Px(Ut,jt,Ht,1,0);break;case $x:tl(Et,Ft,Ht,Ut,jt);break;default:t(0)}it+=ct,Bt+=Pt}g.Ma+=Y}else alert("todo:EmitRescaledRowsYUVA");t(g.Ma<=P.height)}}g.C=w,t(g.C<=g.i)}function Mi(g){var w;if(0<g.ua)return 0;for(w=0;w<g.Wb;++w){var P=g.Ya[w].G,Q=g.Ya[w].H;if(0<P[1][Q[1]+0].g||0<P[2][Q[2]+0].g||0<P[3][Q[3]+0].g)return 0}return 1}function Ri(g,w,P,Q,z,Y){if(g.Z!=0){var tt=g.qd,it=g.rd;for(t(nl[g.Z]!=null);w<P;++w)nl[g.Z](tt,it,Q,z,Q,z,Y),tt=Q,it=z,z+=Y;g.qd=tt,g.rd=it}}function wi(g,w){var P=g.l.ma,Q=P.Z==0||P.Z==1?g.l.j:g.C;if(Q=g.C<Q?Q:g.C,t(w<=g.l.o),w>Q){var z=g.l.width,Y=P.ca,tt=P.tb+z*Q,it=g.V,ct=g.Ba+g.c*Q,ft=g.gc;t(g.ab==1),t(ft[0].hc==3),po(ft[0],Q,w,it,ct,Y,tt),Ri(P,Q,w,Y,tt,z)}g.C=g.Ma=w}function Qi(g,w,P,Q,z,Y,tt){var it=g.$/Q,ct=g.$%Q,ft=g.m,Bt=g.s,Pt=P+g.$,gt=Pt;z=P+Q*z;var Et=P+Q*Y,Ft=280+Bt.ua,Ht=g.Pb?it:16777216,Ut=0<Bt.ua?Bt.Wa:null,jt=Bt.wc,Gt=Pt<Et?Qn(Bt,ct,it):null;t(g.C<Y),t(Et<=z);var Zt=!1;t:for(;;){for(;Zt||Pt<Et;){var Xt=0;if(it>=Ht){var Te=Pt-P;t((Ht=g).Pb),Ht.wd=Ht.m,Ht.xd=Te,0<Ht.s.ua&&bt(Ht.s.Wa,Ht.s.vb),Ht=it+PP}if(ct&jt||(Gt=Qn(Bt,ct,it)),t(Gt!=null),Gt.Qb&&(w[Pt]=Gt.qb,Zt=!0),!Zt)if(et(ft),Gt.jc){Xt=ft,Te=w;var ye=Pt,nr=Gt.pd[V(Xt)&wc-1];t(Gt.jc),256>nr.g?(At(Xt,Xt.u+nr.g),Te[ye]=nr.value,Xt=0):(At(Xt,Xt.u+nr.g-256),t(256<=nr.value),Xt=nr.value),Xt==0&&(Zt=!0)}else Xt=Mr(Gt.G[0],Gt.H[0],ft);if(ft.h)break;if(Zt||256>Xt){if(!Zt)if(Gt.nd)w[Pt]=(Gt.qb|Xt<<8)>>>0;else{if(et(ft),Zt=Mr(Gt.G[1],Gt.H[1],ft),et(ft),Te=Mr(Gt.G[2],Gt.H[2],ft),ye=Mr(Gt.G[3],Gt.H[3],ft),ft.h)break;w[Pt]=(ye<<24|Zt<<16|Xt<<8|Te)>>>0}if(Zt=!1,++Pt,++ct>=Q&&(ct=0,++it,tt!=null&&it<=Y&&!(it%16)&&tt(g,it),Ut!=null))for(;gt<Pt;)Xt=w[gt++],Ut.X[(506832829*Xt&4294967295)>>>Ut.Mb]=Xt}else if(280>Xt){if(Xt=Ni(Xt-256,ft),Te=Mr(Gt.G[4],Gt.H[4],ft),et(ft),Te=Di(Q,Te=Ni(Te,ft)),ft.h)break;if(Pt-P<Te||z-Pt<Xt)break t;for(ye=0;ye<Xt;++ye)w[Pt+ye]=w[Pt+ye-Te];for(Pt+=Xt,ct+=Xt;ct>=Q;)ct-=Q,++it,tt!=null&&it<=Y&&!(it%16)&&tt(g,it);if(t(Pt<=z),ct&jt&&(Gt=Qn(Bt,ct,it)),Ut!=null)for(;gt<Pt;)Xt=w[gt++],Ut.X[(506832829*Xt&4294967295)>>>Ut.Mb]=Xt}else{if(!(Xt<Ft))break t;for(Zt=Xt-280,t(Ut!=null);gt<Pt;)Xt=w[gt++],Ut.X[(506832829*Xt&4294967295)>>>Ut.Mb]=Xt;Xt=Pt,t(!(Zt>>>(Te=Ut).Xa)),w[Xt]=Te.X[Zt],Zt=!0}Zt||t(ft.h==X(ft))}if(g.Pb&&ft.h&&Pt<z)t(g.m.h),g.a=5,g.m=g.wd,g.$=g.xd,0<g.s.ua&&bt(g.s.vb,g.s.Wa);else{if(ft.h)break t;tt!=null&&tt(g,it>Y?Y:it),g.a=0,g.$=Pt-P}return 1}return g.a=3,0}function vi(g){t(g!=null),g.vc=null,g.yc=null,g.Ya=null;var w=g.Wa;w!=null&&(w.X=null),g.vb=null,t(g!=null)}function xi(){var g=new Be;return g==null?null:(g.a=0,g.xb=Kx,De("Predictor","VP8LPredictors"),De("Predictor","VP8LPredictors_C"),De("PredictorAdd","VP8LPredictorsAdd"),De("PredictorAdd","VP8LPredictorsAdd_C"),Hn=te,Ah=ve,lh=Ae,JA=ee,ZA=re,tl=he,vc=Fe,v.VP8LMapColor32b=go,v.VP8LMapColor8b=ah,g)}function _i(g,w,P,Q,z){var Y=1,tt=[g],it=[w],ct=Q.m,ft=Q.s,Bt=null,Pt=0;t:for(;;){if(P)for(;Y&&q(ct,1);){var gt=tt,Et=it,Ft=Q,Ht=1,Ut=Ft.m,jt=Ft.gc[Ft.ab],Gt=q(Ut,2);if(Ft.Oc&1<<Gt)Y=0;else{switch(Ft.Oc|=1<<Gt,jt.hc=Gt,jt.Ea=gt[0],jt.nc=Et[0],jt.K=[null],++Ft.ab,t(4>=Ft.ab),Gt){case 0:case 1:jt.b=q(Ut,3)+2,Ht=_i(at(jt.Ea,jt.b),at(jt.nc,jt.b),0,Ft,jt.K),jt.K=jt.K[0];break;case 3:var Zt,Xt=q(Ut,8)+1,Te=16<Xt?0:4<Xt?1:2<Xt?2:3;if(gt[0]=at(jt.Ea,Te),jt.b=Te,Zt=Ht=_i(Xt,1,0,Ft,jt.K)){var ye,nr=Xt,Ce=jt,br=1<<(8>>Ce.b),hi=s(br);if(hi==null)Zt=0;else{var ir=Ce.K[0],Ee=Ce.w;for(hi[0]=Ce.K[0][0],ye=1;ye<1*nr;++ye)hi[ye]=Ct(ir[Ee+ye],hi[ye-1]);for(;ye<4*br;++ye)hi[ye]=0;Ce.K[0]=null,Ce.K[0]=hi,Zt=1}}Ht=Zt;break;case 2:break;default:t(0)}Y=Ht}}if(tt=tt[0],it=it[0],Y&&q(ct,1)&&!(Y=1<=(Pt=q(ct,4))&&11>=Pt)){Q.a=3;break t}var oe;if(oe=Y)e:{var $n,Ze,vr,un=Q,Vi=tt,ys=it,Tn=Pt,Zi=P,ws=un.m,fi=un.s,Cr=[null],Qr=1,Fn=0,Or=UP[Tn];r:for(;;){if(Zi&&q(ws,1)){var $i=q(ws,3)+2,Oa=at(Vi,$i),jn=at(ys,$i),Ds=Oa*jn;if(!_i(Oa,jn,0,un,Cr))break r;for(Cr=Cr[0],fi.xc=$i,$n=0;$n<Ds;++$n){var Yr=Cr[$n]>>8&65535;Cr[$n]=Yr,Yr>=Qr&&(Qr=Yr+1)}}if(ws.h)break r;for(Ze=0;5>Ze;++Ze){var gi=jx[Ze];!Ze&&0<Tn&&(gi+=1<<Tn),Fn<gi&&(Fn=gi)}var ia=a(Qr*Or,F),vs=Qr,sa=a(vs,Z);if(sa==null)var aa=null;else t(65536>=vs),aa=sa;var Ms=s(Fn);if(aa==null||Ms==null||ia==null){un.a=1;break r}var oa=ia;for($n=vr=0;$n<Qr;++$n){var nn=aa[$n],Aa=nn.G,Ha=nn.H,_c=0,nA=1,ji=0;for(Ze=0;5>Ze;++Ze){gi=jx[Ze],Aa[Ze]=oa,Ha[Ze]=vr,!Ze&&0<Tn&&(gi+=1<<Tn);i:{var Wg,Zb=gi,Yg=un,fh=Ms,tN=oa,eN=vr,ty=0,il=Yg.m,rN=q(il,1);if(i(fh,0,0,Zb),rN){var nN=q(il,1)+1,iN=q(il,1),t_=q(il,iN==0?1:8);fh[t_]=1,nN==2&&(fh[t_=q(il,8)]=1);var Xg=1}else{var e_=s(19),r_=q(il,4)+4;if(19<r_){Yg.a=3;var Jg=0;break i}for(Wg=0;Wg<r_;++Wg)e_[FP[Wg]]=q(il,3);var ey=void 0,gh=void 0,n_=Yg,sN=e_,Zg=Zb,i_=fh,ry=0,sl=n_.m,s_=8,a_=a(128,F);n:for(;_(a_,0,7,sN,19);){if(q(sl,1)){var aN=2+2*q(sl,3);if((ey=2+q(sl,aN))>Zg)break n}else ey=Zg;for(gh=0;gh<Zg&&ey--;){et(sl);var o_=a_[0+(127&V(sl))];At(sl,sl.u+o_.g);var Uu=o_.value;if(16>Uu)i_[gh++]=Uu,Uu!=0&&(s_=Uu);else{var oN=Uu==16,A_=Uu-16,AN=IP[A_],l_=q(sl,kP[A_])+AN;if(gh+l_>Zg)break n;for(var lN=oN?s_:0;0<l_--;)i_[gh++]=lN}}ry=1;break n}ry||(n_.a=3),Xg=ry}(Xg=Xg&&!il.h)&&(ty=_(tN,eN,8,fh,Zb)),Xg&&ty!=0?Jg=ty:(Yg.a=3,Jg=0)}if(Jg==0)break r;if(nA&&TP[Ze]==1&&(nA=oa[vr].g==0),_c+=oa[vr].g,vr+=Jg,3>=Ze){var ph,ny=Ms[0];for(ph=1;ph<gi;++ph)Ms[ph]>ny&&(ny=Ms[ph]);ji+=ny}}if(nn.nd=nA,nn.Qb=0,nA&&(nn.qb=(Aa[3][Ha[3]+0].value<<24|Aa[1][Ha[1]+0].value<<16|Aa[2][Ha[2]+0].value)>>>0,_c==0&&256>Aa[0][Ha[0]+0].value&&(nn.Qb=1,nn.qb+=Aa[0][Ha[0]+0].value<<8)),nn.jc=!nn.Qb&&6>ji,nn.jc){var tp,iA=nn;for(tp=0;tp<wc;++tp){var al=tp,ol=iA.pd[al],ep=iA.G[0][iA.H[0]+al];256<=ep.value?(ol.g=ep.g+256,ol.value=ep.value):(ol.g=0,ol.value=0,al>>=$r(ep,8,ol),al>>=$r(iA.G[1][iA.H[1]+al],16,ol),al>>=$r(iA.G[2][iA.H[2]+al],0,ol),$r(iA.G[3][iA.H[3]+al],24,ol))}}}fi.vc=Cr,fi.Wb=Qr,fi.Ya=aa,fi.yc=ia,oe=1;break e}oe=0}if(!(Y=oe)){Q.a=3;break t}if(0<Pt){if(ft.ua=1<<Pt,!$(ft.Wa,Pt)){Q.a=1,Y=0;break t}}else ft.ua=0;var iy=Q,c_=tt,cN=it,sy=iy.s,ay=sy.xc;if(iy.c=c_,iy.i=cN,sy.md=at(c_,ay),sy.wc=ay==0?-1:(1<<ay)-1,P){Q.xb=HP;break t}if((Bt=s(tt*it))==null){Q.a=1,Y=0;break t}Y=(Y=Qi(Q,Bt,0,tt,it,it,null))&&!ct.h;break t}return Y?(z!=null?z[0]=Bt:(t(Bt==null),t(P)),Q.$=0,P||vi(ft)):vi(ft),Y}function Bi(g,w){var P=g.c*g.i,Q=P+w+16*w;return t(g.c<=w),g.V=s(Q),g.V==null?(g.Ta=null,g.Ua=0,g.a=1,0):(g.Ta=g.V,g.Ua=g.Ba+P+w,1)}function Cs(g,w){var P=g.C,Q=w-P,z=g.V,Y=g.Ba+g.c*P;for(t(w<=g.l.o);0<Q;){var tt=16<Q?16:Q,it=g.l.ma,ct=g.l.width,ft=ct*tt,Bt=it.ca,Pt=it.tb+ct*P,gt=g.Ta,Et=g.Ua;ci(g,tt,z,Y),Dx(gt,Et,Bt,Pt,ft),Ri(it,P,P+tt,Bt,Pt,ct),Q-=tt,z+=tt*g.c,P+=tt}t(P==w),g.C=g.Ma=w}function Es(){this.ub=this.yd=this.td=this.Rb=0}function Ss(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Js(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function ks(){this.Yb=(function(){var g=[];return(function w(P,Q,z){for(var Y=z[Q],tt=0;tt<Y&&(P.push(z.length>Q+1?[]:0),!(z.length<Q+1));tt++)w(P[tt],Q+1,z)})(g,0,[3,11]),g})()}function ui(){this.jb=s(3),this.Wc=o([4,8],ks),this.Xc=o([4,17],ks)}function Is(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function yn(){this.ld=this.La=this.dd=this.tc=0}function Ci(){this.Na=this.la=0}function Ts(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function ri(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Oi(){this.uc=this.M=this.Nb=0,this.wa=Array(new yn),this.Y=0,this.ya=Array(new ri),this.aa=0,this.l=new Zs}function ao(){this.y=s(16),this.f=s(8),this.ea=s(8)}function oo(){this.cb=this.a=0,this.sc="",this.m=new L,this.Od=new Es,this.Kc=new Ss,this.ed=new Is,this.Qa=new Js,this.Ic=this.$c=this.Aa=0,this.D=new Oi,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=a(8,L),this.ia=0,this.pb=a(4,Ts),this.Pa=new ui,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new ao),this.Hd=0,this.rb=Array(new Ci),this.sb=0,this.wa=Array(new yn),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new ri),this.L=this.aa=0,this.gd=o([4,2],yn),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Zs(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function wn(){var g=new oo;return g!=null&&(g.a=0,g.sc="OK",g.cb=0,g.Xb=0,dh||(dh=Hi)),g}function ur(g,w,P){return g.a==0&&(g.a=w,g.sc=P,g.cb=0),0}function Fs(g,w,P){return 3<=P&&g[w+0]==157&&g[w+1]==1&&g[w+2]==42}function Ls(g,w){if(g==null)return 0;if(g.a=0,g.sc="OK",w==null)return ur(g,2,"null VP8Io passed to VP8GetHeaders()");var P=w.data,Q=w.w,z=w.ha;if(4>z)return ur(g,7,"Truncated header.");var Y=P[Q+0]|P[Q+1]<<8|P[Q+2]<<16,tt=g.Od;if(tt.Rb=!(1&Y),tt.td=Y>>1&7,tt.yd=Y>>4&1,tt.ub=Y>>5,3<tt.td)return ur(g,3,"Incorrect keyframe parameters.");if(!tt.yd)return ur(g,4,"Frame not displayable.");Q+=3,z-=3;var it=g.Kc;if(tt.Rb){if(7>z)return ur(g,7,"cannot parse picture header");if(!Fs(P,Q,z))return ur(g,3,"Bad code word");it.c=16383&(P[Q+4]<<8|P[Q+3]),it.Td=P[Q+4]>>6,it.i=16383&(P[Q+6]<<8|P[Q+5]),it.Ud=P[Q+6]>>6,Q+=7,z-=7,g.za=it.c+15>>4,g.Ub=it.i+15>>4,w.width=it.c,w.height=it.i,w.Da=0,w.j=0,w.v=0,w.va=w.width,w.o=w.height,w.da=0,w.ib=w.width,w.hb=w.height,w.U=w.width,w.T=w.height,i((Y=g.Pa).jb,0,255,Y.jb.length),t((Y=g.Qa)!=null),Y.Cb=0,Y.Bb=0,Y.Fb=1,i(Y.Zb,0,0,Y.Zb.length),i(Y.Lb,0,0,Y.Lb)}if(tt.ub>z)return ur(g,7,"bad partition length");ut(Y=g.m,P,Q,tt.ub),Q+=tt.ub,z-=tt.ub,tt.Rb&&(it.Ld=dt(Y),it.Kd=dt(Y)),it=g.Qa;var ct,ft=g.Pa;if(t(Y!=null),t(it!=null),it.Cb=dt(Y),it.Cb){if(it.Bb=dt(Y),dt(Y)){for(it.Fb=dt(Y),ct=0;4>ct;++ct)it.Zb[ct]=dt(Y)?j(Y,7):0;for(ct=0;4>ct;++ct)it.Lb[ct]=dt(Y)?j(Y,6):0}if(it.Bb)for(ct=0;3>ct;++ct)ft.jb[ct]=dt(Y)?nt(Y,8):255}else it.Bb=0;if(Y.Ka)return ur(g,3,"cannot parse segment header");if((it=g.ed).zd=dt(Y),it.Tb=nt(Y,6),it.wb=nt(Y,3),it.Pc=dt(Y),it.Pc&&dt(Y)){for(ft=0;4>ft;++ft)dt(Y)&&(it.vd[ft]=j(Y,6));for(ft=0;4>ft;++ft)dt(Y)&&(it.od[ft]=j(Y,6))}if(g.L=it.Tb==0?0:it.zd?1:2,Y.Ka)return ur(g,3,"cannot parse filter header");var Bt=z;if(z=ct=Q,Q=ct+Bt,it=Bt,g.Xb=(1<<nt(g.m,2))-1,Bt<3*(ft=g.Xb))P=7;else{for(ct+=3*ft,it-=3*ft,Bt=0;Bt<ft;++Bt){var Pt=P[z+0]|P[z+1]<<8|P[z+2]<<16;Pt>it&&(Pt=it),ut(g.Jc[+Bt],P,ct,Pt),ct+=Pt,it-=Pt,z+=3}ut(g.Jc[+ft],P,ct,it),P=ct<Q?0:5}if(P!=0)return ur(g,P,"cannot parse partitions");for(P=nt(ct=g.m,7),z=dt(ct)?j(ct,4):0,Q=dt(ct)?j(ct,4):0,it=dt(ct)?j(ct,4):0,ft=dt(ct)?j(ct,4):0,ct=dt(ct)?j(ct,4):0,Bt=g.Qa,Pt=0;4>Pt;++Pt){if(Bt.Cb){var gt=Bt.Zb[Pt];Bt.Fb||(gt+=P)}else{if(0<Pt){g.pb[Pt]=g.pb[0];continue}gt=P}var Et=g.pb[Pt];Et.Sc[0]=Yb[In(gt+z,127)],Et.Sc[1]=Xb[In(gt+0,127)],Et.Eb[0]=2*Yb[In(gt+Q,127)],Et.Eb[1]=101581*Xb[In(gt+it,127)]>>16,8>Et.Eb[1]&&(Et.Eb[1]=8),Et.Qc[0]=Yb[In(gt+ft,117)],Et.Qc[1]=Xb[In(gt+ct,127)],Et.lc=gt+ct}if(!tt.Rb)return ur(g,4,"Not a key frame.");for(dt(Y),tt=g.Pa,P=0;4>P;++P){for(z=0;8>z;++z)for(Q=0;3>Q;++Q)for(it=0;11>it;++it)ft=vt(Y,QP[P][z][Q][it])?nt(Y,8):MP[P][z][Q][it],tt.Wc[P][z].Yb[Q][it]=ft;for(z=0;17>z;++z)tt.Xc[P][z]=tt.Wc[P][OP[z]]}return g.kc=dt(Y),g.kc&&(g.Bd=nt(Y,8)),g.cb=1}function Hi(g,w,P,Q,z,Y,tt){var it=w[z].Yb[P];for(P=0;16>z;++z){if(!vt(g,it[P+0]))return z;for(;!vt(g,it[P+1]);)if(it=w[++z].Yb[0],P=0,z==16)return 16;var ct=w[z+1].Yb;if(vt(g,it[P+2])){var ft=g,Bt=0;if(vt(ft,(gt=it)[(Pt=P)+3]))if(vt(ft,gt[Pt+6])){for(it=0,Pt=2*(Bt=vt(ft,gt[Pt+8]))+(gt=vt(ft,gt[Pt+9+Bt])),Bt=0,gt=NP[Pt];gt[it];++it)Bt+=Bt+vt(ft,gt[it]);Bt+=3+(8<<Pt)}else vt(ft,gt[Pt+7])?(Bt=7+2*vt(ft,165),Bt+=vt(ft,145)):Bt=5+vt(ft,159);else Bt=vt(ft,gt[Pt+4])?3+vt(ft,gt[Pt+5]):2;it=ct[2]}else Bt=1,it=ct[1];ct=tt+DP[z],0>(ft=g).b&&st(ft);var Pt,gt=ft.b,Et=(Pt=ft.Ca>>1)-(ft.I>>gt)>>31;--ft.b,ft.Ca+=Et,ft.Ca|=1,ft.I-=(Pt+1&Et)<<gt,Y[ct]=((Bt^Et)-Et)*Q[(0<z)+0]}return 16}function lr(g){var w=g.rb[g.sb-1];w.la=0,w.Na=0,i(g.zc,0,0,g.zc.length),g.ja=0}function On(g,w,P,Q,z){z=g[w+P+32*Q]+(z>>3),g[w+P+32*Q]=-256&z?0>z?0:255:z}function kn(g,w,P,Q,z,Y){On(g,w,0,P,Q+z),On(g,w,1,P,Q+Y),On(g,w,2,P,Q-Y),On(g,w,3,P,Q-z)}function Rr(g){return(20091*g>>16)+g}function Ao(g,w,P,Q){var z,Y=0,tt=s(16);for(z=0;4>z;++z){var it=g[w+0]+g[w+8],ct=g[w+0]-g[w+8],ft=(35468*g[w+4]>>16)-Rr(g[w+12]),Bt=Rr(g[w+4])+(35468*g[w+12]>>16);tt[Y+0]=it+Bt,tt[Y+1]=ct+ft,tt[Y+2]=ct-ft,tt[Y+3]=it-Bt,Y+=4,w++}for(z=Y=0;4>z;++z)it=(g=tt[Y+0]+4)+tt[Y+8],ct=g-tt[Y+8],ft=(35468*tt[Y+4]>>16)-Rr(tt[Y+12]),On(P,Q,0,0,it+(Bt=Rr(tt[Y+4])+(35468*tt[Y+12]>>16))),On(P,Q,1,0,ct+ft),On(P,Q,2,0,ct-ft),On(P,Q,3,0,it-Bt),Y++,Q+=32}function lo(g,w,P,Q){var z=g[w+0]+4,Y=35468*g[w+4]>>16,tt=Rr(g[w+4]),it=35468*g[w+1]>>16;kn(P,Q,0,z+tt,g=Rr(g[w+1]),it),kn(P,Q,1,z+Y,g,it),kn(P,Q,2,z-Y,g,it),kn(P,Q,3,z-tt,g,it)}function VA(g,w,P,Q,z){Ao(g,w,P,Q),z&&Ao(g,w+16,P,Q+4)}function hc(g,w,P,Q){xc(g,w+0,P,Q,1),xc(g,w+32,P,Q+128,1)}function Us(g,w,P,Q){var z;for(g=g[w+0]+4,z=0;4>z;++z)for(w=0;4>w;++w)On(P,Q,w,z,g)}function J(g,w,P,Q){g[w+0]&&Pr(g,w+0,P,Q),g[w+16]&&Pr(g,w+16,P,Q+4),g[w+32]&&Pr(g,w+32,P,Q+128),g[w+48]&&Pr(g,w+48,P,Q+128+4)}function lt(g,w,P,Q){var z,Y=s(16);for(z=0;4>z;++z){var tt=g[w+0+z]+g[w+12+z],it=g[w+4+z]+g[w+8+z],ct=g[w+4+z]-g[w+8+z],ft=g[w+0+z]-g[w+12+z];Y[0+z]=tt+it,Y[8+z]=tt-it,Y[4+z]=ft+ct,Y[12+z]=ft-ct}for(z=0;4>z;++z)tt=(g=Y[0+4*z]+3)+Y[3+4*z],it=Y[1+4*z]+Y[2+4*z],ct=Y[1+4*z]-Y[2+4*z],ft=g-Y[3+4*z],P[Q+0]=tt+it>>3,P[Q+16]=ft+ct>>3,P[Q+32]=tt-it>>3,P[Q+48]=ft-ct>>3,Q+=64}function mt(g,w,P){var Q,z=w-32,Y=na,tt=255-g[z-1];for(Q=0;Q<P;++Q){var it,ct=Y,ft=tt+g[w-1];for(it=0;it<P;++it)g[w+it]=ct[ft+g[z+it]];w+=32}}function Dt(g,w){mt(g,w,4)}function Jt(g,w){mt(g,w,8)}function ce(g,w){mt(g,w,16)}function qe(g,w){var P;for(P=0;16>P;++P)n(g,w+32*P,g,w-32,16)}function Kr(g,w){var P;for(P=16;0<P;--P)i(g,w,g[w-1],16),w+=32}function Ir(g,w,P){var Q;for(Q=0;16>Q;++Q)i(w,P+32*Q,g,16)}function Zr(g,w){var P,Q=16;for(P=0;16>P;++P)Q+=g[w-1+32*P]+g[w+P-32];Ir(Q>>5,g,w)}function Xi(g,w){var P,Q=8;for(P=0;16>P;++P)Q+=g[w-1+32*P];Ir(Q>>4,g,w)}function Ko(g,w){var P,Q=8;for(P=0;16>P;++P)Q+=g[w+P-32];Ir(Q>>4,g,w)}function Ps(g,w){Ir(128,g,w)}function $e(g,w,P){return g+2*w+P+2>>2}function fc(g,w){var P,Q=w-32;for(Q=new Uint8Array([$e(g[Q-1],g[Q+0],g[Q+1]),$e(g[Q+0],g[Q+1],g[Q+2]),$e(g[Q+1],g[Q+2],g[Q+3]),$e(g[Q+2],g[Q+3],g[Q+4])]),P=0;4>P;++P)n(g,w+32*P,Q,0,Q.length)}function $A(g,w){var P=g[w-1],Q=g[w-1+32],z=g[w-1+64],Y=g[w-1+96];_t(g,w+0,16843009*$e(g[w-1-32],P,Q)),_t(g,w+32,16843009*$e(P,Q,z)),_t(g,w+64,16843009*$e(Q,z,Y)),_t(g,w+96,16843009*$e(z,Y,Y))}function ku(g,w){var P,Q=4;for(P=0;4>P;++P)Q+=g[w+P-32]+g[w-1+32*P];for(Q>>=3,P=0;4>P;++P)i(g,w+32*P,Q,4)}function zo(g,w){var P=g[w-1+0],Q=g[w-1+32],z=g[w-1+64],Y=g[w-1-32],tt=g[w+0-32],it=g[w+1-32],ct=g[w+2-32],ft=g[w+3-32];g[w+0+96]=$e(Q,z,g[w-1+96]),g[w+1+96]=g[w+0+64]=$e(P,Q,z),g[w+2+96]=g[w+1+64]=g[w+0+32]=$e(Y,P,Q),g[w+3+96]=g[w+2+64]=g[w+1+32]=g[w+0+0]=$e(tt,Y,P),g[w+3+64]=g[w+2+32]=g[w+1+0]=$e(it,tt,Y),g[w+3+32]=g[w+2+0]=$e(ct,it,tt),g[w+3+0]=$e(ft,ct,it)}function ps(g,w){var P=g[w+1-32],Q=g[w+2-32],z=g[w+3-32],Y=g[w+4-32],tt=g[w+5-32],it=g[w+6-32],ct=g[w+7-32];g[w+0+0]=$e(g[w+0-32],P,Q),g[w+1+0]=g[w+0+32]=$e(P,Q,z),g[w+2+0]=g[w+1+32]=g[w+0+64]=$e(Q,z,Y),g[w+3+0]=g[w+2+32]=g[w+1+64]=g[w+0+96]=$e(z,Y,tt),g[w+3+32]=g[w+2+64]=g[w+1+96]=$e(Y,tt,it),g[w+3+64]=g[w+2+96]=$e(tt,it,ct),g[w+3+96]=$e(it,ct,ct)}function wa(g,w){var P=g[w-1+0],Q=g[w-1+32],z=g[w-1+64],Y=g[w-1-32],tt=g[w+0-32],it=g[w+1-32],ct=g[w+2-32],ft=g[w+3-32];g[w+0+0]=g[w+1+64]=Y+tt+1>>1,g[w+1+0]=g[w+2+64]=tt+it+1>>1,g[w+2+0]=g[w+3+64]=it+ct+1>>1,g[w+3+0]=ct+ft+1>>1,g[w+0+96]=$e(z,Q,P),g[w+0+64]=$e(Q,P,Y),g[w+0+32]=g[w+1+96]=$e(P,Y,tt),g[w+1+32]=g[w+2+96]=$e(Y,tt,it),g[w+2+32]=g[w+3+96]=$e(tt,it,ct),g[w+3+32]=$e(it,ct,ft)}function gc(g,w){var P=g[w+0-32],Q=g[w+1-32],z=g[w+2-32],Y=g[w+3-32],tt=g[w+4-32],it=g[w+5-32],ct=g[w+6-32],ft=g[w+7-32];g[w+0+0]=P+Q+1>>1,g[w+1+0]=g[w+0+64]=Q+z+1>>1,g[w+2+0]=g[w+1+64]=z+Y+1>>1,g[w+3+0]=g[w+2+64]=Y+tt+1>>1,g[w+0+32]=$e(P,Q,z),g[w+1+32]=g[w+0+96]=$e(Q,z,Y),g[w+2+32]=g[w+1+96]=$e(z,Y,tt),g[w+3+32]=g[w+2+96]=$e(Y,tt,it),g[w+3+64]=$e(tt,it,ct),g[w+3+96]=$e(it,ct,ft)}function tn(g,w){var P=g[w-1+0],Q=g[w-1+32],z=g[w-1+64],Y=g[w-1+96];g[w+0+0]=P+Q+1>>1,g[w+2+0]=g[w+0+32]=Q+z+1>>1,g[w+2+32]=g[w+0+64]=z+Y+1>>1,g[w+1+0]=$e(P,Q,z),g[w+3+0]=g[w+1+32]=$e(Q,z,Y),g[w+3+32]=g[w+1+64]=$e(z,Y,Y),g[w+3+64]=g[w+2+64]=g[w+0+96]=g[w+1+96]=g[w+2+96]=g[w+3+96]=Y}function jA(g,w){var P=g[w-1+0],Q=g[w-1+32],z=g[w-1+64],Y=g[w-1+96],tt=g[w-1-32],it=g[w+0-32],ct=g[w+1-32],ft=g[w+2-32];g[w+0+0]=g[w+2+32]=P+tt+1>>1,g[w+0+32]=g[w+2+64]=Q+P+1>>1,g[w+0+64]=g[w+2+96]=z+Q+1>>1,g[w+0+96]=Y+z+1>>1,g[w+3+0]=$e(it,ct,ft),g[w+2+0]=$e(tt,it,ct),g[w+1+0]=g[w+3+32]=$e(P,tt,it),g[w+1+32]=g[w+3+64]=$e(Q,P,tt),g[w+1+64]=g[w+3+96]=$e(z,Q,P),g[w+1+96]=$e(Y,z,Q)}function pc(g,w){var P;for(P=0;8>P;++P)n(g,w+32*P,g,w-32,8)}function co(g,w){var P;for(P=0;8>P;++P)i(g,w,g[w-1],8),w+=32}function qo(g,w,P){var Q;for(Q=0;8>Q;++Q)i(w,P+32*Q,g,8)}function Wo(g,w){var P,Q=8;for(P=0;8>P;++P)Q+=g[w+P-32]+g[w-1+32*P];qo(Q>>4,g,w)}function GA(g,w){var P,Q=4;for(P=0;8>P;++P)Q+=g[w+P-32];qo(Q>>3,g,w)}function Ns(g,w){var P,Q=4;for(P=0;8>P;++P)Q+=g[w-1+32*P];qo(Q>>3,g,w)}function KA(g,w){qo(128,g,w)}function Yo(g,w,P){var Q=g[w-P],z=g[w+0],Y=3*(z-Q)+Gb[1020+g[w-2*P]-g[w+P]],tt=Og[112+(Y+4>>3)];g[w-P]=na[255+Q+Og[112+(Y+3>>3)]],g[w+0]=na[255+z-tt]}function ta(g,w,P,Q){var z=g[w+0],Y=g[w+P];return Ca[255+g[w-2*P]-g[w-P]]>Q||Ca[255+Y-z]>Q}function zA(g,w,P,Q){return 4*Ca[255+g[w-P]-g[w+0]]+Ca[255+g[w-2*P]-g[w+P]]<=Q}function uo(g,w,P,Q,z){var Y=g[w-3*P],tt=g[w-2*P],it=g[w-P],ct=g[w+0],ft=g[w+P],Bt=g[w+2*P],Pt=g[w+3*P];return 4*Ca[255+it-ct]+Ca[255+tt-ft]>Q?0:Ca[255+g[w-4*P]-Y]<=z&&Ca[255+Y-tt]<=z&&Ca[255+tt-it]<=z&&Ca[255+Pt-Bt]<=z&&Ca[255+Bt-ft]<=z&&Ca[255+ft-ct]<=z}function ho(g,w,P,Q){var z=2*Q+1;for(Q=0;16>Q;++Q)zA(g,w+Q,P,z)&&Yo(g,w+Q,P)}function fo(g,w,P,Q){var z=2*Q+1;for(Q=0;16>Q;++Q)zA(g,w+Q*P,1,z)&&Yo(g,w+Q*P,1)}function Xo(g,w,P,Q){var z;for(z=3;0<z;--z)ho(g,w+=4*P,P,Q)}function Iu(g,w,P,Q){var z;for(z=3;0<z;--z)fo(g,w+=4,P,Q)}function va(g,w,P,Q,z,Y,tt,it){for(Y=2*Y+1;0<z--;){if(uo(g,w,P,Y,tt))if(ta(g,w,P,it))Yo(g,w,P);else{var ct=g,ft=w,Bt=P,Pt=ct[ft-2*Bt],gt=ct[ft-Bt],Et=ct[ft+0],Ft=ct[ft+Bt],Ht=ct[ft+2*Bt],Ut=27*(Gt=Gb[1020+3*(Et-gt)+Gb[1020+Pt-Ft]])+63>>7,jt=18*Gt+63>>7,Gt=9*Gt+63>>7;ct[ft-3*Bt]=na[255+ct[ft-3*Bt]+Gt],ct[ft-2*Bt]=na[255+Pt+jt],ct[ft-Bt]=na[255+gt+Ut],ct[ft+0]=na[255+Et-Ut],ct[ft+Bt]=na[255+Ft-jt],ct[ft+2*Bt]=na[255+Ht-Gt]}w+=Q}}function ms(g,w,P,Q,z,Y,tt,it){for(Y=2*Y+1;0<z--;){if(uo(g,w,P,Y,tt))if(ta(g,w,P,it))Yo(g,w,P);else{var ct=g,ft=w,Bt=P,Pt=ct[ft-Bt],gt=ct[ft+0],Et=ct[ft+Bt],Ft=Og[112+(4+(Ht=3*(gt-Pt))>>3)],Ht=Og[112+(Ht+3>>3)],Ut=Ft+1>>1;ct[ft-2*Bt]=na[255+ct[ft-2*Bt]+Ut],ct[ft-Bt]=na[255+Pt+Ht],ct[ft+0]=na[255+gt-Ft],ct[ft+Bt]=na[255+Et-Ut]}w+=Q}}function mc(g,w,P,Q,z,Y){va(g,w,P,1,16,Q,z,Y)}function bc(g,w,P,Q,z,Y){va(g,w,1,P,16,Q,z,Y)}function Ra(g,w,P,Q,z,Y){var tt;for(tt=3;0<tt;--tt)ms(g,w+=4*P,P,1,16,Q,z,Y)}function qA(g,w,P,Q,z,Y){var tt;for(tt=3;0<tt;--tt)ms(g,w+=4,1,P,16,Q,z,Y)}function S(g,w,P,Q,z,Y,tt,it){va(g,w,z,1,8,Y,tt,it),va(P,Q,z,1,8,Y,tt,it)}function K(g,w,P,Q,z,Y,tt,it){va(g,w,1,z,8,Y,tt,it),va(P,Q,1,z,8,Y,tt,it)}function ht(g,w,P,Q,z,Y,tt,it){ms(g,w+4*z,z,1,8,Y,tt,it),ms(P,Q+4*z,z,1,8,Y,tt,it)}function wt(g,w,P,Q,z,Y,tt,it){ms(g,w+4,1,z,8,Y,tt,it),ms(P,Q+4,1,z,8,Y,tt,it)}function St(){this.ba=new Se,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new rr,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function $t(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Yt(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function me(){this.ua=0,this.Wa=new rt,this.vb=new rt,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new Z,this.yc=new F}function Be(){this.xb=this.a=0,this.l=new Zs,this.ca=new Se,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new O,this.Pb=0,this.wd=new O,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new me,this.ab=0,this.gc=a(4,Yt),this.Oc=0}function Me(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Zs,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Ie(g,w,P,Q,z,Y,tt){for(g=g==null?0:g[w+0],w=0;w<tt;++w)z[Y+w]=g+P[Q+w]&255,g=z[Y+w]}function wr(g,w,P,Q,z,Y,tt){var it;if(g==null)Ie(null,null,P,Q,z,Y,tt);else for(it=0;it<tt;++it)z[Y+it]=g[w+it]+P[Q+it]&255}function en(g,w,P,Q,z,Y,tt){if(g==null)Ie(null,null,P,Q,z,Y,tt);else{var it,ct=g[w+0],ft=ct,Bt=ct;for(it=0;it<tt;++it)ft=Bt+(ct=g[w+it])-ft,Bt=P[Q+it]+(-256&ft?0>ft?0:255:ft)&255,ft=ct,z[Y+it]=Bt}}function zr(g,w,P,Q){var z=w.width,Y=w.o;if(t(g!=null&&w!=null),0>P||0>=Q||P+Q>Y)return null;if(!g.Cc){if(g.ga==null){var tt;if(g.ga=new Me,(tt=g.ga==null)||(tt=w.width*w.o,t(g.Gb.length==0),g.Gb=s(tt),g.Uc=0,g.Gb==null?tt=0:(g.mb=g.Gb,g.nb=g.Uc,g.rc=null,tt=1),tt=!tt),!tt){tt=g.ga;var it=g.Fa,ct=g.P,ft=g.qc,Bt=g.mb,Pt=g.nb,gt=ct+1,Et=ft-1,Ft=tt.l;if(t(it!=null&&Bt!=null&&w!=null),nl[0]=null,nl[1]=Ie,nl[2]=wr,nl[3]=en,tt.ca=Bt,tt.tb=Pt,tt.c=w.width,tt.i=w.height,t(0<tt.c&&0<tt.i),1>=ft)w=0;else if(tt.$a=3&it[ct+0],tt.Z=it[ct+0]>>2&3,tt.Lc=it[ct+0]>>4&3,ct=it[ct+0]>>6&3,0>tt.$a||1<tt.$a||4<=tt.Z||1<tt.Lc||ct)w=0;else if(Ft.put=Ne,Ft.ac=Ai,Ft.bc=Ys,Ft.ma=tt,Ft.width=w.width,Ft.height=w.height,Ft.Da=w.Da,Ft.v=w.v,Ft.va=w.va,Ft.j=w.j,Ft.o=w.o,tt.$a)t:{t(tt.$a==1),w=xi();e:for(;;){if(w==null){w=0;break t}if(t(tt!=null),tt.mc=w,w.c=tt.c,w.i=tt.i,w.l=tt.l,w.l.ma=tt,w.l.width=tt.c,w.l.height=tt.i,w.a=0,G(w.m,it,gt,Et),!_i(tt.c,tt.i,1,w,null)||(w.ab==1&&w.gc[0].hc==3&&Mi(w.s)?(tt.ic=1,it=w.c*w.i,w.Ta=null,w.Ua=0,w.V=s(it),w.Ba=0,w.V==null?(w.a=1,w=0):w=1):(tt.ic=0,w=Bi(w,tt.c)),!w))break e;w=1;break t}tt.mc=null,w=0}else w=Et>=tt.c*tt.i;tt=!w}if(tt)return null;g.ga.Lc!=1?g.Ga=0:Q=Y-P}t(g.ga!=null),t(P+Q<=Y);t:{if(w=(it=g.ga).c,Y=it.l.o,it.$a==0){if(gt=g.rc,Et=g.Vc,Ft=g.Fa,ct=g.P+1+P*w,ft=g.mb,Bt=g.nb+P*w,t(ct<=g.P+g.qc),it.Z!=0)for(t(nl[it.Z]!=null),tt=0;tt<Q;++tt)nl[it.Z](gt,Et,Ft,ct,ft,Bt,w),gt=ft,Et=Bt,Bt+=w,ct+=w;else for(tt=0;tt<Q;++tt)n(ft,Bt,Ft,ct,w),gt=ft,Et=Bt,Bt+=w,ct+=w;g.rc=gt,g.Vc=Et}else{if(t(it.mc!=null),w=P+Q,t((tt=it.mc)!=null),t(w<=tt.i),tt.C>=w)w=1;else if(it.ic||Tt(),it.ic){it=tt.V,gt=tt.Ba,Et=tt.c;var Ht=tt.i,Ut=(Ft=1,ct=tt.$/Et,ft=tt.$%Et,Bt=tt.m,Pt=tt.s,tt.$),jt=Et*Ht,Gt=Et*w,Zt=Pt.wc,Xt=Ut<Gt?Qn(Pt,ft,ct):null;t(Ut<=jt),t(w<=Ht),t(Mi(Pt));e:for(;;){for(;!Bt.h&&Ut<Gt;){if(ft&Zt||(Xt=Qn(Pt,ft,ct)),t(Xt!=null),et(Bt),256>(Ht=Mr(Xt.G[0],Xt.H[0],Bt)))it[gt+Ut]=Ht,++Ut,++ft>=Et&&(ft=0,++ct<=w&&!(ct%16)&&wi(tt,ct));else{if(!(280>Ht)){Ft=0;break e}Ht=Ni(Ht-256,Bt);var Te,ye=Mr(Xt.G[4],Xt.H[4],Bt);if(et(Bt),!(Ut>=(ye=Di(Et,ye=Ni(ye,Bt)))&&jt-Ut>=Ht)){Ft=0;break e}for(Te=0;Te<Ht;++Te)it[gt+Ut+Te]=it[gt+Ut+Te-ye];for(Ut+=Ht,ft+=Ht;ft>=Et;)ft-=Et,++ct<=w&&!(ct%16)&&wi(tt,ct);Ut<Gt&&ft&Zt&&(Xt=Qn(Pt,ft,ct))}t(Bt.h==X(Bt))}wi(tt,ct>w?w:ct);break e}!Ft||Bt.h&&Ut<jt?(Ft=0,tt.a=Bt.h?5:3):tt.$=Ut,w=Ft}else w=Qi(tt,tt.V,tt.Ba,tt.c,tt.i,w,Cs);if(!w){Q=0;break t}}P+Q>=Y&&(g.Cc=1),Q=1}if(!Q)return null;if(g.Cc&&((Q=g.ga)!=null&&(Q.mc=null),g.ga=null,0<g.Ga))return alert("todo:WebPDequantizeLevels"),null}return g.nb+P*z}function p(g,w,P,Q,z,Y){for(;0<z--;){var tt,it=g,ct=w+(P?1:0),ft=g,Bt=w+(P?0:3);for(tt=0;tt<Q;++tt){var Pt=ft[Bt+4*tt];Pt!=255&&(Pt*=32897,it[ct+4*tt+0]=it[ct+4*tt+0]*Pt>>23,it[ct+4*tt+1]=it[ct+4*tt+1]*Pt>>23,it[ct+4*tt+2]=it[ct+4*tt+2]*Pt>>23)}w+=Y}}function M(g,w,P,Q,z){for(;0<Q--;){var Y;for(Y=0;Y<P;++Y){var tt=g[w+2*Y+0],it=15&(ft=g[w+2*Y+1]),ct=4369*it,ft=(240&ft|ft>>4)*ct>>16;g[w+2*Y+0]=(240&tt|tt>>4)*ct>>16&240|(15&tt|tt<<4)*ct>>16>>4&15,g[w+2*Y+1]=240&ft|it}w+=z}}function H(g,w,P,Q,z,Y,tt,it){var ct,ft,Bt=255;for(ft=0;ft<z;++ft){for(ct=0;ct<Q;++ct){var Pt=g[w+ct];Y[tt+4*ct]=Pt,Bt&=Pt}w+=P,tt+=it}return Bt!=255}function ot(g,w,P,Q,z){var Y;for(Y=0;Y<z;++Y)P[Q+Y]=g[w+Y]>>8}function Tt(){uh=p,Px=M,Nx=H,Dx=ot}function Nt(g,w,P){v[g]=function(Q,z,Y,tt,it,ct,ft,Bt,Pt,gt,Et,Ft,Ht,Ut,jt,Gt,Zt){var Xt,Te=Zt-1>>1,ye=it[ct+0]|ft[Bt+0]<<16,nr=Pt[gt+0]|Et[Ft+0]<<16;t(Q!=null);var Ce=3*ye+nr+131074>>2;for(w(Q[z+0],255&Ce,Ce>>16,Ht,Ut),Y!=null&&(Ce=3*nr+ye+131074>>2,w(Y[tt+0],255&Ce,Ce>>16,jt,Gt)),Xt=1;Xt<=Te;++Xt){var br=it[ct+Xt]|ft[Bt+Xt]<<16,hi=Pt[gt+Xt]|Et[Ft+Xt]<<16,ir=ye+br+nr+hi+524296,Ee=ir+2*(br+nr)>>3;Ce=Ee+ye>>1,ye=(ir=ir+2*(ye+hi)>>3)+br>>1,w(Q[z+2*Xt-1],255&Ce,Ce>>16,Ht,Ut+(2*Xt-1)*P),w(Q[z+2*Xt-0],255&ye,ye>>16,Ht,Ut+(2*Xt-0)*P),Y!=null&&(Ce=ir+nr>>1,ye=Ee+hi>>1,w(Y[tt+2*Xt-1],255&Ce,Ce>>16,jt,Gt+(2*Xt-1)*P),w(Y[tt+2*Xt+0],255&ye,ye>>16,jt,Gt+(2*Xt+0)*P)),ye=br,nr=hi}1&Zt||(Ce=3*ye+nr+131074>>2,w(Q[z+Zt-1],255&Ce,Ce>>16,Ht,Ut+(Zt-1)*P),Y!=null&&(Ce=3*nr+ye+131074>>2,w(Y[tt+Zt-1],255&Ce,Ce>>16,jt,Gt+(Zt-1)*P)))}}function ne(){Ea[Hg]=VP,Ea[Vg]=zx,Ea[Vx]=$P,Ea[$g]=qx,Ea[jg]=Wx,Ea[Kb]=Yx,Ea[$x]=jP,Ea[zb]=zx,Ea[qb]=qx,Ea[Gg]=Wx,Ea[Wb]=Yx}function je(g){return g&-16384?0>g?0:255:g>>GP}function qr(g,w){return je((19077*g>>8)+(26149*w>>8)-14234)}function dr(g,w,P){return je((19077*g>>8)-(6419*w>>8)-(13320*P>>8)+8708)}function rn(g,w){return je((19077*g>>8)+(33050*w>>8)-17685)}function Ei(g,w,P,Q,z){Q[z+0]=qr(g,P),Q[z+1]=dr(g,w,P),Q[z+2]=rn(g,w)}function bs(g,w,P,Q,z){Q[z+0]=rn(g,w),Q[z+1]=dr(g,w,P),Q[z+2]=qr(g,P)}function cn(g,w,P,Q,z){var Y=dr(g,w,P);w=Y<<3&224|rn(g,w)>>3,Q[z+0]=248&qr(g,P)|Y>>5,Q[z+1]=w}function Ji(g,w,P,Q,z){var Y=240&rn(g,w)|15;Q[z+0]=240&qr(g,P)|dr(g,w,P)>>4,Q[z+1]=Y}function xa(g,w,P,Q,z){Q[z+0]=255,Ei(g,w,P,Q,z+1)}function Jo(g,w,P,Q,z){bs(g,w,P,Q,z),Q[z+3]=255}function rh(g,w,P,Q,z){Ei(g,w,P,Q,z),Q[z+3]=255}function In(g,w){return 0>g?0:g>w?w:g}function Zo(g,w,P){v[g]=function(Q,z,Y,tt,it,ct,ft,Bt,Pt){for(var gt=Bt+(-2&Pt)*P;Bt!=gt;)w(Q[z+0],Y[tt+0],it[ct+0],ft,Bt),w(Q[z+1],Y[tt+0],it[ct+0],ft,Bt+P),z+=2,++tt,++ct,Bt+=2*P;1&Pt&&w(Q[z+0],Y[tt+0],it[ct+0],ft,Bt)}}function Tu(g,w,P){return P==0?g==0?w==0?6:5:w==0?4:0:P}function Mg(g,w,P,Q,z){switch(g>>>30){case 3:xc(w,P,Q,z,0);break;case 2:Ba(w,P,Q,z);break;case 1:Pr(w,P,Q,z)}}function _a(g,w){var P,Q,z=w.M,Y=w.Nb,tt=g.oc,it=g.pc+40,ct=g.oc,ft=g.pc+584,Bt=g.oc,Pt=g.pc+600;for(P=0;16>P;++P)tt[it+32*P-1]=129;for(P=0;8>P;++P)ct[ft+32*P-1]=129,Bt[Pt+32*P-1]=129;for(0<z?tt[it-1-32]=ct[ft-1-32]=Bt[Pt-1-32]=129:(i(tt,it-32-1,127,21),i(ct,ft-32-1,127,9),i(Bt,Pt-32-1,127,9)),Q=0;Q<g.za;++Q){var gt=w.ya[w.aa+Q];if(0<Q){for(P=-1;16>P;++P)n(tt,it+32*P-4,tt,it+32*P+12,4);for(P=-1;8>P;++P)n(ct,ft+32*P-4,ct,ft+32*P+4,4),n(Bt,Pt+32*P-4,Bt,Pt+32*P+4,4)}var Et=g.Gd,Ft=g.Hd+Q,Ht=gt.ad,Ut=gt.Hc;if(0<z&&(n(tt,it-32,Et[Ft].y,0,16),n(ct,ft-32,Et[Ft].f,0,8),n(Bt,Pt-32,Et[Ft].ea,0,8)),gt.Za){var jt=tt,Gt=it-32+16;for(0<z&&(Q>=g.za-1?i(jt,Gt,Et[Ft].y[15],4):n(jt,Gt,Et[Ft+1].y,0,4)),P=0;4>P;P++)jt[Gt+128+P]=jt[Gt+256+P]=jt[Gt+384+P]=jt[Gt+0+P];for(P=0;16>P;++P,Ut<<=2)jt=tt,Gt=it+Jx[P],Qa[gt.Ob[P]](jt,Gt),Mg(Ut,Ht,16*+P,jt,Gt)}else if(jt=Tu(Q,z,gt.Ob[0]),rl[jt](tt,it),Ut!=0)for(P=0;16>P;++P,Ut<<=2)Mg(Ut,Ht,16*+P,tt,it+Jx[P]);for(P=gt.Gc,jt=Tu(Q,z,gt.Dd),rA[jt](ct,ft),rA[jt](Bt,Pt),Ut=Ht,jt=ct,Gt=ft,255&(gt=0|P)&&(170&gt?mo(Ut,256,jt,Gt):Wr(Ut,256,jt,Gt)),gt=Bt,Ut=Pt,255&(P>>=8)&&(170&P?mo(Ht,320,gt,Ut):Wr(Ht,320,gt,Ut)),z<g.Ub-1&&(n(Et[Ft].y,0,tt,it+480,16),n(Et[Ft].f,0,ct,ft+224,8),n(Et[Ft].ea,0,Bt,Pt+224,8)),P=8*Y*g.B,Et=g.sa,Ft=g.ta+16*Q+16*Y*g.R,Ht=g.qa,gt=g.ra+8*Q+P,Ut=g.Ha,jt=g.Ia+8*Q+P,P=0;16>P;++P)n(Et,Ft+P*g.R,tt,it+32*P,16);for(P=0;8>P;++P)n(Ht,gt+P*g.B,ct,ft+32*P,8),n(Ut,jt+P*g.B,Bt,Pt+32*P,8)}}function yc(g,w,P,Q,z,Y,tt,it,ct){var ft=[0],Bt=[0],Pt=0,gt=ct!=null?ct.kd:0,Et=ct??new $t;if(g==null||12>P)return 7;Et.data=g,Et.w=w,Et.ha=P,w=[w],P=[P],Et.gb=[Et.gb];t:{var Ft=w,Ht=P,Ut=Et.gb;if(t(g!=null),t(Ht!=null),t(Ut!=null),Ut[0]=0,12<=Ht[0]&&!e(g,Ft[0],"RIFF")){if(e(g,Ft[0]+8,"WEBP")){Ut=3;break t}var jt=D(g,Ft[0]+4);if(12>jt||4294967286<jt){Ut=3;break t}if(gt&&jt>Ht[0]-8){Ut=7;break t}Ut[0]=jt,Ft[0]+=12,Ht[0]-=12}Ut=0}if(Ut!=0)return Ut;for(jt=0<Et.gb[0],P=P[0];;){t:{var Gt=g;Ht=w,Ut=P;var Zt=ft,Xt=Bt,Te=Ft=[0];if((Ce=Pt=[Pt])[0]=0,8>Ut[0])Ut=7;else{if(!e(Gt,Ht[0],"VP8X")){if(D(Gt,Ht[0]+4)!=10){Ut=3;break t}if(18>Ut[0]){Ut=7;break t}var ye=D(Gt,Ht[0]+8),nr=1+Ot(Gt,Ht[0]+12);if(2147483648<=nr*(Gt=1+Ot(Gt,Ht[0]+15))){Ut=3;break t}Te!=null&&(Te[0]=ye),Zt!=null&&(Zt[0]=nr),Xt!=null&&(Xt[0]=Gt),Ht[0]+=18,Ut[0]-=18,Ce[0]=1}Ut=0}}if(Pt=Pt[0],Ft=Ft[0],Ut!=0)return Ut;if(Ht=!!(2&Ft),!jt&&Pt)return 3;if(Y!=null&&(Y[0]=!!(16&Ft)),tt!=null&&(tt[0]=Ht),it!=null&&(it[0]=0),tt=ft[0],Ft=Bt[0],Pt&&Ht&&ct==null){Ut=0;break}if(4>P){Ut=7;break}if(jt&&Pt||!jt&&!Pt&&!e(g,w[0],"ALPH")){P=[P],Et.na=[Et.na],Et.P=[Et.P],Et.Sa=[Et.Sa];t:{ye=g,Ut=w,jt=P;var Ce=Et.gb;Zt=Et.na,Xt=Et.P,Te=Et.Sa,nr=22,t(ye!=null),t(jt!=null),Gt=Ut[0];var br=jt[0];for(t(Zt!=null),t(Te!=null),Zt[0]=null,Xt[0]=null,Te[0]=0;;){if(Ut[0]=Gt,jt[0]=br,8>br){Ut=7;break t}var hi=D(ye,Gt+4);if(4294967286<hi){Ut=3;break t}var ir=8+hi+1&-2;if(nr+=ir,0<Ce&&nr>Ce){Ut=3;break t}if(!e(ye,Gt,"VP8 ")||!e(ye,Gt,"VP8L")){Ut=0;break t}if(br[0]<ir){Ut=7;break t}e(ye,Gt,"ALPH")||(Zt[0]=ye,Xt[0]=Gt+8,Te[0]=hi),Gt+=ir,br-=ir}}if(P=P[0],Et.na=Et.na[0],Et.P=Et.P[0],Et.Sa=Et.Sa[0],Ut!=0)break}P=[P],Et.Ja=[Et.Ja],Et.xa=[Et.xa];t:if(Ce=g,Ut=w,jt=P,Zt=Et.gb[0],Xt=Et.Ja,Te=Et.xa,ye=Ut[0],Gt=!e(Ce,ye,"VP8 "),nr=!e(Ce,ye,"VP8L"),t(Ce!=null),t(jt!=null),t(Xt!=null),t(Te!=null),8>jt[0])Ut=7;else{if(Gt||nr){if(Ce=D(Ce,ye+4),12<=Zt&&Ce>Zt-12){Ut=3;break t}if(gt&&Ce>jt[0]-8){Ut=7;break t}Xt[0]=Ce,Ut[0]+=8,jt[0]-=8,Te[0]=nr}else Te[0]=5<=jt[0]&&Ce[ye+0]==47&&!(Ce[ye+4]>>5),Xt[0]=jt[0];Ut=0}if(P=P[0],Et.Ja=Et.Ja[0],Et.xa=Et.xa[0],w=w[0],Ut!=0)break;if(4294967286<Et.Ja)return 3;if(it==null||Ht||(it[0]=Et.xa?2:1),tt=[tt],Ft=[Ft],Et.xa){if(5>P){Ut=7;break}it=tt,gt=Ft,Ht=Y,g==null||5>P?g=0:5<=P&&g[w+0]==47&&!(g[w+4]>>5)?(jt=[0],Ce=[0],Zt=[0],G(Xt=new O,g,w,P),li(Xt,jt,Ce,Zt)?(it!=null&&(it[0]=jt[0]),gt!=null&&(gt[0]=Ce[0]),Ht!=null&&(Ht[0]=Zt[0]),g=1):g=0):g=0}else{if(10>P){Ut=7;break}it=Ft,g==null||10>P||!Fs(g,w+3,P-3)?g=0:(gt=g[w+0]|g[w+1]<<8|g[w+2]<<16,Ht=16383&(g[w+7]<<8|g[w+6]),g=16383&(g[w+9]<<8|g[w+8]),1&gt||3<(gt>>1&7)||!(gt>>4&1)||gt>>5>=Et.Ja||!Ht||!g?g=0:(tt&&(tt[0]=Ht),it&&(it[0]=g),g=1))}if(!g||(tt=tt[0],Ft=Ft[0],Pt&&(ft[0]!=tt||Bt[0]!=Ft)))return 3;ct!=null&&(ct[0]=Et,ct.offset=w-ct.w,t(4294967286>w-ct.w),t(ct.offset==ct.ha-P));break}return Ut==0||Ut==7&&Pt&&ct==null?(Y!=null&&(Y[0]|=Et.na!=null&&0<Et.na.length),Q!=null&&(Q[0]=tt),z!=null&&(z[0]=Ft),0):Ut}function nh(g,w,P){var Q=w.width,z=w.height,Y=0,tt=0,it=Q,ct=z;if(w.Da=g!=null&&0<g.Da,w.Da&&(it=g.cd,ct=g.bd,Y=g.v,tt=g.j,11>P||(Y&=-2,tt&=-2),0>Y||0>tt||0>=it||0>=ct||Y+it>Q||tt+ct>z))return 0;if(w.v=Y,w.j=tt,w.va=Y+it,w.o=tt+ct,w.U=it,w.T=ct,w.da=g!=null&&0<g.da,w.da){if(!W(it,ct,P=[g.ib],Y=[g.hb]))return 0;w.ib=P[0],w.hb=Y[0]}return w.ob=g!=null&&g.ob,w.Kb=g==null||!g.Sd,w.da&&(w.ob=w.ib<3*Q/4&&w.hb<3*z/4,w.Kb=0),1}function ih(g){if(g==null)return 2;if(11>g.S){var w=g.f.RGBA;w.fb+=(g.height-1)*w.A,w.A=-w.A}else w=g.f.kb,g=g.height,w.O+=(g-1)*w.fa,w.fa=-w.fa,w.N+=(g-1>>1)*w.Ab,w.Ab=-w.Ab,w.W+=(g-1>>1)*w.Db,w.Db=-w.Db,w.F!=null&&(w.J+=(g-1)*w.lb,w.lb=-w.lb);return 0}function WA(g,w,P,Q){if(Q==null||0>=g||0>=w)return 2;if(P!=null){if(P.Da){var z=P.cd,Y=P.bd,tt=-2&P.v,it=-2&P.j;if(0>tt||0>it||0>=z||0>=Y||tt+z>g||it+Y>w)return 2;g=z,w=Y}if(P.da){if(!W(g,w,z=[P.ib],Y=[P.hb]))return 2;g=z[0],w=Y[0]}}Q.width=g,Q.height=w;t:{var ct=Q.width,ft=Q.height;if(g=Q.S,0>=ct||0>=ft||!(g>=Hg&&13>g))g=2;else{if(0>=Q.Rd&&Q.sd==null){tt=Y=z=w=0;var Bt=(it=ct*Zx[g])*ft;if(11>g||(Y=(ft+1)/2*(w=(ct+1)/2),g==12&&(tt=(z=ct)*ft)),(ft=s(Bt+2*Y+tt))==null){g=1;break t}Q.sd=ft,11>g?((ct=Q.f.RGBA).eb=ft,ct.fb=0,ct.A=it,ct.size=Bt):((ct=Q.f.kb).y=ft,ct.O=0,ct.fa=it,ct.Fd=Bt,ct.f=ft,ct.N=0+Bt,ct.Ab=w,ct.Cd=Y,ct.ea=ft,ct.W=0+Bt+Y,ct.Db=w,ct.Ed=Y,g==12&&(ct.F=ft,ct.J=0+Bt+2*Y),ct.Tc=tt,ct.lb=z)}if(w=1,z=Q.S,Y=Q.width,tt=Q.height,z>=Hg&&13>z)if(11>z)g=Q.f.RGBA,w&=(it=Math.abs(g.A))*(tt-1)+Y<=g.size,w&=it>=Y*Zx[z],w&=g.eb!=null;else{g=Q.f.kb,it=(Y+1)/2,Bt=(tt+1)/2,ct=Math.abs(g.fa),ft=Math.abs(g.Ab);var Pt=Math.abs(g.Db),gt=Math.abs(g.lb),Et=gt*(tt-1)+Y;w&=ct*(tt-1)+Y<=g.Fd,w&=ft*(Bt-1)+it<=g.Cd,w=(w&=Pt*(Bt-1)+it<=g.Ed)&ct>=Y&ft>=it&Pt>=it,w&=g.y!=null,w&=g.f!=null,w&=g.ea!=null,z==12&&(w&=gt>=Y,w&=Et<=g.Tc,w&=g.F!=null)}else w=0;g=w?0:2}}return g!=0||P!=null&&P.fd&&(g=ih(Q)),g}var wc=64,ea=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],ra=24,YA=32,tA=8,XA=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];xt("Predictor0","PredictorAdd0"),v.Predictor0=function(){return 4278190080},v.Predictor1=function(g){return g},v.Predictor2=function(g,w,P){return w[P+0]},v.Predictor3=function(g,w,P){return w[P+1]},v.Predictor4=function(g,w,P){return w[P-1]},v.Predictor5=function(g,w,P){return kt(kt(g,w[P+1]),w[P+0])},v.Predictor6=function(g,w,P){return kt(g,w[P-1])},v.Predictor7=function(g,w,P){return kt(g,w[P+0])},v.Predictor8=function(g,w,P){return kt(w[P-1],w[P+0])},v.Predictor9=function(g,w,P){return kt(w[P+0],w[P+1])},v.Predictor10=function(g,w,P){return kt(kt(g,w[P-1]),kt(w[P+0],w[P+1]))},v.Predictor11=function(g,w,P){var Q=w[P+0];return 0>=Qt(Q>>24&255,g>>24&255,(w=w[P-1])>>24&255)+Qt(Q>>16&255,g>>16&255,w>>16&255)+Qt(Q>>8&255,g>>8&255,w>>8&255)+Qt(255&Q,255&g,255&w)?Q:g},v.Predictor12=function(g,w,P){var Q=w[P+0];return(Rt((g>>24&255)+(Q>>24&255)-((w=w[P-1])>>24&255))<<24|Rt((g>>16&255)+(Q>>16&255)-(w>>16&255))<<16|Rt((g>>8&255)+(Q>>8&255)-(w>>8&255))<<8|Rt((255&g)+(255&Q)-(255&w)))>>>0},v.Predictor13=function(g,w,P){var Q=w[P-1];return(Lt((g=kt(g,w[P+0]))>>24&255,Q>>24&255)<<24|Lt(g>>16&255,Q>>16&255)<<16|Lt(g>>8&255,Q>>8&255)<<8|Lt(255&g,255&Q))>>>0};var sh=v.PredictorAdd0;v.PredictorAdd1=se,xt("Predictor2","PredictorAdd2"),xt("Predictor3","PredictorAdd3"),xt("Predictor4","PredictorAdd4"),xt("Predictor5","PredictorAdd5"),xt("Predictor6","PredictorAdd6"),xt("Predictor7","PredictorAdd7"),xt("Predictor8","PredictorAdd8"),xt("Predictor9","PredictorAdd9"),xt("Predictor10","PredictorAdd10"),xt("Predictor11","PredictorAdd11"),xt("Predictor12","PredictorAdd12"),xt("Predictor13","PredictorAdd13");var Fu=v.PredictorAdd2;ie("ColorIndexInverseTransform","MapARGB","32b",function(g){return g>>8&255},function(g){return g}),ie("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(g){return g},function(g){return g>>8&255});var Hn,Rg=v.ColorIndexInverseTransform,go=v.MapARGB,po=v.VP8LColorIndexInverseTransformAlpha,ah=v.MapAlpha,oh=v.VP8LPredictorsAdd=[];oh.length=16,(v.VP8LPredictors=[]).length=16,(v.VP8LPredictorsAdd_C=[]).length=16,(v.VP8LPredictors_C=[]).length=16;var Ah,lh,JA,ZA,tl,vc,el,xc,Ba,mo,Pr,Wr,Vn,di,eA,ch,Lu,Qg,kx,Ix,Tx,Fx,Lx,Ux,uh,Px,Nx,Dx,Mx=s(511),Rx=s(2041),Qx=s(225),Ox=s(767),Hx=0,Gb=Rx,Og=Qx,na=Ox,Ca=Mx,Hg=0,Vg=1,Vx=2,$g=3,jg=4,Kb=5,$x=6,zb=7,qb=8,Gg=9,Wb=10,kP=[2,3,7],IP=[3,3,11],jx=[280,256,256,256,40],TP=[0,1,1,1,0],FP=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],LP=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],UP=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],PP=8,Yb=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Xb=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],dh=null,NP=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],DP=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Gx=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],MP=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],RP=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],QP=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],OP=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],rl=[],Qa=[],rA=[],HP=1,Kx=2,nl=[],Ea=[];Nt("UpsampleRgbLinePair",Ei,3),Nt("UpsampleBgrLinePair",bs,3),Nt("UpsampleRgbaLinePair",rh,4),Nt("UpsampleBgraLinePair",Jo,4),Nt("UpsampleArgbLinePair",xa,4),Nt("UpsampleRgba4444LinePair",Ji,2),Nt("UpsampleRgb565LinePair",cn,2);var VP=v.UpsampleRgbLinePair,$P=v.UpsampleBgrLinePair,zx=v.UpsampleRgbaLinePair,qx=v.UpsampleBgraLinePair,Wx=v.UpsampleArgbLinePair,Yx=v.UpsampleRgba4444LinePair,jP=v.UpsampleRgb565LinePair,Kg=16,zg=1<<Kg-1,hh=-227,Jb=482,GP=6,Xx=0,KP=s(256),zP=s(256),qP=s(256),WP=s(256),YP=s(Jb-hh),XP=s(Jb-hh);Zo("YuvToRgbRow",Ei,3),Zo("YuvToBgrRow",bs,3),Zo("YuvToRgbaRow",rh,4),Zo("YuvToBgraRow",Jo,4),Zo("YuvToArgbRow",xa,4),Zo("YuvToRgba4444Row",Ji,2),Zo("YuvToRgb565Row",cn,2);var Jx=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],qg=[0,2,8],JP=[8,7,6,4,4,2,2,2,1,1,1,1],ZP=1;this.WebPDecodeRGBA=function(g,w,P,Q,z){var Y=Vg,tt=new St,it=new Se;tt.ba=it,it.S=Y,it.width=[it.width],it.height=[it.height];var ct=it.width,ft=it.height,Bt=new ke;if(Bt==null||g==null)var Pt=2;else t(Bt!=null),Pt=yc(g,w,P,Bt.width,Bt.height,Bt.Pd,Bt.Qd,Bt.format,null);if(Pt!=0?ct=0:(ct!=null&&(ct[0]=Bt.width[0]),ft!=null&&(ft[0]=Bt.height[0]),ct=1),ct){it.width=it.width[0],it.height=it.height[0],Q!=null&&(Q[0]=it.width),z!=null&&(z[0]=it.height);t:{if(Q=new Zs,(z=new $t).data=g,z.w=w,z.ha=P,z.kd=1,w=[0],t(z!=null),((g=yc(z.data,z.w,z.ha,null,null,null,w,null,z))==0||g==7)&&w[0]&&(g=4),(w=g)==0){if(t(tt!=null),Q.data=z.data,Q.w=z.w+z.offset,Q.ha=z.ha-z.offset,Q.put=Ne,Q.ac=Ai,Q.bc=Ys,Q.ma=tt,z.xa){if((g=xi())==null){tt=1;break t}if((function(gt,Et){var Ft=[0],Ht=[0],Ut=[0];e:for(;;){if(gt==null)return 0;if(Et==null)return gt.a=2,0;if(gt.l=Et,gt.a=0,G(gt.m,Et.data,Et.w,Et.ha),!li(gt.m,Ft,Ht,Ut)){gt.a=3;break e}if(gt.xb=Kx,Et.width=Ft[0],Et.height=Ht[0],!_i(Ft[0],Ht[0],1,gt,null))break e;return 1}return t(gt.a!=0),0})(g,Q)){if(Q=(w=WA(Q.width,Q.height,tt.Oa,tt.ba))==0){e:{Q=g;r:for(;;){if(Q==null){Q=0;break e}if(t(Q.s.yc!=null),t(Q.s.Ya!=null),t(0<Q.s.Wb),t((P=Q.l)!=null),t((z=P.ma)!=null),Q.xb!=0){if(Q.ca=z.ba,Q.tb=z.tb,t(Q.ca!=null),!nh(z.Oa,P,$g)){Q.a=2;break r}if(!Bi(Q,P.width)||P.da)break r;if((P.da||Le(Q.ca.S))&&Tt(),11>Q.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),Q.ca.f.kb.F!=null&&Tt()),Q.Pb&&0<Q.s.ua&&Q.s.vb.X==null&&!$(Q.s.vb,Q.s.Wa.Xa)){Q.a=1;break r}Q.xb=0}if(!Qi(Q,Q.V,Q.Ba,Q.c,Q.i,P.o,Xs))break r;z.Dc=Q.Ma,Q=1;break e}t(Q.a!=0),Q=0}Q=!Q}Q&&(w=g.a)}else w=g.a}else{if((g=new wn)==null){tt=1;break t}if(g.Fa=z.na,g.P=z.P,g.qc=z.Sa,Ls(g,Q)){if((w=WA(Q.width,Q.height,tt.Oa,tt.ba))==0){if(g.Aa=0,P=tt.Oa,t((z=g)!=null),P!=null){if(0<(ct=0>(ct=P.Md)?0:100<ct?255:255*ct/100)){for(ft=Bt=0;4>ft;++ft)12>(Pt=z.pb[ft]).lc&&(Pt.ia=ct*JP[0>Pt.lc?0:Pt.lc]>>3),Bt|=Pt.ia;Bt&&(alert("todo:VP8InitRandom"),z.ia=1)}z.Ga=P.Id,100<z.Ga?z.Ga=100:0>z.Ga&&(z.Ga=0)}(function(gt,Et){if(gt==null)return 0;if(Et==null)return ur(gt,2,"NULL VP8Io parameter in VP8Decode().");if(!gt.cb&&!Ls(gt,Et))return 0;if(t(gt.cb),Et.ac==null||Et.ac(Et)){Et.ob&&(gt.L=0);var Ft=qg[gt.L];if(gt.L==2?(gt.yb=0,gt.zb=0):(gt.yb=Et.v-Ft>>4,gt.zb=Et.j-Ft>>4,0>gt.yb&&(gt.yb=0),0>gt.zb&&(gt.zb=0)),gt.Va=Et.o+15+Ft>>4,gt.Hb=Et.va+15+Ft>>4,gt.Hb>gt.za&&(gt.Hb=gt.za),gt.Va>gt.Ub&&(gt.Va=gt.Ub),0<gt.L){var Ht=gt.ed;for(Ft=0;4>Ft;++Ft){var Ut;if(gt.Qa.Cb){var jt=gt.Qa.Lb[Ft];gt.Qa.Fb||(jt+=Ht.Tb)}else jt=Ht.Tb;for(Ut=0;1>=Ut;++Ut){var Gt=gt.gd[Ft][Ut],Zt=jt;if(Ht.Pc&&(Zt+=Ht.vd[0],Ut&&(Zt+=Ht.od[0])),0<(Zt=0>Zt?0:63<Zt?63:Zt)){var Xt=Zt;0<Ht.wb&&(Xt=4<Ht.wb?Xt>>2:Xt>>1)>9-Ht.wb&&(Xt=9-Ht.wb),1>Xt&&(Xt=1),Gt.dd=Xt,Gt.tc=2*Zt+Xt,Gt.ld=40<=Zt?2:15<=Zt?1:0}else Gt.tc=0;Gt.La=Ut}}}Ft=0}else ur(gt,6,"Frame setup failed"),Ft=gt.a;if(Ft=Ft==0){if(Ft){gt.$c=0,0<gt.Aa||(gt.Ic=ZP);e:{Ft=gt.Ic,Ht=4*(Xt=gt.za);var Te=32*Xt,ye=Xt+1,nr=0<gt.L?Xt*(0<gt.Aa?2:1):0,Ce=(gt.Aa==2?2:1)*Xt;if((Gt=Ht+832+(Ut=3*(16*Ft+qg[gt.L])/2*Te)+(jt=gt.Fa!=null&&0<gt.Fa.length?gt.Kc.c*gt.Kc.i:0))!=Gt)Ft=0;else{if(Gt>gt.Vb){if(gt.Vb=0,gt.Ec=s(Gt),gt.Fc=0,gt.Ec==null){Ft=ur(gt,1,"no memory during frame initialization.");break e}gt.Vb=Gt}Gt=gt.Ec,Zt=gt.Fc,gt.Ac=Gt,gt.Bc=Zt,Zt+=Ht,gt.Gd=a(Te,ao),gt.Hd=0,gt.rb=a(ye+1,Ci),gt.sb=1,gt.wa=nr?a(nr,yn):null,gt.Y=0,gt.D.Nb=0,gt.D.wa=gt.wa,gt.D.Y=gt.Y,0<gt.Aa&&(gt.D.Y+=Xt),t(!0),gt.oc=Gt,gt.pc=Zt,Zt+=832,gt.ya=a(Ce,ri),gt.aa=0,gt.D.ya=gt.ya,gt.D.aa=gt.aa,gt.Aa==2&&(gt.D.aa+=Xt),gt.R=16*Xt,gt.B=8*Xt,Xt=(Te=qg[gt.L])*gt.R,Te=Te/2*gt.B,gt.sa=Gt,gt.ta=Zt+Xt,gt.qa=gt.sa,gt.ra=gt.ta+16*Ft*gt.R+Te,gt.Ha=gt.qa,gt.Ia=gt.ra+8*Ft*gt.B+Te,gt.$c=0,Zt+=Ut,gt.mb=jt?Gt:null,gt.nb=jt?Zt:null,t(Zt+jt<=gt.Fc+gt.Vb),lr(gt),i(gt.Ac,gt.Bc,0,Ht),Ft=1}}if(Ft){if(Et.ka=0,Et.y=gt.sa,Et.O=gt.ta,Et.f=gt.qa,Et.N=gt.ra,Et.ea=gt.Ha,Et.Vd=gt.Ia,Et.fa=gt.R,Et.Rc=gt.B,Et.F=null,Et.J=0,!Hx){for(Ft=-255;255>=Ft;++Ft)Mx[255+Ft]=0>Ft?-Ft:Ft;for(Ft=-1020;1020>=Ft;++Ft)Rx[1020+Ft]=-128>Ft?-128:127<Ft?127:Ft;for(Ft=-112;112>=Ft;++Ft)Qx[112+Ft]=-16>Ft?-16:15<Ft?15:Ft;for(Ft=-255;510>=Ft;++Ft)Ox[255+Ft]=0>Ft?0:255<Ft?255:Ft;Hx=1}el=lt,xc=VA,mo=hc,Pr=Us,Wr=J,Ba=lo,Vn=mc,di=bc,eA=S,ch=K,Lu=Ra,Qg=qA,kx=ht,Ix=wt,Tx=ho,Fx=fo,Lx=Xo,Ux=Iu,Qa[0]=ku,Qa[1]=Dt,Qa[2]=fc,Qa[3]=$A,Qa[4]=zo,Qa[5]=wa,Qa[6]=ps,Qa[7]=gc,Qa[8]=jA,Qa[9]=tn,rl[0]=Zr,rl[1]=ce,rl[2]=qe,rl[3]=Kr,rl[4]=Xi,rl[5]=Ko,rl[6]=Ps,rA[0]=Wo,rA[1]=Jt,rA[2]=pc,rA[3]=co,rA[4]=Ns,rA[5]=GA,rA[6]=KA,Ft=1}else Ft=0}Ft&&(Ft=(function(br,hi){for(br.M=0;br.M<br.Va;++br.M){var ir,Ee=br.Jc[br.M&br.Xb],oe=br.m,$n=br;for(ir=0;ir<$n.za;++ir){var Ze=oe,vr=$n,un=vr.Ac,Vi=vr.Bc+4*ir,ys=vr.zc,Tn=vr.ya[vr.aa+ir];if(vr.Qa.Bb?Tn.$b=vt(Ze,vr.Pa.jb[0])?2+vt(Ze,vr.Pa.jb[2]):vt(Ze,vr.Pa.jb[1]):Tn.$b=0,vr.kc&&(Tn.Ad=vt(Ze,vr.Bd)),Tn.Za=!vt(Ze,145)+0,Tn.Za){var Zi=Tn.Ob,ws=0;for(vr=0;4>vr;++vr){var fi,Cr=ys[0+vr];for(fi=0;4>fi;++fi){Cr=RP[un[Vi+fi]][Cr];for(var Qr=Gx[vt(Ze,Cr[0])];0<Qr;)Qr=Gx[2*Qr+vt(Ze,Cr[Qr])];Cr=-Qr,un[Vi+fi]=Cr}n(Zi,ws,un,Vi,4),ws+=4,ys[0+vr]=Cr}}else Cr=vt(Ze,156)?vt(Ze,128)?1:3:vt(Ze,163)?2:0,Tn.Ob[0]=Cr,i(un,Vi,Cr,4),i(ys,0,Cr,4);Tn.Dd=vt(Ze,142)?vt(Ze,114)?vt(Ze,183)?1:3:2:0}if($n.m.Ka)return ur(br,7,"Premature end-of-partition0 encountered.");for(;br.ja<br.za;++br.ja){if($n=Ee,Ze=(oe=br).rb[oe.sb-1],un=oe.rb[oe.sb+oe.ja],ir=oe.ya[oe.aa+oe.ja],Vi=oe.kc?ir.Ad:0)Ze.la=un.la=0,ir.Za||(Ze.Na=un.Na=0),ir.Hc=0,ir.Gc=0,ir.ia=0;else{var Fn,Or;if(Ze=un,un=$n,Vi=oe.Pa.Xc,ys=oe.ya[oe.aa+oe.ja],Tn=oe.pb[ys.$b],vr=ys.ad,Zi=0,ws=oe.rb[oe.sb-1],Cr=fi=0,i(vr,Zi,0,384),ys.Za)var $i=0,Oa=Vi[3];else{Qr=s(16);var jn=Ze.Na+ws.Na;if(jn=dh(un,Vi[1],jn,Tn.Eb,0,Qr,0),Ze.Na=ws.Na=(0<jn)+0,1<jn)el(Qr,0,vr,Zi);else{var Ds=Qr[0]+3>>3;for(Qr=0;256>Qr;Qr+=16)vr[Zi+Qr]=Ds}$i=1,Oa=Vi[0]}var Yr=15&Ze.la,gi=15&ws.la;for(Qr=0;4>Qr;++Qr){var ia=1&gi;for(Ds=Or=0;4>Ds;++Ds)Yr=Yr>>1|(ia=(jn=dh(un,Oa,jn=ia+(1&Yr),Tn.Sc,$i,vr,Zi))>$i)<<7,Or=Or<<2|(3<jn?3:1<jn?2:vr[Zi+0]!=0),Zi+=16;Yr>>=4,gi=gi>>1|ia<<7,fi=(fi<<8|Or)>>>0}for(Oa=Yr,$i=gi>>4,Fn=0;4>Fn;Fn+=2){for(Or=0,Yr=Ze.la>>4+Fn,gi=ws.la>>4+Fn,Qr=0;2>Qr;++Qr){for(ia=1&gi,Ds=0;2>Ds;++Ds)jn=ia+(1&Yr),Yr=Yr>>1|(ia=0<(jn=dh(un,Vi[2],jn,Tn.Qc,0,vr,Zi)))<<3,Or=Or<<2|(3<jn?3:1<jn?2:vr[Zi+0]!=0),Zi+=16;Yr>>=2,gi=gi>>1|ia<<5}Cr|=Or<<4*Fn,Oa|=Yr<<4<<Fn,$i|=(240&gi)<<Fn}Ze.la=Oa,ws.la=$i,ys.Hc=fi,ys.Gc=Cr,ys.ia=43690&Cr?0:Tn.ia,Vi=!(fi|Cr)}if(0<oe.L&&(oe.wa[oe.Y+oe.ja]=oe.gd[ir.$b][ir.Za],oe.wa[oe.Y+oe.ja].La|=!Vi),$n.Ka)return ur(br,7,"Premature end-of-file encountered.")}if(lr(br),oe=hi,$n=1,ir=(Ee=br).D,Ze=0<Ee.L&&Ee.M>=Ee.zb&&Ee.M<=Ee.Va,Ee.Aa==0)e:{if(ir.M=Ee.M,ir.uc=Ze,_a(Ee,ir),$n=1,ir=(Or=Ee.D).Nb,Ze=(Cr=qg[Ee.L])*Ee.R,un=Cr/2*Ee.B,Qr=16*ir*Ee.R,Ds=8*ir*Ee.B,Vi=Ee.sa,ys=Ee.ta-Ze+Qr,Tn=Ee.qa,vr=Ee.ra-un+Ds,Zi=Ee.Ha,ws=Ee.Ia-un+Ds,gi=(Yr=Or.M)==0,fi=Yr>=Ee.Va-1,Ee.Aa==2&&_a(Ee,Or),Or.uc)for(ia=(jn=Ee).D.M,t(jn.D.uc),Or=jn.yb;Or<jn.Hb;++Or){$i=Or,Oa=ia;var vs=(sa=(ji=jn).D).Nb;Fn=ji.R;var sa=sa.wa[sa.Y+$i],aa=ji.sa,Ms=ji.ta+16*vs*Fn+16*$i,oa=sa.dd,nn=sa.tc;if(nn!=0)if(t(3<=nn),ji.L==1)0<$i&&Fx(aa,Ms,Fn,nn+4),sa.La&&Ux(aa,Ms,Fn,nn),0<Oa&&Tx(aa,Ms,Fn,nn+4),sa.La&&Lx(aa,Ms,Fn,nn);else{var Aa=ji.B,Ha=ji.qa,_c=ji.ra+8*vs*Aa+8*$i,nA=ji.Ha,ji=ji.Ia+8*vs*Aa+8*$i;vs=sa.ld,0<$i&&(di(aa,Ms,Fn,nn+4,oa,vs),ch(Ha,_c,nA,ji,Aa,nn+4,oa,vs)),sa.La&&(Qg(aa,Ms,Fn,nn,oa,vs),Ix(Ha,_c,nA,ji,Aa,nn,oa,vs)),0<Oa&&(Vn(aa,Ms,Fn,nn+4,oa,vs),eA(Ha,_c,nA,ji,Aa,nn+4,oa,vs)),sa.La&&(Lu(aa,Ms,Fn,nn,oa,vs),kx(Ha,_c,nA,ji,Aa,nn,oa,vs))}}if(Ee.ia&&alert("todo:DitherRow"),oe.put!=null){if(Or=16*Yr,Yr=16*(Yr+1),gi?(oe.y=Ee.sa,oe.O=Ee.ta+Qr,oe.f=Ee.qa,oe.N=Ee.ra+Ds,oe.ea=Ee.Ha,oe.W=Ee.Ia+Ds):(Or-=Cr,oe.y=Vi,oe.O=ys,oe.f=Tn,oe.N=vr,oe.ea=Zi,oe.W=ws),fi||(Yr-=Cr),Yr>oe.o&&(Yr=oe.o),oe.F=null,oe.J=null,Ee.Fa!=null&&0<Ee.Fa.length&&Or<Yr&&(oe.J=zr(Ee,oe,Or,Yr-Or),oe.F=Ee.mb,oe.F==null&&oe.F.length==0)){$n=ur(Ee,3,"Could not decode alpha data.");break e}Or<oe.j&&(Cr=oe.j-Or,Or=oe.j,t(!(1&Cr)),oe.O+=Ee.R*Cr,oe.N+=Ee.B*(Cr>>1),oe.W+=Ee.B*(Cr>>1),oe.F!=null&&(oe.J+=oe.width*Cr)),Or<Yr&&(oe.O+=oe.v,oe.N+=oe.v>>1,oe.W+=oe.v>>1,oe.F!=null&&(oe.J+=oe.v),oe.ka=Or-oe.j,oe.U=oe.va-oe.v,oe.T=Yr-Or,$n=oe.put(oe))}ir+1!=Ee.Ic||fi||(n(Ee.sa,Ee.ta-Ze,Vi,ys+16*Ee.R,Ze),n(Ee.qa,Ee.ra-un,Tn,vr+8*Ee.B,un),n(Ee.Ha,Ee.Ia-un,Zi,ws+8*Ee.B,un))}if(!$n)return ur(br,6,"Output aborted.")}return 1})(gt,Et)),Et.bc!=null&&Et.bc(Et),Ft&=1}return Ft?(gt.cb=0,Ft):0})(g,Q)||(w=g.a)}}else w=g.a}w==0&&tt.Oa!=null&&tt.Oa.fd&&(w=ih(tt.ba))}tt=w}Y=tt!=0?null:11>Y?it.f.RGBA.eb:it.f.kb.y}else Y=null;return Y};var Zx=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function l(v,T){for(var E="",_=0;_<4;_++)E+=String.fromCharCode(v[T++]);return E}function c(v,T){return v[T+0]|v[T+1]<<8}function u(v,T){return(v[T+0]|v[T+1]<<8|v[T+2]<<16)>>>0}function h(v,T){return(v[T+0]|v[T+1]<<8|v[T+2]<<16|v[T+3]<<24)>>>0}new A;var d=[0],m=[0],f=[],b=new A,y=r,B=(function(v,T){var E={},_=0,F=!1,k=0,Z=0;if(E.frames=[],!(function(L,O){for(var V=0;V<4;V++)if(L[O+V]!="RIFF".charCodeAt(V))return!0;return!1})(v,T)){for(h(v,T+=4),T+=8;T<v.length;){var ut=l(v,T),nt=h(v,T+=4);T+=4;var j=nt+(1&nt);switch(ut){case"VP8 ":case"VP8L":E.frames[_]===void 0&&(E.frames[_]={}),(q=E.frames[_]).src_off=F?Z:T-8,q.src_size=k+nt+8,_++,F&&(F=!1,k=0,Z=0);break;case"VP8X":(q=E.header={}).feature_flags=v[T];var G=T+4;q.canvas_width=1+u(v,G),G+=3,q.canvas_height=1+u(v,G),G+=3;break;case"ALPH":F=!0,k=j+8,Z=T-8;break;case"ANIM":(q=E.header).bgcolor=h(v,T),G=T+4,q.loop_count=c(v,G),G+=2;break;case"ANMF":var pt,q;(q=E.frames[_]={}).offset_x=2*u(v,T),T+=3,q.offset_y=2*u(v,T),T+=3,q.width=1+u(v,T),T+=3,q.height=1+u(v,T),T+=3,q.duration=u(v,T),T+=3,pt=v[T++],q.dispose=1&pt,q.blend=pt>>1&1}ut!="ANMF"&&(T+=j)}return E}})(y,0);B.response=y,B.rgbaoutput=!0,B.dataurl=!1;var I=B.header?B.header:null,C=B.frames?B.frames:null;if(I){I.loop_counter=I.loop_count,d=[I.canvas_height],m=[I.canvas_width];for(var N=0;N<C.length&&C[N].blend!=0;N++);}var R=C[0],U=b.WebPDecodeRGBA(y,R.src_off,R.src_size,m,d);R.rgba=U,R.imgwidth=m[0],R.imgheight=d[0];for(var x=0;x<m[0]*d[0]*4;x++)f[x]=U[x];return this.width=m,this.height=d,this.data=f,this}(function(r){var t,e,n,i,s,a,o,A,l,c=function(L){return L=L||{},this.isStrokeTransparent=L.isStrokeTransparent||!1,this.strokeOpacity=L.strokeOpacity||1,this.strokeStyle=L.strokeStyle||"#000000",this.fillStyle=L.fillStyle||"#000000",this.isFillTransparent=L.isFillTransparent||!1,this.fillOpacity=L.fillOpacity||1,this.font=L.font||"10px sans-serif",this.textBaseline=L.textBaseline||"alphabetic",this.textAlign=L.textAlign||"left",this.lineWidth=L.lineWidth||1,this.lineJoin=L.lineJoin||"miter",this.lineCap=L.lineCap||"butt",this.path=L.path||[],this.transform=L.transform!==void 0?L.transform.clone():new A,this.globalCompositeOperation=L.globalCompositeOperation||"normal",this.globalAlpha=L.globalAlpha||1,this.clip_path=L.clip_path||[],this.currentPoint=L.currentPoint||new a,this.miterLimit=L.miterLimit||10,this.lastPoint=L.lastPoint||new a,this.lineDashOffset=L.lineDashOffset||0,this.lineDash=L.lineDash||[],this.margin=L.margin||[0,0,0,0],this.prevPageLastElemOffset=L.prevPageLastElemOffset||0,this.ignoreClearRect=typeof L.ignoreClearRect!="boolean"||L.ignoreClearRect,this};r.events.push(["initialized",function(){this.context2d=new u(this),t=this.internal.f2,e=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,a=this.internal.Point,o=this.internal.Rectangle,A=this.internal.Matrix,l=new c}]);var u=function(L){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var O=L;Object.defineProperty(this,"pdf",{get:function(){return O}});var V=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return V},set:function(D){V=!!D}});var X=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return X},set:function(D){X=!!D}});var At=0;Object.defineProperty(this,"posX",{get:function(){return At},set:function(D){isNaN(D)||(At=D)}});var et=0;Object.defineProperty(this,"posY",{get:function(){return et},set:function(D){isNaN(D)||(et=D)}}),Object.defineProperty(this,"margin",{get:function(){return l.margin},set:function(D){var $;typeof D=="number"?$=[D,D,D,D]:(($=new Array(4))[0]=D[0],$[1]=D.length>=2?D[1]:$[0],$[2]=D.length>=3?D[2]:$[0],$[3]=D.length>=4?D[3]:$[1]),l.margin=$}});var st=!1;Object.defineProperty(this,"autoPaging",{get:function(){return st},set:function(D){st=D}});var dt=0;Object.defineProperty(this,"lastBreak",{get:function(){return dt},set:function(D){dt=D}});var vt=[];Object.defineProperty(this,"pageBreaks",{get:function(){return vt},set:function(D){vt=D}}),Object.defineProperty(this,"ctx",{get:function(){return l},set:function(D){D instanceof c&&(l=D)}}),Object.defineProperty(this,"path",{get:function(){return l.path},set:function(D){l.path=D}});var _t=[];Object.defineProperty(this,"ctxStack",{get:function(){return _t},set:function(D){_t=D}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(D){var $;$=h(D),this.ctx.fillStyle=$.style,this.ctx.isFillTransparent=$.a===0,this.ctx.fillOpacity=$.a,this.pdf.setFillColor($.r,$.g,$.b,{a:$.a}),this.pdf.setTextColor($.r,$.g,$.b,{a:$.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(D){var $=h(D);this.ctx.strokeStyle=$.style,this.ctx.isStrokeTransparent=$.a===0,this.ctx.strokeOpacity=$.a,$.a===0?this.pdf.setDrawColor(255,255,255):($.a,this.pdf.setDrawColor($.r,$.g,$.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(D){["butt","round","square"].indexOf(D)!==-1&&(this.ctx.lineCap=D,this.pdf.setLineCap(D))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(D){isNaN(D)||(this.ctx.lineWidth=D,this.pdf.setLineWidth(D))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(D){["bevel","round","miter"].indexOf(D)!==-1&&(this.ctx.lineJoin=D,this.pdf.setLineJoin(D))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(D){isNaN(D)||(this.ctx.miterLimit=D,this.pdf.setMiterLimit(D))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(D){this.ctx.textBaseline=D}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(D){["right","end","center","left","start"].indexOf(D)!==-1&&(this.ctx.textAlign=D)}});var Mt=null,Ot=null;Object.defineProperty(this,"fontFaces",{get:function(){return Ot},set:function(D){Mt=null,Ot=D}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(D){var $;if(this.ctx.font=D,($=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(D))!==null){var bt=$[1];$[2];var rt=$[3],W=$[4];$[5];var at=$[6],Ct=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(W)[2];W=Math.floor(Ct==="px"?parseFloat(W)*this.pdf.internal.scaleFactor:Ct==="em"?parseFloat(W)*this.pdf.getFontSize():parseFloat(W)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(W);var xt=(function(ve){var ie,Ae,ee=[],re=ve.trim();if(re==="")return uw;if(re in XC)return[XC[re]];for(;re!=="";){switch(Ae=null,ie=(re=ZC(re)).charAt(0)){case'"':case"'":Ae=Aq(re.substring(1),ie);break;default:Ae=lq(re)}if(Ae===null||(ee.push(Ae[0]),(re=ZC(Ae[1]))!==""&&re.charAt(0)!==","))return uw;re=re.replace(/^,/,"")}return ee})(at);if(this.fontFaces){var yt=(function(ve,ie){if(Mt===null){var Ae=(function(ee){var re=[];return Object.keys(ee).forEach(function(he){ee[he].forEach(function(Fe){var xe=null;switch(Fe){case"bold":xe={family:he,weight:"bold"};break;case"italic":xe={family:he,style:"italic"};break;case"bolditalic":xe={family:he,weight:"bold",style:"italic"};break;case"":case"normal":xe={family:he}}xe!==null&&(xe.ref={name:he,style:Fe},re.push(xe))})}),re})(ve.getFontList());Mt=(function(ee){for(var re={},he=0;he<ee.length;++he){var Fe=cw(ee[he]),xe=Fe.family,De=Fe.stretch,Le=Fe.style,or=Fe.weight;re[xe]=re[xe]||{},re[xe][De]=re[xe][De]||{},re[xe][De][Le]=re[xe][De][Le]||{},re[xe][De][Le][or]=Fe}return re})(Ae.concat(ie))}return Mt})(this.pdf,this.fontFaces),kt=xt.map(function(ve){return{family:ve,stretch:"normal",weight:rt,style:bt}}),Rt=(function(ve,ie,Ae){for(var ee=(Ae=Ae||{}).defaultFontFamily||"times",re=Object.assign({},oq,Ae.genericFontFamilies||{}),he=null,Fe=null,xe=0;xe<ie.length;++xe)if(re[(he=cw(ie[xe])).family]&&(he.family=re[he.family]),ve.hasOwnProperty(he.family)){Fe=ve[he.family];break}if(!(Fe=Fe||ve[ee]))throw new Error("Could not find a font-family for the rule '"+JC(he)+"' and default family '"+ee+"'.");if(Fe=(function(De,Le){if(Le[De])return Le[De];var or=H1[De],kr=or<=H1.normal?-1:1,Se=YC(Le,Y4,or,kr);if(!Se)throw new Error("Could not find a matching font-stretch value for "+De);return Se})(he.stretch,Fe),Fe=(function(De,Le){if(Le[De])return Le[De];for(var or=W4[De],kr=0;kr<or.length;++kr)if(Le[or[kr]])return Le[or[kr]];throw new Error("Could not find a matching font-style for "+De)})(he.style,Fe),!(Fe=(function(De,Le){if(Le[De])return Le[De];if(De===400&&Le[500])return Le[500];if(De===500&&Le[400])return Le[400];var or=aq[De],kr=YC(Le,X4,or,De<400?-1:1);if(!kr)throw new Error("Could not find a matching font-weight for value "+De);return kr})(he.weight,Fe)))throw new Error("Failed to resolve a font for the rule '"+JC(he)+"'.");return Fe})(yt,kt);this.pdf.setFont(Rt.ref.name,Rt.ref.style)}else{var Lt="";(rt==="bold"||parseInt(rt,10)>=700||bt==="bold")&&(Lt="bold"),bt==="italic"&&(Lt+="italic"),Lt.length===0&&(Lt="normal");for(var Qt="",se={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},te=0;te<xt.length;te++){if(this.pdf.internal.getFont(xt[te],Lt,{noFallback:!0,disableWarning:!0})!==void 0){Qt=xt[te];break}if(Lt==="bolditalic"&&this.pdf.internal.getFont(xt[te],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Qt=xt[te],Lt="bold";else if(this.pdf.internal.getFont(xt[te],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Qt=xt[te],Lt="normal";break}}if(Qt===""){for(var ae=0;ae<xt.length;ae++)if(se[xt[ae]]){Qt=se[xt[ae]];break}}Qt=Qt===""?"Times":Qt,this.pdf.setFont(Qt,Lt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(D){this.ctx.globalCompositeOperation=D}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(D){this.ctx.globalAlpha=D}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(D){this.ctx.lineDashOffset=D,q.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(D){this.ctx.lineDash=D,q.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(D){this.ctx.ignoreClearRect=!!D}})};u.prototype.setLineDash=function(L){this.lineDash=L},u.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},u.prototype.fill=function(){C.call(this,"fill",!1)},u.prototype.stroke=function(){C.call(this,"stroke",!1)},u.prototype.beginPath=function(){this.path=[{type:"begin"}]},u.prototype.moveTo=function(L,O){if(isNaN(L)||isNaN(O))throw Xr.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var V=this.ctx.transform.applyToPoint(new a(L,O));this.path.push({type:"mt",x:V.x,y:V.y}),this.ctx.lastPoint=new a(L,O)},u.prototype.closePath=function(){var L=new a(0,0),O=0;for(O=this.path.length-1;O!==-1;O--)if(this.path[O].type==="begin"&&Vr(this.path[O+1])==="object"&&typeof this.path[O+1].x=="number"){L=new a(this.path[O+1].x,this.path[O+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new a(L.x,L.y)},u.prototype.lineTo=function(L,O){if(isNaN(L)||isNaN(O))throw Xr.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var V=this.ctx.transform.applyToPoint(new a(L,O));this.path.push({type:"lt",x:V.x,y:V.y}),this.ctx.lastPoint=new a(V.x,V.y)},u.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),C.call(this,null,!0)},u.prototype.quadraticCurveTo=function(L,O,V,X){if(isNaN(V)||isNaN(X)||isNaN(L)||isNaN(O))throw Xr.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var At=this.ctx.transform.applyToPoint(new a(V,X)),et=this.ctx.transform.applyToPoint(new a(L,O));this.path.push({type:"qct",x1:et.x,y1:et.y,x:At.x,y:At.y}),this.ctx.lastPoint=new a(At.x,At.y)},u.prototype.bezierCurveTo=function(L,O,V,X,At,et){if(isNaN(At)||isNaN(et)||isNaN(L)||isNaN(O)||isNaN(V)||isNaN(X))throw Xr.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var st=this.ctx.transform.applyToPoint(new a(At,et)),dt=this.ctx.transform.applyToPoint(new a(L,O)),vt=this.ctx.transform.applyToPoint(new a(V,X));this.path.push({type:"bct",x1:dt.x,y1:dt.y,x2:vt.x,y2:vt.y,x:st.x,y:st.y}),this.ctx.lastPoint=new a(st.x,st.y)},u.prototype.arc=function(L,O,V,X,At,et){if(isNaN(L)||isNaN(O)||isNaN(V)||isNaN(X)||isNaN(At))throw Xr.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(et=!!et,!this.ctx.transform.isIdentity){var st=this.ctx.transform.applyToPoint(new a(L,O));L=st.x,O=st.y;var dt=this.ctx.transform.applyToPoint(new a(0,V)),vt=this.ctx.transform.applyToPoint(new a(0,0));V=Math.sqrt(Math.pow(dt.x-vt.x,2)+Math.pow(dt.y-vt.y,2))}Math.abs(At-X)>=2*Math.PI&&(X=0,At=2*Math.PI),this.path.push({type:"arc",x:L,y:O,radius:V,startAngle:X,endAngle:At,counterclockwise:et})},u.prototype.arcTo=function(L,O,V,X,At){throw new Error("arcTo not implemented.")},u.prototype.rect=function(L,O,V,X){if(isNaN(L)||isNaN(O)||isNaN(V)||isNaN(X))throw Xr.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(L,O),this.lineTo(L+V,O),this.lineTo(L+V,O+X),this.lineTo(L,O+X),this.lineTo(L,O),this.lineTo(L+V,O),this.lineTo(L,O)},u.prototype.fillRect=function(L,O,V,X){if(isNaN(L)||isNaN(O)||isNaN(V)||isNaN(X))throw Xr.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!d.call(this)){var At={};this.lineCap!=="butt"&&(At.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(At.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(L,O,V,X),this.fill(),At.hasOwnProperty("lineCap")&&(this.lineCap=At.lineCap),At.hasOwnProperty("lineJoin")&&(this.lineJoin=At.lineJoin)}},u.prototype.strokeRect=function(L,O,V,X){if(isNaN(L)||isNaN(O)||isNaN(V)||isNaN(X))throw Xr.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");m.call(this)||(this.beginPath(),this.rect(L,O,V,X),this.stroke())},u.prototype.clearRect=function(L,O,V,X){if(isNaN(L)||isNaN(O)||isNaN(V)||isNaN(X))throw Xr.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(L,O,V,X))},u.prototype.save=function(L){L=typeof L!="boolean"||L;for(var O=this.pdf.internal.getCurrentPageInfo().pageNumber,V=0;V<this.pdf.internal.getNumberOfPages();V++)this.pdf.setPage(V+1),this.pdf.internal.out("q");if(this.pdf.setPage(O),L){this.ctx.fontSize=this.pdf.internal.getFontSize();var X=new c(this.ctx);this.ctxStack.push(this.ctx),this.ctx=X}},u.prototype.restore=function(L){L=typeof L!="boolean"||L;for(var O=this.pdf.internal.getCurrentPageInfo().pageNumber,V=0;V<this.pdf.internal.getNumberOfPages();V++)this.pdf.setPage(V+1),this.pdf.internal.out("Q");this.pdf.setPage(O),L&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},u.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var h=function(L){var O,V,X,At;if(L.isCanvasGradient===!0&&(L=L.getColor()),!L)return{r:0,g:0,b:0,a:0,style:L};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(L))O=0,V=0,X=0,At=0;else{var et=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(L);if(et!==null)O=parseInt(et[1]),V=parseInt(et[2]),X=parseInt(et[3]),At=1;else if((et=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(L))!==null)O=parseInt(et[1]),V=parseInt(et[2]),X=parseInt(et[3]),At=parseFloat(et[4]);else{if(At=1,typeof L=="string"&&L.charAt(0)!=="#"){var st=new V4(L);L=st.ok?st.toHex():"#000000"}L.length===4?(O=L.substring(1,2),O+=O,V=L.substring(2,3),V+=V,X=L.substring(3,4),X+=X):(O=L.substring(1,3),V=L.substring(3,5),X=L.substring(5,7)),O=parseInt(O,16),V=parseInt(V,16),X=parseInt(X,16)}}return{r:O,g:V,b:X,a:At,style:L}},d=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},m=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};u.prototype.fillText=function(L,O,V,X){if(isNaN(O)||isNaN(V)||typeof L!="string")throw Xr.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(X=isNaN(X)?void 0:X,!d.call(this)){var At=j(this.ctx.transform.rotation),et=this.ctx.transform.scaleX;_.call(this,{text:L,x:O,y:V,scale:et,angle:At,align:this.textAlign,maxWidth:X})}},u.prototype.strokeText=function(L,O,V,X){if(isNaN(O)||isNaN(V)||typeof L!="string")throw Xr.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!m.call(this)){X=isNaN(X)?void 0:X;var At=j(this.ctx.transform.rotation),et=this.ctx.transform.scaleX;_.call(this,{text:L,x:O,y:V,scale:et,renderingMode:"stroke",angle:At,align:this.textAlign,maxWidth:X})}},u.prototype.measureText=function(L){if(typeof L!="string")throw Xr.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var O=this.pdf,V=this.pdf.internal.scaleFactor,X=O.internal.getFontSize(),At=O.getStringUnitWidth(L)*X/O.internal.scaleFactor;return new function(et){var st=(et=et||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return st}}),this}({width:At*=Math.round(96*V/72*1e4)/1e4})},u.prototype.scale=function(L,O){if(isNaN(L)||isNaN(O))throw Xr.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var V=new A(L,0,0,O,0,0);this.ctx.transform=this.ctx.transform.multiply(V)},u.prototype.rotate=function(L){if(isNaN(L))throw Xr.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var O=new A(Math.cos(L),Math.sin(L),-Math.sin(L),Math.cos(L),0,0);this.ctx.transform=this.ctx.transform.multiply(O)},u.prototype.translate=function(L,O){if(isNaN(L)||isNaN(O))throw Xr.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var V=new A(1,0,0,1,L,O);this.ctx.transform=this.ctx.transform.multiply(V)},u.prototype.transform=function(L,O,V,X,At,et){if(isNaN(L)||isNaN(O)||isNaN(V)||isNaN(X)||isNaN(At)||isNaN(et))throw Xr.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var st=new A(L,O,V,X,At,et);this.ctx.transform=this.ctx.transform.multiply(st)},u.prototype.setTransform=function(L,O,V,X,At,et){L=isNaN(L)?1:L,O=isNaN(O)?0:O,V=isNaN(V)?0:V,X=isNaN(X)?1:X,At=isNaN(At)?0:At,et=isNaN(et)?0:et,this.ctx.transform=new A(L,O,V,X,At,et)};var f=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};u.prototype.drawImage=function(L,O,V,X,At,et,st,dt,vt){var _t=this.pdf.getImageProperties(L),Mt=1,Ot=1,D=1,$=1;X!==void 0&&dt!==void 0&&(D=dt/X,$=vt/At,Mt=_t.width/X*dt/X,Ot=_t.height/At*vt/At),et===void 0&&(et=O,st=V,O=0,V=0),X!==void 0&&dt===void 0&&(dt=X,vt=At),X===void 0&&dt===void 0&&(dt=_t.width,vt=_t.height);for(var bt,rt=this.ctx.transform.decompose(),W=j(rt.rotate.shx),at=new A,Ct=(at=(at=(at=at.multiply(rt.translate)).multiply(rt.skew)).multiply(rt.scale)).applyToRectangle(new o(et-O*D,st-V*$,X*Mt,At*Ot)),xt=b.call(this,Ct),yt=[],kt=0;kt<xt.length;kt+=1)yt.indexOf(xt[kt])===-1&&yt.push(xt[kt]);if(I(yt),this.autoPaging)for(var Rt=yt[0],Lt=yt[yt.length-1],Qt=Rt;Qt<Lt+1;Qt++){this.pdf.setPage(Qt);var se=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],te=Qt===1?this.posY+this.margin[0]:this.margin[0],ae=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ve=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ie=Qt===1?0:ae+(Qt-2)*ve;if(this.ctx.clip_path.length!==0){var Ae=this.path;bt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=B(bt,this.posX+this.margin[3],-ie+te+this.ctx.prevPageLastElemOffset),N.call(this,"fill",!0),this.path=Ae}var ee=JSON.parse(JSON.stringify(Ct));ee=B([ee],this.posX+this.margin[3],-ie+te+this.ctx.prevPageLastElemOffset)[0];var re=(Qt>Rt||Qt<Lt)&&f.call(this);re&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],se,ve,null).clip().discardPath()),this.pdf.addImage(L,"JPEG",ee.x,ee.y,ee.w,ee.h,null,null,W),re&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(L,"JPEG",Ct.x,Ct.y,Ct.w,Ct.h,null,null,W)};var b=function(L,O,V){var X=[];O=O||this.pdf.internal.pageSize.width,V=V||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var At=this.posY+this.ctx.prevPageLastElemOffset;switch(L.type){default:case"mt":case"lt":X.push(Math.floor((L.y+At)/V)+1);break;case"arc":X.push(Math.floor((L.y+At-L.radius)/V)+1),X.push(Math.floor((L.y+At+L.radius)/V)+1);break;case"qct":var et=G(this.ctx.lastPoint.x,this.ctx.lastPoint.y,L.x1,L.y1,L.x,L.y);X.push(Math.floor((et.y+At)/V)+1),X.push(Math.floor((et.y+et.h+At)/V)+1);break;case"bct":var st=pt(this.ctx.lastPoint.x,this.ctx.lastPoint.y,L.x1,L.y1,L.x2,L.y2,L.x,L.y);X.push(Math.floor((st.y+At)/V)+1),X.push(Math.floor((st.y+st.h+At)/V)+1);break;case"rect":X.push(Math.floor((L.y+At)/V)+1),X.push(Math.floor((L.y+L.h+At)/V)+1)}for(var dt=0;dt<X.length;dt+=1)for(;this.pdf.internal.getNumberOfPages()<X[dt];)y.call(this);return X},y=function(){var L=this.fillStyle,O=this.strokeStyle,V=this.font,X=this.lineCap,At=this.lineWidth,et=this.lineJoin;this.pdf.addPage(),this.fillStyle=L,this.strokeStyle=O,this.font=V,this.lineCap=X,this.lineWidth=At,this.lineJoin=et},B=function(L,O,V){for(var X=0;X<L.length;X++)switch(L[X].type){case"bct":L[X].x2+=O,L[X].y2+=V;case"qct":L[X].x1+=O,L[X].y1+=V;default:L[X].x+=O,L[X].y+=V}return L},I=function(L){return L.sort(function(O,V){return O-V})},C=function(L,O){for(var V,X,At=this.fillStyle,et=this.strokeStyle,st=this.lineCap,dt=this.lineWidth,vt=Math.abs(dt*this.ctx.transform.scaleX),_t=this.lineJoin,Mt=JSON.parse(JSON.stringify(this.path)),Ot=JSON.parse(JSON.stringify(this.path)),D=[],$=0;$<Ot.length;$++)if(Ot[$].x!==void 0)for(var bt=b.call(this,Ot[$]),rt=0;rt<bt.length;rt+=1)D.indexOf(bt[rt])===-1&&D.push(bt[rt]);for(var W=0;W<D.length;W++)for(;this.pdf.internal.getNumberOfPages()<D[W];)y.call(this);if(I(D),this.autoPaging)for(var at=D[0],Ct=D[D.length-1],xt=at;xt<Ct+1;xt++){this.pdf.setPage(xt),this.fillStyle=At,this.strokeStyle=et,this.lineCap=st,this.lineWidth=vt,this.lineJoin=_t;var yt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],kt=xt===1?this.posY+this.margin[0]:this.margin[0],Rt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Lt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Qt=xt===1?0:Rt+(xt-2)*Lt;if(this.ctx.clip_path.length!==0){var se=this.path;V=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=B(V,this.posX+this.margin[3],-Qt+kt+this.ctx.prevPageLastElemOffset),N.call(this,L,!0),this.path=se}if(X=JSON.parse(JSON.stringify(Mt)),this.path=B(X,this.posX+this.margin[3],-Qt+kt+this.ctx.prevPageLastElemOffset),O===!1||xt===0){var te=(xt>at||xt<Ct)&&f.call(this);te&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],yt,Lt,null).clip().discardPath()),N.call(this,L,O),te&&this.pdf.restoreGraphicsState()}this.lineWidth=dt}else this.lineWidth=vt,N.call(this,L,O),this.lineWidth=dt;this.path=Mt},N=function(L,O){if((L!=="stroke"||O||!m.call(this))&&(L==="stroke"||O||!d.call(this))){for(var V,X,At=[],et=this.path,st=0;st<et.length;st++){var dt=et[st];switch(dt.type){case"begin":At.push({begin:!0});break;case"close":At.push({close:!0});break;case"mt":At.push({start:dt,deltas:[],abs:[]});break;case"lt":var vt=At.length;if(et[st-1]&&!isNaN(et[st-1].x)&&(V=[dt.x-et[st-1].x,dt.y-et[st-1].y],vt>0)){for(;vt>=0;vt--)if(At[vt-1].close!==!0&&At[vt-1].begin!==!0){At[vt-1].deltas.push(V),At[vt-1].abs.push(dt);break}}break;case"bct":V=[dt.x1-et[st-1].x,dt.y1-et[st-1].y,dt.x2-et[st-1].x,dt.y2-et[st-1].y,dt.x-et[st-1].x,dt.y-et[st-1].y],At[At.length-1].deltas.push(V);break;case"qct":var _t=et[st-1].x+2/3*(dt.x1-et[st-1].x),Mt=et[st-1].y+2/3*(dt.y1-et[st-1].y),Ot=dt.x+2/3*(dt.x1-dt.x),D=dt.y+2/3*(dt.y1-dt.y),$=dt.x,bt=dt.y;V=[_t-et[st-1].x,Mt-et[st-1].y,Ot-et[st-1].x,D-et[st-1].y,$-et[st-1].x,bt-et[st-1].y],At[At.length-1].deltas.push(V);break;case"arc":At.push({deltas:[],abs:[],arc:!0}),Array.isArray(At[At.length-1].abs)&&At[At.length-1].abs.push(dt)}}X=O?null:L==="stroke"?"stroke":"fill";for(var rt=!1,W=0;W<At.length;W++)if(At[W].arc)for(var at=At[W].abs,Ct=0;Ct<at.length;Ct++){var xt=at[Ct];xt.type==="arc"?x.call(this,xt.x,xt.y,xt.radius,xt.startAngle,xt.endAngle,xt.counterclockwise,void 0,O,!rt):F.call(this,xt.x,xt.y),rt=!0}else if(At[W].close===!0)this.pdf.internal.out("h"),rt=!1;else if(At[W].begin!==!0){var yt=At[W].start.x,kt=At[W].start.y;k.call(this,At[W].deltas,yt,kt),rt=!0}X&&v.call(this,X),O&&T.call(this)}},R=function(L){var O=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,V=O*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return L-V;case"top":return L+O-V;case"hanging":return L+O-2*V;case"middle":return L+O/2-V;default:return L}},U=function(L){return L+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};u.prototype.createLinearGradient=function(){var L=function(){};return L.colorStops=[],L.addColorStop=function(O,V){this.colorStops.push([O,V])},L.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},L.isCanvasGradient=!0,L},u.prototype.createPattern=function(){return this.createLinearGradient()},u.prototype.createRadialGradient=function(){return this.createLinearGradient()};var x=function(L,O,V,X,At,et,st,dt,vt){for(var _t=ut.call(this,V,X,At,et),Mt=0;Mt<_t.length;Mt++){var Ot=_t[Mt];Mt===0&&(vt?E.call(this,Ot.x1+L,Ot.y1+O):F.call(this,Ot.x1+L,Ot.y1+O)),Z.call(this,L,O,Ot.x2,Ot.y2,Ot.x3,Ot.y3,Ot.x4,Ot.y4)}dt?T.call(this):v.call(this,st)},v=function(L){switch(L){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},T=function(){this.pdf.clip(),this.pdf.discardPath()},E=function(L,O){this.pdf.internal.out(e(L)+" "+n(O)+" m")},_=function(L){var O;switch(L.align){case"right":case"end":O="right";break;case"center":O="center";break;default:O="left"}var V=this.pdf.getTextDimensions(L.text),X=R.call(this,L.y),At=U.call(this,X)-V.h,et=this.ctx.transform.applyToPoint(new a(L.x,X)),st=this.ctx.transform.decompose(),dt=new A;dt=(dt=(dt=dt.multiply(st.translate)).multiply(st.skew)).multiply(st.scale);for(var vt,_t,Mt,Ot=this.ctx.transform.applyToRectangle(new o(L.x,X,V.w,V.h)),D=dt.applyToRectangle(new o(L.x,At,V.w,V.h)),$=b.call(this,D),bt=[],rt=0;rt<$.length;rt+=1)bt.indexOf($[rt])===-1&&bt.push($[rt]);if(I(bt),this.autoPaging)for(var W=bt[0],at=bt[bt.length-1],Ct=W;Ct<at+1;Ct++){this.pdf.setPage(Ct);var xt=Ct===1?this.posY+this.margin[0]:this.margin[0],yt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],kt=this.pdf.internal.pageSize.height-this.margin[2],Rt=kt-this.margin[0],Lt=this.pdf.internal.pageSize.width-this.margin[1],Qt=Lt-this.margin[3],se=Ct===1?0:yt+(Ct-2)*Rt;if(this.ctx.clip_path.length!==0){var te=this.path;vt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=B(vt,this.posX+this.margin[3],-1*se+xt),N.call(this,"fill",!0),this.path=te}var ae=B([JSON.parse(JSON.stringify(D))],this.posX+this.margin[3],-se+xt+this.ctx.prevPageLastElemOffset)[0];L.scale>=.01&&(_t=this.pdf.internal.getFontSize(),this.pdf.setFontSize(_t*L.scale),Mt=this.lineWidth,this.lineWidth=Mt*L.scale);var ve=this.autoPaging!=="text";if(ve||ae.y+ae.h<=kt){if(ve||ae.y>=xt&&ae.x<=Lt){var ie=ve?L.text:this.pdf.splitTextToSize(L.text,L.maxWidth||Lt-ae.x)[0],Ae=B([JSON.parse(JSON.stringify(Ot))],this.posX+this.margin[3],-se+xt+this.ctx.prevPageLastElemOffset)[0],ee=ve&&(Ct>W||Ct<at)&&f.call(this);ee&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Qt,Rt,null).clip().discardPath()),this.pdf.text(ie,Ae.x,Ae.y,{angle:L.angle,align:O,renderingMode:L.renderingMode}),ee&&this.pdf.restoreGraphicsState()}}else ae.y<kt&&(this.ctx.prevPageLastElemOffset+=kt-ae.y);L.scale>=.01&&(this.pdf.setFontSize(_t),this.lineWidth=Mt)}else L.scale>=.01&&(_t=this.pdf.internal.getFontSize(),this.pdf.setFontSize(_t*L.scale),Mt=this.lineWidth,this.lineWidth=Mt*L.scale),this.pdf.text(L.text,et.x+this.posX,et.y+this.posY,{angle:L.angle,align:O,renderingMode:L.renderingMode,maxWidth:L.maxWidth}),L.scale>=.01&&(this.pdf.setFontSize(_t),this.lineWidth=Mt)},F=function(L,O,V,X){V=V||0,X=X||0,this.pdf.internal.out(e(L+V)+" "+n(O+X)+" l")},k=function(L,O,V){return this.pdf.lines(L,O,V,null,null)},Z=function(L,O,V,X,At,et,st,dt){this.pdf.internal.out([t(i(V+L)),t(s(X+O)),t(i(At+L)),t(s(et+O)),t(i(st+L)),t(s(dt+O)),"c"].join(" "))},ut=function(L,O,V,X){for(var At=2*Math.PI,et=Math.PI/2;O>V;)O-=At;var st=Math.abs(V-O);st<At&&X&&(st=At-st);for(var dt=[],vt=X?-1:1,_t=O;st>1e-5;){var Mt=_t+vt*Math.min(st,et);dt.push(nt.call(this,L,_t,Mt)),st-=Math.abs(Mt-_t),_t=Mt}return dt},nt=function(L,O,V){var X=(V-O)/2,At=L*Math.cos(X),et=L*Math.sin(X),st=At,dt=-et,vt=st*st+dt*dt,_t=vt+st*At+dt*et,Mt=4/3*(Math.sqrt(2*vt*_t)-_t)/(st*et-dt*At),Ot=st-Mt*dt,D=dt+Mt*st,$=Ot,bt=-D,rt=X+O,W=Math.cos(rt),at=Math.sin(rt);return{x1:L*Math.cos(O),y1:L*Math.sin(O),x2:Ot*W-D*at,y2:Ot*at+D*W,x3:$*W-bt*at,y3:$*at+bt*W,x4:L*Math.cos(V),y4:L*Math.sin(V)}},j=function(L){return 180*L/Math.PI},G=function(L,O,V,X,At,et){var st=L+.5*(V-L),dt=O+.5*(X-O),vt=At+.5*(V-At),_t=et+.5*(X-et),Mt=Math.min(L,At,st,vt),Ot=Math.max(L,At,st,vt),D=Math.min(O,et,dt,_t),$=Math.max(O,et,dt,_t);return new o(Mt,D,Ot-Mt,$-D)},pt=function(L,O,V,X,At,et,st,dt){var vt,_t,Mt,Ot,D,$,bt,rt,W,at,Ct,xt,yt,kt,Rt=V-L,Lt=X-O,Qt=At-V,se=et-X,te=st-At,ae=dt-et;for(_t=0;_t<41;_t++)W=(bt=(Mt=L+(vt=_t/40)*Rt)+vt*((D=V+vt*Qt)-Mt))+vt*(D+vt*(At+vt*te-D)-bt),at=(rt=(Ot=O+vt*Lt)+vt*(($=X+vt*se)-Ot))+vt*($+vt*(et+vt*ae-$)-rt),_t==0?(Ct=W,xt=at,yt=W,kt=at):(Ct=Math.min(Ct,W),xt=Math.min(xt,at),yt=Math.max(yt,W),kt=Math.max(kt,at));return new o(Math.round(Ct),Math.round(xt),Math.round(yt-Ct),Math.round(kt-xt))},q=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var L,O,V=(L=this.ctx.lineDash,O=this.ctx.lineDashOffset,JSON.stringify({lineDash:L,lineDashOffset:O}));this.prevLineDash!==V&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=V)}}})(_e.API),(function(r){var t=function(a){var o,A,l,c,u,h,d,m,f,b;for(A=[],l=0,c=(a+=o="\0\0\0\0".slice(a.length%4||4)).length;c>l;l+=4)(u=(a.charCodeAt(l)<<24)+(a.charCodeAt(l+1)<<16)+(a.charCodeAt(l+2)<<8)+a.charCodeAt(l+3))!==0?(h=(u=((u=((u=((u=(u-(b=u%85))/85)-(f=u%85))/85)-(m=u%85))/85)-(d=u%85))/85)%85,A.push(h+33,d+33,m+33,f+33,b+33)):A.push(122);return(function(y,B){for(var I=B;I>0;I--)y.pop()})(A,o.length),String.fromCharCode.apply(String,A)+"~>"},e=function(a){var o,A,l,c,u,h=String,d="length",m=255,f="charCodeAt",b="slice",y="replace";for(a[b](-2),a=a[b](0,-2)[y](/\s/g,"")[y]("z","!!!!!"),l=[],c=0,u=(a+=o="uuuuu"[b](a[d]%5||5))[d];u>c;c+=5)A=52200625*(a[f](c)-33)+614125*(a[f](c+1)-33)+7225*(a[f](c+2)-33)+85*(a[f](c+3)-33)+(a[f](c+4)-33),l.push(m&A>>24,m&A>>16,m&A>>8,m&A);return(function(B,I){for(var C=I;C>0;C--)B.pop()})(l,o[d]),h.fromCharCode.apply(h,l)},n=function(a){return a.split("").map(function(o){return("0"+o.charCodeAt().toString(16)).slice(-2)}).join("")+">"},i=function(a){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((a=a.replace(/\s/g,"")).indexOf(">")!==-1&&(a=a.substr(0,a.indexOf(">"))),a.length%2&&(a+="0"),o.test(a)===!1)return"";for(var A="",l=0;l<a.length;l+=2)A+=String.fromCharCode("0x"+(a[l]+a[l+1]));return A},s=function(a){for(var o=new Uint8Array(a.length),A=a.length;A--;)o[A]=a.charCodeAt(A);return(o=P1(o)).reduce(function(l,c){return l+String.fromCharCode(c)},"")};r.processDataByFilters=function(a,o){var A=0,l=a||"",c=[];for(typeof(o=o||[])=="string"&&(o=[o]),A=0;A<o.length;A+=1)switch(o[A]){case"ASCII85Decode":case"/ASCII85Decode":l=e(l),c.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=t(l),c.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=i(l),c.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=n(l),c.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=s(l),c.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[A]+'" is not implemented')}return{data:l,reverseChain:c.reverse().join(" ")}}})(_e.API),(function(r){r.loadFile=function(t,e,n){return(function(i,s,a){s=s!==!1,a=typeof a=="function"?a:function(){};var o=void 0;try{o=(function(A,l,c){var u=new XMLHttpRequest,h=0,d=function(m){var f=m.length,b=[],y=String.fromCharCode;for(h=0;h<f;h+=1)b.push(y(255&m.charCodeAt(h)));return b.join("")};if(u.open("GET",A,!l),u.overrideMimeType("text/plain; charset=x-user-defined"),l===!1&&(u.onload=function(){u.status===200?c(d(this.responseText)):c(void 0)}),u.send(null),l&&u.status===200)return d(u.responseText)})(i,s,a)}catch{}return o})(t,e,n)},r.loadImageFile=r.loadFile})(_e.API),(function(r){function t(){return(Ge.html2canvas?Promise.resolve(Ge.html2canvas):Sm(()=>Promise.resolve().then(()=>RG),void 0)).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function e(){return(Ge.DOMPurify?Promise.resolve(Ge.DOMPurify):Sm(()=>import("./purify.es-B6FQ9oRL.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var n=function(o){var A=Vr(o);return A==="undefined"?"undefined":A==="string"||o instanceof String?"string":A==="number"||o instanceof Number?"number":A==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":A==="object"?"object":"unknown"},i=function(o,A){var l=document.createElement(o);for(var c in A.className&&(l.className=A.className),A.innerHTML&&A.dompurify&&(l.innerHTML=A.dompurify.sanitize(A.innerHTML)),A.style)l.style[c]=A.style[c];return l},s=function o(A,l){for(var c=A.nodeType===3?document.createTextNode(A.nodeValue):A.cloneNode(!1),u=A.firstChild;u;u=u.nextSibling)l!==!0&&u.nodeType===1&&u.nodeName==="SCRIPT"||c.appendChild(o(u,l));return A.nodeType===1&&(A.nodeName==="CANVAS"?(c.width=A.width,c.height=A.height,c.getContext("2d").drawImage(A,0,0)):A.nodeName!=="TEXTAREA"&&A.nodeName!=="SELECT"||(c.value=A.value),c.addEventListener("load",function(){c.scrollTop=A.scrollTop,c.scrollLeft=A.scrollLeft},!0)),c},a=function o(A){var l=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),c=o.convert(Promise.resolve(),l);return(c=c.setProgress(1,o,1,[o])).set(A)};(a.prototype=Object.create(Promise.prototype)).constructor=a,a.convert=function(o,A){return o.__proto__=A||a.prototype,o},a.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},a.prototype.from=function(o,A){return this.then(function(){switch(A=A||(function(l){switch(n(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(o),A){case"string":return this.then(e).then(function(l){return this.set({src:i("div",{innerHTML:o,dompurify:l})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},a.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},a.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},A=s(this.prop.src,this.opt.html2canvas.javascriptEnabled);A.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(A),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},a.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(A){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,A(this.prop.container,l)}).then(function(A){(this.opt.html2canvas.onrendered||function(){})(A),this.prop.canvas=A,document.body.removeChild(this.prop.overlay)})},a.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(A){var l=this.opt.jsPDF,c=this.opt.fontFaces,u=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,h=Object.assign({async:!0,allowTaint:!0,scale:u,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete h.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=c,c)for(var d=0;d<c.length;++d){var m=c[d],f=m.src.find(function(b){return b.format==="truetype"});f&&l.addFont(f.url,m.ref.name,m.ref.style)}return h.windowHeight=h.windowHeight||0,h.windowHeight=h.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):h.windowHeight,l.context2d.save(!0),A(this.prop.container,h)}).then(function(A){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(A),this.prop.canvas=A,document.body.removeChild(this.prop.overlay)})},a.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},a.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},a.prototype.output=function(o,A,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(o,A):this.outputPdf(o,A)},a.prototype.outputPdf=function(o,A){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,A)})},a.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},a.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},a.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},a.prototype.set=function(o){if(n(o)!=="object")return this;var A=Object.keys(o||{}).map(function(l){if(l in a.template.prop)return function(){this.prop[l]=o[l]};switch(l){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[l]=o[l]}}},this);return this.then(function(){return this.thenList(A)})},a.prototype.get=function(o,A){return this.then(function(){var l=o in a.template.prop?this.prop[o]:this.opt[o];return A?A(l):l})},a.prototype.setMargin=function(o){return this.then(function(){switch(n(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},a.prototype.setPageSize=function(o){function A(l,c){return Math.floor(l*c/72*96)}return this.then(function(){(o=o||_e.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:A(o.inner.width,o.k),height:A(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},a.prototype.setProgress=function(o,A,l,c){return o!=null&&(this.progress.val=o),A!=null&&(this.progress.state=A),l!=null&&(this.progress.n=l),c!=null&&(this.progress.stack=c),this.progress.ratio=this.progress.val/this.progress.state,this},a.prototype.updateProgress=function(o,A,l,c){return this.setProgress(o?this.progress.val+o:null,A||null,l?this.progress.n+l:null,c?this.progress.stack.concat(c):null)},a.prototype.then=function(o,A){var l=this;return this.thenCore(o,A,function(c,u){return l.updateProgress(null,null,1,[c]),Promise.prototype.then.call(this,function(h){return l.updateProgress(null,c),h}).then(c,u).then(function(h){return l.updateProgress(1),h})})},a.prototype.thenCore=function(o,A,l){l=l||Promise.prototype.then;var c=this;o&&(o=o.bind(c)),A&&(A=A.bind(c));var u=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?c:a.convert(Object.assign({},c),Promise.prototype),h=l.call(u,o,A);return a.convert(h,c.__proto__)},a.prototype.thenExternal=function(o,A){return Promise.prototype.then.call(this,o,A)},a.prototype.thenList=function(o){var A=this;return o.forEach(function(l){A=A.thenCore(l)}),A},a.prototype.catch=function(o){o&&(o=o.bind(this));var A=Promise.prototype.catch.call(this,o);return a.convert(A,this)},a.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},a.prototype.error=function(o){return this.then(function(){throw new Error(o)})},a.prototype.using=a.prototype.set,a.prototype.saveAs=a.prototype.save,a.prototype.export=a.prototype.output,a.prototype.run=a.prototype.then,_e.getPageSize=function(o,A,l){if(Vr(o)==="object"){var c=o;o=c.orientation,A=c.unit||A,l=c.format||l}A=A||"mm",l=l||"a4",o=(""+(o||"P")).toLowerCase();var u,h=(""+l).toLowerCase(),d={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(A){case"pt":u=1;break;case"mm":u=72/25.4;break;case"cm":u=72/2.54;break;case"in":u=72;break;case"px":u=.75;break;case"pc":case"em":u=12;break;case"ex":u=6;break;default:throw"Invalid unit: "+A}var m,f=0,b=0;if(d.hasOwnProperty(h))f=d[h][1]/u,b=d[h][0]/u;else try{f=l[1],b=l[0]}catch{throw new Error("Invalid format: "+l)}if(o==="p"||o==="portrait")o="p",b>f&&(m=b,b=f,f=m);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",f>b&&(m=b,b=f,f=m)}return{width:b,height:f,unit:A,k:u,orientation:o}},r.html=function(o,A){(A=A||{}).callback=A.callback||function(){},A.html2canvas=A.html2canvas||{},A.html2canvas.canvas=A.html2canvas.canvas||this.canvas,A.jsPDF=A.jsPDF||this,A.fontFaces=A.fontFaces?A.fontFaces.map(cw):null;var l=new a(A);return A.worker?l:l.from(o).doCallback()}})(_e.API),_e.API.addJS=function(r){return eE=r,this.internal.events.subscribe("postPutResources",function(){Jp=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Jp+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),tE=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+eE+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Jp!==void 0&&tE!==void 0&&this.internal.out("/Names <</JavaScript "+Jp+" 0 R>>")}),this},(function(r){var t;r.events.push(["postPutResources",function(){var e=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=e.outline.render().split(/\r\n/),s=0;s<i.length;s++){var a=i[s],o=n.exec(a);if(o!=null){var A=o[1];e.internal.newObjectDeferredBegin(A,!1)}e.internal.write(a)}if(this.outline.createNamedDestinations){var l=this.internal.pages.length,c=[];for(s=0;s<l;s++){var u=e.internal.newObject();c.push(u);var h=e.internal.getPageInfo(s+1);e.internal.write("<< /D["+h.objId+" 0 R /XYZ null null null]>> endobj")}var d=e.internal.newObject();for(e.internal.write("<< /Names [ "),s=0;s<c.length;s++)e.internal.write("(page_"+(s+1)+")"+c[s]+" 0 R");e.internal.write(" ] >>","endobj"),t=e.internal.newObject(),e.internal.write("<< /Dests "+d+" 0 R"),e.internal.write(">>","endobj")}}]),r.events.push(["putCatalog",function(){var e=this;e.outline.root.children.length>0&&(e.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&e.internal.write("/Names "+t+" 0 R"))}]),r.events.push(["initialized",function(){var e=this;e.outline={createNamedDestinations:!1,root:{children:[]}},e.outline.add=function(n,i,s){var a={title:i,options:s,children:[]};return n==null&&(n=this.root),n.children.push(a),a},e.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=e,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},e.outline.genIds_r=function(n){n.id=e.internal.newObjectDeferred();for(var i=0;i<n.children.length;i++)this.genIds_r(n.children[i])},e.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},e.outline.renderItems=function(n){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<n.children.length;s++){var a=n.children[s];this.objStart(a),this.line("/Title "+this.makeString(a.title)),this.line("/Parent "+this.makeRef(n)),s>0&&this.line("/Prev "+this.makeRef(n.children[s-1])),s<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[s+1])),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1])));var o=this.count=this.count_r({count:0},a);if(o>0&&this.line("/Count "+o),a.options&&a.options.pageNumber){var A=e.internal.getPageInfo(a.options.pageNumber);this.line("/Dest ["+A.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var l=0;l<n.children.length;l++)this.renderItems(n.children[l])},e.outline.line=function(n){this.ctx.val+=n+`\r
`},e.outline.makeRef=function(n){return n.id+" 0 R"},e.outline.makeString=function(n){return"("+e.internal.pdfEscape(n)+")"},e.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},e.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},e.outline.count_r=function(n,i){for(var s=0;s<i.children.length;s++)n.count++,this.count_r(n,i.children[s]);return n.count}}])})(_e.API),(function(r){var t=[192,193,194,195,196,197,198,199];r.processJPEG=function(e,n,i,s,a,o){var A,l=this.decode.DCT_DECODE,c=null;if(typeof e=="string"||this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e)){switch(e=a||e,e=this.__addimage__.isArrayBuffer(e)?new Uint8Array(e):e,A=(function(u){for(var h,d=256*u.charCodeAt(4)+u.charCodeAt(5),m=u.length,f={width:0,height:0,numcomponents:1},b=4;b<m;b+=2){if(b+=d,t.indexOf(u.charCodeAt(b+1))!==-1){h=256*u.charCodeAt(b+5)+u.charCodeAt(b+6),f={width:256*u.charCodeAt(b+7)+u.charCodeAt(b+8),height:h,numcomponents:u.charCodeAt(b+9)};break}d=256*u.charCodeAt(b+2)+u.charCodeAt(b+3)}return f})(e=this.__addimage__.isArrayBufferView(e)?this.__addimage__.arrayBufferToBinaryString(e):e),A.numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}c={data:e,width:A.width,height:A.height,colorSpace:o,bitsPerComponent:8,filter:l,index:n,alias:i}}return c}})(_e.API),_e.API.processPNG=function(r,t,e,n){if(this.__addimage__.isArrayBuffer(r)&&(r=new Uint8Array(r)),this.__addimage__.isArrayBufferView(r)){var i,s=Kz(r,{checkCrc:!0}),a=s.width,o=s.height,A=s.channels,l=s.palette,c=s.depth;i=l&&A===1?(function(x){for(var v=x.width,T=x.height,E=x.data,_=x.palette,F=x.depth,k=!1,Z=[],ut=[],nt=void 0,j=!1,G=0,pt=0;pt<_.length;pt++){var q=sC(_[pt],4),L=q[0],O=q[1],V=q[2],X=q[3];Z.push(L,O,V),X!=null&&(X===0?(G++,ut.length<1&&ut.push(pt)):X<255&&(j=!0))}if(j||G>1){k=!0,ut=void 0;var At=v*T;nt=new Uint8Array(At);for(var et=new DataView(E.buffer),st=0;st<At;st++){var dt=dw(et,st,F),vt=sC(_[dt],4)[3];nt[st]=vt}}else G===0&&(ut=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:k?8:void 0,colorBytes:E,alphaBytes:nt,needSMask:k,palette:Z,mask:ut}})(s):A===2||A===4?(function(x){for(var v=x.data,T=x.width,E=x.height,_=x.channels,F=x.depth,k=_===2?"DeviceGray":"DeviceRGB",Z=_-1,ut=T*E,nt=Z,j=ut*nt,G=1*ut,pt=Math.ceil(j*F/8),q=Math.ceil(G*F/8),L=new Uint8Array(pt),O=new Uint8Array(q),V=new DataView(v.buffer),X=new DataView(L.buffer),At=new DataView(O.buffer),et=!1,st=0;st<ut;st++){for(var dt=st*_,vt=0;vt<nt;vt++)cE(X,dw(V,dt+vt,F),st*nt+vt,F);var _t=dw(V,dt+nt,F);_t<(1<<F)-1&&(et=!0),cE(At,_t,1*st,F)}return{colorSpace:k,colorsPerPixel:Z,sMaskBitsPerComponent:et?F:void 0,colorBytes:L,alphaBytes:O,needSMask:et}})(s):(function(x){var v=x.data,T=x.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:T,colorsPerPixel:T==="DeviceGray"?1:3,colorBytes:v instanceof Uint16Array?(function(E){for(var _=E.length,F=new Uint8Array(2*_),k=new DataView(F.buffer,F.byteOffset,F.byteLength),Z=0;Z<_;Z++)k.setUint16(2*Z,E[Z],!1);return F})(v):v,needSMask:!1}})(s);var u,h,d,m=i,f=m.colorSpace,b=m.colorsPerPixel,y=m.sMaskBitsPerComponent,B=m.colorBytes,I=m.alphaBytes,C=m.needSMask,N=m.palette,R=m.mask,U=null;return n!==_e.API.image_compression.NONE&&typeof P1=="function"?(U=(function(x){var v;switch(x){case _e.API.image_compression.FAST:v=11;break;case _e.API.image_compression.MEDIUM:v=13;break;case _e.API.image_compression.SLOW:v=14;break;default:v=12}return v})(n),u=this.decode.FLATE_DECODE,h="/Predictor ".concat(U," /Colors ").concat(b," /BitsPerComponent ").concat(c," /Columns ").concat(a),r=sE(B,Math.ceil(a*b*c/8),b,c,n),C&&(d=sE(I,Math.ceil(a*y/8),1,y,n))):(u=void 0,h=void 0,r=B,C&&(d=I)),(this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r))&&(r=this.__addimage__.arrayBufferToBinaryString(r)),(d&&this.__addimage__.isArrayBuffer(d)||this.__addimage__.isArrayBufferView(d))&&(d=this.__addimage__.arrayBufferToBinaryString(d)),{alias:e,data:r,index:t,filter:u,decodeParameters:h,transparency:R,palette:N,sMask:d,predictor:U,width:a,height:o,bitsPerComponent:c,sMaskBitsPerComponent:y,colorSpace:f}}},(function(r){r.processGIF89A=function(t,e,n,i){var s=new hq(t),a=s.width,o=s.height,A=[];s.decodeAndBlitFrameRGBA(0,A);var l={data:A,width:a,height:o},c=new hw(100).encode(l,100);return r.processJPEG.call(this,c,e,n,i)},r.processGIF87A=r.processGIF89A})(_e.API),Va.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var r=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(r);for(var t=0;t<r;t++){var e=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:i,green:n,blue:e,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Va.prototype.parseBGR=function(){this.pos=this.offset;try{var r="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[r]()}catch(e){Xr.log("bit decode error:"+e)}},Va.prototype.bit1=function(){var r,t=Math.ceil(this.width/8),e=t%4;for(r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,i=0;i<t;i++)for(var s=this.datav.getUint8(this.pos++,!0),a=n*this.width*4+8*i*4,o=0;o<8&&8*i+o<this.width;o++){var A=this.palette[s>>7-o&1];this.data[a+4*o]=A.blue,this.data[a+4*o+1]=A.green,this.data[a+4*o+2]=A.red,this.data[a+4*o+3]=255}e!==0&&(this.pos+=4-e)}},Va.prototype.bit4=function(){for(var r=Math.ceil(this.width/2),t=r%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,i=0;i<r;i++){var s=this.datav.getUint8(this.pos++,!0),a=n*this.width*4+2*i*4,o=s>>4,A=15&s,l=this.palette[o];if(this.data[a]=l.blue,this.data[a+1]=l.green,this.data[a+2]=l.red,this.data[a+3]=255,2*i+1>=this.width)break;l=this.palette[A],this.data[a+4]=l.blue,this.data[a+4+1]=l.green,this.data[a+4+2]=l.red,this.data[a+4+3]=255}t!==0&&(this.pos+=4-t)}},Va.prototype.bit8=function(){for(var r=this.width%4,t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var i=this.datav.getUint8(this.pos++,!0),s=e*this.width*4+4*n;if(i<this.palette.length){var a=this.palette[i];this.data[s]=a.red,this.data[s+1]=a.green,this.data[s+2]=a.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}r!==0&&(this.pos+=4-r)}},Va.prototype.bit15=function(){for(var r=this.width%3,t=parseInt("11111",2),e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(s&t)/t*255|0,o=(s>>5&t)/t*255|0,A=(s>>10&t)/t*255|0,l=s>>15?255:0,c=n*this.width*4+4*i;this.data[c]=A,this.data[c+1]=o,this.data[c+2]=a,this.data[c+3]=l}this.pos+=r}},Va.prototype.bit16=function(){for(var r=this.width%3,t=parseInt("11111",2),e=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,s=0;s<this.width;s++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(a&t)/t*255|0,A=(a>>5&e)/e*255|0,l=(a>>11)/t*255|0,c=i*this.width*4+4*s;this.data[c]=l,this.data[c+1]=A,this.data[c+2]=o,this.data[c+3]=255}this.pos+=r}},Va.prototype.bit24=function(){for(var r=this.height-1;r>=0;r--){for(var t=this.bottom_up?r:this.height-1-r,e=0;e<this.width;e++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=t*this.width*4+4*e;this.data[a]=s,this.data[a+1]=i,this.data[a+2]=n,this.data[a+3]=255}this.pos+=this.width%4}},Va.prototype.bit32=function(){for(var r=this.height-1;r>=0;r--)for(var t=this.bottom_up?r:this.height-1-r,e=0;e<this.width;e++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*e;this.data[o]=s,this.data[o+1]=i,this.data[o+2]=n,this.data[o+3]=a}},Va.prototype.getData=function(){return this.data},(function(r){r.processBMP=function(t,e,n,i){var s=new Va(t,!1),a=s.width,o=s.height,A={data:s.getData(),width:a,height:o},l=new hw(100).encode(A,100);return r.processJPEG.call(this,l,e,n,i)}})(_e.API),dE.prototype.getData=function(){return this.data},(function(r){r.processWEBP=function(t,e,n,i){var s=new dE(t),a=s.width,o=s.height,A={data:s.getData(),width:a,height:o},l=new hw(100).encode(A,100);return r.processJPEG.call(this,l,e,n,i)}})(_e.API),_e.API.processRGBA=function(r,t,e){for(var n=r.data,i=n.length,s=new Uint8Array(i/4*3),a=new Uint8Array(i/4),o=0,A=0,l=0;l<i;l+=4){var c=n[l],u=n[l+1],h=n[l+2],d=n[l+3];s[o++]=c,s[o++]=u,s[o++]=h,a[A++]=d}var m=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(a),data:m,index:t,alias:e,colorSpace:"DeviceRGB",bitsPerComponent:8,width:r.width,height:r.height}},_e.API.setLanguage=function(r){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[r]!==void 0&&(this.internal.languageSettings.languageCode=r,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Gu=_e.API,Zp=Gu.getCharWidthsArray=function(r,t){var e,n,i=(t=t||{}).font||this.internal.getFont(),s=t.fontSize||this.internal.getFontSize(),a=t.charSpace||this.internal.getCharSpace(),o=t.widths?t.widths:i.metadata.Unicode.widths,A=o.fof?o.fof:1,l=t.kerning?t.kerning:i.metadata.Unicode.kerning,c=l.fof?l.fof:1,u=t.doKerning!==!1,h=0,d=r.length,m=0,f=o[0]||A,b=[];for(e=0;e<d;e++)n=r.charCodeAt(e),typeof i.metadata.widthOfString=="function"?b.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(n))+a*(1e3/s)||0)/1e3):(h=u&&Vr(l[n])==="object"&&!isNaN(parseInt(l[n][m],10))?l[n][m]/c:0,b.push((o[n]||f)/A+h)),m=n;return b},rE=Gu.getStringUnitWidth=function(r,t){var e=(t=t||{}).fontSize||this.internal.getFontSize(),n=t.font||this.internal.getFont(),i=t.charSpace||this.internal.getCharSpace();return Gu.processArabic&&(r=Gu.processArabic(r)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(r,e,i)/e:Zp.apply(this,arguments).reduce(function(s,a){return s+a},0)},nE=function(r,t,e,n){for(var i=[],s=0,a=r.length,o=0;s!==a&&o+t[s]<e;)o+=t[s],s++;i.push(r.slice(0,s));var A=s;for(o=0;s!==a;)o+t[s]>n&&(i.push(r.slice(A,s)),o=0,A=s),o+=t[s],s++;return A!==s&&i.push(r.slice(A,s)),i},iE=function(r,t,e){e||(e={});var n,i,s,a,o,A,l,c=[],u=[c],h=e.textIndent||0,d=0,m=0,f=r.split(" "),b=Zp.apply(this,[" ",e])[0];if(A=e.lineIndent===-1?f[0].length+2:e.lineIndent||0){var y=Array(A).join(" "),B=[];f.map(function(C){(C=C.split(/\s*\n/)).length>1?B=B.concat(C.map(function(N,R){return(R&&N.length?`
`:"")+N})):B.push(C[0])}),f=B,A=rE.apply(this,[y,e])}for(s=0,a=f.length;s<a;s++){var I=0;if(n=f[s],A&&n[0]==`
`&&(n=n.substr(1),I=1),h+d+(m=(i=Zp.apply(this,[n,e])).reduce(function(C,N){return C+N},0))>t||I){if(m>t){for(o=nE.apply(this,[n,i,t-(h+d),t]),c.push(o.shift()),c=[o.pop()];o.length;)u.push([o.shift()]);m=i.slice(n.length-(c[0]?c[0].length:0)).reduce(function(C,N){return C+N},0)}else c=[n];u.push(c),h=m+A,d=b}else c.push(n),h+=d+m,d=b}return l=A?function(C,N){return(N?y:"")+C.join(" ")}:function(C){return C.join(" ")},u.map(l)},Gu.splitTextToSize=function(r,t,e){var n,i=(e=e||{}).fontSize||this.internal.getFontSize(),s=(function(c){if(c.widths&&c.kerning)return{widths:c.widths,kerning:c.kerning};var u=this.internal.getFont(c.fontName,c.fontStyle),h="Unicode";return u.metadata[h]?{widths:u.metadata[h].widths||{0:1},kerning:u.metadata[h].kerning||{}}:{font:u.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,e);n=Array.isArray(r)?r:String(r).split(/\r?\n/);var a=1*this.internal.scaleFactor*t/i;s.textIndent=e.textIndent?1*e.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=e.lineIndent;var o,A,l=[];for(o=0,A=n.length;o<A;o++)l=l.concat(iE.apply(this,[n[o],a,s]));return l},(function(r){r.__fontmetrics__=r.__fontmetrics__||{};for(var t="0123456789abcdef",e="klmnopqrstuvwxyz",n={},i={},s=0;s<16;s++)n[e[s]]=t[s],i[t[s]]=e[s];var a=function(h){return"0x"+parseInt(h,10).toString(16)},o=r.__fontmetrics__.compress=function(h){var d,m,f,b,y=["{"];for(var B in h){if(d=h[B],isNaN(parseInt(B,10))?m="'"+B+"'":(B=parseInt(B,10),m=(m=a(B).slice(2)).slice(0,-1)+i[m.slice(-1)]),typeof d=="number")d<0?(f=a(d).slice(3),b="-"):(f=a(d).slice(2),b=""),f=b+f.slice(0,-1)+i[f.slice(-1)];else{if(Vr(d)!=="object")throw new Error("Don't know what to do with value type "+Vr(d)+".");f=o(d)}y.push(m+f)}return y.push("}"),y.join("")},A=r.__fontmetrics__.uncompress=function(h){if(typeof h!="string")throw new Error("Invalid argument passed to uncompress.");for(var d,m,f,b,y={},B=1,I=y,C=[],N="",R="",U=h.length-1,x=1;x<U;x+=1)(b=h[x])=="'"?d?(f=d.join(""),d=void 0):d=[]:d?d.push(b):b=="{"?(C.push([I,f]),I={},f=void 0):b=="}"?((m=C.pop())[0][m[1]]=I,f=void 0,I=m[0]):b=="-"?B=-1:f===void 0?n.hasOwnProperty(b)?(N+=n[b],f=parseInt(N,16)*B,B=1,N=""):N+=b:n.hasOwnProperty(b)?(R+=n[b],I[f]=parseInt(R,16)*B,B=1,f=void 0,R=""):R+=b;return y},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:A("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},c={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},u={Unicode:{"Courier-Oblique":A("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":A("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":A("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:A("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":A("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":A("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:A("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:A("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":A("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:A("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":A("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":A("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":A("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":A("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};r.events.push(["addFont",function(h){var d=h.font,m=u.Unicode[d.postScriptName];m&&(d.metadata.Unicode={},d.metadata.Unicode.widths=m.widths,d.metadata.Unicode.kerning=m.kerning);var f=c.Unicode[d.postScriptName];f&&(d.metadata.Unicode.encoding=f,d.encoding=f.codePages[0])}])})(_e.API),(function(r){var t=function(e){for(var n=e.length,i=new Uint8Array(n),s=0;s<n;s++)i[s]=e.charCodeAt(s);return i};r.API.events.push(["addFont",function(e){var n=void 0,i=e.font,s=e.instance;if(!i.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(n=s.existsFileInVFS(i.postScriptName)===!1?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(a,o){o=/^\x00\x01\x00\x00/.test(o)?t(o):t(Im(o)),a.metadata=r.API.TTFFont.open(o),a.metadata.Unicode=a.metadata.Unicode||{encoding:{},kerning:{},widths:[]},a.metadata.glyIdsUsed=[0]})(i,n)}}])})(_e),_e.API.addSvgAsImage=function(r,t,e,n,i,s,a,o){if(isNaN(t)||isNaN(e))throw Xr.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(n)||isNaN(i))throw Xr.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var A=document.createElement("canvas");A.width=n,A.height=i;var l=A.getContext("2d");l.fillStyle="#fff",l.fillRect(0,0,A.width,A.height);var c={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},u=this;return(Ge.canvg?Promise.resolve(Ge.canvg):Sm(()=>import("./index.es-rD9F7R2b.js"),[])).catch(function(h){return Promise.reject(new Error("Could not load canvg: "+h))}).then(function(h){return h.default?h.default:h}).then(function(h){return h.fromString(l,r,c)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(h){return h.render(c)}).then(function(){u.addImage(A.toDataURL("image/jpeg",1),t,e,n,i,a,o)})},_e.API.putTotalPages=function(r){var t,e=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(r,"g"),e=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(r,this.internal.getFont()),"g"),e=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var i=0;i<this.internal.pages[n].length;i++)this.internal.pages[n][i]=this.internal.pages[n][i].replace(t,e);return this},_e.API.viewerPreferences=function(r,t){var e;r=r||{},t=t||!1;var n,i,s,a={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(a),A=[],l=0,c=0,u=0;function h(m,f){var b,y=!1;for(b=0;b<m.length;b+=1)m[b]===f&&(y=!0);return y}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(a)),this.internal.viewerpreferences.isSubscribed=!1),e=this.internal.viewerpreferences.configuration,r==="reset"||t===!0){var d=o.length;for(u=0;u<d;u+=1)e[o[u]].value=e[o[u]].defaultValue,e[o[u]].explicitSet=!1}if(Vr(r)==="object"){for(i in r)if(s=r[i],h(o,i)&&s!==void 0){if(e[i].type==="boolean"&&typeof s=="boolean")e[i].value=s;else if(e[i].type==="name"&&h(e[i].valueSet,s))e[i].value=s;else if(e[i].type==="integer"&&Number.isInteger(s))e[i].value=s;else if(e[i].type==="array"){for(l=0;l<s.length;l+=1)if(n=!0,s[l].length===1&&typeof s[l][0]=="number")A.push(String(s[l]-1));else if(s[l].length>1){for(c=0;c<s[l].length;c+=1)typeof s[l][c]!="number"&&(n=!1);n===!0&&A.push([s[l][0]-1,s[l][1]-1].join(" "))}e[i].value="["+A.join(" ")+"]"}else e[i].value=e[i].defaultValue;e[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var m,f=[];for(m in e)e[m].explicitSet===!0&&(e[m].type==="name"?f.push("/"+m+" /"+e[m].value):f.push("/"+m+" "+e[m].value));f.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+f.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=e,this},(function(r){var t=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(n)),a=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),A=unescape(encodeURIComponent("</x:xmpmeta>")),l=s.length+a.length+o.length+i.length+A.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+l+" >>"),this.internal.write("stream"),this.internal.write(i+s+a+o+A),this.internal.write("endstream"),this.internal.write("endobj")},e=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};r.addMetadata=function(n,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",e),this.internal.events.subscribe("postPutResources",t)),this}})(_e.API),(function(r){var t=r.API,e=t.pdfEscape16=function(s,a){for(var o,A=a.metadata.Unicode.widths,l=["","0","00","000","0000"],c=[""],u=0,h=s.length;u<h;++u){if(o=a.metadata.characterToGlyph(s.charCodeAt(u)),a.metadata.glyIdsUsed.push(o),a.metadata.toUnicode[o]=s.charCodeAt(u),A.indexOf(o)==-1&&(A.push(o),A.push([parseInt(a.metadata.widthOfGlyph(o),10)])),o=="0")return c.join("");o=o.toString(16),c.push(l[4-o.length],o)}return c.join("")},n=function(s){var a,o,A,l,c,u,h;for(c=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,A=[],u=0,h=(o=Object.keys(s).sort(function(d,m){return d-m})).length;u<h;u++)a=o[u],A.length>=100&&(c+=`
`+A.length+` beginbfchar
`+A.join(`
`)+`
endbfchar`,A=[]),s[a]!==void 0&&s[a]!==null&&typeof s[a].toString=="function"&&(l=("0000"+s[a].toString(16)).slice(-4),a=("0000"+(+a).toString(16)).slice(-4),A.push("<"+a+"><"+l+">"));return A.length&&(c+=`
`+A.length+` beginbfchar
`+A.join(`
`)+`
endbfchar
`),c+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(s){(function(a){var o=a.font,A=a.out,l=a.newObject,c=a.putStream;if(o.metadata instanceof r.API.TTFFont&&o.encoding==="Identity-H"){for(var u=o.metadata.Unicode.widths,h=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),d="",m=0;m<h.length;m++)d+=String.fromCharCode(h[m]);var f=l();c({data:d,addLength1:!0,objectId:f}),A("endobj");var b=l();c({data:n(o.metadata.toUnicode),addLength1:!0,objectId:b}),A("endobj");var y=l();A("<<"),A("/Type /FontDescriptor"),A("/FontName /"+Yu(o.fontName)),A("/FontFile2 "+f+" 0 R"),A("/FontBBox "+r.API.PDFObject.convert(o.metadata.bbox)),A("/Flags "+o.metadata.flags),A("/StemV "+o.metadata.stemV),A("/ItalicAngle "+o.metadata.italicAngle),A("/Ascent "+o.metadata.ascender),A("/Descent "+o.metadata.decender),A("/CapHeight "+o.metadata.capHeight),A(">>"),A("endobj");var B=l();A("<<"),A("/Type /Font"),A("/BaseFont /"+Yu(o.fontName)),A("/FontDescriptor "+y+" 0 R"),A("/W "+r.API.PDFObject.convert(u)),A("/CIDToGIDMap /Identity"),A("/DW 1000"),A("/Subtype /CIDFontType2"),A("/CIDSystemInfo"),A("<<"),A("/Supplement 0"),A("/Registry (Adobe)"),A("/Ordering ("+o.encoding+")"),A(">>"),A(">>"),A("endobj"),o.objectNumber=l(),A("<<"),A("/Type /Font"),A("/Subtype /Type0"),A("/ToUnicode "+b+" 0 R"),A("/BaseFont /"+Yu(o.fontName)),A("/Encoding /"+o.encoding),A("/DescendantFonts ["+B+" 0 R]"),A(">>"),A("endobj"),o.isAlreadyPutted=!0}})(s)}]),t.events.push(["putFont",function(s){(function(a){var o=a.font,A=a.out,l=a.newObject,c=a.putStream;if(o.metadata instanceof r.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var u=o.metadata.rawData,h="",d=0;d<u.length;d++)h+=String.fromCharCode(u[d]);var m=l();c({data:h,addLength1:!0,objectId:m}),A("endobj");var f=l();c({data:n(o.metadata.toUnicode),addLength1:!0,objectId:f}),A("endobj");var b=l();A("<<"),A("/Descent "+o.metadata.decender),A("/CapHeight "+o.metadata.capHeight),A("/StemV "+o.metadata.stemV),A("/Type /FontDescriptor"),A("/FontFile2 "+m+" 0 R"),A("/Flags 96"),A("/FontBBox "+r.API.PDFObject.convert(o.metadata.bbox)),A("/FontName /"+Yu(o.fontName)),A("/ItalicAngle "+o.metadata.italicAngle),A("/Ascent "+o.metadata.ascender),A(">>"),A("endobj"),o.objectNumber=l();for(var y=0;y<o.metadata.hmtx.widths.length;y++)o.metadata.hmtx.widths[y]=parseInt(o.metadata.hmtx.widths[y]*(1e3/o.metadata.head.unitsPerEm));A("<</Subtype/TrueType/Type/Font/ToUnicode "+f+" 0 R/BaseFont/"+Yu(o.fontName)+"/FontDescriptor "+b+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+r.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),A("endobj"),o.isAlreadyPutted=!0}})(s)}]);var i=function(s){var a,o=s.text||"",A=s.x,l=s.y,c=s.options||{},u=s.mutex||{},h=u.pdfEscape,d=u.activeFontKey,m=u.fonts,f=d,b="",y=0,B="",I=m[f].encoding;if(m[f].encoding!=="Identity-H")return{text:o,x:A,y:l,options:c,mutex:u};for(B=o,f=d,Array.isArray(o)&&(B=o[0]),y=0;y<B.length;y+=1)m[f].metadata.hasOwnProperty("cmap")&&(a=m[f].metadata.cmap.unicode.codeMap[B[y].charCodeAt(0)]),a||B[y].charCodeAt(0)<256&&m[f].metadata.hasOwnProperty("Unicode")?b+=B[y]:b+="";var C="";return parseInt(f.slice(1))<14||I==="WinAnsiEncoding"?C=h(b,f).split("").map(function(N){return N.charCodeAt(0).toString(16)}).join(""):I==="Identity-H"&&(C=e(b,m[f])),u.isHex=!0,{text:C,x:A,y:l,options:c,mutex:u}};t.events.push(["postProcessText",function(s){var a=s.text||"",o=[],A={text:a,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(a)){var l=0;for(l=0;l<a.length;l+=1)Array.isArray(a[l])&&a[l].length===3?o.push([i(Object.assign({},A,{text:a[l][0]})).text,a[l][1],a[l][2]]):o.push(i(Object.assign({},A,{text:a[l]})).text);s.text=o}else s.text=i(Object.assign({},A,{text:a})).text}])})(_e),(function(r){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};r.existsFileInVFS=function(e){return t.call(this),this.internal.vFS[e]!==void 0},r.addFileToVFS=function(e,n){return t.call(this),this.internal.vFS[e]=n,this},r.getFileFromVFS=function(e){return t.call(this),this.internal.vFS[e]!==void 0?this.internal.vFS[e]:null}})(_e.API),(function(r){r.__bidiEngine__=r.prototype.__bidiEngine__=function(n){var i,s,a,o,A,l,c,u=t,h=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],d=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],m={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},f={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},b=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],y=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),B=!1,I=0;this.__bidiEngine__={};var C=function(E){var _=E.charCodeAt(),F=_>>8,k=f[F];return k!==void 0?u[256*k+(255&_)]:F===252||F===253?"AL":y.test(F)?"L":F===8?"R":"N"},N=function(E){for(var _,F=0;F<E.length;F++){if((_=C(E.charAt(F)))==="L")return!1;if(_==="R")return!0}return!1},R=function(E,_,F,k){var Z,ut,nt,j,G=_[k];switch(G){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":B=!1;break;case"N":case"AN":break;case"EN":B&&(G="AN");break;case"AL":B=!0,G="R";break;case"WS":case"BN":G="N";break;case"CS":k<1||k+1>=_.length||(Z=F[k-1])!=="EN"&&Z!=="AN"||(ut=_[k+1])!=="EN"&&ut!=="AN"?G="N":B&&(ut="AN"),G=ut===Z?ut:"N";break;case"ES":G=(Z=k>0?F[k-1]:"B")==="EN"&&k+1<_.length&&_[k+1]==="EN"?"EN":"N";break;case"ET":if(k>0&&F[k-1]==="EN"){G="EN";break}if(B){G="N";break}for(nt=k+1,j=_.length;nt<j&&_[nt]==="ET";)nt++;G=nt<j&&_[nt]==="EN"?"EN":"N";break;case"NSM":if(a&&!o){for(j=_.length,nt=k+1;nt<j&&_[nt]==="NSM";)nt++;if(nt<j){var pt=E[k],q=pt>=1425&&pt<=2303||pt===64286;if(Z=_[nt],q&&(Z==="R"||Z==="AL")){G="R";break}}}G=k<1||(Z=_[k-1])==="B"?"N":F[k-1];break;case"B":B=!1,i=!0,G=I;break;case"S":s=!0,G="N"}return G},U=function(E,_,F){var k=E.split("");return F&&x(k,F,{hiLevel:I}),k.reverse(),_&&_.reverse(),k.join("")},x=function(E,_,F){var k,Z,ut,nt,j,G=-1,pt=E.length,q=0,L=[],O=I?d:h,V=[];for(B=!1,i=!1,s=!1,Z=0;Z<pt;Z++)V[Z]=C(E[Z]);for(ut=0;ut<pt;ut++){if(j=q,L[ut]=R(E,V,L,ut),k=240&(q=O[j][m[L[ut]]]),q&=15,_[ut]=nt=O[q][5],k>0)if(k===16){for(Z=G;Z<ut;Z++)_[Z]=1;G=-1}else G=-1;if(O[q][6])G===-1&&(G=ut);else if(G>-1){for(Z=G;Z<ut;Z++)_[Z]=nt;G=-1}V[ut]==="B"&&(_[ut]=0),F.hiLevel|=nt}s&&(function(X,At,et){for(var st=0;st<et;st++)if(X[st]==="S"){At[st]=I;for(var dt=st-1;dt>=0&&X[dt]==="WS";dt--)At[dt]=I}})(V,_,pt)},v=function(E,_,F,k,Z){if(!(Z.hiLevel<E)){if(E===1&&I===1&&!i)return _.reverse(),void(F&&F.reverse());for(var ut,nt,j,G,pt=_.length,q=0;q<pt;){if(k[q]>=E){for(j=q+1;j<pt&&k[j]>=E;)j++;for(G=q,nt=j-1;G<nt;G++,nt--)ut=_[G],_[G]=_[nt],_[nt]=ut,F&&(ut=F[G],F[G]=F[nt],F[nt]=ut);q=j}q++}}},T=function(E,_,F){var k=E.split(""),Z={hiLevel:I};return F||(F=[]),x(k,F,Z),(function(ut,nt,j){if(j.hiLevel!==0&&c)for(var G,pt=0;pt<ut.length;pt++)nt[pt]===1&&(G=b.indexOf(ut[pt]))>=0&&(ut[pt]=b[G+1])})(k,F,Z),v(2,k,_,F,Z),v(1,k,_,F,Z),k.join("")};return this.__bidiEngine__.doBidiReorder=function(E,_,F){if((function(Z,ut){if(ut)for(var nt=0;nt<Z.length;nt++)ut[nt]=nt;o===void 0&&(o=N(Z)),l===void 0&&(l=N(Z))})(E,_),a||!A||l)if(a&&A&&o^l)I=o?1:0,E=U(E,_,F);else if(!a&&A&&l)I=o?1:0,E=T(E,_,F),E=U(E,_);else if(!a||o||A||l){if(a&&!A&&o^l)E=U(E,_),o?(I=0,E=T(E,_,F)):(I=1,E=T(E,_,F),E=U(E,_));else if(a&&o&&!A&&l)I=1,E=T(E,_,F),E=U(E,_);else if(!a&&!A&&o^l){var k=c;o?(I=1,E=T(E,_,F),I=0,c=!1,E=T(E,_,F),c=k):(I=0,E=T(E,_,F),E=U(E,_),I=1,c=!1,E=T(E,_,F),c=k,E=U(E,_))}}else I=0,E=T(E,_,F);else I=o?1:0,E=T(E,_,F);return E},this.__bidiEngine__.setOptions=function(E){E&&(a=E.isInputVisual,A=E.isOutputVisual,o=E.isInputRtl,l=E.isOutputRtl,c=E.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],e=new r.__bidiEngine__({isInputVisual:!0});r.API.events.push(["postProcessText",function(n){var i=n.text;n.x,n.y;var s=n.options||{};n.mutex,s.lang;var a=[];if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,e.setOptions(s),Object.prototype.toString.call(i)==="[object Array]"){var o=0;for(a=[],o=0;o<i.length;o+=1)Object.prototype.toString.call(i[o])==="[object Array]"?a.push([e.doBidiReorder(i[o][0]),i[o][1],i[o][2]]):a.push([e.doBidiReorder(i[o])]);n.text=a}else n.text=e.doBidiReorder(i);e.setOptions({isInputVisual:!0})}])})(_e),_e.API.TTFFont=(function(){function r(t){var e;if(this.rawData=t,e=this.contents=new ql(t),this.contents.pos=4,e.readString(4)==="ttcf")throw new Error("TTCF not supported.");e.pos=0,this.parse(),this.subset=new kq(this),this.registerTTF()}return r.open=function(t){return new r(t)},r.prototype.parse=function(){return this.directory=new fq(this.contents),this.head=new pq(this),this.name=new vq(this),this.cmap=new Z4(this),this.toUnicode={},this.hhea=new mq(this),this.maxp=new xq(this),this.hmtx=new _q(this),this.post=new yq(this),this.os2=new bq(this),this.loca=new Sq(this),this.glyf=new Bq(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},r.prototype.registerTTF=function(){var t,e,n,i,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var a,o,A,l;for(l=[],a=0,o=(A=this.bbox).length;a<o;a++)t=A[a],l.push(Math.round(t*this.scaleFactor));return l}).call(this),this.stemV=0,this.post.exists?(n=255&(i=this.post.italic_angle),32768&(e=i>>16)&&(e=-(1+(65535^e))),this.italicAngle=+(e+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},r.prototype.characterToGlyph=function(t){var e;return((e=this.cmap.unicode)!=null?e.codeMap[t]:void 0)||0},r.prototype.widthOfGlyph=function(t){var e;return e=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*e},r.prototype.widthOfString=function(t,e,n){var i,s,a,o;for(a=0,s=0,o=(t=""+t).length;0<=o?s<o:s>o;s=0<=o?++s:--s)i=t.charCodeAt(s),a+=this.widthOfGlyph(this.characterToGlyph(i))+n*(1e3/e)||0;return a*(e/1e3)},r.prototype.lineHeight=function(t,e){var n;return e==null&&(e=!1),n=e?this.lineGap:0,(this.ascender+n-this.decender)/1e3*t},r})();var so,ql=(function(){function r(t){this.data=t??[],this.pos=0,this.length=this.data.length}return r.prototype.readByte=function(){return this.data[this.pos++]},r.prototype.writeByte=function(t){return this.data[this.pos++]=t},r.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},r.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},r.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},r.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},r.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},r.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},r.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},r.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},r.prototype.readString=function(t){var e,n;for(n=[],e=0;0<=t?e<t:e>t;e=0<=t?++e:--e)n[e]=String.fromCharCode(this.readByte());return n.join("")},r.prototype.writeString=function(t){var e,n,i;for(i=[],e=0,n=t.length;0<=n?e<n:e>n;e=0<=n?++e:--e)i.push(this.writeByte(t.charCodeAt(e)));return i},r.prototype.readShort=function(){return this.readInt16()},r.prototype.writeShort=function(t){return this.writeInt16(t)},r.prototype.readLongLong=function(){var t,e,n,i,s,a,o,A;return t=this.readByte(),e=this.readByte(),n=this.readByte(),i=this.readByte(),s=this.readByte(),a=this.readByte(),o=this.readByte(),A=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^e)+1099511627776*(255^n)+4294967296*(255^i)+16777216*(255^s)+65536*(255^a)+256*(255^o)+(255^A)+1):72057594037927940*t+281474976710656*e+1099511627776*n+4294967296*i+16777216*s+65536*a+256*o+A},r.prototype.writeLongLong=function(t){var e,n;return e=Math.floor(t/4294967296),n=4294967295&t,this.writeByte(e>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},r.prototype.readInt=function(){return this.readInt32()},r.prototype.writeInt=function(t){return this.writeInt32(t)},r.prototype.read=function(t){var e,n;for(e=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)e.push(this.readByte());return e},r.prototype.write=function(t){var e,n,i,s;for(s=[],n=0,i=t.length;n<i;n++)e=t[n],s.push(this.writeByte(e));return s},r})(),fq=(function(){var r;function t(e){var n,i,s;for(this.scalarType=e.readInt(),this.tableCount=e.readShort(),this.searchRange=e.readShort(),this.entrySelector=e.readShort(),this.rangeShift=e.readShort(),this.tables={},i=0,s=this.tableCount;0<=s?i<s:i>s;i=0<=s?++i:--i)n={tag:e.readString(4),checksum:e.readInt(),offset:e.readInt(),length:e.readInt()},this.tables[n.tag]=n}return t.prototype.encode=function(e){var n,i,s,a,o,A,l,c,u,h,d,m,f;for(f in d=Object.keys(e).length,A=Math.log(2),u=16*Math.floor(Math.log(d)/A),a=Math.floor(u/A),c=16*d-u,(i=new ql).writeInt(this.scalarType),i.writeShort(d),i.writeShort(u),i.writeShort(a),i.writeShort(c),s=16*d,l=i.pos+s,o=null,m=[],e)for(h=e[f],i.writeString(f),i.writeInt(r(h)),i.writeInt(l),i.writeInt(h.length),m=m.concat(h),f==="head"&&(o=l),l+=h.length;l%4;)m.push(0),l++;return i.write(m),n=2981146554-r(i.data),i.pos=o+8,i.writeUInt32(n),i.data},r=function(e){var n,i,s,a;for(e=tF.call(e);e.length%4;)e.push(0);for(s=new ql(e),i=0,n=0,a=e.length;n<a;n=n+=4)i+=s.readUInt32();return 4294967295&i},t})(),gq={}.hasOwnProperty,Go=function(r,t){for(var e in t)gq.call(t,e)&&(r[e]=t[e]);function n(){this.constructor=r}return n.prototype=t.prototype,r.prototype=new n,r.__super__=t.prototype,r};so=(function(){function r(t){var e;this.file=t,e=this.file.directory.tables[this.tag],this.exists=!!e,e&&(this.offset=e.offset,this.length=e.length,this.parse(this.file.contents))}return r.prototype.parse=function(){},r.prototype.encode=function(){},r.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},r})();var pq=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Go(r,so),r.prototype.tag="head",r.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},r.prototype.encode=function(t){var e;return(e=new ql).writeInt(this.version),e.writeInt(this.revision),e.writeInt(this.checkSumAdjustment),e.writeInt(this.magicNumber),e.writeShort(this.flags),e.writeShort(this.unitsPerEm),e.writeLongLong(this.created),e.writeLongLong(this.modified),e.writeShort(this.xMin),e.writeShort(this.yMin),e.writeShort(this.xMax),e.writeShort(this.yMax),e.writeShort(this.macStyle),e.writeShort(this.lowestRecPPEM),e.writeShort(this.fontDirectionHint),e.writeShort(t),e.writeShort(this.glyphDataFormat),e.data},r})(),hE=(function(){function r(t,e){var n,i,s,a,o,A,l,c,u,h,d,m,f,b,y,B,I;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=e+t.readInt(),u=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(A=0;A<256;++A)this.codeMap[A]=t.readByte();break;case 4:for(d=t.readUInt16(),h=d/2,t.pos+=6,s=(function(){var C,N;for(N=[],A=C=0;0<=h?C<h:C>h;A=0<=h?++C:--C)N.push(t.readUInt16());return N})(),t.pos+=2,f=(function(){var C,N;for(N=[],A=C=0;0<=h?C<h:C>h;A=0<=h?++C:--C)N.push(t.readUInt16());return N})(),l=(function(){var C,N;for(N=[],A=C=0;0<=h?C<h:C>h;A=0<=h?++C:--C)N.push(t.readUInt16());return N})(),c=(function(){var C,N;for(N=[],A=C=0;0<=h?C<h:C>h;A=0<=h?++C:--C)N.push(t.readUInt16());return N})(),i=(this.length-t.pos+this.offset)/2,o=(function(){var C,N;for(N=[],A=C=0;0<=i?C<i:C>i;A=0<=i?++C:--C)N.push(t.readUInt16());return N})(),A=y=0,I=s.length;y<I;A=++y)for(b=s[A],n=B=m=f[A];m<=b?B<=b:B>=b;n=m<=b?++B:--B)c[A]===0?a=n+l[A]:(a=o[c[A]/2+(n-m)-(h-A)]||0)!==0&&(a+=l[A]),this.codeMap[n]=65535&a}t.pos=u}return r.encode=function(t,e){var n,i,s,a,o,A,l,c,u,h,d,m,f,b,y,B,I,C,N,R,U,x,v,T,E,_,F,k,Z,ut,nt,j,G,pt,q,L,O,V,X,At,et,st,dt,vt,_t,Mt;switch(k=new ql,a=Object.keys(t).sort(function(Ot,D){return Ot-D}),e){case"macroman":for(f=0,b=(function(){var Ot=[];for(m=0;m<256;++m)Ot.push(0);return Ot})(),B={0:0},s={},Z=0,G=a.length;Z<G;Z++)B[dt=t[i=a[Z]]]==null&&(B[dt]=++f),s[i]={old:t[i],new:B[t[i]]},b[i]=B[t[i]];return k.writeUInt16(1),k.writeUInt16(0),k.writeUInt32(12),k.writeUInt16(0),k.writeUInt16(262),k.writeUInt16(0),k.write(b),{charMap:s,subtable:k.data,maxGlyphID:f+1};case"unicode":for(_=[],u=[],I=0,B={},n={},y=l=null,ut=0,pt=a.length;ut<pt;ut++)B[N=t[i=a[ut]]]==null&&(B[N]=++I),n[i]={old:N,new:B[N]},o=B[N]-i,y!=null&&o===l||(y&&u.push(y),_.push(i),l=o),y=i;for(y&&u.push(y),u.push(65535),_.push(65535),T=2*(v=_.length),x=2*Math.pow(Math.log(v)/Math.LN2,2),h=Math.log(x/2)/Math.LN2,U=2*v-x,A=[],R=[],d=[],m=nt=0,q=_.length;nt<q;m=++nt){if(E=_[m],c=u[m],E===65535){A.push(0),R.push(0);break}if(E-(F=n[E].new)>=32768)for(A.push(0),R.push(2*(d.length+v-m)),i=j=E;E<=c?j<=c:j>=c;i=E<=c?++j:--j)d.push(n[i].new);else A.push(F-E),R.push(0)}for(k.writeUInt16(3),k.writeUInt16(1),k.writeUInt32(12),k.writeUInt16(4),k.writeUInt16(16+8*v+2*d.length),k.writeUInt16(0),k.writeUInt16(T),k.writeUInt16(x),k.writeUInt16(h),k.writeUInt16(U),et=0,L=u.length;et<L;et++)i=u[et],k.writeUInt16(i);for(k.writeUInt16(0),st=0,O=_.length;st<O;st++)i=_[st],k.writeUInt16(i);for(vt=0,V=A.length;vt<V;vt++)o=A[vt],k.writeUInt16(o);for(_t=0,X=R.length;_t<X;_t++)C=R[_t],k.writeUInt16(C);for(Mt=0,At=d.length;Mt<At;Mt++)f=d[Mt],k.writeUInt16(f);return{charMap:n,subtable:k.data,maxGlyphID:I+1}}},r})(),Z4=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Go(r,so),r.prototype.tag="cmap",r.prototype.parse=function(t){var e,n,i;for(t.pos=this.offset,this.version=t.readUInt16(),i=t.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=i?n<i:n>i;n=0<=i?++n:--n)e=new hE(t,this.offset),this.tables.push(e),e.isUnicode&&this.unicode==null&&(this.unicode=e);return!0},r.encode=function(t,e){var n,i;return e==null&&(e="macroman"),n=hE.encode(t,e),(i=new ql).writeUInt16(0),i.writeUInt16(1),n.table=i.data.concat(n.subtable),n},r})(),mq=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Go(r,so),r.prototype.tag="hhea",r.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},r})(),bq=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Go(r,so),r.prototype.tag="OS/2",r.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=(function(){var e,n;for(n=[],e=0;e<10;++e)n.push(t.readByte());return n})(),this.charRange=(function(){var e,n;for(n=[],e=0;e<4;++e)n.push(t.readInt());return n})(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=(function(){var e,n;for(n=[],e=0;e<2;e=++e)n.push(t.readInt());return n})(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},r})(),yq=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Go(r,so),r.prototype.tag="post",r.prototype.parse=function(t){var e,n,i;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:case 196608:break;case 131072:var s;for(n=t.readUInt16(),this.glyphNameIndex=[],s=0;0<=n?s<n:s>n;s=0<=n?++s:--s)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],i=[];t.pos<this.offset+this.length;)e=t.readByte(),i.push(this.names.push(t.readString(e)));return i;case 151552:return n=t.readUInt16(),this.offsets=t.read(n);case 262144:return this.map=(function(){var a,o,A;for(A=[],s=a=0,o=this.file.maxp.numGlyphs;0<=o?a<o:a>o;s=0<=o?++a:--a)A.push(t.readUInt32());return A}).call(this)}},r})(),wq=function(r,t){this.raw=r,this.length=r.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},vq=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Go(r,so),r.prototype.tag="name",r.prototype.parse=function(t){var e,n,i,s,a,o,A,l,c,u,h;for(t.pos=this.offset,t.readShort(),e=t.readShort(),o=t.readShort(),n=[],s=0;0<=e?s<e:s>e;s=0<=e?++s:--s)n.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+o+t.readShort()});for(A={},s=c=0,u=n.length;c<u;s=++c)i=n[s],t.pos=i.offset,l=t.readString(i.length),a=new wq(l,i),A[h=i.nameID]==null&&(A[h]=[]),A[i.nameID].push(a);this.strings=A,this.copyright=A[0],this.fontFamily=A[1],this.fontSubfamily=A[2],this.uniqueSubfamily=A[3],this.fontName=A[4],this.version=A[5];try{this.postscriptName=A[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=A[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=A[7],this.manufacturer=A[8],this.designer=A[9],this.description=A[10],this.vendorUrl=A[11],this.designerUrl=A[12],this.license=A[13],this.licenseUrl=A[14],this.preferredFamily=A[15],this.preferredSubfamily=A[17],this.compatibleFull=A[18],this.sampleText=A[19]},r})(),xq=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Go(r,so),r.prototype.tag="maxp",r.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},r})(),_q=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Go(r,so),r.prototype.tag="hmtx",r.prototype.parse=function(t){var e,n,i,s,a,o,A;for(t.pos=this.offset,this.metrics=[],e=0,o=this.file.hhea.numberOfMetrics;0<=o?e<o:e>o;e=0<=o?++e:--e)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var l,c;for(c=[],e=l=0;0<=i?l<i:l>i;e=0<=i?++l:--l)c.push(t.readInt16());return c})(),this.widths=(function(){var l,c,u,h;for(h=[],l=0,c=(u=this.metrics).length;l<c;l++)s=u[l],h.push(s.advance);return h}).call(this),n=this.widths[this.widths.length-1],A=[],e=a=0;0<=i?a<i:a>i;e=0<=i?++a:--a)A.push(this.widths.push(n));return A},r.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},r})(),tF=[].slice,Bq=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Go(r,so),r.prototype.tag="glyf",r.prototype.parse=function(){return this.cache={}},r.prototype.glyphFor=function(t){var e,n,i,s,a,o,A,l,c,u;return t in this.cache?this.cache[t]:(s=this.file.loca,e=this.file.contents,n=s.indexOf(t),(i=s.lengthOf(t))===0?this.cache[t]=null:(e.pos=this.offset+n,a=(o=new ql(e.read(i))).readShort(),l=o.readShort(),u=o.readShort(),A=o.readShort(),c=o.readShort(),this.cache[t]=a===-1?new Eq(o,l,u,A,c):new Cq(o,a,l,u,A,c),this.cache[t]))},r.prototype.encode=function(t,e,n){var i,s,a,o,A;for(a=[],s=[],o=0,A=e.length;o<A;o++)i=t[e[o]],s.push(a.length),i&&(a=a.concat(i.encode(n)));return s.push(a.length),{table:a,offsets:s}},r})(),Cq=(function(){function r(t,e,n,i,s,a){this.raw=t,this.numberOfContours=e,this.xMin=n,this.yMin=i,this.xMax=s,this.yMax=a,this.compound=!1}return r.prototype.encode=function(){return this.raw.data},r})(),Eq=(function(){function r(t,e,n,i,s){var a,o;for(this.raw=t,this.xMin=e,this.yMin=n,this.xMax=i,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],a=this.raw;o=a.readShort(),this.glyphOffsets.push(a.pos),this.glyphIDs.push(a.readUInt16()),32&o;)a.pos+=1&o?4:2,128&o?a.pos+=8:64&o?a.pos+=4:8&o&&(a.pos+=2)}return r.prototype.encode=function(){var t,e,n;for(e=new ql(tF.call(this.raw.data)),t=0,n=this.glyphIDs.length;t<n;++t)e.pos=this.glyphOffsets[t];return e.data},r})(),Sq=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Go(r,so),r.prototype.tag="loca",r.prototype.parse=function(t){var e,n;return t.pos=this.offset,e=this.file.head.indexToLocFormat,this.offsets=e===0?(function(){var i,s;for(s=[],n=0,i=this.length;n<i;n+=2)s.push(2*t.readUInt16());return s}).call(this):(function(){var i,s;for(s=[],n=0,i=this.length;n<i;n+=4)s.push(t.readUInt32());return s}).call(this)},r.prototype.indexOf=function(t){return this.offsets[t]},r.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},r.prototype.encode=function(t,e){for(var n=new Uint32Array(this.offsets.length),i=0,s=0,a=0;a<n.length;++a)if(n[a]=i,s<e.length&&e[s]==a){++s,n[a]=i;var o=this.offsets[a],A=this.offsets[a+1]-o;A>0&&(i+=A)}for(var l=new Array(4*n.length),c=0;c<n.length;++c)l[4*c+3]=255&n[c],l[4*c+2]=(65280&n[c])>>8,l[4*c+1]=(16711680&n[c])>>16,l[4*c]=(4278190080&n[c])>>24;return l},r})(),kq=(function(){function r(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return r.prototype.generateCmap=function(){var t,e,n,i,s;for(e in i=this.font.cmap.tables[0].codeMap,t={},s=this.subset)n=s[e],t[e]=i[n];return t},r.prototype.glyphsFor=function(t){var e,n,i,s,a,o,A;for(i={},a=0,o=t.length;a<o;a++)i[s=t[a]]=this.font.glyf.glyphFor(s);for(s in e=[],i)(n=i[s])!=null&&n.compound&&e.push.apply(e,n.glyphIDs);if(e.length>0)for(s in A=this.glyphsFor(e))n=A[s],i[s]=n;return i},r.prototype.encode=function(t,e){var n,i,s,a,o,A,l,c,u,h,d,m,f,b,y;for(i in n=Z4.encode(this.generateCmap(),"unicode"),a=this.glyphsFor(t),d={0:0},y=n.charMap)d[(A=y[i]).old]=A.new;for(m in h=n.maxGlyphID,a)m in d||(d[m]=h++);return c=(function(B){var I,C;for(I in C={},B)C[B[I]]=I;return C})(d),u=Object.keys(c).sort(function(B,I){return B-I}),f=(function(){var B,I,C;for(C=[],B=0,I=u.length;B<I;B++)o=u[B],C.push(c[o]);return C})(),s=this.font.glyf.encode(a,f,d),l=this.font.loca.encode(s.offsets,f),b={cmap:this.font.cmap.raw(),glyf:s.table,loca:l,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(e)},this.font.os2.exists&&(b["OS/2"]=this.font.os2.raw()),this.font.directory.encode(b)},r})();_e.API.PDFObject=(function(){var r;function t(){}return r=function(e,n){return(Array(n+1).join("0")+e).slice(-n)},t.convert=function(e){var n,i,s,a;if(Array.isArray(e))return"["+(function(){var o,A,l;for(l=[],o=0,A=e.length;o<A;o++)n=e[o],l.push(t.convert(n));return l})().join(" ")+"]";if(typeof e=="string")return"/"+e;if(e!=null&&e.isString)return"("+e+")";if(e instanceof Date)return"(D:"+r(e.getUTCFullYear(),4)+r(e.getUTCMonth(),2)+r(e.getUTCDate(),2)+r(e.getUTCHours(),2)+r(e.getUTCMinutes(),2)+r(e.getUTCSeconds(),2)+"Z)";if({}.toString.call(e)==="[object Object]"){for(i in s=["<<"],e)a=e[i],s.push("/"+i+" "+t.convert(a));return s.push(">>"),s.join(`
`)}return""+e},t})();function eF(r,t,e,n,i){n=n||{};var s=1.15,a=i.internal.scaleFactor,o=i.internal.getFontSize()/a,A=i.getLineHeightFactor?i.getLineHeightFactor():s,l=o*A,c=/\r\n|\r|\n/g,u="",h=1;if((n.valign==="middle"||n.valign==="bottom"||n.halign==="center"||n.halign==="right")&&(u=typeof r=="string"?r.split(c):r,h=u.length||1),e+=o*(2-s),n.valign==="middle"?e-=h/2*l:n.valign==="bottom"&&(e-=h*l),n.halign==="center"||n.halign==="right"){var d=o;if(n.halign==="center"&&(d*=.5),u&&h>=1){for(var m=0;m<u.length;m++)i.text(u[m],t-i.getStringUnitWidth(u[m])*d,e),e+=l;return i}t-=i.getStringUnitWidth(r)*d}return n.halign==="justify"?i.text(r,t,e,{maxWidth:n.maxWidth||100,align:"justify"}):i.text(r,t,e),i}var fE={},pd=(function(){function r(t){this.jsPDFDocument=t,this.userStyles={textColor:t.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:t.internal.getFontSize(),fontStyle:t.internal.getFont().fontStyle,font:t.internal.getFont().fontName,lineWidth:t.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:t.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return r.setDefaults=function(t,e){e===void 0&&(e=null),e?e.__autoTableDocumentDefaults=t:fE=t},r.unifyColor=function(t){return Array.isArray(t)?t:typeof t=="number"?[t,t,t]:typeof t=="string"?[t]:null},r.prototype.applyStyles=function(t,e){var n,i,s;e===void 0&&(e=!1),t.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(t.fontStyle);var a=this.jsPDFDocument.internal.getFont(),o=a.fontStyle,A=a.fontName;if(t.font&&(A=t.font),t.fontStyle){o=t.fontStyle;var l=this.getFontList()[A];l&&l.indexOf(o)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(l[0]),o=l[0])}if(this.jsPDFDocument.setFont(A,o),t.fontSize&&this.jsPDFDocument.setFontSize(t.fontSize),!e){var c=r.unifyColor(t.fillColor);c&&(n=this.jsPDFDocument).setFillColor.apply(n,c),c=r.unifyColor(t.textColor),c&&(i=this.jsPDFDocument).setTextColor.apply(i,c),c=r.unifyColor(t.lineColor),c&&(s=this.jsPDFDocument).setDrawColor.apply(s,c),typeof t.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(t.lineWidth)}},r.prototype.splitTextToSize=function(t,e,n){return this.jsPDFDocument.splitTextToSize(t,e,n)},r.prototype.rect=function(t,e,n,i,s){return this.jsPDFDocument.rect(t,e,n,i,s)},r.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},r.prototype.getTextWidth=function(t){return this.jsPDFDocument.getTextWidth(t)},r.prototype.getDocument=function(){return this.jsPDFDocument},r.prototype.setPage=function(t){this.jsPDFDocument.setPage(t)},r.prototype.addPage=function(){return this.jsPDFDocument.addPage()},r.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},r.prototype.getGlobalOptions=function(){return fE||{}},r.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},r.prototype.pageSize=function(){var t=this.jsPDFDocument.internal.pageSize;return t.width==null&&(t={width:t.getWidth(),height:t.getHeight()}),t},r.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},r.prototype.getLineHeightFactor=function(){var t=this.jsPDFDocument;return t.getLineHeightFactor?t.getLineHeightFactor():1.15},r.prototype.getLineHeight=function(t){return t/this.scaleFactor()*this.getLineHeightFactor()},r.prototype.pageNumber=function(){var t=this.jsPDFDocument.internal.getCurrentPageInfo();return t?t.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},r})(),V1=function(r,t){return V1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},V1(r,t)};function rF(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");V1(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var nF=(function(r){rF(t,r);function t(e){var n=r.call(this)||this;return n._element=e,n}return t})(Array);function Iq(r){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/r,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function Tq(r){var t={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return t[r]}function w0(r,t,e){e.applyStyles(t,!0);var n=Array.isArray(r)?r:[r],i=n.map(function(s){return e.getTextWidth(s)}).reduce(function(s,a){return Math.max(s,a)},0);return i}function iF(r,t,e,n){var i=t.settings.tableLineWidth,s=t.settings.tableLineColor;r.applyStyles({lineWidth:i,lineColor:s});var a=sF(i,!1);a&&r.rect(e.x,e.y,t.getWidth(r.pageSize().width),n.y-e.y,a)}function sF(r,t){var e=r>0,n=t||t===0;return e&&n?"DF":e?"S":n?"F":null}function hb(r,t){var e,n,i,s;if(r=r||t,Array.isArray(r)){if(r.length>=4)return{top:r[0],right:r[1],bottom:r[2],left:r[3]};if(r.length===3)return{top:r[0],right:r[1],bottom:r[2],left:r[1]};if(r.length===2)return{top:r[0],right:r[1],bottom:r[0],left:r[1]};r.length===1?r=r[0]:r=t}return typeof r=="object"?(typeof r.vertical=="number"&&(r.top=r.vertical,r.bottom=r.vertical),typeof r.horizontal=="number"&&(r.right=r.horizontal,r.left=r.horizontal),{left:(e=r.left)!==null&&e!==void 0?e:t,top:(n=r.top)!==null&&n!==void 0?n:t,right:(i=r.right)!==null&&i!==void 0?i:t,bottom:(s=r.bottom)!==null&&s!==void 0?s:t}):(typeof r!="number"&&(r=t),{top:r,right:r,bottom:r,left:r})}function aF(r,t){var e=hb(t.settings.margin,0);return r.pageSize().width-(e.left+e.right)}function Fq(r,t,e,n,i){var s={},a=1.3333333333333333,o=fw(t,function(I){return i.getComputedStyle(I).backgroundColor});o!=null&&(s.fillColor=o);var A=fw(t,function(I){return i.getComputedStyle(I).color});A!=null&&(s.textColor=A);var l=Uq(n,e);l&&(s.cellPadding=l);var c="borderTopColor",u=a*e,h=n.borderTopWidth;if(n.borderBottomWidth===h&&n.borderRightWidth===h&&n.borderLeftWidth===h){var d=(parseFloat(h)||0)/u;d&&(s.lineWidth=d)}else s.lineWidth={top:(parseFloat(n.borderTopWidth)||0)/u,right:(parseFloat(n.borderRightWidth)||0)/u,bottom:(parseFloat(n.borderBottomWidth)||0)/u,left:(parseFloat(n.borderLeftWidth)||0)/u},s.lineWidth.top||(s.lineWidth.right?c="borderRightColor":s.lineWidth.bottom?c="borderBottomColor":s.lineWidth.left&&(c="borderLeftColor"));var m=fw(t,function(I){return i.getComputedStyle(I)[c]});m!=null&&(s.lineColor=m);var f=["left","right","center","justify"];f.indexOf(n.textAlign)!==-1&&(s.halign=n.textAlign),f=["middle","bottom","top"],f.indexOf(n.verticalAlign)!==-1&&(s.valign=n.verticalAlign);var b=parseInt(n.fontSize||"");isNaN(b)||(s.fontSize=b/a);var y=Lq(n);y&&(s.fontStyle=y);var B=(n.fontFamily||"").toLowerCase();return r.indexOf(B)!==-1&&(s.font=B),s}function Lq(r){var t="";return(r.fontWeight==="bold"||r.fontWeight==="bolder"||parseInt(r.fontWeight)>=700)&&(t="bold"),(r.fontStyle==="italic"||r.fontStyle==="oblique")&&(t+="italic"),t}function fw(r,t){var e=oF(r,t);if(!e)return null;var n=e.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!n||!Array.isArray(n))return null;var i=[parseInt(n[1]),parseInt(n[2]),parseInt(n[3])],s=parseInt(n[4]);return s===0||isNaN(i[0])||isNaN(i[1])||isNaN(i[2])?null:i}function oF(r,t){var e=t(r);return e==="rgba(0, 0, 0, 0)"||e==="transparent"||e==="initial"||e==="inherit"?r.parentElement==null?null:oF(r.parentElement,t):e}function Uq(r,t){var e=[r.paddingTop,r.paddingRight,r.paddingBottom,r.paddingLeft],n=96/(72/t),i=(parseInt(r.lineHeight)-parseInt(r.fontSize))/t/2,s=e.map(function(o){return parseInt(o||"0")/n}),a=hb(s,0);return i>a.top&&(a.top=i),i>a.bottom&&(a.bottom=i),a}function AF(r,t,e,n,i){var s,a;n===void 0&&(n=!1),i===void 0&&(i=!1);var o;typeof t=="string"?o=e.document.querySelector(t):o=t;var A=Object.keys(r.getFontList()),l=r.scaleFactor(),c=[],u=[],h=[];if(!o)return console.error("Html table could not be found with input: ",t),{head:c,body:u,foot:h};for(var d=0;d<o.rows.length;d++){var m=o.rows[d],f=(a=(s=m==null?void 0:m.parentElement)===null||s===void 0?void 0:s.tagName)===null||a===void 0?void 0:a.toLowerCase(),b=Pq(A,l,e,m,n,i);b&&(f==="thead"?c.push(b):f==="tfoot"?h.push(b):u.push(b))}return{head:c,body:u,foot:h}}function Pq(r,t,e,n,i,s){for(var a=new nF(n),o=0;o<n.cells.length;o++){var A=n.cells[o],l=e.getComputedStyle(A);if(i||l.display!=="none"){var c=void 0;s&&(c=Fq(r,A,t,l,e)),a.push({rowSpan:A.rowSpan,colSpan:A.colSpan,styles:c,_element:A,content:Nq(A)})}}var u=e.getComputedStyle(n);if(a.length>0&&(i||u.display!=="none"))return a}function Nq(r){var t=r.cloneNode(!0);return t.innerHTML=t.innerHTML.replace(/\n/g,"").replace(/ +/g," "),t.innerHTML=t.innerHTML.split(/<br.*?>/).map(function(e){return e.trim()}).join(`
`),t.innerText||t.textContent||""}function Dq(r,t,e){for(var n=0,i=[r,t,e];n<i.length;n++){var s=i[n];s&&typeof s!="object"&&console.error("The options parameter should be of type object, is: "+typeof s),s.startY&&typeof s.startY!="number"&&(console.error("Invalid value for startY option",s.startY),delete s.startY)}}function vA(r,t,e,n,i){if(r==null)throw new TypeError("Cannot convert undefined or null to object");for(var s=Object(r),a=1;a<arguments.length;a++){var o=arguments[a];if(o!=null)for(var A in o)Object.prototype.hasOwnProperty.call(o,A)&&(s[A]=o[A])}return s}function lF(r,t){var e=new pd(r),n=e.getDocumentOptions(),i=e.getGlobalOptions();Dq(i,n,t);var s=vA({},i,n,t),a;typeof window<"u"&&(a=window);var o=Mq(i,n,t),A=Rq(i,n,t),l=Qq(e,s),c=Hq(e,s,a);return{id:t.tableId,content:c,hooks:A,styles:o,settings:l}}function Mq(r,t,e){for(var n={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},i=function(A){if(A==="columnStyles"){var l=r[A],c=t[A],u=e[A];n.columnStyles=vA({},l,c,u)}else{var h=[r,t,e],d=h.map(function(m){return m[A]||{}});n[A]=vA({},d[0],d[1],d[2])}},s=0,a=Object.keys(n);s<a.length;s++){var o=a[s];i(o)}return n}function Rq(r,t,e){for(var n=[r,t,e],i={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},s=0,a=n;s<a.length;s++){var o=a[s];o.didParseCell&&i.didParseCell.push(o.didParseCell),o.willDrawCell&&i.willDrawCell.push(o.willDrawCell),o.didDrawCell&&i.didDrawCell.push(o.didDrawCell),o.willDrawPage&&i.willDrawPage.push(o.willDrawPage),o.didDrawPage&&i.didDrawPage.push(o.didDrawPage)}return i}function Qq(r,t){var e,n,i,s,a,o,A,l,c,u,h,d,m=hb(t.margin,40/r.scaleFactor()),f=(e=Oq(r,t.startY))!==null&&e!==void 0?e:m.top,b;t.showFoot===!0?b="everyPage":t.showFoot===!1?b="never":b=(n=t.showFoot)!==null&&n!==void 0?n:"everyPage";var y;t.showHead===!0?y="everyPage":t.showHead===!1?y="never":y=(i=t.showHead)!==null&&i!==void 0?i:"everyPage";var B=(s=t.useCss)!==null&&s!==void 0?s:!1,I=t.theme||(B?"plain":"striped"),C=!!t.horizontalPageBreak,N=(a=t.horizontalPageBreakRepeat)!==null&&a!==void 0?a:null;return{includeHiddenHtml:(o=t.includeHiddenHtml)!==null&&o!==void 0?o:!1,useCss:B,theme:I,startY:f,margin:m,pageBreak:(A=t.pageBreak)!==null&&A!==void 0?A:"auto",rowPageBreak:(l=t.rowPageBreak)!==null&&l!==void 0?l:"auto",tableWidth:(c=t.tableWidth)!==null&&c!==void 0?c:"auto",showHead:y,showFoot:b,tableLineWidth:(u=t.tableLineWidth)!==null&&u!==void 0?u:0,tableLineColor:(h=t.tableLineColor)!==null&&h!==void 0?h:200,horizontalPageBreak:C,horizontalPageBreakRepeat:N,horizontalPageBreakBehaviour:(d=t.horizontalPageBreakBehaviour)!==null&&d!==void 0?d:"afterAllRows"}}function Oq(r,t){var e=r.getLastAutoTable(),n=r.scaleFactor(),i=r.pageNumber(),s=!1;if(e&&e.startPageNumber){var a=e.startPageNumber+e.pageNumber-1;s=a===i}return typeof t=="number"?t:(t==null||t===!1)&&s&&(e==null?void 0:e.finalY)!=null?e.finalY+20/n:null}function Hq(r,t,e){var n=t.head||[],i=t.body||[],s=t.foot||[];if(t.html){var a=t.includeHiddenHtml;if(e){var o=AF(r,t.html,e,a,t.useCss)||{};n=o.head||n,i=o.body||n,s=o.foot||n}else console.error("Cannot parse html in non browser environment")}var A=t.columns||Vq(n,i,s);return{columns:A,head:n,body:i,foot:s}}function Vq(r,t,e){var n=r[0]||t[0]||e[0]||[],i=[];return Object.keys(n).filter(function(s){return s!=="_element"}).forEach(function(s){var a=1,o;Array.isArray(n)?o=n[parseInt(s)]:o=n[s],typeof o=="object"&&!Array.isArray(o)&&(a=(o==null?void 0:o.colSpan)||1);for(var A=0;A<a;A++){var l=void 0;Array.isArray(n)?l=i.length:l=s+(A>0?"_".concat(A):"");var c={dataKey:l};i.push(c)}}),i}var $1=(function(){function r(t,e,n){this.table=e,this.pageNumber=e.pageNumber,this.settings=e.settings,this.cursor=n,this.doc=t.getDocument()}return r})(),$q=(function(r){rF(t,r);function t(e,n,i,s,a,o){var A=r.call(this,e,n,o)||this;return A.cell=i,A.row=s,A.column=a,A.section=s.section,A}return t})($1),jq=(function(){function r(t,e){this.pageNumber=1,this.id=t.id,this.settings=t.settings,this.styles=t.styles,this.hooks=t.hooks,this.columns=e.columns,this.head=e.head,this.body=e.body,this.foot=e.foot}return r.prototype.getHeadHeight=function(t){return this.head.reduce(function(e,n){return e+n.getMaxCellHeight(t)},0)},r.prototype.getFootHeight=function(t){return this.foot.reduce(function(e,n){return e+n.getMaxCellHeight(t)},0)},r.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},r.prototype.callCellHooks=function(t,e,n,i,s,a){for(var o=0,A=e;o<A.length;o++){var l=A[o],c=new $q(t,this,n,i,s,a),u=l(c)===!1;if(n.text=Array.isArray(n.text)?n.text:[n.text],u)return!1}return!0},r.prototype.callEndPageHooks=function(t,e){t.applyStyles(t.userStyles);for(var n=0,i=this.hooks.didDrawPage;n<i.length;n++){var s=i[n];s(new $1(t,this,e))}},r.prototype.callWillDrawPageHooks=function(t,e){for(var n=0,i=this.hooks.willDrawPage;n<i.length;n++){var s=i[n];s(new $1(t,this,e))}},r.prototype.getWidth=function(t){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var e=this.columns.reduce(function(i,s){return i+s.wrappedWidth},0);return e}else{var n=this.settings.margin;return t-n.left-n.right}},r})(),cF=(function(){function r(t,e,n,i,s){s===void 0&&(s=!1),this.height=0,this.raw=t,t instanceof nF&&(this.raw=t._element,this.element=t._element),this.index=e,this.section=n,this.cells=i,this.spansMultiplePages=s}return r.prototype.getMaxCellHeight=function(t){var e=this;return t.reduce(function(n,i){var s;return Math.max(n,((s=e.cells[i.index])===null||s===void 0?void 0:s.height)||0)},0)},r.prototype.hasRowSpan=function(t){var e=this;return t.filter(function(n){var i=e.cells[n.index];return i?i.rowSpan>1:!1}).length>0},r.prototype.canEntireRowFit=function(t,e){return this.getMaxCellHeight(e)<=t},r.prototype.getMinimumRowHeight=function(t,e){var n=this;return t.reduce(function(i,s){var a=n.cells[s.index];if(!a)return 0;var o=e.getLineHeight(a.styles.fontSize),A=a.padding("vertical"),l=A+o;return l>i?l:i},0)},r})(),uF=(function(){function r(t,e,n){var i;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=e,this.section=n,this.raw=t;var s=t;t!=null&&typeof t=="object"&&!Array.isArray(t)?(this.rowSpan=t.rowSpan||1,this.colSpan=t.colSpan||1,s=(i=t.content)!==null&&i!==void 0?i:t,t._element&&(this.raw=t._element)):(this.rowSpan=1,this.colSpan=1);var a=s!=null?""+s:"",o=/\r\n|\r|\n/g;this.text=a.split(o)}return r.prototype.getTextPos=function(){var t;if(this.styles.valign==="top")t=this.y+this.padding("top");else if(this.styles.valign==="bottom")t=this.y+this.height-this.padding("bottom");else{var e=this.height-this.padding("vertical");t=this.y+e/2+this.padding("top")}var n;if(this.styles.halign==="right")n=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var i=this.width-this.padding("horizontal");n=this.x+i/2+this.padding("left")}else n=this.x+this.padding("left");return{x:n,y:t}},r.prototype.getContentHeight=function(t,e){e===void 0&&(e=1.15);var n=Array.isArray(this.text)?this.text.length:1,i=this.styles.fontSize/t*e,s=n*i+this.padding("vertical");return Math.max(s,this.styles.minCellHeight)},r.prototype.padding=function(t){var e=hb(this.styles.cellPadding,0);return t==="vertical"?e.top+e.bottom:t==="horizontal"?e.left+e.right:e[t]},r})(),Gq=(function(){function r(t,e,n){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=t,this.raw=e,this.index=n}return r.prototype.getMaxCustomCellWidth=function(t){for(var e=0,n=0,i=t.allRows();n<i.length;n++){var s=i[n],a=s.cells[this.index];a&&typeof a.styles.cellWidth=="number"&&(e=Math.max(e,a.styles.cellWidth))}return e},r})();function Kq(r,t){zq(r,t);var e=[],n=0;t.columns.forEach(function(s){var a=s.getMaxCustomCellWidth(t);a?s.width=a:(s.width=s.wrappedWidth,e.push(s)),n+=s.width});var i=t.getWidth(r.pageSize().width)-n;i&&(i=j1(e,i,function(s){return Math.max(s.minReadableWidth,s.minWidth)})),i&&(i=j1(e,i,function(s){return s.minWidth})),i=Math.abs(i),!t.settings.horizontalPageBreak&&i>.1/r.scaleFactor()&&(i=i<1?i:Math.round(i),console.warn("Of the table content, ".concat(i," units width could not fit page"))),Wq(t),Yq(t,r),qq(t)}function zq(r,t){var e=r.scaleFactor(),n=t.settings.horizontalPageBreak,i=aF(r,t);t.allRows().forEach(function(s){for(var a=0,o=t.columns;a<o.length;a++){var A=o[a],l=s.cells[A.index];if(l){var c=t.hooks.didParseCell;t.callCellHooks(r,c,l,s,A,null);var u=l.padding("horizontal");l.contentWidth=w0(l.text,l.styles,r)+u;var h=w0(l.text.join(" ").split(/[^\S\u00A0]+/),l.styles,r);if(l.minReadableWidth=h+l.padding("horizontal"),typeof l.styles.cellWidth=="number")l.minWidth=l.styles.cellWidth,l.wrappedWidth=l.styles.cellWidth;else if(l.styles.cellWidth==="wrap"||n===!0)l.contentWidth>i?(l.minWidth=i,l.wrappedWidth=i):(l.minWidth=l.contentWidth,l.wrappedWidth=l.contentWidth);else{var d=10/e;l.minWidth=l.styles.minCellWidth||d,l.wrappedWidth=l.contentWidth,l.minWidth>l.wrappedWidth&&(l.wrappedWidth=l.minWidth)}}}}),t.allRows().forEach(function(s){for(var a=0,o=t.columns;a<o.length;a++){var A=o[a],l=s.cells[A.index];if(l&&l.colSpan===1)A.wrappedWidth=Math.max(A.wrappedWidth,l.wrappedWidth),A.minWidth=Math.max(A.minWidth,l.minWidth),A.minReadableWidth=Math.max(A.minReadableWidth,l.minReadableWidth);else{var c=t.styles.columnStyles[A.dataKey]||t.styles.columnStyles[A.index]||{},u=c.cellWidth||c.minCellWidth;u&&typeof u=="number"&&(A.minWidth=u,A.wrappedWidth=u)}l&&(l.colSpan>1&&!A.minWidth&&(A.minWidth=l.minWidth),l.colSpan>1&&!A.wrappedWidth&&(A.wrappedWidth=l.minWidth))}})}function j1(r,t,e){for(var n=t,i=r.reduce(function(d,m){return d+m.wrappedWidth},0),s=0;s<r.length;s++){var a=r[s],o=a.wrappedWidth/i,A=n*o,l=a.width+A,c=e(a),u=l<c?c:l;t-=u-a.width,a.width=u}if(t=Math.round(t*1e10)/1e10,t){var h=r.filter(function(d){return t<0?d.width>e(d):!0});h.length&&(t=j1(h,t,e))}return t}function qq(r){for(var t={},e=1,n=r.allRows(),i=0;i<n.length;i++)for(var s=n[i],a=0,o=r.columns;a<o.length;a++){var A=o[a],l=t[A.index];if(e>1)e--,delete s.cells[A.index];else if(l)l.cell.height+=s.height,e=l.cell.colSpan,delete s.cells[A.index],l.left--,l.left<=1&&delete t[A.index];else{var c=s.cells[A.index];if(!c)continue;if(c.height=s.height,c.rowSpan>1){var u=n.length-i,h=c.rowSpan>u?u:c.rowSpan;t[A.index]={cell:c,left:h,row:s}}}}}function Wq(r){for(var t=r.allRows(),e=0;e<t.length;e++)for(var n=t[e],i=null,s=0,a=0,o=0;o<r.columns.length;o++){var A=r.columns[o];if(a-=1,a>1&&r.columns[o+1])s+=A.width,delete n.cells[A.index];else if(i){var l=i;delete n.cells[A.index],i=null,l.width=A.width+s}else{var l=n.cells[A.index];if(!l)continue;if(a=l.colSpan,s=0,l.colSpan>1){i=l,s+=A.width;continue}l.width=A.width+s}}}function Yq(r,t){for(var e={count:0,height:0},n=0,i=r.allRows();n<i.length;n++){for(var s=i[n],a=0,o=r.columns;a<o.length;a++){var A=o[a],l=s.cells[A.index];if(l){t.applyStyles(l.styles,!0);var c=l.width-l.padding("horizontal");if(l.styles.overflow==="linebreak")l.text=t.splitTextToSize(l.text,c+1/t.scaleFactor(),{fontSize:l.styles.fontSize});else if(l.styles.overflow==="ellipsize")l.text=gE(l.text,c,l.styles,t,"...");else if(l.styles.overflow==="hidden")l.text=gE(l.text,c,l.styles,t,"");else if(typeof l.styles.overflow=="function"){var u=l.styles.overflow(l.text,c);typeof u=="string"?l.text=[u]:l.text=u}l.contentHeight=l.getContentHeight(t.scaleFactor(),t.getLineHeightFactor());var h=l.contentHeight/l.rowSpan;l.rowSpan>1&&e.count*e.height<h*l.rowSpan?e={height:h,count:l.rowSpan}:e&&e.count>0&&e.height>h&&(h=e.height),h>s.height&&(s.height=h)}}e.count--}}function gE(r,t,e,n,i){return r.map(function(s){return Xq(s,t,e,n,i)})}function Xq(r,t,e,n,i){var s=1e4*n.scaleFactor();if(t=Math.ceil(t*s)/s,t>=w0(r,e,n))return r;for(;t<w0(r+i,e,n)&&!(r.length<=1);)r=r.substring(0,r.length-1);return r.trim()+i}function dF(r,t){var e=new pd(r),n=Jq(t,e.scaleFactor()),i=new jq(t,n);return Kq(e,i),e.applyStyles(e.userStyles),i}function Jq(r,t){var e=r.content,n=tW(e.columns);if(e.head.length===0){var i=pE(n,"head");i&&e.head.push(i)}if(e.foot.length===0){var i=pE(n,"foot");i&&e.foot.push(i)}var s=r.settings.theme,a=r.styles;return{columns:n,head:gw("head",e.head,n,a,s,t),body:gw("body",e.body,n,a,s,t),foot:gw("foot",e.foot,n,a,s,t)}}function gw(r,t,e,n,i,s){var a={},o=t.map(function(A,l){for(var c=0,u={},h=0,d=0,m=0,f=e;m<f.length;m++){var b=f[m];if(a[b.index]==null||a[b.index].left===0)if(d===0){var y=void 0;Array.isArray(A)?y=A[b.index-h-c]:y=A[b.dataKey];var B={};typeof y=="object"&&!Array.isArray(y)&&(B=(y==null?void 0:y.styles)||{});var I=eW(r,b,l,i,n,s,B),C=new uF(y,I,r);u[b.dataKey]=C,u[b.index]=C,d=C.colSpan-1,a[b.index]={left:C.rowSpan-1,times:d}}else d--,h++;else a[b.index].left--,d=a[b.index].times,c++}return new cF(A,l,r,u)});return o}function pE(r,t){var e={};return r.forEach(function(n){if(n.raw!=null){var i=Zq(t,n.raw);i!=null&&(e[n.dataKey]=i)}}),Object.keys(e).length>0?e:null}function Zq(r,t){if(r==="head"){if(typeof t=="object")return t.header||null;if(typeof t=="string"||typeof t=="number")return t}else if(r==="foot"&&typeof t=="object")return t.footer;return null}function tW(r){return r.map(function(t,e){var n,i;return typeof t=="object"?i=(n=t.dataKey)!==null&&n!==void 0?n:e:i=e,new Gq(i,t,e)})}function eW(r,t,e,n,i,s,a){var o=Tq(n),A;r==="head"?A=i.headStyles:r==="body"?A=i.bodyStyles:r==="foot"&&(A=i.footStyles);var l=vA({},o.table,o[r],i.styles,A),c=i.columnStyles[t.dataKey]||i.columnStyles[t.index]||{},u=r==="body"?c:{},h=r==="body"&&e%2===0?vA({},o.alternateRow,i.alternateRowStyles):{},d=Iq(s),m=vA({},d,l,h,u);return vA(m,a)}function rW(r,t,e){var n;e===void 0&&(e={});var i=aF(r,t),s=new Map,a=[],o=[],A=[];Array.isArray(t.settings.horizontalPageBreakRepeat)?A=t.settings.horizontalPageBreakRepeat:(typeof t.settings.horizontalPageBreakRepeat=="string"||typeof t.settings.horizontalPageBreakRepeat=="number")&&(A=[t.settings.horizontalPageBreakRepeat]),A.forEach(function(h){var d=t.columns.find(function(m){return m.dataKey===h||m.index===h});d&&!s.has(d.index)&&(s.set(d.index,!0),a.push(d.index),o.push(t.columns[d.index]),i-=d.wrappedWidth)});for(var l=!0,c=(n=e==null?void 0:e.start)!==null&&n!==void 0?n:0;c<t.columns.length;){if(s.has(c)){c++;continue}var u=t.columns[c].wrappedWidth;if(l||i>=u)l=!1,a.push(c),o.push(t.columns[c]),i-=u;else break;c++}return{colIndexes:a,columns:o,lastIndex:c-1}}function nW(r,t){for(var e=[],n=0;n<t.columns.length;n++){var i=rW(r,t,{start:n});i.columns.length&&(e.push(i),n=i.lastIndex)}return e}function hF(r,t){var e=t.settings,n=e.startY,i=e.margin,s={x:i.left,y:n},a=t.getHeadHeight(t.columns)+t.getFootHeight(t.columns),o=n+i.bottom+a;if(e.pageBreak==="avoid"){var A=t.body,l=A.reduce(function(h,d){return h+d.height},0);o+=l}var c=new pd(r);(e.pageBreak==="always"||e.startY!=null&&o>c.pageSize().height)&&(gF(c),s.y=i.top),t.callWillDrawPageHooks(c,s);var u=vA({},s);t.startPageNumber=c.pageNumber(),e.horizontalPageBreak?iW(c,t,u,s):(c.applyStyles(c.userStyles),(e.showHead==="firstPage"||e.showHead==="everyPage")&&t.head.forEach(function(h){return UA(c,t,h,s,t.columns)}),c.applyStyles(c.userStyles),t.body.forEach(function(h,d){var m=d===t.body.length-1;v0(c,t,h,m,u,s,t.columns)}),c.applyStyles(c.userStyles),(e.showFoot==="lastPage"||e.showFoot==="everyPage")&&t.foot.forEach(function(h){return UA(c,t,h,s,t.columns)})),iF(c,t,u,s),t.callEndPageHooks(c,s),t.finalY=s.y,r.lastAutoTable=t,c.applyStyles(c.userStyles)}function iW(r,t,e,n){var i=nW(r,t),s=t.settings;if(s.horizontalPageBreakBehaviour==="afterAllRows")i.forEach(function(l,c){r.applyStyles(r.userStyles),c>0?mf(r,t,e,n,l.columns,!0):mE(r,t,n,l.columns),sW(r,t,e,n,l.columns),pw(r,t,n,l.columns)});else for(var a=-1,o=i[0],A=function(){var l=a;if(o){r.applyStyles(r.userStyles);var c=o.columns;a>=0?mf(r,t,e,n,c,!0):mE(r,t,n,c),l=bE(r,t,a+1,n,c),pw(r,t,n,c)}var u=l-a;i.slice(1).forEach(function(h){r.applyStyles(r.userStyles),mf(r,t,e,n,h.columns,!0),bE(r,t,a+1,n,h.columns,u),pw(r,t,n,h.columns)}),a=l};a<t.body.length-1;)A()}function mE(r,t,e,n){var i=t.settings;r.applyStyles(r.userStyles),(i.showHead==="firstPage"||i.showHead==="everyPage")&&t.head.forEach(function(s){return UA(r,t,s,e,n)})}function sW(r,t,e,n,i){r.applyStyles(r.userStyles),t.body.forEach(function(s,a){var o=a===t.body.length-1;v0(r,t,s,o,e,n,i)})}function bE(r,t,e,n,i,s){r.applyStyles(r.userStyles),s=s??t.body.length;var a=Math.min(e+s,t.body.length),o=-1;return t.body.slice(e,a).forEach(function(A,l){var c=e+l===t.body.length-1,u=fF(r,t,c,n);A.canEntireRowFit(u,i)&&(UA(r,t,A,n,i),o=e+l)}),o}function pw(r,t,e,n){var i=t.settings;r.applyStyles(r.userStyles),(i.showFoot==="lastPage"||i.showFoot==="everyPage")&&t.foot.forEach(function(s){return UA(r,t,s,e,n)})}function aW(r,t,e){var n=e.getLineHeight(r.styles.fontSize),i=r.padding("vertical"),s=Math.floor((t-i)/n);return Math.max(0,s)}function oW(r,t,e,n){var i={};r.spansMultiplePages=!0,r.height=0;for(var s=0,a=0,o=e.columns;a<o.length;a++){var A=o[a],l=r.cells[A.index];if(l){Array.isArray(l.text)||(l.text=[l.text]);var c=new uF(l.raw,l.styles,l.section);c=vA(c,l),c.text=[];var u=aW(l,t,n);l.text.length>u&&(c.text=l.text.splice(u,l.text.length));var h=n.scaleFactor(),d=n.getLineHeightFactor();l.contentHeight=l.getContentHeight(h,d),l.contentHeight>=t&&(l.contentHeight=t,c.styles.minCellHeight-=t),l.contentHeight>r.height&&(r.height=l.contentHeight),c.contentHeight=c.getContentHeight(h,d),c.contentHeight>s&&(s=c.contentHeight),i[A.index]=c}}var m=new cF(r.raw,-1,r.section,i,!0);m.height=s;for(var f=0,b=e.columns;f<b.length;f++){var A=b[f],c=m.cells[A.index];c&&(c.height=m.height);var l=r.cells[A.index];l&&(l.height=r.height)}return m}function AW(r,t,e,n){var i=r.pageSize().height,s=n.settings.margin,a=s.top+s.bottom,o=i-a;t.section==="body"&&(o-=n.getHeadHeight(n.columns)+n.getFootHeight(n.columns));var A=t.getMinimumRowHeight(n.columns,r),l=A<e;if(A>o)return console.error("Will not be able to print row ".concat(t.index," correctly since it's minimum height is larger than page height")),!0;if(!l)return!1;var c=t.hasRowSpan(n.columns),u=t.getMaxCellHeight(n.columns)>o;return u?(c&&console.error("The content of row ".concat(t.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(c||n.settings.rowPageBreak==="avoid")}function v0(r,t,e,n,i,s,a){var o=fF(r,t,n,s);if(e.canEntireRowFit(o,a))UA(r,t,e,s,a);else if(AW(r,e,o,t)){var A=oW(e,o,t,r);UA(r,t,e,s,a),mf(r,t,i,s,a),v0(r,t,A,n,i,s,a)}else mf(r,t,i,s,a),v0(r,t,e,n,i,s,a)}function UA(r,t,e,n,i){n.x=t.settings.margin.left;for(var s=0,a=i;s<a.length;s++){var o=a[s],A=e.cells[o.index];if(!A){n.x+=o.width;continue}r.applyStyles(A.styles),A.x=n.x,A.y=n.y;var l=t.callCellHooks(r,t.hooks.willDrawCell,A,e,o,n);if(l===!1){n.x+=o.width;continue}lW(r,A,n);var c=A.getTextPos();eF(A.text,c.x,c.y,{halign:A.styles.halign,valign:A.styles.valign,maxWidth:Math.ceil(A.width-A.padding("left")-A.padding("right"))},r.getDocument()),t.callCellHooks(r,t.hooks.didDrawCell,A,e,o,n),n.x+=o.width}n.y+=e.height}function lW(r,t,e){var n=t.styles;if(r.getDocument().setFillColor(r.getDocument().getFillColor()),typeof n.lineWidth=="number"){var i=sF(n.lineWidth,n.fillColor);i&&r.rect(t.x,e.y,t.width,t.height,i)}else typeof n.lineWidth=="object"&&(n.fillColor&&r.rect(t.x,e.y,t.width,t.height,"F"),cW(r,t,e,n.lineWidth))}function cW(r,t,e,n){var i,s,a,o;n.top&&(i=e.x,s=e.y,a=e.x+t.width,o=e.y,n.right&&(a+=.5*n.right),n.left&&(i-=.5*n.left),A(n.top,i,s,a,o)),n.bottom&&(i=e.x,s=e.y+t.height,a=e.x+t.width,o=e.y+t.height,n.right&&(a+=.5*n.right),n.left&&(i-=.5*n.left),A(n.bottom,i,s,a,o)),n.left&&(i=e.x,s=e.y,a=e.x,o=e.y+t.height,n.top&&(s-=.5*n.top),n.bottom&&(o+=.5*n.bottom),A(n.left,i,s,a,o)),n.right&&(i=e.x+t.width,s=e.y,a=e.x+t.width,o=e.y+t.height,n.top&&(s-=.5*n.top),n.bottom&&(o+=.5*n.bottom),A(n.right,i,s,a,o));function A(l,c,u,h,d){r.getDocument().setLineWidth(l),r.getDocument().line(c,u,h,d,"S")}}function fF(r,t,e,n){var i=t.settings.margin.bottom,s=t.settings.showFoot;return(s==="everyPage"||s==="lastPage"&&e)&&(i+=t.getFootHeight(t.columns)),r.pageSize().height-n.y-i}function mf(r,t,e,n,i,s){i===void 0&&(i=[]),s===void 0&&(s=!1),r.applyStyles(r.userStyles),t.settings.showFoot==="everyPage"&&!s&&t.foot.forEach(function(o){return UA(r,t,o,n,i)}),t.callEndPageHooks(r,n);var a=t.settings.margin;iF(r,t,e,n),gF(r),t.pageNumber++,n.x=a.left,n.y=a.top,e.y=a.top,t.callWillDrawPageHooks(r,n),t.settings.showHead==="everyPage"&&(t.head.forEach(function(o){return UA(r,t,o,n,i)}),r.applyStyles(r.userStyles))}function gF(r){var t=r.pageNumber();r.setPage(t+1);var e=r.pageNumber();return e===t?(r.addPage(),!0):!1}function uW(r){r.API.autoTable=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[0],i=lF(this,n),s=dF(this,i);return hF(this,s),this},r.API.lastAutoTable=!1,r.API.autoTableText=function(t,e,n,i){eF(t,e,n,i,this)},r.API.autoTableSetDefaults=function(t){return pd.setDefaults(t,this),this},r.autoTableSetDefaults=function(t,e){pd.setDefaults(t,e)},r.API.autoTableHtmlToJson=function(t,e){var n;if(e===void 0&&(e=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var i=new pd(this),s=AF(i,t,window,e,!1),a=s.head,o=s.body,A=((n=a[0])===null||n===void 0?void 0:n.map(function(l){return l.content}))||[];return{columns:A,rows:o,data:o}}}var mw;function f2(r,t){var e=lF(r,t),n=dF(r,e);hF(r,n)}try{if(typeof window<"u"&&window){var yE=window,wE=yE.jsPDF||((mw=yE.jspdf)===null||mw===void 0?void 0:mw.jsPDF);wE&&uW(wE)}}catch(r){console.error("Could not apply autoTable plugin",r)}function tm(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var bw={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/var vE;function dW(){return vE||(vE=1,(function(r,t){(function(e){r.exports=e()})(function(){return(function e(n,i,s){function a(l,c){if(!i[l]){if(!n[l]){var u=typeof tm=="function"&&tm;if(!c&&u)return u(l,!0);if(o)return o(l,!0);var h=new Error("Cannot find module '"+l+"'");throw h.code="MODULE_NOT_FOUND",h}var d=i[l]={exports:{}};n[l][0].call(d.exports,function(m){var f=n[l][1][m];return a(f||m)},d,d.exports,e,n,i,s)}return i[l].exports}for(var o=typeof tm=="function"&&tm,A=0;A<s.length;A++)a(s[A]);return a})({1:[function(e,n,i){var s=e("./utils"),a=e("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(A){for(var l,c,u,h,d,m,f,b=[],y=0,B=A.length,I=B,C=s.getTypeOf(A)!=="string";y<A.length;)I=B-y,u=C?(l=A[y++],c=y<B?A[y++]:0,y<B?A[y++]:0):(l=A.charCodeAt(y++),c=y<B?A.charCodeAt(y++):0,y<B?A.charCodeAt(y++):0),h=l>>2,d=(3&l)<<4|c>>4,m=1<I?(15&c)<<2|u>>6:64,f=2<I?63&u:64,b.push(o.charAt(h)+o.charAt(d)+o.charAt(m)+o.charAt(f));return b.join("")},i.decode=function(A){var l,c,u,h,d,m,f=0,b=0,y="data:";if(A.substr(0,y.length)===y)throw new Error("Invalid base64 input, it looks like a data url.");var B,I=3*(A=A.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(A.charAt(A.length-1)===o.charAt(64)&&I--,A.charAt(A.length-2)===o.charAt(64)&&I--,I%1!=0)throw new Error("Invalid base64 input, bad content length.");for(B=a.uint8array?new Uint8Array(0|I):new Array(0|I);f<A.length;)l=o.indexOf(A.charAt(f++))<<2|(h=o.indexOf(A.charAt(f++)))>>4,c=(15&h)<<4|(d=o.indexOf(A.charAt(f++)))>>2,u=(3&d)<<6|(m=o.indexOf(A.charAt(f++))),B[b++]=l,d!==64&&(B[b++]=c),m!==64&&(B[b++]=u);return B}},{"./support":30,"./utils":32}],2:[function(e,n,i){var s=e("./external"),a=e("./stream/DataWorker"),o=e("./stream/Crc32Probe"),A=e("./stream/DataLengthProbe");function l(c,u,h,d,m){this.compressedSize=c,this.uncompressedSize=u,this.crc32=h,this.compression=d,this.compressedContent=m}l.prototype={getContentWorker:function(){var c=new a(s.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new A("data_length")),u=this;return c.on("end",function(){if(this.streamInfo.data_length!==u.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),c},getCompressedWorker:function(){return new a(s.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},l.createWorkerFrom=function(c,u,h){return c.pipe(new o).pipe(new A("uncompressedSize")).pipe(u.compressWorker(h)).pipe(new A("compressedSize")).withStreamInfo("compression",u)},n.exports=l},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,n,i){var s=e("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(){return new s("STORE compression")},uncompressWorker:function(){return new s("STORE decompression")}},i.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,n,i){var s=e("./utils"),a=(function(){for(var o,A=[],l=0;l<256;l++){o=l;for(var c=0;c<8;c++)o=1&o?3988292384^o>>>1:o>>>1;A[l]=o}return A})();n.exports=function(o,A){return o!==void 0&&o.length?s.getTypeOf(o)!=="string"?(function(l,c,u,h){var d=a,m=h+u;l^=-1;for(var f=h;f<m;f++)l=l>>>8^d[255&(l^c[f])];return-1^l})(0|A,o,o.length,0):(function(l,c,u,h){var d=a,m=h+u;l^=-1;for(var f=h;f<m;f++)l=l>>>8^d[255&(l^c.charCodeAt(f))];return-1^l})(0|A,o,o.length,0):0}},{"./utils":32}],5:[function(e,n,i){i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(e,n,i){var s=null;s=typeof Promise<"u"?Promise:e("lie"),n.exports={Promise:s}},{lie:37}],7:[function(e,n,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",a=e("pako"),o=e("./utils"),A=e("./stream/GenericWorker"),l=s?"uint8array":"array";function c(u,h){A.call(this,"FlateWorker/"+u),this._pako=null,this._pakoAction=u,this._pakoOptions=h,this.meta={}}i.magic="\b\0",o.inherits(c,A),c.prototype.processChunk=function(u){this.meta=u.meta,this._pako===null&&this._createPako(),this._pako.push(o.transformTo(l,u.data),!1)},c.prototype.flush=function(){A.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},c.prototype.cleanUp=function(){A.prototype.cleanUp.call(this),this._pako=null},c.prototype._createPako=function(){this._pako=new a[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var u=this;this._pako.onData=function(h){u.push({data:h,meta:u.meta})}},i.compressWorker=function(u){return new c("Deflate",u)},i.uncompressWorker=function(){return new c("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,n,i){function s(d,m){var f,b="";for(f=0;f<m;f++)b+=String.fromCharCode(255&d),d>>>=8;return b}function a(d,m,f,b,y,B){var I,C,N=d.file,R=d.compression,U=B!==l.utf8encode,x=o.transformTo("string",B(N.name)),v=o.transformTo("string",l.utf8encode(N.name)),T=N.comment,E=o.transformTo("string",B(T)),_=o.transformTo("string",l.utf8encode(T)),F=v.length!==N.name.length,k=_.length!==T.length,Z="",ut="",nt="",j=N.dir,G=N.date,pt={crc32:0,compressedSize:0,uncompressedSize:0};m&&!f||(pt.crc32=d.crc32,pt.compressedSize=d.compressedSize,pt.uncompressedSize=d.uncompressedSize);var q=0;m&&(q|=8),U||!F&&!k||(q|=2048);var L=0,O=0;j&&(L|=16),y==="UNIX"?(O=798,L|=(function(X,At){var et=X;return X||(et=At?16893:33204),(65535&et)<<16})(N.unixPermissions,j)):(O=20,L|=(function(X){return 63&(X||0)})(N.dosPermissions)),I=G.getUTCHours(),I<<=6,I|=G.getUTCMinutes(),I<<=5,I|=G.getUTCSeconds()/2,C=G.getUTCFullYear()-1980,C<<=4,C|=G.getUTCMonth()+1,C<<=5,C|=G.getUTCDate(),F&&(ut=s(1,1)+s(c(x),4)+v,Z+="up"+s(ut.length,2)+ut),k&&(nt=s(1,1)+s(c(E),4)+_,Z+="uc"+s(nt.length,2)+nt);var V="";return V+=`
\0`,V+=s(q,2),V+=R.magic,V+=s(I,2),V+=s(C,2),V+=s(pt.crc32,4),V+=s(pt.compressedSize,4),V+=s(pt.uncompressedSize,4),V+=s(x.length,2),V+=s(Z.length,2),{fileRecord:u.LOCAL_FILE_HEADER+V+x+Z,dirRecord:u.CENTRAL_FILE_HEADER+s(O,2)+V+s(E.length,2)+"\0\0\0\0"+s(L,4)+s(b,4)+x+Z+E}}var o=e("../utils"),A=e("../stream/GenericWorker"),l=e("../utf8"),c=e("../crc32"),u=e("../signature");function h(d,m,f,b){A.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=m,this.zipPlatform=f,this.encodeFileName=b,this.streamFiles=d,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}o.inherits(h,A),h.prototype.push=function(d){var m=d.meta.percent||0,f=this.entriesCount,b=this._sources.length;this.accumulate?this.contentBuffer.push(d):(this.bytesWritten+=d.data.length,A.prototype.push.call(this,{data:d.data,meta:{currentFile:this.currentFile,percent:f?(m+100*(f-b-1))/f:100}}))},h.prototype.openedSource=function(d){this.currentSourceOffset=this.bytesWritten,this.currentFile=d.file.name;var m=this.streamFiles&&!d.file.dir;if(m){var f=a(d,m,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:f.fileRecord,meta:{percent:0}})}else this.accumulate=!0},h.prototype.closedSource=function(d){this.accumulate=!1;var m=this.streamFiles&&!d.file.dir,f=a(d,m,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(f.dirRecord),m)this.push({data:(function(b){return u.DATA_DESCRIPTOR+s(b.crc32,4)+s(b.compressedSize,4)+s(b.uncompressedSize,4)})(d),meta:{percent:100}});else for(this.push({data:f.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},h.prototype.flush=function(){for(var d=this.bytesWritten,m=0;m<this.dirRecords.length;m++)this.push({data:this.dirRecords[m],meta:{percent:100}});var f=this.bytesWritten-d,b=(function(y,B,I,C,N){var R=o.transformTo("string",N(C));return u.CENTRAL_DIRECTORY_END+"\0\0\0\0"+s(y,2)+s(y,2)+s(B,4)+s(I,4)+s(R.length,2)+R})(this.dirRecords.length,f,d,this.zipComment,this.encodeFileName);this.push({data:b,meta:{percent:100}})},h.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},h.prototype.registerPrevious=function(d){this._sources.push(d);var m=this;return d.on("data",function(f){m.processChunk(f)}),d.on("end",function(){m.closedSource(m.previous.streamInfo),m._sources.length?m.prepareNextSource():m.end()}),d.on("error",function(f){m.error(f)}),this},h.prototype.resume=function(){return!!A.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},h.prototype.error=function(d){var m=this._sources;if(!A.prototype.error.call(this,d))return!1;for(var f=0;f<m.length;f++)try{m[f].error(d)}catch{}return!0},h.prototype.lock=function(){A.prototype.lock.call(this);for(var d=this._sources,m=0;m<d.length;m++)d[m].lock()},n.exports=h},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,n,i){var s=e("../compressions"),a=e("./ZipFileWorker");i.generateWorker=function(o,A,l){var c=new a(A.streamFiles,l,A.platform,A.encodeFileName),u=0;try{o.forEach(function(h,d){u++;var m=(function(B,I){var C=B||I,N=s[C];if(!N)throw new Error(C+" is not a valid compression method !");return N})(d.options.compression,A.compression),f=d.options.compressionOptions||A.compressionOptions||{},b=d.dir,y=d.date;d._compressWorker(m,f).withStreamInfo("file",{name:h,dir:b,date:y,comment:d.comment||"",unixPermissions:d.unixPermissions,dosPermissions:d.dosPermissions}).pipe(c)}),c.entriesCount=u}catch(h){c.error(h)}return c}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,n,i){function s(){if(!(this instanceof s))return new s;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var a=new s;for(var o in this)typeof this[o]!="function"&&(a[o]=this[o]);return a}}(s.prototype=e("./object")).loadAsync=e("./load"),s.support=e("./support"),s.defaults=e("./defaults"),s.version="3.10.1",s.loadAsync=function(a,o){return new s().loadAsync(a,o)},s.external=e("./external"),n.exports=s},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,n,i){var s=e("./utils"),a=e("./external"),o=e("./utf8"),A=e("./zipEntries"),l=e("./stream/Crc32Probe"),c=e("./nodejsUtils");function u(h){return new a.Promise(function(d,m){var f=h.decompressed.getContentWorker().pipe(new l);f.on("error",function(b){m(b)}).on("end",function(){f.streamInfo.crc32!==h.decompressed.crc32?m(new Error("Corrupted zip : CRC32 mismatch")):d()}).resume()})}n.exports=function(h,d){var m=this;return d=s.extend(d||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),c.isNode&&c.isStream(h)?a.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):s.prepareContent("the loaded zip file",h,!0,d.optimizedBinaryString,d.base64).then(function(f){var b=new A(d);return b.load(f),b}).then(function(f){var b=[a.Promise.resolve(f)],y=f.files;if(d.checkCRC32)for(var B=0;B<y.length;B++)b.push(u(y[B]));return a.Promise.all(b)}).then(function(f){for(var b=f.shift(),y=b.files,B=0;B<y.length;B++){var I=y[B],C=I.fileNameStr,N=s.resolve(I.fileNameStr);m.file(N,I.decompressed,{binary:!0,optimizedBinaryString:!0,date:I.date,dir:I.dir,comment:I.fileCommentStr.length?I.fileCommentStr:null,unixPermissions:I.unixPermissions,dosPermissions:I.dosPermissions,createFolders:d.createFolders}),I.dir||(m.file(N).unsafeOriginalName=C)}return b.zipComment.length&&(m.comment=b.zipComment),m})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,n,i){var s=e("../utils"),a=e("../stream/GenericWorker");function o(A,l){a.call(this,"Nodejs stream input adapter for "+A),this._upstreamEnded=!1,this._bindStream(l)}s.inherits(o,a),o.prototype._bindStream=function(A){var l=this;(this._stream=A).pause(),A.on("data",function(c){l.push({data:c,meta:{percent:0}})}).on("error",function(c){l.isPaused?this.generatedError=c:l.error(c)}).on("end",function(){l.isPaused?l._upstreamEnded=!0:l.end()})},o.prototype.pause=function(){return!!a.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},n.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,n,i){var s=e("readable-stream").Readable;function a(o,A,l){s.call(this,A),this._helper=o;var c=this;o.on("data",function(u,h){c.push(u)||c._helper.pause(),l&&l(h)}).on("error",function(u){c.emit("error",u)}).on("end",function(){c.push(null)})}e("../utils").inherits(a,s),a.prototype._read=function(){this._helper.resume()},n.exports=a},{"../utils":32,"readable-stream":16}],14:[function(e,n,i){n.exports={isNode:typeof Buffer<"u",newBufferFrom:function(s,a){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(s,a);if(typeof s=="number")throw new Error('The "data" argument must not be a number');return new Buffer(s,a)},allocBuffer:function(s){if(Buffer.alloc)return Buffer.alloc(s);var a=new Buffer(s);return a.fill(0),a},isBuffer:function(s){return Buffer.isBuffer(s)},isStream:function(s){return s&&typeof s.on=="function"&&typeof s.pause=="function"&&typeof s.resume=="function"}}},{}],15:[function(e,n,i){function s(N,R,U){var x,v=o.getTypeOf(R),T=o.extend(U||{},c);T.date=T.date||new Date,T.compression!==null&&(T.compression=T.compression.toUpperCase()),typeof T.unixPermissions=="string"&&(T.unixPermissions=parseInt(T.unixPermissions,8)),T.unixPermissions&&16384&T.unixPermissions&&(T.dir=!0),T.dosPermissions&&16&T.dosPermissions&&(T.dir=!0),T.dir&&(N=y(N)),T.createFolders&&(x=b(N))&&B.call(this,x,!0);var E=v==="string"&&T.binary===!1&&T.base64===!1;U&&U.binary!==void 0||(T.binary=!E),(R instanceof u&&R.uncompressedSize===0||T.dir||!R||R.length===0)&&(T.base64=!1,T.binary=!0,R="",T.compression="STORE",v="string");var _=null;_=R instanceof u||R instanceof A?R:m.isNode&&m.isStream(R)?new f(N,R):o.prepareContent(N,R,T.binary,T.optimizedBinaryString,T.base64);var F=new h(N,_,T);this.files[N]=F}var a=e("./utf8"),o=e("./utils"),A=e("./stream/GenericWorker"),l=e("./stream/StreamHelper"),c=e("./defaults"),u=e("./compressedObject"),h=e("./zipObject"),d=e("./generate"),m=e("./nodejsUtils"),f=e("./nodejs/NodejsStreamInputAdapter"),b=function(N){N.slice(-1)==="/"&&(N=N.substring(0,N.length-1));var R=N.lastIndexOf("/");return 0<R?N.substring(0,R):""},y=function(N){return N.slice(-1)!=="/"&&(N+="/"),N},B=function(N,R){return R=R!==void 0?R:c.createFolders,N=y(N),this.files[N]||s.call(this,N,null,{dir:!0,createFolders:R}),this.files[N]};function I(N){return Object.prototype.toString.call(N)==="[object RegExp]"}var C={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(N){var R,U,x;for(R in this.files)x=this.files[R],(U=R.slice(this.root.length,R.length))&&R.slice(0,this.root.length)===this.root&&N(U,x)},filter:function(N){var R=[];return this.forEach(function(U,x){N(U,x)&&R.push(x)}),R},file:function(N,R,U){if(arguments.length!==1)return N=this.root+N,s.call(this,N,R,U),this;if(I(N)){var x=N;return this.filter(function(T,E){return!E.dir&&x.test(T)})}var v=this.files[this.root+N];return v&&!v.dir?v:null},folder:function(N){if(!N)return this;if(I(N))return this.filter(function(v,T){return T.dir&&N.test(v)});var R=this.root+N,U=B.call(this,R),x=this.clone();return x.root=U.name,x},remove:function(N){N=this.root+N;var R=this.files[N];if(R||(N.slice(-1)!=="/"&&(N+="/"),R=this.files[N]),R&&!R.dir)delete this.files[N];else for(var U=this.filter(function(v,T){return T.name.slice(0,N.length)===N}),x=0;x<U.length;x++)delete this.files[U[x].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(N){var R,U={};try{if((U=o.extend(N||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:a.utf8encode})).type=U.type.toLowerCase(),U.compression=U.compression.toUpperCase(),U.type==="binarystring"&&(U.type="string"),!U.type)throw new Error("No output type specified.");o.checkSupport(U.type),U.platform!=="darwin"&&U.platform!=="freebsd"&&U.platform!=="linux"&&U.platform!=="sunos"||(U.platform="UNIX"),U.platform==="win32"&&(U.platform="DOS");var x=U.comment||this.comment||"";R=d.generateWorker(this,U,x)}catch(v){(R=new A("error")).error(v)}return new l(R,U.type||"string",U.mimeType)},generateAsync:function(N,R){return this.generateInternalStream(N).accumulate(R)},generateNodeStream:function(N,R){return(N=N||{}).type||(N.type="nodebuffer"),this.generateInternalStream(N).toNodejsStream(R)}};n.exports=C},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,n,i){n.exports=e("stream")},{stream:void 0}],17:[function(e,n,i){var s=e("./DataReader");function a(o){s.call(this,o);for(var A=0;A<this.data.length;A++)o[A]=255&o[A]}e("../utils").inherits(a,s),a.prototype.byteAt=function(o){return this.data[this.zero+o]},a.prototype.lastIndexOfSignature=function(o){for(var A=o.charCodeAt(0),l=o.charCodeAt(1),c=o.charCodeAt(2),u=o.charCodeAt(3),h=this.length-4;0<=h;--h)if(this.data[h]===A&&this.data[h+1]===l&&this.data[h+2]===c&&this.data[h+3]===u)return h-this.zero;return-1},a.prototype.readAndCheckSignature=function(o){var A=o.charCodeAt(0),l=o.charCodeAt(1),c=o.charCodeAt(2),u=o.charCodeAt(3),h=this.readData(4);return A===h[0]&&l===h[1]&&c===h[2]&&u===h[3]},a.prototype.readData=function(o){if(this.checkOffset(o),o===0)return[];var A=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,A},n.exports=a},{"../utils":32,"./DataReader":18}],18:[function(e,n,i){var s=e("../utils");function a(o){this.data=o,this.length=o.length,this.index=0,this.zero=0}a.prototype={checkOffset:function(o){this.checkIndex(this.index+o)},checkIndex:function(o){if(this.length<this.zero+o||o<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+o+"). Corrupted zip ?")},setIndex:function(o){this.checkIndex(o),this.index=o},skip:function(o){this.setIndex(this.index+o)},byteAt:function(){},readInt:function(o){var A,l=0;for(this.checkOffset(o),A=this.index+o-1;A>=this.index;A--)l=(l<<8)+this.byteAt(A);return this.index+=o,l},readString:function(o){return s.transformTo("string",this.readData(o))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var o=this.readInt(4);return new Date(Date.UTC(1980+(o>>25&127),(o>>21&15)-1,o>>16&31,o>>11&31,o>>5&63,(31&o)<<1))}},n.exports=a},{"../utils":32}],19:[function(e,n,i){var s=e("./Uint8ArrayReader");function a(o){s.call(this,o)}e("../utils").inherits(a,s),a.prototype.readData=function(o){this.checkOffset(o);var A=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,A},n.exports=a},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,n,i){var s=e("./DataReader");function a(o){s.call(this,o)}e("../utils").inherits(a,s),a.prototype.byteAt=function(o){return this.data.charCodeAt(this.zero+o)},a.prototype.lastIndexOfSignature=function(o){return this.data.lastIndexOf(o)-this.zero},a.prototype.readAndCheckSignature=function(o){return o===this.readData(4)},a.prototype.readData=function(o){this.checkOffset(o);var A=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,A},n.exports=a},{"../utils":32,"./DataReader":18}],21:[function(e,n,i){var s=e("./ArrayReader");function a(o){s.call(this,o)}e("../utils").inherits(a,s),a.prototype.readData=function(o){if(this.checkOffset(o),o===0)return new Uint8Array(0);var A=this.data.subarray(this.zero+this.index,this.zero+this.index+o);return this.index+=o,A},n.exports=a},{"../utils":32,"./ArrayReader":17}],22:[function(e,n,i){var s=e("../utils"),a=e("../support"),o=e("./ArrayReader"),A=e("./StringReader"),l=e("./NodeBufferReader"),c=e("./Uint8ArrayReader");n.exports=function(u){var h=s.getTypeOf(u);return s.checkSupport(h),h!=="string"||a.uint8array?h==="nodebuffer"?new l(u):a.uint8array?new c(s.transformTo("uint8array",u)):new o(s.transformTo("array",u)):new A(u)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,n,i){i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(e,n,i){var s=e("./GenericWorker"),a=e("../utils");function o(A){s.call(this,"ConvertWorker to "+A),this.destType=A}a.inherits(o,s),o.prototype.processChunk=function(A){this.push({data:a.transformTo(this.destType,A.data),meta:A.meta})},n.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(e,n,i){var s=e("./GenericWorker"),a=e("../crc32");function o(){s.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(o,s),o.prototype.processChunk=function(A){this.streamInfo.crc32=a(A.data,this.streamInfo.crc32||0),this.push(A)},n.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,n,i){var s=e("../utils"),a=e("./GenericWorker");function o(A){a.call(this,"DataLengthProbe for "+A),this.propName=A,this.withStreamInfo(A,0)}s.inherits(o,a),o.prototype.processChunk=function(A){if(A){var l=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=l+A.data.length}a.prototype.processChunk.call(this,A)},n.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(e,n,i){var s=e("../utils"),a=e("./GenericWorker");function o(A){a.call(this,"DataWorker");var l=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,A.then(function(c){l.dataIsReady=!0,l.data=c,l.max=c&&c.length||0,l.type=s.getTypeOf(c),l.isPaused||l._tickAndRepeat()},function(c){l.error(c)})}s.inherits(o,a),o.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,s.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(s.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var A=null,l=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":A=this.data.substring(this.index,l);break;case"uint8array":A=this.data.subarray(this.index,l);break;case"array":case"nodebuffer":A=this.data.slice(this.index,l)}return this.index=l,this.push({data:A,meta:{percent:this.max?this.index/this.max*100:0}})},n.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(e,n,i){function s(a){this.name=a||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}s.prototype={push:function(a){this.emit("data",a)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(a){this.emit("error",a)}return!0},error:function(a){return!this.isFinished&&(this.isPaused?this.generatedError=a:(this.isFinished=!0,this.emit("error",a),this.previous&&this.previous.error(a),this.cleanUp()),!0)},on:function(a,o){return this._listeners[a].push(o),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(a,o){if(this._listeners[a])for(var A=0;A<this._listeners[a].length;A++)this._listeners[a][A].call(this,o)},pipe:function(a){return a.registerPrevious(this)},registerPrevious:function(a){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=a.streamInfo,this.mergeStreamInfo(),this.previous=a;var o=this;return a.on("data",function(A){o.processChunk(A)}),a.on("end",function(){o.end()}),a.on("error",function(A){o.error(A)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var a=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),a=!0),this.previous&&this.previous.resume(),!a},flush:function(){},processChunk:function(a){this.push(a)},withStreamInfo:function(a,o){return this.extraStreamInfo[a]=o,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var a in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,a)&&(this.streamInfo[a]=this.extraStreamInfo[a])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var a="Worker "+this.name;return this.previous?this.previous+" -> "+a:a}},n.exports=s},{}],29:[function(e,n,i){var s=e("../utils"),a=e("./ConvertWorker"),o=e("./GenericWorker"),A=e("../base64"),l=e("../support"),c=e("../external"),u=null;if(l.nodestream)try{u=e("../nodejs/NodejsStreamOutputAdapter")}catch{}function h(m,f){return new c.Promise(function(b,y){var B=[],I=m._internalType,C=m._outputType,N=m._mimeType;m.on("data",function(R,U){B.push(R),f&&f(U)}).on("error",function(R){B=[],y(R)}).on("end",function(){try{var R=(function(U,x,v){switch(U){case"blob":return s.newBlob(s.transformTo("arraybuffer",x),v);case"base64":return A.encode(x);default:return s.transformTo(U,x)}})(C,(function(U,x){var v,T=0,E=null,_=0;for(v=0;v<x.length;v++)_+=x[v].length;switch(U){case"string":return x.join("");case"array":return Array.prototype.concat.apply([],x);case"uint8array":for(E=new Uint8Array(_),v=0;v<x.length;v++)E.set(x[v],T),T+=x[v].length;return E;case"nodebuffer":return Buffer.concat(x);default:throw new Error("concat : unsupported type '"+U+"'")}})(I,B),N);b(R)}catch(U){y(U)}B=[]}).resume()})}function d(m,f,b){var y=f;switch(f){case"blob":case"arraybuffer":y="uint8array";break;case"base64":y="string"}try{this._internalType=y,this._outputType=f,this._mimeType=b,s.checkSupport(y),this._worker=m.pipe(new a(y)),m.lock()}catch(B){this._worker=new o("error"),this._worker.error(B)}}d.prototype={accumulate:function(m){return h(this,m)},on:function(m,f){var b=this;return m==="data"?this._worker.on(m,function(y){f.call(b,y.data,y.meta)}):this._worker.on(m,function(){s.delay(f,arguments,b)}),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(m){if(s.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new u(this,{objectMode:this._outputType!=="nodebuffer"},m)}},n.exports=d},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,n,i){if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",i.nodebuffer=typeof Buffer<"u",i.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")i.blob=!1;else{var s=new ArrayBuffer(0);try{i.blob=new Blob([s],{type:"application/zip"}).size===0}catch{try{var a=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);a.append(s),i.blob=a.getBlob("application/zip").size===0}catch{i.blob=!1}}}try{i.nodestream=!!e("readable-stream").Readable}catch{i.nodestream=!1}},{"readable-stream":16}],31:[function(e,n,i){for(var s=e("./utils"),a=e("./support"),o=e("./nodejsUtils"),A=e("./stream/GenericWorker"),l=new Array(256),c=0;c<256;c++)l[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;l[254]=l[254]=1;function u(){A.call(this,"utf-8 decode"),this.leftOver=null}function h(){A.call(this,"utf-8 encode")}i.utf8encode=function(d){return a.nodebuffer?o.newBufferFrom(d,"utf-8"):(function(m){var f,b,y,B,I,C=m.length,N=0;for(B=0;B<C;B++)(64512&(b=m.charCodeAt(B)))==55296&&B+1<C&&(64512&(y=m.charCodeAt(B+1)))==56320&&(b=65536+(b-55296<<10)+(y-56320),B++),N+=b<128?1:b<2048?2:b<65536?3:4;for(f=a.uint8array?new Uint8Array(N):new Array(N),B=I=0;I<N;B++)(64512&(b=m.charCodeAt(B)))==55296&&B+1<C&&(64512&(y=m.charCodeAt(B+1)))==56320&&(b=65536+(b-55296<<10)+(y-56320),B++),b<128?f[I++]=b:(b<2048?f[I++]=192|b>>>6:(b<65536?f[I++]=224|b>>>12:(f[I++]=240|b>>>18,f[I++]=128|b>>>12&63),f[I++]=128|b>>>6&63),f[I++]=128|63&b);return f})(d)},i.utf8decode=function(d){return a.nodebuffer?s.transformTo("nodebuffer",d).toString("utf-8"):(function(m){var f,b,y,B,I=m.length,C=new Array(2*I);for(f=b=0;f<I;)if((y=m[f++])<128)C[b++]=y;else if(4<(B=l[y]))C[b++]=65533,f+=B-1;else{for(y&=B===2?31:B===3?15:7;1<B&&f<I;)y=y<<6|63&m[f++],B--;1<B?C[b++]=65533:y<65536?C[b++]=y:(y-=65536,C[b++]=55296|y>>10&1023,C[b++]=56320|1023&y)}return C.length!==b&&(C.subarray?C=C.subarray(0,b):C.length=b),s.applyFromCharCode(C)})(d=s.transformTo(a.uint8array?"uint8array":"array",d))},s.inherits(u,A),u.prototype.processChunk=function(d){var m=s.transformTo(a.uint8array?"uint8array":"array",d.data);if(this.leftOver&&this.leftOver.length){if(a.uint8array){var f=m;(m=new Uint8Array(f.length+this.leftOver.length)).set(this.leftOver,0),m.set(f,this.leftOver.length)}else m=this.leftOver.concat(m);this.leftOver=null}var b=(function(B,I){var C;for((I=I||B.length)>B.length&&(I=B.length),C=I-1;0<=C&&(192&B[C])==128;)C--;return C<0||C===0?I:C+l[B[C]]>I?C:I})(m),y=m;b!==m.length&&(a.uint8array?(y=m.subarray(0,b),this.leftOver=m.subarray(b,m.length)):(y=m.slice(0,b),this.leftOver=m.slice(b,m.length))),this.push({data:i.utf8decode(y),meta:d.meta})},u.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=u,s.inherits(h,A),h.prototype.processChunk=function(d){this.push({data:i.utf8encode(d.data),meta:d.meta})},i.Utf8EncodeWorker=h},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,n,i){var s=e("./support"),a=e("./base64"),o=e("./nodejsUtils"),A=e("./external");function l(f){return f}function c(f,b){for(var y=0;y<f.length;++y)b[y]=255&f.charCodeAt(y);return b}e("setimmediate"),i.newBlob=function(f,b){i.checkSupport("blob");try{return new Blob([f],{type:b})}catch{try{var y=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return y.append(f),y.getBlob(b)}catch{throw new Error("Bug : can't construct the Blob.")}}};var u={stringifyByChunk:function(f,b,y){var B=[],I=0,C=f.length;if(C<=y)return String.fromCharCode.apply(null,f);for(;I<C;)b==="array"||b==="nodebuffer"?B.push(String.fromCharCode.apply(null,f.slice(I,Math.min(I+y,C)))):B.push(String.fromCharCode.apply(null,f.subarray(I,Math.min(I+y,C)))),I+=y;return B.join("")},stringifyByChar:function(f){for(var b="",y=0;y<f.length;y++)b+=String.fromCharCode(f[y]);return b},applyCanBeUsed:{uint8array:(function(){try{return s.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}})(),nodebuffer:(function(){try{return s.nodebuffer&&String.fromCharCode.apply(null,o.allocBuffer(1)).length===1}catch{return!1}})()}};function h(f){var b=65536,y=i.getTypeOf(f),B=!0;if(y==="uint8array"?B=u.applyCanBeUsed.uint8array:y==="nodebuffer"&&(B=u.applyCanBeUsed.nodebuffer),B)for(;1<b;)try{return u.stringifyByChunk(f,y,b)}catch{b=Math.floor(b/2)}return u.stringifyByChar(f)}function d(f,b){for(var y=0;y<f.length;y++)b[y]=f[y];return b}i.applyFromCharCode=h;var m={};m.string={string:l,array:function(f){return c(f,new Array(f.length))},arraybuffer:function(f){return m.string.uint8array(f).buffer},uint8array:function(f){return c(f,new Uint8Array(f.length))},nodebuffer:function(f){return c(f,o.allocBuffer(f.length))}},m.array={string:h,array:l,arraybuffer:function(f){return new Uint8Array(f).buffer},uint8array:function(f){return new Uint8Array(f)},nodebuffer:function(f){return o.newBufferFrom(f)}},m.arraybuffer={string:function(f){return h(new Uint8Array(f))},array:function(f){return d(new Uint8Array(f),new Array(f.byteLength))},arraybuffer:l,uint8array:function(f){return new Uint8Array(f)},nodebuffer:function(f){return o.newBufferFrom(new Uint8Array(f))}},m.uint8array={string:h,array:function(f){return d(f,new Array(f.length))},arraybuffer:function(f){return f.buffer},uint8array:l,nodebuffer:function(f){return o.newBufferFrom(f)}},m.nodebuffer={string:h,array:function(f){return d(f,new Array(f.length))},arraybuffer:function(f){return m.nodebuffer.uint8array(f).buffer},uint8array:function(f){return d(f,new Uint8Array(f.length))},nodebuffer:l},i.transformTo=function(f,b){if(b=b||"",!f)return b;i.checkSupport(f);var y=i.getTypeOf(b);return m[y][f](b)},i.resolve=function(f){for(var b=f.split("/"),y=[],B=0;B<b.length;B++){var I=b[B];I==="."||I===""&&B!==0&&B!==b.length-1||(I===".."?y.pop():y.push(I))}return y.join("/")},i.getTypeOf=function(f){return typeof f=="string"?"string":Object.prototype.toString.call(f)==="[object Array]"?"array":s.nodebuffer&&o.isBuffer(f)?"nodebuffer":s.uint8array&&f instanceof Uint8Array?"uint8array":s.arraybuffer&&f instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(f){if(!s[f.toLowerCase()])throw new Error(f+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(f){var b,y,B="";for(y=0;y<(f||"").length;y++)B+="\\x"+((b=f.charCodeAt(y))<16?"0":"")+b.toString(16).toUpperCase();return B},i.delay=function(f,b,y){setImmediate(function(){f.apply(y||null,b||[])})},i.inherits=function(f,b){function y(){}y.prototype=b.prototype,f.prototype=new y},i.extend=function(){var f,b,y={};for(f=0;f<arguments.length;f++)for(b in arguments[f])Object.prototype.hasOwnProperty.call(arguments[f],b)&&y[b]===void 0&&(y[b]=arguments[f][b]);return y},i.prepareContent=function(f,b,y,B,I){return A.Promise.resolve(b).then(function(C){return s.blob&&(C instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(C))!==-1)&&typeof FileReader<"u"?new A.Promise(function(N,R){var U=new FileReader;U.onload=function(x){N(x.target.result)},U.onerror=function(x){R(x.target.error)},U.readAsArrayBuffer(C)}):C}).then(function(C){var N=i.getTypeOf(C);return N?(N==="arraybuffer"?C=i.transformTo("uint8array",C):N==="string"&&(I?C=a.decode(C):y&&B!==!0&&(C=(function(R){return c(R,s.uint8array?new Uint8Array(R.length):new Array(R.length))})(C))),C):A.Promise.reject(new Error("Can't read the data of '"+f+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(e,n,i){var s=e("./reader/readerFor"),a=e("./utils"),o=e("./signature"),A=e("./zipEntry"),l=e("./support");function c(u){this.files=[],this.loadOptions=u}c.prototype={checkSignature:function(u){if(!this.reader.readAndCheckSignature(u)){this.reader.index-=4;var h=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+a.pretty(h)+", expected "+a.pretty(u)+")")}},isSignature:function(u,h){var d=this.reader.index;this.reader.setIndex(u);var m=this.reader.readString(4)===h;return this.reader.setIndex(d),m},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var u=this.reader.readData(this.zipCommentLength),h=l.uint8array?"uint8array":"array",d=a.transformTo(h,u);this.zipComment=this.loadOptions.decodeFileName(d)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var u,h,d,m=this.zip64EndOfCentralSize-44;0<m;)u=this.reader.readInt(2),h=this.reader.readInt(4),d=this.reader.readData(h),this.zip64ExtensibleData[u]={id:u,length:h,value:d}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var u,h;for(u=0;u<this.files.length;u++)h=this.files[u],this.reader.setIndex(h.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),h.readLocalPart(this.reader),h.handleUTF8(),h.processAttributes()},readCentralDir:function(){var u;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(u=new A({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(u);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var u=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(u<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(u);var h=u;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===a.MAX_VALUE_16BITS||this.diskWithCentralDirStart===a.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===a.MAX_VALUE_16BITS||this.centralDirRecords===a.MAX_VALUE_16BITS||this.centralDirSize===a.MAX_VALUE_32BITS||this.centralDirOffset===a.MAX_VALUE_32BITS){if(this.zip64=!0,(u=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(u),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var d=this.centralDirOffset+this.centralDirSize;this.zip64&&(d+=20,d+=12+this.zip64EndOfCentralSize);var m=h-d;if(0<m)this.isSignature(h,o.CENTRAL_FILE_HEADER)||(this.reader.zero=m);else if(m<0)throw new Error("Corrupted zip: missing "+Math.abs(m)+" bytes.")},prepareReader:function(u){this.reader=s(u)},load:function(u){this.prepareReader(u),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},n.exports=c},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(e,n,i){var s=e("./reader/readerFor"),a=e("./utils"),o=e("./compressedObject"),A=e("./crc32"),l=e("./utf8"),c=e("./compressions"),u=e("./support");function h(d,m){this.options=d,this.loadOptions=m}h.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(d){var m,f;if(d.skip(22),this.fileNameLength=d.readInt(2),f=d.readInt(2),this.fileName=d.readData(this.fileNameLength),d.skip(f),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((m=(function(b){for(var y in c)if(Object.prototype.hasOwnProperty.call(c,y)&&c[y].magic===b)return c[y];return null})(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+a.pretty(this.compressionMethod)+" unknown (inner file : "+a.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,m,d.readData(this.compressedSize))},readCentralPart:function(d){this.versionMadeBy=d.readInt(2),d.skip(2),this.bitFlag=d.readInt(2),this.compressionMethod=d.readString(2),this.date=d.readDate(),this.crc32=d.readInt(4),this.compressedSize=d.readInt(4),this.uncompressedSize=d.readInt(4);var m=d.readInt(2);if(this.extraFieldsLength=d.readInt(2),this.fileCommentLength=d.readInt(2),this.diskNumberStart=d.readInt(2),this.internalFileAttributes=d.readInt(2),this.externalFileAttributes=d.readInt(4),this.localHeaderOffset=d.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");d.skip(m),this.readExtraFields(d),this.parseZIP64ExtraField(d),this.fileComment=d.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var d=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),d==0&&(this.dosPermissions=63&this.externalFileAttributes),d==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var d=s(this.extraFields[1].value);this.uncompressedSize===a.MAX_VALUE_32BITS&&(this.uncompressedSize=d.readInt(8)),this.compressedSize===a.MAX_VALUE_32BITS&&(this.compressedSize=d.readInt(8)),this.localHeaderOffset===a.MAX_VALUE_32BITS&&(this.localHeaderOffset=d.readInt(8)),this.diskNumberStart===a.MAX_VALUE_32BITS&&(this.diskNumberStart=d.readInt(4))}},readExtraFields:function(d){var m,f,b,y=d.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});d.index+4<y;)m=d.readInt(2),f=d.readInt(2),b=d.readData(f),this.extraFields[m]={id:m,length:f,value:b};d.setIndex(y)},handleUTF8:function(){var d=u.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=l.utf8decode(this.fileName),this.fileCommentStr=l.utf8decode(this.fileComment);else{var m=this.findExtraFieldUnicodePath();if(m!==null)this.fileNameStr=m;else{var f=a.transformTo(d,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(f)}var b=this.findExtraFieldUnicodeComment();if(b!==null)this.fileCommentStr=b;else{var y=a.transformTo(d,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(y)}}},findExtraFieldUnicodePath:function(){var d=this.extraFields[28789];if(d){var m=s(d.value);return m.readInt(1)!==1||A(this.fileName)!==m.readInt(4)?null:l.utf8decode(m.readData(d.length-5))}return null},findExtraFieldUnicodeComment:function(){var d=this.extraFields[25461];if(d){var m=s(d.value);return m.readInt(1)!==1||A(this.fileComment)!==m.readInt(4)?null:l.utf8decode(m.readData(d.length-5))}return null}},n.exports=h},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,n,i){function s(m,f,b){this.name=m,this.dir=b.dir,this.date=b.date,this.comment=b.comment,this.unixPermissions=b.unixPermissions,this.dosPermissions=b.dosPermissions,this._data=f,this._dataBinary=b.binary,this.options={compression:b.compression,compressionOptions:b.compressionOptions}}var a=e("./stream/StreamHelper"),o=e("./stream/DataWorker"),A=e("./utf8"),l=e("./compressedObject"),c=e("./stream/GenericWorker");s.prototype={internalStream:function(m){var f=null,b="string";try{if(!m)throw new Error("No output type specified.");var y=(b=m.toLowerCase())==="string"||b==="text";b!=="binarystring"&&b!=="text"||(b="string"),f=this._decompressWorker();var B=!this._dataBinary;B&&!y&&(f=f.pipe(new A.Utf8EncodeWorker)),!B&&y&&(f=f.pipe(new A.Utf8DecodeWorker))}catch(I){(f=new c("error")).error(I)}return new a(f,b,"")},async:function(m,f){return this.internalStream(m).accumulate(f)},nodeStream:function(m,f){return this.internalStream(m||"nodebuffer").toNodejsStream(f)},_compressWorker:function(m,f){if(this._data instanceof l&&this._data.compression.magic===m.magic)return this._data.getCompressedWorker();var b=this._decompressWorker();return this._dataBinary||(b=b.pipe(new A.Utf8EncodeWorker)),l.createWorkerFrom(b,m,f)},_decompressWorker:function(){return this._data instanceof l?this._data.getContentWorker():this._data instanceof c?this._data:new o(this._data)}};for(var u=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],h=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},d=0;d<u.length;d++)s.prototype[u[d]]=h;n.exports=s},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,n,i){(function(s){var a,o,A=s.MutationObserver||s.WebKitMutationObserver;if(A){var l=0,c=new A(m),u=s.document.createTextNode("");c.observe(u,{characterData:!0}),a=function(){u.data=l=++l%2}}else if(s.setImmediate||s.MessageChannel===void 0)a="document"in s&&"onreadystatechange"in s.document.createElement("script")?function(){var f=s.document.createElement("script");f.onreadystatechange=function(){m(),f.onreadystatechange=null,f.parentNode.removeChild(f),f=null},s.document.documentElement.appendChild(f)}:function(){setTimeout(m,0)};else{var h=new s.MessageChannel;h.port1.onmessage=m,a=function(){h.port2.postMessage(0)}}var d=[];function m(){var f,b;o=!0;for(var y=d.length;y;){for(b=d,d=[],f=-1;++f<y;)b[f]();y=d.length}o=!1}n.exports=function(f){d.push(f)!==1||o||a()}}).call(this,typeof wp<"u"?wp:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(e,n,i){var s=e("immediate");function a(){}var o={},A=["REJECTED"],l=["FULFILLED"],c=["PENDING"];function u(y){if(typeof y!="function")throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,y!==a&&f(this,y)}function h(y,B,I){this.promise=y,typeof B=="function"&&(this.onFulfilled=B,this.callFulfilled=this.otherCallFulfilled),typeof I=="function"&&(this.onRejected=I,this.callRejected=this.otherCallRejected)}function d(y,B,I){s(function(){var C;try{C=B(I)}catch(N){return o.reject(y,N)}C===y?o.reject(y,new TypeError("Cannot resolve promise with itself")):o.resolve(y,C)})}function m(y){var B=y&&y.then;if(y&&(typeof y=="object"||typeof y=="function")&&typeof B=="function")return function(){B.apply(y,arguments)}}function f(y,B){var I=!1;function C(U){I||(I=!0,o.reject(y,U))}function N(U){I||(I=!0,o.resolve(y,U))}var R=b(function(){B(N,C)});R.status==="error"&&C(R.value)}function b(y,B){var I={};try{I.value=y(B),I.status="success"}catch(C){I.status="error",I.value=C}return I}(n.exports=u).prototype.finally=function(y){if(typeof y!="function")return this;var B=this.constructor;return this.then(function(I){return B.resolve(y()).then(function(){return I})},function(I){return B.resolve(y()).then(function(){throw I})})},u.prototype.catch=function(y){return this.then(null,y)},u.prototype.then=function(y,B){if(typeof y!="function"&&this.state===l||typeof B!="function"&&this.state===A)return this;var I=new this.constructor(a);return this.state!==c?d(I,this.state===l?y:B,this.outcome):this.queue.push(new h(I,y,B)),I},h.prototype.callFulfilled=function(y){o.resolve(this.promise,y)},h.prototype.otherCallFulfilled=function(y){d(this.promise,this.onFulfilled,y)},h.prototype.callRejected=function(y){o.reject(this.promise,y)},h.prototype.otherCallRejected=function(y){d(this.promise,this.onRejected,y)},o.resolve=function(y,B){var I=b(m,B);if(I.status==="error")return o.reject(y,I.value);var C=I.value;if(C)f(y,C);else{y.state=l,y.outcome=B;for(var N=-1,R=y.queue.length;++N<R;)y.queue[N].callFulfilled(B)}return y},o.reject=function(y,B){y.state=A,y.outcome=B;for(var I=-1,C=y.queue.length;++I<C;)y.queue[I].callRejected(B);return y},u.resolve=function(y){return y instanceof this?y:o.resolve(new this(a),y)},u.reject=function(y){var B=new this(a);return o.reject(B,y)},u.all=function(y){var B=this;if(Object.prototype.toString.call(y)!=="[object Array]")return this.reject(new TypeError("must be an array"));var I=y.length,C=!1;if(!I)return this.resolve([]);for(var N=new Array(I),R=0,U=-1,x=new this(a);++U<I;)v(y[U],U);return x;function v(T,E){B.resolve(T).then(function(_){N[E]=_,++R!==I||C||(C=!0,o.resolve(x,N))},function(_){C||(C=!0,o.reject(x,_))})}},u.race=function(y){var B=this;if(Object.prototype.toString.call(y)!=="[object Array]")return this.reject(new TypeError("must be an array"));var I=y.length,C=!1;if(!I)return this.resolve([]);for(var N=-1,R=new this(a);++N<I;)U=y[N],B.resolve(U).then(function(x){C||(C=!0,o.resolve(R,x))},function(x){C||(C=!0,o.reject(R,x))});var U;return R}},{immediate:36}],38:[function(e,n,i){var s={};(0,e("./lib/utils/common").assign)(s,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),n.exports=s},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,n,i){var s=e("./zlib/deflate"),a=e("./utils/common"),o=e("./utils/strings"),A=e("./zlib/messages"),l=e("./zlib/zstream"),c=Object.prototype.toString,u=0,h=-1,d=0,m=8;function f(y){if(!(this instanceof f))return new f(y);this.options=a.assign({level:h,method:m,chunkSize:16384,windowBits:15,memLevel:8,strategy:d,to:""},y||{});var B=this.options;B.raw&&0<B.windowBits?B.windowBits=-B.windowBits:B.gzip&&0<B.windowBits&&B.windowBits<16&&(B.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var I=s.deflateInit2(this.strm,B.level,B.method,B.windowBits,B.memLevel,B.strategy);if(I!==u)throw new Error(A[I]);if(B.header&&s.deflateSetHeader(this.strm,B.header),B.dictionary){var C;if(C=typeof B.dictionary=="string"?o.string2buf(B.dictionary):c.call(B.dictionary)==="[object ArrayBuffer]"?new Uint8Array(B.dictionary):B.dictionary,(I=s.deflateSetDictionary(this.strm,C))!==u)throw new Error(A[I]);this._dict_set=!0}}function b(y,B){var I=new f(B);if(I.push(y,!0),I.err)throw I.msg||A[I.err];return I.result}f.prototype.push=function(y,B){var I,C,N=this.strm,R=this.options.chunkSize;if(this.ended)return!1;C=B===~~B?B:B===!0?4:0,typeof y=="string"?N.input=o.string2buf(y):c.call(y)==="[object ArrayBuffer]"?N.input=new Uint8Array(y):N.input=y,N.next_in=0,N.avail_in=N.input.length;do{if(N.avail_out===0&&(N.output=new a.Buf8(R),N.next_out=0,N.avail_out=R),(I=s.deflate(N,C))!==1&&I!==u)return this.onEnd(I),!(this.ended=!0);N.avail_out!==0&&(N.avail_in!==0||C!==4&&C!==2)||(this.options.to==="string"?this.onData(o.buf2binstring(a.shrinkBuf(N.output,N.next_out))):this.onData(a.shrinkBuf(N.output,N.next_out)))}while((0<N.avail_in||N.avail_out===0)&&I!==1);return C===4?(I=s.deflateEnd(this.strm),this.onEnd(I),this.ended=!0,I===u):C!==2||(this.onEnd(u),!(N.avail_out=0))},f.prototype.onData=function(y){this.chunks.push(y)},f.prototype.onEnd=function(y){y===u&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=y,this.msg=this.strm.msg},i.Deflate=f,i.deflate=b,i.deflateRaw=function(y,B){return(B=B||{}).raw=!0,b(y,B)},i.gzip=function(y,B){return(B=B||{}).gzip=!0,b(y,B)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,n,i){var s=e("./zlib/inflate"),a=e("./utils/common"),o=e("./utils/strings"),A=e("./zlib/constants"),l=e("./zlib/messages"),c=e("./zlib/zstream"),u=e("./zlib/gzheader"),h=Object.prototype.toString;function d(f){if(!(this instanceof d))return new d(f);this.options=a.assign({chunkSize:16384,windowBits:0,to:""},f||{});var b=this.options;b.raw&&0<=b.windowBits&&b.windowBits<16&&(b.windowBits=-b.windowBits,b.windowBits===0&&(b.windowBits=-15)),!(0<=b.windowBits&&b.windowBits<16)||f&&f.windowBits||(b.windowBits+=32),15<b.windowBits&&b.windowBits<48&&(15&b.windowBits)==0&&(b.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var y=s.inflateInit2(this.strm,b.windowBits);if(y!==A.Z_OK)throw new Error(l[y]);this.header=new u,s.inflateGetHeader(this.strm,this.header)}function m(f,b){var y=new d(b);if(y.push(f,!0),y.err)throw y.msg||l[y.err];return y.result}d.prototype.push=function(f,b){var y,B,I,C,N,R,U=this.strm,x=this.options.chunkSize,v=this.options.dictionary,T=!1;if(this.ended)return!1;B=b===~~b?b:b===!0?A.Z_FINISH:A.Z_NO_FLUSH,typeof f=="string"?U.input=o.binstring2buf(f):h.call(f)==="[object ArrayBuffer]"?U.input=new Uint8Array(f):U.input=f,U.next_in=0,U.avail_in=U.input.length;do{if(U.avail_out===0&&(U.output=new a.Buf8(x),U.next_out=0,U.avail_out=x),(y=s.inflate(U,A.Z_NO_FLUSH))===A.Z_NEED_DICT&&v&&(R=typeof v=="string"?o.string2buf(v):h.call(v)==="[object ArrayBuffer]"?new Uint8Array(v):v,y=s.inflateSetDictionary(this.strm,R)),y===A.Z_BUF_ERROR&&T===!0&&(y=A.Z_OK,T=!1),y!==A.Z_STREAM_END&&y!==A.Z_OK)return this.onEnd(y),!(this.ended=!0);U.next_out&&(U.avail_out!==0&&y!==A.Z_STREAM_END&&(U.avail_in!==0||B!==A.Z_FINISH&&B!==A.Z_SYNC_FLUSH)||(this.options.to==="string"?(I=o.utf8border(U.output,U.next_out),C=U.next_out-I,N=o.buf2string(U.output,I),U.next_out=C,U.avail_out=x-C,C&&a.arraySet(U.output,U.output,I,C,0),this.onData(N)):this.onData(a.shrinkBuf(U.output,U.next_out)))),U.avail_in===0&&U.avail_out===0&&(T=!0)}while((0<U.avail_in||U.avail_out===0)&&y!==A.Z_STREAM_END);return y===A.Z_STREAM_END&&(B=A.Z_FINISH),B===A.Z_FINISH?(y=s.inflateEnd(this.strm),this.onEnd(y),this.ended=!0,y===A.Z_OK):B!==A.Z_SYNC_FLUSH||(this.onEnd(A.Z_OK),!(U.avail_out=0))},d.prototype.onData=function(f){this.chunks.push(f)},d.prototype.onEnd=function(f){f===A.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=f,this.msg=this.strm.msg},i.Inflate=d,i.inflate=m,i.inflateRaw=function(f,b){return(b=b||{}).raw=!0,m(f,b)},i.ungzip=m},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,n,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";i.assign=function(A){for(var l=Array.prototype.slice.call(arguments,1);l.length;){var c=l.shift();if(c){if(typeof c!="object")throw new TypeError(c+"must be non-object");for(var u in c)c.hasOwnProperty(u)&&(A[u]=c[u])}}return A},i.shrinkBuf=function(A,l){return A.length===l?A:A.subarray?A.subarray(0,l):(A.length=l,A)};var a={arraySet:function(A,l,c,u,h){if(l.subarray&&A.subarray)A.set(l.subarray(c,c+u),h);else for(var d=0;d<u;d++)A[h+d]=l[c+d]},flattenChunks:function(A){var l,c,u,h,d,m;for(l=u=0,c=A.length;l<c;l++)u+=A[l].length;for(m=new Uint8Array(u),l=h=0,c=A.length;l<c;l++)d=A[l],m.set(d,h),h+=d.length;return m}},o={arraySet:function(A,l,c,u,h){for(var d=0;d<u;d++)A[h+d]=l[c+d]},flattenChunks:function(A){return[].concat.apply([],A)}};i.setTyped=function(A){A?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,a)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,o))},i.setTyped(s)},{}],42:[function(e,n,i){var s=e("./common"),a=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch{a=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{o=!1}for(var A=new s.Buf8(256),l=0;l<256;l++)A[l]=252<=l?6:248<=l?5:240<=l?4:224<=l?3:192<=l?2:1;function c(u,h){if(h<65537&&(u.subarray&&o||!u.subarray&&a))return String.fromCharCode.apply(null,s.shrinkBuf(u,h));for(var d="",m=0;m<h;m++)d+=String.fromCharCode(u[m]);return d}A[254]=A[254]=1,i.string2buf=function(u){var h,d,m,f,b,y=u.length,B=0;for(f=0;f<y;f++)(64512&(d=u.charCodeAt(f)))==55296&&f+1<y&&(64512&(m=u.charCodeAt(f+1)))==56320&&(d=65536+(d-55296<<10)+(m-56320),f++),B+=d<128?1:d<2048?2:d<65536?3:4;for(h=new s.Buf8(B),f=b=0;b<B;f++)(64512&(d=u.charCodeAt(f)))==55296&&f+1<y&&(64512&(m=u.charCodeAt(f+1)))==56320&&(d=65536+(d-55296<<10)+(m-56320),f++),d<128?h[b++]=d:(d<2048?h[b++]=192|d>>>6:(d<65536?h[b++]=224|d>>>12:(h[b++]=240|d>>>18,h[b++]=128|d>>>12&63),h[b++]=128|d>>>6&63),h[b++]=128|63&d);return h},i.buf2binstring=function(u){return c(u,u.length)},i.binstring2buf=function(u){for(var h=new s.Buf8(u.length),d=0,m=h.length;d<m;d++)h[d]=u.charCodeAt(d);return h},i.buf2string=function(u,h){var d,m,f,b,y=h||u.length,B=new Array(2*y);for(d=m=0;d<y;)if((f=u[d++])<128)B[m++]=f;else if(4<(b=A[f]))B[m++]=65533,d+=b-1;else{for(f&=b===2?31:b===3?15:7;1<b&&d<y;)f=f<<6|63&u[d++],b--;1<b?B[m++]=65533:f<65536?B[m++]=f:(f-=65536,B[m++]=55296|f>>10&1023,B[m++]=56320|1023&f)}return c(B,m)},i.utf8border=function(u,h){var d;for((h=h||u.length)>u.length&&(h=u.length),d=h-1;0<=d&&(192&u[d])==128;)d--;return d<0||d===0?h:d+A[u[d]]>h?d:h}},{"./common":41}],43:[function(e,n,i){n.exports=function(s,a,o,A){for(var l=65535&s|0,c=s>>>16&65535|0,u=0;o!==0;){for(o-=u=2e3<o?2e3:o;c=c+(l=l+a[A++]|0)|0,--u;);l%=65521,c%=65521}return l|c<<16|0}},{}],44:[function(e,n,i){n.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,n,i){var s=(function(){for(var a,o=[],A=0;A<256;A++){a=A;for(var l=0;l<8;l++)a=1&a?3988292384^a>>>1:a>>>1;o[A]=a}return o})();n.exports=function(a,o,A,l){var c=s,u=l+A;a^=-1;for(var h=l;h<u;h++)a=a>>>8^c[255&(a^o[h])];return-1^a}},{}],46:[function(e,n,i){var s,a=e("../utils/common"),o=e("./trees"),A=e("./adler32"),l=e("./crc32"),c=e("./messages"),u=0,h=4,d=0,m=-2,f=-1,b=4,y=2,B=8,I=9,C=286,N=30,R=19,U=2*C+1,x=15,v=3,T=258,E=T+v+1,_=42,F=113,k=1,Z=2,ut=3,nt=4;function j(D,$){return D.msg=c[$],$}function G(D){return(D<<1)-(4<D?9:0)}function pt(D){for(var $=D.length;0<=--$;)D[$]=0}function q(D){var $=D.state,bt=$.pending;bt>D.avail_out&&(bt=D.avail_out),bt!==0&&(a.arraySet(D.output,$.pending_buf,$.pending_out,bt,D.next_out),D.next_out+=bt,$.pending_out+=bt,D.total_out+=bt,D.avail_out-=bt,$.pending-=bt,$.pending===0&&($.pending_out=0))}function L(D,$){o._tr_flush_block(D,0<=D.block_start?D.block_start:-1,D.strstart-D.block_start,$),D.block_start=D.strstart,q(D.strm)}function O(D,$){D.pending_buf[D.pending++]=$}function V(D,$){D.pending_buf[D.pending++]=$>>>8&255,D.pending_buf[D.pending++]=255&$}function X(D,$){var bt,rt,W=D.max_chain_length,at=D.strstart,Ct=D.prev_length,xt=D.nice_match,yt=D.strstart>D.w_size-E?D.strstart-(D.w_size-E):0,kt=D.window,Rt=D.w_mask,Lt=D.prev,Qt=D.strstart+T,se=kt[at+Ct-1],te=kt[at+Ct];D.prev_length>=D.good_match&&(W>>=2),xt>D.lookahead&&(xt=D.lookahead);do if(kt[(bt=$)+Ct]===te&&kt[bt+Ct-1]===se&&kt[bt]===kt[at]&&kt[++bt]===kt[at+1]){at+=2,bt++;do;while(kt[++at]===kt[++bt]&&kt[++at]===kt[++bt]&&kt[++at]===kt[++bt]&&kt[++at]===kt[++bt]&&kt[++at]===kt[++bt]&&kt[++at]===kt[++bt]&&kt[++at]===kt[++bt]&&kt[++at]===kt[++bt]&&at<Qt);if(rt=T-(Qt-at),at=Qt-T,Ct<rt){if(D.match_start=$,xt<=(Ct=rt))break;se=kt[at+Ct-1],te=kt[at+Ct]}}while(($=Lt[$&Rt])>yt&&--W!=0);return Ct<=D.lookahead?Ct:D.lookahead}function At(D){var $,bt,rt,W,at,Ct,xt,yt,kt,Rt,Lt=D.w_size;do{if(W=D.window_size-D.lookahead-D.strstart,D.strstart>=Lt+(Lt-E)){for(a.arraySet(D.window,D.window,Lt,Lt,0),D.match_start-=Lt,D.strstart-=Lt,D.block_start-=Lt,$=bt=D.hash_size;rt=D.head[--$],D.head[$]=Lt<=rt?rt-Lt:0,--bt;);for($=bt=Lt;rt=D.prev[--$],D.prev[$]=Lt<=rt?rt-Lt:0,--bt;);W+=Lt}if(D.strm.avail_in===0)break;if(Ct=D.strm,xt=D.window,yt=D.strstart+D.lookahead,kt=W,Rt=void 0,Rt=Ct.avail_in,kt<Rt&&(Rt=kt),bt=Rt===0?0:(Ct.avail_in-=Rt,a.arraySet(xt,Ct.input,Ct.next_in,Rt,yt),Ct.state.wrap===1?Ct.adler=A(Ct.adler,xt,Rt,yt):Ct.state.wrap===2&&(Ct.adler=l(Ct.adler,xt,Rt,yt)),Ct.next_in+=Rt,Ct.total_in+=Rt,Rt),D.lookahead+=bt,D.lookahead+D.insert>=v)for(at=D.strstart-D.insert,D.ins_h=D.window[at],D.ins_h=(D.ins_h<<D.hash_shift^D.window[at+1])&D.hash_mask;D.insert&&(D.ins_h=(D.ins_h<<D.hash_shift^D.window[at+v-1])&D.hash_mask,D.prev[at&D.w_mask]=D.head[D.ins_h],D.head[D.ins_h]=at,at++,D.insert--,!(D.lookahead+D.insert<v)););}while(D.lookahead<E&&D.strm.avail_in!==0)}function et(D,$){for(var bt,rt;;){if(D.lookahead<E){if(At(D),D.lookahead<E&&$===u)return k;if(D.lookahead===0)break}if(bt=0,D.lookahead>=v&&(D.ins_h=(D.ins_h<<D.hash_shift^D.window[D.strstart+v-1])&D.hash_mask,bt=D.prev[D.strstart&D.w_mask]=D.head[D.ins_h],D.head[D.ins_h]=D.strstart),bt!==0&&D.strstart-bt<=D.w_size-E&&(D.match_length=X(D,bt)),D.match_length>=v)if(rt=o._tr_tally(D,D.strstart-D.match_start,D.match_length-v),D.lookahead-=D.match_length,D.match_length<=D.max_lazy_match&&D.lookahead>=v){for(D.match_length--;D.strstart++,D.ins_h=(D.ins_h<<D.hash_shift^D.window[D.strstart+v-1])&D.hash_mask,bt=D.prev[D.strstart&D.w_mask]=D.head[D.ins_h],D.head[D.ins_h]=D.strstart,--D.match_length!=0;);D.strstart++}else D.strstart+=D.match_length,D.match_length=0,D.ins_h=D.window[D.strstart],D.ins_h=(D.ins_h<<D.hash_shift^D.window[D.strstart+1])&D.hash_mask;else rt=o._tr_tally(D,0,D.window[D.strstart]),D.lookahead--,D.strstart++;if(rt&&(L(D,!1),D.strm.avail_out===0))return k}return D.insert=D.strstart<v-1?D.strstart:v-1,$===h?(L(D,!0),D.strm.avail_out===0?ut:nt):D.last_lit&&(L(D,!1),D.strm.avail_out===0)?k:Z}function st(D,$){for(var bt,rt,W;;){if(D.lookahead<E){if(At(D),D.lookahead<E&&$===u)return k;if(D.lookahead===0)break}if(bt=0,D.lookahead>=v&&(D.ins_h=(D.ins_h<<D.hash_shift^D.window[D.strstart+v-1])&D.hash_mask,bt=D.prev[D.strstart&D.w_mask]=D.head[D.ins_h],D.head[D.ins_h]=D.strstart),D.prev_length=D.match_length,D.prev_match=D.match_start,D.match_length=v-1,bt!==0&&D.prev_length<D.max_lazy_match&&D.strstart-bt<=D.w_size-E&&(D.match_length=X(D,bt),D.match_length<=5&&(D.strategy===1||D.match_length===v&&4096<D.strstart-D.match_start)&&(D.match_length=v-1)),D.prev_length>=v&&D.match_length<=D.prev_length){for(W=D.strstart+D.lookahead-v,rt=o._tr_tally(D,D.strstart-1-D.prev_match,D.prev_length-v),D.lookahead-=D.prev_length-1,D.prev_length-=2;++D.strstart<=W&&(D.ins_h=(D.ins_h<<D.hash_shift^D.window[D.strstart+v-1])&D.hash_mask,bt=D.prev[D.strstart&D.w_mask]=D.head[D.ins_h],D.head[D.ins_h]=D.strstart),--D.prev_length!=0;);if(D.match_available=0,D.match_length=v-1,D.strstart++,rt&&(L(D,!1),D.strm.avail_out===0))return k}else if(D.match_available){if((rt=o._tr_tally(D,0,D.window[D.strstart-1]))&&L(D,!1),D.strstart++,D.lookahead--,D.strm.avail_out===0)return k}else D.match_available=1,D.strstart++,D.lookahead--}return D.match_available&&(rt=o._tr_tally(D,0,D.window[D.strstart-1]),D.match_available=0),D.insert=D.strstart<v-1?D.strstart:v-1,$===h?(L(D,!0),D.strm.avail_out===0?ut:nt):D.last_lit&&(L(D,!1),D.strm.avail_out===0)?k:Z}function dt(D,$,bt,rt,W){this.good_length=D,this.max_lazy=$,this.nice_length=bt,this.max_chain=rt,this.func=W}function vt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=B,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new a.Buf16(2*U),this.dyn_dtree=new a.Buf16(2*(2*N+1)),this.bl_tree=new a.Buf16(2*(2*R+1)),pt(this.dyn_ltree),pt(this.dyn_dtree),pt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new a.Buf16(x+1),this.heap=new a.Buf16(2*C+1),pt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new a.Buf16(2*C+1),pt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function _t(D){var $;return D&&D.state?(D.total_in=D.total_out=0,D.data_type=y,($=D.state).pending=0,$.pending_out=0,$.wrap<0&&($.wrap=-$.wrap),$.status=$.wrap?_:F,D.adler=$.wrap===2?0:1,$.last_flush=u,o._tr_init($),d):j(D,m)}function Mt(D){var $=_t(D);return $===d&&(function(bt){bt.window_size=2*bt.w_size,pt(bt.head),bt.max_lazy_match=s[bt.level].max_lazy,bt.good_match=s[bt.level].good_length,bt.nice_match=s[bt.level].nice_length,bt.max_chain_length=s[bt.level].max_chain,bt.strstart=0,bt.block_start=0,bt.lookahead=0,bt.insert=0,bt.match_length=bt.prev_length=v-1,bt.match_available=0,bt.ins_h=0})(D.state),$}function Ot(D,$,bt,rt,W,at){if(!D)return m;var Ct=1;if($===f&&($=6),rt<0?(Ct=0,rt=-rt):15<rt&&(Ct=2,rt-=16),W<1||I<W||bt!==B||rt<8||15<rt||$<0||9<$||at<0||b<at)return j(D,m);rt===8&&(rt=9);var xt=new vt;return(D.state=xt).strm=D,xt.wrap=Ct,xt.gzhead=null,xt.w_bits=rt,xt.w_size=1<<xt.w_bits,xt.w_mask=xt.w_size-1,xt.hash_bits=W+7,xt.hash_size=1<<xt.hash_bits,xt.hash_mask=xt.hash_size-1,xt.hash_shift=~~((xt.hash_bits+v-1)/v),xt.window=new a.Buf8(2*xt.w_size),xt.head=new a.Buf16(xt.hash_size),xt.prev=new a.Buf16(xt.w_size),xt.lit_bufsize=1<<W+6,xt.pending_buf_size=4*xt.lit_bufsize,xt.pending_buf=new a.Buf8(xt.pending_buf_size),xt.d_buf=1*xt.lit_bufsize,xt.l_buf=3*xt.lit_bufsize,xt.level=$,xt.strategy=at,xt.method=bt,Mt(D)}s=[new dt(0,0,0,0,function(D,$){var bt=65535;for(bt>D.pending_buf_size-5&&(bt=D.pending_buf_size-5);;){if(D.lookahead<=1){if(At(D),D.lookahead===0&&$===u)return k;if(D.lookahead===0)break}D.strstart+=D.lookahead,D.lookahead=0;var rt=D.block_start+bt;if((D.strstart===0||D.strstart>=rt)&&(D.lookahead=D.strstart-rt,D.strstart=rt,L(D,!1),D.strm.avail_out===0)||D.strstart-D.block_start>=D.w_size-E&&(L(D,!1),D.strm.avail_out===0))return k}return D.insert=0,$===h?(L(D,!0),D.strm.avail_out===0?ut:nt):(D.strstart>D.block_start&&(L(D,!1),D.strm.avail_out),k)}),new dt(4,4,8,4,et),new dt(4,5,16,8,et),new dt(4,6,32,32,et),new dt(4,4,16,16,st),new dt(8,16,32,32,st),new dt(8,16,128,128,st),new dt(8,32,128,256,st),new dt(32,128,258,1024,st),new dt(32,258,258,4096,st)],i.deflateInit=function(D,$){return Ot(D,$,B,15,8,0)},i.deflateInit2=Ot,i.deflateReset=Mt,i.deflateResetKeep=_t,i.deflateSetHeader=function(D,$){return D&&D.state?D.state.wrap!==2?m:(D.state.gzhead=$,d):m},i.deflate=function(D,$){var bt,rt,W,at;if(!D||!D.state||5<$||$<0)return D?j(D,m):m;if(rt=D.state,!D.output||!D.input&&D.avail_in!==0||rt.status===666&&$!==h)return j(D,D.avail_out===0?-5:m);if(rt.strm=D,bt=rt.last_flush,rt.last_flush=$,rt.status===_)if(rt.wrap===2)D.adler=0,O(rt,31),O(rt,139),O(rt,8),rt.gzhead?(O(rt,(rt.gzhead.text?1:0)+(rt.gzhead.hcrc?2:0)+(rt.gzhead.extra?4:0)+(rt.gzhead.name?8:0)+(rt.gzhead.comment?16:0)),O(rt,255&rt.gzhead.time),O(rt,rt.gzhead.time>>8&255),O(rt,rt.gzhead.time>>16&255),O(rt,rt.gzhead.time>>24&255),O(rt,rt.level===9?2:2<=rt.strategy||rt.level<2?4:0),O(rt,255&rt.gzhead.os),rt.gzhead.extra&&rt.gzhead.extra.length&&(O(rt,255&rt.gzhead.extra.length),O(rt,rt.gzhead.extra.length>>8&255)),rt.gzhead.hcrc&&(D.adler=l(D.adler,rt.pending_buf,rt.pending,0)),rt.gzindex=0,rt.status=69):(O(rt,0),O(rt,0),O(rt,0),O(rt,0),O(rt,0),O(rt,rt.level===9?2:2<=rt.strategy||rt.level<2?4:0),O(rt,3),rt.status=F);else{var Ct=B+(rt.w_bits-8<<4)<<8;Ct|=(2<=rt.strategy||rt.level<2?0:rt.level<6?1:rt.level===6?2:3)<<6,rt.strstart!==0&&(Ct|=32),Ct+=31-Ct%31,rt.status=F,V(rt,Ct),rt.strstart!==0&&(V(rt,D.adler>>>16),V(rt,65535&D.adler)),D.adler=1}if(rt.status===69)if(rt.gzhead.extra){for(W=rt.pending;rt.gzindex<(65535&rt.gzhead.extra.length)&&(rt.pending!==rt.pending_buf_size||(rt.gzhead.hcrc&&rt.pending>W&&(D.adler=l(D.adler,rt.pending_buf,rt.pending-W,W)),q(D),W=rt.pending,rt.pending!==rt.pending_buf_size));)O(rt,255&rt.gzhead.extra[rt.gzindex]),rt.gzindex++;rt.gzhead.hcrc&&rt.pending>W&&(D.adler=l(D.adler,rt.pending_buf,rt.pending-W,W)),rt.gzindex===rt.gzhead.extra.length&&(rt.gzindex=0,rt.status=73)}else rt.status=73;if(rt.status===73)if(rt.gzhead.name){W=rt.pending;do{if(rt.pending===rt.pending_buf_size&&(rt.gzhead.hcrc&&rt.pending>W&&(D.adler=l(D.adler,rt.pending_buf,rt.pending-W,W)),q(D),W=rt.pending,rt.pending===rt.pending_buf_size)){at=1;break}at=rt.gzindex<rt.gzhead.name.length?255&rt.gzhead.name.charCodeAt(rt.gzindex++):0,O(rt,at)}while(at!==0);rt.gzhead.hcrc&&rt.pending>W&&(D.adler=l(D.adler,rt.pending_buf,rt.pending-W,W)),at===0&&(rt.gzindex=0,rt.status=91)}else rt.status=91;if(rt.status===91)if(rt.gzhead.comment){W=rt.pending;do{if(rt.pending===rt.pending_buf_size&&(rt.gzhead.hcrc&&rt.pending>W&&(D.adler=l(D.adler,rt.pending_buf,rt.pending-W,W)),q(D),W=rt.pending,rt.pending===rt.pending_buf_size)){at=1;break}at=rt.gzindex<rt.gzhead.comment.length?255&rt.gzhead.comment.charCodeAt(rt.gzindex++):0,O(rt,at)}while(at!==0);rt.gzhead.hcrc&&rt.pending>W&&(D.adler=l(D.adler,rt.pending_buf,rt.pending-W,W)),at===0&&(rt.status=103)}else rt.status=103;if(rt.status===103&&(rt.gzhead.hcrc?(rt.pending+2>rt.pending_buf_size&&q(D),rt.pending+2<=rt.pending_buf_size&&(O(rt,255&D.adler),O(rt,D.adler>>8&255),D.adler=0,rt.status=F)):rt.status=F),rt.pending!==0){if(q(D),D.avail_out===0)return rt.last_flush=-1,d}else if(D.avail_in===0&&G($)<=G(bt)&&$!==h)return j(D,-5);if(rt.status===666&&D.avail_in!==0)return j(D,-5);if(D.avail_in!==0||rt.lookahead!==0||$!==u&&rt.status!==666){var xt=rt.strategy===2?(function(yt,kt){for(var Rt;;){if(yt.lookahead===0&&(At(yt),yt.lookahead===0)){if(kt===u)return k;break}if(yt.match_length=0,Rt=o._tr_tally(yt,0,yt.window[yt.strstart]),yt.lookahead--,yt.strstart++,Rt&&(L(yt,!1),yt.strm.avail_out===0))return k}return yt.insert=0,kt===h?(L(yt,!0),yt.strm.avail_out===0?ut:nt):yt.last_lit&&(L(yt,!1),yt.strm.avail_out===0)?k:Z})(rt,$):rt.strategy===3?(function(yt,kt){for(var Rt,Lt,Qt,se,te=yt.window;;){if(yt.lookahead<=T){if(At(yt),yt.lookahead<=T&&kt===u)return k;if(yt.lookahead===0)break}if(yt.match_length=0,yt.lookahead>=v&&0<yt.strstart&&(Lt=te[Qt=yt.strstart-1])===te[++Qt]&&Lt===te[++Qt]&&Lt===te[++Qt]){se=yt.strstart+T;do;while(Lt===te[++Qt]&&Lt===te[++Qt]&&Lt===te[++Qt]&&Lt===te[++Qt]&&Lt===te[++Qt]&&Lt===te[++Qt]&&Lt===te[++Qt]&&Lt===te[++Qt]&&Qt<se);yt.match_length=T-(se-Qt),yt.match_length>yt.lookahead&&(yt.match_length=yt.lookahead)}if(yt.match_length>=v?(Rt=o._tr_tally(yt,1,yt.match_length-v),yt.lookahead-=yt.match_length,yt.strstart+=yt.match_length,yt.match_length=0):(Rt=o._tr_tally(yt,0,yt.window[yt.strstart]),yt.lookahead--,yt.strstart++),Rt&&(L(yt,!1),yt.strm.avail_out===0))return k}return yt.insert=0,kt===h?(L(yt,!0),yt.strm.avail_out===0?ut:nt):yt.last_lit&&(L(yt,!1),yt.strm.avail_out===0)?k:Z})(rt,$):s[rt.level].func(rt,$);if(xt!==ut&&xt!==nt||(rt.status=666),xt===k||xt===ut)return D.avail_out===0&&(rt.last_flush=-1),d;if(xt===Z&&($===1?o._tr_align(rt):$!==5&&(o._tr_stored_block(rt,0,0,!1),$===3&&(pt(rt.head),rt.lookahead===0&&(rt.strstart=0,rt.block_start=0,rt.insert=0))),q(D),D.avail_out===0))return rt.last_flush=-1,d}return $!==h?d:rt.wrap<=0?1:(rt.wrap===2?(O(rt,255&D.adler),O(rt,D.adler>>8&255),O(rt,D.adler>>16&255),O(rt,D.adler>>24&255),O(rt,255&D.total_in),O(rt,D.total_in>>8&255),O(rt,D.total_in>>16&255),O(rt,D.total_in>>24&255)):(V(rt,D.adler>>>16),V(rt,65535&D.adler)),q(D),0<rt.wrap&&(rt.wrap=-rt.wrap),rt.pending!==0?d:1)},i.deflateEnd=function(D){var $;return D&&D.state?($=D.state.status)!==_&&$!==69&&$!==73&&$!==91&&$!==103&&$!==F&&$!==666?j(D,m):(D.state=null,$===F?j(D,-3):d):m},i.deflateSetDictionary=function(D,$){var bt,rt,W,at,Ct,xt,yt,kt,Rt=$.length;if(!D||!D.state||(at=(bt=D.state).wrap)===2||at===1&&bt.status!==_||bt.lookahead)return m;for(at===1&&(D.adler=A(D.adler,$,Rt,0)),bt.wrap=0,Rt>=bt.w_size&&(at===0&&(pt(bt.head),bt.strstart=0,bt.block_start=0,bt.insert=0),kt=new a.Buf8(bt.w_size),a.arraySet(kt,$,Rt-bt.w_size,bt.w_size,0),$=kt,Rt=bt.w_size),Ct=D.avail_in,xt=D.next_in,yt=D.input,D.avail_in=Rt,D.next_in=0,D.input=$,At(bt);bt.lookahead>=v;){for(rt=bt.strstart,W=bt.lookahead-(v-1);bt.ins_h=(bt.ins_h<<bt.hash_shift^bt.window[rt+v-1])&bt.hash_mask,bt.prev[rt&bt.w_mask]=bt.head[bt.ins_h],bt.head[bt.ins_h]=rt,rt++,--W;);bt.strstart=rt,bt.lookahead=v-1,At(bt)}return bt.strstart+=bt.lookahead,bt.block_start=bt.strstart,bt.insert=bt.lookahead,bt.lookahead=0,bt.match_length=bt.prev_length=v-1,bt.match_available=0,D.next_in=xt,D.input=yt,D.avail_in=Ct,bt.wrap=at,d},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,n,i){n.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,n,i){n.exports=function(s,a){var o,A,l,c,u,h,d,m,f,b,y,B,I,C,N,R,U,x,v,T,E,_,F,k,Z;o=s.state,A=s.next_in,k=s.input,l=A+(s.avail_in-5),c=s.next_out,Z=s.output,u=c-(a-s.avail_out),h=c+(s.avail_out-257),d=o.dmax,m=o.wsize,f=o.whave,b=o.wnext,y=o.window,B=o.hold,I=o.bits,C=o.lencode,N=o.distcode,R=(1<<o.lenbits)-1,U=(1<<o.distbits)-1;t:do{I<15&&(B+=k[A++]<<I,I+=8,B+=k[A++]<<I,I+=8),x=C[B&R];e:for(;;){if(B>>>=v=x>>>24,I-=v,(v=x>>>16&255)===0)Z[c++]=65535&x;else{if(!(16&v)){if((64&v)==0){x=C[(65535&x)+(B&(1<<v)-1)];continue e}if(32&v){o.mode=12;break t}s.msg="invalid literal/length code",o.mode=30;break t}T=65535&x,(v&=15)&&(I<v&&(B+=k[A++]<<I,I+=8),T+=B&(1<<v)-1,B>>>=v,I-=v),I<15&&(B+=k[A++]<<I,I+=8,B+=k[A++]<<I,I+=8),x=N[B&U];r:for(;;){if(B>>>=v=x>>>24,I-=v,!(16&(v=x>>>16&255))){if((64&v)==0){x=N[(65535&x)+(B&(1<<v)-1)];continue r}s.msg="invalid distance code",o.mode=30;break t}if(E=65535&x,I<(v&=15)&&(B+=k[A++]<<I,(I+=8)<v&&(B+=k[A++]<<I,I+=8)),d<(E+=B&(1<<v)-1)){s.msg="invalid distance too far back",o.mode=30;break t}if(B>>>=v,I-=v,(v=c-u)<E){if(f<(v=E-v)&&o.sane){s.msg="invalid distance too far back",o.mode=30;break t}if(F=y,(_=0)===b){if(_+=m-v,v<T){for(T-=v;Z[c++]=y[_++],--v;);_=c-E,F=Z}}else if(b<v){if(_+=m+b-v,(v-=b)<T){for(T-=v;Z[c++]=y[_++],--v;);if(_=0,b<T){for(T-=v=b;Z[c++]=y[_++],--v;);_=c-E,F=Z}}}else if(_+=b-v,v<T){for(T-=v;Z[c++]=y[_++],--v;);_=c-E,F=Z}for(;2<T;)Z[c++]=F[_++],Z[c++]=F[_++],Z[c++]=F[_++],T-=3;T&&(Z[c++]=F[_++],1<T&&(Z[c++]=F[_++]))}else{for(_=c-E;Z[c++]=Z[_++],Z[c++]=Z[_++],Z[c++]=Z[_++],2<(T-=3););T&&(Z[c++]=Z[_++],1<T&&(Z[c++]=Z[_++]))}break}}break}}while(A<l&&c<h);A-=T=I>>3,B&=(1<<(I-=T<<3))-1,s.next_in=A,s.next_out=c,s.avail_in=A<l?l-A+5:5-(A-l),s.avail_out=c<h?h-c+257:257-(c-h),o.hold=B,o.bits=I}},{}],49:[function(e,n,i){var s=e("../utils/common"),a=e("./adler32"),o=e("./crc32"),A=e("./inffast"),l=e("./inftrees"),c=1,u=2,h=0,d=-2,m=1,f=852,b=592;function y(_){return(_>>>24&255)+(_>>>8&65280)+((65280&_)<<8)+((255&_)<<24)}function B(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function I(_){var F;return _&&_.state?(F=_.state,_.total_in=_.total_out=F.total=0,_.msg="",F.wrap&&(_.adler=1&F.wrap),F.mode=m,F.last=0,F.havedict=0,F.dmax=32768,F.head=null,F.hold=0,F.bits=0,F.lencode=F.lendyn=new s.Buf32(f),F.distcode=F.distdyn=new s.Buf32(b),F.sane=1,F.back=-1,h):d}function C(_){var F;return _&&_.state?((F=_.state).wsize=0,F.whave=0,F.wnext=0,I(_)):d}function N(_,F){var k,Z;return _&&_.state?(Z=_.state,F<0?(k=0,F=-F):(k=1+(F>>4),F<48&&(F&=15)),F&&(F<8||15<F)?d:(Z.window!==null&&Z.wbits!==F&&(Z.window=null),Z.wrap=k,Z.wbits=F,C(_))):d}function R(_,F){var k,Z;return _?(Z=new B,(_.state=Z).window=null,(k=N(_,F))!==h&&(_.state=null),k):d}var U,x,v=!0;function T(_){if(v){var F;for(U=new s.Buf32(512),x=new s.Buf32(32),F=0;F<144;)_.lens[F++]=8;for(;F<256;)_.lens[F++]=9;for(;F<280;)_.lens[F++]=7;for(;F<288;)_.lens[F++]=8;for(l(c,_.lens,0,288,U,0,_.work,{bits:9}),F=0;F<32;)_.lens[F++]=5;l(u,_.lens,0,32,x,0,_.work,{bits:5}),v=!1}_.lencode=U,_.lenbits=9,_.distcode=x,_.distbits=5}function E(_,F,k,Z){var ut,nt=_.state;return nt.window===null&&(nt.wsize=1<<nt.wbits,nt.wnext=0,nt.whave=0,nt.window=new s.Buf8(nt.wsize)),Z>=nt.wsize?(s.arraySet(nt.window,F,k-nt.wsize,nt.wsize,0),nt.wnext=0,nt.whave=nt.wsize):(Z<(ut=nt.wsize-nt.wnext)&&(ut=Z),s.arraySet(nt.window,F,k-Z,ut,nt.wnext),(Z-=ut)?(s.arraySet(nt.window,F,k-Z,Z,0),nt.wnext=Z,nt.whave=nt.wsize):(nt.wnext+=ut,nt.wnext===nt.wsize&&(nt.wnext=0),nt.whave<nt.wsize&&(nt.whave+=ut))),0}i.inflateReset=C,i.inflateReset2=N,i.inflateResetKeep=I,i.inflateInit=function(_){return R(_,15)},i.inflateInit2=R,i.inflate=function(_,F){var k,Z,ut,nt,j,G,pt,q,L,O,V,X,At,et,st,dt,vt,_t,Mt,Ot,D,$,bt,rt,W=0,at=new s.Buf8(4),Ct=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!_||!_.state||!_.output||!_.input&&_.avail_in!==0)return d;(k=_.state).mode===12&&(k.mode=13),j=_.next_out,ut=_.output,pt=_.avail_out,nt=_.next_in,Z=_.input,G=_.avail_in,q=k.hold,L=k.bits,O=G,V=pt,$=h;t:for(;;)switch(k.mode){case m:if(k.wrap===0){k.mode=13;break}for(;L<16;){if(G===0)break t;G--,q+=Z[nt++]<<L,L+=8}if(2&k.wrap&&q===35615){at[k.check=0]=255&q,at[1]=q>>>8&255,k.check=o(k.check,at,2,0),L=q=0,k.mode=2;break}if(k.flags=0,k.head&&(k.head.done=!1),!(1&k.wrap)||(((255&q)<<8)+(q>>8))%31){_.msg="incorrect header check",k.mode=30;break}if((15&q)!=8){_.msg="unknown compression method",k.mode=30;break}if(L-=4,D=8+(15&(q>>>=4)),k.wbits===0)k.wbits=D;else if(D>k.wbits){_.msg="invalid window size",k.mode=30;break}k.dmax=1<<D,_.adler=k.check=1,k.mode=512&q?10:12,L=q=0;break;case 2:for(;L<16;){if(G===0)break t;G--,q+=Z[nt++]<<L,L+=8}if(k.flags=q,(255&k.flags)!=8){_.msg="unknown compression method",k.mode=30;break}if(57344&k.flags){_.msg="unknown header flags set",k.mode=30;break}k.head&&(k.head.text=q>>8&1),512&k.flags&&(at[0]=255&q,at[1]=q>>>8&255,k.check=o(k.check,at,2,0)),L=q=0,k.mode=3;case 3:for(;L<32;){if(G===0)break t;G--,q+=Z[nt++]<<L,L+=8}k.head&&(k.head.time=q),512&k.flags&&(at[0]=255&q,at[1]=q>>>8&255,at[2]=q>>>16&255,at[3]=q>>>24&255,k.check=o(k.check,at,4,0)),L=q=0,k.mode=4;case 4:for(;L<16;){if(G===0)break t;G--,q+=Z[nt++]<<L,L+=8}k.head&&(k.head.xflags=255&q,k.head.os=q>>8),512&k.flags&&(at[0]=255&q,at[1]=q>>>8&255,k.check=o(k.check,at,2,0)),L=q=0,k.mode=5;case 5:if(1024&k.flags){for(;L<16;){if(G===0)break t;G--,q+=Z[nt++]<<L,L+=8}k.length=q,k.head&&(k.head.extra_len=q),512&k.flags&&(at[0]=255&q,at[1]=q>>>8&255,k.check=o(k.check,at,2,0)),L=q=0}else k.head&&(k.head.extra=null);k.mode=6;case 6:if(1024&k.flags&&(G<(X=k.length)&&(X=G),X&&(k.head&&(D=k.head.extra_len-k.length,k.head.extra||(k.head.extra=new Array(k.head.extra_len)),s.arraySet(k.head.extra,Z,nt,X,D)),512&k.flags&&(k.check=o(k.check,Z,X,nt)),G-=X,nt+=X,k.length-=X),k.length))break t;k.length=0,k.mode=7;case 7:if(2048&k.flags){if(G===0)break t;for(X=0;D=Z[nt+X++],k.head&&D&&k.length<65536&&(k.head.name+=String.fromCharCode(D)),D&&X<G;);if(512&k.flags&&(k.check=o(k.check,Z,X,nt)),G-=X,nt+=X,D)break t}else k.head&&(k.head.name=null);k.length=0,k.mode=8;case 8:if(4096&k.flags){if(G===0)break t;for(X=0;D=Z[nt+X++],k.head&&D&&k.length<65536&&(k.head.comment+=String.fromCharCode(D)),D&&X<G;);if(512&k.flags&&(k.check=o(k.check,Z,X,nt)),G-=X,nt+=X,D)break t}else k.head&&(k.head.comment=null);k.mode=9;case 9:if(512&k.flags){for(;L<16;){if(G===0)break t;G--,q+=Z[nt++]<<L,L+=8}if(q!==(65535&k.check)){_.msg="header crc mismatch",k.mode=30;break}L=q=0}k.head&&(k.head.hcrc=k.flags>>9&1,k.head.done=!0),_.adler=k.check=0,k.mode=12;break;case 10:for(;L<32;){if(G===0)break t;G--,q+=Z[nt++]<<L,L+=8}_.adler=k.check=y(q),L=q=0,k.mode=11;case 11:if(k.havedict===0)return _.next_out=j,_.avail_out=pt,_.next_in=nt,_.avail_in=G,k.hold=q,k.bits=L,2;_.adler=k.check=1,k.mode=12;case 12:if(F===5||F===6)break t;case 13:if(k.last){q>>>=7&L,L-=7&L,k.mode=27;break}for(;L<3;){if(G===0)break t;G--,q+=Z[nt++]<<L,L+=8}switch(k.last=1&q,L-=1,3&(q>>>=1)){case 0:k.mode=14;break;case 1:if(T(k),k.mode=20,F!==6)break;q>>>=2,L-=2;break t;case 2:k.mode=17;break;case 3:_.msg="invalid block type",k.mode=30}q>>>=2,L-=2;break;case 14:for(q>>>=7&L,L-=7&L;L<32;){if(G===0)break t;G--,q+=Z[nt++]<<L,L+=8}if((65535&q)!=(q>>>16^65535)){_.msg="invalid stored block lengths",k.mode=30;break}if(k.length=65535&q,L=q=0,k.mode=15,F===6)break t;case 15:k.mode=16;case 16:if(X=k.length){if(G<X&&(X=G),pt<X&&(X=pt),X===0)break t;s.arraySet(ut,Z,nt,X,j),G-=X,nt+=X,pt-=X,j+=X,k.length-=X;break}k.mode=12;break;case 17:for(;L<14;){if(G===0)break t;G--,q+=Z[nt++]<<L,L+=8}if(k.nlen=257+(31&q),q>>>=5,L-=5,k.ndist=1+(31&q),q>>>=5,L-=5,k.ncode=4+(15&q),q>>>=4,L-=4,286<k.nlen||30<k.ndist){_.msg="too many length or distance symbols",k.mode=30;break}k.have=0,k.mode=18;case 18:for(;k.have<k.ncode;){for(;L<3;){if(G===0)break t;G--,q+=Z[nt++]<<L,L+=8}k.lens[Ct[k.have++]]=7&q,q>>>=3,L-=3}for(;k.have<19;)k.lens[Ct[k.have++]]=0;if(k.lencode=k.lendyn,k.lenbits=7,bt={bits:k.lenbits},$=l(0,k.lens,0,19,k.lencode,0,k.work,bt),k.lenbits=bt.bits,$){_.msg="invalid code lengths set",k.mode=30;break}k.have=0,k.mode=19;case 19:for(;k.have<k.nlen+k.ndist;){for(;dt=(W=k.lencode[q&(1<<k.lenbits)-1])>>>16&255,vt=65535&W,!((st=W>>>24)<=L);){if(G===0)break t;G--,q+=Z[nt++]<<L,L+=8}if(vt<16)q>>>=st,L-=st,k.lens[k.have++]=vt;else{if(vt===16){for(rt=st+2;L<rt;){if(G===0)break t;G--,q+=Z[nt++]<<L,L+=8}if(q>>>=st,L-=st,k.have===0){_.msg="invalid bit length repeat",k.mode=30;break}D=k.lens[k.have-1],X=3+(3&q),q>>>=2,L-=2}else if(vt===17){for(rt=st+3;L<rt;){if(G===0)break t;G--,q+=Z[nt++]<<L,L+=8}L-=st,D=0,X=3+(7&(q>>>=st)),q>>>=3,L-=3}else{for(rt=st+7;L<rt;){if(G===0)break t;G--,q+=Z[nt++]<<L,L+=8}L-=st,D=0,X=11+(127&(q>>>=st)),q>>>=7,L-=7}if(k.have+X>k.nlen+k.ndist){_.msg="invalid bit length repeat",k.mode=30;break}for(;X--;)k.lens[k.have++]=D}}if(k.mode===30)break;if(k.lens[256]===0){_.msg="invalid code -- missing end-of-block",k.mode=30;break}if(k.lenbits=9,bt={bits:k.lenbits},$=l(c,k.lens,0,k.nlen,k.lencode,0,k.work,bt),k.lenbits=bt.bits,$){_.msg="invalid literal/lengths set",k.mode=30;break}if(k.distbits=6,k.distcode=k.distdyn,bt={bits:k.distbits},$=l(u,k.lens,k.nlen,k.ndist,k.distcode,0,k.work,bt),k.distbits=bt.bits,$){_.msg="invalid distances set",k.mode=30;break}if(k.mode=20,F===6)break t;case 20:k.mode=21;case 21:if(6<=G&&258<=pt){_.next_out=j,_.avail_out=pt,_.next_in=nt,_.avail_in=G,k.hold=q,k.bits=L,A(_,V),j=_.next_out,ut=_.output,pt=_.avail_out,nt=_.next_in,Z=_.input,G=_.avail_in,q=k.hold,L=k.bits,k.mode===12&&(k.back=-1);break}for(k.back=0;dt=(W=k.lencode[q&(1<<k.lenbits)-1])>>>16&255,vt=65535&W,!((st=W>>>24)<=L);){if(G===0)break t;G--,q+=Z[nt++]<<L,L+=8}if(dt&&(240&dt)==0){for(_t=st,Mt=dt,Ot=vt;dt=(W=k.lencode[Ot+((q&(1<<_t+Mt)-1)>>_t)])>>>16&255,vt=65535&W,!(_t+(st=W>>>24)<=L);){if(G===0)break t;G--,q+=Z[nt++]<<L,L+=8}q>>>=_t,L-=_t,k.back+=_t}if(q>>>=st,L-=st,k.back+=st,k.length=vt,dt===0){k.mode=26;break}if(32&dt){k.back=-1,k.mode=12;break}if(64&dt){_.msg="invalid literal/length code",k.mode=30;break}k.extra=15&dt,k.mode=22;case 22:if(k.extra){for(rt=k.extra;L<rt;){if(G===0)break t;G--,q+=Z[nt++]<<L,L+=8}k.length+=q&(1<<k.extra)-1,q>>>=k.extra,L-=k.extra,k.back+=k.extra}k.was=k.length,k.mode=23;case 23:for(;dt=(W=k.distcode[q&(1<<k.distbits)-1])>>>16&255,vt=65535&W,!((st=W>>>24)<=L);){if(G===0)break t;G--,q+=Z[nt++]<<L,L+=8}if((240&dt)==0){for(_t=st,Mt=dt,Ot=vt;dt=(W=k.distcode[Ot+((q&(1<<_t+Mt)-1)>>_t)])>>>16&255,vt=65535&W,!(_t+(st=W>>>24)<=L);){if(G===0)break t;G--,q+=Z[nt++]<<L,L+=8}q>>>=_t,L-=_t,k.back+=_t}if(q>>>=st,L-=st,k.back+=st,64&dt){_.msg="invalid distance code",k.mode=30;break}k.offset=vt,k.extra=15&dt,k.mode=24;case 24:if(k.extra){for(rt=k.extra;L<rt;){if(G===0)break t;G--,q+=Z[nt++]<<L,L+=8}k.offset+=q&(1<<k.extra)-1,q>>>=k.extra,L-=k.extra,k.back+=k.extra}if(k.offset>k.dmax){_.msg="invalid distance too far back",k.mode=30;break}k.mode=25;case 25:if(pt===0)break t;if(X=V-pt,k.offset>X){if((X=k.offset-X)>k.whave&&k.sane){_.msg="invalid distance too far back",k.mode=30;break}At=X>k.wnext?(X-=k.wnext,k.wsize-X):k.wnext-X,X>k.length&&(X=k.length),et=k.window}else et=ut,At=j-k.offset,X=k.length;for(pt<X&&(X=pt),pt-=X,k.length-=X;ut[j++]=et[At++],--X;);k.length===0&&(k.mode=21);break;case 26:if(pt===0)break t;ut[j++]=k.length,pt--,k.mode=21;break;case 27:if(k.wrap){for(;L<32;){if(G===0)break t;G--,q|=Z[nt++]<<L,L+=8}if(V-=pt,_.total_out+=V,k.total+=V,V&&(_.adler=k.check=k.flags?o(k.check,ut,V,j-V):a(k.check,ut,V,j-V)),V=pt,(k.flags?q:y(q))!==k.check){_.msg="incorrect data check",k.mode=30;break}L=q=0}k.mode=28;case 28:if(k.wrap&&k.flags){for(;L<32;){if(G===0)break t;G--,q+=Z[nt++]<<L,L+=8}if(q!==(4294967295&k.total)){_.msg="incorrect length check",k.mode=30;break}L=q=0}k.mode=29;case 29:$=1;break t;case 30:$=-3;break t;case 31:return-4;case 32:default:return d}return _.next_out=j,_.avail_out=pt,_.next_in=nt,_.avail_in=G,k.hold=q,k.bits=L,(k.wsize||V!==_.avail_out&&k.mode<30&&(k.mode<27||F!==4))&&E(_,_.output,_.next_out,V-_.avail_out)?(k.mode=31,-4):(O-=_.avail_in,V-=_.avail_out,_.total_in+=O,_.total_out+=V,k.total+=V,k.wrap&&V&&(_.adler=k.check=k.flags?o(k.check,ut,V,_.next_out-V):a(k.check,ut,V,_.next_out-V)),_.data_type=k.bits+(k.last?64:0)+(k.mode===12?128:0)+(k.mode===20||k.mode===15?256:0),(O==0&&V===0||F===4)&&$===h&&($=-5),$)},i.inflateEnd=function(_){if(!_||!_.state)return d;var F=_.state;return F.window&&(F.window=null),_.state=null,h},i.inflateGetHeader=function(_,F){var k;return _&&_.state?(2&(k=_.state).wrap)==0?d:((k.head=F).done=!1,h):d},i.inflateSetDictionary=function(_,F){var k,Z=F.length;return _&&_.state?(k=_.state).wrap!==0&&k.mode!==11?d:k.mode===11&&a(1,F,Z,0)!==k.check?-3:E(_,F,Z,Z)?(k.mode=31,-4):(k.havedict=1,h):d},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,n,i){var s=e("../utils/common"),a=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],A=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],l=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];n.exports=function(c,u,h,d,m,f,b,y){var B,I,C,N,R,U,x,v,T,E=y.bits,_=0,F=0,k=0,Z=0,ut=0,nt=0,j=0,G=0,pt=0,q=0,L=null,O=0,V=new s.Buf16(16),X=new s.Buf16(16),At=null,et=0;for(_=0;_<=15;_++)V[_]=0;for(F=0;F<d;F++)V[u[h+F]]++;for(ut=E,Z=15;1<=Z&&V[Z]===0;Z--);if(Z<ut&&(ut=Z),Z===0)return m[f++]=20971520,m[f++]=20971520,y.bits=1,0;for(k=1;k<Z&&V[k]===0;k++);for(ut<k&&(ut=k),_=G=1;_<=15;_++)if(G<<=1,(G-=V[_])<0)return-1;if(0<G&&(c===0||Z!==1))return-1;for(X[1]=0,_=1;_<15;_++)X[_+1]=X[_]+V[_];for(F=0;F<d;F++)u[h+F]!==0&&(b[X[u[h+F]]++]=F);if(U=c===0?(L=At=b,19):c===1?(L=a,O-=257,At=o,et-=257,256):(L=A,At=l,-1),_=k,R=f,j=F=q=0,C=-1,N=(pt=1<<(nt=ut))-1,c===1&&852<pt||c===2&&592<pt)return 1;for(;;){for(x=_-j,T=b[F]<U?(v=0,b[F]):b[F]>U?(v=At[et+b[F]],L[O+b[F]]):(v=96,0),B=1<<_-j,k=I=1<<nt;m[R+(q>>j)+(I-=B)]=x<<24|v<<16|T|0,I!==0;);for(B=1<<_-1;q&B;)B>>=1;if(B!==0?(q&=B-1,q+=B):q=0,F++,--V[_]==0){if(_===Z)break;_=u[h+b[F]]}if(ut<_&&(q&N)!==C){for(j===0&&(j=ut),R+=k,G=1<<(nt=_-j);nt+j<Z&&!((G-=V[nt+j])<=0);)nt++,G<<=1;if(pt+=1<<nt,c===1&&852<pt||c===2&&592<pt)return 1;m[C=q&N]=ut<<24|nt<<16|R-f|0}}return q!==0&&(m[R+q]=_-j<<24|64<<16|0),y.bits=ut,0}},{"../utils/common":41}],51:[function(e,n,i){n.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,n,i){var s=e("../utils/common"),a=0,o=1;function A(W){for(var at=W.length;0<=--at;)W[at]=0}var l=0,c=29,u=256,h=u+1+c,d=30,m=19,f=2*h+1,b=15,y=16,B=7,I=256,C=16,N=17,R=18,U=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],x=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],v=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],T=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],E=new Array(2*(h+2));A(E);var _=new Array(2*d);A(_);var F=new Array(512);A(F);var k=new Array(256);A(k);var Z=new Array(c);A(Z);var ut,nt,j,G=new Array(d);function pt(W,at,Ct,xt,yt){this.static_tree=W,this.extra_bits=at,this.extra_base=Ct,this.elems=xt,this.max_length=yt,this.has_stree=W&&W.length}function q(W,at){this.dyn_tree=W,this.max_code=0,this.stat_desc=at}function L(W){return W<256?F[W]:F[256+(W>>>7)]}function O(W,at){W.pending_buf[W.pending++]=255&at,W.pending_buf[W.pending++]=at>>>8&255}function V(W,at,Ct){W.bi_valid>y-Ct?(W.bi_buf|=at<<W.bi_valid&65535,O(W,W.bi_buf),W.bi_buf=at>>y-W.bi_valid,W.bi_valid+=Ct-y):(W.bi_buf|=at<<W.bi_valid&65535,W.bi_valid+=Ct)}function X(W,at,Ct){V(W,Ct[2*at],Ct[2*at+1])}function At(W,at){for(var Ct=0;Ct|=1&W,W>>>=1,Ct<<=1,0<--at;);return Ct>>>1}function et(W,at,Ct){var xt,yt,kt=new Array(b+1),Rt=0;for(xt=1;xt<=b;xt++)kt[xt]=Rt=Rt+Ct[xt-1]<<1;for(yt=0;yt<=at;yt++){var Lt=W[2*yt+1];Lt!==0&&(W[2*yt]=At(kt[Lt]++,Lt))}}function st(W){var at;for(at=0;at<h;at++)W.dyn_ltree[2*at]=0;for(at=0;at<d;at++)W.dyn_dtree[2*at]=0;for(at=0;at<m;at++)W.bl_tree[2*at]=0;W.dyn_ltree[2*I]=1,W.opt_len=W.static_len=0,W.last_lit=W.matches=0}function dt(W){8<W.bi_valid?O(W,W.bi_buf):0<W.bi_valid&&(W.pending_buf[W.pending++]=W.bi_buf),W.bi_buf=0,W.bi_valid=0}function vt(W,at,Ct,xt){var yt=2*at,kt=2*Ct;return W[yt]<W[kt]||W[yt]===W[kt]&&xt[at]<=xt[Ct]}function _t(W,at,Ct){for(var xt=W.heap[Ct],yt=Ct<<1;yt<=W.heap_len&&(yt<W.heap_len&&vt(at,W.heap[yt+1],W.heap[yt],W.depth)&&yt++,!vt(at,xt,W.heap[yt],W.depth));)W.heap[Ct]=W.heap[yt],Ct=yt,yt<<=1;W.heap[Ct]=xt}function Mt(W,at,Ct){var xt,yt,kt,Rt,Lt=0;if(W.last_lit!==0)for(;xt=W.pending_buf[W.d_buf+2*Lt]<<8|W.pending_buf[W.d_buf+2*Lt+1],yt=W.pending_buf[W.l_buf+Lt],Lt++,xt===0?X(W,yt,at):(X(W,(kt=k[yt])+u+1,at),(Rt=U[kt])!==0&&V(W,yt-=Z[kt],Rt),X(W,kt=L(--xt),Ct),(Rt=x[kt])!==0&&V(W,xt-=G[kt],Rt)),Lt<W.last_lit;);X(W,I,at)}function Ot(W,at){var Ct,xt,yt,kt=at.dyn_tree,Rt=at.stat_desc.static_tree,Lt=at.stat_desc.has_stree,Qt=at.stat_desc.elems,se=-1;for(W.heap_len=0,W.heap_max=f,Ct=0;Ct<Qt;Ct++)kt[2*Ct]!==0?(W.heap[++W.heap_len]=se=Ct,W.depth[Ct]=0):kt[2*Ct+1]=0;for(;W.heap_len<2;)kt[2*(yt=W.heap[++W.heap_len]=se<2?++se:0)]=1,W.depth[yt]=0,W.opt_len--,Lt&&(W.static_len-=Rt[2*yt+1]);for(at.max_code=se,Ct=W.heap_len>>1;1<=Ct;Ct--)_t(W,kt,Ct);for(yt=Qt;Ct=W.heap[1],W.heap[1]=W.heap[W.heap_len--],_t(W,kt,1),xt=W.heap[1],W.heap[--W.heap_max]=Ct,W.heap[--W.heap_max]=xt,kt[2*yt]=kt[2*Ct]+kt[2*xt],W.depth[yt]=(W.depth[Ct]>=W.depth[xt]?W.depth[Ct]:W.depth[xt])+1,kt[2*Ct+1]=kt[2*xt+1]=yt,W.heap[1]=yt++,_t(W,kt,1),2<=W.heap_len;);W.heap[--W.heap_max]=W.heap[1],(function(te,ae){var ve,ie,Ae,ee,re,he,Fe=ae.dyn_tree,xe=ae.max_code,De=ae.stat_desc.static_tree,Le=ae.stat_desc.has_stree,or=ae.stat_desc.extra_bits,kr=ae.stat_desc.extra_base,Se=ae.stat_desc.max_length,ke=0;for(ee=0;ee<=b;ee++)te.bl_count[ee]=0;for(Fe[2*te.heap[te.heap_max]+1]=0,ve=te.heap_max+1;ve<f;ve++)Se<(ee=Fe[2*Fe[2*(ie=te.heap[ve])+1]+1]+1)&&(ee=Se,ke++),Fe[2*ie+1]=ee,xe<ie||(te.bl_count[ee]++,re=0,kr<=ie&&(re=or[ie-kr]),he=Fe[2*ie],te.opt_len+=he*(ee+re),Le&&(te.static_len+=he*(De[2*ie+1]+re)));if(ke!==0){do{for(ee=Se-1;te.bl_count[ee]===0;)ee--;te.bl_count[ee]--,te.bl_count[ee+1]+=2,te.bl_count[Se]--,ke-=2}while(0<ke);for(ee=Se;ee!==0;ee--)for(ie=te.bl_count[ee];ie!==0;)xe<(Ae=te.heap[--ve])||(Fe[2*Ae+1]!==ee&&(te.opt_len+=(ee-Fe[2*Ae+1])*Fe[2*Ae],Fe[2*Ae+1]=ee),ie--)}})(W,at),et(kt,se,W.bl_count)}function D(W,at,Ct){var xt,yt,kt=-1,Rt=at[1],Lt=0,Qt=7,se=4;for(Rt===0&&(Qt=138,se=3),at[2*(Ct+1)+1]=65535,xt=0;xt<=Ct;xt++)yt=Rt,Rt=at[2*(xt+1)+1],++Lt<Qt&&yt===Rt||(Lt<se?W.bl_tree[2*yt]+=Lt:yt!==0?(yt!==kt&&W.bl_tree[2*yt]++,W.bl_tree[2*C]++):Lt<=10?W.bl_tree[2*N]++:W.bl_tree[2*R]++,kt=yt,se=(Lt=0)===Rt?(Qt=138,3):yt===Rt?(Qt=6,3):(Qt=7,4))}function $(W,at,Ct){var xt,yt,kt=-1,Rt=at[1],Lt=0,Qt=7,se=4;for(Rt===0&&(Qt=138,se=3),xt=0;xt<=Ct;xt++)if(yt=Rt,Rt=at[2*(xt+1)+1],!(++Lt<Qt&&yt===Rt)){if(Lt<se)for(;X(W,yt,W.bl_tree),--Lt!=0;);else yt!==0?(yt!==kt&&(X(W,yt,W.bl_tree),Lt--),X(W,C,W.bl_tree),V(W,Lt-3,2)):Lt<=10?(X(W,N,W.bl_tree),V(W,Lt-3,3)):(X(W,R,W.bl_tree),V(W,Lt-11,7));kt=yt,se=(Lt=0)===Rt?(Qt=138,3):yt===Rt?(Qt=6,3):(Qt=7,4)}}A(G);var bt=!1;function rt(W,at,Ct,xt){V(W,(l<<1)+(xt?1:0),3),(function(yt,kt,Rt,Lt){dt(yt),O(yt,Rt),O(yt,~Rt),s.arraySet(yt.pending_buf,yt.window,kt,Rt,yt.pending),yt.pending+=Rt})(W,at,Ct)}i._tr_init=function(W){bt||((function(){var at,Ct,xt,yt,kt,Rt=new Array(b+1);for(yt=xt=0;yt<c-1;yt++)for(Z[yt]=xt,at=0;at<1<<U[yt];at++)k[xt++]=yt;for(k[xt-1]=yt,yt=kt=0;yt<16;yt++)for(G[yt]=kt,at=0;at<1<<x[yt];at++)F[kt++]=yt;for(kt>>=7;yt<d;yt++)for(G[yt]=kt<<7,at=0;at<1<<x[yt]-7;at++)F[256+kt++]=yt;for(Ct=0;Ct<=b;Ct++)Rt[Ct]=0;for(at=0;at<=143;)E[2*at+1]=8,at++,Rt[8]++;for(;at<=255;)E[2*at+1]=9,at++,Rt[9]++;for(;at<=279;)E[2*at+1]=7,at++,Rt[7]++;for(;at<=287;)E[2*at+1]=8,at++,Rt[8]++;for(et(E,h+1,Rt),at=0;at<d;at++)_[2*at+1]=5,_[2*at]=At(at,5);ut=new pt(E,U,u+1,h,b),nt=new pt(_,x,0,d,b),j=new pt(new Array(0),v,0,m,B)})(),bt=!0),W.l_desc=new q(W.dyn_ltree,ut),W.d_desc=new q(W.dyn_dtree,nt),W.bl_desc=new q(W.bl_tree,j),W.bi_buf=0,W.bi_valid=0,st(W)},i._tr_stored_block=rt,i._tr_flush_block=function(W,at,Ct,xt){var yt,kt,Rt=0;0<W.level?(W.strm.data_type===2&&(W.strm.data_type=(function(Lt){var Qt,se=4093624447;for(Qt=0;Qt<=31;Qt++,se>>>=1)if(1&se&&Lt.dyn_ltree[2*Qt]!==0)return a;if(Lt.dyn_ltree[18]!==0||Lt.dyn_ltree[20]!==0||Lt.dyn_ltree[26]!==0)return o;for(Qt=32;Qt<u;Qt++)if(Lt.dyn_ltree[2*Qt]!==0)return o;return a})(W)),Ot(W,W.l_desc),Ot(W,W.d_desc),Rt=(function(Lt){var Qt;for(D(Lt,Lt.dyn_ltree,Lt.l_desc.max_code),D(Lt,Lt.dyn_dtree,Lt.d_desc.max_code),Ot(Lt,Lt.bl_desc),Qt=m-1;3<=Qt&&Lt.bl_tree[2*T[Qt]+1]===0;Qt--);return Lt.opt_len+=3*(Qt+1)+5+5+4,Qt})(W),yt=W.opt_len+3+7>>>3,(kt=W.static_len+3+7>>>3)<=yt&&(yt=kt)):yt=kt=Ct+5,Ct+4<=yt&&at!==-1?rt(W,at,Ct,xt):W.strategy===4||kt===yt?(V(W,2+(xt?1:0),3),Mt(W,E,_)):(V(W,4+(xt?1:0),3),(function(Lt,Qt,se,te){var ae;for(V(Lt,Qt-257,5),V(Lt,se-1,5),V(Lt,te-4,4),ae=0;ae<te;ae++)V(Lt,Lt.bl_tree[2*T[ae]+1],3);$(Lt,Lt.dyn_ltree,Qt-1),$(Lt,Lt.dyn_dtree,se-1)})(W,W.l_desc.max_code+1,W.d_desc.max_code+1,Rt+1),Mt(W,W.dyn_ltree,W.dyn_dtree)),st(W),xt&&dt(W)},i._tr_tally=function(W,at,Ct){return W.pending_buf[W.d_buf+2*W.last_lit]=at>>>8&255,W.pending_buf[W.d_buf+2*W.last_lit+1]=255&at,W.pending_buf[W.l_buf+W.last_lit]=255&Ct,W.last_lit++,at===0?W.dyn_ltree[2*Ct]++:(W.matches++,at--,W.dyn_ltree[2*(k[Ct]+u+1)]++,W.dyn_dtree[2*L(at)]++),W.last_lit===W.lit_bufsize-1},i._tr_align=function(W){V(W,2,3),X(W,I,E),(function(at){at.bi_valid===16?(O(at,at.bi_buf),at.bi_buf=0,at.bi_valid=0):8<=at.bi_valid&&(at.pending_buf[at.pending++]=255&at.bi_buf,at.bi_buf>>=8,at.bi_valid-=8)})(W)}},{"../utils/common":41}],53:[function(e,n,i){n.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,n,i){(function(s){(function(a,o){if(!a.setImmediate){var A,l,c,u,h=1,d={},m=!1,f=a.document,b=Object.getPrototypeOf&&Object.getPrototypeOf(a);b=b&&b.setTimeout?b:a,A={}.toString.call(a.process)==="[object process]"?function(C){process.nextTick(function(){B(C)})}:(function(){if(a.postMessage&&!a.importScripts){var C=!0,N=a.onmessage;return a.onmessage=function(){C=!1},a.postMessage("","*"),a.onmessage=N,C}})()?(u="setImmediate$"+Math.random()+"$",a.addEventListener?a.addEventListener("message",I,!1):a.attachEvent("onmessage",I),function(C){a.postMessage(u+C,"*")}):a.MessageChannel?((c=new MessageChannel).port1.onmessage=function(C){B(C.data)},function(C){c.port2.postMessage(C)}):f&&"onreadystatechange"in f.createElement("script")?(l=f.documentElement,function(C){var N=f.createElement("script");N.onreadystatechange=function(){B(C),N.onreadystatechange=null,l.removeChild(N),N=null},l.appendChild(N)}):function(C){setTimeout(B,0,C)},b.setImmediate=function(C){typeof C!="function"&&(C=new Function(""+C));for(var N=new Array(arguments.length-1),R=0;R<N.length;R++)N[R]=arguments[R+1];var U={callback:C,args:N};return d[h]=U,A(h),h++},b.clearImmediate=y}function y(C){delete d[C]}function B(C){if(m)setTimeout(B,0,C);else{var N=d[C];if(N){m=!0;try{(function(R){var U=R.callback,x=R.args;switch(x.length){case 0:U();break;case 1:U(x[0]);break;case 2:U(x[0],x[1]);break;case 3:U(x[0],x[1],x[2]);break;default:U.apply(o,x)}})(N)}finally{y(C),m=!1}}}}function I(C){C.source===a&&typeof C.data=="string"&&C.data.indexOf(u)===0&&B(+C.data.slice(u.length))}})(typeof self>"u"?s===void 0?this:s:self)}).call(this,typeof wp<"u"?wp:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(bw)),bw.exports}var hW=dW();const fW=Zv(hW);var Pm={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/var gW=Pm.exports,xE;function pW(){return xE||(xE=1,(function(r,t){((e,n)=>{r.exports=n()})(gW,function e(){var n=typeof self<"u"?self:typeof window<"u"?window:n!==void 0?n:{},i,s=!n.document&&!!n.postMessage,a=n.IS_PAPA_WORKER||!1,o={},A=0,l={};function c(x){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(v){var T=N(v);T.chunkSize=parseInt(T.chunkSize),v.step||v.chunk||(T.chunkSize=null),this._handle=new f(T),(this._handle.streamer=this)._config=T}).call(this,x),this.parseChunk=function(v,T){var E=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<E){let F=this._config.newline;F||(_=this._config.quoteChar||'"',F=this._handle.guessLineEndings(v,_)),v=[...v.split(F).slice(E)].join(F)}this.isFirstChunk&&U(this._config.beforeFirstChunk)&&(_=this._config.beforeFirstChunk(v))!==void 0&&(v=_),this.isFirstChunk=!1,this._halted=!1;var E=this._partialLine+v,_=(this._partialLine="",this._handle.parse(E,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(v=_.meta.cursor,E=(this._finished||(this._partialLine=E.substring(v-this._baseIndex),this._baseIndex=v),_&&_.data&&(this._rowCount+=_.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),a)n.postMessage({results:_,workerId:l.WORKER_ID,finished:E});else if(U(this._config.chunk)&&!T){if(this._config.chunk(_,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=_=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(_.data),this._completeResults.errors=this._completeResults.errors.concat(_.errors),this._completeResults.meta=_.meta),this._completed||!E||!U(this._config.complete)||_&&_.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),E||_&&_.meta.paused||this._nextChunk(),_}this._halted=!0},this._sendError=function(v){U(this._config.error)?this._config.error(v):a&&this._config.error&&n.postMessage({workerId:l.WORKER_ID,error:v,finished:!1})}}function u(x){var v;(x=x||{}).chunkSize||(x.chunkSize=l.RemoteChunkSize),c.call(this,x),this._nextChunk=s?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(T){this._input=T,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(v=new XMLHttpRequest,this._config.withCredentials&&(v.withCredentials=this._config.withCredentials),s||(v.onload=R(this._chunkLoaded,this),v.onerror=R(this._chunkError,this)),v.open(this._config.downloadRequestBody?"POST":"GET",this._input,!s),this._config.downloadRequestHeaders){var T,E=this._config.downloadRequestHeaders;for(T in E)v.setRequestHeader(T,E[T])}var _;this._config.chunkSize&&(_=this._start+this._config.chunkSize-1,v.setRequestHeader("Range","bytes="+this._start+"-"+_));try{v.send(this._config.downloadRequestBody)}catch(F){this._chunkError(F.message)}s&&v.status===0&&this._chunkError()}},this._chunkLoaded=function(){v.readyState===4&&(v.status<200||400<=v.status?this._chunkError():(this._start+=this._config.chunkSize||v.responseText.length,this._finished=!this._config.chunkSize||this._start>=(T=>(T=T.getResponseHeader("Content-Range"))!==null?parseInt(T.substring(T.lastIndexOf("/")+1)):-1)(v),this.parseChunk(v.responseText)))},this._chunkError=function(T){T=v.statusText||T,this._sendError(new Error(T))}}function h(x){(x=x||{}).chunkSize||(x.chunkSize=l.LocalChunkSize),c.call(this,x);var v,T,E=typeof FileReader<"u";this.stream=function(_){this._input=_,T=_.slice||_.webkitSlice||_.mozSlice,E?((v=new FileReader).onload=R(this._chunkLoaded,this),v.onerror=R(this._chunkError,this)):v=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var _=this._input,F=(this._config.chunkSize&&(F=Math.min(this._start+this._config.chunkSize,this._input.size),_=T.call(_,this._start,F)),v.readAsText(_,this._config.encoding));E||this._chunkLoaded({target:{result:F}})},this._chunkLoaded=function(_){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(_.target.result)},this._chunkError=function(){this._sendError(v.error)}}function d(x){var v;c.call(this,x=x||{}),this.stream=function(T){return v=T,this._nextChunk()},this._nextChunk=function(){var T,E;if(!this._finished)return T=this._config.chunkSize,v=T?(E=v.substring(0,T),v.substring(T)):(E=v,""),this._finished=!v,this.parseChunk(E)}}function m(x){c.call(this,x=x||{});var v=[],T=!0,E=!1;this.pause=function(){c.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){c.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(_){this._input=_,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){E&&v.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),v.length?this.parseChunk(v.shift()):T=!0},this._streamData=R(function(_){try{v.push(typeof _=="string"?_:_.toString(this._config.encoding)),T&&(T=!1,this._checkIsFinished(),this.parseChunk(v.shift()))}catch(F){this._streamError(F)}},this),this._streamError=R(function(_){this._streamCleanUp(),this._sendError(_)},this),this._streamEnd=R(function(){this._streamCleanUp(),E=!0,this._streamData("")},this),this._streamCleanUp=R(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function f(x){var v,T,E,_,F=Math.pow(2,53),k=-F,Z=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,ut=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,nt=this,j=0,G=0,pt=!1,q=!1,L=[],O={data:[],errors:[],meta:{}};function V(st){return x.skipEmptyLines==="greedy"?st.join("").trim()==="":st.length===1&&st[0].length===0}function X(){if(O&&E&&(et("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+l.DefaultDelimiter+"'"),E=!1),x.skipEmptyLines&&(O.data=O.data.filter(function(_t){return!V(_t)})),At()){let _t=function(Mt,Ot){U(x.transformHeader)&&(Mt=x.transformHeader(Mt,Ot)),L.push(Mt)};if(O)if(Array.isArray(O.data[0])){for(var st=0;At()&&st<O.data.length;st++)O.data[st].forEach(_t);O.data.splice(0,1)}else O.data.forEach(_t)}function dt(_t,Mt){for(var Ot=x.header?{}:[],D=0;D<_t.length;D++){var $=D,bt=_t[D],bt=((rt,W)=>(at=>(x.dynamicTypingFunction&&x.dynamicTyping[at]===void 0&&(x.dynamicTyping[at]=x.dynamicTypingFunction(at)),(x.dynamicTyping[at]||x.dynamicTyping)===!0))(rt)?W==="true"||W==="TRUE"||W!=="false"&&W!=="FALSE"&&((at=>{if(Z.test(at)&&(at=parseFloat(at),k<at&&at<F))return 1})(W)?parseFloat(W):ut.test(W)?new Date(W):W===""?null:W):W)($=x.header?D>=L.length?"__parsed_extra":L[D]:$,bt=x.transform?x.transform(bt,$):bt);$==="__parsed_extra"?(Ot[$]=Ot[$]||[],Ot[$].push(bt)):Ot[$]=bt}return x.header&&(D>L.length?et("FieldMismatch","TooManyFields","Too many fields: expected "+L.length+" fields but parsed "+D,G+Mt):D<L.length&&et("FieldMismatch","TooFewFields","Too few fields: expected "+L.length+" fields but parsed "+D,G+Mt)),Ot}var vt;O&&(x.header||x.dynamicTyping||x.transform)&&(vt=1,!O.data.length||Array.isArray(O.data[0])?(O.data=O.data.map(dt),vt=O.data.length):O.data=dt(O.data,0),x.header&&O.meta&&(O.meta.fields=L),G+=vt)}function At(){return x.header&&L.length===0}function et(st,dt,vt,_t){st={type:st,code:dt,message:vt},_t!==void 0&&(st.row=_t),O.errors.push(st)}U(x.step)&&(_=x.step,x.step=function(st){O=st,At()?X():(X(),O.data.length!==0&&(j+=st.data.length,x.preview&&j>x.preview?T.abort():(O.data=O.data[0],_(O,nt))))}),this.parse=function(st,dt,vt){var _t=x.quoteChar||'"',_t=(x.newline||(x.newline=this.guessLineEndings(st,_t)),E=!1,x.delimiter?U(x.delimiter)&&(x.delimiter=x.delimiter(st),O.meta.delimiter=x.delimiter):((_t=((Mt,Ot,D,$,bt)=>{var rt,W,at,Ct;bt=bt||[",","	","|",";",l.RECORD_SEP,l.UNIT_SEP];for(var xt=0;xt<bt.length;xt++){for(var yt,kt=bt[xt],Rt=0,Lt=0,Qt=0,se=(at=void 0,new y({comments:$,delimiter:kt,newline:Ot,preview:10}).parse(Mt)),te=0;te<se.data.length;te++)D&&V(se.data[te])?Qt++:(yt=se.data[te].length,Lt+=yt,at===void 0?at=yt:0<yt&&(Rt+=Math.abs(yt-at),at=yt));0<se.data.length&&(Lt/=se.data.length-Qt),(W===void 0||Rt<=W)&&(Ct===void 0||Ct<Lt)&&1.99<Lt&&(W=Rt,rt=kt,Ct=Lt)}return{successful:!!(x.delimiter=rt),bestDelimiter:rt}})(st,x.newline,x.skipEmptyLines,x.comments,x.delimitersToGuess)).successful?x.delimiter=_t.bestDelimiter:(E=!0,x.delimiter=l.DefaultDelimiter),O.meta.delimiter=x.delimiter),N(x));return x.preview&&x.header&&_t.preview++,v=st,T=new y(_t),O=T.parse(v,dt,vt),X(),pt?{meta:{paused:!0}}:O||{meta:{paused:!1}}},this.paused=function(){return pt},this.pause=function(){pt=!0,T.abort(),v=U(x.chunk)?"":v.substring(T.getCharIndex())},this.resume=function(){nt.streamer._halted?(pt=!1,nt.streamer.parseChunk(v,!0)):setTimeout(nt.resume,3)},this.aborted=function(){return q},this.abort=function(){q=!0,T.abort(),O.meta.aborted=!0,U(x.complete)&&x.complete(O),v=""},this.guessLineEndings=function(Mt,_t){Mt=Mt.substring(0,1048576);var _t=new RegExp(b(_t)+"([^]*?)"+b(_t),"gm"),vt=(Mt=Mt.replace(_t,"")).split("\r"),_t=Mt.split(`
`),Mt=1<_t.length&&_t[0].length<vt[0].length;if(vt.length===1||Mt)return`
`;for(var Ot=0,D=0;D<vt.length;D++)vt[D][0]===`
`&&Ot++;return Ot>=vt.length/2?`\r
`:"\r"}}function b(x){return x.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function y(x){var v=(x=x||{}).delimiter,T=x.newline,E=x.comments,_=x.step,F=x.preview,k=x.fastMode,Z=null,ut=!1,nt=x.quoteChar==null?'"':x.quoteChar,j=nt;if(x.escapeChar!==void 0&&(j=x.escapeChar),(typeof v!="string"||-1<l.BAD_DELIMITERS.indexOf(v))&&(v=","),E===v)throw new Error("Comment character same as delimiter");E===!0?E="#":(typeof E!="string"||-1<l.BAD_DELIMITERS.indexOf(E))&&(E=!1),T!==`
`&&T!=="\r"&&T!==`\r
`&&(T=`
`);var G=0,pt=!1;this.parse=function(q,L,O){if(typeof q!="string")throw new Error("Input must be a string");var V=q.length,X=v.length,At=T.length,et=E.length,st=U(_),dt=[],vt=[],_t=[],Mt=G=0;if(!q)return Rt();if(k||k!==!1&&q.indexOf(nt)===-1){for(var Ot=q.split(T),D=0;D<Ot.length;D++){if(_t=Ot[D],G+=_t.length,D!==Ot.length-1)G+=T.length;else if(O)return Rt();if(!E||_t.substring(0,et)!==E){if(st){if(dt=[],Ct(_t.split(v)),Lt(),pt)return Rt()}else Ct(_t.split(v));if(F&&F<=D)return dt=dt.slice(0,F),Rt(!0)}}return Rt()}for(var $=q.indexOf(v,G),bt=q.indexOf(T,G),rt=new RegExp(b(j)+b(nt),"g"),W=q.indexOf(nt,G);;)if(q[G]===nt)for(W=G,G++;;){if((W=q.indexOf(nt,W+1))===-1)return O||vt.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:dt.length,index:G}),yt();if(W===V-1)return yt(q.substring(G,W).replace(rt,nt));if(nt===j&&q[W+1]===j)W++;else if(nt===j||W===0||q[W-1]!==j){$!==-1&&$<W+1&&($=q.indexOf(v,W+1));var at=xt((bt=bt!==-1&&bt<W+1?q.indexOf(T,W+1):bt)===-1?$:Math.min($,bt));if(q.substr(W+1+at,X)===v){_t.push(q.substring(G,W).replace(rt,nt)),q[G=W+1+at+X]!==nt&&(W=q.indexOf(nt,G)),$=q.indexOf(v,G),bt=q.indexOf(T,G);break}if(at=xt(bt),q.substring(W+1+at,W+1+at+At)===T){if(_t.push(q.substring(G,W).replace(rt,nt)),kt(W+1+at+At),$=q.indexOf(v,G),W=q.indexOf(nt,G),st&&(Lt(),pt))return Rt();if(F&&dt.length>=F)return Rt(!0);break}vt.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:dt.length,index:G}),W++}}else if(E&&_t.length===0&&q.substring(G,G+et)===E){if(bt===-1)return Rt();G=bt+At,bt=q.indexOf(T,G),$=q.indexOf(v,G)}else if($!==-1&&($<bt||bt===-1))_t.push(q.substring(G,$)),G=$+X,$=q.indexOf(v,G);else{if(bt===-1)break;if(_t.push(q.substring(G,bt)),kt(bt+At),st&&(Lt(),pt))return Rt();if(F&&dt.length>=F)return Rt(!0)}return yt();function Ct(Qt){dt.push(Qt),Mt=G}function xt(Qt){var se=0;return se=Qt!==-1&&(Qt=q.substring(W+1,Qt))&&Qt.trim()===""?Qt.length:se}function yt(Qt){return O||(Qt===void 0&&(Qt=q.substring(G)),_t.push(Qt),G=V,Ct(_t),st&&Lt()),Rt()}function kt(Qt){G=Qt,Ct(_t),_t=[],bt=q.indexOf(T,G)}function Rt(Qt){if(x.header&&!L&&dt.length&&!ut){var se=dt[0],te=Object.create(null),ae=new Set(se);let ve=!1;for(let ie=0;ie<se.length;ie++){let Ae=se[ie];if(te[Ae=U(x.transformHeader)?x.transformHeader(Ae,ie):Ae]){let ee,re=te[Ae];for(;ee=Ae+"_"+re,re++,ae.has(ee););ae.add(ee),se[ie]=ee,te[Ae]++,ve=!0,(Z=Z===null?{}:Z)[ee]=Ae}else te[Ae]=1,se[ie]=Ae;ae.add(Ae)}ve&&console.warn("Duplicate headers found and renamed."),ut=!0}return{data:dt,errors:vt,meta:{delimiter:v,linebreak:T,aborted:pt,truncated:!!Qt,cursor:Mt+(L||0),renamedHeaders:Z}}}function Lt(){_(Rt()),dt=[],vt=[]}},this.abort=function(){pt=!0},this.getCharIndex=function(){return G}}function B(x){var v=x.data,T=o[v.workerId],E=!1;if(v.error)T.userError(v.error,v.file);else if(v.results&&v.results.data){var _={abort:function(){E=!0,I(v.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:C,resume:C};if(U(T.userStep)){for(var F=0;F<v.results.data.length&&(T.userStep({data:v.results.data[F],errors:v.results.errors,meta:v.results.meta},_),!E);F++);delete v.results}else U(T.userChunk)&&(T.userChunk(v.results,_,v.file),delete v.results)}v.finished&&!E&&I(v.workerId,v.results)}function I(x,v){var T=o[x];U(T.userComplete)&&T.userComplete(v),T.terminate(),delete o[x]}function C(){throw new Error("Not implemented.")}function N(x){if(typeof x!="object"||x===null)return x;var v,T=Array.isArray(x)?[]:{};for(v in x)T[v]=N(x[v]);return T}function R(x,v){return function(){x.apply(v,arguments)}}function U(x){return typeof x=="function"}return l.parse=function(x,v){var T=(v=v||{}).dynamicTyping||!1;if(U(T)&&(v.dynamicTypingFunction=T,T={}),v.dynamicTyping=T,v.transform=!!U(v.transform)&&v.transform,!v.worker||!l.WORKERS_SUPPORTED)return T=null,l.NODE_STREAM_INPUT,typeof x=="string"?(x=(E=>E.charCodeAt(0)!==65279?E:E.slice(1))(x),T=new(v.download?u:d)(v)):x.readable===!0&&U(x.read)&&U(x.on)?T=new m(v):(n.File&&x instanceof File||x instanceof Object)&&(T=new h(v)),T.stream(x);(T=(()=>{var E;return!!l.WORKERS_SUPPORTED&&(E=(()=>{var _=n.URL||n.webkitURL||null,F=e.toString();return l.BLOB_URL||(l.BLOB_URL=_.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",F,")();"],{type:"text/javascript"})))})(),(E=new n.Worker(E)).onmessage=B,E.id=A++,o[E.id]=E)})()).userStep=v.step,T.userChunk=v.chunk,T.userComplete=v.complete,T.userError=v.error,v.step=U(v.step),v.chunk=U(v.chunk),v.complete=U(v.complete),v.error=U(v.error),delete v.worker,T.postMessage({input:x,config:v,workerId:T.id})},l.unparse=function(x,v){var T=!1,E=!0,_=",",F=`\r
`,k='"',Z=k+k,ut=!1,nt=null,j=!1,G=((()=>{if(typeof v=="object"){if(typeof v.delimiter!="string"||l.BAD_DELIMITERS.filter(function(L){return v.delimiter.indexOf(L)!==-1}).length||(_=v.delimiter),typeof v.quotes!="boolean"&&typeof v.quotes!="function"&&!Array.isArray(v.quotes)||(T=v.quotes),typeof v.skipEmptyLines!="boolean"&&typeof v.skipEmptyLines!="string"||(ut=v.skipEmptyLines),typeof v.newline=="string"&&(F=v.newline),typeof v.quoteChar=="string"&&(k=v.quoteChar),typeof v.header=="boolean"&&(E=v.header),Array.isArray(v.columns)){if(v.columns.length===0)throw new Error("Option columns is empty");nt=v.columns}v.escapeChar!==void 0&&(Z=v.escapeChar+k),v.escapeFormulae instanceof RegExp?j=v.escapeFormulae:typeof v.escapeFormulae=="boolean"&&v.escapeFormulae&&(j=/^[=+\-@\t\r].*$/)}})(),new RegExp(b(k),"g"));if(typeof x=="string"&&(x=JSON.parse(x)),Array.isArray(x)){if(!x.length||Array.isArray(x[0]))return pt(null,x,ut);if(typeof x[0]=="object")return pt(nt||Object.keys(x[0]),x,ut)}else if(typeof x=="object")return typeof x.data=="string"&&(x.data=JSON.parse(x.data)),Array.isArray(x.data)&&(x.fields||(x.fields=x.meta&&x.meta.fields||nt),x.fields||(x.fields=Array.isArray(x.data[0])?x.fields:typeof x.data[0]=="object"?Object.keys(x.data[0]):[]),Array.isArray(x.data[0])||typeof x.data[0]=="object"||(x.data=[x.data])),pt(x.fields||[],x.data||[],ut);throw new Error("Unable to serialize unrecognized input");function pt(L,O,V){var X="",At=(typeof L=="string"&&(L=JSON.parse(L)),typeof O=="string"&&(O=JSON.parse(O)),Array.isArray(L)&&0<L.length),et=!Array.isArray(O[0]);if(At&&E){for(var st=0;st<L.length;st++)0<st&&(X+=_),X+=q(L[st],st);0<O.length&&(X+=F)}for(var dt=0;dt<O.length;dt++){var vt=(At?L:O[dt]).length,_t=!1,Mt=At?Object.keys(O[dt]).length===0:O[dt].length===0;if(V&&!At&&(_t=V==="greedy"?O[dt].join("").trim()==="":O[dt].length===1&&O[dt][0].length===0),V==="greedy"&&At){for(var Ot=[],D=0;D<vt;D++){var $=et?L[D]:D;Ot.push(O[dt][$])}_t=Ot.join("").trim()===""}if(!_t){for(var bt=0;bt<vt;bt++){0<bt&&!Mt&&(X+=_);var rt=At&&et?L[bt]:bt;X+=q(O[dt][rt],bt)}dt<O.length-1&&(!V||0<vt&&!Mt)&&(X+=F)}}return X}function q(L,O){var V,X;return L==null?"":L.constructor===Date?JSON.stringify(L).slice(1,25):(X=!1,j&&typeof L=="string"&&j.test(L)&&(L="'"+L,X=!0),V=L.toString().replace(G,Z),(X=X||T===!0||typeof T=="function"&&T(L,O)||Array.isArray(T)&&T[O]||((At,et)=>{for(var st=0;st<et.length;st++)if(-1<At.indexOf(et[st]))return!0;return!1})(V,l.BAD_DELIMITERS)||-1<V.indexOf(_)||V.charAt(0)===" "||V.charAt(V.length-1)===" ")?k+V+k:V)}},l.RECORD_SEP="",l.UNIT_SEP="",l.BYTE_ORDER_MARK="\uFEFF",l.BAD_DELIMITERS=["\r",`
`,'"',l.BYTE_ORDER_MARK],l.WORKERS_SUPPORTED=!s&&!!n.Worker,l.NODE_STREAM_INPUT=1,l.LocalChunkSize=10485760,l.RemoteChunkSize=5242880,l.DefaultDelimiter=",",l.Parser=y,l.ParserHandle=f,l.NetworkStreamer=u,l.FileStreamer=h,l.StringStreamer=d,l.ReadableStreamStreamer=m,n.jQuery&&((i=n.jQuery).fn.parse=function(x){var v=x.config||{},T=[];return this.each(function(F){if(!(i(this).prop("tagName").toUpperCase()==="INPUT"&&i(this).attr("type").toLowerCase()==="file"&&n.FileReader)||!this.files||this.files.length===0)return!0;for(var k=0;k<this.files.length;k++)T.push({file:this.files[k],inputElem:this,instanceConfig:i.extend({},v)})}),E(),this;function E(){if(T.length===0)U(x.complete)&&x.complete();else{var F,k,Z,ut,nt=T[0];if(U(x.before)){var j=x.before(nt.file,nt.inputElem);if(typeof j=="object"){if(j.action==="abort")return F="AbortError",k=nt.file,Z=nt.inputElem,ut=j.reason,void(U(x.error)&&x.error({name:F},k,Z,ut));if(j.action==="skip")return void _();typeof j.config=="object"&&(nt.instanceConfig=i.extend(nt.instanceConfig,j.config))}else if(j==="skip")return void _()}var G=nt.instanceConfig.complete;nt.instanceConfig.complete=function(pt){U(G)&&G(pt,nt.file,nt.inputElem),_()},l.parse(nt.file,nt.instanceConfig)}}function _(){T.splice(0,1),E()}}),a&&(n.onmessage=function(x){x=x.data,l.WORKER_ID===void 0&&x&&(l.WORKER_ID=x.workerId),typeof x.input=="string"?n.postMessage({workerId:l.WORKER_ID,results:l.parse(x.input,x.config),finished:!0}):(n.File&&x.input instanceof File||x.input instanceof Object)&&(x=l.parse(x.input,x.config))&&n.postMessage({workerId:l.WORKER_ID,results:x,finished:!0})}),(u.prototype=Object.create(c.prototype)).constructor=u,(h.prototype=Object.create(c.prototype)).constructor=h,(d.prototype=Object.create(d.prototype)).constructor=d,(m.prototype=Object.create(c.prototype)).constructor=m,l})})(Pm)),Pm.exports}var mW=pW();const bW=Zv(mW);class yW{constructor(){this._state=this._initializeState(),this.state=this._state,console.log("StateManager initialized.")}_initializeState(){return{groups:[],students:[],tasks:[],evaluations:[],admins:[],currentUser:null,currentUserData:null,authLoading:!0,isPublicMode:!0,filters:{membersList:{searchTerm:"",groupFilter:"all",academicFilter:"all"},studentCards:{searchTerm:"",groupFilter:"all",academicFilter:"all"},groupAnalysis:{groupFilter:"all"},graphAnalysis:{groupFilter:"all",startDate:"",endDate:"",studentSearch:""},statistics:{taskFilter:"all",groupFilter:"all",evaluationType:"all",viewMode:"table",showPendingOnly:!1},analysis:{groupFilter:"all",taskFilter:"all",evaluationType:"all",viewMode:"table",showFullOnly:!1,criteriaView:"topic",summaryEvaluationView:"table"},adminManagement:{searchTerm:""}},activePage:"dashboard",isLoading:!1}}getState(){return this.state}get(t){if(t in this.state)return this.state[t];console.warn(`Attempted to get unknown state key: ${t}`)}set(t,e){t in this.state?this.state[t]=e:console.warn(`Attempted to set unknown state key: ${t}`)}update(t){if(typeof t!="object"||t===null){console.warn("StateManager update called with invalid argument:",t);return}for(const e in t)t.hasOwnProperty(e)&&e in this.state?this.set(e,t[e]):t.hasOwnProperty(e)&&console.warn(`Attempted to update unknown state key during bulk update: ${e}`)}getFilters(){return this.state.filters}getFilterSection(t){if(t in this.state.filters)return this.state.filters[t];console.warn(`Attempted to get unknown filter section: ${t}`)}updateFilters(t,e){if(!(t in this.state.filters))return console.warn(`Attempted to update filters for unknown section: ${t}`),!1;if(typeof e!="object"||e===null)return console.warn(`Invalid filterUpdates provided for section ${t}:`,e),!1;const n=this.state.filters[t];let i=!1;for(const s in e)e.hasOwnProperty(s)&&s in n?n[s]!==e[s]&&(n[s]=e[s],i=!0):e.hasOwnProperty(s)&&console.warn(`Attempted to update unknown filter key "${s}" in section "${t}"`);return i}resetAllFilters(){const t=this._initializeState().filters;this.set("filters",JSON.parse(JSON.stringify(t))),console.log("All filters reset.")}resetFiltersForSection(t){if(!(t in this.state.filters)){console.warn(`Attempted to reset filters for unknown section: ${t}`);return}const e=this._initializeState().filters[t];this.state.filters[t]=JSON.parse(JSON.stringify(e)),console.log(`Filters reset for section: ${t}`)}setUser(t,e){this.update({currentUser:t,currentUserData:e,isPublicMode:!t,authLoading:!1})}setAuthLoading(t){this.set("authLoading",t)}setLoading(t){this.set("isLoading",t)}}const ki=new yW;function wW(r){return typeof r!="string"?!1:/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.trim())}function vW(r){let t;return e=>{if(typeof e!="function"){console.warn("Debouncer called without a valid callback.");return}clearTimeout(t),t=setTimeout(e,r)}}function xW(r){return typeof r!="string"?String(r||""):r.replace(/^\uFEFF/,"").normalize("NFC").trim()}function G1(r){const t=String(r??"");if(!t)return"";const e=["","","","","","","","","",""];return t.replace(/\d/g,n=>e[parseInt(n,10)]??n)}function _W(r){return typeof r!="number"||!Number.isInteger(r)||r<1?G1(r):{1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",10:""}[r]||`${G1(r)}`}function BW(r){if(!Number.isFinite(r)||r<0||r===0)return"0 Bytes";const t=1024,e=["Bytes","KB","MB","GB","TB","PB"],n=Math.floor(Math.log(r)/Math.log(t)),i=Math.min(n,e.length-1);return`${parseFloat((r/Math.pow(t,i)).toFixed(2))} ${e[i]}`}function CW(r,t){if(typeof r!="string")return"";if(r.length<=t)return r;const e=Math.max(t-3,0);return r.substring(0,e)+"..."}function EW(r){return typeof r!="number"||isNaN(r)?" ":r>=90?" ":r>=80?"  ":r>=70?" ":r>=60?" ":r>=50?" ":r>=40?" ":" "}function SW(r){return typeof r!="number"||isNaN(r)?"text-gray-500 dark:text-gray-400":r>=80?"text-green-600 dark:text-green-400":r>=60?"text-blue-600 dark:text-blue-400":r>=40?"text-orange-500 dark:text-orange-400":"text-red-600 dark:text-red-400"}function kW(r){return typeof r!="number"||isNaN(r)?"bg-gray-400 dark:bg-gray-600":r>=80?"bg-green-500":r>=60?"bg-blue-500":r>=40?"bg-orange-500":"bg-red-500"}function IW(r){if(!r)return"N/A";let t;try{if(r instanceof Date)t=r;else if(r&&typeof r.seconds=="number")t=new Date(r.seconds*1e3);else if(typeof r=="string"){if(t=new Date(r),isNaN(t.getTime()))return console.warn(`formatTimestamp: Invalid date string received: ${r}`)," "}else return console.warn(`formatTimestamp: Invalid input type: ${typeof r}`)," ";return isNaN(t.getTime())?(console.warn("formatTimestamp: Resulting date is invalid.")," "):new Intl.DateTimeFormat("bn-BD",{day:"numeric",month:"long",year:"numeric"}).format(t)}catch(e){return console.error("Error formatting date:",r,e)," "}}function pF(r,t,e,n=!1){r instanceof Element&&typeof e=="function"?r.addEventListener(t,e,n):r&&typeof e!="function"&&console.warn(`addListener: Invalid handler provided for element and event "${t}".`,r)}const TW=Object.freeze(Object.defineProperty({__proto__:null,addListener:pF,convertToBanglaNumber:G1,convertToBanglaRank:_W,createDebouncer:vW,ensureBengaliText:xW,formatFileSize:BW,formatTimestamp:IW,getPerformanceBgClass:kW,getPerformanceColorClass:SW,getStudentPerformanceLevel:EW,truncateText:CW,validateEmail:wW},Symbol.toStringTag,{value:"Module"}));class FW{constructor(){this.elements=this._cacheDOMElements(),this.onConfirmDelete=null,this.onSaveEdit=null,this.onSaveAdmin=null,this.toastTimeout=null,this._initTheme(),this._setupEventListeners(),console.log(" UIManager initialized.")}_cacheDOMElements(){const t={},e=["loadingOverlay","loadingMessage","toast","toastMessage","mobileMenuOverlay","mobileMenuButton","themeToggle","headerLoginBtn","logoutBtn","userInfo","sidebar","appContainer","authModal","closeAuthModal","loginForm","registerForm","showRegister","showLogin","loginEmail","loginPassword","loginBtn","registerEmail","registerPassword","adminType","registerBtn","googleSignInBtn","logoutModal","cancelLogout","confirmLogout","deleteModal","deleteModalTitle","deleteModalText","cancelDelete","confirmDelete","confirmModal","confirmModalTitle","confirmModalText","cancelConfirm","actionConfirm","editModal","editModalTitle","editModalContent","cancelEdit","saveEdit","profileModal","openProfileModal","closeProfileModal","adminModal","adminModalTitle","adminModalContent","cancelAdmin","saveAdmin","adminEmail","adminPassword","adminTypeSelect","permissionsSection","permissionRead","permissionWrite","permissionEdit","permissionDelete"];t.pages=document.querySelectorAll(".page"),t.navButtons=document.querySelectorAll(".nav-btn"),t.privateTabs=document.querySelectorAll(".private-tab"),t.privateTabDividers=document.querySelectorAll(".private-tab-divider"),t.privateTabContent=document.querySelectorAll(".private-tab-content");for(const n of e)t[n]=document.getElementById(n),!t[n]&&["appContainer","loadingOverlay","toast","sidebar","authModal","deleteModal","confirmModal","editModal","adminModal","profileModal","logoutModal"].includes(n)&&console.error(` UIManager: Essential element with ID "${n}" not found!`);return t}addListener(t,e,n,i=!1){pF(t,e,n,i)}_setupEventListeners(){console.log(" Setting up UIManager internal event listeners..."),this.addListener(this.elements.themeToggle,"click",()=>this._toggleTheme()),this.addListener(this.elements.mobileMenuButton,"click",()=>this._toggleMobileMenu()),this.addListener(this.elements.mobileMenuOverlay,"click",()=>this._toggleMobileMenu(!1)),this.addListener(this.elements.openProfileModal,"click",()=>this.showModal(this.elements.profileModal)),this.addListener(this.elements.closeProfileModal,"click",()=>this.hideModal(this.elements.profileModal)),this.addListener(this.elements.profileModal,"click",t=>{t.target===this.elements.profileModal&&this.hideModal(this.elements.profileModal)}),this.addListener(this.elements.headerLoginBtn,"click",()=>{this._toggleAuthForm(!1),this.showModal(this.elements.authModal)}),this.addListener(this.elements.closeAuthModal,"click",()=>this.hideModal(this.elements.authModal)),this.addListener(this.elements.showRegister,"click",()=>this._toggleAuthForm(!0)),this.addListener(this.elements.showLogin,"click",()=>this._toggleAuthForm(!1)),this.addListener(this.elements.authModal,"click",t=>{t.target===this.elements.authModal&&this.hideModal(this.elements.authModal)}),this.addListener(this.elements.logoutBtn,"click",()=>this.showModal(this.elements.logoutModal)),this.addListener(this.elements.cancelLogout,"click",()=>this.hideModal(this.elements.logoutModal)),this.addListener(this.elements.cancelDelete,"click",()=>this.hideModal(this.elements.deleteModal)),this.addListener(this.elements.confirmDelete,"click",()=>{typeof this.onConfirmDelete=="function"&&this.onConfirmDelete(),this.hideModal(this.elements.deleteModal)}),this.addListener(this.elements.cancelConfirm,"click",()=>this.hideModal(this.elements.confirmModal)),this.addListener(this.elements.actionConfirm,"click",()=>{typeof this.onConfirmAction=="function"&&this.onConfirmAction(),this.hideModal(this.elements.confirmModal)}),this.addListener(this.elements.cancelEdit,"click",()=>this.hideModal(this.elements.editModal)),this.addListener(this.elements.saveEdit,"click",()=>{typeof this.onSaveEdit=="function"&&this.onSaveEdit()}),this.addListener(this.elements.cancelAdmin,"click",()=>this.hideModal(this.elements.adminModal)),this.addListener(this.elements.saveAdmin,"click",()=>{typeof this.onSaveAdmin=="function"&&this.onSaveAdmin()}),this.addListener(this.elements.adminTypeSelect,"change",t=>this._togglePermissionsSection(t.target.value)),console.log(" UIManager internal event listeners attached.")}_initTheme(){const t=localStorage.theme==="dark"||!("theme"in localStorage)&&window.matchMedia("(prefers-color-scheme: dark)").matches;this._applyTheme(t)}_toggleTheme(){const t=document.documentElement.classList.contains("dark");this._applyTheme(!t)}_applyTheme(t){document.documentElement.classList.toggle("dark",t),localStorage.theme=t?"dark":"light",this._updateThemeIcon(t)}_updateThemeIcon(t){var n;const e=(n=this.elements.themeToggle)==null?void 0:n.querySelector("i");e&&(e.className=`fas ${t?"fa-sun":"fa-moon"} text-base sm:text-lg`,this.elements.themeToggle.setAttribute("aria-label",t?"Switch to light theme":"Switch to dark theme"))}_toggleMobileMenu(t){var o;const e=this.elements.sidebar,n=this.elements.mobileMenuOverlay,i=(o=this.elements.mobileMenuButton)==null?void 0:o.querySelector("i");if(!e||!n)return;let s;const a=e.classList.contains("-translate-x-full");t===void 0?s=a:s=t,e.classList.toggle("-translate-x-full",!s),n.classList.toggle("hidden",!s),i&&(i.className=`fas ${s?"fa-times":"fa-bars"} text-xl sm:text-2xl`),this.elements.mobileMenuButton&&this.elements.mobileMenuButton.setAttribute("aria-expanded",String(s))}showPage(t){(!t||typeof t!="string")&&(console.warn(`showPage: Invalid pageId "${t}". Defaulting to dashboard.`),t="dashboard");const e=document.getElementById(`page-${t}`);if(!e){console.error(`showPage: Page element #page-${t} not found! Showing dashboard.`),t!=="dashboard"&&this.showPage("dashboard");return}this.elements.pages.forEach(n=>{n!==e&&n.classList.add("hidden")}),e.classList.remove("hidden"),ki.set("activePage",t),this._updateActiveNav(t),window.innerWidth<1024&&this._toggleMobileMenu(!1),window.scrollTo({top:0,behavior:"smooth"})}_updateActiveNav(t){var n;const e="active-nav-btn";(n=this.elements.navButtons)==null||n.forEach(i=>{const s=i.dataset.page===t;i.classList.toggle(e,s),i.setAttribute("aria-current",s?"page":"false")})}showLoading(t=" ..."){this.elements.loadingOverlay?(this.elements.loadingMessage&&(this.elements.loadingMessage.textContent=t),this.elements.loadingOverlay.classList.remove("hidden","opacity-0"),ki.setLoading(!0)):console.warn("showLoading: loadingOverlay element not found.")}hideLoading(){this.elements.loadingOverlay&&(this.elements.loadingOverlay.classList.add("opacity-0"),setTimeout(()=>{this.elements.loadingOverlay.classList.contains("opacity-0")&&this.elements.loadingOverlay.classList.add("hidden")},300),ki.setLoading(!1))}showToast(t,e="info",n=3500){if(!this.elements.toast||!this.elements.toastMessage){console.warn("showToast: Toast elements not found.");return}clearTimeout(this.toastTimeout),this.elements.toastMessage.textContent=t,this.elements.toast.className=`toast toast-${e}`,this.elements.toast.classList.remove("hidden"),this.elements.toast.offsetWidth,this.elements.toast.classList.add("toast-show"),this.toastTimeout=setTimeout(()=>{var i;(i=this.elements.toast)==null||i.classList.remove("toast-show"),setTimeout(()=>{var s;(s=this.elements.toast)==null||s.classList.add("hidden")},500)},n)}showModal(t){t instanceof Element?(t.classList.remove("hidden"),document.body.style.overflow="hidden"):console.warn("showModal: Invalid or missing modal element.")}hideModal(t){if(t instanceof Element){t.classList.add("hidden"),document.body.style.overflow="";const e=t.id;e==="deleteModal"?this.onConfirmDelete=null:e==="editModal"?(this.onSaveEdit=null,this.elements.editModalContent&&(this.elements.editModalContent.innerHTML="")):e==="adminModal"&&(this.onSaveAdmin=null)}else console.warn("hideModal: Invalid or missing modal element.")}showDeleteModal(t="",e="  ?",n){this.elements.deleteModal?(this.elements.deleteModalTitle&&(this.elements.deleteModalTitle.textContent=t),this.elements.deleteModalText&&(this.elements.deleteModalText.textContent=e),this.onConfirmDelete=n,this.showModal(this.elements.deleteModal)):console.error("showDeleteModal: deleteModal element not found.")}showConfirmModal(t,e,n,i=" ",s="btn-primary"){if(this.elements.confirmModal){this.elements.confirmModalTitle&&(this.elements.confirmModalTitle.textContent=t),this.elements.confirmModalText&&(this.elements.confirmModalText.textContent=e);const a=this.elements.actionConfirm;a&&(a.textContent=i,a.className=`btn ${s}`),this.onConfirmAction=n,this.showModal(this.elements.confirmModal)}else console.error("showConfirmModal: confirmModal element not found.")}showEditModal(t,e,n){this.elements.editModal?(this.elements.editModalTitle&&(this.elements.editModalTitle.textContent=t),this.elements.editModalContent?this.elements.editModalContent.innerHTML=e:console.warn("showEditModal: editModalContent element not found."),this.onSaveEdit=n,this.showModal(this.elements.editModal)):console.error("showEditModal: editModal element not found.")}showAdminModal(t,e=null,n){if(this.elements.adminModal){this.elements.adminModalTitle&&(this.elements.adminModalTitle.textContent=t);const i=this.elements.adminEmail,s=this.elements.adminPassword,a=this.elements.adminTypeSelect;i&&(i.value=(e==null?void 0:e.email)||"",i.disabled=!!e),s&&(s.value="",s.placeholder=e?"  ()":"*"),a&&(a.value=(e==null?void 0:e.type)||"user");const o=(e==null?void 0:e.permissions)||{read:!0,write:!1,edit:!1,delete:!1};this.elements.permissionRead&&(this.elements.permissionRead.checked=o.read),this.elements.permissionWrite&&(this.elements.permissionWrite.checked=o.write),this.elements.permissionEdit&&(this.elements.permissionEdit.checked=o.edit),this.elements.permissionDelete&&(this.elements.permissionDelete.checked=o.delete),this._togglePermissionsSection((a==null?void 0:a.value)||"user"),this.onSaveAdmin=n,this.showModal(this.elements.adminModal)}else console.error("showAdminModal: adminModal element not found.")}_toggleAuthForm(t){var e;if(this.elements.loginForm&&this.elements.registerForm&&this.elements.showRegister&&this.elements.showLogin){this.elements.loginForm.classList.toggle("hidden",t),this.elements.registerForm.classList.toggle("hidden",!t),this.elements.showRegister.classList.toggle("hidden",t),this.elements.showLogin.classList.toggle("hidden",!t);const n=(e=this.elements.authModal)==null?void 0:e.querySelector("h3");n&&(n.textContent=t?"   ":"  ")}}_togglePermissionsSection(t){var n;const e=t==="admin";(n=this.elements.permissionsSection)==null||n.classList.toggle("hidden",!e)}updateUserInfo(t){var n,i,s;const e=!!t;if((n=this.elements.headerLoginBtn)==null||n.classList.toggle("hidden",e),(i=this.elements.logoutBtn)==null||i.classList.toggle("hidden",!e),(s=this.elements.userInfo)==null||s.classList.toggle("hidden",!e),e&&this.elements.userInfo){const a={"super-admin":" ",admin:"",user:""},o=this.elements.userInfo.querySelector("div");o&&(o.textContent=a[t==null?void 0:t.type]||"")}else if(this.elements.userInfo){const a=this.elements.userInfo.querySelector("div");a&&(a.textContent="")}}enableNavigation(t,e){const n=e==="admin"||e==="super-admin",i=e==="super-admin",s="disabled-nav";document.querySelectorAll(".private-tab").forEach(A=>{const l=A.dataset.page;let c=!1;t&&(l==="admin-management"?c=i:c=n),A.disabled=!c,A.classList.toggle(s,!c)}),document.querySelectorAll(".private-tab-divider").forEach(A=>{A.classList.toggle("hidden",!n&&!i)})}populateSelect(t,e,n="",i=""){if(!(t instanceof HTMLSelectElement)){console.warn("populateSelect: Provided element is not a select.");return}const s=t.value;t.innerHTML="";const a=document.createElement("option");a.value=n.includes("")||n.includes("All")?"all":"",a.textContent=n,n.includes(" ")&&(a.disabled=!0,a.selected=!i&&!s),t.appendChild(a),e==null||e.forEach(l=>{if(l&&typeof l.value<"u"&&typeof l.text<"u"){const c=document.createElement("option");c.value=l.value,c.textContent=l.text,t.appendChild(c)}});const o=["","all",...e.map(l=>l.value)],A=i&&o.includes(i)?i:s&&o.includes(s)?s:a.value;t.value=A}displayEmptyMessage(t,e="   "){if(!(t instanceof Element)){console.warn("displayEmptyMessage: Provided container is not valid.");return}t.innerHTML=`<div class="placeholder-content p-6 text-center text-gray-500 dark:text-gray-400">
            <i class="fas fa-info-circle text-3xl mb-3 text-gray-400"></i><p>${e}</p>
        </div>`}clearContainer(t){t instanceof Element?t.innerHTML="":t&&console.warn("clearContainer: Provided container is not valid.",t)}}const Jr=new FW,LW=()=>{};var _E={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mF=function(r){const t=[];let e=0;for(let n=0;n<r.length;n++){let i=r.charCodeAt(n);i<128?t[e++]=i:i<2048?(t[e++]=i>>6|192,t[e++]=i&63|128):(i&64512)===55296&&n+1<r.length&&(r.charCodeAt(n+1)&64512)===56320?(i=65536+((i&1023)<<10)+(r.charCodeAt(++n)&1023),t[e++]=i>>18|240,t[e++]=i>>12&63|128,t[e++]=i>>6&63|128,t[e++]=i&63|128):(t[e++]=i>>12|224,t[e++]=i>>6&63|128,t[e++]=i&63|128)}return t},UW=function(r){const t=[];let e=0,n=0;for(;e<r.length;){const i=r[e++];if(i<128)t[n++]=String.fromCharCode(i);else if(i>191&&i<224){const s=r[e++];t[n++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=r[e++],a=r[e++],o=r[e++],A=((i&7)<<18|(s&63)<<12|(a&63)<<6|o&63)-65536;t[n++]=String.fromCharCode(55296+(A>>10)),t[n++]=String.fromCharCode(56320+(A&1023))}else{const s=r[e++],a=r[e++];t[n++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return t.join("")},bF={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,t){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let i=0;i<r.length;i+=3){const s=r[i],a=i+1<r.length,o=a?r[i+1]:0,A=i+2<r.length,l=A?r[i+2]:0,c=s>>2,u=(s&3)<<4|o>>4;let h=(o&15)<<2|l>>6,d=l&63;A||(d=64,a||(h=64)),n.push(e[c],e[u],e[h],e[d])}return n.join("")},encodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(r):this.encodeByteArray(mF(r),t)},decodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(r):UW(this.decodeStringToByteArray(r,t))},decodeStringToByteArray(r,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let i=0;i<r.length;){const s=e[r.charAt(i++)],o=i<r.length?e[r.charAt(i)]:0;++i;const l=i<r.length?e[r.charAt(i)]:64;++i;const u=i<r.length?e[r.charAt(i)]:64;if(++i,s==null||o==null||l==null||u==null)throw new PW;const h=s<<2|o>>4;if(n.push(h),l!==64){const d=o<<4&240|l>>2;if(n.push(d),u!==64){const m=l<<6&192|u;n.push(m)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class PW extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const NW=function(r){const t=mF(r);return bF.encodeByteArray(t,!0)},x0=function(r){return NW(r).replace(/\./g,"")},yF=function(r){try{return bF.decodeString(r,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DW(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MW=()=>DW().__FIREBASE_DEFAULTS__,RW=()=>{if(typeof process>"u"||typeof _E>"u")return;const r=_E.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},QW=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=r&&yF(r[1]);return t&&JSON.parse(t)},fb=()=>{try{return LW()||MW()||RW()||QW()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},wF=r=>{var t,e;return(e=(t=fb())==null?void 0:t.emulatorHosts)==null?void 0:e[r]},OW=r=>{const t=wF(r);if(!t)return;const e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const n=parseInt(t.substring(e+1),10);return t[0]==="["?[t.substring(1,e-1),n]:[t.substring(0,e),n]},vF=()=>{var r;return(r=fb())==null?void 0:r.config},xF=r=>{var t;return(t=fb())==null?void 0:t[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HW{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,n)=>{e?this.reject(e):this.resolve(n),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jd(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function _F(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VW(r,t){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const e={alg:"none",type:"JWT"},n=t||"demo-project",i=r.iat||0,s=r.sub||r.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...r};return[x0(JSON.stringify(e)),x0(JSON.stringify(a)),""].join(".")}const bf={};function $W(){const r={prod:[],emulator:[]};for(const t of Object.keys(bf))bf[t]?r.emulator.push(t):r.prod.push(t);return r}function jW(r){let t=document.getElementById(r),e=!1;return t||(t=document.createElement("div"),t.setAttribute("id",r),e=!0),{created:e,element:t}}let BE=!1;function BF(r,t){if(typeof window>"u"||typeof document>"u"||!jd(window.location.host)||bf[r]===t||bf[r]||BE)return;bf[r]=t;function e(h){return`__firebase__banner__${h}`}const n="__firebase__banner",s=$W().prod.length>0;function a(){const h=document.getElementById(n);h&&h.remove()}function o(h){h.style.display="flex",h.style.background="#7faaf0",h.style.position="fixed",h.style.bottom="5px",h.style.left="5px",h.style.padding=".5em",h.style.borderRadius="5px",h.style.alignItems="center"}function A(h,d){h.setAttribute("width","24"),h.setAttribute("id",d),h.setAttribute("height","24"),h.setAttribute("viewBox","0 0 24 24"),h.setAttribute("fill","none"),h.style.marginLeft="-6px"}function l(){const h=document.createElement("span");return h.style.cursor="pointer",h.style.marginLeft="16px",h.style.fontSize="24px",h.innerHTML=" &times;",h.onclick=()=>{BE=!0,a()},h}function c(h,d){h.setAttribute("id",d),h.innerText="Learn more",h.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",h.setAttribute("target","__blank"),h.style.paddingLeft="5px",h.style.textDecoration="underline"}function u(){const h=jW(n),d=e("text"),m=document.getElementById(d)||document.createElement("span"),f=e("learnmore"),b=document.getElementById(f)||document.createElement("a"),y=e("preprendIcon"),B=document.getElementById(y)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(h.created){const I=h.element;o(I),c(b,f);const C=l();A(B,y),I.append(B,m,b,C),document.body.appendChild(I)}s?(m.innerText="Preview backend disconnected.",B.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(B.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,m.innerText="Preview backend running in this workspace."),m.setAttribute("id",d)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",u):u()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fs(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function GW(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(fs())}function KW(){var t;const r=(t=fb())==null?void 0:t.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function zW(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function qW(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function WW(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function YW(){const r=fs();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function XW(){return!KW()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function JW(){try{return typeof indexedDB=="object"}catch{return!1}}function ZW(){return new Promise((r,t)=>{try{let e=!0;const n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close(),e||self.indexedDB.deleteDatabase(n),r(!0)},i.onupgradeneeded=()=>{e=!1},i.onerror=()=>{var s;t(((s=i.error)==null?void 0:s.message)||"")}}catch(e){t(e)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tY="FirebaseError";class QA extends Error{constructor(t,e,n){super(e),this.code=t,this.customData=n,this.name=tY,Object.setPrototypeOf(this,QA.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,cg.prototype.create)}}class cg{constructor(t,e,n){this.service=t,this.serviceName=e,this.errors=n}create(t,...e){const n=e[0]||{},i=`${this.service}/${t}`,s=this.errors[t],a=s?eY(s,n):"Error",o=`${this.serviceName}: ${a} (${i}).`;return new QA(i,o,n)}}function eY(r,t){return r.replace(rY,(e,n)=>{const i=t[n];return i!=null?String(i):`<${n}?>`})}const rY=/\{\$([^}]+)}/g;function nY(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t))return!1;return!0}function au(r,t){if(r===t)return!0;const e=Object.keys(r),n=Object.keys(t);for(const i of e){if(!n.includes(i))return!1;const s=r[i],a=t[i];if(CE(s)&&CE(a)){if(!au(s,a))return!1}else if(s!==a)return!1}for(const i of n)if(!e.includes(i))return!1;return!0}function CE(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ug(r){const t=[];for(const[e,n]of Object.entries(r))Array.isArray(n)?n.forEach(i=>{t.push(encodeURIComponent(e)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(n));return t.length?"&"+t.join("&"):""}function Gh(r){const t={};return r.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[i,s]=n.split("=");t[decodeURIComponent(i)]=decodeURIComponent(s)}}),t}function Kh(r){const t=r.indexOf("?");if(!t)return"";const e=r.indexOf("#",t);return r.substring(t,e>0?e:void 0)}function iY(r,t){const e=new sY(r,t);return e.subscribe.bind(e)}class sY{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(()=>{t(this)}).catch(n=>{this.error(n)})}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,n){let i;if(t===void 0&&e===void 0&&n===void 0)throw new Error("Missing Observer.");aY(t,["next","error","complete"])?i=t:i={next:t,error:e,complete:n},i.next===void 0&&(i.next=yw),i.error===void 0&&(i.error=yw),i.complete===void 0&&(i.complete=yw);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{e(this.observers[t])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function aY(r,t){if(typeof r!="object"||r===null)return!1;for(const e of t)if(e in r&&typeof r[e]=="function")return!0;return!1}function yw(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ti(r){return r&&r._delegate?r._delegate:r}class ou{constructor(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lc="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oY{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const n=new HW;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:e});i&&n.resolve(i)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){const e=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),n=(t==null?void 0:t.optional)??!1;if(this.isInitialized(e)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:e})}catch(i){if(n)return null;throw i}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(lY(t))try{this.getOrInitializeService({instanceIdentifier:Lc})}catch{}for(const[e,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(e);try{const s=this.getOrInitializeService({instanceIdentifier:i});n.resolve(s)}catch{}}}}clearInstance(t=Lc){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Lc){return this.instances.has(t)}getOptions(t=Lc){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:e});for(const[s,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);n===o&&a.resolve(i)}return i}onInit(t,e){const n=this.normalizeInstanceIdentifier(e),i=this.onInitCallbacks.get(n)??new Set;i.add(t),this.onInitCallbacks.set(n,i);const s=this.instances.get(n);return s&&t(s,n),()=>{i.delete(t)}}invokeOnInitCallbacks(t,e){const n=this.onInitCallbacks.get(e);if(n)for(const i of n)try{i(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:AY(t),options:e}),this.instances.set(t,n),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch{}return n||null}normalizeInstanceIdentifier(t=Lc){return this.component?this.component.multipleInstances?t:Lc:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function AY(r){return r===Lc?void 0:r}function lY(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cY{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new oY(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gr;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(gr||(gr={}));const uY={debug:gr.DEBUG,verbose:gr.VERBOSE,info:gr.INFO,warn:gr.WARN,error:gr.ERROR,silent:gr.SILENT},dY=gr.INFO,hY={[gr.DEBUG]:"log",[gr.VERBOSE]:"log",[gr.INFO]:"info",[gr.WARN]:"warn",[gr.ERROR]:"error"},fY=(r,t,...e)=>{if(t<r.logLevel)return;const n=new Date().toISOString(),i=hY[t];if(i)console[i](`[${n}]  ${r.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class g2{constructor(t){this.name=t,this._logLevel=dY,this._logHandler=fY,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in gr))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?uY[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,gr.DEBUG,...t),this._logHandler(this,gr.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,gr.VERBOSE,...t),this._logHandler(this,gr.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,gr.INFO,...t),this._logHandler(this,gr.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,gr.WARN,...t),this._logHandler(this,gr.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,gr.ERROR,...t),this._logHandler(this,gr.ERROR,...t)}}const gY=(r,t)=>t.some(e=>r instanceof e);let EE,SE;function pY(){return EE||(EE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function mY(){return SE||(SE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const CF=new WeakMap,K1=new WeakMap,EF=new WeakMap,ww=new WeakMap,p2=new WeakMap;function bY(r){const t=new Promise((e,n)=>{const i=()=>{r.removeEventListener("success",s),r.removeEventListener("error",a)},s=()=>{e(Dl(r.result)),i()},a=()=>{n(r.error),i()};r.addEventListener("success",s),r.addEventListener("error",a)});return t.then(e=>{e instanceof IDBCursor&&CF.set(e,r)}).catch(()=>{}),p2.set(t,r),t}function yY(r){if(K1.has(r))return;const t=new Promise((e,n)=>{const i=()=>{r.removeEventListener("complete",s),r.removeEventListener("error",a),r.removeEventListener("abort",a)},s=()=>{e(),i()},a=()=>{n(r.error||new DOMException("AbortError","AbortError")),i()};r.addEventListener("complete",s),r.addEventListener("error",a),r.addEventListener("abort",a)});K1.set(r,t)}let z1={get(r,t,e){if(r instanceof IDBTransaction){if(t==="done")return K1.get(r);if(t==="objectStoreNames")return r.objectStoreNames||EF.get(r);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return Dl(r[t])},set(r,t,e){return r[t]=e,!0},has(r,t){return r instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in r}};function wY(r){z1=r(z1)}function vY(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const n=r.call(vw(this),t,...e);return EF.set(n,t.sort?t.sort():[t]),Dl(n)}:mY().includes(r)?function(...t){return r.apply(vw(this),t),Dl(CF.get(this))}:function(...t){return Dl(r.apply(vw(this),t))}}function xY(r){return typeof r=="function"?vY(r):(r instanceof IDBTransaction&&yY(r),gY(r,pY())?new Proxy(r,z1):r)}function Dl(r){if(r instanceof IDBRequest)return bY(r);if(ww.has(r))return ww.get(r);const t=xY(r);return t!==r&&(ww.set(r,t),p2.set(t,r)),t}const vw=r=>p2.get(r);function _Y(r,t,{blocked:e,upgrade:n,blocking:i,terminated:s}={}){const a=indexedDB.open(r,t),o=Dl(a);return n&&a.addEventListener("upgradeneeded",A=>{n(Dl(a.result),A.oldVersion,A.newVersion,Dl(a.transaction),A)}),e&&a.addEventListener("blocked",A=>e(A.oldVersion,A.newVersion,A)),o.then(A=>{s&&A.addEventListener("close",()=>s()),i&&A.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),o}const BY=["get","getKey","getAll","getAllKeys","count"],CY=["put","add","delete","clear"],xw=new Map;function kE(r,t){if(!(r instanceof IDBDatabase&&!(t in r)&&typeof t=="string"))return;if(xw.get(t))return xw.get(t);const e=t.replace(/FromIndex$/,""),n=t!==e,i=CY.includes(e);if(!(e in(n?IDBIndex:IDBObjectStore).prototype)||!(i||BY.includes(e)))return;const s=async function(a,...o){const A=this.transaction(a,i?"readwrite":"readonly");let l=A.store;return n&&(l=l.index(o.shift())),(await Promise.all([l[e](...o),i&&A.done]))[0]};return xw.set(t,s),s}wY(r=>({...r,get:(t,e,n)=>kE(t,e)||r.get(t,e,n),has:(t,e)=>!!kE(t,e)||r.has(t,e)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EY{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(SY(e)){const n=e.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(e=>e).join(" ")}}function SY(r){const t=r.getComponent();return(t==null?void 0:t.type)==="VERSION"}const q1="@firebase/app",IE="0.14.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PA=new g2("@firebase/app"),kY="@firebase/app-compat",IY="@firebase/analytics-compat",TY="@firebase/analytics",FY="@firebase/app-check-compat",LY="@firebase/app-check",UY="@firebase/auth",PY="@firebase/auth-compat",NY="@firebase/database",DY="@firebase/data-connect",MY="@firebase/database-compat",RY="@firebase/functions",QY="@firebase/functions-compat",OY="@firebase/installations",HY="@firebase/installations-compat",VY="@firebase/messaging",$Y="@firebase/messaging-compat",jY="@firebase/performance",GY="@firebase/performance-compat",KY="@firebase/remote-config",zY="@firebase/remote-config-compat",qY="@firebase/storage",WY="@firebase/storage-compat",YY="@firebase/firestore",XY="@firebase/ai",JY="@firebase/firestore-compat",ZY="firebase",tX="12.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W1="[DEFAULT]",eX={[q1]:"fire-core",[kY]:"fire-core-compat",[TY]:"fire-analytics",[IY]:"fire-analytics-compat",[LY]:"fire-app-check",[FY]:"fire-app-check-compat",[UY]:"fire-auth",[PY]:"fire-auth-compat",[NY]:"fire-rtdb",[DY]:"fire-data-connect",[MY]:"fire-rtdb-compat",[RY]:"fire-fn",[QY]:"fire-fn-compat",[OY]:"fire-iid",[HY]:"fire-iid-compat",[VY]:"fire-fcm",[$Y]:"fire-fcm-compat",[jY]:"fire-perf",[GY]:"fire-perf-compat",[KY]:"fire-rc",[zY]:"fire-rc-compat",[qY]:"fire-gcs",[WY]:"fire-gcs-compat",[YY]:"fire-fst",[JY]:"fire-fst-compat",[XY]:"fire-vertex","fire-js":"fire-js",[ZY]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _0=new Map,rX=new Map,Y1=new Map;function TE(r,t){try{r.container.addComponent(t)}catch(e){PA.debug(`Component ${t.name} failed to register with FirebaseApp ${r.name}`,e)}}function kd(r){const t=r.name;if(Y1.has(t))return PA.debug(`There were multiple attempts to register component ${t}.`),!1;Y1.set(t,r);for(const e of _0.values())TE(e,r);for(const e of rX.values())TE(e,r);return!0}function m2(r,t){const e=r.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),r.container.getProvider(t)}function da(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nX={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ml=new cg("app","Firebase",nX);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iX{constructor(t,e,n){this._isDeleted=!1,this._options={...t},this._config={...e},this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new ou("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Ml.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gd=tX;function SF(r,t={}){let e=r;typeof t!="object"&&(t={name:t});const n={name:W1,automaticDataCollectionEnabled:!0,...t},i=n.name;if(typeof i!="string"||!i)throw Ml.create("bad-app-name",{appName:String(i)});if(e||(e=vF()),!e)throw Ml.create("no-options");const s=_0.get(i);if(s){if(au(e,s.options)&&au(n,s.config))return s;throw Ml.create("duplicate-app",{appName:i})}const a=new cY(i);for(const A of Y1.values())a.addComponent(A);const o=new iX(e,n,a);return _0.set(i,o),o}function kF(r=W1){const t=_0.get(r);if(!t&&r===W1&&vF())return SF();if(!t)throw Ml.create("no-app",{appName:r});return t}function Rl(r,t,e){let n=eX[r]??r;e&&(n+=`-${e}`);const i=n.match(/\s|\//),s=t.match(/\s|\//);if(i||s){const a=[`Unable to register library "${n}" with version "${t}":`];i&&a.push(`library name "${n}" contains illegal characters (whitespace or "/")`),i&&s&&a.push("and"),s&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),PA.warn(a.join(" "));return}kd(new ou(`${n}-version`,()=>({library:n,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sX="firebase-heartbeat-database",aX=1,Of="firebase-heartbeat-store";let _w=null;function IF(){return _w||(_w=_Y(sX,aX,{upgrade:(r,t)=>{switch(t){case 0:try{r.createObjectStore(Of)}catch(e){console.warn(e)}}}}).catch(r=>{throw Ml.create("idb-open",{originalErrorMessage:r.message})})),_w}async function oX(r){try{const e=(await IF()).transaction(Of),n=await e.objectStore(Of).get(TF(r));return await e.done,n}catch(t){if(t instanceof QA)PA.warn(t.message);else{const e=Ml.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});PA.warn(e.message)}}}async function FE(r,t){try{const n=(await IF()).transaction(Of,"readwrite");await n.objectStore(Of).put(t,TF(r)),await n.done}catch(e){if(e instanceof QA)PA.warn(e.message);else{const n=Ml.create("idb-set",{originalErrorMessage:e==null?void 0:e.message});PA.warn(n.message)}}}function TF(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AX=1024,lX=30;class cX{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new dX(e),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var t,e;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=LE();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>lX){const a=hX(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){PA.warn(n)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=LE(),{heartbeatsToSend:n,unsentEntries:i}=uX(this._heartbeatsCache.heartbeats),s=x0(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return PA.warn(e),""}}}function LE(){return new Date().toISOString().substring(0,10)}function uX(r,t=AX){const e=[];let n=r.slice();for(const i of r){const s=e.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),UE(e)>t){s.dates.pop();break}}else if(e.push({agent:i.agent,dates:[i.date]}),UE(e)>t){e.pop();break}n=n.slice(1)}return{heartbeatsToSend:e,unsentEntries:n}}class dX{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return JW()?ZW().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await oX(this.app);return e!=null&&e.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const n=await this.read();return FE(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const n=await this.read();return FE(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...t.heartbeats]})}else return}}function UE(r){return x0(JSON.stringify({version:2,heartbeats:r})).length}function hX(r){if(r.length===0)return-1;let t=0,e=r[0].date;for(let n=1;n<r.length;n++)r[n].date<e&&(e=r[n].date,t=n);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fX(r){kd(new ou("platform-logger",t=>new EY(t),"PRIVATE")),kd(new ou("heartbeat",t=>new cX(t),"PRIVATE")),Rl(q1,IE,r),Rl(q1,IE,"esm2020"),Rl("fire-js","")}fX("");var gX="firebase",pX="12.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Rl(gX,pX,"app");function FF(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const mX=FF,LF=new cg("auth","Firebase",FF());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B0=new g2("@firebase/auth");function bX(r,...t){B0.logLevel<=gr.WARN&&B0.warn(`Auth (${Gd}): ${r}`,...t)}function Nm(r,...t){B0.logLevel<=gr.ERROR&&B0.error(`Auth (${Gd}): ${r}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ma(r,...t){throw y2(r,...t)}function Xa(r,...t){return y2(r,...t)}function b2(r,t,e){const n={...mX(),[t]:e};return new cg("auth","Firebase",n).create(t,{appName:r.name})}function kA(r){return b2(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function yX(r,t,e){const n=e;if(!(t instanceof n))throw n.name!==t.constructor.name&&Ma(r,"argument-error"),b2(r,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function y2(r,...t){if(typeof r!="string"){const e=t[0],n=[...t.slice(1)];return n[0]&&(n[0].appName=r.name),r._errorFactory.create(e,...n)}return LF.create(r,...t)}function Qe(r,t,...e){if(!r)throw y2(t,...e)}function xA(r){const t="INTERNAL ASSERTION FAILED: "+r;throw Nm(t),new Error(t)}function NA(r,t){r||xA(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X1(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.href)||""}function wX(){return PE()==="http:"||PE()==="https:"}function PE(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vX(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(wX()||qW()||"connection"in navigator)?navigator.onLine:!0}function xX(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg{constructor(t,e){this.shortDelay=t,this.longDelay=e,NA(e>t,"Short delay should be less than long delay!"),this.isMobile=GW()||WW()}get(){return vX()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w2(r,t){NA(r.emulator,"Emulator should always be set here");const{url:e}=r.emulator;return t?`${e}${t.startsWith("/")?t.slice(1):t}`:e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UF{static initialize(t,e,n){this.fetchImpl=t,e&&(this.headersImpl=e),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;xA("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;xA("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;xA("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _X={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BX=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],CX=new dg(3e4,6e4);function sc(r,t){return r.tenantId&&!t.tenantId?{...t,tenantId:r.tenantId}:t}async function ac(r,t,e,n,i={}){return PF(r,i,async()=>{let s={},a={};n&&(t==="GET"?a=n:s={body:JSON.stringify(n)});const o=ug({key:r.config.apiKey,...a}).slice(1),A=await r._getAdditionalHeaders();A["Content-Type"]="application/json",r.languageCode&&(A["X-Firebase-Locale"]=r.languageCode);const l={method:t,headers:A,...s};return zW()||(l.referrerPolicy="no-referrer"),r.emulatorConfig&&jd(r.emulatorConfig.host)&&(l.credentials="include"),UF.fetch()(await NF(r,r.config.apiHost,e,o),l)})}async function PF(r,t,e){r._canInitEmulator=!1;const n={..._X,...t};try{const i=new SX(r),s=await Promise.race([e(),i.promise]);i.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw em(r,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const o=s.ok?a.errorMessage:a.error.message,[A,l]=o.split(" : ");if(A==="FEDERATED_USER_ID_ALREADY_LINKED")throw em(r,"credential-already-in-use",a);if(A==="EMAIL_EXISTS")throw em(r,"email-already-in-use",a);if(A==="USER_DISABLED")throw em(r,"user-disabled",a);const c=n[A]||A.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw b2(r,c,l);Ma(r,c)}}catch(i){if(i instanceof QA)throw i;Ma(r,"network-request-failed",{message:String(i)})}}async function hg(r,t,e,n,i={}){const s=await ac(r,t,e,n,i);return"mfaPendingCredential"in s&&Ma(r,"multi-factor-auth-required",{_serverResponse:s}),s}async function NF(r,t,e,n){const i=`${t}${e}?${n}`,s=r,a=s.config.emulator?w2(r.config,i):`${r.config.apiScheme}://${i}`;return BX.includes(e)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(a).toString():a}function EX(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class SX{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((e,n)=>{this.timer=setTimeout(()=>n(Xa(this.auth,"network-request-failed")),CX.get())})}}function em(r,t,e){const n={appName:r.name};e.email&&(n.email=e.email),e.phoneNumber&&(n.phoneNumber=e.phoneNumber);const i=Xa(r,t,n);return i.customData._tokenResponse=e,i}function NE(r){return r!==void 0&&r.enterprise!==void 0}class kX{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const e of this.recaptchaEnforcementState)if(e.provider&&e.provider===t)return EX(e.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function IX(r,t){return ac(r,"GET","/v2/recaptchaConfig",sc(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TX(r,t){return ac(r,"POST","/v1/accounts:delete",t)}async function C0(r,t){return ac(r,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yf(r){if(r)try{const t=new Date(Number(r));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function FX(r,t=!1){const e=ti(r),n=await e.getIdToken(t),i=v2(n);Qe(i&&i.exp&&i.auth_time&&i.iat,e.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:i,token:n,authTime:yf(Bw(i.auth_time)),issuedAtTime:yf(Bw(i.iat)),expirationTime:yf(Bw(i.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Bw(r){return Number(r)*1e3}function v2(r){const[t,e,n]=r.split(".");if(t===void 0||e===void 0||n===void 0)return Nm("JWT malformed, contained fewer than 3 sections"),null;try{const i=yF(e);return i?JSON.parse(i):(Nm("Failed to decode base64 JWT payload"),null)}catch(i){return Nm("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function DE(r){const t=v2(r);return Qe(t,"internal-error"),Qe(typeof t.exp<"u","internal-error"),Qe(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hf(r,t,e=!1){if(e)return t;try{return await t}catch(n){throw n instanceof QA&&LX(n)&&r.auth.currentUser===r&&await r.auth.signOut(),n}}function LX({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UX{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const e=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),e}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(t=!1){if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},e)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J1{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=yf(this.lastLoginAt),this.creationTime=yf(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E0(r){var u;const t=r.auth,e=await r.getIdToken(),n=await Hf(r,C0(t,{idToken:e}));Qe(n==null?void 0:n.users.length,t,"internal-error");const i=n.users[0];r._notifyReloadListener(i);const s=(u=i.providerUserInfo)!=null&&u.length?DF(i.providerUserInfo):[],a=NX(r.providerData,s),o=r.isAnonymous,A=!(r.email&&i.passwordHash)&&!(a!=null&&a.length),l=o?A:!1,c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new J1(i.createdAt,i.lastLoginAt),isAnonymous:l};Object.assign(r,c)}async function PX(r){const t=ti(r);await E0(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function NX(r,t){return[...r.filter(n=>!t.some(i=>i.providerId===n.providerId)),...t]}function DF(r){return r.map(({providerId:t,...e})=>({providerId:t,uid:e.rawId||"",displayName:e.displayName||null,email:e.email||null,phoneNumber:e.phoneNumber||null,photoURL:e.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DX(r,t){const e=await PF(r,{},async()=>{const n=ug({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:s}=r.config,a=await NF(r,i,"/v1/token",`key=${s}`),o=await r._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const A={method:"POST",headers:o,body:n};return r.emulatorConfig&&jd(r.emulatorConfig.host)&&(A.credentials="include"),UF.fetch()(a,A)});return{accessToken:e.access_token,expiresIn:e.expires_in,refreshToken:e.refresh_token}}async function MX(r,t){return ac(r,"POST","/v2/accounts:revokeToken",sc(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Qe(t.idToken,"internal-error"),Qe(typeof t.idToken<"u","internal-error"),Qe(typeof t.refreshToken<"u","internal-error");const e="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):DE(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}updateFromIdToken(t){Qe(t.length!==0,"internal-error");const e=DE(t);this.updateTokensAndExpiration(t,null,e)}async getToken(t,e=!1){return!e&&this.accessToken&&!this.isExpired?this.accessToken:(Qe(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:n,refreshToken:i,expiresIn:s}=await DX(t,e);this.updateTokensAndExpiration(n,i,Number(s))}updateTokensAndExpiration(t,e,n){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(t,e){const{refreshToken:n,accessToken:i,expirationTime:s}=e,a=new md;return n&&(Qe(typeof n=="string","internal-error",{appName:t}),a.refreshToken=n),i&&(Qe(typeof i=="string","internal-error",{appName:t}),a.accessToken=i),s&&(Qe(typeof s=="number","internal-error",{appName:t}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new md,this.toJSON())}_performRefresh(){return xA("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ul(r,t){Qe(typeof r=="string"||typeof r>"u","internal-error",{appName:t})}class qa{constructor({uid:t,auth:e,stsTokenManager:n,...i}){this.providerId="firebase",this.proactiveRefresh=new UX(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=e,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new J1(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(t){const e=await Hf(this,this.stsTokenManager.getToken(this.auth,t));return Qe(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return FX(this,t)}reload(){return PX(this)}_assign(t){this!==t&&(Qe(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(e=>({...e})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const e=new qa({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return e.metadata._copy(this.metadata),e}_onReload(t){Qe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,e=!1){let n=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),n=!0),e&&await E0(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(da(this.auth.app))return Promise.reject(kA(this.auth));const t=await this.getIdToken();return await Hf(this,TX(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){const n=e.displayName??void 0,i=e.email??void 0,s=e.phoneNumber??void 0,a=e.photoURL??void 0,o=e.tenantId??void 0,A=e._redirectEventId??void 0,l=e.createdAt??void 0,c=e.lastLoginAt??void 0,{uid:u,emailVerified:h,isAnonymous:d,providerData:m,stsTokenManager:f}=e;Qe(u&&f,t,"internal-error");const b=md.fromJSON(this.name,f);Qe(typeof u=="string",t,"internal-error"),ul(n,t.name),ul(i,t.name),Qe(typeof h=="boolean",t,"internal-error"),Qe(typeof d=="boolean",t,"internal-error"),ul(s,t.name),ul(a,t.name),ul(o,t.name),ul(A,t.name),ul(l,t.name),ul(c,t.name);const y=new qa({uid:u,auth:t,email:i,emailVerified:h,displayName:n,isAnonymous:d,photoURL:a,phoneNumber:s,tenantId:o,stsTokenManager:b,createdAt:l,lastLoginAt:c});return m&&Array.isArray(m)&&(y.providerData=m.map(B=>({...B}))),A&&(y._redirectEventId=A),y}static async _fromIdTokenResponse(t,e,n=!1){const i=new md;i.updateFromServerResponse(e);const s=new qa({uid:e.localId,auth:t,stsTokenManager:i,isAnonymous:n});return await E0(s),s}static async _fromGetAccountInfoResponse(t,e,n){const i=e.users[0];Qe(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?DF(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),o=new md;o.updateFromIdToken(n);const A=new qa({uid:i.localId,auth:t,stsTokenManager:o,isAnonymous:a}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new J1(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(A,l),A}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ME=new Map;function _A(r){NA(r instanceof Function,"Expected a class definition");let t=ME.get(r);return t?(NA(t instanceof r,"Instance stored in cache mismatched with class"),t):(t=new r,ME.set(r,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MF{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return e===void 0?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}MF.type="NONE";const RE=MF;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dm(r,t,e){return`firebase:${r}:${t}:${e}`}class bd{constructor(t,e,n){this.persistence=t,this.auth=e,this.userKey=n;const{config:i,name:s}=this.auth;this.fullUserKey=Dm(this.userKey,i.apiKey,s),this.fullPersistenceKey=Dm("persistence",i.apiKey,s),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const e=await C0(this.auth,{idToken:t}).catch(()=>{});return e?qa._fromGetAccountInfoResponse(this.auth,e,t):null}return qa._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,e)return this.setCurrentUser(e)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e,n="authUser"){if(!e.length)return new bd(_A(RE),t,n);const i=(await Promise.all(e.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l);let s=i[0]||_A(RE);const a=Dm(n,t.config.apiKey,t.name);let o=null;for(const l of e)try{const c=await l._get(a);if(c){let u;if(typeof c=="string"){const h=await C0(t,{idToken:c}).catch(()=>{});if(!h)break;u=await qa._fromGetAccountInfoResponse(t,h,c)}else u=qa._fromJSON(t,c);l!==s&&(o=u),s=l;break}}catch{}const A=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!A.length?new bd(s,t,n):(s=A[0],o&&await s._set(a,o.toJSON()),await Promise.all(e.map(async l=>{if(l!==s)try{await l._remove(a)}catch{}})),new bd(s,t,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QE(r){const t=r.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(HF(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(RF(t))return"Firefox";if(t.includes("silk/"))return"Silk";if($F(t))return"Blackberry";if(jF(t))return"Webos";if(QF(t))return"Safari";if((t.includes("chrome/")||OF(t))&&!t.includes("edge/"))return"Chrome";if(VF(t))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=r.match(e);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function RF(r=fs()){return/firefox\//i.test(r)}function QF(r=fs()){const t=r.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function OF(r=fs()){return/crios\//i.test(r)}function HF(r=fs()){return/iemobile/i.test(r)}function VF(r=fs()){return/android/i.test(r)}function $F(r=fs()){return/blackberry/i.test(r)}function jF(r=fs()){return/webos/i.test(r)}function x2(r=fs()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function RX(r=fs()){var t;return x2(r)&&!!((t=window.navigator)!=null&&t.standalone)}function QX(){return YW()&&document.documentMode===10}function GF(r=fs()){return x2(r)||VF(r)||jF(r)||$F(r)||/windows phone/i.test(r)||HF(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KF(r,t=[]){let e;switch(r){case"Browser":e=QE(fs());break;case"Worker":e=`${QE(fs())}-${r}`;break;default:e=r}const n=t.length?t.join(","):"FirebaseCore-web";return`${e}/JsCore/${Gd}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OX{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){const n=s=>new Promise((a,o)=>{try{const A=t(s);a(A)}catch(A){o(A)}});n.onAbort=e,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const e=[];try{for(const n of this.queue)await n(t),n.onAbort&&e.push(n.onAbort)}catch(n){e.reverse();for(const i of e)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HX(r,t={}){return ac(r,"GET","/v2/passwordPolicy",sc(r,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VX=6;class $X{constructor(t){var n;const e=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=e.minPasswordLength??VX,e.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=e.maxPasswordLength),e.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=e.containsLowercaseCharacter),e.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=e.containsUppercaseCharacter),e.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=e.containsNumericCharacter),e.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=e.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((n=t.allowedNonAlphanumericCharacters)==null?void 0:n.join(""))??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const e={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,e),this.validatePasswordCharacterOptions(t,e),e.isValid&&(e.isValid=e.meetsMinPasswordLength??!0),e.isValid&&(e.isValid=e.meetsMaxPasswordLength??!0),e.isValid&&(e.isValid=e.containsLowercaseLetter??!0),e.isValid&&(e.isValid=e.containsUppercaseLetter??!0),e.isValid&&(e.isValid=e.containsNumericCharacter??!0),e.isValid&&(e.isValid=e.containsNonAlphanumericCharacter??!0),e}validatePasswordLengthOptions(t,e){const n=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;n&&(e.meetsMinPasswordLength=t.length>=n),i&&(e.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,e){this.updatePasswordCharacterOptionsStatuses(e,!1,!1,!1,!1);let n;for(let i=0;i<t.length;i++)n=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(e,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(t,e,n,i,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=e)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jX{constructor(t,e,n,i){this.app=t,this.heartbeatServiceProvider=e,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new OE(this),this.idTokenSubscription=new OE(this),this.beforeStateQueue=new OX(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=LF,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=_A(e)),this._initializationPromise=this.queue(async()=>{var n,i,s;if(!this._deleted&&(this.persistenceManager=await bd.create(this,t),(n=this._resolvePersistenceManagerAvailable)==null||n.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(e),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const e=await C0(this,{idToken:t}),n=await qa._fromGetAccountInfoResponse(this,e,t);await this.directlySetCurrentUser(n)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var s;if(da(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const e=await this.assertedPersistence.getCurrentUser();let n=e,i=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(s=this.redirectUser)==null?void 0:s._redirectEventId,o=n==null?void 0:n._redirectEventId,A=await this.tryRedirectSignIn(t);(!a||a===o)&&(A!=null&&A.user)&&(n=A.user,i=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(n)}catch(a){n=e,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return Qe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){try{await E0(t)}catch(e){if((e==null?void 0:e.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=xX()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(da(this.app))return Promise.reject(kA(this));const e=t?ti(t):null;return e&&Qe(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t,e=!1){if(!this._deleted)return t&&Qe(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return da(this.app)?Promise.reject(kA(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return da(this.app)?Promise.reject(kA(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(_A(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const e=this._getPasswordPolicyInternal();return e.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):e.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await HX(this),e=new $X(t);this.tenantId===null?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new cg("auth","Firebase",t())}onAuthStateChanged(t,e,n){return this.registerStateListener(this.authStateSubscription,t,e,n)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,n){return this.registerStateListener(this.idTokenSubscription,t,e,n)}authStateReady(){return new Promise((t,e)=>{if(this.currentUser)t();else{const n=this.onAuthStateChanged(()=>{n(),t()},e)}})}async revokeAccessToken(t){if(this.currentUser){const e=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:e};this.tenantId!=null&&(n.tenantId=this.tenantId),await MX(this,n)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)==null?void 0:t.toJSON()}}async _setRedirectUser(t,e){const n=await this.getOrInitRedirectPersistenceManager(e);return t===null?n.removeCurrentUser():n.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&_A(t)||this._popupRedirectResolver;Qe(e,this,"argument-error"),this.redirectPersistenceManager=await bd.create(this,[_A(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var e,n;return this._isInitialized&&await this.queue(async()=>{}),((e=this._currentUser)==null?void 0:e._redirectEventId)===t?this._currentUser:((n=this.redirectUser)==null?void 0:n._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=((e=this.currentUser)==null?void 0:e.uid)??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,n,i){if(this._deleted)return()=>{};const s=typeof e=="function"?e:e.next.bind(e);let a=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Qe(o,this,"internal-error"),o.then(()=>{a||s(this.currentUser)}),typeof e=="function"){const A=t.addObserver(e,n,i);return()=>{a=!0,A()}}else{const A=t.addObserver(e);return()=>{a=!0,A()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Qe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=KF(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const e=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());e&&(t["X-Firebase-Client"]=e);const n=await this._getAppCheckToken();return n&&(t["X-Firebase-AppCheck"]=n),t}async _getAppCheckToken(){var e;if(da(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:e.getToken());return t!=null&&t.error&&bX(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function oc(r){return ti(r)}class OE{constructor(t){this.auth=t,this.observer=null,this.addObserver=iY(e=>this.observer=e)}get next(){return Qe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gb={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function GX(r){gb=r}function zF(r){return gb.loadJS(r)}function KX(){return gb.recaptchaEnterpriseScript}function zX(){return gb.gapiScript}function qX(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class WX{constructor(){this.enterprise=new YX}ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}}class YX{ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}}const XX="recaptcha-enterprise",qF="NO_RECAPTCHA";class JX{constructor(t){this.type=XX,this.auth=oc(t)}async verify(t="verify",e=!1){async function n(s){if(!e){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(a,o)=>{IX(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(A=>{if(A.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const l=new kX(A);return s.tenantId==null?s._agentRecaptchaConfig=l:s._tenantRecaptchaConfigs[s.tenantId]=l,a(l.siteKey)}}).catch(A=>{o(A)})})}function i(s,a,o){const A=window.grecaptcha;NE(A)?A.enterprise.ready(()=>{A.enterprise.execute(s,{action:t}).then(l=>{a(l)}).catch(()=>{a(qF)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new WX().execute("siteKey",{action:"verify"}):new Promise((s,a)=>{n(this.auth).then(o=>{if(!e&&NE(window.grecaptcha))i(o,s,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let A=KX();A.length!==0&&(A+=o),zF(A).then(()=>{i(o,s,a)}).catch(l=>{a(l)})}}).catch(o=>{a(o)})})}}async function HE(r,t,e,n=!1,i=!1){const s=new JX(r);let a;if(i)a=qF;else try{a=await s.verify(e)}catch{a=await s.verify(e,!0)}const o={...t};if(e==="mfaSmsEnrollment"||e==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in o){const A=o.phoneEnrollmentInfo.phoneNumber,l=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:A,recaptchaToken:l,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const A=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:A,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return n?Object.assign(o,{captchaResp:a}):Object.assign(o,{captchaResponse:a}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Z1(r,t,e,n,i){var s;if((s=r._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await HE(r,t,e,e==="getOobCode");return n(r,a)}else return n(r,t).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${e} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await HE(r,t,e,e==="getOobCode");return n(r,o)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZX(r,t){const e=m2(r,"auth");if(e.isInitialized()){const i=e.getImmediate(),s=e.getOptions();if(au(s,t??{}))return i;Ma(i,"already-initialized")}return e.initialize({options:t})}function tJ(r,t){const e=(t==null?void 0:t.persistence)||[],n=(Array.isArray(e)?e:[e]).map(_A);t!=null&&t.errorMap&&r._updateErrorMap(t.errorMap),r._initializeWithPersistence(n,t==null?void 0:t.popupRedirectResolver)}function eJ(r,t,e){const n=oc(r);Qe(/^https?:\/\//.test(t),n,"invalid-emulator-scheme");const i=!1,s=WF(t),{host:a,port:o}=rJ(t),A=o===null?"":`:${o}`,l={url:`${s}//${a}${A}/`},c=Object.freeze({host:a,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!n._canInitEmulator){Qe(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),Qe(au(l,n.config.emulator)&&au(c,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=l,n.emulatorConfig=c,n.settings.appVerificationDisabledForTesting=!0,jd(a)?(_F(`${s}//${a}${A}`),BF("Auth",!0)):nJ()}function WF(r){const t=r.indexOf(":");return t<0?"":r.substr(0,t+1)}function rJ(r){const t=WF(r),e=/(\/\/)?([^?#/]+)/.exec(r.substr(t.length));if(!e)return{host:"",port:null};const n=e[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(n);if(i){const s=i[1];return{host:s,port:VE(n.substr(s.length+1))}}else{const[s,a]=n.split(":");return{host:s,port:VE(a)}}}function VE(r){if(!r)return null;const t=Number(r);return isNaN(t)?null:t}function nJ(){function r(){const t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _2{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return xA("not implemented")}_getIdTokenResponse(t){return xA("not implemented")}_linkToIdToken(t,e){return xA("not implemented")}_getReauthenticationResolver(t){return xA("not implemented")}}async function iJ(r,t){return ac(r,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sJ(r,t){return hg(r,"POST","/v1/accounts:signInWithPassword",sc(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aJ(r,t){return hg(r,"POST","/v1/accounts:signInWithEmailLink",sc(r,t))}async function oJ(r,t){return hg(r,"POST","/v1/accounts:signInWithEmailLink",sc(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf extends _2{constructor(t,e,n,i=null){super("password",n),this._email=t,this._password=e,this._tenantId=i}static _fromEmailAndPassword(t,e){return new Vf(t,e,"password")}static _fromEmailAndCode(t,e,n=null){return new Vf(t,e,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t;if(e!=null&&e.email&&(e!=null&&e.password)){if(e.signInMethod==="password")return this._fromEmailAndPassword(e.email,e.password);if(e.signInMethod==="emailLink")return this._fromEmailAndCode(e.email,e.password,e.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const e={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Z1(t,e,"signInWithPassword",sJ);case"emailLink":return aJ(t,{email:this._email,oobCode:this._password});default:Ma(t,"internal-error")}}async _linkToIdToken(t,e){switch(this.signInMethod){case"password":const n={idToken:e,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Z1(t,n,"signUpPassword",iJ);case"emailLink":return oJ(t,{idToken:e,email:this._email,oobCode:this._password});default:Ma(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yd(r,t){return hg(r,"POST","/v1/accounts:signInWithIdp",sc(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AJ="http://localhost";class Au extends _2{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new Au(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):Ma("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t,{providerId:n,signInMethod:i,...s}=e;if(!n||!i)return null;const a=new Au(n,i);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(t){const e=this.buildRequest();return yd(t,e)}_linkToIdToken(t,e){const n=this.buildRequest();return n.idToken=e,yd(t,n)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,yd(t,e)}buildRequest(){const t={requestUri:AJ,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=ug(e)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lJ(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function cJ(r){const t=Gh(Kh(r)).link,e=t?Gh(Kh(t)).deep_link_id:null,n=Gh(Kh(r)).deep_link_id;return(n?Gh(Kh(n)).link:null)||n||e||t||r}class B2{constructor(t){const e=Gh(Kh(t)),n=e.apiKey??null,i=e.oobCode??null,s=lJ(e.mode??null);Qe(n&&i&&s,"argument-error"),this.apiKey=n,this.operation=s,this.code=i,this.continueUrl=e.continueUrl??null,this.languageCode=e.lang??null,this.tenantId=e.tenantId??null}static parseLink(t){const e=cJ(t);try{return new B2(e)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd{constructor(){this.providerId=Kd.PROVIDER_ID}static credential(t,e){return Vf._fromEmailAndPassword(t,e)}static credentialWithLink(t,e){const n=B2.parseLink(e);return Qe(n,"argument-error"),Vf._fromEmailAndCode(t,n.code,n.tenantId)}}Kd.PROVIDER_ID="password";Kd.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Kd.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C2{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fg extends C2{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml extends fg{constructor(){super("facebook.com")}static credential(t){return Au._fromParams({providerId:ml.PROVIDER_ID,signInMethod:ml.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return ml.credentialFromTaggedObject(t)}static credentialFromError(t){return ml.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return ml.credential(t.oauthAccessToken)}catch{return null}}}ml.FACEBOOK_SIGN_IN_METHOD="facebook.com";ml.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA extends fg{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return Au._fromParams({providerId:mA.PROVIDER_ID,signInMethod:mA.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return mA.credentialFromTaggedObject(t)}static credentialFromError(t){return mA.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:n}=t;if(!e&&!n)return null;try{return mA.credential(e,n)}catch{return null}}}mA.GOOGLE_SIGN_IN_METHOD="google.com";mA.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl extends fg{constructor(){super("github.com")}static credential(t){return Au._fromParams({providerId:bl.PROVIDER_ID,signInMethod:bl.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return bl.credentialFromTaggedObject(t)}static credentialFromError(t){return bl.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return bl.credential(t.oauthAccessToken)}catch{return null}}}bl.GITHUB_SIGN_IN_METHOD="github.com";bl.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl extends fg{constructor(){super("twitter.com")}static credential(t,e){return Au._fromParams({providerId:yl.PROVIDER_ID,signInMethod:yl.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return yl.credentialFromTaggedObject(t)}static credentialFromError(t){return yl.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:e,oauthTokenSecret:n}=t;if(!e||!n)return null;try{return yl.credential(e,n)}catch{return null}}}yl.TWITTER_SIGN_IN_METHOD="twitter.com";yl.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uJ(r,t){return hg(r,"POST","/v1/accounts:signUp",sc(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,n,i=!1){const s=await qa._fromIdTokenResponse(t,n,i),a=$E(n);return new lu({user:s,providerId:a,_tokenResponse:n,operationType:e})}static async _forOperation(t,e,n){await t._updateTokensIfNecessary(n,!0);const i=$E(n);return new lu({user:t,providerId:i,_tokenResponse:n,operationType:e})}}function $E(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S0 extends QA{constructor(t,e,n,i){super(e.code,e.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,S0.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:e.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(t,e,n,i){return new S0(t,e,n,i)}}function YF(r,t,e,n){return(t==="reauthenticate"?e._getReauthenticationResolver(r):e._getIdTokenResponse(r)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?S0._fromErrorAndOperation(r,s,t,n):s})}async function dJ(r,t,e=!1){const n=await Hf(r,t._linkToIdToken(r.auth,await r.getIdToken()),e);return lu._forOperation(r,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hJ(r,t,e=!1){const{auth:n}=r;if(da(n.app))return Promise.reject(kA(n));const i="reauthenticate";try{const s=await Hf(r,YF(n,i,t,r),e);Qe(s.idToken,n,"internal-error");const a=v2(s.idToken);Qe(a,n,"internal-error");const{sub:o}=a;return Qe(r.uid===o,n,"user-mismatch"),lu._forOperation(r,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Ma(n,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XF(r,t,e=!1){if(da(r.app))return Promise.reject(kA(r));const n="signIn",i=await YF(r,n,t),s=await lu._fromIdTokenResponse(r,n,i);return e||await r._updateCurrentUser(s.user),s}async function fJ(r,t){return XF(oc(r),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JF(r){const t=oc(r);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function gJ(r,t,e){if(da(r.app))return Promise.reject(kA(r));const n=oc(r),a=await Z1(n,{returnSecureToken:!0,email:t,password:e,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",uJ).catch(A=>{throw A.code==="auth/password-does-not-meet-requirements"&&JF(r),A}),o=await lu._fromIdTokenResponse(n,"signIn",a);return await n._updateCurrentUser(o.user),o}function pJ(r,t,e){return da(r.app)?Promise.reject(kA(r)):fJ(ti(r),Kd.credential(t,e)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&JF(r),n})}function mJ(r,t,e,n){return ti(r).onIdTokenChanged(t,e,n)}function bJ(r,t,e){return ti(r).beforeAuthStateChanged(t,e)}function yJ(r,t,e,n){return ti(r).onAuthStateChanged(t,e,n)}function Cw(r){return ti(r).signOut()}async function wJ(r){return ti(r).delete()}const k0="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZF{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(k0,"1"),this.storage.removeItem(k0),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vJ=1e3,xJ=10;class t3 extends ZF{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=GF(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const n=this.storage.getItem(e),i=this.localCache[e];n!==i&&t(e,i,n)}}onStorageEvent(t,e=!1){if(!t.key){this.forAllChangedKeys((a,o,A)=>{this.notifyListeners(a,A)});return}const n=t.key;e?this.detachListener():this.stopPolling();const i=()=>{const a=this.storage.getItem(n);!e&&this.localCache[n]===a||this.notifyListeners(n,a)},s=this.storage.getItem(n);QX()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,xJ):i()}notifyListeners(t,e){this.localCache[t]=e;const n=this.listeners[t];if(n)for(const i of Array.from(n))i(e&&JSON.parse(e))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,e,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:n}),!0)})},vJ)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}t3.type="LOCAL";const _J=t3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e3 extends ZF{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,e){}_removeListener(t,e){}}e3.type="SESSION";const r3=e3;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BJ(r){return Promise.all(r.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(e){return{fulfilled:!1,reason:e}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pb{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find(i=>i.isListeningto(t));if(e)return e;const n=new pb(t);return this.receivers.push(n),n}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:n,eventType:i,data:s}=e.data,a=this.handlersMap[i];if(!(a!=null&&a.size))return;e.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const o=Array.from(a).map(async l=>l(e.origin,s)),A=await BJ(o);e.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:A})}_subscribe(t,e){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),(!e||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}pb.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E2(r="",t=10){let e="";for(let n=0;n<t;n++)e+=Math.floor(Math.random()*10);return r+e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CJ{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,e,n=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,a;return new Promise((o,A)=>{const l=E2("",20);i.port1.start();const c=setTimeout(()=>{A(new Error("unsupported_event"))},n);a={messageChannel:i,onMessage(u){const h=u;if(h.data.eventId===l)switch(h.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{A(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),o(h.data.response);break;default:clearTimeout(c),clearTimeout(s),A(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:t,eventId:l,data:e},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lo(){return window}function EJ(r){Lo().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n3(){return typeof Lo().WorkerGlobalScope<"u"&&typeof Lo().importScripts=="function"}async function SJ(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function kJ(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)==null?void 0:r.controller)||null}function IJ(){return n3()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i3="firebaseLocalStorageDb",TJ=1,I0="firebaseLocalStorage",s3="fbase_key";class gg{constructor(t){this.request=t}toPromise(){return new Promise((t,e)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{e(this.request.error)})})}}function mb(r,t){return r.transaction([I0],t?"readwrite":"readonly").objectStore(I0)}function FJ(){const r=indexedDB.deleteDatabase(i3);return new gg(r).toPromise()}function tv(){const r=indexedDB.open(i3,TJ);return new Promise((t,e)=>{r.addEventListener("error",()=>{e(r.error)}),r.addEventListener("upgradeneeded",()=>{const n=r.result;try{n.createObjectStore(I0,{keyPath:s3})}catch(i){e(i)}}),r.addEventListener("success",async()=>{const n=r.result;n.objectStoreNames.contains(I0)?t(n):(n.close(),await FJ(),t(await tv()))})})}async function jE(r,t,e){const n=mb(r,!0).put({[s3]:t,value:e});return new gg(n).toPromise()}async function LJ(r,t){const e=mb(r,!1).get(t),n=await new gg(e).toPromise();return n===void 0?null:n.value}function GE(r,t){const e=mb(r,!0).delete(t);return new gg(e).toPromise()}const UJ=800,PJ=3;class a3{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await tv(),this.db)}async _withRetries(t){let e=0;for(;;)try{const n=await this._openDb();return await t(n)}catch(n){if(e++>PJ)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return n3()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=pb._getInstance(IJ()),this.receiver._subscribe("keyChanged",async(t,e)=>({keyProcessed:(await this._poll()).includes(e.key)})),this.receiver._subscribe("ping",async(t,e)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await SJ(),!this.activeServiceWorker)return;this.sender=new CJ(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&(e=t[0])!=null&&e.fulfilled&&(n=t[0])!=null&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||kJ()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await tv();return await jE(t,k0,"1"),await GE(t,k0),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,e){return this._withPendingWrite(async()=>(await this._withRetries(n=>jE(n,t,e)),this.localCache[t]=e,this.notifyServiceWorker(t)))}async _get(t){const e=await this._withRetries(n=>LJ(n,t));return this.localCache[t]=e,e}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(e=>GE(e,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(i=>{const s=mb(i,!1).getAll();return new gg(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const e=[],n=new Set;if(t.length!==0)for(const{fbase_key:i,value:s}of t)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),e.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!n.has(i)&&(this.notifyListeners(i,null),e.push(i));return e}notifyListeners(t,e){this.localCache[t]=e;const n=this.listeners[t];if(n)for(const i of Array.from(n))i(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),UJ)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}a3.type="LOCAL";const NJ=a3;new dg(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o3(r,t){return t?_A(t):(Qe(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S2 extends _2{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return yd(t,this._buildIdpRequest())}_linkToIdToken(t,e){return yd(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return yd(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function DJ(r){return XF(r.auth,new S2(r),r.bypassAuthState)}function MJ(r){const{auth:t,user:e}=r;return Qe(e,t,"internal-error"),hJ(e,new S2(r),r.bypassAuthState)}async function RJ(r){const{auth:t,user:e}=r;return Qe(e,t,"internal-error"),dJ(e,new S2(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A3{constructor(t,e,n,i,s=!1){this.auth=t,this.resolver=n,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise(async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(t){const{urlResponse:e,sessionId:n,postBody:i,tenantId:s,error:a,type:o}=t;if(a){this.reject(a);return}const A={auth:this.auth,requestUri:e,sessionId:n,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(A))}catch(l){this.reject(l)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return DJ;case"linkViaPopup":case"linkViaRedirect":return RJ;case"reauthViaPopup":case"reauthViaRedirect":return MJ;default:Ma(this.auth,"internal-error")}}resolve(t){NA(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){NA(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QJ=new dg(2e3,1e4);async function OJ(r,t,e){if(da(r.app))return Promise.reject(Xa(r,"operation-not-supported-in-this-environment"));const n=oc(r);yX(r,t,C2);const i=o3(n,e);return new Oc(n,"signInViaPopup",t,i).executeNotNull()}class Oc extends A3{constructor(t,e,n,i,s){super(t,e,i,s),this.provider=n,this.authWindow=null,this.pollId=null,Oc.currentPopupAction&&Oc.currentPopupAction.cancel(),Oc.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Qe(t,this.auth,"internal-error"),t}async onExecution(){NA(this.filter.length===1,"Popup operations only handle one event");const t=E2();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(Xa(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)==null?void 0:t.associatedEvent)||null}cancel(){this.reject(Xa(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Oc.currentPopupAction=null}pollUserCancellation(){const t=()=>{var e,n;if((n=(e=this.authWindow)==null?void 0:e.window)!=null&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Xa(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,QJ.get())};t()}}Oc.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HJ="pendingRedirect",Mm=new Map;class VJ extends A3{constructor(t,e,n=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,n),this.eventId=null}async execute(){let t=Mm.get(this.auth._key());if(!t){try{const n=await $J(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(n)}catch(e){t=()=>Promise.reject(e)}Mm.set(this.auth._key(),t)}return this.bypassAuthState||Mm.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const e=await this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function $J(r,t){const e=KJ(t),n=GJ(r);if(!await n._isAvailable())return!1;const i=await n._get(e)==="true";return await n._remove(e),i}function jJ(r,t){Mm.set(r._key(),t)}function GJ(r){return _A(r._redirectPersistence)}function KJ(r){return Dm(HJ,r.config.apiKey,r.name)}async function zJ(r,t,e=!1){if(da(r.app))return Promise.reject(kA(r));const n=oc(r),i=o3(n,t),a=await new VJ(n,i,e).execute();return a&&!e&&(delete a.user._redirectEventId,await n._persistUserIfCurrent(a.user),await n._setRedirectUser(null,t)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qJ=600*1e3;class WJ{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(t,n)&&(e=!0,this.sendToConsumer(t,n),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!YJ(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){var n;if(t.error&&!l3(t)){const i=((n=t.error.code)==null?void 0:n.split("auth/")[1])||"internal-error";e.onError(Xa(this.auth,i))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const n=e.eventId===null||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&n}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=qJ&&this.cachedEventUids.clear(),this.cachedEventUids.has(KE(t))}saveEventToCache(t){this.cachedEventUids.add(KE(t)),this.lastProcessedEventTime=Date.now()}}function KE(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(t=>t).join("-")}function l3({type:r,error:t}){return r==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function YJ(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return l3(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XJ(r,t={}){return ac(r,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JJ=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ZJ=/^https?/;async function tZ(r){if(r.config.emulator)return;const{authorizedDomains:t}=await XJ(r);for(const e of t)try{if(eZ(e))return}catch{}Ma(r,"unauthorized-domain")}function eZ(r){const t=X1(),{protocol:e,hostname:n}=new URL(t);if(r.startsWith("chrome-extension://")){const a=new URL(r);return a.hostname===""&&n===""?e==="chrome-extension:"&&r.replace("chrome-extension://","")===t.replace("chrome-extension://",""):e==="chrome-extension:"&&a.hostname===n}if(!ZJ.test(e))return!1;if(JJ.test(r))return n===r;const i=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rZ=new dg(3e4,6e4);function zE(){const r=Lo().___jsl;if(r!=null&&r.H){for(const t of Object.keys(r.H))if(r.H[t].r=r.H[t].r||[],r.H[t].L=r.H[t].L||[],r.H[t].r=[...r.H[t].L],r.CP)for(let e=0;e<r.CP.length;e++)r.CP[e]=null}}function nZ(r){return new Promise((t,e)=>{var i,s,a;function n(){zE(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{zE(),e(Xa(r,"network-request-failed"))},timeout:rZ.get()})}if((s=(i=Lo().gapi)==null?void 0:i.iframes)!=null&&s.Iframe)t(gapi.iframes.getContext());else if((a=Lo().gapi)!=null&&a.load)n();else{const o=qX("iframefcb");return Lo()[o]=()=>{gapi.load?n():e(Xa(r,"network-request-failed"))},zF(`${zX()}?onload=${o}`).catch(A=>e(A))}}).catch(t=>{throw Rm=null,t})}let Rm=null;function iZ(r){return Rm=Rm||nZ(r),Rm}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sZ=new dg(5e3,15e3),aZ="__/auth/iframe",oZ="emulator/auth/iframe",AZ={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},lZ=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function cZ(r){const t=r.config;Qe(t.authDomain,r,"auth-domain-config-required");const e=t.emulator?w2(t,oZ):`https://${r.config.authDomain}/${aZ}`,n={apiKey:t.apiKey,appName:r.name,v:Gd},i=lZ.get(r.config.apiHost);i&&(n.eid=i);const s=r._getFrameworks();return s.length&&(n.fw=s.join(",")),`${e}?${ug(n).slice(1)}`}async function uZ(r){const t=await iZ(r),e=Lo().gapi;return Qe(e,r,"internal-error"),t.open({where:document.body,url:cZ(r),messageHandlersFilter:e.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:AZ,dontclear:!0},n=>new Promise(async(i,s)=>{await n.restyle({setHideOnLeave:!1});const a=Xa(r,"network-request-failed"),o=Lo().setTimeout(()=>{s(a)},sZ.get());function A(){Lo().clearTimeout(o),i(n)}n.ping(A).then(A,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dZ={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},hZ=500,fZ=600,gZ="_blank",pZ="http://localhost";class qE{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function mZ(r,t,e,n=hZ,i=fZ){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-n)/2,0).toString();let o="";const A={...dZ,width:n.toString(),height:i.toString(),top:s,left:a},l=fs().toLowerCase();e&&(o=OF(l)?gZ:e),RF(l)&&(t=t||pZ,A.scrollbars="yes");const c=Object.entries(A).reduce((h,[d,m])=>`${h}${d}=${m},`,"");if(RX(l)&&o!=="_self")return bZ(t||"",o),new qE(null);const u=window.open(t||"",o,c);Qe(u,r,"popup-blocked");try{u.focus()}catch{}return new qE(u)}function bZ(r,t){const e=document.createElement("a");e.href=r,e.target=t;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),e.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yZ="__/auth/handler",wZ="emulator/auth/handler",vZ=encodeURIComponent("fac");async function WE(r,t,e,n,i,s){Qe(r.config.authDomain,r,"auth-domain-config-required"),Qe(r.config.apiKey,r,"invalid-api-key");const a={apiKey:r.config.apiKey,appName:r.name,authType:e,redirectUrl:n,v:Gd,eventId:i};if(t instanceof C2){t.setDefaultLanguage(r.languageCode),a.providerId=t.providerId||"",nY(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[c,u]of Object.entries({}))a[c]=u}if(t instanceof fg){const c=t.getScopes().filter(u=>u!=="");c.length>0&&(a.scopes=c.join(","))}r.tenantId&&(a.tid=r.tenantId);const o=a;for(const c of Object.keys(o))o[c]===void 0&&delete o[c];const A=await r._getAppCheckToken(),l=A?`#${vZ}=${encodeURIComponent(A)}`:"";return`${xZ(r)}?${ug(o).slice(1)}${l}`}function xZ({config:r}){return r.emulator?w2(r,wZ):`https://${r.authDomain}/${yZ}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ew="webStorageSupport";class _Z{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=r3,this._completeRedirectFn=zJ,this._overrideRedirectResult=jJ}async _openPopup(t,e,n,i){var a;NA((a=this.eventManagers[t._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const s=await WE(t,e,n,X1(),i);return mZ(t,s,E2())}async _openRedirect(t,e,n,i){await this._originValidation(t);const s=await WE(t,e,n,X1(),i);return EJ(s),new Promise(()=>{})}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:i,promise:s}=this.eventManagers[e];return i?Promise.resolve(i):(NA(s,"If manager is not set, promise should be"),s)}const n=this.initAndGetManager(t);return this.eventManagers[e]={promise:n},n.catch(()=>{delete this.eventManagers[e]}),n}async initAndGetManager(t){const e=await uZ(t),n=new WJ(t);return e.register("authEvent",i=>(Qe(i==null?void 0:i.authEvent,t,"invalid-auth-event"),{status:n.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:n},this.iframes[t._key()]=e,n}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(Ew,{type:Ew},i=>{var a;const s=(a=i==null?void 0:i[0])==null?void 0:a[Ew];s!==void 0&&e(!!s),Ma(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=tZ(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return GF()||QF()||x2()}}const BZ=_Z;var YE="@firebase/auth",XE="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CZ{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)==null?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged(n=>{t((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){Qe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EZ(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function SZ(r){kd(new ou("auth",(t,{options:e})=>{const n=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=n.options;Qe(a&&!a.includes(":"),"invalid-api-key",{appName:n.name});const A={apiKey:a,authDomain:o,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:KF(r)},l=new jX(n,i,s,A);return tJ(l,e),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider("auth-internal").initialize()})),kd(new ou("auth-internal",t=>{const e=oc(t.getProvider("auth").getImmediate());return(n=>new CZ(n))(e)},"PRIVATE").setInstantiationMode("EXPLICIT")),Rl(YE,XE,EZ(r)),Rl(YE,XE,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kZ=300,IZ=xF("authIdTokenMaxAge")||kZ;let JE=null;const TZ=r=>async t=>{const e=t&&await t.getIdTokenResult(),n=e&&(new Date().getTime()-Date.parse(e.issuedAtTime))/1e3;if(n&&n>IZ)return;const i=e==null?void 0:e.token;JE!==i&&(JE=i,await fetch(r,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function FZ(r=kF()){const t=m2(r,"auth");if(t.isInitialized())return t.getImmediate();const e=ZX(r,{popupRedirectResolver:BZ,persistence:[NJ,_J,r3]}),n=xF("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(n,location.origin);if(location.origin===s.origin){const a=TZ(s.toString());bJ(e,a,()=>a(e.currentUser)),mJ(e,o=>a(o))}}const i=wF("auth");return i&&eJ(e,`http://${i}`),e}function LZ(){var r;return((r=document.getElementsByTagName("head"))==null?void 0:r[0])??document}GX({loadJS(r){return new Promise((t,e)=>{const n=document.createElement("script");n.setAttribute("src",r),n.onload=t,n.onerror=i=>{const s=Xa("internal-error");s.customData=i,e(s)},n.type="text/javascript",n.charset="UTF-8",LZ().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});SZ("Browser");var ZE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ql,c3;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(U,x){function v(){}v.prototype=x.prototype,U.F=x.prototype,U.prototype=new v,U.prototype.constructor=U,U.D=function(T,E,_){for(var F=Array(arguments.length-2),k=2;k<arguments.length;k++)F[k-2]=arguments[k];return x.prototype[E].apply(T,F)}}function e(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(n,e),n.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(U,x,v){v||(v=0);const T=Array(16);if(typeof x=="string")for(var E=0;E<16;++E)T[E]=x.charCodeAt(v++)|x.charCodeAt(v++)<<8|x.charCodeAt(v++)<<16|x.charCodeAt(v++)<<24;else for(E=0;E<16;++E)T[E]=x[v++]|x[v++]<<8|x[v++]<<16|x[v++]<<24;x=U.g[0],v=U.g[1],E=U.g[2];let _=U.g[3],F;F=x+(_^v&(E^_))+T[0]+3614090360&4294967295,x=v+(F<<7&4294967295|F>>>25),F=_+(E^x&(v^E))+T[1]+3905402710&4294967295,_=x+(F<<12&4294967295|F>>>20),F=E+(v^_&(x^v))+T[2]+606105819&4294967295,E=_+(F<<17&4294967295|F>>>15),F=v+(x^E&(_^x))+T[3]+3250441966&4294967295,v=E+(F<<22&4294967295|F>>>10),F=x+(_^v&(E^_))+T[4]+4118548399&4294967295,x=v+(F<<7&4294967295|F>>>25),F=_+(E^x&(v^E))+T[5]+1200080426&4294967295,_=x+(F<<12&4294967295|F>>>20),F=E+(v^_&(x^v))+T[6]+2821735955&4294967295,E=_+(F<<17&4294967295|F>>>15),F=v+(x^E&(_^x))+T[7]+4249261313&4294967295,v=E+(F<<22&4294967295|F>>>10),F=x+(_^v&(E^_))+T[8]+1770035416&4294967295,x=v+(F<<7&4294967295|F>>>25),F=_+(E^x&(v^E))+T[9]+2336552879&4294967295,_=x+(F<<12&4294967295|F>>>20),F=E+(v^_&(x^v))+T[10]+4294925233&4294967295,E=_+(F<<17&4294967295|F>>>15),F=v+(x^E&(_^x))+T[11]+2304563134&4294967295,v=E+(F<<22&4294967295|F>>>10),F=x+(_^v&(E^_))+T[12]+1804603682&4294967295,x=v+(F<<7&4294967295|F>>>25),F=_+(E^x&(v^E))+T[13]+4254626195&4294967295,_=x+(F<<12&4294967295|F>>>20),F=E+(v^_&(x^v))+T[14]+2792965006&4294967295,E=_+(F<<17&4294967295|F>>>15),F=v+(x^E&(_^x))+T[15]+1236535329&4294967295,v=E+(F<<22&4294967295|F>>>10),F=x+(E^_&(v^E))+T[1]+4129170786&4294967295,x=v+(F<<5&4294967295|F>>>27),F=_+(v^E&(x^v))+T[6]+3225465664&4294967295,_=x+(F<<9&4294967295|F>>>23),F=E+(x^v&(_^x))+T[11]+643717713&4294967295,E=_+(F<<14&4294967295|F>>>18),F=v+(_^x&(E^_))+T[0]+3921069994&4294967295,v=E+(F<<20&4294967295|F>>>12),F=x+(E^_&(v^E))+T[5]+3593408605&4294967295,x=v+(F<<5&4294967295|F>>>27),F=_+(v^E&(x^v))+T[10]+38016083&4294967295,_=x+(F<<9&4294967295|F>>>23),F=E+(x^v&(_^x))+T[15]+3634488961&4294967295,E=_+(F<<14&4294967295|F>>>18),F=v+(_^x&(E^_))+T[4]+3889429448&4294967295,v=E+(F<<20&4294967295|F>>>12),F=x+(E^_&(v^E))+T[9]+568446438&4294967295,x=v+(F<<5&4294967295|F>>>27),F=_+(v^E&(x^v))+T[14]+3275163606&4294967295,_=x+(F<<9&4294967295|F>>>23),F=E+(x^v&(_^x))+T[3]+4107603335&4294967295,E=_+(F<<14&4294967295|F>>>18),F=v+(_^x&(E^_))+T[8]+1163531501&4294967295,v=E+(F<<20&4294967295|F>>>12),F=x+(E^_&(v^E))+T[13]+2850285829&4294967295,x=v+(F<<5&4294967295|F>>>27),F=_+(v^E&(x^v))+T[2]+4243563512&4294967295,_=x+(F<<9&4294967295|F>>>23),F=E+(x^v&(_^x))+T[7]+1735328473&4294967295,E=_+(F<<14&4294967295|F>>>18),F=v+(_^x&(E^_))+T[12]+2368359562&4294967295,v=E+(F<<20&4294967295|F>>>12),F=x+(v^E^_)+T[5]+4294588738&4294967295,x=v+(F<<4&4294967295|F>>>28),F=_+(x^v^E)+T[8]+2272392833&4294967295,_=x+(F<<11&4294967295|F>>>21),F=E+(_^x^v)+T[11]+1839030562&4294967295,E=_+(F<<16&4294967295|F>>>16),F=v+(E^_^x)+T[14]+4259657740&4294967295,v=E+(F<<23&4294967295|F>>>9),F=x+(v^E^_)+T[1]+2763975236&4294967295,x=v+(F<<4&4294967295|F>>>28),F=_+(x^v^E)+T[4]+1272893353&4294967295,_=x+(F<<11&4294967295|F>>>21),F=E+(_^x^v)+T[7]+4139469664&4294967295,E=_+(F<<16&4294967295|F>>>16),F=v+(E^_^x)+T[10]+3200236656&4294967295,v=E+(F<<23&4294967295|F>>>9),F=x+(v^E^_)+T[13]+681279174&4294967295,x=v+(F<<4&4294967295|F>>>28),F=_+(x^v^E)+T[0]+3936430074&4294967295,_=x+(F<<11&4294967295|F>>>21),F=E+(_^x^v)+T[3]+3572445317&4294967295,E=_+(F<<16&4294967295|F>>>16),F=v+(E^_^x)+T[6]+76029189&4294967295,v=E+(F<<23&4294967295|F>>>9),F=x+(v^E^_)+T[9]+3654602809&4294967295,x=v+(F<<4&4294967295|F>>>28),F=_+(x^v^E)+T[12]+3873151461&4294967295,_=x+(F<<11&4294967295|F>>>21),F=E+(_^x^v)+T[15]+530742520&4294967295,E=_+(F<<16&4294967295|F>>>16),F=v+(E^_^x)+T[2]+3299628645&4294967295,v=E+(F<<23&4294967295|F>>>9),F=x+(E^(v|~_))+T[0]+4096336452&4294967295,x=v+(F<<6&4294967295|F>>>26),F=_+(v^(x|~E))+T[7]+1126891415&4294967295,_=x+(F<<10&4294967295|F>>>22),F=E+(x^(_|~v))+T[14]+2878612391&4294967295,E=_+(F<<15&4294967295|F>>>17),F=v+(_^(E|~x))+T[5]+4237533241&4294967295,v=E+(F<<21&4294967295|F>>>11),F=x+(E^(v|~_))+T[12]+1700485571&4294967295,x=v+(F<<6&4294967295|F>>>26),F=_+(v^(x|~E))+T[3]+2399980690&4294967295,_=x+(F<<10&4294967295|F>>>22),F=E+(x^(_|~v))+T[10]+4293915773&4294967295,E=_+(F<<15&4294967295|F>>>17),F=v+(_^(E|~x))+T[1]+2240044497&4294967295,v=E+(F<<21&4294967295|F>>>11),F=x+(E^(v|~_))+T[8]+1873313359&4294967295,x=v+(F<<6&4294967295|F>>>26),F=_+(v^(x|~E))+T[15]+4264355552&4294967295,_=x+(F<<10&4294967295|F>>>22),F=E+(x^(_|~v))+T[6]+2734768916&4294967295,E=_+(F<<15&4294967295|F>>>17),F=v+(_^(E|~x))+T[13]+1309151649&4294967295,v=E+(F<<21&4294967295|F>>>11),F=x+(E^(v|~_))+T[4]+4149444226&4294967295,x=v+(F<<6&4294967295|F>>>26),F=_+(v^(x|~E))+T[11]+3174756917&4294967295,_=x+(F<<10&4294967295|F>>>22),F=E+(x^(_|~v))+T[2]+718787259&4294967295,E=_+(F<<15&4294967295|F>>>17),F=v+(_^(E|~x))+T[9]+3951481745&4294967295,U.g[0]=U.g[0]+x&4294967295,U.g[1]=U.g[1]+(E+(F<<21&4294967295|F>>>11))&4294967295,U.g[2]=U.g[2]+E&4294967295,U.g[3]=U.g[3]+_&4294967295}n.prototype.v=function(U,x){x===void 0&&(x=U.length);const v=x-this.blockSize,T=this.C;let E=this.h,_=0;for(;_<x;){if(E==0)for(;_<=v;)i(this,U,_),_+=this.blockSize;if(typeof U=="string"){for(;_<x;)if(T[E++]=U.charCodeAt(_++),E==this.blockSize){i(this,T),E=0;break}}else for(;_<x;)if(T[E++]=U[_++],E==this.blockSize){i(this,T),E=0;break}}this.h=E,this.o+=x},n.prototype.A=function(){var U=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);U[0]=128;for(var x=1;x<U.length-8;++x)U[x]=0;x=this.o*8;for(var v=U.length-8;v<U.length;++v)U[v]=x&255,x/=256;for(this.v(U),U=Array(16),x=0,v=0;v<4;++v)for(let T=0;T<32;T+=8)U[x++]=this.g[v]>>>T&255;return U};function s(U,x){var v=o;return Object.prototype.hasOwnProperty.call(v,U)?v[U]:v[U]=x(U)}function a(U,x){this.h=x;const v=[];let T=!0;for(let E=U.length-1;E>=0;E--){const _=U[E]|0;T&&_==x||(v[E]=_,T=!1)}this.g=v}var o={};function A(U){return-128<=U&&U<128?s(U,function(x){return new a([x|0],x<0?-1:0)}):new a([U|0],U<0?-1:0)}function l(U){if(isNaN(U)||!isFinite(U))return u;if(U<0)return b(l(-U));const x=[];let v=1;for(let T=0;U>=v;T++)x[T]=U/v|0,v*=4294967296;return new a(x,0)}function c(U,x){if(U.length==0)throw Error("number format error: empty string");if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(U.charAt(0)=="-")return b(c(U.substring(1),x));if(U.indexOf("-")>=0)throw Error('number format error: interior "-" character');const v=l(Math.pow(x,8));let T=u;for(let _=0;_<U.length;_+=8){var E=Math.min(8,U.length-_);const F=parseInt(U.substring(_,_+E),x);E<8?(E=l(Math.pow(x,E)),T=T.j(E).add(l(F))):(T=T.j(v),T=T.add(l(F)))}return T}var u=A(0),h=A(1),d=A(16777216);r=a.prototype,r.m=function(){if(f(this))return-b(this).m();let U=0,x=1;for(let v=0;v<this.g.length;v++){const T=this.i(v);U+=(T>=0?T:4294967296+T)*x,x*=4294967296}return U},r.toString=function(U){if(U=U||10,U<2||36<U)throw Error("radix out of range: "+U);if(m(this))return"0";if(f(this))return"-"+b(this).toString(U);const x=l(Math.pow(U,6));var v=this;let T="";for(;;){const E=C(v,x).g;v=y(v,E.j(x));let _=((v.g.length>0?v.g[0]:v.h)>>>0).toString(U);if(v=E,m(v))return _+T;for(;_.length<6;)_="0"+_;T=_+T}},r.i=function(U){return U<0?0:U<this.g.length?this.g[U]:this.h};function m(U){if(U.h!=0)return!1;for(let x=0;x<U.g.length;x++)if(U.g[x]!=0)return!1;return!0}function f(U){return U.h==-1}r.l=function(U){return U=y(this,U),f(U)?-1:m(U)?0:1};function b(U){const x=U.g.length,v=[];for(let T=0;T<x;T++)v[T]=~U.g[T];return new a(v,~U.h).add(h)}r.abs=function(){return f(this)?b(this):this},r.add=function(U){const x=Math.max(this.g.length,U.g.length),v=[];let T=0;for(let E=0;E<=x;E++){let _=T+(this.i(E)&65535)+(U.i(E)&65535),F=(_>>>16)+(this.i(E)>>>16)+(U.i(E)>>>16);T=F>>>16,_&=65535,F&=65535,v[E]=F<<16|_}return new a(v,v[v.length-1]&-2147483648?-1:0)};function y(U,x){return U.add(b(x))}r.j=function(U){if(m(this)||m(U))return u;if(f(this))return f(U)?b(this).j(b(U)):b(b(this).j(U));if(f(U))return b(this.j(b(U)));if(this.l(d)<0&&U.l(d)<0)return l(this.m()*U.m());const x=this.g.length+U.g.length,v=[];for(var T=0;T<2*x;T++)v[T]=0;for(T=0;T<this.g.length;T++)for(let E=0;E<U.g.length;E++){const _=this.i(T)>>>16,F=this.i(T)&65535,k=U.i(E)>>>16,Z=U.i(E)&65535;v[2*T+2*E]+=F*Z,B(v,2*T+2*E),v[2*T+2*E+1]+=_*Z,B(v,2*T+2*E+1),v[2*T+2*E+1]+=F*k,B(v,2*T+2*E+1),v[2*T+2*E+2]+=_*k,B(v,2*T+2*E+2)}for(U=0;U<x;U++)v[U]=v[2*U+1]<<16|v[2*U];for(U=x;U<2*x;U++)v[U]=0;return new a(v,0)};function B(U,x){for(;(U[x]&65535)!=U[x];)U[x+1]+=U[x]>>>16,U[x]&=65535,x++}function I(U,x){this.g=U,this.h=x}function C(U,x){if(m(x))throw Error("division by zero");if(m(U))return new I(u,u);if(f(U))return x=C(b(U),x),new I(b(x.g),b(x.h));if(f(x))return x=C(U,b(x)),new I(b(x.g),x.h);if(U.g.length>30){if(f(U)||f(x))throw Error("slowDivide_ only works with positive integers.");for(var v=h,T=x;T.l(U)<=0;)v=N(v),T=N(T);var E=R(v,1),_=R(T,1);for(T=R(T,2),v=R(v,2);!m(T);){var F=_.add(T);F.l(U)<=0&&(E=E.add(v),_=F),T=R(T,1),v=R(v,1)}return x=y(U,E.j(x)),new I(E,x)}for(E=u;U.l(x)>=0;){for(v=Math.max(1,Math.floor(U.m()/x.m())),T=Math.ceil(Math.log(v)/Math.LN2),T=T<=48?1:Math.pow(2,T-48),_=l(v),F=_.j(x);f(F)||F.l(U)>0;)v-=T,_=l(v),F=_.j(x);m(_)&&(_=h),E=E.add(_),U=y(U,F)}return new I(E,U)}r.B=function(U){return C(this,U).h},r.and=function(U){const x=Math.max(this.g.length,U.g.length),v=[];for(let T=0;T<x;T++)v[T]=this.i(T)&U.i(T);return new a(v,this.h&U.h)},r.or=function(U){const x=Math.max(this.g.length,U.g.length),v=[];for(let T=0;T<x;T++)v[T]=this.i(T)|U.i(T);return new a(v,this.h|U.h)},r.xor=function(U){const x=Math.max(this.g.length,U.g.length),v=[];for(let T=0;T<x;T++)v[T]=this.i(T)^U.i(T);return new a(v,this.h^U.h)};function N(U){const x=U.g.length+1,v=[];for(let T=0;T<x;T++)v[T]=U.i(T)<<1|U.i(T-1)>>>31;return new a(v,U.h)}function R(U,x){const v=x>>5;x%=32;const T=U.g.length-v,E=[];for(let _=0;_<T;_++)E[_]=x>0?U.i(_+v)>>>x|U.i(_+v+1)<<32-x:U.i(_+v);return new a(E,U.h)}n.prototype.digest=n.prototype.A,n.prototype.reset=n.prototype.u,n.prototype.update=n.prototype.v,c3=n,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=l,a.fromString=c,Ql=a}).apply(typeof ZE<"u"?ZE:typeof self<"u"?self:typeof window<"u"?window:{});var rm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var u3,zh,d3,Qm,ev,h3,f3,g3;(function(){var r,t=Object.defineProperty;function e(p){p=[typeof globalThis=="object"&&globalThis,p,typeof window=="object"&&window,typeof self=="object"&&self,typeof rm=="object"&&rm];for(var M=0;M<p.length;++M){var H=p[M];if(H&&H.Math==Math)return H}throw Error("Cannot find global object")}var n=e(this);function i(p,M){if(M)t:{var H=n;p=p.split(".");for(var ot=0;ot<p.length-1;ot++){var Tt=p[ot];if(!(Tt in H))break t;H=H[Tt]}p=p[p.length-1],ot=H[p],M=M(ot),M!=ot&&M!=null&&t(H,p,{configurable:!0,writable:!0,value:M})}}i("Symbol.dispose",function(p){return p||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(p){return p||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(p){return p||function(M){var H=[],ot;for(ot in M)Object.prototype.hasOwnProperty.call(M,ot)&&H.push([ot,M[ot]]);return H}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},a=this||self;function o(p){var M=typeof p;return M=="object"&&p!=null||M=="function"}function A(p,M,H){return p.call.apply(p.bind,arguments)}function l(p,M,H){return l=A,l.apply(null,arguments)}function c(p,M){var H=Array.prototype.slice.call(arguments,1);return function(){var ot=H.slice();return ot.push.apply(ot,arguments),p.apply(this,ot)}}function u(p,M){function H(){}H.prototype=M.prototype,p.Z=M.prototype,p.prototype=new H,p.prototype.constructor=p,p.Ob=function(ot,Tt,Nt){for(var ne=Array(arguments.length-2),je=2;je<arguments.length;je++)ne[je-2]=arguments[je];return M.prototype[Tt].apply(ot,ne)}}var h=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?p=>p&&AsyncContext.Snapshot.wrap(p):p=>p;function d(p){const M=p.length;if(M>0){const H=Array(M);for(let ot=0;ot<M;ot++)H[ot]=p[ot];return H}return[]}function m(p,M){for(let ot=1;ot<arguments.length;ot++){const Tt=arguments[ot];var H=typeof Tt;if(H=H!="object"?H:Tt?Array.isArray(Tt)?"array":H:"null",H=="array"||H=="object"&&typeof Tt.length=="number"){H=p.length||0;const Nt=Tt.length||0;p.length=H+Nt;for(let ne=0;ne<Nt;ne++)p[H+ne]=Tt[ne]}else p.push(Tt)}}class f{constructor(M,H){this.i=M,this.j=H,this.h=0,this.g=null}get(){let M;return this.h>0?(this.h--,M=this.g,this.g=M.next,M.next=null):M=this.i(),M}}function b(p){a.setTimeout(()=>{throw p},0)}function y(){var p=U;let M=null;return p.g&&(M=p.g,p.g=p.g.next,p.g||(p.h=null),M.next=null),M}class B{constructor(){this.h=this.g=null}add(M,H){const ot=I.get();ot.set(M,H),this.h?this.h.next=ot:this.g=ot,this.h=ot}}var I=new f(()=>new C,p=>p.reset());class C{constructor(){this.next=this.g=this.h=null}set(M,H){this.h=M,this.g=H,this.next=null}reset(){this.next=this.g=this.h=null}}let N,R=!1,U=new B,x=()=>{const p=Promise.resolve(void 0);N=()=>{p.then(v)}};function v(){for(var p;p=y();){try{p.h.call(p.g)}catch(H){b(H)}var M=I;M.j(p),M.h<100&&(M.h++,p.next=M.g,M.g=p)}R=!1}function T(){this.u=this.u,this.C=this.C}T.prototype.u=!1,T.prototype.dispose=function(){this.u||(this.u=!0,this.N())},T.prototype[Symbol.dispose]=function(){this.dispose()},T.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function E(p,M){this.type=p,this.g=this.target=M,this.defaultPrevented=!1}E.prototype.h=function(){this.defaultPrevented=!0};var _=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var p=!1,M=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const H=()=>{};a.addEventListener("test",H,M),a.removeEventListener("test",H,M)}catch{}return p})();function F(p){return/^[\s\xa0]*$/.test(p)}function k(p,M){E.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p&&this.init(p,M)}u(k,E),k.prototype.init=function(p,M){const H=this.type=p.type,ot=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;this.target=p.target||p.srcElement,this.g=M,M=p.relatedTarget,M||(H=="mouseover"?M=p.fromElement:H=="mouseout"&&(M=p.toElement)),this.relatedTarget=M,ot?(this.clientX=ot.clientX!==void 0?ot.clientX:ot.pageX,this.clientY=ot.clientY!==void 0?ot.clientY:ot.pageY,this.screenX=ot.screenX||0,this.screenY=ot.screenY||0):(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType=p.pointerType,this.state=p.state,this.i=p,p.defaultPrevented&&k.Z.h.call(this)},k.prototype.h=function(){k.Z.h.call(this);const p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var Z="closure_listenable_"+(Math.random()*1e6|0),ut=0;function nt(p,M,H,ot,Tt){this.listener=p,this.proxy=null,this.src=M,this.type=H,this.capture=!!ot,this.ha=Tt,this.key=++ut,this.da=this.fa=!1}function j(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function G(p,M,H){for(const ot in p)M.call(H,p[ot],ot,p)}function pt(p,M){for(const H in p)M.call(void 0,p[H],H,p)}function q(p){const M={};for(const H in p)M[H]=p[H];return M}const L="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(p,M){let H,ot;for(let Tt=1;Tt<arguments.length;Tt++){ot=arguments[Tt];for(H in ot)p[H]=ot[H];for(let Nt=0;Nt<L.length;Nt++)H=L[Nt],Object.prototype.hasOwnProperty.call(ot,H)&&(p[H]=ot[H])}}function V(p){this.src=p,this.g={},this.h=0}V.prototype.add=function(p,M,H,ot,Tt){const Nt=p.toString();p=this.g[Nt],p||(p=this.g[Nt]=[],this.h++);const ne=At(p,M,ot,Tt);return ne>-1?(M=p[ne],H||(M.fa=!1)):(M=new nt(M,this.src,Nt,!!ot,Tt),M.fa=H,p.push(M)),M};function X(p,M){const H=M.type;if(H in p.g){var ot=p.g[H],Tt=Array.prototype.indexOf.call(ot,M,void 0),Nt;(Nt=Tt>=0)&&Array.prototype.splice.call(ot,Tt,1),Nt&&(j(M),p.g[H].length==0&&(delete p.g[H],p.h--))}}function At(p,M,H,ot){for(let Tt=0;Tt<p.length;++Tt){const Nt=p[Tt];if(!Nt.da&&Nt.listener==M&&Nt.capture==!!H&&Nt.ha==ot)return Tt}return-1}var et="closure_lm_"+(Math.random()*1e6|0),st={};function dt(p,M,H,ot,Tt){if(Array.isArray(M)){for(let Nt=0;Nt<M.length;Nt++)dt(p,M[Nt],H,ot,Tt);return null}return H=W(H),p&&p[Z]?p.J(M,H,o(ot)?!!ot.capture:!1,Tt):vt(p,M,H,!1,ot,Tt)}function vt(p,M,H,ot,Tt,Nt){if(!M)throw Error("Invalid event type");const ne=o(Tt)?!!Tt.capture:!!Tt;let je=bt(p);if(je||(p[et]=je=new V(p)),H=je.add(M,H,ot,ne,Nt),H.proxy)return H;if(ot=_t(),H.proxy=ot,ot.src=p,ot.listener=H,p.addEventListener)_||(Tt=ne),Tt===void 0&&(Tt=!1),p.addEventListener(M.toString(),ot,Tt);else if(p.attachEvent)p.attachEvent(D(M.toString()),ot);else if(p.addListener&&p.removeListener)p.addListener(ot);else throw Error("addEventListener and attachEvent are unavailable.");return H}function _t(){function p(H){return M.call(p.src,p.listener,H)}const M=$;return p}function Mt(p,M,H,ot,Tt){if(Array.isArray(M))for(var Nt=0;Nt<M.length;Nt++)Mt(p,M[Nt],H,ot,Tt);else ot=o(ot)?!!ot.capture:!!ot,H=W(H),p&&p[Z]?(p=p.i,Nt=String(M).toString(),Nt in p.g&&(M=p.g[Nt],H=At(M,H,ot,Tt),H>-1&&(j(M[H]),Array.prototype.splice.call(M,H,1),M.length==0&&(delete p.g[Nt],p.h--)))):p&&(p=bt(p))&&(M=p.g[M.toString()],p=-1,M&&(p=At(M,H,ot,Tt)),(H=p>-1?M[p]:null)&&Ot(H))}function Ot(p){if(typeof p!="number"&&p&&!p.da){var M=p.src;if(M&&M[Z])X(M.i,p);else{var H=p.type,ot=p.proxy;M.removeEventListener?M.removeEventListener(H,ot,p.capture):M.detachEvent?M.detachEvent(D(H),ot):M.addListener&&M.removeListener&&M.removeListener(ot),(H=bt(M))?(X(H,p),H.h==0&&(H.src=null,M[et]=null)):j(p)}}}function D(p){return p in st?st[p]:st[p]="on"+p}function $(p,M){if(p.da)p=!0;else{M=new k(M,this);const H=p.listener,ot=p.ha||p.src;p.fa&&Ot(p),p=H.call(ot,M)}return p}function bt(p){return p=p[et],p instanceof V?p:null}var rt="__closure_events_fn_"+(Math.random()*1e9>>>0);function W(p){return typeof p=="function"?p:(p[rt]||(p[rt]=function(M){return p.handleEvent(M)}),p[rt])}function at(){T.call(this),this.i=new V(this),this.M=this,this.G=null}u(at,T),at.prototype[Z]=!0,at.prototype.removeEventListener=function(p,M,H,ot){Mt(this,p,M,H,ot)};function Ct(p,M){var H,ot=p.G;if(ot)for(H=[];ot;ot=ot.G)H.push(ot);if(p=p.M,ot=M.type||M,typeof M=="string")M=new E(M,p);else if(M instanceof E)M.target=M.target||p;else{var Tt=M;M=new E(ot,p),O(M,Tt)}Tt=!0;let Nt,ne;if(H)for(ne=H.length-1;ne>=0;ne--)Nt=M.g=H[ne],Tt=xt(Nt,ot,!0,M)&&Tt;if(Nt=M.g=p,Tt=xt(Nt,ot,!0,M)&&Tt,Tt=xt(Nt,ot,!1,M)&&Tt,H)for(ne=0;ne<H.length;ne++)Nt=M.g=H[ne],Tt=xt(Nt,ot,!1,M)&&Tt}at.prototype.N=function(){if(at.Z.N.call(this),this.i){var p=this.i;for(const M in p.g){const H=p.g[M];for(let ot=0;ot<H.length;ot++)j(H[ot]);delete p.g[M],p.h--}}this.G=null},at.prototype.J=function(p,M,H,ot){return this.i.add(String(p),M,!1,H,ot)},at.prototype.K=function(p,M,H,ot){return this.i.add(String(p),M,!0,H,ot)};function xt(p,M,H,ot){if(M=p.i.g[String(M)],!M)return!0;M=M.concat();let Tt=!0;for(let Nt=0;Nt<M.length;++Nt){const ne=M[Nt];if(ne&&!ne.da&&ne.capture==H){const je=ne.listener,qr=ne.ha||ne.src;ne.fa&&X(p.i,ne),Tt=je.call(qr,ot)!==!1&&Tt}}return Tt&&!ot.defaultPrevented}function yt(p,M){if(typeof p!="function")if(p&&typeof p.handleEvent=="function")p=l(p.handleEvent,p);else throw Error("Invalid listener argument");return Number(M)>2147483647?-1:a.setTimeout(p,M||0)}function kt(p){p.g=yt(()=>{p.g=null,p.i&&(p.i=!1,kt(p))},p.l);const M=p.h;p.h=null,p.m.apply(null,M)}class Rt extends T{constructor(M,H){super(),this.m=M,this.l=H,this.h=null,this.i=!1,this.g=null}j(M){this.h=arguments,this.g?this.i=!0:kt(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Lt(p){T.call(this),this.h=p,this.g={}}u(Lt,T);var Qt=[];function se(p){G(p.g,function(M,H){this.g.hasOwnProperty(H)&&Ot(M)},p),p.g={}}Lt.prototype.N=function(){Lt.Z.N.call(this),se(this)},Lt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var te=a.JSON.stringify,ae=a.JSON.parse,ve=class{stringify(p){return a.JSON.stringify(p,void 0)}parse(p){return a.JSON.parse(p,void 0)}};function ie(){}function Ae(){}var ee={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function re(){E.call(this,"d")}u(re,E);function he(){E.call(this,"c")}u(he,E);var Fe={},xe=null;function De(){return xe=xe||new at}Fe.Ia="serverreachability";function Le(p){E.call(this,Fe.Ia,p)}u(Le,E);function or(p){const M=De();Ct(M,new Le(M))}Fe.STAT_EVENT="statevent";function kr(p,M){E.call(this,Fe.STAT_EVENT,p),this.stat=M}u(kr,E);function Se(p){const M=De();Ct(M,new kr(M,p))}Fe.Ja="timingevent";function ke(p,M){E.call(this,Fe.Ja,p),this.size=M}u(ke,E);function rr(p,M){if(typeof p!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){p()},M)}function ei(){this.g=!0}ei.prototype.ua=function(){this.g=!1};function _n(p,M,H,ot,Tt,Nt){p.info(function(){if(p.g)if(Nt){var ne="",je=Nt.split("&");for(let dr=0;dr<je.length;dr++){var qr=je[dr].split("=");if(qr.length>1){const rn=qr[0];qr=qr[1];const Ei=rn.split("_");ne=Ei.length>=2&&Ei[1]=="type"?ne+(rn+"="+qr+"&"):ne+(rn+"=redacted&")}}}else ne=null;else ne=Nt;return"XMLHTTP REQ ("+ot+") [attempt "+Tt+"]: "+M+`
`+H+`
`+ne})}function Yi(p,M,H,ot,Tt,Nt,ne){p.info(function(){return"XMLHTTP RESP ("+ot+") [ attempt "+Tt+"]: "+M+`
`+H+`
`+Nt+" "+ne})}function Ai(p,M,H,ot){p.info(function(){return"XMLHTTP TEXT ("+M+"): "+Ys(p,H)+(ot?" "+ot:"")})}function Ne(p,M){p.info(function(){return"TIMEOUT: "+M})}ei.prototype.info=function(){};function Ys(p,M){if(!p.g)return M;if(!M)return null;try{const Nt=JSON.parse(M);if(Nt){for(p=0;p<Nt.length;p++)if(Array.isArray(Nt[p])){var H=Nt[p];if(!(H.length<2)){var ot=H[1];if(Array.isArray(ot)&&!(ot.length<1)){var Tt=ot[0];if(Tt!="noop"&&Tt!="stop"&&Tt!="close")for(let ne=1;ne<ot.length;ne++)ot[ne]=""}}}}return te(Nt)}catch{return M}}var li={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ni={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Di;function Mr(){}u(Mr,ie),Mr.prototype.g=function(){return new XMLHttpRequest},Di=new Mr;function $r(p){return encodeURIComponent(String(p))}function Qn(p){var M=1;p=p.split(":");const H=[];for(;M>0&&p.length;)H.push(p.shift()),M--;return p.length&&H.push(p.join(":")),H}function ci(p,M,H,ot){this.j=p,this.i=M,this.l=H,this.S=ot||1,this.V=new Lt(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Xs}function Xs(){this.i=null,this.g="",this.h=!1}var Mi={},Ri={};function wi(p,M,H){p.M=1,p.A=On(ur(M)),p.u=H,p.R=!0,Qi(p,null)}function Qi(p,M){p.F=Date.now(),Bi(p),p.B=ur(p.A);var H=p.B,ot=p.S;Array.isArray(ot)||(ot=[String(ot)]),qe(H.i,"t",ot),p.C=0,H=p.j.L,p.h=new Xs,p.g=me(p.j,H?M:null,!p.u),p.P>0&&(p.O=new Rt(l(p.Y,p,p.g),p.P)),M=p.V,H=p.g,ot=p.ba;var Tt="readystatechange";Array.isArray(Tt)||(Tt&&(Qt[0]=Tt.toString()),Tt=Qt);for(let Nt=0;Nt<Tt.length;Nt++){const ne=dt(H,Tt[Nt],ot||M.handleEvent,!1,M.h||M);if(!ne)break;M.g[ne.key]=ne}M=p.J?q(p.J):{},p.u?(p.v||(p.v="POST"),M["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.B,p.v,p.u,M)):(p.v="GET",p.g.ea(p.B,p.v,null,M)),or(),_n(p.i,p.v,p.B,p.l,p.S,p.u)}ci.prototype.ba=function(p){p=p.target;const M=this.O;M&&Ns(p)==3?M.j():this.Y(p)},ci.prototype.Y=function(p){try{if(p==this.g)t:{const je=Ns(this.g),qr=this.g.ya(),dr=this.g.ca();if(!(je<3)&&(je!=3||this.g&&(this.h.h||this.g.la()||KA(this.g)))){this.K||je!=4||qr==7||(qr==8||dr<=0?or(3):or(2)),Es(this);var M=this.g.ca();this.X=M;var H=vi(this);if(this.o=M==200,Yi(this.i,this.v,this.B,this.l,this.S,je,M),this.o){if(this.U&&!this.L){e:{if(this.g){var ot,Tt=this.g;if((ot=Tt.g?Tt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!F(ot)){var Nt=ot;break e}}Nt=null}if(p=Nt)Ai(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ks(this,p);else{this.o=!1,this.m=3,Se(12),Js(this),Ss(this);break t}}if(this.R){p=!0;let rn;for(;!this.K&&this.C<H.length;)if(rn=_i(this,H),rn==Ri){je==4&&(this.m=4,Se(14),p=!1),Ai(this.i,this.l,null,"[Incomplete Response]");break}else if(rn==Mi){this.m=4,Se(15),Ai(this.i,this.l,H,"[Invalid Chunk]"),p=!1;break}else Ai(this.i,this.l,rn,null),ks(this,rn);if(xi(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),je!=4||H.length!=0||this.h.h||(this.m=1,Se(16),p=!1),this.o=this.o&&p,!p)Ai(this.i,this.l,H,"[Invalid Chunked Response]"),Js(this),Ss(this);else if(H.length>0&&!this.W){this.W=!0;var ne=this.j;ne.g==this&&ne.aa&&!ne.P&&(ne.j.info("Great, no buffering proxy detected. Bytes received: "+H.length),qA(ne),ne.P=!0,Se(11))}}else Ai(this.i,this.l,H,null),ks(this,H);je==4&&Js(this),this.o&&!this.K&&(je==4?ht(this.j,this):(this.o=!1,Bi(this)))}else Yo(this.g),M==400&&H.indexOf("Unknown SID")>0?(this.m=3,Se(12)):(this.m=0,Se(13)),Js(this),Ss(this)}}}catch{}finally{}};function vi(p){if(!xi(p))return p.g.la();const M=KA(p.g);if(M==="")return"";let H="";const ot=M.length,Tt=Ns(p.g)==4;if(!p.h.i){if(typeof TextDecoder>"u")return Js(p),Ss(p),"";p.h.i=new a.TextDecoder}for(let Nt=0;Nt<ot;Nt++)p.h.h=!0,H+=p.h.i.decode(M[Nt],{stream:!(Tt&&Nt==ot-1)});return M.length=0,p.h.g+=H,p.C=0,p.h.g}function xi(p){return p.g?p.v=="GET"&&p.M!=2&&p.j.Aa:!1}function _i(p,M){var H=p.C,ot=M.indexOf(`
`,H);return ot==-1?Ri:(H=Number(M.substring(H,ot)),isNaN(H)?Mi:(ot+=1,ot+H>M.length?Ri:(M=M.slice(ot,ot+H),p.C=ot+H,M)))}ci.prototype.cancel=function(){this.K=!0,Js(this)};function Bi(p){p.T=Date.now()+p.H,Cs(p,p.H)}function Cs(p,M){if(p.D!=null)throw Error("WatchDog timer not null");p.D=rr(l(p.aa,p),M)}function Es(p){p.D&&(a.clearTimeout(p.D),p.D=null)}ci.prototype.aa=function(){this.D=null;const p=Date.now();p-this.T>=0?(Ne(this.i,this.B),this.M!=2&&(or(),Se(17)),Js(this),this.m=2,Ss(this)):Cs(this,this.T-p)};function Ss(p){p.j.I==0||p.K||ht(p.j,p)}function Js(p){Es(p);var M=p.O;M&&typeof M.dispose=="function"&&M.dispose(),p.O=null,se(p.V),p.g&&(M=p.g,p.g=null,M.abort(),M.dispose())}function ks(p,M){try{var H=p.j;if(H.I!=0&&(H.g==p||Ts(H.h,p))){if(!p.L&&Ts(H.h,p)&&H.I==3){try{var ot=H.Ba.g.parse(M)}catch{ot=null}if(Array.isArray(ot)&&ot.length==3){var Tt=ot;if(Tt[0]==0){t:if(!H.v){if(H.g)if(H.g.F+3e3<p.F)K(H),ho(H);else break t;Ra(H),Se(18)}}else H.xa=Tt[1],0<H.xa-H.K&&Tt[2]<37500&&H.F&&H.A==0&&!H.C&&(H.C=rr(l(H.Va,H),6e3));Ci(H.h)<=1&&H.ta&&(H.ta=void 0)}else St(H,11)}else if((p.L||H.g==p)&&K(H),!F(M))for(Tt=H.Ba.g.parse(M),M=0;M<Tt.length;M++){let dr=Tt[M];const rn=dr[0];if(!(rn<=H.K))if(H.K=rn,dr=dr[1],H.I==2)if(dr[0]=="c"){H.M=dr[1],H.ba=dr[2];const Ei=dr[3];Ei!=null&&(H.ka=Ei,H.j.info("VER="+H.ka));const bs=dr[4];bs!=null&&(H.za=bs,H.j.info("SVER="+H.za));const cn=dr[5];cn!=null&&typeof cn=="number"&&cn>0&&(ot=1.5*cn,H.O=ot,H.j.info("backChannelRequestTimeoutMs_="+ot)),ot=H;const Ji=p.g;if(Ji){const xa=Ji.g?Ji.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(xa){var Nt=ot.h;Nt.g||xa.indexOf("spdy")==-1&&xa.indexOf("quic")==-1&&xa.indexOf("h2")==-1||(Nt.j=Nt.l,Nt.g=new Set,Nt.h&&(ri(Nt,Nt.h),Nt.h=null))}if(ot.G){const Jo=Ji.g?Ji.g.getResponseHeader("X-HTTP-Session-Id"):null;Jo&&(ot.wa=Jo,lr(ot.J,ot.G,Jo))}}H.I=3,H.l&&H.l.ra(),H.aa&&(H.T=Date.now()-p.F,H.j.info("Handshake RTT: "+H.T+"ms")),ot=H;var ne=p;if(ot.na=Yt(ot,ot.L?ot.ba:null,ot.W),ne.L){Oi(ot.h,ne);var je=ne,qr=ot.O;qr&&(je.H=qr),je.D&&(Es(je),Bi(je)),ot.g=ne}else bc(ot);H.i.length>0&&Xo(H)}else dr[0]!="stop"&&dr[0]!="close"||St(H,7);else H.I==3&&(dr[0]=="stop"||dr[0]=="close"?dr[0]=="stop"?St(H,7):uo(H):dr[0]!="noop"&&H.l&&H.l.qa(dr),H.A=0)}}or(4)}catch{}}var ui=class{constructor(p,M){this.g=p,this.map=M}};function Is(p){this.l=p||10,a.PerformanceNavigationTiming?(p=a.performance.getEntriesByType("navigation"),p=p.length>0&&(p[0].nextHopProtocol=="hq"||p[0].nextHopProtocol=="h2")):p=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function yn(p){return p.h?!0:p.g?p.g.size>=p.j:!1}function Ci(p){return p.h?1:p.g?p.g.size:0}function Ts(p,M){return p.h?p.h==M:p.g?p.g.has(M):!1}function ri(p,M){p.g?p.g.add(M):p.h=M}function Oi(p,M){p.h&&p.h==M?p.h=null:p.g&&p.g.has(M)&&p.g.delete(M)}Is.prototype.cancel=function(){if(this.i=ao(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const p of this.g.values())p.cancel();this.g.clear()}};function ao(p){if(p.h!=null)return p.i.concat(p.h.G);if(p.g!=null&&p.g.size!==0){let M=p.i;for(const H of p.g.values())M=M.concat(H.G);return M}return d(p.i)}var oo=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Zs(p,M){if(p){p=p.split("&");for(let H=0;H<p.length;H++){const ot=p[H].indexOf("=");let Tt,Nt=null;ot>=0?(Tt=p[H].substring(0,ot),Nt=p[H].substring(ot+1)):Tt=p[H],M(Tt,Nt?decodeURIComponent(Nt.replace(/\+/g," ")):"")}}}function wn(p){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let M;p instanceof wn?(this.l=p.l,Fs(this,p.j),this.o=p.o,this.g=p.g,Ls(this,p.u),this.h=p.h,Hi(this,Kr(p.i)),this.m=p.m):p&&(M=String(p).match(oo))?(this.l=!1,Fs(this,M[1]||"",!0),this.o=kn(M[2]||""),this.g=kn(M[3]||"",!0),Ls(this,M[4]),this.h=kn(M[5]||"",!0),Hi(this,M[6]||"",!0),this.m=kn(M[7]||"")):(this.l=!1,this.i=new lt(null,this.l))}wn.prototype.toString=function(){const p=[];var M=this.j;M&&p.push(Rr(M,lo,!0),":");var H=this.g;return(H||M=="file")&&(p.push("//"),(M=this.o)&&p.push(Rr(M,lo,!0),"@"),p.push($r(H).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),H=this.u,H!=null&&p.push(":",String(H))),(H=this.h)&&(this.g&&H.charAt(0)!="/"&&p.push("/"),p.push(Rr(H,H.charAt(0)=="/"?hc:VA,!0))),(H=this.i.toString())&&p.push("?",H),(H=this.m)&&p.push("#",Rr(H,J)),p.join("")},wn.prototype.resolve=function(p){const M=ur(this);let H=!!p.j;H?Fs(M,p.j):H=!!p.o,H?M.o=p.o:H=!!p.g,H?M.g=p.g:H=p.u!=null;var ot=p.h;if(H)Ls(M,p.u);else if(H=!!p.h){if(ot.charAt(0)!="/")if(this.g&&!this.h)ot="/"+ot;else{var Tt=M.h.lastIndexOf("/");Tt!=-1&&(ot=M.h.slice(0,Tt+1)+ot)}if(Tt=ot,Tt==".."||Tt==".")ot="";else if(Tt.indexOf("./")!=-1||Tt.indexOf("/.")!=-1){ot=Tt.lastIndexOf("/",0)==0,Tt=Tt.split("/");const Nt=[];for(let ne=0;ne<Tt.length;){const je=Tt[ne++];je=="."?ot&&ne==Tt.length&&Nt.push(""):je==".."?((Nt.length>1||Nt.length==1&&Nt[0]!="")&&Nt.pop(),ot&&ne==Tt.length&&Nt.push("")):(Nt.push(je),ot=!0)}ot=Nt.join("/")}else ot=Tt}return H?M.h=ot:H=p.i.toString()!=="",H?Hi(M,Kr(p.i)):H=!!p.m,H&&(M.m=p.m),M};function ur(p){return new wn(p)}function Fs(p,M,H){p.j=H?kn(M,!0):M,p.j&&(p.j=p.j.replace(/:$/,""))}function Ls(p,M){if(M){if(M=Number(M),isNaN(M)||M<0)throw Error("Bad port number "+M);p.u=M}else p.u=null}function Hi(p,M,H){M instanceof lt?(p.i=M,Zr(p.i,p.l)):(H||(M=Rr(M,Us)),p.i=new lt(M,p.l))}function lr(p,M,H){p.i.set(M,H)}function On(p){return lr(p,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),p}function kn(p,M){return p?M?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function Rr(p,M,H){return typeof p=="string"?(p=encodeURI(p).replace(M,Ao),H&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function Ao(p){return p=p.charCodeAt(0),"%"+(p>>4&15).toString(16)+(p&15).toString(16)}var lo=/[#\/\?@]/g,VA=/[#\?:]/g,hc=/[#\?]/g,Us=/[#\?@]/g,J=/#/g;function lt(p,M){this.h=this.g=null,this.i=p||null,this.j=!!M}function mt(p){p.g||(p.g=new Map,p.h=0,p.i&&Zs(p.i,function(M,H){p.add(decodeURIComponent(M.replace(/\+/g," ")),H)}))}r=lt.prototype,r.add=function(p,M){mt(this),this.i=null,p=Ir(this,p);let H=this.g.get(p);return H||this.g.set(p,H=[]),H.push(M),this.h+=1,this};function Dt(p,M){mt(p),M=Ir(p,M),p.g.has(M)&&(p.i=null,p.h-=p.g.get(M).length,p.g.delete(M))}function Jt(p,M){return mt(p),M=Ir(p,M),p.g.has(M)}r.forEach=function(p,M){mt(this),this.g.forEach(function(H,ot){H.forEach(function(Tt){p.call(M,Tt,ot,this)},this)},this)};function ce(p,M){mt(p);let H=[];if(typeof M=="string")Jt(p,M)&&(H=H.concat(p.g.get(Ir(p,M))));else for(p=Array.from(p.g.values()),M=0;M<p.length;M++)H=H.concat(p[M]);return H}r.set=function(p,M){return mt(this),this.i=null,p=Ir(this,p),Jt(this,p)&&(this.h-=this.g.get(p).length),this.g.set(p,[M]),this.h+=1,this},r.get=function(p,M){return p?(p=ce(this,p),p.length>0?String(p[0]):M):M};function qe(p,M,H){Dt(p,M),H.length>0&&(p.i=null,p.g.set(Ir(p,M),d(H)),p.h+=H.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],M=Array.from(this.g.keys());for(let ot=0;ot<M.length;ot++){var H=M[ot];const Tt=$r(H);H=ce(this,H);for(let Nt=0;Nt<H.length;Nt++){let ne=Tt;H[Nt]!==""&&(ne+="="+$r(H[Nt])),p.push(ne)}}return this.i=p.join("&")};function Kr(p){const M=new lt;return M.i=p.i,p.g&&(M.g=new Map(p.g),M.h=p.h),M}function Ir(p,M){return M=String(M),p.j&&(M=M.toLowerCase()),M}function Zr(p,M){M&&!p.j&&(mt(p),p.i=null,p.g.forEach(function(H,ot){const Tt=ot.toLowerCase();ot!=Tt&&(Dt(this,ot),qe(this,Tt,H))},p)),p.j=M}function Xi(p,M){const H=new ei;if(a.Image){const ot=new Image;ot.onload=c(Ps,H,"TestLoadImage: loaded",!0,M,ot),ot.onerror=c(Ps,H,"TestLoadImage: error",!1,M,ot),ot.onabort=c(Ps,H,"TestLoadImage: abort",!1,M,ot),ot.ontimeout=c(Ps,H,"TestLoadImage: timeout",!1,M,ot),a.setTimeout(function(){ot.ontimeout&&ot.ontimeout()},1e4),ot.src=p}else M(!1)}function Ko(p,M){const H=new ei,ot=new AbortController,Tt=setTimeout(()=>{ot.abort(),Ps(H,"TestPingServer: timeout",!1,M)},1e4);fetch(p,{signal:ot.signal}).then(Nt=>{clearTimeout(Tt),Nt.ok?Ps(H,"TestPingServer: ok",!0,M):Ps(H,"TestPingServer: server error",!1,M)}).catch(()=>{clearTimeout(Tt),Ps(H,"TestPingServer: error",!1,M)})}function Ps(p,M,H,ot,Tt){try{Tt&&(Tt.onload=null,Tt.onerror=null,Tt.onabort=null,Tt.ontimeout=null),ot(H)}catch{}}function $e(){this.g=new ve}function fc(p){this.i=p.Sb||null,this.h=p.ab||!1}u(fc,ie),fc.prototype.g=function(){return new $A(this.i,this.h)};function $A(p,M){at.call(this),this.H=p,this.o=M,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}u($A,at),r=$A.prototype,r.open=function(p,M){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=p,this.D=M,this.readyState=1,ps(this)},r.send=function(p){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const M={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};p&&(M.body=p),(this.H||a).fetch(new Request(this.D,M)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,zo(this)),this.readyState=0},r.Pa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,ps(this)),this.g&&(this.readyState=3,ps(this),this.g)))if(this.responseType==="arraybuffer")p.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ku(this)}else p.text().then(this.Oa.bind(this),this.ga.bind(this))};function ku(p){p.j.read().then(p.Ma.bind(p)).catch(p.ga.bind(p))}r.Ma=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var M=p.value?p.value:new Uint8Array(0);(M=this.B.decode(M,{stream:!p.done}))&&(this.response=this.responseText+=M)}p.done?zo(this):ps(this),this.readyState==3&&ku(this)}},r.Oa=function(p){this.g&&(this.response=this.responseText=p,zo(this))},r.Na=function(p){this.g&&(this.response=p,zo(this))},r.ga=function(){this.g&&zo(this)};function zo(p){p.readyState=4,p.l=null,p.j=null,p.B=null,ps(p)}r.setRequestHeader=function(p,M){this.A.append(p,M)},r.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],M=this.h.entries();for(var H=M.next();!H.done;)H=H.value,p.push(H[0]+": "+H[1]),H=M.next();return p.join(`\r
`)};function ps(p){p.onreadystatechange&&p.onreadystatechange.call(p)}Object.defineProperty($A.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(p){this.m=p?"include":"same-origin"}});function wa(p){let M="";return G(p,function(H,ot){M+=ot,M+=":",M+=H,M+=`\r
`}),M}function gc(p,M,H){t:{for(ot in H){var ot=!1;break t}ot=!0}ot||(H=wa(H),typeof p=="string"?H!=null&&$r(H):lr(p,M,H))}function tn(p){at.call(this),this.headers=new Map,this.L=p||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}u(tn,at);var jA=/^https?$/i,pc=["POST","PUT"];r=tn.prototype,r.Fa=function(p){this.H=p},r.ea=function(p,M,H,ot){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);M=M?M.toUpperCase():"GET",this.D=p,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Di.g(),this.g.onreadystatechange=h(l(this.Ca,this));try{this.B=!0,this.g.open(M,String(p),!0),this.B=!1}catch(Nt){co(this,Nt);return}if(p=H||"",H=new Map(this.headers),ot)if(Object.getPrototypeOf(ot)===Object.prototype)for(var Tt in ot)H.set(Tt,ot[Tt]);else if(typeof ot.keys=="function"&&typeof ot.get=="function")for(const Nt of ot.keys())H.set(Nt,ot.get(Nt));else throw Error("Unknown input type for opt_headers: "+String(ot));ot=Array.from(H.keys()).find(Nt=>Nt.toLowerCase()=="content-type"),Tt=a.FormData&&p instanceof a.FormData,!(Array.prototype.indexOf.call(pc,M,void 0)>=0)||ot||Tt||H.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Nt,ne]of H)this.g.setRequestHeader(Nt,ne);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(p),this.v=!1}catch(Nt){co(this,Nt)}};function co(p,M){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=M,p.o=5,qo(p),GA(p)}function qo(p){p.A||(p.A=!0,Ct(p,"complete"),Ct(p,"error"))}r.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=p||7,Ct(this,"complete"),Ct(this,"abort"),GA(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),GA(this,!0)),tn.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?Wo(this):this.Xa())},r.Xa=function(){Wo(this)};function Wo(p){if(p.h&&typeof s<"u"){if(p.v&&Ns(p)==4)setTimeout(p.Ca.bind(p),0);else if(Ct(p,"readystatechange"),Ns(p)==4){p.h=!1;try{const Nt=p.ca();t:switch(Nt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var M=!0;break t;default:M=!1}var H;if(!(H=M)){var ot;if(ot=Nt===0){let ne=String(p.D).match(oo)[1]||null;!ne&&a.self&&a.self.location&&(ne=a.self.location.protocol.slice(0,-1)),ot=!jA.test(ne?ne.toLowerCase():"")}H=ot}if(H)Ct(p,"complete"),Ct(p,"success");else{p.o=6;try{var Tt=Ns(p)>2?p.g.statusText:""}catch{Tt=""}p.l=Tt+" ["+p.ca()+"]",qo(p)}}finally{GA(p)}}}}function GA(p,M){if(p.g){p.m&&(clearTimeout(p.m),p.m=null);const H=p.g;p.g=null,M||Ct(p,"ready");try{H.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function Ns(p){return p.g?p.g.readyState:0}r.ca=function(){try{return Ns(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(p){if(this.g){var M=this.g.responseText;return p&&M.indexOf(p)==0&&(M=M.substring(p.length)),ae(M)}};function KA(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.F){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function Yo(p){const M={};p=(p.g&&Ns(p)>=2&&p.g.getAllResponseHeaders()||"").split(`\r
`);for(let ot=0;ot<p.length;ot++){if(F(p[ot]))continue;var H=Qn(p[ot]);const Tt=H[0];if(H=H[1],typeof H!="string")continue;H=H.trim();const Nt=M[Tt]||[];M[Tt]=Nt,Nt.push(H)}pt(M,function(ot){return ot.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ta(p,M,H){return H&&H.internalChannelParams&&H.internalChannelParams[p]||M}function zA(p){this.za=0,this.i=[],this.j=new ei,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ta("failFast",!1,p),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ta("baseRetryDelayMs",5e3,p),this.Za=ta("retryDelaySeedMs",1e4,p),this.Ta=ta("forwardChannelMaxRetries",2,p),this.va=ta("forwardChannelRequestTimeoutMs",2e4,p),this.ma=p&&p.xmlHttpFactory||void 0,this.Ua=p&&p.Rb||void 0,this.Aa=p&&p.useFetchStreams||!1,this.O=void 0,this.L=p&&p.supportsCrossDomainXhr||!1,this.M="",this.h=new Is(p&&p.concurrentRequestLimit),this.Ba=new $e,this.S=p&&p.fastHandshake||!1,this.R=p&&p.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=p&&p.Pb||!1,p&&p.ua&&this.j.ua(),p&&p.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&p&&p.detectBufferingProxy||!1,this.ia=void 0,p&&p.longPollingTimeout&&p.longPollingTimeout>0&&(this.ia=p.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=zA.prototype,r.ka=8,r.I=1,r.connect=function(p,M,H,ot){Se(0),this.W=p,this.H=M||{},H&&ot!==void 0&&(this.H.OSID=H,this.H.OAID=ot),this.F=this.X,this.J=Yt(this,null,this.W),Xo(this)};function uo(p){if(fo(p),p.I==3){var M=p.V++,H=ur(p.J);if(lr(H,"SID",p.M),lr(H,"RID",M),lr(H,"TYPE","terminate"),ms(p,H),M=new ci(p,p.j,M),M.M=2,M.A=On(ur(H)),H=!1,a.navigator&&a.navigator.sendBeacon)try{H=a.navigator.sendBeacon(M.A.toString(),"")}catch{}!H&&a.Image&&(new Image().src=M.A,H=!0),H||(M.g=me(M.j,null),M.g.ea(M.A)),M.F=Date.now(),Bi(M)}$t(p)}function ho(p){p.g&&(qA(p),p.g.cancel(),p.g=null)}function fo(p){ho(p),p.v&&(a.clearTimeout(p.v),p.v=null),K(p),p.h.cancel(),p.m&&(typeof p.m=="number"&&a.clearTimeout(p.m),p.m=null)}function Xo(p){if(!yn(p.h)&&!p.m){p.m=!0;var M=p.Ea;N||x(),R||(N(),R=!0),U.add(M,p),p.D=0}}function Iu(p,M){return Ci(p.h)>=p.h.j-(p.m?1:0)?!1:p.m?(p.i=M.G.concat(p.i),!0):p.I==1||p.I==2||p.D>=(p.Sa?0:p.Ta)?!1:(p.m=rr(l(p.Ea,p,M),wt(p,p.D)),p.D++,!0)}r.Ea=function(p){if(this.m)if(this.m=null,this.I==1){if(!p){this.V=Math.floor(Math.random()*1e5),p=this.V++;const Tt=new ci(this,this.j,p);let Nt=this.o;if(this.U&&(Nt?(Nt=q(Nt),O(Nt,this.U)):Nt=this.U),this.u!==null||this.R||(Tt.J=Nt,Nt=null),this.S)t:{for(var M=0,H=0;H<this.i.length;H++){e:{var ot=this.i[H];if("__data__"in ot.map&&(ot=ot.map.__data__,typeof ot=="string")){ot=ot.length;break e}ot=void 0}if(ot===void 0)break;if(M+=ot,M>4096){M=H;break t}if(M===4096||H===this.i.length-1){M=H+1;break t}}M=1e3}else M=1e3;M=mc(this,Tt,M),H=ur(this.J),lr(H,"RID",p),lr(H,"CVER",22),this.G&&lr(H,"X-HTTP-Session-Id",this.G),ms(this,H),Nt&&(this.R?M="headers="+$r(wa(Nt))+"&"+M:this.u&&gc(H,this.u,Nt)),ri(this.h,Tt),this.Ra&&lr(H,"TYPE","init"),this.S?(lr(H,"$req",M),lr(H,"SID","null"),Tt.U=!0,wi(Tt,H,null)):wi(Tt,H,M),this.I=2}}else this.I==3&&(p?va(this,p):this.i.length==0||yn(this.h)||va(this))};function va(p,M){var H;M?H=M.l:H=p.V++;const ot=ur(p.J);lr(ot,"SID",p.M),lr(ot,"RID",H),lr(ot,"AID",p.K),ms(p,ot),p.u&&p.o&&gc(ot,p.u,p.o),H=new ci(p,p.j,H,p.D+1),p.u===null&&(H.J=p.o),M&&(p.i=M.G.concat(p.i)),M=mc(p,H,1e3),H.H=Math.round(p.va*.5)+Math.round(p.va*.5*Math.random()),ri(p.h,H),wi(H,ot,M)}function ms(p,M){p.H&&G(p.H,function(H,ot){lr(M,ot,H)}),p.l&&G({},function(H,ot){lr(M,ot,H)})}function mc(p,M,H){H=Math.min(p.i.length,H);const ot=p.l?l(p.l.Ka,p.l,p):null;t:{var Tt=p.i;let je=-1;for(;;){const qr=["count="+H];je==-1?H>0?(je=Tt[0].g,qr.push("ofs="+je)):je=0:qr.push("ofs="+je);let dr=!0;for(let rn=0;rn<H;rn++){var Nt=Tt[rn].g;const Ei=Tt[rn].map;if(Nt-=je,Nt<0)je=Math.max(0,Tt[rn].g-100),dr=!1;else try{Nt="req"+Nt+"_"||"";try{var ne=Ei instanceof Map?Ei:Object.entries(Ei);for(const[bs,cn]of ne){let Ji=cn;o(cn)&&(Ji=te(cn)),qr.push(Nt+bs+"="+encodeURIComponent(Ji))}}catch(bs){throw qr.push(Nt+"type="+encodeURIComponent("_badmap")),bs}}catch{ot&&ot(Ei)}}if(dr){ne=qr.join("&");break t}}ne=void 0}return p=p.i.splice(0,H),M.G=p,ne}function bc(p){if(!p.g&&!p.v){p.Y=1;var M=p.Da;N||x(),R||(N(),R=!0),U.add(M,p),p.A=0}}function Ra(p){return p.g||p.v||p.A>=3?!1:(p.Y++,p.v=rr(l(p.Da,p),wt(p,p.A)),p.A++,!0)}r.Da=function(){if(this.v=null,S(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var p=4*this.T;this.j.info("BP detection timer enabled: "+p),this.B=rr(l(this.Wa,this),p)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Se(10),ho(this),S(this))};function qA(p){p.B!=null&&(a.clearTimeout(p.B),p.B=null)}function S(p){p.g=new ci(p,p.j,"rpc",p.Y),p.u===null&&(p.g.J=p.o),p.g.P=0;var M=ur(p.na);lr(M,"RID","rpc"),lr(M,"SID",p.M),lr(M,"AID",p.K),lr(M,"CI",p.F?"0":"1"),!p.F&&p.ia&&lr(M,"TO",p.ia),lr(M,"TYPE","xmlhttp"),ms(p,M),p.u&&p.o&&gc(M,p.u,p.o),p.O&&(p.g.H=p.O);var H=p.g;p=p.ba,H.M=1,H.A=On(ur(M)),H.u=null,H.R=!0,Qi(H,p)}r.Va=function(){this.C!=null&&(this.C=null,ho(this),Ra(this),Se(19))};function K(p){p.C!=null&&(a.clearTimeout(p.C),p.C=null)}function ht(p,M){var H=null;if(p.g==M){K(p),qA(p),p.g=null;var ot=2}else if(Ts(p.h,M))H=M.G,Oi(p.h,M),ot=1;else return;if(p.I!=0){if(M.o)if(ot==1){H=M.u?M.u.length:0,M=Date.now()-M.F;var Tt=p.D;ot=De(),Ct(ot,new ke(ot,H)),Xo(p)}else bc(p);else if(Tt=M.m,Tt==3||Tt==0&&M.X>0||!(ot==1&&Iu(p,M)||ot==2&&Ra(p)))switch(H&&H.length>0&&(M=p.h,M.i=M.i.concat(H)),Tt){case 1:St(p,5);break;case 4:St(p,10);break;case 3:St(p,6);break;default:St(p,2)}}}function wt(p,M){let H=p.Qa+Math.floor(Math.random()*p.Za);return p.isActive()||(H*=2),H*M}function St(p,M){if(p.j.info("Error code "+M),M==2){var H=l(p.bb,p),ot=p.Ua;const Tt=!ot;ot=new wn(ot||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Fs(ot,"https"),On(ot),Tt?Xi(ot.toString(),H):Ko(ot.toString(),H)}else Se(2);p.I=0,p.l&&p.l.pa(M),$t(p),fo(p)}r.bb=function(p){p?(this.j.info("Successfully pinged google.com"),Se(2)):(this.j.info("Failed to ping google.com"),Se(1))};function $t(p){if(p.I=0,p.ja=[],p.l){const M=ao(p.h);(M.length!=0||p.i.length!=0)&&(m(p.ja,M),m(p.ja,p.i),p.h.i.length=0,d(p.i),p.i.length=0),p.l.oa()}}function Yt(p,M,H){var ot=H instanceof wn?ur(H):new wn(H);if(ot.g!="")M&&(ot.g=M+"."+ot.g),Ls(ot,ot.u);else{var Tt=a.location;ot=Tt.protocol,M=M?M+"."+Tt.hostname:Tt.hostname,Tt=+Tt.port;const Nt=new wn(null);ot&&Fs(Nt,ot),M&&(Nt.g=M),Tt&&Ls(Nt,Tt),H&&(Nt.h=H),ot=Nt}return H=p.G,M=p.wa,H&&M&&lr(ot,H,M),lr(ot,"VER",p.ka),ms(p,ot),ot}function me(p,M,H){if(M&&!p.L)throw Error("Can't create secondary domain capable XhrIo object.");return M=p.Aa&&!p.ma?new tn(new fc({ab:H})):new tn(p.ma),M.Fa(p.L),M}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Be(){}r=Be.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function Me(){}Me.prototype.g=function(p,M){return new Ie(p,M)};function Ie(p,M){at.call(this),this.g=new zA(M),this.l=p,this.h=M&&M.messageUrlParams||null,p=M&&M.messageHeaders||null,M&&M.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=M&&M.initMessageHeaders||null,M&&M.messageContentType&&(p?p["X-WebChannel-Content-Type"]=M.messageContentType:p={"X-WebChannel-Content-Type":M.messageContentType}),M&&M.sa&&(p?p["X-WebChannel-Client-Profile"]=M.sa:p={"X-WebChannel-Client-Profile":M.sa}),this.g.U=p,(p=M&&M.Qb)&&!F(p)&&(this.g.u=p),this.A=M&&M.supportsCrossDomainXhr||!1,this.v=M&&M.sendRawJson||!1,(M=M&&M.httpSessionIdParam)&&!F(M)&&(this.g.G=M,p=this.h,p!==null&&M in p&&(p=this.h,M in p&&delete p[M])),this.j=new zr(this)}u(Ie,at),Ie.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Ie.prototype.close=function(){uo(this.g)},Ie.prototype.o=function(p){var M=this.g;if(typeof p=="string"){var H={};H.__data__=p,p=H}else this.v&&(H={},H.__data__=te(p),p=H);M.i.push(new ui(M.Ya++,p)),M.I==3&&Xo(M)},Ie.prototype.N=function(){this.g.l=null,delete this.j,uo(this.g),delete this.g,Ie.Z.N.call(this)};function wr(p){re.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var M=p.__sm__;if(M){t:{for(const H in M){p=H;break t}p=void 0}(this.i=p)&&(p=this.i,M=M!==null&&p in M?M[p]:void 0),this.data=M}else this.data=p}u(wr,re);function en(){he.call(this),this.status=1}u(en,he);function zr(p){this.g=p}u(zr,Be),zr.prototype.ra=function(){Ct(this.g,"a")},zr.prototype.qa=function(p){Ct(this.g,new wr(p))},zr.prototype.pa=function(p){Ct(this.g,new en)},zr.prototype.oa=function(){Ct(this.g,"b")},Me.prototype.createWebChannel=Me.prototype.g,Ie.prototype.send=Ie.prototype.o,Ie.prototype.open=Ie.prototype.m,Ie.prototype.close=Ie.prototype.close,g3=function(){return new Me},f3=function(){return De()},h3=Fe,ev={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},li.NO_ERROR=0,li.TIMEOUT=8,li.HTTP_ERROR=6,Qm=li,Ni.COMPLETE="complete",d3=Ni,Ae.EventType=ee,ee.OPEN="a",ee.CLOSE="b",ee.ERROR="c",ee.MESSAGE="d",at.prototype.listen=at.prototype.J,zh=Ae,tn.prototype.listenOnce=tn.prototype.K,tn.prototype.getLastError=tn.prototype.Ha,tn.prototype.getLastErrorCode=tn.prototype.ya,tn.prototype.getStatus=tn.prototype.ca,tn.prototype.getResponseJson=tn.prototype.La,tn.prototype.getResponseText=tn.prototype.la,tn.prototype.send=tn.prototype.ea,tn.prototype.setWithCredentials=tn.prototype.Fa,u3=tn}).apply(typeof rm<"u"?rm:typeof self<"u"?self:typeof window<"u"?window:{});const tS="@firebase/firestore",eS="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}os.UNAUTHENTICATED=new os(null),os.GOOGLE_CREDENTIALS=new os("google-credentials-uid"),os.FIRST_PARTY=new os("first-party-uid"),os.MOCK_USER=new os("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zd="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cu=new g2("@firebase/firestore");function Xu(){return cu.logLevel}function ge(r,...t){if(cu.logLevel<=gr.DEBUG){const e=t.map(k2);cu.debug(`Firestore (${zd}): ${r}`,...e)}}function DA(r,...t){if(cu.logLevel<=gr.ERROR){const e=t.map(k2);cu.error(`Firestore (${zd}): ${r}`,...e)}}function uu(r,...t){if(cu.logLevel<=gr.WARN){const e=t.map(k2);cu.warn(`Firestore (${zd}): ${r}`,...e)}}function k2(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(e){return JSON.stringify(e)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function He(r,t,e){let n="Unexpected state";typeof t=="string"?n=t:e=t,p3(r,n,e)}function p3(r,t,e){let n=`FIRESTORE (${zd}) INTERNAL ASSERTION FAILED: ${t} (ID: ${r.toString(16)})`;if(e!==void 0)try{n+=" CONTEXT: "+JSON.stringify(e)}catch{n+=" CONTEXT: "+e}throw DA(n),new Error(n)}function Dr(r,t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,r||p3(t,i,n)}function Je(r,t){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class le extends QA{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IA{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m3{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class b3{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable((()=>e(os.UNAUTHENTICATED)))}shutdown(){}}class UZ{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable((()=>e(this.token.user)))}shutdown(){this.changeListener=null}}class PZ{constructor(t){this.t=t,this.currentUser=os.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){Dr(this.o===void 0,42304);let n=this.i;const i=A=>this.i!==n?(n=this.i,e(A)):Promise.resolve();let s=new IA;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new IA,t.enqueueRetryable((()=>i(this.currentUser)))};const a=()=>{const A=s;t.enqueueRetryable((async()=>{await A.promise,await i(this.currentUser)}))},o=A=>{ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=A,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit((A=>o(A))),setTimeout((()=>{if(!this.auth){const A=this.t.getImmediate({optional:!0});A?o(A):(ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new IA)}}),0),a()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((n=>this.i!==t?(ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Dr(typeof n.accessToken=="string",31837,{l:n}),new m3(n.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Dr(t===null||typeof t=="string",2055,{h:t}),new os(t)}}class NZ{constructor(t,e,n){this.P=t,this.T=e,this.I=n,this.type="FirstParty",this.user=os.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class DZ{constructor(t,e,n){this.P=t,this.T=e,this.I=n}getToken(){return Promise.resolve(new NZ(this.P,this.T,this.I))}start(t,e){t.enqueueRetryable((()=>e(os.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class rS{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class MZ{constructor(t,e){this.V=e,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,da(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,e){Dr(this.o===void 0,3512);const n=s=>{s.error!=null&&ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.m;return this.m=s.token,ge("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?e(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable((()=>n(s)))};const i=s=>{ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((s=>i(s))),setTimeout((()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new rS(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((e=>e?(Dr(typeof e.token=="string",44558,{tokenResult:e}),this.m=e.token,new rS(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RZ(r){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(r);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let n=0;n<r;n++)e[n]=Math.floor(256*Math.random());return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bb{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const i=RZ(40);for(let s=0;s<i.length;++s)n.length<20&&i[s]<e&&(n+=t.charAt(i[s]%62))}return n}}function pr(r,t){return r<t?-1:r>t?1:0}function rv(r,t){const e=Math.min(r.length,t.length);for(let n=0;n<e;n++){const i=r.charAt(n),s=t.charAt(n);if(i!==s)return Sw(i)===Sw(s)?pr(i,s):Sw(i)?1:-1}return pr(r.length,t.length)}const QZ=55296,OZ=57343;function Sw(r){const t=r.charCodeAt(0);return t>=QZ&&t<=OZ}function Id(r,t,e){return r.length===t.length&&r.every(((n,i)=>e(n,t[i])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nS="__name__";class _o{constructor(t,e,n){e===void 0?e=0:e>t.length&&He(637,{offset:e,range:t.length}),n===void 0?n=t.length-e:n>t.length-e&&He(1746,{length:n,range:t.length-e}),this.segments=t,this.offset=e,this.len=n}get length(){return this.len}isEqual(t){return _o.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof _o?t.forEach((n=>{e.push(n)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const s=_o.compareSegments(t.get(i),e.get(i));if(s!==0)return s}return pr(t.length,e.length)}static compareSegments(t,e){const n=_o.isNumericId(t),i=_o.isNumericId(e);return n&&!i?-1:!n&&i?1:n&&i?_o.extractNumericId(t).compare(_o.extractNumericId(e)):rv(t,e)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Ql.fromString(t.substring(4,t.length-2))}}class An extends _o{construct(t,e,n){return new An(t,e,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const n of t){if(n.indexOf("//")>=0)throw new le(Kt.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);e.push(...n.split("/").filter((i=>i.length>0)))}return new An(e)}static emptyPath(){return new An([])}}const HZ=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Fi extends _o{construct(t,e,n){return new Fi(t,e,n)}static isValidIdentifier(t){return HZ.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Fi.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===nS}static keyField(){return new Fi([nS])}static fromServerFormat(t){const e=[];let n="",i=0;const s=()=>{if(n.length===0)throw new le(Kt.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(n),n=""};let a=!1;for(;i<t.length;){const o=t[i];if(o==="\\"){if(i+1===t.length)throw new le(Kt.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const A=t[i+1];if(A!=="\\"&&A!=="."&&A!=="`")throw new le(Kt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=A,i+=2}else o==="`"?(a=!a,i++):o!=="."||a?(n+=o,i++):(s(),i++)}if(s(),a)throw new le(Kt.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Fi(e)}static emptyPath(){return new Fi([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{constructor(t){this.path=t}static fromPath(t){return new Ue(An.fromString(t))}static fromName(t){return new Ue(An.fromString(t).popFirst(5))}static empty(){return new Ue(An.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&An.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return An.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Ue(new An(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y3(r,t,e){if(!e)throw new le(Kt.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${t}.`)}function w3(r,t,e,n){if(t===!0&&n===!0)throw new le(Kt.INVALID_ARGUMENT,`${r} and ${e} cannot be used together.`)}function iS(r){if(!Ue.isDocumentKey(r))throw new le(Kt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function sS(r){if(Ue.isDocumentKey(r))throw new le(Kt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function v3(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function yb(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const t=(function(n){return n.constructor?n.constructor.name:null})(r);return t?`a custom ${t} object`:"an object"}}return typeof r=="function"?"a function":He(12329,{type:typeof r})}function ya(r,t){if("_delegate"in r&&(r=r._delegate),!(r instanceof t)){if(t.name===r.constructor.name)throw new le(Kt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=yb(r);throw new le(Kt.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oi(r,t){const e={typeString:r};return t&&(e.value=t),e}function pg(r,t){if(!v3(r))throw new le(Kt.INVALID_ARGUMENT,"JSON must be an object");let e;for(const n in t)if(t[n]){const i=t[n].typeString,s="value"in t[n]?{value:t[n].value}:void 0;if(!(n in r)){e=`JSON missing required field: '${n}'`;break}const a=r[n];if(i&&typeof a!==i){e=`JSON field '${n}' must be a ${i}.`;break}if(s!==void 0&&a!==s.value){e=`Expected '${n}' field to equal '${s.value}'`;break}}if(e)throw new le(Kt.INVALID_ARGUMENT,e);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aS=-62135596800,oS=1e6;class ln{static now(){return ln.fromMillis(Date.now())}static fromDate(t){return ln.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),n=Math.floor((t-1e3*e)*oS);return new ln(e,n)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new le(Kt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new le(Kt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<aS)throw new le(Kt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new le(Kt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/oS}_compareTo(t){return this.seconds===t.seconds?pr(this.nanoseconds,t.nanoseconds):pr(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ln._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(pg(t,ln._jsonSchema))return new ln(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-aS;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ln._jsonSchemaVersion="firestore/timestamp/1.0",ln._jsonSchema={type:oi("string",ln._jsonSchemaVersion),seconds:oi("number"),nanoseconds:oi("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{static fromTimestamp(t){return new ze(t)}static min(){return new ze(new ln(0,0))}static max(){return new ze(new ln(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $f=-1;function VZ(r,t){const e=r.toTimestamp().seconds,n=r.toTimestamp().nanoseconds+1,i=ze.fromTimestamp(n===1e9?new ln(e+1,0):new ln(e,n));return new Wl(i,Ue.empty(),t)}function $Z(r){return new Wl(r.readTime,r.key,$f)}class Wl{constructor(t,e,n){this.readTime=t,this.documentKey=e,this.largestBatchId=n}static min(){return new Wl(ze.min(),Ue.empty(),$f)}static max(){return new Wl(ze.max(),Ue.empty(),$f)}}function jZ(r,t){let e=r.readTime.compareTo(t.readTime);return e!==0?e:(e=Ue.comparator(r.documentKey,t.documentKey),e!==0?e:pr(r.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GZ="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class KZ{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qd(r){if(r.code!==Kt.FAILED_PRECONDITION||r.message!==GZ)throw r;ge("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&He(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new Wt(((n,i)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(n,i)},this.catchCallback=s=>{this.wrapFailure(e,s).next(n,i)}}))}toPromise(){return new Promise(((t,e)=>{this.next(t,e)}))}wrapUserFunction(t){try{const e=t();return e instanceof Wt?e:Wt.resolve(e)}catch(e){return Wt.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction((()=>t(e))):Wt.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction((()=>t(e))):Wt.reject(e)}static resolve(t){return new Wt(((e,n)=>{e(t)}))}static reject(t){return new Wt(((e,n)=>{n(t)}))}static waitFor(t){return new Wt(((e,n)=>{let i=0,s=0,a=!1;t.forEach((o=>{++i,o.next((()=>{++s,a&&s===i&&e()}),(A=>n(A)))})),a=!0,s===i&&e()}))}static or(t){let e=Wt.resolve(!1);for(const n of t)e=e.next((i=>i?Wt.resolve(i):n()));return e}static forEach(t,e){const n=[];return t.forEach(((i,s)=>{n.push(e.call(this,i,s))})),this.waitFor(n)}static mapArray(t,e){return new Wt(((n,i)=>{const s=t.length,a=new Array(s);let o=0;for(let A=0;A<s;A++){const l=A;e(t[l]).next((c=>{a[l]=c,++o,o===s&&n(a)}),(c=>i(c)))}}))}static doWhile(t,e){return new Wt(((n,i)=>{const s=()=>{t()===!0?e().next((()=>{s()}),i):n()};s()}))}}function zZ(r){const t=r.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}function Wd(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wb{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>e.writeSequenceNumber(n))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}wb.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I2=-1;function vb(r){return r==null}function T0(r){return r===0&&1/r==-1/0}function qZ(r){return typeof r=="number"&&Number.isInteger(r)&&!T0(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x3="";function WZ(r){let t="";for(let e=0;e<r.length;e++)t.length>0&&(t=AS(t)),t=YZ(r.get(e),t);return AS(t)}function YZ(r,t){let e=t;const n=r.length;for(let i=0;i<n;i++){const s=r.charAt(i);switch(s){case"\0":e+="";break;case x3:e+="";break;default:e+=s}}return e}function AS(r){return r+x3+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lS(r){let t=0;for(const e in r)Object.prototype.hasOwnProperty.call(r,e)&&t++;return t}function Ac(r,t){for(const e in r)Object.prototype.hasOwnProperty.call(r,e)&&t(e,r[e])}function _3(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(t,e){this.comparator=t,this.root=e||Ki.EMPTY}insert(t,e){return new Sn(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Ki.BLACK,null,null))}remove(t){return new Sn(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Ki.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const n=this.comparator(t,e.key);if(n===0)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null}indexOf(t){let e=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(t,n.key);if(i===0)return e+n.left.size;i<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((e,n)=>(t(e,n),!1)))}toString(){const t=[];return this.inorderTraversal(((e,n)=>(t.push(`${e}:${n}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new nm(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new nm(this.root,t,this.comparator,!1)}getReverseIterator(){return new nm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new nm(this.root,t,this.comparator,!0)}}class nm{constructor(t,e,n,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=e?n(t.key,e):1,e&&i&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Ki{constructor(t,e,n,i,s){this.key=t,this.value=e,this.color=n??Ki.RED,this.left=i??Ki.EMPTY,this.right=s??Ki.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,n,i,s){return new Ki(t??this.key,e??this.value,n??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,n){let i=this;const s=n(t,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(t,e,n),null):s===0?i.copy(null,e,null,null,null):i.copy(null,null,null,null,i.right.insert(t,e,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ki.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let n,i=this;if(e(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,e),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),e(t,i.key)===0){if(i.right.isEmpty())return Ki.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,e))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Ki.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Ki.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw He(43730,{key:this.key,value:this.value});if(this.right.isRed())throw He(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw He(27949);return t+(this.isRed()?0:1)}}Ki.EMPTY=null,Ki.RED=!0,Ki.BLACK=!1;Ki.EMPTY=new class{constructor(){this.size=0}get key(){throw He(57766)}get value(){throw He(16141)}get color(){throw He(16727)}get left(){throw He(29726)}get right(){throw He(36894)}copy(t,e,n,i,s){return this}insert(t,e,n){return new Ki(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(t){this.comparator=t,this.data=new Sn(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((e,n)=>(t(e),!1)))}forEachInRange(t,e){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,t[1])>=0)return;e(i.key)}}forEachWhile(t,e){let n;for(n=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new cS(this.data.getIterator())}getIteratorFrom(t){return new cS(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach((n=>{e=e.add(n)})),e}isEqual(t){if(!(t instanceof yi)||this.size!==t.size)return!1;const e=this.data.getIterator(),n=t.data.getIterator();for(;e.hasNext();){const i=e.getNext().key,s=n.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((e=>{t.push(e)})),t}toString(){const t=[];return this.forEach((e=>t.push(e))),"SortedSet("+t.toString()+")"}copy(t){const e=new yi(this.comparator);return e.data=t,e}}class cS{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(t){this.fields=t,t.sort(Fi.comparator)}static empty(){return new ga([])}unionWith(t){let e=new yi(Fi.comparator);for(const n of this.fields)e=e.add(n);for(const n of t)e=e.add(n);return new ga(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return Id(this.fields,t.fields,((e,n)=>e.isEqual(n)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B3 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(t){this.binaryString=t}static fromBase64String(t){const e=(function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new B3("Invalid base64 string: "+s):s}})(t);return new Pi(e)}static fromUint8Array(t){const e=(function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s})(t);return new Pi(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(e){return btoa(e)})(this.binaryString)}toUint8Array(){return(function(e){const n=new Uint8Array(e.length);for(let i=0;i<e.length;i++)n[i]=e.charCodeAt(i);return n})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return pr(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Pi.EMPTY_BYTE_STRING=new Pi("");const XZ=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Yl(r){if(Dr(!!r,39018),typeof r=="string"){let t=0;const e=XZ.exec(r);if(Dr(!!e,46558,{timestamp:r}),e[1]){let i=e[1];i=(i+"000000000").substr(0,9),t=Number(i)}const n=new Date(r);return{seconds:Math.floor(n.getTime()/1e3),nanos:t}}return{seconds:zn(r.seconds),nanos:zn(r.nanos)}}function zn(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Xl(r){return typeof r=="string"?Pi.fromBase64String(r):Pi.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C3="server_timestamp",E3="__type__",S3="__previous_value__",k3="__local_write_time__";function T2(r){var e,n;return((n=(((e=r==null?void 0:r.mapValue)==null?void 0:e.fields)||{})[E3])==null?void 0:n.stringValue)===C3}function xb(r){const t=r.mapValue.fields[S3];return T2(t)?xb(t):t}function jf(r){const t=Yl(r.mapValue.fields[k3].timestampValue);return new ln(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JZ{constructor(t,e,n,i,s,a,o,A,l,c){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=A,this.useFetchStreams=l,this.isUsingEmulator=c}}const F0="(default)";class Td{constructor(t,e){this.projectId=t,this.database=e||F0}static empty(){return new Td("","")}get isDefaultDatabase(){return this.database===F0}isEqual(t){return t instanceof Td&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I3="__type__",ZZ="__max__",im={mapValue:{}},T3="__vector__",L0="value";function Jl(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?T2(r)?4:ett(r)?9007199254740991:ttt(r)?10:11:He(28295,{value:r})}function Vo(r,t){if(r===t)return!0;const e=Jl(r);if(e!==Jl(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===t.booleanValue;case 4:return jf(r).isEqual(jf(t));case 3:return(function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const a=Yl(i.timestampValue),o=Yl(s.timestampValue);return a.seconds===o.seconds&&a.nanos===o.nanos})(r,t);case 5:return r.stringValue===t.stringValue;case 6:return(function(i,s){return Xl(i.bytesValue).isEqual(Xl(s.bytesValue))})(r,t);case 7:return r.referenceValue===t.referenceValue;case 8:return(function(i,s){return zn(i.geoPointValue.latitude)===zn(s.geoPointValue.latitude)&&zn(i.geoPointValue.longitude)===zn(s.geoPointValue.longitude)})(r,t);case 2:return(function(i,s){if("integerValue"in i&&"integerValue"in s)return zn(i.integerValue)===zn(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const a=zn(i.doubleValue),o=zn(s.doubleValue);return a===o?T0(a)===T0(o):isNaN(a)&&isNaN(o)}return!1})(r,t);case 9:return Id(r.arrayValue.values||[],t.arrayValue.values||[],Vo);case 10:case 11:return(function(i,s){const a=i.mapValue.fields||{},o=s.mapValue.fields||{};if(lS(a)!==lS(o))return!1;for(const A in a)if(a.hasOwnProperty(A)&&(o[A]===void 0||!Vo(a[A],o[A])))return!1;return!0})(r,t);default:return He(52216,{left:r})}}function Gf(r,t){return(r.values||[]).find((e=>Vo(e,t)))!==void 0}function Fd(r,t){if(r===t)return 0;const e=Jl(r),n=Jl(t);if(e!==n)return pr(e,n);switch(e){case 0:case 9007199254740991:return 0;case 1:return pr(r.booleanValue,t.booleanValue);case 2:return(function(s,a){const o=zn(s.integerValue||s.doubleValue),A=zn(a.integerValue||a.doubleValue);return o<A?-1:o>A?1:o===A?0:isNaN(o)?isNaN(A)?0:-1:1})(r,t);case 3:return uS(r.timestampValue,t.timestampValue);case 4:return uS(jf(r),jf(t));case 5:return rv(r.stringValue,t.stringValue);case 6:return(function(s,a){const o=Xl(s),A=Xl(a);return o.compareTo(A)})(r.bytesValue,t.bytesValue);case 7:return(function(s,a){const o=s.split("/"),A=a.split("/");for(let l=0;l<o.length&&l<A.length;l++){const c=pr(o[l],A[l]);if(c!==0)return c}return pr(o.length,A.length)})(r.referenceValue,t.referenceValue);case 8:return(function(s,a){const o=pr(zn(s.latitude),zn(a.latitude));return o!==0?o:pr(zn(s.longitude),zn(a.longitude))})(r.geoPointValue,t.geoPointValue);case 9:return dS(r.arrayValue,t.arrayValue);case 10:return(function(s,a){var h,d,m,f;const o=s.fields||{},A=a.fields||{},l=(h=o[L0])==null?void 0:h.arrayValue,c=(d=A[L0])==null?void 0:d.arrayValue,u=pr(((m=l==null?void 0:l.values)==null?void 0:m.length)||0,((f=c==null?void 0:c.values)==null?void 0:f.length)||0);return u!==0?u:dS(l,c)})(r.mapValue,t.mapValue);case 11:return(function(s,a){if(s===im.mapValue&&a===im.mapValue)return 0;if(s===im.mapValue)return 1;if(a===im.mapValue)return-1;const o=s.fields||{},A=Object.keys(o),l=a.fields||{},c=Object.keys(l);A.sort(),c.sort();for(let u=0;u<A.length&&u<c.length;++u){const h=rv(A[u],c[u]);if(h!==0)return h;const d=Fd(o[A[u]],l[c[u]]);if(d!==0)return d}return pr(A.length,c.length)})(r.mapValue,t.mapValue);default:throw He(23264,{he:e})}}function uS(r,t){if(typeof r=="string"&&typeof t=="string"&&r.length===t.length)return pr(r,t);const e=Yl(r),n=Yl(t),i=pr(e.seconds,n.seconds);return i!==0?i:pr(e.nanos,n.nanos)}function dS(r,t){const e=r.values||[],n=t.values||[];for(let i=0;i<e.length&&i<n.length;++i){const s=Fd(e[i],n[i]);if(s)return s}return pr(e.length,n.length)}function Ld(r){return nv(r)}function nv(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(e){const n=Yl(e);return`time(${n.seconds},${n.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(e){return Xl(e).toBase64()})(r.bytesValue):"referenceValue"in r?(function(e){return Ue.fromName(e).toString()})(r.referenceValue):"geoPointValue"in r?(function(e){return`geo(${e.latitude},${e.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(e){let n="[",i=!0;for(const s of e.values||[])i?i=!1:n+=",",n+=nv(s);return n+"]"})(r.arrayValue):"mapValue"in r?(function(e){const n=Object.keys(e.fields||{}).sort();let i="{",s=!0;for(const a of n)s?s=!1:i+=",",i+=`${a}:${nv(e.fields[a])}`;return i+"}"})(r.mapValue):He(61005,{value:r})}function Om(r){switch(Jl(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=xb(r);return t?16+Om(t):16;case 5:return 2*r.stringValue.length;case 6:return Xl(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(n){return(n.values||[]).reduce(((i,s)=>i+Om(s)),0)})(r.arrayValue);case 10:case 11:return(function(n){let i=0;return Ac(n.fields,((s,a)=>{i+=s.length+Om(a)})),i})(r.mapValue);default:throw He(13486,{value:r})}}function hS(r,t){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${t.path.canonicalString()}`}}function iv(r){return!!r&&"integerValue"in r}function F2(r){return!!r&&"arrayValue"in r}function fS(r){return!!r&&"nullValue"in r}function gS(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Hm(r){return!!r&&"mapValue"in r}function ttt(r){var e,n;return((n=(((e=r==null?void 0:r.mapValue)==null?void 0:e.fields)||{})[I3])==null?void 0:n.stringValue)===T3}function wf(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const t={mapValue:{fields:{}}};return Ac(r.mapValue.fields,((e,n)=>t.mapValue.fields[e]=wf(n))),t}if(r.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(r.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=wf(r.arrayValue.values[e]);return t}return{...r}}function ett(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===ZZ}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(t){this.value=t}static empty(){return new zs({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let n=0;n<t.length-1;++n)if(e=(e.mapValue.fields||{})[t.get(n)],!Hm(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=wf(e)}setAll(t){let e=Fi.emptyPath(),n={},i=[];t.forEach(((a,o)=>{if(!e.isImmediateParentOf(o)){const A=this.getFieldsMap(e);this.applyChanges(A,n,i),n={},i=[],e=o.popLast()}a?n[o.lastSegment()]=wf(a):i.push(o.lastSegment())}));const s=this.getFieldsMap(e);this.applyChanges(s,n,i)}delete(t){const e=this.field(t.popLast());Hm(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Vo(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let n=0;n<t.length;++n){let i=e.mapValue.fields[t.get(n)];Hm(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=i),e=i}return e.mapValue.fields}applyChanges(t,e,n){Ac(e,((i,s)=>t[i]=s));for(const i of n)delete t[i]}clone(){return new zs(wf(this.value))}}function F3(r){const t=[];return Ac(r.fields,((e,n)=>{const i=new Fi([e]);if(Hm(n)){const s=F3(n.mapValue).fields;if(s.length===0)t.push(i);else for(const a of s)t.push(i.child(a))}else t.push(i)})),new ga(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(t,e,n,i,s,a,o){this.key=t,this.documentType=e,this.version=n,this.readTime=i,this.createTime=s,this.data=a,this.documentState=o}static newInvalidDocument(t){return new cs(t,0,ze.min(),ze.min(),ze.min(),zs.empty(),0)}static newFoundDocument(t,e,n,i){return new cs(t,1,e,ze.min(),n,i,0)}static newNoDocument(t,e){return new cs(t,2,e,ze.min(),ze.min(),zs.empty(),0)}static newUnknownDocument(t,e){return new cs(t,3,e,ze.min(),ze.min(),zs.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(ze.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=zs.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=zs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ze.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof cs&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new cs(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U0{constructor(t,e){this.position=t,this.inclusive=e}}function pS(r,t,e){let n=0;for(let i=0;i<r.position.length;i++){const s=t[i],a=r.position[i];if(s.field.isKeyField()?n=Ue.comparator(Ue.fromName(a.referenceValue),e.key):n=Fd(a,e.data.field(s.field)),s.dir==="desc"&&(n*=-1),n!==0)break}return n}function mS(r,t){if(r===null)return t===null;if(t===null||r.inclusive!==t.inclusive||r.position.length!==t.position.length)return!1;for(let e=0;e<r.position.length;e++)if(!Vo(r.position[e],t.position[e]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf{constructor(t,e="asc"){this.field=t,this.dir=e}}function rtt(r,t){return r.dir===t.dir&&r.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L3{}class si extends L3{constructor(t,e,n){super(),this.field=t,this.op=e,this.value=n}static create(t,e,n){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,n):new itt(t,e,n):e==="array-contains"?new ott(t,n):e==="in"?new Att(t,n):e==="not-in"?new ltt(t,n):e==="array-contains-any"?new ctt(t,n):new si(t,e,n)}static createKeyFieldInFilter(t,e,n){return e==="in"?new stt(t,n):new att(t,n)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&e.nullValue===void 0&&this.matchesComparison(Fd(e,this.value)):e!==null&&Jl(this.value)===Jl(e)&&this.matchesComparison(Fd(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return He(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class eo extends L3{constructor(t,e){super(),this.filters=t,this.op=e,this.Pe=null}static create(t,e){return new eo(t,e)}matches(t){return U3(this)?this.filters.find((e=>!e.matches(t)))===void 0:this.filters.find((e=>e.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,e)=>t.concat(e.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function U3(r){return r.op==="and"}function P3(r){return ntt(r)&&U3(r)}function ntt(r){for(const t of r.filters)if(t instanceof eo)return!1;return!0}function sv(r){if(r instanceof si)return r.field.canonicalString()+r.op.toString()+Ld(r.value);if(P3(r))return r.filters.map((t=>sv(t))).join(",");{const t=r.filters.map((e=>sv(e))).join(",");return`${r.op}(${t})`}}function N3(r,t){return r instanceof si?(function(n,i){return i instanceof si&&n.op===i.op&&n.field.isEqual(i.field)&&Vo(n.value,i.value)})(r,t):r instanceof eo?(function(n,i){return i instanceof eo&&n.op===i.op&&n.filters.length===i.filters.length?n.filters.reduce(((s,a,o)=>s&&N3(a,i.filters[o])),!0):!1})(r,t):void He(19439)}function D3(r){return r instanceof si?(function(e){return`${e.field.canonicalString()} ${e.op} ${Ld(e.value)}`})(r):r instanceof eo?(function(e){return e.op.toString()+" {"+e.getFilters().map(D3).join(" ,")+"}"})(r):"Filter"}class itt extends si{constructor(t,e,n){super(t,e,n),this.key=Ue.fromName(n.referenceValue)}matches(t){const e=Ue.comparator(t.key,this.key);return this.matchesComparison(e)}}class stt extends si{constructor(t,e){super(t,"in",e),this.keys=M3("in",e)}matches(t){return this.keys.some((e=>e.isEqual(t.key)))}}class att extends si{constructor(t,e){super(t,"not-in",e),this.keys=M3("not-in",e)}matches(t){return!this.keys.some((e=>e.isEqual(t.key)))}}function M3(r,t){var e;return(((e=t.arrayValue)==null?void 0:e.values)||[]).map((n=>Ue.fromName(n.referenceValue)))}class ott extends si{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return F2(e)&&Gf(e.arrayValue,this.value)}}class Att extends si{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&Gf(this.value.arrayValue,e)}}class ltt extends si{constructor(t,e){super(t,"not-in",e)}matches(t){if(Gf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&e.nullValue===void 0&&!Gf(this.value.arrayValue,e)}}class ctt extends si{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!F2(e)||!e.arrayValue.values)&&e.arrayValue.values.some((n=>Gf(this.value.arrayValue,n)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class utt{constructor(t,e=null,n=[],i=[],s=null,a=null,o=null){this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=i,this.limit=s,this.startAt=a,this.endAt=o,this.Te=null}}function bS(r,t=null,e=[],n=[],i=null,s=null,a=null){return new utt(r,t,e,n,i,s,a)}function L2(r){const t=Je(r);if(t.Te===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((n=>sv(n))).join(","),e+="|ob:",e+=t.orderBy.map((n=>(function(s){return s.field.canonicalString()+s.dir})(n))).join(","),vb(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((n=>Ld(n))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((n=>Ld(n))).join(",")),t.Te=e}return t.Te}function U2(r,t){if(r.limit!==t.limit||r.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<r.orderBy.length;e++)if(!rtt(r.orderBy[e],t.orderBy[e]))return!1;if(r.filters.length!==t.filters.length)return!1;for(let e=0;e<r.filters.length;e++)if(!N3(r.filters[e],t.filters[e]))return!1;return r.collectionGroup===t.collectionGroup&&!!r.path.isEqual(t.path)&&!!mS(r.startAt,t.startAt)&&mS(r.endAt,t.endAt)}function av(r){return Ue.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yd{constructor(t,e=null,n=[],i=[],s=null,a="F",o=null,A=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=i,this.limit=s,this.limitType=a,this.startAt=o,this.endAt=A,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function dtt(r,t,e,n,i,s,a,o){return new Yd(r,t,e,n,i,s,a,o)}function P2(r){return new Yd(r)}function yS(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function R3(r){return r.collectionGroup!==null}function vf(r){const t=Je(r);if(t.Ie===null){t.Ie=[];const e=new Set;for(const s of t.explicitOrderBy)t.Ie.push(s),e.add(s.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(a){let o=new yi(Fi.comparator);return a.filters.forEach((A=>{A.getFlattenedFilters().forEach((l=>{l.isInequality()&&(o=o.add(l.field))}))})),o})(t).forEach((s=>{e.has(s.canonicalString())||s.isKeyField()||t.Ie.push(new Kf(s,n))})),e.has(Fi.keyField().canonicalString())||t.Ie.push(new Kf(Fi.keyField(),n))}return t.Ie}function Uo(r){const t=Je(r);return t.Ee||(t.Ee=htt(t,vf(r))),t.Ee}function htt(r,t){if(r.limitType==="F")return bS(r.path,r.collectionGroup,t,r.filters,r.limit,r.startAt,r.endAt);{t=t.map((i=>{const s=i.dir==="desc"?"asc":"desc";return new Kf(i.field,s)}));const e=r.endAt?new U0(r.endAt.position,r.endAt.inclusive):null,n=r.startAt?new U0(r.startAt.position,r.startAt.inclusive):null;return bS(r.path,r.collectionGroup,t,r.filters,r.limit,e,n)}}function ov(r,t){const e=r.filters.concat([t]);return new Yd(r.path,r.collectionGroup,r.explicitOrderBy.slice(),e,r.limit,r.limitType,r.startAt,r.endAt)}function P0(r,t,e){return new Yd(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),t,e,r.startAt,r.endAt)}function _b(r,t){return U2(Uo(r),Uo(t))&&r.limitType===t.limitType}function Q3(r){return`${L2(Uo(r))}|lt:${r.limitType}`}function Ju(r){return`Query(target=${(function(e){let n=e.path.canonicalString();return e.collectionGroup!==null&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=`, filters: [${e.filters.map((i=>D3(i))).join(", ")}]`),vb(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=`, orderBy: [${e.orderBy.map((i=>(function(a){return`${a.field.canonicalString()} (${a.dir})`})(i))).join(", ")}]`),e.startAt&&(n+=", startAt: ",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((i=>Ld(i))).join(",")),e.endAt&&(n+=", endAt: ",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((i=>Ld(i))).join(",")),`Target(${n})`})(Uo(r))}; limitType=${r.limitType})`}function Bb(r,t){return t.isFoundDocument()&&(function(n,i){const s=i.key.path;return n.collectionGroup!==null?i.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):Ue.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)})(r,t)&&(function(n,i){for(const s of vf(n))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0})(r,t)&&(function(n,i){for(const s of n.filters)if(!s.matches(i))return!1;return!0})(r,t)&&(function(n,i){return!(n.startAt&&!(function(a,o,A){const l=pS(a,o,A);return a.inclusive?l<=0:l<0})(n.startAt,vf(n),i)||n.endAt&&!(function(a,o,A){const l=pS(a,o,A);return a.inclusive?l>=0:l>0})(n.endAt,vf(n),i))})(r,t)}function ftt(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function O3(r){return(t,e)=>{let n=!1;for(const i of vf(r)){const s=gtt(i,t,e);if(s!==0)return s;n=n||i.field.isKeyField()}return 0}}function gtt(r,t,e){const n=r.field.isKeyField()?Ue.comparator(t.key,e.key):(function(s,a,o){const A=a.data.field(s),l=o.data.field(s);return A!==null&&l!==null?Fd(A,l):He(42886)})(r.field,t,e);switch(r.dir){case"asc":return n;case"desc":return-1*n;default:return He(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),n=this.inner[e];if(n!==void 0){for(const[i,s]of n)if(this.equalsFn(i,t))return s}}has(t){return this.get(t)!==void 0}set(t,e){const n=this.mapKeyFn(t),i=this.inner[n];if(i===void 0)return this.inner[n]=[[t,e]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return void(i[s]=[t,e]);i.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),n=this.inner[e];if(n===void 0)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],t))return n.length===1?delete this.inner[e]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(t){Ac(this.inner,((e,n)=>{for(const[i,s]of n)t(i,s)}))}isEmpty(){return _3(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ptt=new Sn(Ue.comparator);function MA(){return ptt}const H3=new Sn(Ue.comparator);function qh(...r){let t=H3;for(const e of r)t=t.insert(e.key,e);return t}function V3(r){let t=H3;return r.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function Hc(){return xf()}function $3(){return xf()}function xf(){return new _u((r=>r.toString()),((r,t)=>r.isEqual(t)))}const mtt=new Sn(Ue.comparator),btt=new yi(Ue.comparator);function mr(...r){let t=btt;for(const e of r)t=t.add(e);return t}const ytt=new yi(pr);function wtt(){return ytt}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N2(r,t){if(r.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:T0(t)?"-0":t}}function j3(r){return{integerValue:""+r}}function vtt(r,t){return qZ(t)?j3(t):N2(r,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cb{constructor(){this._=void 0}}function xtt(r,t,e){return r instanceof zf?(function(i,s){const a={fields:{[E3]:{stringValue:C3},[k3]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&T2(s)&&(s=xb(s)),s&&(a.fields[S3]=s),{mapValue:a}})(e,t):r instanceof qf?K3(r,t):r instanceof Wf?z3(r,t):(function(i,s){const a=G3(i,s),o=wS(a)+wS(i.Ae);return iv(a)&&iv(i.Ae)?j3(o):N2(i.serializer,o)})(r,t)}function _tt(r,t,e){return r instanceof qf?K3(r,t):r instanceof Wf?z3(r,t):e}function G3(r,t){return r instanceof N0?(function(n){return iv(n)||(function(s){return!!s&&"doubleValue"in s})(n)})(t)?t:{integerValue:0}:null}class zf extends Cb{}class qf extends Cb{constructor(t){super(),this.elements=t}}function K3(r,t){const e=q3(t);for(const n of r.elements)e.some((i=>Vo(i,n)))||e.push(n);return{arrayValue:{values:e}}}class Wf extends Cb{constructor(t){super(),this.elements=t}}function z3(r,t){let e=q3(t);for(const n of r.elements)e=e.filter((i=>!Vo(i,n)));return{arrayValue:{values:e}}}class N0 extends Cb{constructor(t,e){super(),this.serializer=t,this.Ae=e}}function wS(r){return zn(r.integerValue||r.doubleValue)}function q3(r){return F2(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Btt{constructor(t,e){this.field=t,this.transform=e}}function Ctt(r,t){return r.field.isEqual(t.field)&&(function(n,i){return n instanceof qf&&i instanceof qf||n instanceof Wf&&i instanceof Wf?Id(n.elements,i.elements,Vo):n instanceof N0&&i instanceof N0?Vo(n.Ae,i.Ae):n instanceof zf&&i instanceof zf})(r.transform,t.transform)}class Ett{constructor(t,e){this.version=t,this.transformResults=e}}class Bs{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new Bs}static exists(t){return new Bs(void 0,t)}static updateTime(t){return new Bs(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Vm(r,t){return r.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(r.updateTime):r.exists===void 0||r.exists===t.isFoundDocument()}class Eb{}function W3(r,t){if(!r.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return r.isNoDocument()?new Sb(r.key,Bs.none()):new mg(r.key,r.data,Bs.none());{const e=r.data,n=zs.empty();let i=new yi(Fi.comparator);for(let s of t.fields)if(!i.has(s)){let a=e.field(s);a===null&&s.length>1&&(s=s.popLast(),a=e.field(s)),a===null?n.delete(s):n.set(s,a),i=i.add(s)}return new lc(r.key,n,new ga(i.toArray()),Bs.none())}}function Stt(r,t,e){r instanceof mg?(function(i,s,a){const o=i.value.clone(),A=xS(i.fieldTransforms,s,a.transformResults);o.setAll(A),s.convertToFoundDocument(a.version,o).setHasCommittedMutations()})(r,t,e):r instanceof lc?(function(i,s,a){if(!Vm(i.precondition,s))return void s.convertToUnknownDocument(a.version);const o=xS(i.fieldTransforms,s,a.transformResults),A=s.data;A.setAll(Y3(i)),A.setAll(o),s.convertToFoundDocument(a.version,A).setHasCommittedMutations()})(r,t,e):(function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()})(0,t,e)}function _f(r,t,e,n){return r instanceof mg?(function(s,a,o,A){if(!Vm(s.precondition,a))return o;const l=s.value.clone(),c=_S(s.fieldTransforms,A,a);return l.setAll(c),a.convertToFoundDocument(a.version,l).setHasLocalMutations(),null})(r,t,e,n):r instanceof lc?(function(s,a,o,A){if(!Vm(s.precondition,a))return o;const l=_S(s.fieldTransforms,A,a),c=a.data;return c.setAll(Y3(s)),c.setAll(l),a.convertToFoundDocument(a.version,c).setHasLocalMutations(),o===null?null:o.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map((u=>u.field)))})(r,t,e,n):(function(s,a,o){return Vm(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):o})(r,t,e)}function ktt(r,t){let e=null;for(const n of r.fieldTransforms){const i=t.data.field(n.field),s=G3(n.transform,i||null);s!=null&&(e===null&&(e=zs.empty()),e.set(n.field,s))}return e||null}function vS(r,t){return r.type===t.type&&!!r.key.isEqual(t.key)&&!!r.precondition.isEqual(t.precondition)&&!!(function(n,i){return n===void 0&&i===void 0||!(!n||!i)&&Id(n,i,((s,a)=>Ctt(s,a)))})(r.fieldTransforms,t.fieldTransforms)&&(r.type===0?r.value.isEqual(t.value):r.type!==1||r.data.isEqual(t.data)&&r.fieldMask.isEqual(t.fieldMask))}class mg extends Eb{constructor(t,e,n,i=[]){super(),this.key=t,this.value=e,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class lc extends Eb{constructor(t,e,n,i,s=[]){super(),this.key=t,this.data=e,this.fieldMask=n,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Y3(r){const t=new Map;return r.fieldMask.fields.forEach((e=>{if(!e.isEmpty()){const n=r.data.field(e);t.set(e,n)}})),t}function xS(r,t,e){const n=new Map;Dr(r.length===e.length,32656,{Re:e.length,Ve:r.length});for(let i=0;i<e.length;i++){const s=r[i],a=s.transform,o=t.data.field(s.field);n.set(s.field,_tt(a,o,e[i]))}return n}function _S(r,t,e){const n=new Map;for(const i of r){const s=i.transform,a=e.data.field(i.field);n.set(i.field,xtt(s,a,t))}return n}class Sb extends Eb{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Itt extends Eb{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ttt{constructor(t,e,n,i){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(t,e){const n=e.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(t.key)&&Stt(s,t,n[i])}}applyToLocalView(t,e){for(const n of this.baseMutations)n.key.isEqual(t.key)&&(e=_f(n,t,e,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(t.key)&&(e=_f(n,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const n=$3();return this.mutations.forEach((i=>{const s=t.get(i.key),a=s.overlayedDocument;let o=this.applyToLocalView(a,s.mutatedFields);o=e.has(i.key)?null:o;const A=W3(a,o);A!==null&&n.set(i.key,A),a.isValidDocument()||a.convertToNoDocument(ze.min())})),n}keys(){return this.mutations.reduce(((t,e)=>t.add(e.key)),mr())}isEqual(t){return this.batchId===t.batchId&&Id(this.mutations,t.mutations,((e,n)=>vS(e,n)))&&Id(this.baseMutations,t.baseMutations,((e,n)=>vS(e,n)))}}class D2{constructor(t,e,n,i){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=i}static from(t,e,n){Dr(t.mutations.length===n.length,58842,{me:t.mutations.length,fe:n.length});let i=(function(){return mtt})();const s=t.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,n[a].version);return new D2(t,e,n,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ftt{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ltt{constructor(t,e){this.count=t,this.unchangedNames=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ni,xr;function Utt(r){switch(r){case Kt.OK:return He(64938);case Kt.CANCELLED:case Kt.UNKNOWN:case Kt.DEADLINE_EXCEEDED:case Kt.RESOURCE_EXHAUSTED:case Kt.INTERNAL:case Kt.UNAVAILABLE:case Kt.UNAUTHENTICATED:return!1;case Kt.INVALID_ARGUMENT:case Kt.NOT_FOUND:case Kt.ALREADY_EXISTS:case Kt.PERMISSION_DENIED:case Kt.FAILED_PRECONDITION:case Kt.ABORTED:case Kt.OUT_OF_RANGE:case Kt.UNIMPLEMENTED:case Kt.DATA_LOSS:return!0;default:return He(15467,{code:r})}}function X3(r){if(r===void 0)return DA("GRPC error has no .code"),Kt.UNKNOWN;switch(r){case ni.OK:return Kt.OK;case ni.CANCELLED:return Kt.CANCELLED;case ni.UNKNOWN:return Kt.UNKNOWN;case ni.DEADLINE_EXCEEDED:return Kt.DEADLINE_EXCEEDED;case ni.RESOURCE_EXHAUSTED:return Kt.RESOURCE_EXHAUSTED;case ni.INTERNAL:return Kt.INTERNAL;case ni.UNAVAILABLE:return Kt.UNAVAILABLE;case ni.UNAUTHENTICATED:return Kt.UNAUTHENTICATED;case ni.INVALID_ARGUMENT:return Kt.INVALID_ARGUMENT;case ni.NOT_FOUND:return Kt.NOT_FOUND;case ni.ALREADY_EXISTS:return Kt.ALREADY_EXISTS;case ni.PERMISSION_DENIED:return Kt.PERMISSION_DENIED;case ni.FAILED_PRECONDITION:return Kt.FAILED_PRECONDITION;case ni.ABORTED:return Kt.ABORTED;case ni.OUT_OF_RANGE:return Kt.OUT_OF_RANGE;case ni.UNIMPLEMENTED:return Kt.UNIMPLEMENTED;case ni.DATA_LOSS:return Kt.DATA_LOSS;default:return He(39323,{code:r})}}(xr=ni||(ni={}))[xr.OK=0]="OK",xr[xr.CANCELLED=1]="CANCELLED",xr[xr.UNKNOWN=2]="UNKNOWN",xr[xr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",xr[xr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",xr[xr.NOT_FOUND=5]="NOT_FOUND",xr[xr.ALREADY_EXISTS=6]="ALREADY_EXISTS",xr[xr.PERMISSION_DENIED=7]="PERMISSION_DENIED",xr[xr.UNAUTHENTICATED=16]="UNAUTHENTICATED",xr[xr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",xr[xr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",xr[xr.ABORTED=10]="ABORTED",xr[xr.OUT_OF_RANGE=11]="OUT_OF_RANGE",xr[xr.UNIMPLEMENTED=12]="UNIMPLEMENTED",xr[xr.INTERNAL=13]="INTERNAL",xr[xr.UNAVAILABLE=14]="UNAVAILABLE",xr[xr.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ptt(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ntt=new Ql([4294967295,4294967295],0);function BS(r){const t=Ptt().encode(r),e=new c3;return e.update(t),new Uint8Array(e.digest())}function CS(r){const t=new DataView(r.buffer),e=t.getUint32(0,!0),n=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Ql([e,n],0),new Ql([i,s],0)]}class M2{constructor(t,e,n){if(this.bitmap=t,this.padding=e,this.hashCount=n,e<0||e>=8)throw new Wh(`Invalid padding: ${e}`);if(n<0)throw new Wh(`Invalid hash count: ${n}`);if(t.length>0&&this.hashCount===0)throw new Wh(`Invalid hash count: ${n}`);if(t.length===0&&e!==0)throw new Wh(`Invalid padding when bitmap length is 0: ${e}`);this.ge=8*t.length-e,this.pe=Ql.fromNumber(this.ge)}ye(t,e,n){let i=t.add(e.multiply(Ql.fromNumber(n)));return i.compare(Ntt)===1&&(i=new Ql([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const e=BS(t),[n,i]=CS(e);for(let s=0;s<this.hashCount;s++){const a=this.ye(n,i,s);if(!this.we(a))return!1}return!0}static create(t,e,n){const i=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),a=new M2(s,i,e);return n.forEach((o=>a.insert(o))),a}insert(t){if(this.ge===0)return;const e=BS(t),[n,i]=CS(e);for(let s=0;s<this.hashCount;s++){const a=this.ye(n,i,s);this.Se(a)}}Se(t){const e=Math.floor(t/8),n=t%8;this.bitmap[e]|=1<<n}}class Wh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kb{constructor(t,e,n,i,s){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,e,n){const i=new Map;return i.set(t,bg.createSynthesizedTargetChangeForCurrentChange(t,e,n)),new kb(ze.min(),i,new Sn(pr),MA(),mr())}}class bg{constructor(t,e,n,i,s){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,e,n){return new bg(n,e,mr(),mr(),mr())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m{constructor(t,e,n,i){this.be=t,this.removedTargetIds=e,this.key=n,this.De=i}}class J3{constructor(t,e){this.targetId=t,this.Ce=e}}class Z3{constructor(t,e,n=Pi.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=i}}class ES{constructor(){this.ve=0,this.Fe=SS(),this.Me=Pi.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=mr(),e=mr(),n=mr();return this.Fe.forEach(((i,s)=>{switch(s){case 0:t=t.add(i);break;case 2:e=e.add(i);break;case 1:n=n.add(i);break;default:He(38017,{changeType:s})}})),new bg(this.Me,this.xe,t,e,n)}qe(){this.Oe=!1,this.Fe=SS()}Qe(t,e){this.Oe=!0,this.Fe=this.Fe.insert(t,e)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,Dr(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Dtt{constructor(t){this.Ge=t,this.ze=new Map,this.je=MA(),this.Je=sm(),this.He=sm(),this.Ye=new Sn(pr)}Ze(t){for(const e of t.be)t.De&&t.De.isFoundDocument()?this.Xe(e,t.De):this.et(e,t.key,t.De);for(const e of t.removedTargetIds)this.et(e,t.key,t.De)}tt(t){this.forEachTarget(t,(e=>{const n=this.nt(e);switch(t.state){case 0:this.rt(e)&&n.Le(t.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(t.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(e);break;case 3:this.rt(e)&&(n.We(),n.Le(t.resumeToken));break;case 4:this.rt(e)&&(this.it(e),n.Le(t.resumeToken));break;default:He(56790,{state:t.state})}}))}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.ze.forEach(((n,i)=>{this.rt(i)&&e(i)}))}st(t){const e=t.targetId,n=t.Ce.count,i=this.ot(e);if(i){const s=i.target;if(av(s))if(n===0){const a=new Ue(s.path);this.et(e,a,cs.newNoDocument(a,ze.min()))}else Dr(n===1,20013,{expectedCount:n});else{const a=this._t(e);if(a!==n){const o=this.ut(t),A=o?this.ct(o,t,a):1;if(A!==0){this.it(e);const l=A===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(e,l)}}}}}ut(t){const e=t.Ce.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:n="",padding:i=0},hashCount:s=0}=e;let a,o;try{a=Xl(n).toUint8Array()}catch(A){if(A instanceof B3)return uu("Decoding the base64 bloom filter in existence filter failed ("+A.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw A}try{o=new M2(a,i,s)}catch(A){return uu(A instanceof Wh?"BloomFilter error: ":"Applying bloom filter failed: ",A),null}return o.ge===0?null:o}ct(t,e,n){return e.Ce.count===n-this.Pt(t,e.targetId)?0:2}Pt(t,e){const n=this.Ge.getRemoteKeysForTarget(e);let i=0;return n.forEach((s=>{const a=this.Ge.ht(),o=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;t.mightContain(o)||(this.et(e,s,null),i++)})),i}Tt(t){const e=new Map;this.ze.forEach(((s,a)=>{const o=this.ot(a);if(o){if(s.current&&av(o.target)){const A=new Ue(o.target.path);this.It(A).has(a)||this.Et(a,A)||this.et(a,A,cs.newNoDocument(A,t))}s.Be&&(e.set(a,s.ke()),s.qe())}}));let n=mr();this.He.forEach(((s,a)=>{let o=!0;a.forEachWhile((A=>{const l=this.ot(A);return!l||l.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)})),o&&(n=n.add(s))})),this.je.forEach(((s,a)=>a.setReadTime(t)));const i=new kb(t,e,this.Ye,this.je,n);return this.je=MA(),this.Je=sm(),this.He=sm(),this.Ye=new Sn(pr),i}Xe(t,e){if(!this.rt(t))return;const n=this.Et(t,e.key)?2:0;this.nt(t).Qe(e.key,n),this.je=this.je.insert(e.key,e),this.Je=this.Je.insert(e.key,this.It(e.key).add(t)),this.He=this.He.insert(e.key,this.dt(e.key).add(t))}et(t,e,n){if(!this.rt(t))return;const i=this.nt(t);this.Et(t,e)?i.Qe(e,1):i.$e(e),this.He=this.He.insert(e,this.dt(e).delete(t)),this.He=this.He.insert(e,this.dt(e).add(t)),n&&(this.je=this.je.insert(e,n))}removeTarget(t){this.ze.delete(t)}_t(t){const e=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let e=this.ze.get(t);return e||(e=new ES,this.ze.set(t,e)),e}dt(t){let e=this.He.get(t);return e||(e=new yi(pr),this.He=this.He.insert(t,e)),e}It(t){let e=this.Je.get(t);return e||(e=new yi(pr),this.Je=this.Je.insert(t,e)),e}rt(t){const e=this.ot(t)!==null;return e||ge("WatchChangeAggregator","Detected inactive target",t),e}ot(t){const e=this.ze.get(t);return e&&e.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new ES),this.Ge.getRemoteKeysForTarget(t).forEach((e=>{this.et(t,e,null)}))}Et(t,e){return this.Ge.getRemoteKeysForTarget(t).has(e)}}function sm(){return new Sn(Ue.comparator)}function SS(){return new Sn(Ue.comparator)}const Mtt={asc:"ASCENDING",desc:"DESCENDING"},Rtt={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Qtt={and:"AND",or:"OR"};class Ott{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function Av(r,t){return r.useProto3Json||vb(t)?t:{value:t}}function D0(r,t){return r.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function tL(r,t){return r.useProto3Json?t.toBase64():t.toUint8Array()}function Htt(r,t){return D0(r,t.toTimestamp())}function Po(r){return Dr(!!r,49232),ze.fromTimestamp((function(e){const n=Yl(e);return new ln(n.seconds,n.nanos)})(r))}function R2(r,t){return lv(r,t).canonicalString()}function lv(r,t){const e=(function(i){return new An(["projects",i.projectId,"databases",i.database])})(r).child("documents");return t===void 0?e:e.child(t)}function eL(r){const t=An.fromString(r);return Dr(aL(t),10190,{key:t.toString()}),t}function cv(r,t){return R2(r.databaseId,t.path)}function kw(r,t){const e=eL(t);if(e.get(1)!==r.databaseId.projectId)throw new le(Kt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+r.databaseId.projectId);if(e.get(3)!==r.databaseId.database)throw new le(Kt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+r.databaseId.database);return new Ue(nL(e))}function rL(r,t){return R2(r.databaseId,t)}function Vtt(r){const t=eL(r);return t.length===4?An.emptyPath():nL(t)}function uv(r){return new An(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function nL(r){return Dr(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function kS(r,t,e){return{name:cv(r,t),fields:e.value.mapValue.fields}}function $tt(r,t){let e;if("targetChange"in t){t.targetChange;const n=(function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:He(39313,{state:l})})(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=(function(l,c){return l.useProto3Json?(Dr(c===void 0||typeof c=="string",58123),Pi.fromBase64String(c||"")):(Dr(c===void 0||c instanceof Buffer||c instanceof Uint8Array,16193),Pi.fromUint8Array(c||new Uint8Array))})(r,t.targetChange.resumeToken),a=t.targetChange.cause,o=a&&(function(l){const c=l.code===void 0?Kt.UNKNOWN:X3(l.code);return new le(c,l.message||"")})(a);e=new Z3(n,i,s,o||null)}else if("documentChange"in t){t.documentChange;const n=t.documentChange;n.document,n.document.name,n.document.updateTime;const i=kw(r,n.document.name),s=Po(n.document.updateTime),a=n.document.createTime?Po(n.document.createTime):ze.min(),o=new zs({mapValue:{fields:n.document.fields}}),A=cs.newFoundDocument(i,s,a,o),l=n.targetIds||[],c=n.removedTargetIds||[];e=new $m(l,c,A.key,A)}else if("documentDelete"in t){t.documentDelete;const n=t.documentDelete;n.document;const i=kw(r,n.document),s=n.readTime?Po(n.readTime):ze.min(),a=cs.newNoDocument(i,s),o=n.removedTargetIds||[];e=new $m([],o,a.key,a)}else if("documentRemove"in t){t.documentRemove;const n=t.documentRemove;n.document;const i=kw(r,n.document),s=n.removedTargetIds||[];e=new $m([],s,i,null)}else{if(!("filter"in t))return He(11601,{Rt:t});{t.filter;const n=t.filter;n.targetId;const{count:i=0,unchangedNames:s}=n,a=new Ltt(i,s),o=n.targetId;e=new J3(o,a)}}return e}function jtt(r,t){let e;if(t instanceof mg)e={update:kS(r,t.key,t.value)};else if(t instanceof Sb)e={delete:cv(r,t.key)};else if(t instanceof lc)e={update:kS(r,t.key,t.data),updateMask:Ztt(t.fieldMask)};else{if(!(t instanceof Itt))return He(16599,{Vt:t.type});e={verify:cv(r,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map((n=>(function(s,a){const o=a.transform;if(o instanceof zf)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof qf)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Wf)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof N0)return{fieldPath:a.field.canonicalString(),increment:o.Ae};throw He(20930,{transform:a.transform})})(0,n)))),t.precondition.isNone||(e.currentDocument=(function(i,s){return s.updateTime!==void 0?{updateTime:Htt(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:He(27497)})(r,t.precondition)),e}function Gtt(r,t){return r&&r.length>0?(Dr(t!==void 0,14353),r.map((e=>(function(i,s){let a=i.updateTime?Po(i.updateTime):Po(s);return a.isEqual(ze.min())&&(a=Po(s)),new Ett(a,i.transformResults||[])})(e,t)))):[]}function Ktt(r,t){return{documents:[rL(r,t.path)]}}function ztt(r,t){const e={structuredQuery:{}},n=t.path;let i;t.collectionGroup!==null?(i=n,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=n.popLast(),e.structuredQuery.from=[{collectionId:n.lastSegment()}]),e.parent=rL(r,i);const s=(function(l){if(l.length!==0)return sL(eo.create(l,"and"))})(t.filters);s&&(e.structuredQuery.where=s);const a=(function(l){if(l.length!==0)return l.map((c=>(function(h){return{field:Zu(h.field),direction:Ytt(h.dir)}})(c)))})(t.orderBy);a&&(e.structuredQuery.orderBy=a);const o=Av(r,t.limit);return o!==null&&(e.structuredQuery.limit=o),t.startAt&&(e.structuredQuery.startAt=(function(l){return{before:l.inclusive,values:l.position}})(t.startAt)),t.endAt&&(e.structuredQuery.endAt=(function(l){return{before:!l.inclusive,values:l.position}})(t.endAt)),{ft:e,parent:i}}function qtt(r){let t=Vtt(r.parent);const e=r.structuredQuery,n=e.from?e.from.length:0;let i=null;if(n>0){Dr(n===1,65062);const c=e.from[0];c.allDescendants?i=c.collectionId:t=t.child(c.collectionId)}let s=[];e.where&&(s=(function(u){const h=iL(u);return h instanceof eo&&P3(h)?h.getFilters():[h]})(e.where));let a=[];e.orderBy&&(a=(function(u){return u.map((h=>(function(m){return new Kf(td(m.field),(function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(m.direction))})(h)))})(e.orderBy));let o=null;e.limit&&(o=(function(u){let h;return h=typeof u=="object"?u.value:u,vb(h)?null:h})(e.limit));let A=null;e.startAt&&(A=(function(u){const h=!!u.before,d=u.values||[];return new U0(d,h)})(e.startAt));let l=null;return e.endAt&&(l=(function(u){const h=!u.before,d=u.values||[];return new U0(d,h)})(e.endAt)),dtt(t,i,a,s,o,"F",A,l)}function Wtt(r,t){const e=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return He(28987,{purpose:i})}})(t.purpose);return e==null?null:{"goog-listen-tags":e}}function iL(r){return r.unaryFilter!==void 0?(function(e){switch(e.unaryFilter.op){case"IS_NAN":const n=td(e.unaryFilter.field);return si.create(n,"==",{doubleValue:NaN});case"IS_NULL":const i=td(e.unaryFilter.field);return si.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=td(e.unaryFilter.field);return si.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=td(e.unaryFilter.field);return si.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return He(61313);default:return He(60726)}})(r):r.fieldFilter!==void 0?(function(e){return si.create(td(e.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return He(58110);default:return He(50506)}})(e.fieldFilter.op),e.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(e){return eo.create(e.compositeFilter.filters.map((n=>iL(n))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return He(1026)}})(e.compositeFilter.op))})(r):He(30097,{filter:r})}function Ytt(r){return Mtt[r]}function Xtt(r){return Rtt[r]}function Jtt(r){return Qtt[r]}function Zu(r){return{fieldPath:r.canonicalString()}}function td(r){return Fi.fromServerFormat(r.fieldPath)}function sL(r){return r instanceof si?(function(e){if(e.op==="=="){if(gS(e.value))return{unaryFilter:{field:Zu(e.field),op:"IS_NAN"}};if(fS(e.value))return{unaryFilter:{field:Zu(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(gS(e.value))return{unaryFilter:{field:Zu(e.field),op:"IS_NOT_NAN"}};if(fS(e.value))return{unaryFilter:{field:Zu(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Zu(e.field),op:Xtt(e.op),value:e.value}}})(r):r instanceof eo?(function(e){const n=e.getFilters().map((i=>sL(i)));return n.length===1?n[0]:{compositeFilter:{op:Jtt(e.op),filters:n}}})(r):He(54877,{filter:r})}function Ztt(r){const t=[];return r.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function aL(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{constructor(t,e,n,i,s=ze.min(),a=ze.min(),o=Pi.EMPTY_BYTE_STRING,A=null){this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=A}withSequenceNumber(t){return new Tl(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new Tl(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Tl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Tl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tet{constructor(t){this.yt=t}}function eet(r){const t=qtt({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?P0(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ret{constructor(){this.Cn=new net}addToCollectionParentIndex(t,e){return this.Cn.add(e),Wt.resolve()}getCollectionParents(t,e){return Wt.resolve(this.Cn.getEntries(e))}addFieldIndex(t,e){return Wt.resolve()}deleteFieldIndex(t,e){return Wt.resolve()}deleteAllFieldIndexes(t){return Wt.resolve()}createTargetIndexes(t,e){return Wt.resolve()}getDocumentsMatchingTarget(t,e){return Wt.resolve(null)}getIndexType(t,e){return Wt.resolve(0)}getFieldIndexes(t,e){return Wt.resolve([])}getNextCollectionGroupToUpdate(t){return Wt.resolve(null)}getMinOffset(t,e){return Wt.resolve(Wl.min())}getMinOffsetFromCollectionGroup(t,e){return Wt.resolve(Wl.min())}updateCollectionGroup(t,e,n){return Wt.resolve()}updateIndexEntries(t,e){return Wt.resolve()}}class net{constructor(){this.index={}}add(t){const e=t.lastSegment(),n=t.popLast(),i=this.index[e]||new yi(An.comparator),s=!i.has(n);return this.index[e]=i.add(n),s}has(t){const e=t.lastSegment(),n=t.popLast(),i=this.index[e];return i&&i.has(n)}getEntries(t){return(this.index[t]||new yi(An.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},oL=41943040;class Os{static withCacheSize(t){return new Os(t,Os.DEFAULT_COLLECTION_PERCENTILE,Os.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Os.DEFAULT_COLLECTION_PERCENTILE=10,Os.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Os.DEFAULT=new Os(oL,Os.DEFAULT_COLLECTION_PERCENTILE,Os.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Os.DISABLED=new Os(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new Ud(0)}static cr(){return new Ud(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TS="LruGarbageCollector",iet=1048576;function FS([r,t],[e,n]){const i=pr(r,e);return i===0?pr(t,n):i}class set{constructor(t){this.Ir=t,this.buffer=new yi(FS),this.Er=0}dr(){return++this.Er}Ar(t){const e=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(e);else{const n=this.buffer.last();FS(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}}get maxValue(){return this.buffer.last()[0]}}class aet{constructor(t,e,n){this.garbageCollector=t,this.asyncQueue=e,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){ge(TS,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Wd(e)?ge(TS,"Ignoring IndexedDB error during garbage collection: ",e):await qd(e)}await this.Vr(3e5)}))}}class oet{constructor(t,e){this.mr=t,this.params=e}calculateTargetCount(t,e){return this.mr.gr(t).next((n=>Math.floor(e/100*n)))}nthSequenceNumber(t,e){if(e===0)return Wt.resolve(wb.ce);const n=new set(e);return this.mr.forEachTarget(t,(i=>n.Ar(i.sequenceNumber))).next((()=>this.mr.pr(t,(i=>n.Ar(i))))).next((()=>n.maxValue))}removeTargets(t,e,n){return this.mr.removeTargets(t,e,n)}removeOrphanedDocuments(t,e){return this.mr.removeOrphanedDocuments(t,e)}collect(t,e){return this.params.cacheSizeCollectionThreshold===-1?(ge("LruGarbageCollector","Garbage collection skipped; disabled"),Wt.resolve(IS)):this.getCacheSize(t).next((n=>n<this.params.cacheSizeCollectionThreshold?(ge("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),IS):this.yr(t,e)))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,e){let n,i,s,a,o,A,l;const c=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((u=>(u>this.params.maximumSequenceNumbersToCollect?(ge("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${u}`),i=this.params.maximumSequenceNumbersToCollect):i=u,a=Date.now(),this.nthSequenceNumber(t,i)))).next((u=>(n=u,o=Date.now(),this.removeTargets(t,n,e)))).next((u=>(s=u,A=Date.now(),this.removeOrphanedDocuments(t,n)))).next((u=>(l=Date.now(),Xu()<=gr.DEBUG&&ge("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-c}ms
	Determined least recently used ${i} in `+(o-a)+`ms
	Removed ${s} targets in `+(A-o)+`ms
	Removed ${u} documents in `+(l-A)+`ms
Total Duration: ${l-c}ms`),Wt.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:u}))))}}function Aet(r,t){return new oet(r,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cet{constructor(){this.changes=new _u((t=>t.toString()),((t,e)=>t.isEqual(e))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,cs.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const n=this.changes.get(e);return n!==void 0?Wt.resolve(n):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uet{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class det{constructor(t,e,n,i){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=n,this.indexManager=i}getDocument(t,e){let n=null;return this.documentOverlayCache.getOverlay(t,e).next((i=>(n=i,this.remoteDocumentCache.getEntry(t,e)))).next((i=>(n!==null&&_f(n.mutation,i,ga.empty(),ln.now()),i)))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next((n=>this.getLocalViewOfDocuments(t,n,mr()).next((()=>n))))}getLocalViewOfDocuments(t,e,n=mr()){const i=Hc();return this.populateOverlays(t,i,e).next((()=>this.computeViews(t,e,i,n).next((s=>{let a=qh();return s.forEach(((o,A)=>{a=a.insert(o,A.overlayedDocument)})),a}))))}getOverlayedDocuments(t,e){const n=Hc();return this.populateOverlays(t,n,e).next((()=>this.computeViews(t,e,n,mr())))}populateOverlays(t,e,n){const i=[];return n.forEach((s=>{e.has(s)||i.push(s)})),this.documentOverlayCache.getOverlays(t,i).next((s=>{s.forEach(((a,o)=>{e.set(a,o)}))}))}computeViews(t,e,n,i){let s=MA();const a=xf(),o=(function(){return xf()})();return e.forEach(((A,l)=>{const c=n.get(l.key);i.has(l.key)&&(c===void 0||c.mutation instanceof lc)?s=s.insert(l.key,l):c!==void 0?(a.set(l.key,c.mutation.getFieldMask()),_f(c.mutation,l,c.mutation.getFieldMask(),ln.now())):a.set(l.key,ga.empty())})),this.recalculateAndSaveOverlays(t,s).next((A=>(A.forEach(((l,c)=>a.set(l,c))),e.forEach(((l,c)=>o.set(l,new uet(c,a.get(l)??null)))),o)))}recalculateAndSaveOverlays(t,e){const n=xf();let i=new Sn(((a,o)=>a-o)),s=mr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next((a=>{for(const o of a)o.keys().forEach((A=>{const l=e.get(A);if(l===null)return;let c=n.get(A)||ga.empty();c=o.applyToLocalView(l,c),n.set(A,c);const u=(i.get(o.batchId)||mr()).add(A);i=i.insert(o.batchId,u)}))})).next((()=>{const a=[],o=i.getReverseIterator();for(;o.hasNext();){const A=o.getNext(),l=A.key,c=A.value,u=$3();c.forEach((h=>{if(!s.has(h)){const d=W3(e.get(h),n.get(h));d!==null&&u.set(h,d),s=s.add(h)}})),a.push(this.documentOverlayCache.saveOverlays(t,l,u))}return Wt.waitFor(a)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next((n=>this.recalculateAndSaveOverlays(t,n)))}getDocumentsMatchingQuery(t,e,n,i){return(function(a){return Ue.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0})(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):R3(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,n,i):this.getDocumentsMatchingCollectionQuery(t,e,n,i)}getNextDocuments(t,e,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,n,i).next((s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,n.largestBatchId,i-s.size):Wt.resolve(Hc());let o=$f,A=s;return a.next((l=>Wt.forEach(l,((c,u)=>(o<u.largestBatchId&&(o=u.largestBatchId),s.get(c)?Wt.resolve():this.remoteDocumentCache.getEntry(t,c).next((h=>{A=A.insert(c,h)}))))).next((()=>this.populateOverlays(t,l,s))).next((()=>this.computeViews(t,A,l,mr()))).next((c=>({batchId:o,changes:V3(c)})))))}))}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new Ue(e)).next((n=>{let i=qh();return n.isFoundDocument()&&(i=i.insert(n.key,n)),i}))}getDocumentsMatchingCollectionGroupQuery(t,e,n,i){const s=e.collectionGroup;let a=qh();return this.indexManager.getCollectionParents(t,s).next((o=>Wt.forEach(o,(A=>{const l=(function(u,h){return new Yd(h,null,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt)})(e,A.child(s));return this.getDocumentsMatchingCollectionQuery(t,l,n,i).next((c=>{c.forEach(((u,h)=>{a=a.insert(u,h)}))}))})).next((()=>a))))}getDocumentsMatchingCollectionQuery(t,e,n,i){let s;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,n.largestBatchId).next((a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,n,s,i)))).next((a=>{s.forEach(((A,l)=>{const c=l.getKey();a.get(c)===null&&(a=a.insert(c,cs.newInvalidDocument(c)))}));let o=qh();return a.forEach(((A,l)=>{const c=s.get(A);c!==void 0&&_f(c.mutation,l,ga.empty(),ln.now()),Bb(e,l)&&(o=o.insert(A,l))})),o}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class het{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,e){return Wt.resolve(this.Lr.get(e))}saveBundleMetadata(t,e){return this.Lr.set(e.id,(function(i){return{id:i.id,version:i.version,createTime:Po(i.createTime)}})(e)),Wt.resolve()}getNamedQuery(t,e){return Wt.resolve(this.kr.get(e))}saveNamedQuery(t,e){return this.kr.set(e.name,(function(i){return{name:i.name,query:eet(i.bundledQuery),readTime:Po(i.readTime)}})(e)),Wt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fet{constructor(){this.overlays=new Sn(Ue.comparator),this.qr=new Map}getOverlay(t,e){return Wt.resolve(this.overlays.get(e))}getOverlays(t,e){const n=Hc();return Wt.forEach(e,(i=>this.getOverlay(t,i).next((s=>{s!==null&&n.set(i,s)})))).next((()=>n))}saveOverlays(t,e,n){return n.forEach(((i,s)=>{this.St(t,e,s)})),Wt.resolve()}removeOverlaysForBatchId(t,e,n){const i=this.qr.get(n);return i!==void 0&&(i.forEach((s=>this.overlays=this.overlays.remove(s))),this.qr.delete(n)),Wt.resolve()}getOverlaysForCollection(t,e,n){const i=Hc(),s=e.length+1,a=new Ue(e.child("")),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){const A=o.getNext().value,l=A.getKey();if(!e.isPrefixOf(l.path))break;l.path.length===s&&A.largestBatchId>n&&i.set(A.getKey(),A)}return Wt.resolve(i)}getOverlaysForCollectionGroup(t,e,n,i){let s=new Sn(((l,c)=>l-c));const a=this.overlays.getIterator();for(;a.hasNext();){const l=a.getNext().value;if(l.getKey().getCollectionGroup()===e&&l.largestBatchId>n){let c=s.get(l.largestBatchId);c===null&&(c=Hc(),s=s.insert(l.largestBatchId,c)),c.set(l.getKey(),l)}}const o=Hc(),A=s.getIterator();for(;A.hasNext()&&(A.getNext().value.forEach(((l,c)=>o.set(l,c))),!(o.size()>=i)););return Wt.resolve(o)}St(t,e,n){const i=this.overlays.get(n.key);if(i!==null){const a=this.qr.get(i.largestBatchId).delete(n.key);this.qr.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(n.key,new Ftt(e,n));let s=this.qr.get(e);s===void 0&&(s=mr(),this.qr.set(e,s)),this.qr.set(e,s.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class get{constructor(){this.sessionToken=Pi.EMPTY_BYTE_STRING}getSessionToken(t){return Wt.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,Wt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q2{constructor(){this.Qr=new yi(Ii.$r),this.Ur=new yi(Ii.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,e){const n=new Ii(t,e);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(t,e){t.forEach((n=>this.addReference(n,e)))}removeReference(t,e){this.Gr(new Ii(t,e))}zr(t,e){t.forEach((n=>this.removeReference(n,e)))}jr(t){const e=new Ue(new An([])),n=new Ii(e,t),i=new Ii(e,t+1),s=[];return this.Ur.forEachInRange([n,i],(a=>{this.Gr(a),s.push(a.key)})),s}Jr(){this.Qr.forEach((t=>this.Gr(t)))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const e=new Ue(new An([])),n=new Ii(e,t),i=new Ii(e,t+1);let s=mr();return this.Ur.forEachInRange([n,i],(a=>{s=s.add(a.key)})),s}containsKey(t){const e=new Ii(t,0),n=this.Qr.firstAfterOrEqual(e);return n!==null&&t.isEqual(n.key)}}class Ii{constructor(t,e){this.key=t,this.Yr=e}static $r(t,e){return Ue.comparator(t.key,e.key)||pr(t.Yr,e.Yr)}static Kr(t,e){return pr(t.Yr,e.Yr)||Ue.comparator(t.key,e.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pet{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.tr=1,this.Zr=new yi(Ii.$r)}checkEmpty(t){return Wt.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,n,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new Ttt(s,e,n,i);this.mutationQueue.push(a);for(const o of i)this.Zr=this.Zr.add(new Ii(o.key,s)),this.indexManager.addToCollectionParentIndex(t,o.key.path.popLast());return Wt.resolve(a)}lookupMutationBatch(t,e){return Wt.resolve(this.Xr(e))}getNextMutationBatchAfterBatchId(t,e){const n=e+1,i=this.ei(n),s=i<0?0:i;return Wt.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Wt.resolve(this.mutationQueue.length===0?I2:this.tr-1)}getAllMutationBatches(t){return Wt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const n=new Ii(e,0),i=new Ii(e,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([n,i],(a=>{const o=this.Xr(a.Yr);s.push(o)})),Wt.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new yi(pr);return e.forEach((i=>{const s=new Ii(i,0),a=new Ii(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,a],(o=>{n=n.add(o.Yr)}))})),Wt.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(t,e){const n=e.path,i=n.length+1;let s=n;Ue.isDocumentKey(s)||(s=s.child(""));const a=new Ii(new Ue(s),0);let o=new yi(pr);return this.Zr.forEachWhile((A=>{const l=A.key.path;return!!n.isPrefixOf(l)&&(l.length===i&&(o=o.add(A.Yr)),!0)}),a),Wt.resolve(this.ti(o))}ti(t){const e=[];return t.forEach((n=>{const i=this.Xr(n);i!==null&&e.push(i)})),e}removeMutationBatch(t,e){Dr(this.ni(e.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Zr;return Wt.forEach(e.mutations,(i=>{const s=new Ii(i.key,e.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((()=>{this.Zr=n}))}ir(t){}containsKey(t,e){const n=new Ii(e,0),i=this.Zr.firstAfterOrEqual(n);return Wt.resolve(e.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,Wt.resolve()}ni(t,e){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const e=this.ei(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class met{constructor(t){this.ri=t,this.docs=(function(){return new Sn(Ue.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const n=e.key,i=this.docs.get(n),s=i?i.size:0,a=this.ri(e);return this.docs=this.docs.insert(n,{document:e.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const n=this.docs.get(e);return Wt.resolve(n?n.document.mutableCopy():cs.newInvalidDocument(e))}getEntries(t,e){let n=MA();return e.forEach((i=>{const s=this.docs.get(i);n=n.insert(i,s?s.document.mutableCopy():cs.newInvalidDocument(i))})),Wt.resolve(n)}getDocumentsMatchingQuery(t,e,n,i){let s=MA();const a=e.path,o=new Ue(a.child("__id-9223372036854775808__")),A=this.docs.getIteratorFrom(o);for(;A.hasNext();){const{key:l,value:{document:c}}=A.getNext();if(!a.isPrefixOf(l.path))break;l.path.length>a.length+1||jZ($Z(c),n)<=0||(i.has(c.key)||Bb(e,c))&&(s=s.insert(c.key,c.mutableCopy()))}return Wt.resolve(s)}getAllFromCollectionGroup(t,e,n,i){He(9500)}ii(t,e){return Wt.forEach(this.docs,(n=>e(n)))}newChangeBuffer(t){return new bet(this)}getSize(t){return Wt.resolve(this.size)}}class bet extends cet{constructor(t){super(),this.Nr=t}applyChanges(t){const e=[];return this.changes.forEach(((n,i)=>{i.isValidDocument()?e.push(this.Nr.addEntry(t,i)):this.Nr.removeEntry(n)})),Wt.waitFor(e)}getFromCache(t,e){return this.Nr.getEntry(t,e)}getAllFromCache(t,e){return this.Nr.getEntries(t,e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yet{constructor(t){this.persistence=t,this.si=new _u((e=>L2(e)),U2),this.lastRemoteSnapshotVersion=ze.min(),this.highestTargetId=0,this.oi=0,this._i=new Q2,this.targetCount=0,this.ai=Ud.ur()}forEachTarget(t,e){return this.si.forEach(((n,i)=>e(i))),Wt.resolve()}getLastRemoteSnapshotVersion(t){return Wt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Wt.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),Wt.resolve(this.highestTargetId)}setTargetsMetadata(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.oi&&(this.oi=e),Wt.resolve()}Pr(t){this.si.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.ai=new Ud(e),this.highestTargetId=e),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,e){return this.Pr(e),this.targetCount+=1,Wt.resolve()}updateTargetData(t,e){return this.Pr(e),Wt.resolve()}removeTargetData(t,e){return this.si.delete(e.target),this._i.jr(e.targetId),this.targetCount-=1,Wt.resolve()}removeTargets(t,e,n){let i=0;const s=[];return this.si.forEach(((a,o)=>{o.sequenceNumber<=e&&n.get(o.targetId)===null&&(this.si.delete(a),s.push(this.removeMatchingKeysForTargetId(t,o.targetId)),i++)})),Wt.waitFor(s).next((()=>i))}getTargetCount(t){return Wt.resolve(this.targetCount)}getTargetData(t,e){const n=this.si.get(e)||null;return Wt.resolve(n)}addMatchingKeys(t,e,n){return this._i.Wr(e,n),Wt.resolve()}removeMatchingKeys(t,e,n){this._i.zr(e,n);const i=this.persistence.referenceDelegate,s=[];return i&&e.forEach((a=>{s.push(i.markPotentiallyOrphaned(t,a))})),Wt.waitFor(s)}removeMatchingKeysForTargetId(t,e){return this._i.jr(e),Wt.resolve()}getMatchingKeysForTargetId(t,e){const n=this._i.Hr(e);return Wt.resolve(n)}containsKey(t,e){return Wt.resolve(this._i.containsKey(e))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AL{constructor(t,e){this.ui={},this.overlays={},this.ci=new wb(0),this.li=!1,this.li=!0,this.hi=new get,this.referenceDelegate=t(this),this.Pi=new yet(this),this.indexManager=new ret,this.remoteDocumentCache=(function(i){return new met(i)})((n=>this.referenceDelegate.Ti(n))),this.serializer=new tet(e),this.Ii=new het(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new fet,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let n=this.ui[t.toKey()];return n||(n=new pet(e,this.referenceDelegate),this.ui[t.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,e,n){ge("MemoryPersistence","Starting transaction:",t);const i=new wet(this.ci.next());return this.referenceDelegate.Ei(),n(i).next((s=>this.referenceDelegate.di(i).next((()=>s)))).toPromise().then((s=>(i.raiseOnCommittedEvent(),s)))}Ai(t,e){return Wt.or(Object.values(this.ui).map((n=>()=>n.containsKey(t,e))))}}class wet extends KZ{constructor(t){super(),this.currentSequenceNumber=t}}class O2{constructor(t){this.persistence=t,this.Ri=new Q2,this.Vi=null}static mi(t){return new O2(t)}get fi(){if(this.Vi)return this.Vi;throw He(60996)}addReference(t,e,n){return this.Ri.addReference(n,e),this.fi.delete(n.toString()),Wt.resolve()}removeReference(t,e,n){return this.Ri.removeReference(n,e),this.fi.add(n.toString()),Wt.resolve()}markPotentiallyOrphaned(t,e){return this.fi.add(e.toString()),Wt.resolve()}removeTarget(t,e){this.Ri.jr(e.targetId).forEach((i=>this.fi.add(i.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,e.targetId).next((i=>{i.forEach((s=>this.fi.add(s.toString())))})).next((()=>n.removeTargetData(t,e)))}Ei(){this.Vi=new Set}di(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Wt.forEach(this.fi,(n=>{const i=Ue.fromPath(n);return this.gi(t,i).next((s=>{s||e.removeEntry(i,ze.min())}))})).next((()=>(this.Vi=null,e.apply(t))))}updateLimboDocument(t,e){return this.gi(t,e).next((n=>{n?this.fi.delete(e.toString()):this.fi.add(e.toString())}))}Ti(t){return 0}gi(t,e){return Wt.or([()=>Wt.resolve(this.Ri.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ai(t,e)])}}class M0{constructor(t,e){this.persistence=t,this.pi=new _u((n=>WZ(n.path)),((n,i)=>n.isEqual(i))),this.garbageCollector=Aet(this,e)}static mi(t,e){return new M0(t,e)}Ei(){}di(t){return Wt.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}gr(t){const e=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next((n=>e.next((i=>n+i))))}wr(t){let e=0;return this.pr(t,(n=>{e++})).next((()=>e))}pr(t,e){return Wt.forEach(this.pi,((n,i)=>this.br(t,n,i).next((s=>s?Wt.resolve():e(i)))))}removeTargets(t,e,n){return this.persistence.getTargetCache().removeTargets(t,e,n)}removeOrphanedDocuments(t,e){let n=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(t,(a=>this.br(t,a,e).next((o=>{o||(n++,s.removeEntry(a,ze.min()))})))).next((()=>s.apply(t))).next((()=>n))}markPotentiallyOrphaned(t,e){return this.pi.set(e,t.currentSequenceNumber),Wt.resolve()}removeTarget(t,e){const n=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,n)}addReference(t,e,n){return this.pi.set(n,t.currentSequenceNumber),Wt.resolve()}removeReference(t,e,n){return this.pi.set(n,t.currentSequenceNumber),Wt.resolve()}updateLimboDocument(t,e){return this.pi.set(e,t.currentSequenceNumber),Wt.resolve()}Ti(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=Om(t.data.value)),e}br(t,e,n){return Wt.or([()=>this.persistence.Ai(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{const i=this.pi.get(e);return Wt.resolve(i!==void 0&&i>n)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H2{constructor(t,e,n,i){this.targetId=t,this.fromCache=e,this.Es=n,this.ds=i}static As(t,e){let n=mr(),i=mr();for(const s of e.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new H2(t,e.fromCache,n,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vet{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xet{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return XW()?8:zZ(fs())>0?6:4})()}initialize(t,e){this.ps=t,this.indexManager=e,this.Rs=!0}getDocumentsMatchingQuery(t,e,n,i){const s={result:null};return this.ys(t,e).next((a=>{s.result=a})).next((()=>{if(!s.result)return this.ws(t,e,i,n).next((a=>{s.result=a}))})).next((()=>{if(s.result)return;const a=new vet;return this.Ss(t,e,a).next((o=>{if(s.result=o,this.Vs)return this.bs(t,e,a,o.size)}))})).next((()=>s.result))}bs(t,e,n,i){return n.documentReadCount<this.fs?(Xu()<=gr.DEBUG&&ge("QueryEngine","SDK will not create cache indexes for query:",Ju(e),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Wt.resolve()):(Xu()<=gr.DEBUG&&ge("QueryEngine","Query:",Ju(e),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.gs*i?(Xu()<=gr.DEBUG&&ge("QueryEngine","The SDK decides to create cache indexes for query:",Ju(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Uo(e))):Wt.resolve())}ys(t,e){if(yS(e))return Wt.resolve(null);let n=Uo(e);return this.indexManager.getIndexType(t,n).next((i=>i===0?null:(e.limit!==null&&i===1&&(e=P0(e,null,"F"),n=Uo(e)),this.indexManager.getDocumentsMatchingTarget(t,n).next((s=>{const a=mr(...s);return this.ps.getDocuments(t,a).next((o=>this.indexManager.getMinOffset(t,n).next((A=>{const l=this.Ds(e,o);return this.Cs(e,l,a,A.readTime)?this.ys(t,P0(e,null,"F")):this.vs(t,l,e,A)}))))})))))}ws(t,e,n,i){return yS(e)||i.isEqual(ze.min())?Wt.resolve(null):this.ps.getDocuments(t,n).next((s=>{const a=this.Ds(e,s);return this.Cs(e,a,n,i)?Wt.resolve(null):(Xu()<=gr.DEBUG&&ge("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ju(e)),this.vs(t,a,e,VZ(i,$f)).next((o=>o)))}))}Ds(t,e){let n=new yi(O3(t));return e.forEach(((i,s)=>{Bb(t,s)&&(n=n.add(s))})),n}Cs(t,e,n,i){if(t.limit===null)return!1;if(n.size!==e.size)return!0;const s=t.limitType==="F"?e.last():e.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(t,e,n){return Xu()<=gr.DEBUG&&ge("QueryEngine","Using full collection scan to execute query:",Ju(e)),this.ps.getDocumentsMatchingQuery(t,e,Wl.min(),n)}vs(t,e,n,i){return this.ps.getDocumentsMatchingQuery(t,n,i).next((s=>(e.forEach((a=>{s=s.insert(a.key,a)})),s)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V2="LocalStore",_et=3e8;class Bet{constructor(t,e,n,i){this.persistence=t,this.Fs=e,this.serializer=i,this.Ms=new Sn(pr),this.xs=new _u((s=>L2(s)),U2),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(n)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new det(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(e=>t.collect(e,this.Ms)))}}function Cet(r,t,e,n){return new Bet(r,t,e,n)}async function lL(r,t){const e=Je(r);return await e.persistence.runTransaction("Handle user change","readonly",(n=>{let i;return e.mutationQueue.getAllMutationBatches(n).next((s=>(i=s,e.Bs(t),e.mutationQueue.getAllMutationBatches(n)))).next((s=>{const a=[],o=[];let A=mr();for(const l of i){a.push(l.batchId);for(const c of l.mutations)A=A.add(c.key)}for(const l of s){o.push(l.batchId);for(const c of l.mutations)A=A.add(c.key)}return e.localDocuments.getDocuments(n,A).next((l=>({Ls:l,removedBatchIds:a,addedBatchIds:o})))}))}))}function Eet(r,t){const e=Je(r);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",(n=>{const i=t.batch.keys(),s=e.Ns.newChangeBuffer({trackRemovals:!0});return(function(o,A,l,c){const u=l.batch,h=u.keys();let d=Wt.resolve();return h.forEach((m=>{d=d.next((()=>c.getEntry(A,m))).next((f=>{const b=l.docVersions.get(m);Dr(b!==null,48541),f.version.compareTo(b)<0&&(u.applyToRemoteDocument(f,l),f.isValidDocument()&&(f.setReadTime(l.commitVersion),c.addEntry(f)))}))})),d.next((()=>o.mutationQueue.removeMutationBatch(A,u)))})(e,n,t,s).next((()=>s.apply(n))).next((()=>e.mutationQueue.performConsistencyCheck(n))).next((()=>e.documentOverlayCache.removeOverlaysForBatchId(n,i,t.batch.batchId))).next((()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,(function(o){let A=mr();for(let l=0;l<o.mutationResults.length;++l)o.mutationResults[l].transformResults.length>0&&(A=A.add(o.batch.mutations[l].key));return A})(t)))).next((()=>e.localDocuments.getDocuments(n,i)))}))}function cL(r){const t=Je(r);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Pi.getLastRemoteSnapshotVersion(e)))}function ket(r,t){const e=Je(r),n=t.snapshotVersion;let i=e.Ms;return e.persistence.runTransaction("Apply remote event","readwrite-primary",(s=>{const a=e.Ns.newChangeBuffer({trackRemovals:!0});i=e.Ms;const o=[];t.targetChanges.forEach(((c,u)=>{const h=i.get(u);if(!h)return;o.push(e.Pi.removeMatchingKeys(s,c.removedDocuments,u).next((()=>e.Pi.addMatchingKeys(s,c.addedDocuments,u))));let d=h.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(u)!==null?d=d.withResumeToken(Pi.EMPTY_BYTE_STRING,ze.min()).withLastLimboFreeSnapshotVersion(ze.min()):c.resumeToken.approximateByteSize()>0&&(d=d.withResumeToken(c.resumeToken,n)),i=i.insert(u,d),(function(f,b,y){return f.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-f.snapshotVersion.toMicroseconds()>=_et?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0})(h,d,c)&&o.push(e.Pi.updateTargetData(s,d))}));let A=MA(),l=mr();if(t.documentUpdates.forEach((c=>{t.resolvedLimboDocuments.has(c)&&o.push(e.persistence.referenceDelegate.updateLimboDocument(s,c))})),o.push(Iet(s,a,t.documentUpdates).next((c=>{A=c.ks,l=c.qs}))),!n.isEqual(ze.min())){const c=e.Pi.getLastRemoteSnapshotVersion(s).next((u=>e.Pi.setTargetsMetadata(s,s.currentSequenceNumber,n)));o.push(c)}return Wt.waitFor(o).next((()=>a.apply(s))).next((()=>e.localDocuments.getLocalViewOfDocuments(s,A,l))).next((()=>A))})).then((s=>(e.Ms=i,s)))}function Iet(r,t,e){let n=mr(),i=mr();return e.forEach((s=>n=n.add(s))),t.getEntries(r,n).next((s=>{let a=MA();return e.forEach(((o,A)=>{const l=s.get(o);A.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(o)),A.isNoDocument()&&A.version.isEqual(ze.min())?(t.removeEntry(o,A.readTime),a=a.insert(o,A)):!l.isValidDocument()||A.version.compareTo(l.version)>0||A.version.compareTo(l.version)===0&&l.hasPendingWrites?(t.addEntry(A),a=a.insert(o,A)):ge(V2,"Ignoring outdated watch update for ",o,". Current version:",l.version," Watch version:",A.version)})),{ks:a,qs:i}}))}function Tet(r,t){const e=Je(r);return e.persistence.runTransaction("Get next mutation batch","readonly",(n=>(t===void 0&&(t=I2),e.mutationQueue.getNextMutationBatchAfterBatchId(n,t))))}function Fet(r,t){const e=Je(r);return e.persistence.runTransaction("Allocate target","readwrite",(n=>{let i;return e.Pi.getTargetData(n,t).next((s=>s?(i=s,Wt.resolve(i)):e.Pi.allocateTargetId(n).next((a=>(i=new Tl(t,a,"TargetPurposeListen",n.currentSequenceNumber),e.Pi.addTargetData(n,i).next((()=>i)))))))})).then((n=>{const i=e.Ms.get(n.targetId);return(i===null||n.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(e.Ms=e.Ms.insert(n.targetId,n),e.xs.set(t,n.targetId)),n}))}async function dv(r,t,e){const n=Je(r),i=n.Ms.get(t),s=e?"readwrite":"readwrite-primary";try{e||await n.persistence.runTransaction("Release target",s,(a=>n.persistence.referenceDelegate.removeTarget(a,i)))}catch(a){if(!Wd(a))throw a;ge(V2,`Failed to update sequence numbers for target ${t}: ${a}`)}n.Ms=n.Ms.remove(t),n.xs.delete(i.target)}function LS(r,t,e){const n=Je(r);let i=ze.min(),s=mr();return n.persistence.runTransaction("Execute query","readwrite",(a=>(function(A,l,c){const u=Je(A),h=u.xs.get(c);return h!==void 0?Wt.resolve(u.Ms.get(h)):u.Pi.getTargetData(l,c)})(n,a,Uo(t)).next((o=>{if(o)return i=o.lastLimboFreeSnapshotVersion,n.Pi.getMatchingKeysForTargetId(a,o.targetId).next((A=>{s=A}))})).next((()=>n.Fs.getDocumentsMatchingQuery(a,t,e?i:ze.min(),e?s:mr()))).next((o=>(Let(n,ftt(t),o),{documents:o,Qs:s})))))}function Let(r,t,e){let n=r.Os.get(t)||ze.min();e.forEach(((i,s)=>{s.readTime.compareTo(n)>0&&(n=s.readTime)})),r.Os.set(t,n)}class US{constructor(){this.activeTargetIds=wtt()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Uet{constructor(){this.Mo=new US,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,n){}addLocalQueryTarget(t,e=!0){return e&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,e,n){this.xo[t]=e}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new US,Promise.resolve()}handleUserChange(t,e,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pet{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PS="ConnectivityMonitor";class NS{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ge(PS,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){ge(PS,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let am=null;function hv(){return am===null?am=(function(){return 268435456+Math.round(2147483648*Math.random())})():am++,"0x"+am.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iw="RestConnection",Net={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Det{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=e+"://"+t.host,this.Ko=`projects/${n}/databases/${i}`,this.Wo=this.databaseId.database===F0?`project_id=${n}`:`project_id=${n}&database_id=${i}`}Go(t,e,n,i,s){const a=hv(),o=this.zo(t,e.toUriEncodedString());ge(Iw,`Sending RPC '${t}' ${a}:`,o,n);const A={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(A,i,s);const{host:l}=new URL(o),c=jd(l);return this.Jo(t,o,A,n,c).then((u=>(ge(Iw,`Received RPC '${t}' ${a}: `,u),u)),(u=>{throw uu(Iw,`RPC '${t}' ${a} failed with error: `,u,"url: ",o,"request:",n),u}))}Ho(t,e,n,i,s,a){return this.Go(t,e,n,i,s)}jo(t,e,n){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+zd})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach(((i,s)=>t[s]=i)),n&&n.headers.forEach(((i,s)=>t[s]=i))}zo(t,e){const n=Net[t];return`${this.Uo}/v1/${e}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Met{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const is="WebChannelConnection";class Ret extends Det{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,e,n,i,s){const a=hv();return new Promise(((o,A)=>{const l=new u3;l.setWithCredentials(!0),l.listenOnce(d3.COMPLETE,(()=>{try{switch(l.getLastErrorCode()){case Qm.NO_ERROR:const u=l.getResponseJson();ge(is,`XHR for RPC '${t}' ${a} received:`,JSON.stringify(u)),o(u);break;case Qm.TIMEOUT:ge(is,`RPC '${t}' ${a} timed out`),A(new le(Kt.DEADLINE_EXCEEDED,"Request time out"));break;case Qm.HTTP_ERROR:const h=l.getStatus();if(ge(is,`RPC '${t}' ${a} failed with status:`,h,"response text:",l.getResponseText()),h>0){let d=l.getResponseJson();Array.isArray(d)&&(d=d[0]);const m=d==null?void 0:d.error;if(m&&m.status&&m.message){const f=(function(y){const B=y.toLowerCase().replace(/_/g,"-");return Object.values(Kt).indexOf(B)>=0?B:Kt.UNKNOWN})(m.status);A(new le(f,m.message))}else A(new le(Kt.UNKNOWN,"Server responded with status "+l.getStatus()))}else A(new le(Kt.UNAVAILABLE,"Connection failed."));break;default:He(9055,{l_:t,streamId:a,h_:l.getLastErrorCode(),P_:l.getLastError()})}}finally{ge(is,`RPC '${t}' ${a} completed.`)}}));const c=JSON.stringify(i);ge(is,`RPC '${t}' ${a} sending request:`,i),l.send(e,"POST",c,n,15)}))}T_(t,e,n){const i=hv(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],a=g3(),o=f3(),A={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(A.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(A.useFetchStreams=!0),this.jo(A.initMessageHeaders,e,n),A.encodeInitMessageHeaders=!0;const c=s.join("");ge(is,`Creating RPC '${t}' stream ${i}: ${c}`,A);const u=a.createWebChannel(c,A);this.I_(u);let h=!1,d=!1;const m=new Met({Yo:b=>{d?ge(is,`Not sending because RPC '${t}' stream ${i} is closed:`,b):(h||(ge(is,`Opening RPC '${t}' stream ${i} transport.`),u.open(),h=!0),ge(is,`RPC '${t}' stream ${i} sending:`,b),u.send(b))},Zo:()=>u.close()}),f=(b,y,B)=>{b.listen(y,(I=>{try{B(I)}catch(C){setTimeout((()=>{throw C}),0)}}))};return f(u,zh.EventType.OPEN,(()=>{d||(ge(is,`RPC '${t}' stream ${i} transport opened.`),m.o_())})),f(u,zh.EventType.CLOSE,(()=>{d||(d=!0,ge(is,`RPC '${t}' stream ${i} transport closed`),m.a_(),this.E_(u))})),f(u,zh.EventType.ERROR,(b=>{d||(d=!0,uu(is,`RPC '${t}' stream ${i} transport errored. Name:`,b.name,"Message:",b.message),m.a_(new le(Kt.UNAVAILABLE,"The operation could not be completed")))})),f(u,zh.EventType.MESSAGE,(b=>{var y;if(!d){const B=b.data[0];Dr(!!B,16349);const I=B,C=(I==null?void 0:I.error)||((y=I[0])==null?void 0:y.error);if(C){ge(is,`RPC '${t}' stream ${i} received error:`,C);const N=C.status;let R=(function(v){const T=ni[v];if(T!==void 0)return X3(T)})(N),U=C.message;R===void 0&&(R=Kt.INTERNAL,U="Unknown error status: "+N+" with message "+C.message),d=!0,m.a_(new le(R,U)),u.close()}else ge(is,`RPC '${t}' stream ${i} received:`,B),m.u_(B)}})),f(o,h3.STAT_EVENT,(b=>{b.stat===ev.PROXY?ge(is,`RPC '${t}' stream ${i} detected buffering proxy`):b.stat===ev.NOPROXY&&ge(is,`RPC '${t}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{m.__()}),0),m}terminate(){this.c_.forEach((t=>t.close())),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter((e=>e===t))}}function Tw(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ib(r){return new Ott(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uL{constructor(t,e,n=1e3,i=1.5,s=6e4){this.Mi=t,this.timerId=e,this.d_=n,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const e=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),i=Math.max(0,e-n);i>0&&ge("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${e} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),t()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DS="PersistentStream";class dL{constructor(t,e,n,i,s,a,o,A){this.Mi=t,this.S_=n,this.b_=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=A,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new uL(t,e)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,e){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():e&&e.code===Kt.RESOURCE_EXHAUSTED?(DA(e.toString()),DA("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):e&&e.code===Kt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(e)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),e=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([n,i])=>{this.D_===e&&this.G_(n,i)}),(n=>{t((()=>{const i=new le(Kt.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(i)}))}))}G_(t,e){const n=this.W_(this.D_);this.stream=this.j_(t,e),this.stream.Xo((()=>{n((()=>this.listener.Xo()))})),this.stream.t_((()=>{n((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{n((()=>this.z_(i)))})),this.stream.onMessage((i=>{n((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return ge(DS,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return e=>{this.Mi.enqueueAndForget((()=>this.D_===t?e():(ge(DS,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Qet extends dL{constructor(t,e,n,i,s,a){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,n,i,a),this.serializer=s}j_(t,e){return this.connection.T_("Listen",t,e)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const e=$tt(this.serializer,t),n=(function(s){if(!("targetChange"in s))return ze.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?ze.min():a.readTime?Po(a.readTime):ze.min()})(t);return this.listener.H_(e,n)}Y_(t){const e={};e.database=uv(this.serializer),e.addTarget=(function(s,a){let o;const A=a.target;if(o=av(A)?{documents:Ktt(s,A)}:{query:ztt(s,A).ft},o.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){o.resumeToken=tL(s,a.resumeToken);const l=Av(s,a.expectedCount);l!==null&&(o.expectedCount=l)}else if(a.snapshotVersion.compareTo(ze.min())>0){o.readTime=D0(s,a.snapshotVersion.toTimestamp());const l=Av(s,a.expectedCount);l!==null&&(o.expectedCount=l)}return o})(this.serializer,t);const n=Wtt(this.serializer,t);n&&(e.labels=n),this.q_(e)}Z_(t){const e={};e.database=uv(this.serializer),e.removeTarget=t,this.q_(e)}}class Oet extends dL{constructor(t,e,n,i,s,a){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,n,i,a),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,e){return this.connection.T_("Write",t,e)}J_(t){return Dr(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,Dr(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){Dr(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const e=Gtt(t.writeResults,t.commitTime),n=Po(t.commitTime);return this.listener.na(n,e)}ra(){const t={};t.database=uv(this.serializer),this.q_(t)}ea(t){const e={streamToken:this.lastStreamToken,writes:t.map((n=>jtt(this.serializer,n)))};this.q_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Het{}class Vet extends Het{constructor(t,e,n,i){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=n,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new le(Kt.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,e,n,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,a])=>this.connection.Go(t,lv(e,n),i,s,a))).catch((s=>{throw s.name==="FirebaseError"?(s.code===Kt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new le(Kt.UNKNOWN,s.toString())}))}Ho(t,e,n,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,o])=>this.connection.Ho(t,lv(e,n),i,a,o,s))).catch((a=>{throw a.name==="FirebaseError"?(a.code===Kt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new le(Kt.UNKNOWN,a.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class $et{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(DA(e),this.aa=!1):ge("OnlineStateTracker",e)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const du="RemoteStore";class jet{constructor(t,e,n,i,s){this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo((a=>{n.enqueueAndForget((async()=>{Bu(this)&&(ge(du,"Restarting streams for network reachability change."),await(async function(A){const l=Je(A);l.Ea.add(4),await yg(l),l.Ra.set("Unknown"),l.Ea.delete(4),await Tb(l)})(this))}))})),this.Ra=new $et(n,i)}}async function Tb(r){if(Bu(r))for(const t of r.da)await t(!0)}async function yg(r){for(const t of r.da)await t(!1)}function hL(r,t){const e=Je(r);e.Ia.has(t.targetId)||(e.Ia.set(t.targetId,t),K2(e)?G2(e):Xd(e).O_()&&j2(e,t))}function $2(r,t){const e=Je(r),n=Xd(e);e.Ia.delete(t),n.O_()&&fL(e,t),e.Ia.size===0&&(n.O_()?n.L_():Bu(e)&&e.Ra.set("Unknown"))}function j2(r,t){if(r.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(ze.min())>0){const e=r.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}Xd(r).Y_(t)}function fL(r,t){r.Va.Ue(t),Xd(r).Z_(t)}function G2(r){r.Va=new Dtt({getRemoteKeysForTarget:t=>r.remoteSyncer.getRemoteKeysForTarget(t),At:t=>r.Ia.get(t)||null,ht:()=>r.datastore.serializer.databaseId}),Xd(r).start(),r.Ra.ua()}function K2(r){return Bu(r)&&!Xd(r).x_()&&r.Ia.size>0}function Bu(r){return Je(r).Ea.size===0}function gL(r){r.Va=void 0}async function Get(r){r.Ra.set("Online")}async function Ket(r){r.Ia.forEach(((t,e)=>{j2(r,t)}))}async function zet(r,t){gL(r),K2(r)?(r.Ra.ha(t),G2(r)):r.Ra.set("Unknown")}async function qet(r,t,e){if(r.Ra.set("Online"),t instanceof Z3&&t.state===2&&t.cause)try{await(async function(i,s){const a=s.cause;for(const o of s.targetIds)i.Ia.has(o)&&(await i.remoteSyncer.rejectListen(o,a),i.Ia.delete(o),i.Va.removeTarget(o))})(r,t)}catch(n){ge(du,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await R0(r,n)}else if(t instanceof $m?r.Va.Ze(t):t instanceof J3?r.Va.st(t):r.Va.tt(t),!e.isEqual(ze.min()))try{const n=await cL(r.localStore);e.compareTo(n)>=0&&await(function(s,a){const o=s.Va.Tt(a);return o.targetChanges.forEach(((A,l)=>{if(A.resumeToken.approximateByteSize()>0){const c=s.Ia.get(l);c&&s.Ia.set(l,c.withResumeToken(A.resumeToken,a))}})),o.targetMismatches.forEach(((A,l)=>{const c=s.Ia.get(A);if(!c)return;s.Ia.set(A,c.withResumeToken(Pi.EMPTY_BYTE_STRING,c.snapshotVersion)),fL(s,A);const u=new Tl(c.target,A,l,c.sequenceNumber);j2(s,u)})),s.remoteSyncer.applyRemoteEvent(o)})(r,e)}catch(n){ge(du,"Failed to raise snapshot:",n),await R0(r,n)}}async function R0(r,t,e){if(!Wd(t))throw t;r.Ea.add(1),await yg(r),r.Ra.set("Offline"),e||(e=()=>cL(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{ge(du,"Retrying IndexedDB access"),await e(),r.Ea.delete(1),await Tb(r)}))}function pL(r,t){return t().catch((e=>R0(r,e,t)))}async function Fb(r){const t=Je(r),e=Zl(t);let n=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:I2;for(;Wet(t);)try{const i=await Tet(t.localStore,n);if(i===null){t.Ta.length===0&&e.L_();break}n=i.batchId,Yet(t,i)}catch(i){await R0(t,i)}mL(t)&&bL(t)}function Wet(r){return Bu(r)&&r.Ta.length<10}function Yet(r,t){r.Ta.push(t);const e=Zl(r);e.O_()&&e.X_&&e.ea(t.mutations)}function mL(r){return Bu(r)&&!Zl(r).x_()&&r.Ta.length>0}function bL(r){Zl(r).start()}async function Xet(r){Zl(r).ra()}async function Jet(r){const t=Zl(r);for(const e of r.Ta)t.ea(e.mutations)}async function Zet(r,t,e){const n=r.Ta.shift(),i=D2.from(n,t,e);await pL(r,(()=>r.remoteSyncer.applySuccessfulWrite(i))),await Fb(r)}async function trt(r,t){t&&Zl(r).X_&&await(async function(n,i){if((function(a){return Utt(a)&&a!==Kt.ABORTED})(i.code)){const s=n.Ta.shift();Zl(n).B_(),await pL(n,(()=>n.remoteSyncer.rejectFailedWrite(s.batchId,i))),await Fb(n)}})(r,t),mL(r)&&bL(r)}async function MS(r,t){const e=Je(r);e.asyncQueue.verifyOperationInProgress(),ge(du,"RemoteStore received new credentials");const n=Bu(e);e.Ea.add(3),await yg(e),n&&e.Ra.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.Ea.delete(3),await Tb(e)}async function ert(r,t){const e=Je(r);t?(e.Ea.delete(2),await Tb(e)):t||(e.Ea.add(2),await yg(e),e.Ra.set("Unknown"))}function Xd(r){return r.ma||(r.ma=(function(e,n,i){const s=Je(e);return s.sa(),new Qet(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(r.datastore,r.asyncQueue,{Xo:Get.bind(null,r),t_:Ket.bind(null,r),r_:zet.bind(null,r),H_:qet.bind(null,r)}),r.da.push((async t=>{t?(r.ma.B_(),K2(r)?G2(r):r.Ra.set("Unknown")):(await r.ma.stop(),gL(r))}))),r.ma}function Zl(r){return r.fa||(r.fa=(function(e,n,i){const s=Je(e);return s.sa(),new Oet(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:Xet.bind(null,r),r_:trt.bind(null,r),ta:Jet.bind(null,r),na:Zet.bind(null,r)}),r.da.push((async t=>{t?(r.fa.B_(),await Fb(r)):(await r.fa.stop(),r.Ta.length>0&&(ge(du,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2{constructor(t,e,n,i,s){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=i,this.removalCallback=s,this.deferred=new IA,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((a=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,e,n,i,s){const a=Date.now()+n,o=new z2(t,e,a,i,s);return o.start(n),o}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new le(Kt.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function q2(r,t){if(DA("AsyncQueue",`${t}: ${r}`),Wd(r))return new le(Kt.UNAVAILABLE,`${t}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd{static emptySet(t){return new wd(t.comparator)}constructor(t){this.comparator=t?(e,n)=>t(e,n)||Ue.comparator(e.key,n.key):(e,n)=>Ue.comparator(e.key,n.key),this.keyedMap=qh(),this.sortedSet=new Sn(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((e,n)=>(t(e),!1)))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof wd)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();for(;e.hasNext();){const i=e.getNext().key,s=n.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach((e=>{t.push(e.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const n=new wd;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RS{constructor(){this.ga=new Sn(Ue.comparator)}track(t){const e=t.doc.key,n=this.ga.get(e);n?t.type!==0&&n.type===3?this.ga=this.ga.insert(e,t):t.type===3&&n.type!==1?this.ga=this.ga.insert(e,{type:n.type,doc:t.doc}):t.type===2&&n.type===2?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):t.type===2&&n.type===0?this.ga=this.ga.insert(e,{type:0,doc:t.doc}):t.type===1&&n.type===0?this.ga=this.ga.remove(e):t.type===1&&n.type===2?this.ga=this.ga.insert(e,{type:1,doc:n.doc}):t.type===0&&n.type===1?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):He(63341,{Rt:t,pa:n}):this.ga=this.ga.insert(e,t)}ya(){const t=[];return this.ga.inorderTraversal(((e,n)=>{t.push(n)})),t}}class Pd{constructor(t,e,n,i,s,a,o,A,l){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=A,this.hasCachedResults=l}static fromInitialDocuments(t,e,n,i,s){const a=[];return e.forEach((o=>{a.push({type:0,doc:o})})),new Pd(t,e,wd.emptySet(e),a,n,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&_b(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(let i=0;i<e.length;i++)if(e[i].type!==n[i].type||!e[i].doc.isEqual(n[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rrt{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((t=>t.Da()))}}class nrt{constructor(){this.queries=QS(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(e,n){const i=Je(e),s=i.queries;i.queries=QS(),s.forEach(((a,o)=>{for(const A of o.Sa)A.onError(n)}))})(this,new le(Kt.ABORTED,"Firestore shutting down"))}}function QS(){return new _u((r=>Q3(r)),_b)}async function yL(r,t){const e=Je(r);let n=3;const i=t.query;let s=e.queries.get(i);s?!s.ba()&&t.Da()&&(n=2):(s=new rrt,n=t.Da()?0:1);try{switch(n){case 0:s.wa=await e.onListen(i,!0);break;case 1:s.wa=await e.onListen(i,!1);break;case 2:await e.onFirstRemoteStoreListen(i)}}catch(a){const o=q2(a,`Initialization of query '${Ju(t.query)}' failed`);return void t.onError(o)}e.queries.set(i,s),s.Sa.push(t),t.va(e.onlineState),s.wa&&t.Fa(s.wa)&&W2(e)}async function wL(r,t){const e=Je(r),n=t.query;let i=3;const s=e.queries.get(n);if(s){const a=s.Sa.indexOf(t);a>=0&&(s.Sa.splice(a,1),s.Sa.length===0?i=t.Da()?0:1:!s.ba()&&t.Da()&&(i=2))}switch(i){case 0:return e.queries.delete(n),e.onUnlisten(n,!0);case 1:return e.queries.delete(n),e.onUnlisten(n,!1);case 2:return e.onLastRemoteStoreUnlisten(n);default:return}}function irt(r,t){const e=Je(r);let n=!1;for(const i of t){const s=i.query,a=e.queries.get(s);if(a){for(const o of a.Sa)o.Fa(i)&&(n=!0);a.wa=i}}n&&W2(e)}function srt(r,t,e){const n=Je(r),i=n.queries.get(t);if(i)for(const s of i.Sa)s.onError(e);n.queries.delete(t)}function W2(r){r.Ca.forEach((t=>{t.next()}))}var fv,OS;(OS=fv||(fv={})).Ma="default",OS.Cache="cache";class vL{constructor(t,e,n){this.query=t,this.xa=e,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(t){if(!this.options.includeMetadataChanges){const n=[];for(const i of t.docChanges)i.type!==3&&n.push(i);t=new Pd(t.query,t.docs,t.oldDocs,n,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),e=!0):this.La(t,this.onlineState)&&(this.ka(t),e=!0),this.Na=t,e}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let e=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),e=!0),e}La(t,e){if(!t.fromCache||!this.Da())return!0;const n=e!=="Offline";return(!this.options.qa||!n)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const e=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}ka(t){t=Pd.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==fv.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xL{constructor(t){this.key=t}}class _L{constructor(t){this.key=t}}class art{constructor(t,e){this.query=t,this.Ya=e,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=mr(),this.mutatedKeys=mr(),this.eu=O3(t),this.tu=new wd(this.eu)}get nu(){return this.Ya}ru(t,e){const n=e?e.iu:new RS,i=e?e.tu:this.tu;let s=e?e.mutatedKeys:this.mutatedKeys,a=i,o=!1;const A=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal(((c,u)=>{const h=i.get(c),d=Bb(this.query,u)?u:null,m=!!h&&this.mutatedKeys.has(h.key),f=!!d&&(d.hasLocalMutations||this.mutatedKeys.has(d.key)&&d.hasCommittedMutations);let b=!1;h&&d?h.data.isEqual(d.data)?m!==f&&(n.track({type:3,doc:d}),b=!0):this.su(h,d)||(n.track({type:2,doc:d}),b=!0,(A&&this.eu(d,A)>0||l&&this.eu(d,l)<0)&&(o=!0)):!h&&d?(n.track({type:0,doc:d}),b=!0):h&&!d&&(n.track({type:1,doc:h}),b=!0,(A||l)&&(o=!0)),b&&(d?(a=a.add(d),s=f?s.add(c):s.delete(c)):(a=a.delete(c),s=s.delete(c)))})),this.query.limit!==null)for(;a.size>this.query.limit;){const c=this.query.limitType==="F"?a.last():a.first();a=a.delete(c.key),s=s.delete(c.key),n.track({type:1,doc:c})}return{tu:a,iu:n,Cs:o,mutatedKeys:s}}su(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,n,i){const s=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const a=t.iu.ya();a.sort(((c,u)=>(function(d,m){const f=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return He(20277,{Rt:b})}};return f(d)-f(m)})(c.type,u.type)||this.eu(c.doc,u.doc))),this.ou(n),i=i??!1;const o=e&&!i?this._u():[],A=this.Xa.size===0&&this.current&&!i?1:0,l=A!==this.Za;return this.Za=A,a.length!==0||l?{snapshot:new Pd(this.query,t.tu,s,a,t.mutatedKeys,A===0,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new RS,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((e=>this.Ya=this.Ya.add(e))),t.modifiedDocuments.forEach((e=>{})),t.removedDocuments.forEach((e=>this.Ya=this.Ya.delete(e))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=mr(),this.tu.forEach((n=>{this.uu(n.key)&&(this.Xa=this.Xa.add(n.key))}));const e=[];return t.forEach((n=>{this.Xa.has(n)||e.push(new _L(n))})),this.Xa.forEach((n=>{t.has(n)||e.push(new xL(n))})),e}cu(t){this.Ya=t.Qs,this.Xa=mr();const e=this.ru(t.documents);return this.applyChanges(e,!0)}lu(){return Pd.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Y2="SyncEngine";class ort{constructor(t,e,n){this.query=t,this.targetId=e,this.view=n}}class Art{constructor(t){this.key=t,this.hu=!1}}class lrt{constructor(t,e,n,i,s,a){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new _u((o=>Q3(o)),_b),this.Iu=new Map,this.Eu=new Set,this.du=new Sn(Ue.comparator),this.Au=new Map,this.Ru=new Q2,this.Vu={},this.mu=new Map,this.fu=Ud.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function crt(r,t,e=!0){const n=IL(r);let i;const s=n.Tu.get(t);return s?(n.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await BL(n,t,e,!0),i}async function urt(r,t){const e=IL(r);await BL(e,t,!0,!1)}async function BL(r,t,e,n){const i=await Fet(r.localStore,Uo(t)),s=i.targetId,a=r.sharedClientState.addLocalQueryTarget(s,e);let o;return n&&(o=await drt(r,t,s,a==="current",i.resumeToken)),r.isPrimaryClient&&e&&hL(r.remoteStore,i),o}async function drt(r,t,e,n,i){r.pu=(u,h,d)=>(async function(f,b,y,B){let I=b.view.ru(y);I.Cs&&(I=await LS(f.localStore,b.query,!1).then((({documents:U})=>b.view.ru(U,I))));const C=B&&B.targetChanges.get(b.targetId),N=B&&B.targetMismatches.get(b.targetId)!=null,R=b.view.applyChanges(I,f.isPrimaryClient,C,N);return VS(f,b.targetId,R.au),R.snapshot})(r,u,h,d);const s=await LS(r.localStore,t,!0),a=new art(t,s.Qs),o=a.ru(s.documents),A=bg.createSynthesizedTargetChangeForCurrentChange(e,n&&r.onlineState!=="Offline",i),l=a.applyChanges(o,r.isPrimaryClient,A);VS(r,e,l.au);const c=new ort(t,e,a);return r.Tu.set(t,c),r.Iu.has(e)?r.Iu.get(e).push(t):r.Iu.set(e,[t]),l.snapshot}async function hrt(r,t,e){const n=Je(r),i=n.Tu.get(t),s=n.Iu.get(i.targetId);if(s.length>1)return n.Iu.set(i.targetId,s.filter((a=>!_b(a,t)))),void n.Tu.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await dv(n.localStore,i.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(i.targetId),e&&$2(n.remoteStore,i.targetId),gv(n,i.targetId)})).catch(qd)):(gv(n,i.targetId),await dv(n.localStore,i.targetId,!0))}async function frt(r,t){const e=Je(r),n=e.Tu.get(t),i=e.Iu.get(n.targetId);e.isPrimaryClient&&i.length===1&&(e.sharedClientState.removeLocalQueryTarget(n.targetId),$2(e.remoteStore,n.targetId))}async function grt(r,t,e){const n=xrt(r);try{const i=await(function(a,o){const A=Je(a),l=ln.now(),c=o.reduce(((d,m)=>d.add(m.key)),mr());let u,h;return A.persistence.runTransaction("Locally write mutations","readwrite",(d=>{let m=MA(),f=mr();return A.Ns.getEntries(d,c).next((b=>{m=b,m.forEach(((y,B)=>{B.isValidDocument()||(f=f.add(y))}))})).next((()=>A.localDocuments.getOverlayedDocuments(d,m))).next((b=>{u=b;const y=[];for(const B of o){const I=ktt(B,u.get(B.key).overlayedDocument);I!=null&&y.push(new lc(B.key,I,F3(I.value.mapValue),Bs.exists(!0)))}return A.mutationQueue.addMutationBatch(d,l,y,o)})).next((b=>{h=b;const y=b.applyToLocalDocumentSet(u,f);return A.documentOverlayCache.saveOverlays(d,b.batchId,y)}))})).then((()=>({batchId:h.batchId,changes:V3(u)})))})(n.localStore,t);n.sharedClientState.addPendingMutation(i.batchId),(function(a,o,A){let l=a.Vu[a.currentUser.toKey()];l||(l=new Sn(pr)),l=l.insert(o,A),a.Vu[a.currentUser.toKey()]=l})(n,i.batchId,e),await wg(n,i.changes),await Fb(n.remoteStore)}catch(i){const s=q2(i,"Failed to persist write");e.reject(s)}}async function CL(r,t){const e=Je(r);try{const n=await ket(e.localStore,t);t.targetChanges.forEach(((i,s)=>{const a=e.Au.get(s);a&&(Dr(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?a.hu=!0:i.modifiedDocuments.size>0?Dr(a.hu,14607):i.removedDocuments.size>0&&(Dr(a.hu,42227),a.hu=!1))})),await wg(e,n,t)}catch(n){await qd(n)}}function HS(r,t,e){const n=Je(r);if(n.isPrimaryClient&&e===0||!n.isPrimaryClient&&e===1){const i=[];n.Tu.forEach(((s,a)=>{const o=a.view.va(t);o.snapshot&&i.push(o.snapshot)})),(function(a,o){const A=Je(a);A.onlineState=o;let l=!1;A.queries.forEach(((c,u)=>{for(const h of u.Sa)h.va(o)&&(l=!0)})),l&&W2(A)})(n.eventManager,t),i.length&&n.Pu.H_(i),n.onlineState=t,n.isPrimaryClient&&n.sharedClientState.setOnlineState(t)}}async function prt(r,t,e){const n=Je(r);n.sharedClientState.updateQueryState(t,"rejected",e);const i=n.Au.get(t),s=i&&i.key;if(s){let a=new Sn(Ue.comparator);a=a.insert(s,cs.newNoDocument(s,ze.min()));const o=mr().add(s),A=new kb(ze.min(),new Map,new Sn(pr),a,o);await CL(n,A),n.du=n.du.remove(s),n.Au.delete(t),X2(n)}else await dv(n.localStore,t,!1).then((()=>gv(n,t,e))).catch(qd)}async function mrt(r,t){const e=Je(r),n=t.batch.batchId;try{const i=await Eet(e.localStore,t);SL(e,n,null),EL(e,n),e.sharedClientState.updateMutationState(n,"acknowledged"),await wg(e,i)}catch(i){await qd(i)}}async function brt(r,t,e){const n=Je(r);try{const i=await(function(a,o){const A=Je(a);return A.persistence.runTransaction("Reject batch","readwrite-primary",(l=>{let c;return A.mutationQueue.lookupMutationBatch(l,o).next((u=>(Dr(u!==null,37113),c=u.keys(),A.mutationQueue.removeMutationBatch(l,u)))).next((()=>A.mutationQueue.performConsistencyCheck(l))).next((()=>A.documentOverlayCache.removeOverlaysForBatchId(l,c,o))).next((()=>A.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,c))).next((()=>A.localDocuments.getDocuments(l,c)))}))})(n.localStore,t);SL(n,t,e),EL(n,t),n.sharedClientState.updateMutationState(t,"rejected",e),await wg(n,i)}catch(i){await qd(i)}}function EL(r,t){(r.mu.get(t)||[]).forEach((e=>{e.resolve()})),r.mu.delete(t)}function SL(r,t,e){const n=Je(r);let i=n.Vu[n.currentUser.toKey()];if(i){const s=i.get(t);s&&(e?s.reject(e):s.resolve(),i=i.remove(t)),n.Vu[n.currentUser.toKey()]=i}}function gv(r,t,e=null){r.sharedClientState.removeLocalQueryTarget(t);for(const n of r.Iu.get(t))r.Tu.delete(n),e&&r.Pu.yu(n,e);r.Iu.delete(t),r.isPrimaryClient&&r.Ru.jr(t).forEach((n=>{r.Ru.containsKey(n)||kL(r,n)}))}function kL(r,t){r.Eu.delete(t.path.canonicalString());const e=r.du.get(t);e!==null&&($2(r.remoteStore,e),r.du=r.du.remove(t),r.Au.delete(e),X2(r))}function VS(r,t,e){for(const n of e)n instanceof xL?(r.Ru.addReference(n.key,t),yrt(r,n)):n instanceof _L?(ge(Y2,"Document no longer in limbo: "+n.key),r.Ru.removeReference(n.key,t),r.Ru.containsKey(n.key)||kL(r,n.key)):He(19791,{wu:n})}function yrt(r,t){const e=t.key,n=e.path.canonicalString();r.du.get(e)||r.Eu.has(n)||(ge(Y2,"New document in limbo: "+e),r.Eu.add(n),X2(r))}function X2(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const t=r.Eu.values().next().value;r.Eu.delete(t);const e=new Ue(An.fromString(t)),n=r.fu.next();r.Au.set(n,new Art(e)),r.du=r.du.insert(e,n),hL(r.remoteStore,new Tl(Uo(P2(e.path)),n,"TargetPurposeLimboResolution",wb.ce))}}async function wg(r,t,e){const n=Je(r),i=[],s=[],a=[];n.Tu.isEmpty()||(n.Tu.forEach(((o,A)=>{a.push(n.pu(A,t,e).then((l=>{var c;if((l||e)&&n.isPrimaryClient){const u=l?!l.fromCache:(c=e==null?void 0:e.targetChanges.get(A.targetId))==null?void 0:c.current;n.sharedClientState.updateQueryState(A.targetId,u?"current":"not-current")}if(l){i.push(l);const u=H2.As(A.targetId,l);s.push(u)}})))})),await Promise.all(a),n.Pu.H_(i),await(async function(A,l){const c=Je(A);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",(u=>Wt.forEach(l,(h=>Wt.forEach(h.Es,(d=>c.persistence.referenceDelegate.addReference(u,h.targetId,d))).next((()=>Wt.forEach(h.ds,(d=>c.persistence.referenceDelegate.removeReference(u,h.targetId,d)))))))))}catch(u){if(!Wd(u))throw u;ge(V2,"Failed to update sequence numbers: "+u)}for(const u of l){const h=u.targetId;if(!u.fromCache){const d=c.Ms.get(h),m=d.snapshotVersion,f=d.withLastLimboFreeSnapshotVersion(m);c.Ms=c.Ms.insert(h,f)}}})(n.localStore,s))}async function wrt(r,t){const e=Je(r);if(!e.currentUser.isEqual(t)){ge(Y2,"User change. New user:",t.toKey());const n=await lL(e.localStore,t);e.currentUser=t,(function(s,a){s.mu.forEach((o=>{o.forEach((A=>{A.reject(new le(Kt.CANCELLED,a))}))})),s.mu.clear()})(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,n.removedBatchIds,n.addedBatchIds),await wg(e,n.Ls)}}function vrt(r,t){const e=Je(r),n=e.Au.get(t);if(n&&n.hu)return mr().add(n.key);{let i=mr();const s=e.Iu.get(t);if(!s)return i;for(const a of s){const o=e.Tu.get(a);i=i.unionWith(o.view.nu)}return i}}function IL(r){const t=Je(r);return t.remoteStore.remoteSyncer.applyRemoteEvent=CL.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=vrt.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=prt.bind(null,t),t.Pu.H_=irt.bind(null,t.eventManager),t.Pu.yu=srt.bind(null,t.eventManager),t}function xrt(r){const t=Je(r);return t.remoteStore.remoteSyncer.applySuccessfulWrite=mrt.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=brt.bind(null,t),t}class Q0{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Ib(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,e){return null}Mu(t,e){return null}vu(t){return Cet(this.persistence,new xet,t.initialUser,this.serializer)}Cu(t){return new AL(O2.mi,this.serializer)}Du(t){return new Uet}async terminate(){var t,e;(t=this.gcScheduler)==null||t.stop(),(e=this.indexBackfillerScheduler)==null||e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Q0.provider={build:()=>new Q0};class _rt extends Q0{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,e){Dr(this.persistence.referenceDelegate instanceof M0,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new aet(n,t.asyncQueue,e)}Cu(t){const e=this.cacheSizeBytes!==void 0?Os.withCacheSize(this.cacheSizeBytes):Os.DEFAULT;return new AL((n=>M0.mi(n,e)),this.serializer)}}class pv{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>HS(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=wrt.bind(null,this.syncEngine),await ert(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new nrt})()}createDatastore(t){const e=Ib(t.databaseInfo.databaseId),n=(function(s){return new Ret(s)})(t.databaseInfo);return(function(s,a,o,A){return new Vet(s,a,o,A)})(t.authCredentials,t.appCheckCredentials,n,e)}createRemoteStore(t){return(function(n,i,s,a,o){return new jet(n,i,s,a,o)})(this.localStore,this.datastore,t.asyncQueue,(e=>HS(this.syncEngine,e,0)),(function(){return NS.v()?new NS:new Pet})())}createSyncEngine(t,e){return(function(i,s,a,o,A,l,c){const u=new lrt(i,s,a,o,A,l);return c&&(u.gu=!0),u})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){var t,e;await(async function(i){const s=Je(i);ge(du,"RemoteStore shutting down."),s.Ea.add(5),await yg(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),(t=this.datastore)==null||t.terminate(),(e=this.eventManager)==null||e.terminate()}}pv.provider={build:()=>new pv};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TL{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):DA("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,e){setTimeout((()=>{this.muted||t(e)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tc="FirestoreClient";class Brt{constructor(t,e,n,i,s){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=n,this.databaseInfo=i,this.user=os.UNAUTHENTICATED,this.clientId=bb.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,(async a=>{ge(tc,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a})),this.appCheckCredentials.start(n,(a=>(ge(tc,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new IA;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const n=q2(e,"Failed to shutdown persistence");t.reject(n)}})),t.promise}}async function Fw(r,t){r.asyncQueue.verifyOperationInProgress(),ge(tc,"Initializing OfflineComponentProvider");const e=r.configuration;await t.initialize(e);let n=e.initialUser;r.setCredentialChangeListener((async i=>{n.isEqual(i)||(await lL(t.localStore,i),n=i)})),t.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=t}async function $S(r,t){r.asyncQueue.verifyOperationInProgress();const e=await Crt(r);ge(tc,"Initializing OnlineComponentProvider"),await t.initialize(e,r.configuration),r.setCredentialChangeListener((n=>MS(t.remoteStore,n))),r.setAppCheckTokenChangeListener(((n,i)=>MS(t.remoteStore,i))),r._onlineComponents=t}async function Crt(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){ge(tc,"Using user provided OfflineComponentProvider");try{await Fw(r,r._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!(function(i){return i.name==="FirebaseError"?i.code===Kt.FAILED_PRECONDITION||i.code===Kt.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(e))throw e;uu("Error using user provided cache. Falling back to memory cache: "+e),await Fw(r,new Q0)}}else ge(tc,"Using default OfflineComponentProvider"),await Fw(r,new _rt(void 0));return r._offlineComponents}async function FL(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(ge(tc,"Using user provided OnlineComponentProvider"),await $S(r,r._uninitializedComponentsProvider._online)):(ge(tc,"Using default OnlineComponentProvider"),await $S(r,new pv))),r._onlineComponents}function Ert(r){return FL(r).then((t=>t.syncEngine))}async function LL(r){const t=await FL(r),e=t.eventManager;return e.onListen=crt.bind(null,t.syncEngine),e.onUnlisten=hrt.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=urt.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=frt.bind(null,t.syncEngine),e}function Srt(r,t,e={}){const n=new IA;return r.asyncQueue.enqueueAndForget((async()=>(function(s,a,o,A,l){const c=new TL({next:h=>{c.Nu(),a.enqueueAndForget((()=>wL(s,u)));const d=h.docs.has(o);!d&&h.fromCache?l.reject(new le(Kt.UNAVAILABLE,"Failed to get document because the client is offline.")):d&&h.fromCache&&A&&A.source==="server"?l.reject(new le(Kt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(h)},error:h=>l.reject(h)}),u=new vL(P2(o.path),c,{includeMetadataChanges:!0,qa:!0});return yL(s,u)})(await LL(r),r.asyncQueue,t,e,n))),n.promise}function krt(r,t,e={}){const n=new IA;return r.asyncQueue.enqueueAndForget((async()=>(function(s,a,o,A,l){const c=new TL({next:h=>{c.Nu(),a.enqueueAndForget((()=>wL(s,u))),h.fromCache&&A.source==="server"?l.reject(new le(Kt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(h)},error:h=>l.reject(h)}),u=new vL(o,c,{includeMetadataChanges:!0,qa:!0});return yL(s,u)})(await LL(r),r.asyncQueue,t,e,n))),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UL(r){const t={};return r.timeoutSeconds!==void 0&&(t.timeoutSeconds=r.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jS=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PL="firestore.googleapis.com",GS=!0;class KS{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new le(Kt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=PL,this.ssl=GS}else this.host=t.host,this.ssl=t.ssl??GS;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=oL;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<iet)throw new le(Kt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}w3("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=UL(t.experimentalLongPollingOptions??{}),(function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new le(Kt.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new le(Kt.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new le(Kt.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(n,i){return n.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Lb{constructor(t,e,n,i){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new KS({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new le(Kt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new le(Kt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new KS(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(n){if(!n)return new b3;switch(n.type){case"firstParty":return new DZ(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new le(Kt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(e){const n=jS.get(e);n&&(ge("ComponentProvider","Removing Datastore"),jS.delete(e),n.terminate())})(this),Promise.resolve()}}function NL(r,t,e,n={}){var l;r=ya(r,Lb);const i=jd(t),s=r._getSettings(),a={...s,emulatorOptions:r._getEmulatorOptions()},o=`${t}:${e}`;i&&(_F(`https://${o}`),BF("Firestore",!0)),s.host!==PL&&s.host!==o&&uu("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const A={...s,host:o,ssl:i,emulatorOptions:n};if(!au(A,a)&&(r._setSettings(A),n.mockUserToken)){let c,u;if(typeof n.mockUserToken=="string")c=n.mockUserToken,u=os.MOCK_USER;else{c=VW(n.mockUserToken,(l=r._app)==null?void 0:l.options.projectId);const h=n.mockUserToken.sub||n.mockUserToken.user_id;if(!h)throw new le(Kt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new os(h)}r._authCredentials=new UZ(new m3(c,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OA{constructor(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new OA(this.firestore,t,this._query)}}class Dn{constructor(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new TA(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Dn(this.firestore,t,this._key)}toJSON(){return{type:Dn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,e,n){if(pg(e,Dn._jsonSchema))return new Dn(t,n||null,new Ue(An.fromString(e.referencePath)))}}Dn._jsonSchemaVersion="firestore/documentReference/1.0",Dn._jsonSchema={type:oi("string",Dn._jsonSchemaVersion),referencePath:oi("string")};class TA extends OA{constructor(t,e,n){super(t,e,P2(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Dn(this.firestore,null,new Ue(t))}withConverter(t){return new TA(this.firestore,t,this._path)}}function cc(r,t,...e){if(r=ti(r),y3("collection","path",t),r instanceof Lb){const n=An.fromString(t,...e);return sS(n),new TA(r,null,n)}{if(!(r instanceof Dn||r instanceof TA))throw new le(Kt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(An.fromString(t,...e));return sS(n),new TA(r.firestore,null,n)}}function qs(r,t,...e){if(r=ti(r),arguments.length===1&&(t=bb.newId()),y3("doc","path",t),r instanceof Lb){const n=An.fromString(t,...e);return iS(n),new Dn(r,null,new Ue(n))}{if(!(r instanceof Dn||r instanceof TA))throw new le(Kt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(An.fromString(t,...e));return iS(n),new Dn(r.firestore,r instanceof TA?r.converter:null,new Ue(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zS="AsyncQueue";class qS{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new uL(this,"async_queue_retry"),this._c=()=>{const n=Tw();n&&ge(zS,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=t;const e=Tw();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const e=Tw();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const e=new IA;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise))).then((()=>e.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Xu.push(t),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!Wd(t))throw t;ge(zS,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const e=this.ac.then((()=>(this.rc=!0,t().catch((n=>{throw this.nc=n,this.rc=!1,DA("INTERNAL UNHANDLED ERROR: ",WS(n)),n})).then((n=>(this.rc=!1,n))))));return this.ac=e,e}enqueueAfterDelay(t,e,n){this.uc(),this.oc.indexOf(t)>-1&&(e=0);const i=z2.createAndSchedule(this,t,e,n,(s=>this.hc(s)));return this.tc.push(i),i}uc(){this.nc&&He(47125,{Pc:WS(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const e of this.tc)if(e.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((e,n)=>e.targetTimeMs-n.targetTimeMs));for(const e of this.tc)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.Tc()}))}dc(t){this.oc.push(t)}hc(t){const e=this.tc.indexOf(t);this.tc.splice(e,1)}}function WS(r){let t=r.message||"";return r.stack&&(t=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),t}class HA extends Lb{constructor(t,e,n,i){super(t,e,n,i),this.type="firestore",this._queue=new qS,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new qS(t),this._firestoreClient=void 0,await t}}}function DL(r,t){const e=typeof r=="object"?r:kF(),n=typeof r=="string"?r:F0,i=m2(e,"firestore").getImmediate({identifier:n});if(!i._initialized){const s=OW("firestore");s&&NL(i,...s)}return i}function vg(r){if(r._terminated)throw new le(Kt.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||Irt(r),r._firestoreClient}function Irt(r){var n,i,s;const t=r._freezeSettings(),e=(function(o,A,l,c){return new JZ(o,A,l,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,UL(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator)})(r._databaseId,((n=r._app)==null?void 0:n.options.appId)||"",r._persistenceKey,t);r._componentsProvider||(i=t.localCache)!=null&&i._offlineComponentProvider&&((s=t.localCache)!=null&&s._onlineComponentProvider)&&(r._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),r._firestoreClient=new Brt(r._authCredentials,r._appCheckCredentials,r._queue,e,r._componentsProvider&&(function(o){const A=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(A),_online:A}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{constructor(t){this._byteString=t}static fromBase64String(t){try{return new ha(Pi.fromBase64String(t))}catch(e){throw new le(Kt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new ha(Pi.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:ha._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(pg(t,ha._jsonSchema))return ha.fromBase64String(t.bytes)}}ha._jsonSchemaVersion="firestore/bytes/1.0",ha._jsonSchema={type:oi("string",ha._jsonSchemaVersion),bytes:oi("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jd{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new le(Kt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Fi(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xg{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new le(Kt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new le(Kt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return pr(this._lat,t._lat)||pr(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ja._jsonSchemaVersion}}static fromJSON(t){if(pg(t,Ja._jsonSchema))return new Ja(t.latitude,t.longitude)}}Ja._jsonSchemaVersion="firestore/geoPoint/1.0",Ja._jsonSchema={type:oi("string",Ja._jsonSchemaVersion),latitude:oi("number"),longitude:oi("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{constructor(t){this._values=(t||[]).map((e=>e))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(n,i){if(n.length!==i.length)return!1;for(let s=0;s<n.length;++s)if(n[s]!==i[s])return!1;return!0})(this._values,t._values)}toJSON(){return{type:Za._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(pg(t,Za._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((e=>typeof e=="number")))return new Za(t.vectorValues);throw new le(Kt.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Za._jsonSchemaVersion="firestore/vectorValue/1.0",Za._jsonSchema={type:oi("string",Za._jsonSchemaVersion),vectorValues:oi("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Trt=/^__.*__$/;class Frt{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return this.fieldMask!==null?new lc(t,this.data,this.fieldMask,e,this.fieldTransforms):new mg(t,this.data,e,this.fieldTransforms)}}class ML{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return new lc(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function RL(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw He(40011,{Ac:r})}}class J2{constructor(t,e,n,i,s,a){this.settings=t,this.databaseId=e,this.serializer=n,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new J2({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){var i;const e=(i=this.path)==null?void 0:i.child(t),n=this.Vc({path:e,fc:!1});return n.gc(t),n}yc(t){var i;const e=(i=this.path)==null?void 0:i.child(t),n=this.Vc({path:e,fc:!1});return n.Rc(),n}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return O0(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find((e=>t.isPrefixOf(e)))!==void 0||this.fieldTransforms.find((e=>t.isPrefixOf(e.field)))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(RL(this.Ac)&&Trt.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class Lrt{constructor(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=n||Ib(t)}Cc(t,e,n,i=!1){return new J2({Ac:t,methodName:e,Dc:n,path:Fi.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function _g(r){const t=r._freezeSettings(),e=Ib(r._databaseId);return new Lrt(r._databaseId,!!t.ignoreUndefinedProperties,e)}function Z2(r,t,e,n,i,s={}){const a=r.Cc(s.merge||s.mergeFields?2:0,t,e,i);ex("Data must be an object, but it was:",a,n);const o=HL(n,a);let A,l;if(s.merge)A=new ga(a.fieldMask),l=a.fieldTransforms;else if(s.mergeFields){const c=[];for(const u of s.mergeFields){const h=mv(t,u,e);if(!a.contains(h))throw new le(Kt.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);$L(c,h)||c.push(h)}A=new ga(c),l=a.fieldTransforms.filter((u=>A.covers(u.field)))}else A=null,l=a.fieldTransforms;return new Frt(new zs(o),A,l)}class Ub extends xg{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Ub}}class tx extends xg{_toFieldTransform(t){return new Btt(t.path,new zf)}isEqual(t){return t instanceof tx}}function QL(r,t,e,n){const i=r.Cc(1,t,e);ex("Data must be an object, but it was:",i,n);const s=[],a=zs.empty();Ac(n,((A,l)=>{const c=rx(t,A,e);l=ti(l);const u=i.yc(c);if(l instanceof Ub)s.push(c);else{const h=Bg(l,u);h!=null&&(s.push(c),a.set(c,h))}}));const o=new ga(s);return new ML(a,o,i.fieldTransforms)}function OL(r,t,e,n,i,s){const a=r.Cc(1,t,e),o=[mv(t,n,e)],A=[i];if(s.length%2!=0)throw new le(Kt.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<s.length;h+=2)o.push(mv(t,s[h])),A.push(s[h+1]);const l=[],c=zs.empty();for(let h=o.length-1;h>=0;--h)if(!$L(l,o[h])){const d=o[h];let m=A[h];m=ti(m);const f=a.yc(d);if(m instanceof Ub)l.push(d);else{const b=Bg(m,f);b!=null&&(l.push(d),c.set(d,b))}}const u=new ga(l);return new ML(c,u,a.fieldTransforms)}function Urt(r,t,e,n=!1){return Bg(e,r.Cc(n?4:3,t))}function Bg(r,t){if(VL(r=ti(r)))return ex("Unsupported field value:",t,r),HL(r,t);if(r instanceof xg)return(function(n,i){if(!RL(i.Ac))throw i.Sc(`${n._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(i);s&&i.fieldTransforms.push(s)})(r,t),null;if(r===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),r instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return(function(n,i){const s=[];let a=0;for(const o of n){let A=Bg(o,i.wc(a));A==null&&(A={nullValue:"NULL_VALUE"}),s.push(A),a++}return{arrayValue:{values:s}}})(r,t)}return(function(n,i){if((n=ti(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return vtt(i.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=ln.fromDate(n);return{timestampValue:D0(i.serializer,s)}}if(n instanceof ln){const s=new ln(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:D0(i.serializer,s)}}if(n instanceof Ja)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof ha)return{bytesValue:tL(i.serializer,n._byteString)};if(n instanceof Dn){const s=i.databaseId,a=n.firestore._databaseId;if(!a.isEqual(s))throw i.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:R2(n.firestore._databaseId||i.databaseId,n._key.path)}}if(n instanceof Za)return(function(a,o){return{mapValue:{fields:{[I3]:{stringValue:T3},[L0]:{arrayValue:{values:a.toArray().map((l=>{if(typeof l!="number")throw o.Sc("VectorValues must only contain numeric values.");return N2(o.serializer,l)}))}}}}}})(n,i);throw i.Sc(`Unsupported field value: ${yb(n)}`)})(r,t)}function HL(r,t){const e={};return _3(r)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Ac(r,((n,i)=>{const s=Bg(i,t.mc(n));s!=null&&(e[n]=s)})),{mapValue:{fields:e}}}function VL(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof ln||r instanceof Ja||r instanceof ha||r instanceof Dn||r instanceof xg||r instanceof Za)}function ex(r,t,e){if(!VL(e)||!v3(e)){const n=yb(e);throw n==="an object"?t.Sc(r+" a custom object"):t.Sc(r+" "+n)}}function mv(r,t,e){if((t=ti(t))instanceof Jd)return t._internalPath;if(typeof t=="string")return rx(r,t);throw O0("Field path arguments must be of type string or ",r,!1,void 0,e)}const Prt=new RegExp("[~\\*/\\[\\]]");function rx(r,t,e){if(t.search(Prt)>=0)throw O0(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,e);try{return new Jd(...t.split("."))._internalPath}catch{throw O0(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,e)}}function O0(r,t,e,n,i){const s=n&&!n.isEmpty(),a=i!==void 0;let o=`Function ${t}() called with invalid data`;e&&(o+=" (via `toFirestore()`)"),o+=". ";let A="";return(s||a)&&(A+=" (found",s&&(A+=` in field ${n}`),a&&(A+=` in document ${i}`),A+=")"),new le(Kt.INVALID_ARGUMENT,o+r+A)}function $L(r,t){return r.some((e=>e.isEqual(t)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jL{constructor(t,e,n,i,s){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Dn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new Nrt(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(Pb("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class Nrt extends jL{data(){return super.data()}}function Pb(r,t){return typeof t=="string"?rx(r,t):t instanceof Jd?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Drt(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new le(Kt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class nx{}class Nb extends nx{}function Zd(r,t,...e){let n=[];t instanceof nx&&n.push(t),n=n.concat(e),(function(s){const a=s.filter((A=>A instanceof Db)).length,o=s.filter((A=>A instanceof Cg)).length;if(a>1||a>0&&o>0)throw new le(Kt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(n);for(const i of n)r=i._apply(r);return r}class Cg extends Nb{constructor(t,e,n){super(),this._field=t,this._op=e,this._value=n,this.type="where"}static _create(t,e,n){return new Cg(t,e,n)}_apply(t){const e=this._parse(t);return KL(t._query,e),new OA(t.firestore,t.converter,ov(t._query,e))}_parse(t){const e=_g(t.firestore);return(function(s,a,o,A,l,c,u){let h;if(l.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new le(Kt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){XS(u,c);const m=[];for(const f of u)m.push(YS(A,s,f));h={arrayValue:{values:m}}}else h=YS(A,s,u)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||XS(u,c),h=Urt(o,a,u,c==="in"||c==="not-in");return si.create(l,c,h)})(t._query,"where",e,t.firestore._databaseId,this._field,this._op,this._value)}}function Nd(r,t,e){const n=t,i=Pb("where",r);return Cg._create(i,n,e)}class Db extends nx{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new Db(t,e)}_parse(t){const e=this._queryConstraints.map((n=>n._parse(t))).filter((n=>n.getFilters().length>0));return e.length===1?e[0]:eo.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return e.getFilters().length===0?t:((function(i,s){let a=i;const o=s.getFlattenedFilters();for(const A of o)KL(a,A),a=ov(a,A)})(t._query,e),new OA(t.firestore,t.converter,ov(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Mb extends Nb{constructor(t,e){super(),this._field=t,this._direction=e,this.type="orderBy"}static _create(t,e){return new Mb(t,e)}_apply(t){const e=(function(i,s,a){if(i.startAt!==null)throw new le(Kt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new le(Kt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Kf(s,a)})(t._query,this._field,this._direction);return new OA(t.firestore,t.converter,(function(i,s){const a=i.explicitOrderBy.concat([s]);return new Yd(i.path,i.collectionGroup,a,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(t._query,e))}}function GL(r,t="asc"){const e=t,n=Pb("orderBy",r);return Mb._create(n,e)}class Rb extends Nb{constructor(t,e,n){super(),this.type=t,this._limit=e,this._limitType=n}static _create(t,e,n){return new Rb(t,e,n)}_apply(t){return new OA(t.firestore,t.converter,P0(t._query,this._limit,this._limitType))}}function Eg(r){return Rb._create("limit",r,"F")}function YS(r,t,e){if(typeof(e=ti(e))=="string"){if(e==="")throw new le(Kt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!R3(t)&&e.indexOf("/")!==-1)throw new le(Kt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const n=t.path.child(An.fromString(e));if(!Ue.isDocumentKey(n))throw new le(Kt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return hS(r,new Ue(n))}if(e instanceof Dn)return hS(r,e._key);throw new le(Kt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${yb(e)}.`)}function XS(r,t){if(!Array.isArray(r)||r.length===0)throw new le(Kt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function KL(r,t){const e=(function(i,s){for(const a of i)for(const o of a.getFlattenedFilters())if(s.indexOf(o.op)>=0)return o.op;return null})(r.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(t.op));if(e!==null)throw e===t.op?new le(Kt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new le(Kt.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${e.toString()}' filters.`)}class zL{convertValue(t,e="none"){switch(Jl(t)){case 0:return null;case 1:return t.booleanValue;case 2:return zn(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Xl(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw He(62114,{value:t})}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const n={};return Ac(t,((i,s)=>{n[i]=this.convertValue(s,e)})),n}convertVectorValue(t){var n,i,s;const e=(s=(i=(n=t.fields)==null?void 0:n[L0].arrayValue)==null?void 0:i.values)==null?void 0:s.map((a=>zn(a.doubleValue)));return new Za(e)}convertGeoPoint(t){return new Ja(zn(t.latitude),zn(t.longitude))}convertArray(t,e){return(t.values||[]).map((n=>this.convertValue(n,e)))}convertServerTimestamp(t,e){switch(e){case"previous":const n=xb(t);return n==null?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(jf(t));default:return null}}convertTimestamp(t){const e=Yl(t);return new ln(e.seconds,e.nanos)}convertDocumentKey(t,e){const n=An.fromString(t);Dr(aL(n),9688,{name:t});const i=new Td(n.get(1),n.get(3)),s=new Ue(n.popFirst(5));return i.isEqual(e)||DA(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ix(r,t,e){let n;return n=r?e&&(e.merge||e.mergeFields)?r.toFirestore(t,e):r.toFirestore(t):t,n}class sd{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Ol extends jL{constructor(t,e,n,i,s,a){super(t,e,n,i,a),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new Bf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const n=this._document.data.field(Pb("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n,e.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new le(Kt.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,e={};return e.type=Ol._jsonSchemaVersion,e.bundle="",e.bundleSource="DocumentSnapshot",e.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?e:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),e.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),e)}}Ol._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ol._jsonSchema={type:oi("string",Ol._jsonSchemaVersion),bundleSource:oi("string","DocumentSnapshot"),bundleName:oi("string"),bundle:oi("string")};class Bf extends Ol{data(t={}){return super.data(t)}}class Jc{constructor(t,e,n,i){this._firestore=t,this._userDataWriter=e,this._snapshot=i,this.metadata=new sd(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const t=[];return this.forEach((e=>t.push(e))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach((n=>{t.call(e,new Bf(this._firestore,this._userDataWriter,n.key,n,new sd(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new le(Kt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=(function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map((o=>{const A=new Bf(i._firestore,i._userDataWriter,o.doc.key,o.doc,new sd(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);return o.doc,{type:"added",doc:A,oldIndex:-1,newIndex:a++}}))}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((o=>s||o.type!==3)).map((o=>{const A=new Bf(i._firestore,i._userDataWriter,o.doc.key,o.doc,new sd(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,c=-1;return o.type!==0&&(l=a.indexOf(o.doc.key),a=a.delete(o.doc.key)),o.type!==1&&(a=a.add(o.doc),c=a.indexOf(o.doc.key)),{type:Mrt(o.type),doc:A,oldIndex:l,newIndex:c}}))}})(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new le(Kt.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Jc._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=bb.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const e=[],n=[],i=[];return this.docs.forEach((s=>{s._document!==null&&(e.push(s._document),n.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function Mrt(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return He(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sg(r){r=ya(r,Dn);const t=ya(r.firestore,HA);return Srt(vg(t),r._key).then((e=>Rrt(t,r,e)))}Jc._jsonSchemaVersion="firestore/querySnapshot/1.0",Jc._jsonSchema={type:oi("string",Jc._jsonSchemaVersion),bundleSource:oi("string","QuerySnapshot"),bundleName:oi("string"),bundle:oi("string")};class qL extends zL{constructor(t){super(),this.firestore=t}convertBytes(t){return new ha(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Dn(this.firestore,null,e)}}function Cu(r){r=ya(r,OA);const t=ya(r.firestore,HA),e=vg(t),n=new qL(t);return Drt(r._query),krt(e,r._query).then((i=>new Jc(t,n,r,i)))}function H0(r,t,e){r=ya(r,Dn);const n=ya(r.firestore,HA),i=ix(r.converter,t,e);return th(n,[Z2(_g(n),"setDoc",r._key,i,r.converter!==null,e).toMutation(r._key,Bs.none())])}function WL(r,t,e,...n){r=ya(r,Dn);const i=ya(r.firestore,HA),s=_g(i);let a;return a=typeof(t=ti(t))=="string"||t instanceof Jd?OL(s,"updateDoc",r._key,t,e,n):QL(s,"updateDoc",r._key,t),th(i,[a.toMutation(r._key,Bs.exists(!0))])}function YL(r){return th(ya(r.firestore,HA),[new Sb(r._key,Bs.none())])}function XL(r,t){const e=ya(r.firestore,HA),n=qs(r),i=ix(r.converter,t);return th(e,[Z2(_g(r.firestore),"addDoc",n._key,i,r.converter!==null,{}).toMutation(n._key,Bs.exists(!1))]).then((()=>n))}function th(r,t){return(function(n,i){const s=new IA;return n.asyncQueue.enqueueAndForget((async()=>grt(await Ert(n),i,s))),s.promise})(vg(r),t)}function Rrt(r,t,e){const n=e.docs.get(t._key),i=new qL(r);return new Ol(r,i,t._key,n,new sd(e.hasPendingWrites,e.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JL{constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=_g(t)}set(t,e,n){this._verifyNotCommitted();const i=Lw(t,this._firestore),s=ix(i.converter,e,n),a=Z2(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,n);return this._mutations.push(a.toMutation(i._key,Bs.none())),this}update(t,e,n,...i){this._verifyNotCommitted();const s=Lw(t,this._firestore);let a;return a=typeof(e=ti(e))=="string"||e instanceof Jd?OL(this._dataReader,"WriteBatch.update",s._key,e,n,i):QL(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(a.toMutation(s._key,Bs.exists(!0))),this}delete(t){this._verifyNotCommitted();const e=Lw(t,this._firestore);return this._mutations=this._mutations.concat(new Sb(e._key,Bs.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new le(Kt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Lw(r,t){if((r=ti(r)).firestore!==t)throw new le(Kt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}function ZL(){return new tx("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kg(r){return vg(r=ya(r,HA)),new JL(r,(t=>th(r,t)))}(function(t,e=!0){(function(i){zd=i})(Gd),kd(new ou("firestore",((n,{instanceIdentifier:i,options:s})=>{const a=n.getProvider("app").getImmediate(),o=new HA(new PZ(n.getProvider("auth-internal")),new MZ(a,n.getProvider("app-check-internal")),(function(l,c){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new le(Kt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Td(l.options.projectId,c)})(a,i),a);return s={useFetchStreams:e,...s},o._setSettings(s),o}),"PUBLIC").setMultipleInstances(!0)),Rl(tS,eS,t),Rl(tS,eS,"esm2020")})();const Qrt=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:zL,Bytes:ha,CollectionReference:TA,DocumentReference:Dn,DocumentSnapshot:Ol,FieldPath:Jd,FieldValue:xg,Firestore:HA,FirestoreError:le,GeoPoint:Ja,Query:OA,QueryCompositeFilterConstraint:Db,QueryConstraint:Nb,QueryDocumentSnapshot:Bf,QueryFieldFilterConstraint:Cg,QueryLimitConstraint:Rb,QueryOrderByConstraint:Mb,QuerySnapshot:Jc,SnapshotMetadata:sd,Timestamp:ln,VectorValue:Za,WriteBatch:JL,_AutoId:bb,_ByteString:Pi,_DatabaseId:Td,_DocumentKey:Ue,_EmptyAuthCredentialsProvider:b3,_FieldPath:Fi,_cast:ya,_logWarn:uu,_validateIsNotUsedTogether:w3,addDoc:XL,collection:cc,connectFirestoreEmulator:NL,deleteDoc:YL,doc:qs,ensureFirestoreConfigured:vg,executeWrite:th,getDoc:Sg,getDocs:Cu,getFirestore:DL,limit:Eg,orderBy:GL,query:Zd,serverTimestamp:ZL,setDoc:H0,updateDoc:WL,where:Nd,writeBatch:kg},Symbol.toStringTag,{value:"Module"})),Ort={apiKey:"AIzaSyAkw1kL7AU73Y9FWrPZ-ERv5xFvXGGILBA",authDomain:"claritybudget-6lnmd.firebaseapp.com",projectId:"claritybudget-6lnmd",storageBucket:"claritybudget-6lnmd.firebasestorage.app",messagingSenderId:"40318182466",appId:"1:40318182466:web:c2ce0637f8f23afa95b9db"},tU=SF(Ort),cA=FZ(tU),bn=DL(tU),Hrt=new mA,hu=ZL;class Vrt{constructor(t="smart_evaluator_",e=5){if(typeof t!="string")throw new Error("CacheManager prefix must be a string.");if(typeof e!="number"||e<=0)throw new Error("CacheManager default duration must be a positive number.");this.PREFIX=t,this.DEFAULT_CACHE_DURATION_MS=e*60*1e3,this.forceRefresh=!1,console.log(`CacheManager initialized with prefix "${this.PREFIX}" and default duration ${e} minutes.`)}set(t,e,n=null){if(!t||typeof t!="string"){console.warn("Cache set failed: Invalid key.",{key:t});return}if(e===void 0){console.warn(`Cache set skipped for key "${t}": Data is undefined.`);return}const i=n!==null&&n>0?n*60*1e3:this.DEFAULT_CACHE_DURATION_MS,s={data:e,timestamp:Date.now(),expires:Date.now()+i};try{const a=JSON.stringify(s);localStorage.setItem(this.PREFIX+t,a)}catch(a){if(console.error(`Error setting cache for key "${t}":`,a),a.name==="QuotaExceededError"||a.message&&a.message.toLowerCase().includes("quota")){console.warn("LocalStorage quota exceeded. Attempting to clear oldest items..."),this.clearOldest();try{localStorage.setItem(this.PREFIX+t,JSON.stringify(s)),console.log(`Cache set for key: ${t} after clearing space.`)}catch(o){console.error(`Failed to set cache for key "${t}" even after clearing space:`,o)}}}}get(t){if(!t||typeof t!="string")return console.warn("Cache get failed: Invalid key."),null;const e=this.PREFIX+t,n=localStorage.getItem(e);if(!n)return null;if(this.forceRefresh)return console.log(`Cache force refresh triggered for key: ${t}.`),this.forceRefresh=!1,this.clear(t),null;try{const i=JSON.parse(n);return typeof i!="object"||i===null||!i.hasOwnProperty("data")||!i.hasOwnProperty("expires")||typeof i.expires!="number"?(console.warn(`Invalid cache structure for key: ${t}. Clearing item.`),localStorage.removeItem(e),null):Date.now()>i.expires?(localStorage.removeItem(e),null):i.data}catch(i){return console.error(`Error parsing cache for key "${t}". Clearing item.`,i),localStorage.removeItem(e),null}}clear(t){if(!(!t||typeof t!="string"))try{localStorage.removeItem(this.PREFIX+t)}catch(e){console.error(`Error clearing cache for key "${t}":`,e)}}clearAll(){let t=0;try{Object.keys(localStorage).filter(n=>n.startsWith(this.PREFIX)).forEach(n=>{localStorage.removeItem(n),t++}),t>0&&console.log(`Cleared ${t} cache items.`)}catch(e){console.error("Error clearing all cache items:",e)}}clearOldest(t=50,e=10){if(!(t<=0||e<=0))try{const n=Object.keys(localStorage).filter(i=>i.startsWith(this.PREFIX));if(n.length>t){console.log(`Cache limit exceeded. Clearing ${e} oldest items.`);const i=n.map(s=>{try{const a=localStorage.getItem(s),o=a?JSON.parse(a):null;return{key:s,timestamp:(o==null?void 0:o.timestamp)||0}}catch{return{key:s,timestamp:0}}});i.sort((s,a)=>s.timestamp-a.timestamp),i.slice(0,e).forEach(s=>{localStorage.removeItem(s.key)})}}catch(n){console.error("Error clearing oldest cache items:",n)}}setForceRefresh(){this.forceRefresh=!0,console.log("Cache force refresh enabled for the next get() call.")}async getSmartData(t,e){var n;if(!t||typeof e!="function")return console.error("getSmartData: Invalid arguments."),null;try{const i=await Sg(qs(bn,"settings","status"));let s=0;if(i.exists()){const h=i.data();(n=h==null?void 0:h.lastUpdated)!=null&&n.toMillis?s=h.lastUpdated.toMillis():h!=null&&h.lastUpdated&&(s=new Date(h.lastUpdated).getTime())}else{console.warn('SmartCache: "settings/status" doc not found. Creating it now...');try{const{setDoc:h,doc:d}=await Sm(async()=>{const{setDoc:m,doc:f}=await Promise.resolve().then(()=>Qrt);return{setDoc:m,doc:f}},void 0);await h(d(bn,"settings","status"),{lastUpdated:Date.now()}),s=Date.now(),console.log('SmartCache: Created "settings/status" with timestamp:',s)}catch(h){console.error("SmartCache: Failed to auto-create settings/status:",h)}}const a=this.PREFIX+t,o=localStorage.getItem(a);let A=null,l=-1;if(o&&!this.forceRefresh)try{const h=JSON.parse(o);h&&h.serverLastUpdated&&(l=h.serverLastUpdated,A=h.data)}catch(h){console.warn("SmartCache: Error parsing local cache.",h)}if(s>0&&s===l&&A)return console.log(`[SmartCache] HIT for "${t}". Server: ${s} === Cache: ${l}`),A;console.log(`[SmartCache] MISS for "${t}". Server: ${s} !== Cache: ${l}. Fetching...`);const c=await e(),u={data:c,timestamp:Date.now(),serverLastUpdated:s,expires:Date.now()+this.DEFAULT_CACHE_DURATION_MS};try{localStorage.setItem(a,JSON.stringify(u))}catch(h){if(console.error("SmartCache: Error saving to localStorage",h),h.name==="QuotaExceededError"||h.message&&h.message.toLowerCase().includes("quota")){this.clearOldest();try{localStorage.setItem(a,JSON.stringify(u))}catch(d){console.error("SmartCache: Retry failed",d)}}}return this.forceRefresh&&(this.forceRefresh=!1),c}catch(i){return console.error(`[SmartCache] Error in getSmartData for "${t}":`,i),await e()}}}const gs=new Vrt,Sr={GROUPS:"groups_data",STUDENTS:"students_data",TASKS:"tasks_data",EVALUATIONS:"evaluations_data",ADMINS:"admins_data"};function fu(r){return typeof r=="string"?r.trim():typeof r=="number"?String(r).trim():""}function Eu(r){const t=fu(r);return t?t.toLowerCase():""}function eU(r,t,e=null){if(!t)return!1;const n=gs.get(r);return!Array.isArray(n)||n.length===0?!1:n.some(i=>!i||e&&i.id===e?!1:(typeof i.nameLower=="string"&&i.nameLower?i.nameLower:Eu(i.name))===t)}async function Su(){try{const r=qs(bn,"settings","status");await H0(r,{lastUpdated:Date.now()},{merge:!0}),console.log(" Server metadata updated (Sync Triggered).")}catch(r){console.error("Failed to update server metadata:",r)}}async function Ig(r,t,e={}){const n=async()=>{try{let i=cc(bn,r);return e.orderByField&&(i=Zd(i,GL(e.orderByField,e.orderByDirection||"asc"))),(await Cu(i)).docs.map(a=>({id:a.id,...a.data()}))}catch(i){throw console.error(` Error loading ${r}:`,i),new Error(`Failed to load ${r}. Check connection/permissions.`)}};return await gs.getSmartData(t,n)}async function Qb(r,t,e){try{const n=await XL(cc(bn,r),{...t,createdAt:hu()});return gs.clear(e),await Su(),console.log(` Document added to ${r} (${n.id})`),n.id}catch(n){throw console.error(` Error adding document to ${r}:`,n),new Error(`Failed to add item to ${r}.`)}}async function Tg(r,t,e,n){if(!t)throw new Error("Document ID required for update.");try{await WL(qs(bn,r,t),{...e,updatedAt:hu()}),gs.clear(n),await Su(),console.log(` Document updated in ${r} (${t})`),r==="admins"&&gs.clear(`admin_${t}`)}catch(i){throw console.error(` Error updating document ${t} in ${r}:`,i),new Error(`Failed to update item in ${r}.`)}}async function Fg(r,t,e){if(!t)throw new Error("Document ID required for deletion.");try{await YL(qs(bn,r,t)),gs.clear(e),await Su(),console.log(` Document deleted from ${r} (${t})`),r==="admins"&&gs.clear(`admin_${t}`)}catch(n){throw console.error(` Error deleting document ${t} in ${r}:`,n),new Error(`Failed to delete item from ${r}.`)}}async function $rt(r,t){if(!Array.isArray(t)||t.length===0)return;const e=450,n=[];for(let s=0;s<t.length;s+=e)n.push(t.slice(s,s+e));console.log(`Starting restore for ${r}: ${t.length} items in ${n.length} batches.`);for(const s of n){const a=kg(bn);s.forEach(o=>{if(!o.id)return;const A=qs(bn,r,o.id);a.set(A,{...o,updatedAt:hu()},{merge:!0})});try{await a.commit(),console.log(` Restored batch of ${s.length} items to ${r}`)}catch(o){throw console.error(` Error restoring batch to ${r}:`,o),new Error(`Failed to restore data to ${r}.`)}}const i={groups:Sr.GROUPS,students:Sr.STUDENTS,tasks:Sr.TASKS,evaluations:Sr.EVALUATIONS,admins:Sr.ADMINS};i[r]&&gs.clear(i[r]),await Su()}async function jrt(r){try{const t=await Cu(cc(bn,r));if(t.empty)return;const e=450,n=t.docs,i=[];for(let a=0;a<n.length;a+=e)i.push(n.slice(a,a+e));console.log(`Clearing ${r}: ${n.length} items...`);for(const a of i){const o=kg(bn);a.forEach(A=>{o.delete(A.ref)}),await o.commit()}console.log(` Cleared collection ${r}`);const s={groups:Sr.GROUPS,students:Sr.STUDENTS,tasks:Sr.TASKS,evaluations:Sr.EVALUATIONS,admins:Sr.ADMINS};s[r]&&gs.clear(s[r]),await Su()}catch(t){throw console.error(` Error clearing collection ${r}:`,t),new Error(`Failed to clear ${r}.`)}}const Grt=()=>Ig("groups",Sr.GROUPS,{orderByField:"name"}),Krt=(r={})=>{const t=fu(r.name);if(!t)throw new Error("Group name is required.");const e={...r,name:t,nameLower:Eu(t)};return Qb("groups",e,Sr.GROUPS)},zrt=(r,t={})=>{if(!r)throw new Error("Group ID required for update.");const e={...t};if(Object.prototype.hasOwnProperty.call(t,"name")){const n=fu(t.name);if(!n)throw new Error("Group name cannot be empty.");e.name=n,e.nameLower=Eu(n)}return Tg("groups",r,e,Sr.GROUPS)},qrt=r=>Fg("groups",r,Sr.GROUPS),Wrt=()=>Ig("students",Sr.STUDENTS,{orderByField:"name"}),Yrt=r=>Qb("students",r,Sr.STUDENTS),Xrt=(r,t)=>Tg("students",r,t,Sr.STUDENTS),Jrt=async(r,t)=>{if(!r||r.length===0)return;const e=kg(bn);r.forEach(n=>{const i=qs(bn,"students",n);e.update(i,{...t,updatedAt:hu()})});try{await e.commit(),gs.clear(Sr.STUDENTS),await Su(),console.log(` Batch updated ${r.length} students.`)}catch(n){throw console.error(" Error batch updating students:",n),new Error("Failed to update student group assignments.")}},Zrt=r=>Fg("students",r,Sr.STUDENTS),tnt=()=>Ig("tasks",Sr.TASKS,{orderByField:"date",orderByDirection:"desc"}),ent=(r={})=>{const t=fu(r.name);if(!t)throw new Error("Task name is required.");const e={...r,name:t,nameLower:Eu(t)};return Qb("tasks",e,Sr.TASKS)},rnt=(r,t={})=>{if(!r)throw new Error("Task ID required for update.");const e={...t};if(Object.prototype.hasOwnProperty.call(t,"name")){const n=fu(t.name);if(!n)throw new Error("Task name cannot be empty.");e.name=n,e.nameLower=Eu(n)}return Tg("tasks",r,e,Sr.TASKS)},nnt=r=>Fg("tasks",r,Sr.TASKS),int=()=>Ig("evaluations",Sr.EVALUATIONS,{orderByField:"taskDate",orderByDirection:"desc"}),snt=r=>Qb("evaluations",r,Sr.EVALUATIONS),ant=(r,t)=>Tg("evaluations",r,t,Sr.EVALUATIONS),ont=r=>Fg("evaluations",r,Sr.EVALUATIONS),Ant=async r=>{if(!r||r.length===0)return;const t=kg(bn);r.forEach(e=>{const n=qs(bn,"evaluations",e);t.delete(n)});try{await t.commit(),gs.clear(Sr.EVALUATIONS),await Su(),console.log(` Batch deleted ${r.length} evaluations.`)}catch(e){throw console.error(" Error batch deleting evaluations:",e),new Error("Failed to delete associated evaluations.")}};async function lnt(r){if(!r)throw new Error("Evaluation ID is required.");try{const t=await Sg(qs(bn,"evaluations",r));return t.exists()?{id:t.id,...t.data()}:(console.warn(`Evaluation with ID ${r} not found.`),null)}catch(t){throw console.error(` Error fetching evaluation ${r}:`,t),new Error("Failed to fetch evaluation details.")}}const cnt=()=>Ig("admins",Sr.ADMINS,{orderByField:"email"}),unt=(r,t)=>Tg("admins",r,t,Sr.ADMINS),dnt=r=>Fg("admins",r,Sr.ADMINS);async function bv(r){if(!r)return console.warn("getAdminData called without userId"),null;const t=`admin_${r}`,e=gs.get(t);if(e)return e;try{const n=await Sg(qs(bn,"admins",r));if(n.exists()){const i={id:n.id,...n.data()};return gs.set(t,i,15),i}else return null}catch(n){return console.error(` Error fetching admin data for user ${r}:`,n),null}}async function hnt(r,t,e=null){const n=fu(r),i=fu(t);if(!n||!i)throw new Error("Roll and Academic Group required.");try{let s=Zd(cc(bn,"students"),Nd("roll","==",n),Nd("academicGroup","==",i),Eg(1));const a=await Cu(s);return!(a.empty||e&&a.docs[0].id===e)}catch(s){throw console.error(" Error checking student uniqueness:",s),s.code==="failed-precondition"&&s.message.includes("index")?(console.error("Firestore composite index missing: students(roll ASC, academicGroup ASC)."),new Error("   (Student Index missing)")):new Error("Failed to check duplicate students.")}}const fnt=async(r,t=null)=>{const e=Eu(r);if(!e)return!1;if(eU(Sr.GROUPS,e,t))return!0;try{let n=Zd(cc(bn,"groups"),Nd("nameLower","==",e),Eg(1));const i=await Cu(n);return!(i.empty||t&&i.docs[0].id===t)}catch(n){throw console.error(" Error checking group name uniqueness:",n),n.code==="failed-precondition"&&n.message.includes("index")?(console.error("Firestore index missing: groups(nameLower ASC)."),new Error("   (Group Index missing)")):new Error("Failed to check duplicate group name.")}},gnt=async(r,t=null)=>{const e=Eu(r);if(!e)return!1;if(eU(Sr.TASKS,e,t))return!0;try{let n=Zd(cc(bn,"tasks"),Nd("nameLower","==",e),Eg(1));const i=await Cu(n);return!(i.empty||t&&i.docs[0].id===t)}catch(n){throw console.error(" Error checking task name uniqueness:",n),n.code==="failed-precondition"&&n.message.includes("index")?(console.error("Firestore index missing: tasks(nameLower ASC)."),new Error("   (Task Index missing)")):new Error("     ")}},pnt=Object.freeze(Object.defineProperty({__proto__:null,addEvaluation:snt,addGroup:Krt,addStudent:Yrt,addTask:ent,batchDeleteEvaluations:Ant,batchUpdateStudents:Jrt,checkGroupNameExists:fnt,checkStudentUniqueness:hnt,checkTaskNameExists:gnt,clearCollection:jrt,deleteAdmin:dnt,deleteEvaluation:ont,deleteGroup:qrt,deleteStudent:Zrt,deleteTask:nnt,getAdminData:bv,getEvaluationById:lnt,loadAdmins:cnt,loadEvaluations:int,loadGroups:Grt,loadStudents:Wrt,loadTasks:tnt,restoreCollection:$rt,updateAdmin:unt,updateEvaluation:ant,updateGroup:zrt,updateStudent:Xrt,updateTask:rnt},Symbol.toStringTag,{value:"Module"}));class mnt{constructor(){this.unsubscribeAuthStateListener=null,this._setupAuthStateListener(),console.log("AuthService initialized and listener attached.")}_setupAuthStateListener(){this.unsubscribeAuthStateListener&&this.unsubscribeAuthStateListener(),this.unsubscribeAuthStateListener=yJ(cA,async t=>{console.log("Auth state changed. User:",t?t.email:"Logged out"),ki.setAuthLoading(!0);let e=null;if(t)try{if(e=await bv(t.uid),!e){console.warn(`No admin document for ${t.email}, creating default 'user' profile.`);const i={email:t.email,type:"user",permissions:{read:!0,write:!1,edit:!1,delete:!1},createdAt:hu()};await H0(qs(bn,"admins",t.uid),i),e={id:t.uid,...i},gs.clear(`admin_${t.uid}`)}const n={uid:t.uid,email:t.email,displayName:t.displayName};ki.setUser(n,e),console.log(` User ${t.email} logged in. Role: ${e.type}`)}catch(n){console.error("Auth state change - Error handling user data:",n),Jr.showToast("     ","error");const i={uid:t.uid,email:t.email,displayName:t.displayName};ki.setUser(i,{id:t.uid,email:t.email,type:"user",permissions:{read:!0}})}else ki.setUser(null,null),gs.clearAll(),console.log("User logged out, cache cleared.");ki.setAuthLoading(!1),Jr.hideLoading(),this._triggerUIUpdateCallbacks()},t=>{console.error("Firebase Auth state listener error:",t),ki.setUser(null,null),ki.setAuthLoading(!1),Jr.hideLoading(),Jr.showToast(`     : ${t.message}`,"error"),this._triggerUIUpdateCallbacks()})}async loginWithEmail(t,e){if(!t||!e)throw new Error("   ");if(e.length<6)throw new Error("     ");try{await pJ(cA,t,e),Jr.showToast(` ${t}!`,"success"),Jr.hideModal(Jr.elements.authModal)}catch(n){console.error("Login Error:",n);const i=this._translateAuthError(n,"");throw Jr.showToast(i,"error"),new Error(i)}}async registerWithEmail(t,e,n="user"){var i;if(!t||!e)throw new Error("   ");if(e.length<6)throw new Error("     ");["user","admin"].includes(n)||(n="user");try{const a=(await gJ(cA,t,e)).user;let o={read:!0,write:!1,edit:!1,delete:!1};n==="admin"&&(o={read:!0,write:!0,edit:!1,delete:!1});const A={email:a.email,type:n,permissions:o,createdAt:hu()};await H0(qs(bn,"admins",a.uid),A),console.log(`User registered: ${a.email}, Type: ${n}, Doc created.`),await Cw(cA),Jr.showToast(" !    ","success")}catch(s){if(console.error("Registration Error:",s),s.code!=="auth/email-already-in-use"&&((i=cA.currentUser)==null?void 0:i.email)===t){try{await wJ(cA.currentUser)}catch(o){console.warn("Failed to delete partially registered auth user:",o)}await Cw(cA)}const a=this._translateAuthError(s,"");throw Jr.showToast(a,"error"),new Error(a)}}async signInWithGoogle(){try{const e=(await OJ(cA,Hrt)).user;await bv(e.uid),Jr.showToast("Google   !","success"),Jr.hideModal(Jr.elements.authModal)}catch(t){console.error("Google Sign-In Error:",t);const e=this._translateAuthError(t,"Google  ");throw Jr.showToast(e,"error"),new Error(e)}}async logout(){try{await Cw(cA),Jr.showToast("  ","info")}catch(t){console.error("Logout Error:",t);const e=this._translateAuthError(t,"");throw Jr.showToast(e,"error"),new Error(e)}}_translateAuthError(t,e=""){let n=`    (${(t==null?void 0:t.code)||"UNKNOWN"})`;switch(t==null?void 0:t.code){case"auth/user-not-found":case"auth/wrong-password":case"auth/invalid-credential":n="   ";break;case"auth/invalid-email":n="   ";break;case"auth/email-already-in-use":n="     ";break;case"auth/weak-password":n="  (  )";break;case"auth/too-many-requests":n=" ,   ";break;case"auth/network-request-failed":n="    ";break;case"auth/popup-closed-by-user":n="     ";break;case"auth/cancelled-popup-request":case"auth/popup-blocked":n="     ";break;case"auth/operation-not-allowed":n="     ";break;case"auth/requires-recent-login":n="       ";break}return`${e}  : ${n}`}_triggerUIUpdateCallbacks(){var a,o,A,l,c;const t=ki.get("currentUser"),e=ki.get("currentUserData"),n=(e==null?void 0:e.type)||"user";Jr.updateUserInfo(e),Jr.enableNavigation(!!t,n);const i=ki.get("activePage"),s=((a=window.smartEvaluator)==null?void 0:a.publicPages)||["dashboard"];!t&&i&&!s.includes(i)&&(console.log(`User logged out from private page "${i}", redirecting to dashboard.`),Jr.showPage("dashboard"),(A=(o=window.smartEvaluator)==null?void 0:o.components.dashboard)==null||A.render()),(c=(l=window.smartEvaluator)==null?void 0:l.components.settings)==null||c.applySettings()}}const rU=new mnt,{loginWithEmail:bnt,registerWithEmail:ynt,signInWithGoogle:wnt,logout:vnt}=rU;function uc(){const r=ki.get("currentUserData");return(r==null?void 0:r.type)==="super-admin"?{read:!0,write:!0,edit:!0,delete:!0}:(r==null?void 0:r.permissions)||{read:!0,write:!1,edit:!1,delete:!1}}function eh(){const r=ki.get("currentUserData");return(r==null?void 0:r.type)||"user"}function nU(){return uc().read===!0}function iU(){return uc().write===!0}function sU(){return uc().edit===!0}function aU(){return uc().delete===!0}function Lg(r){return uc()[r]===!0}function oU(r,t=null){if(!Lg(r)){const n=t||{read:"     ",write:"      ",edit:"     ",delete:"     "}[r]||"     ";return Jr.showToast(n,"warning"),!1}return!0}function AU(){return eh()==="super-admin"}function lU(){const r=eh();return r==="admin"||r==="super-admin"}function cU(){return eh()==="user"}function uU(){const r=uc(),t=eh();let n=` : ${{"super-admin":" ",admin:"",user:""}[t]||t}
`;n+=": ";const i=[];return r.read&&i.push(""),r.write&&i.push(" "),r.edit&&i.push(""),r.delete&&i.push(" "),n+=i.length>0?i.join(", "):" ",n}function dU(r,t){if(!r)return;Lg(t)?(r.classList.remove("hidden"),r.disabled=!1):(r.classList.add("hidden"),r.disabled=!0)}function hU(r,t){if(!r)return;Lg(t)?(r.disabled=!1,r.classList.remove("opacity-50","cursor-not-allowed"),r.title=""):(r.disabled=!0,r.classList.add("opacity-50","cursor-not-allowed"),r.title="     ")}const xnt={getUserPermissions:uc,getUserType:eh,canRead:nU,canWrite:iU,canEdit:sU,canDelete:aU,hasPermission:Lg,enforcePermission:oU,isSuperAdmin:AU,isAdmin:lU,isRegularUser:cU,getPermissionSummary:uU,toggleElementByPermission:dU,disableIfNoPermission:hU},_nt=Object.freeze(Object.defineProperty({__proto__:null,canDelete:aU,canEdit:sU,canRead:nU,canWrite:iU,default:xnt,disableIfNoPermission:hU,enforcePermission:oU,getPermissionSummary:uU,getUserPermissions:uc,getUserType:eh,hasPermission:Lg,isAdmin:lU,isRegularUser:cU,isSuperAdmin:AU,toggleElementByPermission:dU},Symbol.toStringTag,{value:"Module"}));async function dc(r){const t=document.createElement("iframe");t.style.position="fixed",t.style.right="0",t.style.bottom="0",t.style.width="0",t.style.height="0",t.style.border="0",document.body.appendChild(t);const e=t.contentWindow.document;e.open(),e.write(`
    <!DOCTYPE html>
    <html lang="bn">
    <head>
      <meta charset="UTF-8">
      <title>Report</title>
      <script src="https://cdn.tailwindcss.com"><\/script>
      <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Bengali:wght@400;500;600;700&display=swap" rel="stylesheet">
      <style>
        body { 
          font-family: 'Noto Sans Bengali', sans-serif; 
          -webkit-print-color-adjust: exact; 
          print-color-adjust: exact;
        }
        @media print {
          @page { margin: 5mm; size: A4; }
          body { -webkit-print-color-adjust: exact; }
        }
      </style>
    </head>
    <body class="bg-white text-gray-900 p-4">
      ${r}
      <script>
        // Wait for fonts and styles to load before printing
        window.onload = () => {
          setTimeout(() => {
            window.print();
            window.onafterprint = () => {
              // Optional: Notify parent window
            };
          }, 1000); // Small delay to ensure rendering
        };
      <\/script>
    </body>
    </html>
  `),e.close(),setTimeout(()=>{document.body.removeChild(t)},6e4)}async function Bnt(r,t){const e=new Date().toLocaleDateString("bn-BD"),n=r.map((s,a)=>`
    <tr class="border-b border-gray-200 ${a%2===0?"bg-gray-50":"bg-white"}">
      <td class="py-2 px-3 text-left">${s.groupName}</td>
      <td class="py-2 px-3 text-center">${Tr(s.studentCount)}</td>
      <td class="py-2 px-3 text-center">${Tr(s.evaluationCount)}</td>
      <td class="py-2 px-3 text-center">${Tr(s.averageScore)}%</td>
      <td class="py-2 px-3 text-center">${Tr(s.participationRate)}%</td>
    </tr>
  `).join(""),i=`
    <div class="font-bengali">
      <div class="text-center mb-6">
        <h1 class="text-2xl font-bold text-blue-700 mb-2">  </h1>
        <h2 class="text-xl font-semibold text-gray-700">   </h2>
        <p class="text-sm text-gray-500 mt-1">: ${e}</p>
      </div>
      
      <table class="w-full border-collapse border border-gray-300 text-sm">
        <thead>
          <tr class="bg-blue-600 text-white">
            <th class="py-2 px-3 text-left font-semibold"> </th>
            <th class="py-2 px-3 text-center font-semibold"></th>
            <th class="py-2 px-3 text-center font-semibold"></th>
            <th class="py-2 px-3 text-center font-semibold"> </th>
            <th class="py-2 px-3 text-center font-semibold"></th>
          </tr>
        </thead>
        <tbody>
          ${n}
        </tbody>
      </table>
      
      <div class="mt-8 text-xs text-gray-400 text-center border-t pt-2">
              
      </div>
    </div>
  `;await dc(i),t.showToast("   ...","info")}async function Cnt(r,t,e){const n=new Date().toLocaleDateString("bn-BD"),i=r.map((a,o)=>`
    <tr class="border-b border-gray-200 ${o%2===0?"bg-gray-50":"bg-white"}">
      <td class="py-2 px-2 text-center">${Tr(a.roll)}</td>
      <td class="py-2 px-2 text-left font-medium">${a.name}</td>
      <td class="py-2 px-2 text-left">${t.get(a.groupId)||"-"}</td>
      <td class="py-2 px-2 text-center">${a.academicGroup||"-"}</td>
      <td class="py-2 px-2 text-center">${a.gender||"-"}</td>
      <td class="py-2 px-2 text-center">${a.contact||"-"}</td>
    </tr>
  `).join(""),s=`
    <div class="font-bengali">
      <div class="text-center mb-6">
        <h1 class="text-2xl font-bold text-indigo-700 mb-2">  </h1>
        <h2 class="text-xl font-semibold text-gray-700">  </h2>
        <p class="text-sm text-gray-500 mt-1"> : ${Tr(r.length)}  | : ${n}</p>
      </div>
      
      <table class="w-full border-collapse border border-gray-300 text-xs">
        <thead>
          <tr class="bg-indigo-600 text-white">
            <th class="py-2 px-2 text-center font-semibold w-16"></th>
            <th class="py-2 px-2 text-left font-semibold"></th>
            <th class="py-2 px-2 text-left font-semibold"></th>
            <th class="py-2 px-2 text-center font-semibold"></th>
            <th class="py-2 px-2 text-center font-semibold"></th>
            <th class="py-2 px-2 text-center font-semibold"></th>
          </tr>
        </thead>
        <tbody>
          ${i}
        </tbody>
      </table>
      
      <div class="mt-8 text-xs text-gray-400 text-center border-t pt-2">
              
      </div>
    </div>
  `;await dc(s),e.showToast("   ...","info")}async function Ent(r,t,e){const n=new Date().toLocaleDateString("bn-BD");let i="";r.forEach(a=>{const o=t.filter(l=>l.groupId===a.id);if(o.length===0)return;const A=o.map((l,c)=>`
      <tr class="border-b border-gray-100 ${c%2===0?"bg-gray-50":"bg-white"}">
        <td class="py-1 px-2 text-center">${Tr(l.roll)}</td>
        <td class="py-1 px-2 text-left">${l.name}</td>
        <td class="py-1 px-2 text-center">${l.role||"-"}</td>
        <td class="py-1 px-2 text-center">${l.contact||"-"}</td>
      </tr>
    `).join("");i+=`
      <div class="mb-8 break-inside-avoid">
        <h3 class="text-lg font-bold text-purple-700 mb-2 border-b-2 border-purple-200 pb-1">
          ${a.name} <span class="text-sm font-normal text-gray-500 ml-2">(${Tr(o.length)} )</span>
        </h3>
        <table class="w-full border-collapse border border-gray-200 text-xs">
          <thead>
            <tr class="bg-purple-100 text-purple-900">
              <th class="py-1 px-2 text-center w-16"></th>
              <th class="py-1 px-2 text-left"></th>
              <th class="py-1 px-2 text-center"></th>
              <th class="py-1 px-2 text-center"></th>
            </tr>
          </thead>
          <tbody>
            ${A}
          </tbody>
        </table>
      </div>
    `});const s=`
    <div class="font-bengali">
      <div class="text-center mb-6">
        <h1 class="text-2xl font-bold text-purple-700 mb-2">  </h1>
        <h2 class="text-xl font-semibold text-gray-700">   </h2>
        <p class="text-sm text-gray-500 mt-1">: ${n}</p>
      </div>
      
      <div class="space-y-4">
        ${i}
      </div>
      
      <div class="mt-8 text-xs text-gray-400 text-center border-t pt-2">
              
      </div>
    </div>
  `;await dc(s),e.showToast("   ...","info")}function Tr(r){if(r==null)return"-";const t=["0","1","2","3","4","5","6","7","8","9"],e=["","","","","","","","","",""];return String(r).split("").map(n=>{const i=t.indexOf(n);return i>-1?e[i]:n}).join("")}function Snt(r){if(!r)return 0;if(typeof r=="object"&&r.seconds)return r.seconds*1e3;const t=Date.parse(r);return Number.isFinite(t)?t:0}function sx(r){return{"team-leader":" ","time-keeper":" ",reporter:"","resource-manager":" ","peace-maker":" "}[String(r||"").trim()]||(r?String(r):"")}function fU(r){return{"team-leader":"bg-amber-50 text-amber-700 border-amber-200","time-keeper":"bg-sky-50 text-sky-700 border-sky-200",reporter:"bg-purple-50 text-purple-700 border-purple-200","resource-manager":"bg-emerald-50 text-emerald-700 border-emerald-200","peace-maker":"bg-rose-50 text-rose-700 border-rose-200"}[String(r||"").trim()]||"bg-gray-50 text-gray-700 border-gray-200"}function gU(r){const t=Number(r)||0;return t>=85?"bg-emerald-50 text-emerald-700":t>=70?"bg-sky-50 text-sky-700":t>=55?"bg-amber-50 text-amber-700":"bg-rose-50 text-rose-700"}function knt(r,t,e,n,i){const s=new Map(n.map(d=>[d==null?void 0:d.id,d])),a=e.filter(d=>String(d==null?void 0:d.groupId)===String(r)),o=new Set(a.map(d=>String(d==null?void 0:d.id))),l=i.filter(d=>String(d==null?void 0:d.groupId)===String(r)).map(d=>{const m=s.get(d==null?void 0:d.taskId),f=parseFloat(d==null?void 0:d.maxPossibleScore)||parseFloat(m==null?void 0:m.maxScore)||100;let b=0,y=0,B=null,I=-1;if(f>0&&(d!=null&&d.scores))for(const[N,R]of Object.entries(d.scores)){if(!o.has(String(N)))continue;const x=(parseFloat(R==null?void 0:R.totalScore)||0)/f*100;b++,y+=x,x>I&&(I=x,B=N)}const C=Snt((d==null?void 0:d.taskDate)||(d==null?void 0:d.updatedAt)||(d==null?void 0:d.evaluationDate)||(d==null?void 0:d.createdAt)||(m==null?void 0:m.date));return{ev:d,task:m,ts:C,avgPct:b?y/b:0,count:b,topStudentId:B,topPct:I}}),c=l.length?l.reduce((d,m)=>d+m.avgPct,0)/l.length:0,h=t.map(d=>{const m=String(d==null?void 0:d.id),b=i.filter(y=>String(y==null?void 0:y.groupId)===m).map(y=>{const B=s.get(y==null?void 0:y.taskId),I=parseFloat(y==null?void 0:y.maxPossibleScore)||parseFloat(B==null?void 0:B.maxScore)||100;if(I<=0||!(y!=null&&y.scores))return 0;let C=0,N=0;for(const R of Object.values(y.scores)){const U=parseFloat(R==null?void 0:R.totalScore)||0;C++,N+=U/I*100}return C?N/C:0});return{id:m,avg:b.length?b.reduce((y,B)=>y+B,0)/b.length:-1}}).filter(d=>d.avg>=0).sort((d,m)=>m.avg-d.avg).findIndex(d=>d.id===String(r));return{members:a,perEval:l,groupAvg:c,rank:h>=0?h+1:null}}async function Int(r,t,e,n,i){const s=new Date().toLocaleDateString("bn-BD");let a="";const o=[...r].sort((l,c)=>(l.name||"").localeCompare(c.name||"","bn"));for(const l of o){const{perEval:c,groupAvg:u,rank:h}=knt(l.id,r,t,e,n),d=`
      <div class="grid grid-cols-4 gap-3 mb-6">
        <div class="flex items-center gap-3 rounded-xl border border-gray-200 bg-gray-50 p-3">
          <div class="text-indigo-600"><i class="fa-solid fa-layer-group text-xl"></i></div>
          <div><div class="text-xs text-gray-500">Group</div><div class="text-sm font-semibold">${l.name}</div></div>
        </div>
        <div class="flex items-center gap-3 rounded-xl border border-gray-200 bg-gray-50 p-3">
          <div class="text-emerald-600"><i class="fa-solid fa-chart-line text-xl"></i></div>
          <div><div class="text-xs text-gray-500">Average %</div><div class="text-sm font-semibold">${u.toFixed(2)}%</div></div>
        </div>
        <div class="flex items-center gap-3 rounded-xl border border-gray-200 bg-gray-50 p-3">
          <div class="text-amber-600"><i class="fa-solid fa-crown text-xl"></i></div>
          <div><div class="text-xs text-gray-500">Rank</div><div class="text-sm font-semibold">${h?Tr(h):"-"}</div></div>
        </div>
        <div class="flex items-center gap-3 rounded-xl border border-gray-200 bg-gray-50 p-3">
          <div class="text-sky-600"><i class="fa-solid fa-percent text-xl"></i></div>
          <div><div class="text-xs text-gray-500">Evaluations</div><div class="text-sm font-semibold">${Tr(c.length)}</div></div>
        </div>
      </div>
    `,b=`
      <h4 class="text-sm font-bold text-gray-700 mb-2 uppercase">Evaluations Summary</h4>
      <table class="w-full border-collapse border border-gray-200 text-xs mb-6">
        <thead class="bg-gray-100">
          <tr>
            <th class="px-3 py-2 text-left">Assignment</th>
            <th class="px-3 py-2 text-left">Date</th>
            <th class="px-3 py-2 text-center">Evaluated</th>
            <th class="px-3 py-2 text-center">Avg %</th>
          </tr>
        </thead>
        <tbody>${c.slice().sort((y,B)=>(B.ts||0)-(y.ts||0)).map((y,B)=>{var I;return`
      <tr class="border-b border-gray-100">
        <td class="px-3 py-2">${((I=y.task)==null?void 0:I.name)||"Assignment-"+(B+1)}</td>
        <td class="px-3 py-2">${y.ts?new Date(y.ts).toLocaleDateString("bn-BD"):"-"}</td>
        <td class="px-3 py-2 text-center">${Tr(y.count)}</td>
        <td class="px-3 py-2 text-center">${y.avgPct.toFixed(2)}%</td>
      </tr>
    `}).join("")}</tbody>
      </table>
    `;a+=`
      <div class="break-after-page mb-8">
        <h2 class="text-xl font-bold text-indigo-800 mb-4 border-b-2 border-indigo-100 pb-2">${l.name}</h2>
        ${d}
        ${b}
      </div>
    `}const A=`
    <div class="font-bengali">
      <div class="text-center mb-8">
        <h1 class="text-2xl font-bold text-indigo-700">  </h1>
        <h2 class="text-lg font-semibold text-gray-600">   </h2>
        <p class="text-sm text-gray-500">: ${s}</p>
      </div>
      ${a}
    </div>
  `;await dc(A),i.showToast("   ...","info")}async function Tnt(r,t,e,n,i,s){const a=new Date().toLocaleDateString("bn-BD");let o="";const A=String(r),l=n.find(d=>String(d.id)===A),c=l?l.name:"Unknown Assignment",u=[...t].sort((d,m)=>(d.name||"").localeCompare(m.name||"","bn"));for(const d of u){const m=i.find(R=>String(R.groupId)===String(d.id)&&String(R.taskId)===A);if(!m)continue;const f=parseFloat(m.maxPossibleScore)||parseFloat(l==null?void 0:l.maxScore)||100,b=m.scores||{};let y=0,B=0;const I=e.filter(R=>R.groupId===d.id).map(R=>{const U=b[R.id];if(!U)return null;const x=parseFloat(U.taskScore)||0,v=parseFloat(U.teamScore)||0,T=parseFloat(U.additionalScore)||0,E=parseFloat(U.mcqScore)||0,_=parseFloat(U.totalScore)||x+v+T+E,F=f>0?_/f*100:0;return y+=_,B++,{roll:R.roll||R.studentRoll||"-",name:R.name,role:R.role,total:_,pct:F,comment:U.comments||""}}).filter(R=>R!==null).sort((R,U)=>U.pct-R.pct);if(I.length===0)continue;const C=f>0?y/B/f*100:0,N=I.map(R=>`
      <tr class="border-b border-gray-100">
        <td class="px-2 py-1 text-center">${Tr(R.roll)}</td>
        <td class="px-2 py-1 font-medium">${R.name}</td>
        <td class="px-2 py-1 text-xs text-gray-500">${sx(R.role)}</td>
        <td class="px-2 py-1 text-right font-bold">${R.total.toFixed(2)}</td>
        <td class="px-2 py-1 text-right"><span class="px-1 py-0.5 rounded text-xs ${gU(R.pct)}">${R.pct.toFixed(1)}%</span></td>
        <td class="px-2 py-1 text-xs text-gray-500 truncate max-w-[150px]">${R.comment}</td>
      </tr>
    `).join("");o+=`
      <div class="mb-8 break-inside-avoid">
        <div class="flex items-center justify-between mb-2 border-b border-gray-200 pb-1">
          <h3 class="text-lg font-bold text-indigo-700">${d.name}</h3>
          <div class="text-sm text-gray-600">Avg: <span class="font-bold">${C.toFixed(2)}%</span></div>
        </div>
        <table class="w-full border-collapse border border-gray-200 text-xs">
          <thead class="bg-gray-50">
            <tr>
              <th class="px-2 py-1 text-center w-12">Roll</th>
              <th class="px-2 py-1 text-left">Name</th>
              <th class="px-2 py-1 text-left">Role</th>
              <th class="px-2 py-1 text-right">Total</th>
              <th class="px-2 py-1 text-right">%</th>
              <th class="px-2 py-1 text-left">Comment</th>
            </tr>
          </thead>
          <tbody>${N}</tbody>
        </table>
      </div>
    `}const h=`
    <div class="font-bengali">
      <div class="text-center mb-8">
        <h1 class="text-2xl font-bold text-indigo-700">  </h1>
        <h2 class="text-lg font-semibold text-gray-600"> :</h2>
        <h2 class="text-lg font-semibold text-gray-600">${c}</h2>
        <p class="text-sm text-gray-500">: ${a}</p>
      </div>
      <div class="space-y-6">
        ${o||'<p class="text-center text-gray-500">      </p>'}
      </div>
    </div>
  `;await dc(h),s.showToast("   ...","info")}async function Fnt(r,t,e,n,i,s="all",a=null){const o=new Date().toLocaleDateString("bn-BD");let A="",l=[...r].sort((b,y)=>(b.name||"").localeCompare(y.name||"","bn"));a&&(l=l.filter(b=>String(b.id)===String(a)));const c=s!=="all",u=c?e.find(b=>String(b.id)===String(s)):null,h=c?"":"    ",d=c&&(u!=null&&u.date)?new Date(u.date).toLocaleDateString("bn-BD"):o,m=new Map;t.forEach(b=>{m.set(b.id,{totalScore:0,maxPossible:0,evalCount:0,taskScore:0,teamScore:0,additionalScore:0,mcqScore:0,comment:""})}),n.forEach(b=>{if(c&&String(b.taskId)!==String(s))return;const y=e.find(I=>String(I.id)===String(b.taskId)),B=parseFloat(b.maxPossibleScore)||parseFloat(y==null?void 0:y.maxScore)||100;b.scores&&Object.entries(b.scores).forEach(([I,C])=>{const N=m.get(I);if(N){const R=parseFloat(C.totalScore)||0;N.totalScore+=R,N.maxPossible+=B,N.evalCount++,N.taskScore+=parseFloat(C.taskScore)||0,N.teamScore+=parseFloat(C.teamScore)||0,N.additionalScore+=parseFloat(C.additionalScore)||0,N.mcqScore+=parseFloat(C.mcqScore)||0,c&&(N.comment=C.comments||"")}})});for(const b of l){const y=t.filter(x=>x.groupId===b.id);if(y.length===0)continue;let B=0,I=0;const C=y.map(x=>{const v=m.get(x.id),T=v.maxPossible>0?v.totalScore/v.maxPossible*100:0;v.evalCount>0&&(B+=T,I++);const E=c?1:v.evalCount||1,_={task:(v.taskScore/E).toFixed(1),team:(v.teamScore/E).toFixed(1),add:(v.additionalScore/E).toFixed(1),mcq:(v.mcqScore/E).toFixed(1),total:v.totalScore.toFixed(1),max:v.maxPossible},F=v.evalCount>0?100:0,k=F>=80?"text-emerald-600":F>=50?"text-amber-600":"text-rose-600";return{...x,stats:v,displayStats:_,avgPct:T,participationRate:F,participationClass:k}}).sort((x,v)=>v.avgPct-x.avgPct),N=I>0?B/I:0,R=C.map((x,v)=>`
      <tr class="border-b border-gray-100 ${v%2===0?"bg-gray-50":"bg-white"} hover:bg-indigo-50 transition-colors">
        <td class="px-2 py-2 text-center border-r border-gray-100">${Tr(x.roll)}</td>
        <td class="px-3 py-2 font-medium border-r border-gray-100">
          ${x.name}
          <div class="text-[10px] text-gray-500">${x.academicGroup||""}</div>
        </td>
        <td class="px-2 py-2 text-center border-r border-gray-100 whitespace-nowrap">
          <span class="px-2 py-0.5 rounded-full text-[10px] border ${fU(x.role)}">
            ${sx(x.role)||""}
          </span>
        </td>
        <td class="px-2 py-2 text-center border-r border-gray-100 font-bold text-gray-700">
             ${Tr(x.stats.evalCount>0?1:0)}
        </td>
        ${c?"":`<td class="px-2 py-2 text-center border-r border-gray-100">${Tr(x.stats.evalCount)}</td>`}
        <td class="px-2 py-2 text-center text-gray-600 border-r border-gray-100">${x.displayStats.task}</td>
        <td class="px-2 py-2 text-center text-gray-600 border-r border-gray-100">${x.displayStats.team}</td>
        <td class="px-2 py-2 text-center text-gray-600 border-r border-gray-100">${x.displayStats.add}</td>
        <td class="px-2 py-2 text-center text-gray-600 border-r border-gray-100">${x.displayStats.mcq}</td>
        <td class="px-2 py-2 text-right font-mono text-gray-800 font-bold border-r border-gray-100">${x.displayStats.total} / ${x.displayStats.max}</td>
        <td class="px-2 py-2 text-right">
          <span class="font-bold ${gU(x.avgPct)} px-1.5 py-0.5 rounded">
            ${x.avgPct.toFixed(1)}%
          </span>
        </td>
      </tr>
    `).join(""),U=c?`
      <div class="bg-indigo-50 border-b border-indigo-100 px-4 py-2 flex justify-between items-center text-xs text-indigo-800">
        <div class="font-semibold"><i class="fas fa-file-alt mr-1"></i> ${(u==null?void 0:u.name)||""}</div>
        <div><i class="far fa-calendar-alt mr-1"></i> ${d}</div>
      </div>
    `:"";A+=`
      <div class="break-inside-avoid mb-8 border border-gray-200 rounded-xl overflow-hidden shadow-sm">
        <div class="bg-gradient-to-r from-gray-50 to-white border-b border-gray-200 p-4 flex justify-between items-center">
          <div>
            <h3 class="text-lg font-bold text-gray-800 flex items-center gap-2">
              <i class="fas fa-layer-group text-indigo-500"></i> ${b.name}
            </h3>
            <p class="text-xs text-gray-500 mt-1">: ${Tr(y.length)} </p>
          </div>
          <div class="text-right">
            <div class="text-xs text-gray-500"> </div>
            <div class="text-xl font-bold text-indigo-600">${N.toFixed(1)}%</div>
          </div>
        </div>
        
        ${U}

        <table class="w-full text-xs table-fixed border-collapse">
          <thead class="bg-indigo-600 text-white uppercase tracking-wider text-[10px]">
            <tr>
              <th class="px-2 py-3 text-center font-bold w-[6%] border-r border-indigo-500/30"></th>
              <th class="px-3 py-3 text-left font-bold w-[20%] border-r border-indigo-500/30"></th>
              <th class="px-2 py-3 text-center font-bold w-[12%] border-r border-indigo-500/30 whitespace-nowrap"></th>
              <th class="px-2 py-3 text-center font-bold w-[8%] border-r border-indigo-500/30"></th>
              ${c?"":'<th class="px-2 py-3 text-center font-bold w-[8%] border-r border-indigo-500/30"></th>'}
              <th class="px-2 py-3 text-center font-bold w-[8%] border-r border-indigo-500/30"></th>
              <th class="px-2 py-3 text-center font-bold w-[8%] border-r border-indigo-500/30"></th>
              <th class="px-2 py-3 text-center font-bold w-[8%] border-r border-indigo-500/30"></th>
              <th class="px-2 py-3 text-center font-bold w-[8%] border-r border-indigo-500/30">MCQ</th>
              <th class="px-2 py-3 text-right font-bold w-[9%] border-r border-indigo-500/30"></th>
              <th class="px-2 py-3 text-right font-bold w-[9%]"> %</th>
            </tr>
          </thead>
          <tbody class="divide-y divide-gray-100">
            ${R}
          </tbody>
        </table>
      </div>
    `}const f=`
    <div class="font-bengali bg-white min-h-screen">
      <!-- Top Header Section -->
      <div class="flex justify-between items-end border-b-[3px] border-indigo-600 pb-4 mb-8">
        <div>
          <h1 class="text-4xl font-extrabold text-indigo-800 tracking-tight mb-1">  </h1>
          <div class="flex items-center gap-2 text-sm text-gray-600 font-medium">
            <span class="bg-indigo-100 text-indigo-700 px-2 py-0.5 rounded"> </span>
            <span>|</span>
            <span>: -</span>
          </div>
        </div>
        <div class="text-right">
          <div class="text-[10px] text-gray-400 uppercase tracking-widest font-bold mb-1">  </div>
          <div class="text-xl font-bold text-gray-800 font-mono bg-gray-50 px-3 py-1 rounded border border-gray-200 inline-block">
            ${new Date().toLocaleDateString("bn-BD")}
          </div>
        </div>
      </div>

      <!-- Report Title Card -->
      <div class="mb-10 bg-gradient-to-br from-indigo-50 to-white rounded-2xl border border-indigo-100 p-6 shadow-sm text-center relative overflow-hidden">
        <div class="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-indigo-400 to-purple-400"></div>
        
        ${h?`<h2 class="text-2xl font-bold text-gray-800 mb-2">${h}</h2>`:""}
        ${c?`<div class="inline-block bg-white border border-indigo-100 text-indigo-600 px-4 py-1 rounded-full text-sm font-semibold shadow-sm mb-4">${u==null?void 0:u.name}</div>`:""}
        
        <div class="flex justify-center flex-wrap gap-4 mt-2">
          <div class="flex items-center gap-2 bg-white px-3 py-1.5 rounded-lg border border-gray-100 shadow-sm">
            <div class="w-8 h-8 rounded-full bg-indigo-100 flex items-center justify-center text-indigo-600"><i class="fas fa-layer-group"></i></div>
            <div class="text-left">
              <div class="text-[10px] text-gray-400 uppercase font-bold"> </div>
              <div class="text-sm font-bold text-gray-700">${Tr(l.length)}</div>
            </div>
          </div>
          <div class="flex items-center gap-2 bg-white px-3 py-1.5 rounded-lg border border-gray-100 shadow-sm">
            <div class="w-8 h-8 rounded-full bg-emerald-100 flex items-center justify-center text-emerald-600"><i class="fas fa-users"></i></div>
            <div class="text-left">
              <div class="text-[10px] text-gray-400 uppercase font-bold"> </div>
              <div class="text-sm font-bold text-gray-700">${Tr(t.length)}</div>
            </div>
          </div>
          <div class="flex items-center gap-2 bg-white px-3 py-1.5 rounded-lg border border-gray-100 shadow-sm">
             <div class="w-8 h-8 rounded-full bg-amber-100 flex items-center justify-center text-amber-600"><i class="far fa-calendar-alt"></i></div>
             <div class="text-left">
               <div class="text-[10px] text-gray-400 uppercase font-bold"></div>
               <div class="text-sm font-bold text-gray-700">${d}</div>
             </div>
          </div>
        </div>

        <!-- Developer Info -->
        <div class="mt-6 pt-4 border-t border-indigo-50">
          <div class="inline-flex items-center gap-2 bg-indigo-50 px-4 py-2 rounded-full border border-indigo-100">
            <i class="fas fa-code text-indigo-500 text-sm"></i>
            <span class="text-xs font-medium text-indigo-800">
               : <span class="font-bold">  </span>,  ,  ( ) | : <span class="font-mono font-bold">01840-643936</span>
            </span>
          </div>
        </div>
      </div>
      
      <!-- Main Content -->
      <div class="space-y-8">
        ${A}
      </div>
      
      <!-- Footer -->
      <div class="mt-16 pt-8 border-t border-gray-200 flex justify-between items-end">
        <div class="text-xs text-gray-400">
          <p class="font-semibold text-gray-500 mb-1">   </p>
          <p>    </p>
        </div>
        <div class="text-right text-xs">
          <p class="text-gray-400 mb-1"> </p>
          <p class="font-bold text-indigo-600 text-sm">   </p>
          <p class="text-[10px] text-gray-400 mt-0.5"> ${new Date().getFullYear()}    </p>
        </div>
      </div>
    </div>
  `;await dc(f),i.showToast("   ...","info")}async function Lnt(r,t){const e=new Date().toLocaleDateString("bn-BD"),n=r.metric||{},i=n.groupName||"Group",s=r.members||[],a=r.evaluations||[],o=`
    <div class="grid grid-cols-4 gap-4 mb-6">
      <div class="p-4 bg-blue-50 rounded-lg border border-blue-100">
        <div class="text-xs text-blue-600 uppercase font-semibold"> </div>
        <div class="text-2xl font-bold text-blue-800">${Tr(n.evaluationCount)}</div>
      </div>
      <div class="p-4 bg-emerald-50 rounded-lg border border-emerald-100">
        <div class="text-xs text-emerald-600 uppercase font-semibold">  </div>
        <div class="text-2xl font-bold text-emerald-800">${Tr(n.averageScore)}%</div>
      </div>
      <div class="p-4 bg-indigo-50 rounded-lg border border-indigo-100">
        <div class="text-xs text-indigo-600 uppercase font-semibold"> </div>
        <div class="text-2xl font-bold text-indigo-800">${Tr(n.participationRate)}%</div>
      </div>
      <div class="p-4 bg-amber-50 rounded-lg border border-amber-100">
        <div class="text-xs text-amber-600 uppercase font-semibold"> </div>
        <div class="text-2xl font-bold text-amber-800">${Tr(n.pendingStudents)}</div>
      </div>
    </div>
  `,l=`
    <div class="mb-8 break-inside-avoid">
      <h3 class="text-lg font-bold text-gray-800 mb-3 border-b pb-2"> </h3>
      <table class="w-full text-xs border border-gray-200">
        <thead class="bg-gray-100 text-gray-600 uppercase">
          <tr>
            <th class="px-3 py-2 text-left"></th>
            <th class="px-3 py-2 text-center"></th>
            <th class="px-3 py-2 text-center"></th>
            <th class="px-3 py-2 text-center"></th>
            <th class="px-3 py-2 text-center"> </th>
            <th class="px-3 py-2 text-center"> </th>
            <th class="px-3 py-2 text-center"> </th>
            <th class="px-3 py-2 text-center">MCQ </th>
            <th class="px-3 py-2 text-center"> </th>
          </tr>
        </thead>
        <tbody>${s.map((d,m)=>`
    <tr class="border-b border-gray-100 ${m%2===0?"bg-gray-50":"bg-white"}">
      <td class="px-3 py-2 font-medium">
        ${d.name}
        <div class="text-[10px] text-gray-500">${d.academicGroup||""}</div>
      </td>
      <td class="px-3 py-2 text-center">${Tr(d.roll)}</td>
      <td class="px-3 py-2 text-center text-xs">
        <span class="px-2 py-0.5 rounded-full border ${fU(d.role)}">
          ${sx(d.role)}
        </span>
      </td>
      <td class="px-3 py-2 text-center">${Tr(d.evaluationCount)}</td>
      <td class="px-3 py-2 text-center text-gray-600">${d.avgTaskScore?d.avgTaskScore.toFixed(1):"-"}</td>
      <td class="px-3 py-2 text-center text-gray-600">${d.avgTeamScore?d.avgTeamScore.toFixed(1):"-"}</td>
      <td class="px-3 py-2 text-center text-gray-600">${d.avgAdditionalScore?d.avgAdditionalScore.toFixed(1):"-"}</td>
      <td class="px-3 py-2 text-center text-gray-600">${d.avgMcqScore?d.avgMcqScore.toFixed(1):"-"}</td>
      <td class="px-3 py-2 text-center font-bold text-indigo-700">${d.avgTotalScore?d.avgTotalScore.toFixed(1):"-"}</td>
    </tr>
  `).join("")}</tbody>
      </table>
    </div>
  `,u=`
    <div class="mb-8 break-inside-avoid">
      <h3 class="text-lg font-bold text-gray-800 mb-3 border-b pb-2"> </h3>
      <table class="w-full text-xs border border-gray-200">
        <thead class="bg-gray-100 text-gray-600 uppercase">
          <tr>
            <th class="px-3 py-2 text-left"></th>
            <th class="px-3 py-2 text-center"></th>
            <th class="px-3 py-2 text-center"></th>
            <th class="px-3 py-2 text-center"> </th>
            <th class="px-3 py-2 text-center"> %</th>
          </tr>
        </thead>
        <tbody>${a.map((d,m)=>`
    <tr class="border-b border-gray-100 ${m%2===0?"bg-gray-50":"bg-white"}">
      <td class="px-3 py-2 font-medium">${d.taskName}</td>
      <td class="px-3 py-2 text-center">${d.dateLabel}</td>
      <td class="px-3 py-2 text-center">${Tr(d.assessedCount)} / ${Tr(d.assessedCount+d.pendingCount)}</td>
      <td class="px-3 py-2 text-center">${d.avgTaskScore.toFixed(1)}</td>
      <td class="px-3 py-2 text-center font-bold text-indigo-700">${d.averagePercentage.toFixed(1)}%</td>
    </tr>
  `).join("")}</tbody>
      </table>
    </div>
  `,h=`
    <div class="font-bengali">
      <div class="text-center mb-8 border-b-2 border-gray-100 pb-6">
        <h1 class="text-2xl font-bold text-indigo-700 mb-2">  </h1>
        <h2 class="text-xl font-semibold text-gray-700">  : ${i}</h2>
        <div class="flex justify-center gap-4 mt-2 text-sm text-gray-500">
          <span>: ${e}</span>
          <span>: ${Tr(n.studentCount)} </span>
        </div>
      </div>
      
      ${o}
      ${l}
      ${u}
      
      <div class="mt-8 text-xs text-gray-400 text-center border-t pt-2">
              
      </div>
    </div>
  `;await dc(h),t.showToast("   ...","info")}async function pU(r,t,e,n,i,s){var u;const a=new Date().toLocaleDateString("bn-BD"),o=()=>{var d;const h=[];if(t.group!=="all"&&h.push(`: ${((d=n.get(t.group))==null?void 0:d.name)||t.group}`),t.academicGroup!=="all"&&h.push(`: ${t.academicGroup}`),t.session!=="all"&&h.push(`: ${t.session}`),t.gender!=="all"&&h.push(`: ${t.gender}`),t.role!=="all"&&h.push(`: ${t.role}`),t.extra&&t.extra.length>0){const m=t.extra.map(f=>i.get(f)||f).join(", ");h.push(`: ${m}`)}return h.length>0?h.join(" | "):" "};let A="";t.assignment!=="all"&&s&&(A=((u=s.get(t.assignment))==null?void 0:u.name)||"");const l=r.map((h,d)=>{var C;const m=((C=n.get(h.groupId))==null?void 0:C.name)||"-",f=[];e.forEach(N=>{N.scores&&N.scores[h.id]&&f.push({taskId:N.taskId,...N.scores[h.id]})});const b=f.reduce((N,R)=>N+(R.totalScore||0),0),y=f.length?(b/f.length).toFixed(1):0,B=f.length?Tr(y):"-";let I="-";if(t.assignment!=="all"){const N=f.find(R=>R.taskId===t.assignment);N&&(I=Tr(N.totalScore))}return`
        <tr class="border-b border-gray-200 ${d%2===0?"bg-gray-50":"bg-white"}">
          <td class="py-2 px-3 text-center text-gray-500">${Tr(d+1)}</td>
          <td class="py-2 px-3 text-left">${h.name}</td>
          <td class="py-2 px-3 text-center">${Tr(h.roll)}</td>
          <td class="py-2 px-3 text-center">${h.gender||"-"}</td>
          <td class="py-2 px-3 text-center">${m}</td>
          <td class="py-2 px-3 text-center">${h.academicGroup||"-"}</td>
          <td class="py-2 px-3 text-center">${h.session||"-"}</td>
          <td class="py-2 px-3 text-center">${h.role==="member"?"":h.role||"-"}</td>
          <td class="py-2 px-3 text-center">${B}</td>
          ${t.assignment!=="all"?`<td class="py-2 px-3 text-center font-bold">${I}</td>`:""}
        </tr>
      `}).join(""),c=`
    <div class="font-bengali">
      <div class="text-center mb-6">
        <h1 class="text-2xl font-bold text-blue-700 mb-2">  </h1>
        <h2 class="text-xl font-semibold text-gray-700">  </h2>
        ${A?`<h3 class="text-lg font-medium text-blue-600 mt-1">${A}</h3>`:""}
        <div class="flex flex-col items-center gap-1 mt-2">
            <p class="text-sm text-gray-600 font-medium text-center px-4">${o()}</p>
            <p class="text-xs text-gray-500">: ${a} |  : ${Tr(r.length)} </p>
        </div>
      </div>
      
      <table class="w-full border-collapse border border-gray-300 text-xs">
        <thead>
          <tr class="bg-gray-100 text-gray-700">
            <th class="py-2 px-3 text-center font-semibold border border-gray-300 w-12">#</th>
            <th class="py-2 px-3 text-left font-semibold border border-gray-300"></th>
            <th class="py-2 px-3 text-center font-semibold border border-gray-300"></th>
            <th class="py-2 px-3 text-center font-semibold border border-gray-300"></th>
            <th class="py-2 px-3 text-center font-semibold border border-gray-300"></th>
            <th class="py-2 px-3 text-center font-semibold border border-gray-300"></th>
            <th class="py-2 px-3 text-center font-semibold border border-gray-300"></th>
            <th class="py-2 px-3 text-center font-semibold border border-gray-300"></th>
            <th class="py-2 px-3 text-center font-semibold border border-gray-300"> </th>
            ${t.assignment!=="all"?'<th class="py-2 px-3 text-center font-semibold border border-gray-300"></th>':""}
          </tr>
        </thead>
        <tbody>
          ${l}
        </tbody>
      </table>
      
      <div class="mt-8 text-xs text-gray-400 text-center border-t pt-2">
              
      </div>
    </div>
  `;await dc(c)}const Unt=Object.freeze(Object.defineProperty({__proto__:null,generateAllGroupsResultPDF:Int,generateAllStudentsPDF:Cnt,generateAssignmentResultPDF:Tnt,generateGroupAnalysisPDF:Bnt,generateGroupWiseFullDetailsPDF:Fnt,generateGroupWiseStudentsPDF:Ent,generateSingleGroupAnalysisPDF:Lnt,generateStudentListPDF:pU},Symbol.toStringTag,{value:"Module"}));let ax,Na,sr;const Vt={},ox=11,Ax=55,lx=0,Pnt=1;let Uw="latest";const Nnt=["time","scheduledTime","scheduleTime","assignmentTime","startTime","startAt","timeSlot","slotTime","meetingTime"];function Dnt(r){return ax=r.managers.stateManager,Na=r.managers.uiManager,sr=r.utils,$nt(),console.log(" Dashboard component initialized."),{render:Mnt}}function Mnt(){if(console.log("Rendering Dashboard..."),!Vt.page){console.error(" Dashboard render failed: Page element (#page-dashboard) not found.");return}Na.clearContainer(Vt.page),Vt.page.innerHTML='<div class="placeholder-content"><i class="fas fa-spinner fa-spin mr-2"></i>    ...</div>';try{const{groups:r,students:t,tasks:e,evaluations:n}=ax.getState();if(!r||!t||!e||!n){Na.displayEmptyMessage(Vt.page,"   ...");return}const i=yU(r,t,e,n);Vt.page.innerHTML=Rnt(),jnt(),Znt(i),eit(i.groupPerformanceData),rit(i.academicGroupStats),iit(i.groupPerformanceData,i.groupRankingMeta),Gnt(e),console.log(" Dashboard rendered successfully.")}catch(r){console.error(" Error rendering dashboard:",r),Vt.page&&Na.displayEmptyMessage(Vt.page,`    : ${r.message}`)}}function Rnt(){return`
    <style>
      @keyframes glowOrbit {
        from { transform: rotate(0deg); }
        to { transform: rotate(360deg); }
      }
      .glow-ring {
        position: relative;
        isolation: isolate;
      }
      .glow-ring::before,
      .glow-ring::after {
        content: '';
        position: absolute;
        inset: 0;
        border-radius: 9999px;
        pointer-events: none;
      }
      .glow-ring::before {
        background: conic-gradient(from 0deg,
          rgba(255,180,0,0) 0deg,
          rgba(255,190,0,0.2) 180deg,
          rgba(255,200,0,0.9) 300deg,
          rgba(255,215,0,1) 340deg,
          rgba(255,180,0,0) 360deg);
        mask: radial-gradient(circle, transparent 65%, black 72%);
        -webkit-mask: radial-gradient(circle, transparent 65%, black 72%);
        box-shadow: 0 0 40px rgba(255,180,0,0.7), 0 0 80px rgba(255,200,0,0.5);
        animation: glowOrbit 3s linear infinite;
      }
      .glow-ring::after {
        background: conic-gradient(from 0deg,
          rgba(255,160,0,0) 0deg,
          rgba(255,180,0,0.3) 240deg,
          rgba(255,200,0,0.9) 320deg,
          rgba(255,160,0,0) 360deg);
        mask: radial-gradient(circle, transparent 55%, black 68%);
        -webkit-mask: radial-gradient(circle, transparent 55%, black 68%);
        filter: blur(12px);
        opacity: 1;
        animation: glowOrbit 5s linear infinite;
      }
    </style>
    <div class="max-w-7xl mx-auto space-y-2">
     

    <section id="dashboard-hero" class="relative overflow-hidden rounded-3xl border border-slate-300/60
  bg-gradient-to-br from-white via-slate-50 to-slate-200
  text-slate-900 shadow-[0_4px_10px_rgba(0,0,0,0.10),0_10px_28px_rgba(255,255,255,0.65)]
  hover:shadow-[0_8px_18px_rgba(0,0,0,0.14),0_14px_34px_rgba(255,255,255,0.75)]
  transition-all duration-500 ease-out
  dark:border-slate-700/60 dark:bg-gradient-to-br dark:from-slate-800 dark:via-slate-900 dark:to-black
  dark:text-slate-100 dark:shadow-[inset_0_2px_4px_rgba(255,255,255,0.05),0_6px_18px_rgba(0,0,0,0.60),0_0_28px_rgba(255,255,255,0.10)]
  dark:hover:shadow-[inset_0_3px_6px_rgba(255,255,255,0.08),0_10px_24px_rgba(0,0,0,0.75),0_0_36px_rgba(255,255,255,0.14)]">

  <!-- subtle radial aura -->
  <div aria-hidden class="absolute inset-0 opacity-30 bg-[radial-gradient(60%_50%_at_50%_0%,rgba(99,102,241,0.35),transparent_60%)]"></div>

  <div class="relative p-2 sm:p-3 space-y-2">

    <!-- Card (hero row) -->
    <section class="relative overflow-hidden rounded-3xl border
      border-slate-300/70 ring-1 ring-white/40 backdrop-blur supports-[backdrop-filter]:bg-white/70
      bg-gradient-to-br from-amber-50 via-rose-50 to-sky-50
      shadow-[0_6px_16px_rgba(0,0,0,0.10),0_0_30px_rgba(255,255,255,0.55)]
      hover:shadow-[0_10px_24px_rgba(0,0,0,0.14),0_0_36px_rgba(255,255,255,0.65)]
      transition-all duration-500 ease-out
      dark:border-slate-700/70 dark:bg-gradient-to-br dark:from-slate-800 dark:via-slate-900 dark:to-slate-950
      dark:text-slate-100 dark:shadow-[inset_0_2px_4px_rgba(255,255,255,0.06),0_10px_26px_rgba(0,0,0,0.70),0_0_34px_rgba(255,255,255,0.10)]
      dark:hover:shadow-[inset_0_3px_6px_rgba(255,255,255,0.08),0_14px_30px_rgba(0,0,0,0.78),0_0_40px_rgba(255,255,255,0.14)]">

      <!-- conic aura -->
      <div aria-hidden class="pointer-events-none absolute -inset-px rounded-[24px] opacity-[0.10] blur-2xl"
           style="background: conic-gradient(#fde68a, #f0abfc, #93c5fd, #fde68a)"></div>

      <div class="relative p-2 sm:p-3">
        <div class="flex flex-col items-center justify-between gap-2 md:flex-row">

          <!-- Left: title & icon -->
          <div class="flex w-full items-center gap-3 md:w-auto justify-center md:justify-start">
            
            <p class="text-2xl font-black tracking-tight text-slate-900 dark:text-white text-center md:text-left">
                
            </p>
             <!-- Assignment Filter -->
           
          </div>

          <!-- Score chips -->
          <div class="grid w-full grid-cols-2 gap-2 text-[0.9rem] font-semibold sm:w-auto sm:grid-cols-3 md:grid-cols-4">
            <span class="relative rounded-2xl px-4 py-1.5
              text-emerald-900 bg-gradient-to-b from-emerald-50 via-emerald-200 to-emerald-500
              ring-2 ring-emerald-300/80
              shadow-[inset_0_1px_3px_rgba(255,255,255,0.9),0_4px_8px_rgba(0,0,0,0.15),0_10px_18px_rgba(0,0,0,0.20)]
              transition-all duration-300
              dark:text-emerald-100 dark:from-emerald-700 dark:via-emerald-800 dark:to-emerald-900 dark:ring-emerald-600/40
              dark:shadow-[inset_0_1px_2px_rgba(255,255,255,0.08),0_6px_12px_rgba(0,0,0,0.75)]"> </span>

            <span class="relative rounded-2xl px-4 py-1.5
              text-sky-900 bg-gradient-to-b from-sky-50 via-sky-200 to-sky-500
              ring-2 ring-sky-300/80
              shadow-[inset_0_1px_3px_rgba(255,255,255,0.9),0_4px_8px_rgba(0,0,0,0.15),0_10px_18px_rgba(0,0,0,0.20)]
              transition-all duration-300
              dark:text-sky-100 dark:from-sky-700 dark:via-sky-800 dark:to-sky-900 dark:ring-sky-600/40
              dark:shadow-[inset_0_1px_2px_rgba(255,255,255,0.08),0_6px_12px_rgba(0,0,0,0.75)]"> </span>

            <span class="relative rounded-2xl px-4 py-1.5
              text-rose-900 bg-gradient-to-b from-rose-50 via-rose-200 to-rose-500
              ring-2 ring-rose-300/80
              shadow-[inset_0_1px_3px_rgba(255,255,255,0.9),0_4px_8px_rgba(0,0,0,0.15),0_10px_18px_rgba(0,0,0,0.20)]
              transition-all duration-300
              dark:text-rose-100 dark:from-rose-700 dark:via-rose-800 dark:to-rose-900 dark:ring-rose-600/40
              dark:shadow-[inset_0_1px_2px_rgba(255,255,255,0.08),0_6px_12px_rgba(0,0,0,0.75)]"> </span>

            <span class="relative rounded-2xl px-4 py-1.5
              text-amber-900 bg-gradient-to-b from-amber-50 via-amber-200 to-amber-500
              ring-2 ring-amber-300/80
              shadow-[inset_0_1px_3px_rgba(255,255,255,0.9),0_4px_8px_rgba(0,0,0,0.15),0_10px_18px_rgba(0,0,0,0.20)]
              transition-all duration-300
              dark:text-amber-100 dark:from-amber-700 dark:via-amber-800 dark:to-amber-900 dark:ring-amber-700/40
              dark:shadow-[inset_0_1px_2px_rgba(255,255,255,0.08),0_6px_12px_rgba(0,0,0,0.75)]">MCQ </span>
          </div>

          

          <!-- Right: image preview -->
          <div class="w-full md:w-auto">
            <div class="glow-ring relative mx-auto h-28 w-28 sm:h-32 sm:w-32">
              <div class="absolute inset-[10px] overflow-hidden rounded-full border-2 border-amber-200/60 bg-white
                shadow-[0_10px_25px_rgba(0,0,0,0.25),0_0_35px_rgba(255,214,155,0.7)]
                dark:bg-slate-900 dark:shadow-[0_12px_28px_rgba(0,0,0,0.65),0_0_35px_rgba(255,214,155,0.10)]">
                <img src="images/smart.png" alt="Evaluation summary visual"
                     class="h-full w-full object-cover object-center" loading="lazy" decoding="async" />
              </div>
            </div>
          </div>

          

        </div>
         <div class="relative">
                <select id="dashboardAssignmentFilter" 
                  class="appearance-none bg-white/50 dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 
                  text-slate-700 dark:text-slate-200 text-xs font-medium rounded-lg py-1 pl-2 pr-6 
                  focus:outline-none focus:ring-2 focus:ring-indigo-500/50 cursor-pointer backdrop-blur-sm transition-colors hover:bg-white/80 dark:hover:bg-slate-800/80">
                  <option value="latest"> </option>
                </select>
                <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-1.5 text-slate-500 dark:text-slate-400">
                  <i class="fas fa-chevron-down text-[10px]"></i>
                </div>
            </div>
      </div>
    </section>

    <!-- Two-column content -->
    <div class="grid gap-3 lg:grid-cols-2 items-stretch">

      <!-- Students & Groups -->
      <article class="rounded-3xl border border-slate-300/70 bg-gradient-to-br from-white via-slate-50 to-slate-100 
        text-slate-900 shadow-[0_8px_24px_rgba(0,0,0,0.10),0_0_24px_rgba(255,255,255,0.5)]
        backdrop-blur dark:border-slate-700/70 dark:bg-gradient-to-br dark:from-slate-800 dark:via-slate-900 dark:to-black 
        dark:text-white dark:shadow-[inset_0_2px_4px_rgba(255,255,255,0.06),0_12px_32px_rgba(0,0,0,0.7)] h-full p-2">

        <div class="space-y-2">
          <div class="flex items-center justify-center text-xs font-semibold text-slate-800 dark:text-white/80">
            <span class="inline-flex items-center gap-2 rounded-full bg-white px-3 py-1 text-slate-900 
              ring-1 ring-slate-200 shadow-sm dark:bg-white/10 dark:text-white">
              <i class="fas fa-people-group text-indigo-600 drop-shadow-[0_1px_1px_rgba(0,0,0,0.3)]"></i>
              <span id="assignmentStatusTitle">    </span>
            </span>
           
          </div>
           <!-- Evaluation progress -->
        <div class="relative rounded-2xl border border-blue-300/70
            bg-gradient-to-br from-white via-blue-50 to-emerald-50
            shadow-[inset_0_1px_2px_rgba(255,255,255,0.9),0_8px_18px_rgba(0,0,0,0.08)]
            p-1 mb-2
            dark:border-blue-400/40 dark:from-slate-900 dark:via-slate-900 dark:to-slate-950
            dark:shadow-[inset_0_1px_2px_rgba(255,255,255,0.05),0_10px_24px_rgba(0,0,0,0.55)]">

          <div class="grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4 items-center">
            <!-- Col 1: Title chip -->
            <div class="min-w-0">
              <span class="inline-flex items-center gap-2 rounded-full
                           px-3 py-1 text-[0.85rem] font-semibold
                           bg-white/90 text-slate-900 ring-1 ring-white/70
                           shadow-[0_1px_2px_rgba(0,0,0,0.14)] backdrop-blur
                           dark:bg-white/10 dark:text-white dark:ring-white/15">
                <i class="fas fa-chart-simple text-indigo-600 dark:text-indigo-300 text-sm"></i>
                <span class="truncate" lang="bn">  </span>
              </span>
            </div>

            <!-- Col 2: Progress bar -->
            <div>
              <div class="battery">
                <div class="battery-shell relative w-full h-full">
                  <div id="progressBar" class="battery-liquid h-full" style="width: 0%"></div>
                  <span id="progressBarLabel" class="battery-label absolute inset-0 flex items-center justify-center text-xs font-bold text-slate-900 dark:text-white z-10 drop-shadow-md">0%</span>
                </div>
               
              </div>
            </div>
          </div>
        </div>

          <div class="grid gap-3 md:grid-cols-2">
            <!--  -->
            <div class="rounded-2xl border border-emerald-300/70 bg-gradient-to-br from-white via-emerald-50 to-emerald-100/70 
              shadow-[0_6px_16px_rgba(16,185,129,0.18)] px-4 py-2
              dark:border-emerald-300/30 dark:from-emerald-900/40 dark:via-slate-900 dark:to-emerald-900/10">
              <div class="flex items-center justify-between">
                <div>
                  <p class="text-sm font-bold text-emerald-900 dark:text-emerald-200"></p>
                  <p class="text-xs text-emerald-700 dark:text-emerald-300/90"> </p>
                </div>
                <span class="flex h-9 w-9 items-center justify-center rounded-full bg-emerald-100 text-emerald-600 
                  shadow-[0_1px_2px_rgba(0,0,0,0.2)] dark:bg-emerald-500/20 dark:text-emerald-200">
                  <i class="fas fa-user-graduate"></i>
                </span>
              </div>

              <div class="mt-3 space-y-2 text-sm font-semibold text-slate-900 dark:text-white">
                <div class="flex items-center justify-between"><span></span><span><span id="latestAssignmentEvaluated">-</span> </span></div>
                <div class="flex items-center justify-between"><span></span><span><span id="latestAssignmentPending">-</span> </span></div>
                <div class="flex items-center justify-between"><span></span><span><span id="latestAssignmentStudentTotal">-</span> </span></div>
              </div>
            </div>

            <!--  -->
            <div class="rounded-2xl border border-sky-300/70 bg-gradient-to-br from-white via-sky-50 to-sky-100/70 
              shadow-[0_6px_16px_rgba(14,165,233,0.18)] px-4 py-4
              dark:border-sky-300/30 dark:from-sky-900/40 dark:via-slate-900 dark:to-sky-900/10">
              <div class="flex items-center justify-between">
                <div>
                  <p class="text-sm font-bold text-sky-900 dark:text-sky-100"></p>
                  <p class="text-xs text-sky-700 dark:text-sky-200/80"> </p>
                </div>
                <span class="flex h-9 w-9 items-center justify-center rounded-full bg-sky-100 text-sky-600 
                  shadow-[0_1px_2px_rgba(0,0,0,0.2)] dark:bg-sky-500/20 dark:text-sky-200">
                  <i class="fas fa-layer-group"></i>
                </span>
              </div>
              <div class="mt-3 space-y-2 text-sm font-semibold text-slate-900 dark:text-white">
                <div class="flex items-center justify-between"><span></span><span><span id="latestAssignmentGroupEvaluated">-</span> </span></div>
                <div class="flex items-center justify-between"><span></span><span><span id="latestAssignmentGroupPending">-</span> </span></div>
                <div class="flex items-center justify-between"><span></span><span><span id="latestAssignmentGroupTotal">-</span> </span></div>
              </div>
            </div>
          </div>
        </div>
      </article>

      <!-- Latest assignment + progress -->
      <article class="relative rounded-3xl border border-slate-300/70 
        bg-gradient-to-br from-blue-50 via-sky-100 to-emerald-50 
        text-slate-900 shadow-[0_10px_25px_rgba(0,0,0,0.08),0_0_35px_rgba(255,255,255,0.6)] 
        backdrop-blur p-3 sm:p-4 transition-all duration-500 
        dark:border-slate-700/70 dark:bg-gradient-to-br dark:from-slate-800 dark:via-slate-900 dark:to-slate-950 
        dark:text-white dark:shadow-[inset_0_2px_4px_rgba(255,255,255,0.06),0_12px_32px_rgba(0,0,0,0.7)] h-full">

       

        <!-- Header -->
        <div class="mb-2 sm:mb-3 ">
          <p class="text-xs font-bold text-slate-700 dark:text-white/60" lang="bn" >
            <span id="latestAssignmentLabel"> </span>    <span class="text-xs text-slate-700 dark:text-white/60">
            : <span id="latestAssignmentUpdated">-</span>
          </span>
          </p>
          <p id="latestTaskTitle"
            class="mt-1 max-w-[28rem]  font-bold text-slate-900 dark:text-white text-sm sm:text-lg"
            title="-">-</p>
        </div>

       

        <!-- Content: 3-column on sm+ -->
        <div class="grid grid-cols-2 gap-3">
          <!-- Average -->
          <div class="flex flex-col items-center justify-center gap-2 sm:gap-3">
            <div class="relative h-24 w-24 sm:h-26 sm:w-26 rounded-full border border-emerald-300/60 
              bg-emerald-50 dark:bg-slate-800
              shadow-[0_6px_16px_rgba(16,185,129,0.25)] 
              dark:border-emerald-300/30 flex items-center justify-center"
              id="latestAssignmentCircle">
              <div class="absolute inset-3 rounded-full bg-white dark:bg-slate-900 flex items-center justify-center shadow-sm">
                <p id="latestAssignmentAverage" class="text-2xl sm:text-3xl font-bold text-emerald-600 dark:text-emerald-400">-</p>
              </div>
            </div>
            <p class="text-[0.8rem] sm:text-sm font-bold text-emerald-800 dark:text-white/80 text-center">
                
            </p>
          </div>

          <!-- Overall -->
          <div class="flex flex-col items-center justify-center gap-2 sm:gap-3">
            <div class="relative h-24 w-24 sm:h-26 sm:w-26 rounded-full border border-sky-300/60 
              bg-sky-50 dark:bg-slate-800
              shadow-[0_6px_16px_rgba(14,165,233,0.25)] 
              dark:border-sky-300/30 flex items-center justify-center"
              id="overallProgressCircle">
              <div class="absolute inset-3 rounded-full bg-white dark:bg-slate-900 flex items-center justify-center shadow-sm">
                <p id="overallProgress" class="text-2xl sm:text-3xl font-bold text-sky-600 dark:text-sky-400">-</p>
              </div>
            </div>
            <p class="text-[0.8rem] sm:text-sm font-bold text-sky-800 dark:text-white/80 text-center">
               
            </p>
          </div>
        </div>
      </article>

    </div>
  </div>
</section>

      <section id="dashboard-stats" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3">
        <article class="relative overflow-hidden rounded-2xl border border-gray-200/70 bg-white p-4 shadow-sm dark:border-gray-700/70 dark:bg-gray-900/70">
          <div class="absolute inset-0 bg-gradient-to-br from-indigo-500/10 via-transparent to-transparent"></div>
          <div class="relative flex items-start justify-between">
            <div>
              <p class="text-xs font-semibold uppercase tracking-wide text-gray-500 dark:text-gray-400"> </p>
              <h3 class="text-lg font-semibold text-gray-800 dark:text-white"> </h3>
              <p class="mt-4 text-3xl font-bold text-gray-900 dark:text-white" id="totalGroups">-</p>
              <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">   </p>
            </div>
            <span class="flex h-12 w-12 items-center justify-center rounded-xl bg-indigo-500/15 text-indigo-600 dark:text-indigo-300">
              <i class="fas fa-layer-group text-lg"></i>
            </span>
          </div>
        </article>

        <article class="relative overflow-hidden rounded-2xl border border-gray-200/70 bg-white p-4 shadow-sm dark:border-gray-700/70 dark:bg-gray-900/70">
          <div class="absolute inset-0 bg-gradient-to-br from-emerald-500/10 via-transparent to-transparent"></div>
          <div class="relative flex items-start justify-between">
            <div>
              <p class="text-xs font-semibold uppercase tracking-wide text-gray-500 dark:text-gray-400"> </p>
              <h3 class="text-lg font-semibold text-gray-800 dark:text-white"> </h3>
              <p class="mt-4 text-3xl font-bold text-gray-900 dark:text-white" id="totalStudents">-</p>
              <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">   </p>
            </div>
            <span class="flex h-12 w-12 items-center justify-center rounded-xl bg-emerald-500/15 text-emerald-600 dark:text-emerald-300">
              <i class="fas fa-user-graduate text-lg"></i>
            </span>
          </div>
        </article>

        <article class="relative overflow-hidden rounded-2xl border border-gray-200/70 bg-white p-4 shadow-sm dark:border-gray-700/70 dark:bg-gray-900/70">
          <div class="absolute inset-0 bg-gradient-to-br from-sky-500/10 via-transparent to-transparent"></div>
          <div class="relative flex items-start justify-between">
            <div>
              <p class="text-xs font-semibold uppercase tracking-wide text-gray-500 dark:text-gray-400"> </p>
              <h3 class="text-lg font-semibold text-gray-800 dark:text-white"> </h3>
              <p class="mt-4 text-3xl font-bold text-gray-900 dark:text-white" id="totalAcademicGroups">-</p>
              <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">    </p>
            </div>
            <span class="flex h-12 w-12 items-center justify-center rounded-xl bg-sky-500/15 text-sky-600 dark:text-sky-300">
              <i class="fas fa-university text-lg"></i>
            </span>
          </div>
        </article>

        <article class="relative overflow-hidden rounded-2xl border border-gray-200/70 bg-white p-4 shadow-sm dark:border-gray-700/70 dark:bg-gray-900/70">
          <div class="absolute inset-0 bg-gradient-to-br from-amber-500/10 via-transparent to-transparent"></div>
          <div class="relative flex items-start justify-between">
            <div>
              <p class="text-xs font-semibold uppercase tracking-wide text-gray-500 dark:text-gray-400"> </p>
              <h3 class="text-lg font-semibold text-gray-800 dark:text-white"> </h3>
              <p class="mt-4 text-3xl font-bold text-gray-900 dark:text-white" id="pendingRoles">-</p>
              <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">   </p>
            </div>
            <span class="flex h-12 w-12 items-center justify-center rounded-xl bg-amber-500/15 text-amber-600 dark:text-amber-300">
              <i class="fas fa-user-clock text-lg"></i>
            </span>
          </div>
        </article>

        <article class="relative overflow-hidden rounded-2xl border border-gray-200/70 bg-white p-4 shadow-sm dark:border-gray-700/70 dark:bg-gray-900/70">
          <div class="absolute inset-0 bg-gradient-to-br from-blue-500/10 via-transparent to-transparent"></div>
          <div class="relative flex items-start justify-between">
            <div>
              <p class="text-xs font-semibold uppercase tracking-wide text-gray-500 dark:text-gray-400"> </p>
              <h3 class="text-lg font-semibold text-gray-800 dark:text-white"> </h3>
              <p class="mt-4 text-3xl font-bold text-gray-900 dark:text-white" id="maleStudents">-</p>
              <div class="mt-1 inline-flex items-center gap-2 rounded-full bg-blue-500/10 px-3 py-1 text-xs font-medium text-blue-600 dark:text-blue-300">
                <i class="fas fa-male"></i>
                <span id="malePercentage">-</span>
              </div>
            </div>
            <span class="flex h-12 w-12 items-center justify-center rounded-xl bg-blue-500/15 text-blue-600 dark:text-blue-300">
              <i class="fas fa-venus-mars text-lg"></i>
            </span>
          </div>
        </article>

        <article class="relative overflow-hidden rounded-2xl border border-gray-200/70 bg-white p-4 shadow-sm dark:border-gray-700/70 dark:bg-gray-900/70">
          <div class="absolute inset-0 bg-gradient-to-br from-rose-500/10 via-transparent to-transparent"></div>
          <div class="relative flex items-start justify-between">
            <div>
              <p class="text-xs font-semibold uppercase tracking-wide text-gray-500 dark:text-gray-400"> </p>
              <h3 class="text-lg font-semibold text-gray-800 dark:text-white"> </h3>
              <p class="mt-4 text-3xl font-bold text-gray-900 dark:text-white" id="femaleStudents">-</p>
              <div class="mt-1 inline-flex items-center gap-2 rounded-full bg-rose-500/10 px-3 py-1 text-xs font-medium text-rose-600 dark:text-rose-300">
                <i class="fas fa-female"></i>
                <span id="femalePercentage">-</span>
              </div>
            </div>
            <span class="flex h-12 w-12 items-center justify-center rounded-xl bg-rose-500/15 text-rose-600 dark:text-rose-300">
              <i class="fas fa-user-friends text-lg"></i>
            </span>
          </div>
        </article>

        <article class="relative overflow-hidden rounded-2xl border border-gray-200/70 bg-white p-4 shadow-sm dark:border-gray-700/70 dark:bg-gray-900/70">
          <div class="absolute inset-0 bg-gradient-to-br from-teal-500/10 via-transparent to-transparent"></div>
          <div class="relative flex items-start justify-between">
            <div>
              <p class="text-xs font-semibold uppercase tracking-wide text-gray-500 dark:text-gray-400"> </p>
              <h3 class="text-lg font-semibold text-gray-800 dark:text-white"> </h3>
              <p class="mt-4 text-3xl font-bold text-gray-900 dark:text-white" id="totalTasks">-</p>
              <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">   </p>
            </div>
            <span class="flex h-12 w-12 items-center justify-center rounded-xl bg-teal-500/15 text-teal-600 dark:text-teal-300">
              <i class="fas fa-tasks text-lg"></i>
            </span>
          </div>
        </article>

        <article class="relative overflow-hidden rounded-2xl border border-gray-200/70 bg-white p-4 shadow-sm dark:border-gray-700/70 dark:bg-gray-900/70">
          <div class="absolute inset-0 bg-gradient-to-br from-red-500/10 via-transparent to-transparent"></div>
          <div class="relative flex items-start justify-between">
            <div>
              <p class="text-xs font-semibold uppercase tracking-wide text-gray-500 dark:text-gray-400"> </p>
              <h3 class="text-lg font-semibold text-gray-800 dark:text-white"> </h3>
              <p class="mt-4 text-3xl font-bold text-gray-900 dark:text-white" id="pendingEvaluations">-</p>
              <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">   </p>
            </div>
            <span class="flex h-12 w-12 items-center justify-center rounded-xl bg-red-500/15 text-red-600 dark:text-red-300">
              <i class="fas fa-hourglass-half text-lg"></i>
            </span>
          </div>
        </article>
      </section>

      <section id="dashboard-top-groups" class="relative overflow-hidden rounded-3xl border border-gray-200/70 bg-white shadow-sm transition hover:shadow-lg dark:border-gray-700/70 dark:bg-gray-900/70">
        <div class="border-b border-gray-200/60 px-6 py-4 dark:border-gray-800/80">
          <div class="flex flex-wrap items-center justify-between gap-3">
            <div>
              <h3 class="text-lg font-semibold text-gray-900 dark:text-white"> </h3>
              <p class="text-xs text-gray-500 dark:text-gray-400">        </p>
            </div>
            <span class="inline-flex items-center gap-2 rounded-full bg-indigo-500/10 px-3 py-1 text-xs font-medium text-indigo-600 dark:text-indigo-300">
              <i class="fas fa-trophy"></i> Elite Group
            </span>
          </div>
        </div>
        <div id="topGroupsContainer" class="p-6"></div>
      </section>

      <section id="dashboard-academic-stats" class="relative overflow-hidden rounded-3xl border border-gray-200/70 bg-white shadow-sm transition hover:shadow-lg dark:border-gray-700/70 dark:bg-gray-900/70">
        <div class="border-b border-gray-200/60 px-6 py-4 dark:border-gray-800/80">
          <div class="flex flex-wrap items-center justify-between gap-3">
            <div>
              <h3 class="text-lg font-semibold text-gray-900 dark:text-white">  </h3>
              <p class="text-xs text-gray-500 dark:text-gray-400">     </p>
            </div>
            <span class="inline-flex items-center gap-2 rounded-full bg-emerald-500/10 px-3 py-1 text-xs font-medium text-emerald-600 dark:text-emerald-300">
              <i class="fas fa-chart-bar"></i> 
            </span>
          </div>
        </div>
        <div id="academicGroupStatsList" class="p-6"></div>
      </section>

      <section id="dashboard-ranking" class="relative overflow-hidden rounded-3xl border border-gray-200/70 bg-white shadow-sm transition hover:shadow-lg dark:border-gray-700/70 dark:bg-gray-900/70">
        <div class="border-b border-gray-200/60 px-6 py-4 dark:border-gray-800/80">
          <div class="flex flex-wrap items-center justify-between gap-3">
            <div>
              <h3 class="text-lg font-semibold text-gray-900 dark:text-white">     </h3>
              <p class="text-xs text-gray-500 dark:text-gray-400"> ,  ,     </p>
            </div>
            <span class="inline-flex items-center gap-2 rounded-full bg-purple-500/10 px-3 py-1 text-xs font-medium text-purple-600 dark:text-purple-300">
              <i class="fas fa-star"></i>  
            </span>
          </div>
        </div>
        <div id="groupsRankingList" class="p-6 space-y-4"></div>
      </section>
    </div>
  `}function pa(r){if(!r)return 0;if(r instanceof Date){const e=r.getTime();return Number.isNaN(e)?0:e}if(typeof r=="object"){if(typeof r.seconds=="number")return r.seconds*1e3;if(typeof r.toDate=="function")try{return r.toDate().getTime()}catch{return 0}}const t=Date.parse(r);return Number.isNaN(t)?0:t}function Dd(r){if(!r)return 0;const t=[r.date,r.scheduleDate,r.startDate,r.dueDate,r.deadline,r.assignmentDate,r.assignmentDay,r.createdAt,r.updatedAt];let e=0;for(const s of t){const a=pa(s);if(a){e=a;break}}if(!e)return 0;const n=cx(r),i=new Date(e);return n?i.setHours(n.hour,n.minute,0,0):i.getHours()===0&&i.getMinutes()===0&&i.getSeconds()===0&&i.getMilliseconds()===0&&i.setHours(ox,Ax,lx,0),i.getTime()}function cx(r){if(!r)return null;const t=["timeHour","hour","startHour"],e=["timeMinute","minute","startMinute"],n=t.map(s=>typeof r[s]=="number"?r[s]:parseInt(r[s],10)).find(s=>Number.isFinite(s)),i=e.map(s=>typeof r[s]=="number"?r[s]:parseInt(r[s],10)).find(s=>Number.isFinite(s));if(Number.isFinite(n)&&n>=0&&n<=23){const s=Number.isFinite(i)&&i>=0&&i<=59?i:0;return{hour:n,minute:s}}for(const s of Nnt){if(!Object.prototype.hasOwnProperty.call(r,s))continue;const a=Qnt(r[s]);if(a)return a}return null}function Qnt(r){if(!r)return null;const t=String(r).trim();if(!t)return null;const n=t.toLowerCase().match(/(\d{1,2})(?::(\d{1,2}))?\s*(am|pm|a\.m\.|p\.m\.)?/i);if(!n)return null;let i=parseInt(n[1],10),s=n[2]?parseInt(n[2],10):0;if(Number.isNaN(i)||Number.isNaN(s))return null;const a=n[3];if(a){const o=a.includes("p"),A=a.includes("a");o&&i<12&&(i+=12),A&&i===12&&(i=0)}return i=Math.min(Math.max(i,0),23),s=Math.min(Math.max(s,0),59),{hour:i,minute:s}}function Ont(r=[]){let t=null;return r.forEach(e=>{if(!e)return;const n=Dd(e);if(n&&(!t||n>t.ts)){const i=e.id??e.uid??e.key??e.slug??null,s=cx(e);t={task:e,id:i,ts:n,timeParts:s}}}),t}function Hnt(r){if(!r)return null;try{const t=new Date;return t.setHours(r.hour,r.minute??0,0,0),new Intl.DateTimeFormat("bn-BD",{hour:"numeric",minute:"2-digit",hour12:!0}).format(t)}catch{return null}}function mU(r){const t=pa(r);if(!t)return"-";try{const e=new Date(t);return Number.isNaN(e.getTime())?"-":(e.getHours()===0&&e.getMinutes()===0&&e.getSeconds()===0&&e.getMilliseconds()===0&&e.setHours(ox,Ax,lx,0),new Intl.DateTimeFormat("bn-BD",{dateStyle:"medium",timeStyle:"short"}).format(e))}catch{return"-"}}function bU(r){if(!r)return"-";try{const t=new Date(r);return new Intl.DateTimeFormat("bn-BD",{dateStyle:"medium"}).format(t)}catch{return"-"}}function Vnt(r){const t=pa(r);if(!t)return"-";try{const e=new Date(t);return Number.isNaN(e.getTime())?"-":(e.getHours()===0&&e.getMinutes()===0&&e.getSeconds()===0&&e.getMilliseconds()===0&&e.setHours(ox,Ax,lx,0),new Intl.DateTimeFormat("bn-BD",{hour:"numeric",minute:"2-digit",hour12:!0}).format(e))}catch{return"-"}}function $nt(){Vt.page=document.getElementById("page-dashboard"),Vt.page||console.error(" Dashboard init failed: #page-dashboard not found!")}function jnt(){if(!Vt.page)return;["totalGroups","totalStudents","totalAcademicGroups","pendingRoles","maleStudents","malePercentage","femaleStudents","femalePercentage","totalTasks","pendingEvaluations","progressBar","progressBarLabel","overallProgress","overallProgressCircle","latestAssignmentAverage","latestAssignmentCircle","latestTaskTitle","latestAssignmentUpdated","latestAssignmentEvaluated","latestAssignmentPending","latestAssignmentStudentTotal","latestAssignmentGroupEvaluated","latestAssignmentGroupPending","latestAssignmentGroupTotal","topGroupsContainer","academicGroupStatsList","groupsRankingList","dashboardAssignmentFilter","assignmentStatusTitle","latestAssignmentLabel"].forEach(t=>{Vt[t]=Vt.page.querySelector(`#${t}`),Vt[t]||console.warn(`Dashboard: Element #${t} not found.`)})}function Gnt(r){if(!Vt.dashboardAssignmentFilter)return;for(;Vt.dashboardAssignmentFilter.options.length>1;)Vt.dashboardAssignmentFilter.remove(1);[...r].sort((e,n)=>{const i=Dd(e);return Dd(n)-i}).forEach(e=>{const n=document.createElement("option");n.value=e.id,n.textContent=e.name,Vt.dashboardAssignmentFilter.appendChild(n)}),Vt.dashboardAssignmentFilter.value=Uw,JS(Uw),Vt.dashboardAssignmentFilter.addEventListener("change",e=>{Uw=e.target.value,JS(e.target.value)})}function JS(r){console.log(" Filter changed to:",r);const{groups:t,students:e,tasks:n,evaluations:i}=ax.getState();let s=null,a=null;if(r==="latest")a=yU(t,e,n,i).latestAssignmentSummary,s=a?n.find(y=>y.id===a.taskId):null;else if(s=n.find(b=>String(b.id)===String(r)),s){const b=i.filter(y=>String(y.taskId)===String(s.id));a=vU(t,e,[s],b)}if(!s)return;if(a||(a={taskId:s.id,taskTitle:s.name,evaluated:0,total:e.length,evaluatedGroupCount:0}),Vt.latestTaskTitle&&(Vt.latestTaskTitle.textContent=s.name),Vt.latestTaskTitle&&(Vt.latestTaskTitle.title=s.name),Vt.assignmentStatusTitle&&(r==="latest"?(Vt.assignmentStatusTitle.textContent="    ",Vt.latestAssignmentLabel&&(Vt.latestAssignmentLabel.textContent=" ")):(Vt.assignmentStatusTitle.textContent="   ",Vt.latestAssignmentLabel&&(Vt.latestAssignmentLabel.textContent=""))),Vt.latestAssignmentUpdated){const b=Dd(s);Vt.latestAssignmentUpdated.textContent=mU(b)}const o=a.total!==void 0?a.total:a.totalStudentCount||e.length,A=a.evaluated!==void 0?a.evaluated:a.evaluatedStudentCount||0,l=o>0?Math.round(A/o*100):0;console.log(" Progress Update (Student-based):",{task:s.name,evaluated:A,total:o,percent:l}),Vt.progressBar&&(Vt.progressBar.style.width=`${l}%`),Vt.progressBarLabel&&(Vt.progressBarLabel.textContent=`${sr.convertToBanglaNumber(l)}%`);const c=a.evaluated!==void 0?a.evaluated:a.evaluatedStudentCount||0,u=a.total!==void 0?a.total:a.totalStudentCount||0;Vt.latestAssignmentEvaluated&&(Vt.latestAssignmentEvaluated.textContent=sr.convertToBanglaNumber(c)),Vt.latestAssignmentPending&&(Vt.latestAssignmentPending.textContent=sr.convertToBanglaNumber(u-c)),Vt.latestAssignmentStudentTotal&&(Vt.latestAssignmentStudentTotal.textContent=sr.convertToBanglaNumber(u));const h=a.evaluatedGroupCount||0,d=t.length;Vt.latestAssignmentGroupEvaluated&&(Vt.latestAssignmentGroupEvaluated.textContent=sr.convertToBanglaNumber(h)),Vt.latestAssignmentGroupPending&&(Vt.latestAssignmentGroupPending.textContent=sr.convertToBanglaNumber(d-h)),Vt.latestAssignmentGroupTotal&&(Vt.latestAssignmentGroupTotal.textContent=sr.convertToBanglaNumber(d));const f=xU([s],i).assignmentAverageMap.get(s.id)||0;Vt.latestAssignmentAverage&&(Vt.latestAssignmentAverage.textContent=sr.convertToBanglaNumber(f.toFixed(1))),Vt.overallProgress&&(Vt.overallProgress.textContent=sr.convertToBanglaNumber(f.toFixed(1)))}function yU(r=[],t=[],e=[],n=[]){const i=r.length,s=t.length,a=e.length,{male:o,female:A}=Knt(t),l=s>0?o/s*100:0,c=s>0?A/s*100:0,h=new Set(t.map(k=>k.academicGroup).filter(Boolean)).size,d=t.filter(k=>!k.role||k.role==="").length,m=qnt(r,t,n,e),f=Wnt(r,t,n),b=m.filter(k=>k.evalCount>0),y=b.reduce((k,Z)=>k+Z.averageScore,0),B=b.length>0?y/b.length:0,I=new Set(n.map(k=>`${k.taskId}_${k.groupId}`));let C=0;if(e.length>0&&r.length>0)for(const k of e)for(const Z of r)I.has(`${k.id}_${Z.id}`)||C++;const N=Jnt(t,m),R=vU(r,t,e,n),U=xU(e,n),x=U.assignmentSummaries,v=x.length>0,T=v?U.overallAverage:0,E=v?T:B,_=Ynt(e,R),F=R!=null&&R.taskId&&U.assignmentAverageMap?U.assignmentAverageMap.get(R.taskId)??null:null;return{totalGroups:i,totalStudents:s,totalTasks:a,maleStudents:o,femaleStudents:A,malePercentage:l,femalePercentage:c,totalAcademicGroups:h,pendingRoles:d,pendingEvaluations:C,overallProgress:E,overallAssignmentAverage:T,latestAssignmentAverage:F,assignmentSummaries:x,groupPerformanceData:m,groupRankingMeta:f,academicGroupStats:N,latestAssignmentSummary:R,assignmentOverview:_}}function Knt(r=[]){return r.reduce((t,e)=>{const n=znt(e.gender);return n==="male"?t.male++:n==="female"&&t.female++,t},{male:0,female:0})}function znt(r){const t=(r||"").toString().trim();if(!t)return"";const e=t.normalize("NFC").toLowerCase().replace(/\s+/g,""),n=e.replace(//g,"");return n.includes("")||e.includes("male")||e.includes("boy")||e==="m"?"male":n.includes("")||e.includes("female")||e.includes("girl")||e==="f"?"female":""}function qnt(r,t,e,n){const i=new Map(n.map(s=>[s.id,s]));return r.map(s=>{const a=t.filter(y=>y.groupId===s.id),o=e.filter(y=>y.groupId===s.id);let A=0,l=0;const c=new Set,u=new Set;let h={ts:0,avgPct:null,participants:null,participationRate:null};o.forEach(y=>{const B=y!=null&&y.scores?Object.keys(y.scores).length:0,I=wU(y,i);typeof I=="number"&&!Number.isNaN(I)&&(A+=I,l++),y!=null&&y.scores&&Object.keys(y.scores).forEach(N=>{N&&c.add(N)}),y!=null&&y.taskId&&u.add(y.taskId);const C=pa(y.taskDate)||pa(y.updatedAt)||pa(y.createdAt);if(C&&C>=(h.ts||0)){const N=a.length>0?Math.min(100,B/a.length*100):0;h={ts:C,avgPct:typeof I=="number"?I:h.avgPct,participants:B,participationRate:N}}});const d=l>0?A/l:0,m=c.size,f=u.size,b=a.length>0?Math.min(100,m/a.length*100):0;return{group:s,groupName:s.name,studentCount:a.length,averageScore:d,evalCount:l,evaluatedMembers:m,taskCount:f,participationRate:b,latestAverageScore:h.avgPct,latestParticipantCount:h.participants,latestParticipationRate:h.participationRate}}).sort((s,a)=>a.averageScore-s.averageScore)}function Wnt(r=[],t=[],e=[]){if(!Array.isArray(r)||!Array.isArray(t)||!Array.isArray(e))return{list:[],map:new Map};const n=new Map(t.map(o=>[String(o.id),jm(o.groupId)])),i={};t.forEach(o=>{const A=jm(o.groupId);i[A]=(i[A]||0)+1});const s={};e.forEach(o=>{const A=parseFloat(o.maxPossibleScore)||60,l=pa(o.taskDate)||pa(o.updatedAt)||pa(o.evaluationDate)||pa(o.createdAt),c=o.scores||{},u=new Set;Object.entries(c).forEach(([h,d])=>{const m=h!=null?String(h):"",f=n.get(m)||"__none",b=jm(f);s[b]||(s[b]={evalCount:0,totalScore:0,maxScoreSum:0,latestMs:null,participants:new Set});const y=s[b];u.has(b)||(y.evalCount+=1,u.add(b)),y.totalScore+=parseFloat(d==null?void 0:d.totalScore)||0,y.maxScoreSum+=A,y.participants.add(m),l&&(y.latestMs=y.latestMs?Math.max(y.latestMs,l):l)})});const a=Object.entries(s).map(([o,A])=>{if(A.evalCount<Pnt)return null;const l=A.maxScoreSum>0?A.totalScore/A.maxScoreSum*100:0,c=i[o]||0,u=A.participants.size;return{groupId:o,efficiency:l,evalCount:A.evalCount,totalScore:A.totalScore,maxScoreSum:A.maxScoreSum,latestEvaluationMs:A.latestMs||0,participantsCount:u,groupSize:c,remainingCount:Math.max(0,c-u)}}).filter(Boolean).sort((o,A)=>A.efficiency!==o.efficiency?A.efficiency-o.efficiency:A.evalCount!==o.evalCount?A.evalCount-o.evalCount:A.totalScore!==o.totalScore?A.totalScore-o.totalScore:A.maxScoreSum!==o.maxScoreSum?A.maxScoreSum-o.maxScoreSum:(A.latestEvaluationMs||0)-(o.latestEvaluationMs||0));return a.forEach((o,A)=>{o.rank=A+1}),{list:a,map:new Map(a.map(o=>[o.groupId,o]))}}function jm(r){return r==null||r===""?"__none":String(r)}function wU(r,t){if(!r)return null;const e=parseFloat(r.groupAverageScore);if(!Number.isNaN(e))return e;if(!r.scores)return null;const n=t.get(r.taskId),i=parseFloat(n==null?void 0:n.maxScore)||parseFloat(r.maxPossibleScore)||100;if(!(i>0))return null;let s=0,a=0;return Object.values(r.scores).forEach(o=>{s+=parseFloat(o.totalScore)||0,a++}),a===0?null:s/a/i*100}function vU(r=[],t=[],e=[],n=[]){var T,E;const i=Ont(e);if(!n.length&&!i)return null;const s=new Map(r.map(_=>[_.id,0]));t.forEach(_=>{const F=_.groupId;F&&(s.has(F)||s.set(F,0),s.set(F,s.get(F)+1))});let a=null;n.forEach(_=>{const F=pa(_.taskDate)||pa(_.updatedAt)||pa(_.createdAt);(!a||F>a.ts)&&(a={ts:F,taskId:_.taskId})});const o=(a==null?void 0:a.taskId)||(i==null?void 0:i.id);if(!o)return null;const A=e.find(_=>_.id===o)||(i==null?void 0:i.task)||null,l=(A==null?void 0:A.title)||(A==null?void 0:A.name)||((T=i==null?void 0:i.task)==null?void 0:T.title)||((E=i==null?void 0:i.task)==null?void 0:E.name)||" ",c=Dd(A)||(i==null?void 0:i.ts)||0,u=cx(A)||(i==null?void 0:i.timeParts)||null,h=Hnt(u),d=new Set;let m=!1;const f=["assignedGroupIds","targetGroupIds","groupIds","assignedGroups","groups","targets","selectedGroups","participantGroups","assignmentTargets"],b=(_,F=!1,k=0)=>{if(_==null||k>6)return;if(Array.isArray(_)){_.forEach(ut=>b(ut,F,k+1));return}if(typeof _=="object"){if("id"in _||"groupId"in _||"value"in _){b(_.id??_.groupId??_.value,F,k+1);return}if(_.group){b(_.group.id??_.group.groupId,F,k+1);return}Object.values(_).forEach(ut=>b(ut,F,k+1));return}const Z=typeof _=="string"?_.trim():_;Z!=null&&Z!==""&&(d.add(Z),F&&(m=!0))};A&&((A.assignToAllGroups||A.assignmentScope==="all"||A.targetScope==="all")&&r.forEach(_=>b(_.id,!0)),f.forEach(_=>{Object.prototype.hasOwnProperty.call(A,_)&&b(A[_],!0)}));const y=n.filter(_=>_.taskId===o),B=new Set;let I=0;y.forEach(_=>{_.groupId&&(B.add(_.groupId),b(_.groupId,!1));const F=_!=null&&_.scores?Object.keys(_.scores).length:Number(_.participantCount)||0;I+=F}),(!d.size||!m)&&r.forEach(_=>{(_==null?void 0:_.id)!==void 0&&(_==null?void 0:_.id)!==null&&d.add(_.id)});let C=0;d.forEach(_=>{C+=s.get(_)||0}),C===0&&(C=t.length),C===0&&(C=I),I=Math.min(I,C);const N=Math.max(C-I,0),R=C>0?Math.min(100,I/C*100):0,U=d.size||r.length||B.size,x=B.size,v=Math.max((U||0)-x,0);return{taskId:o,taskTitle:l,evaluated:I,pending:N,total:C,completionPercent:R,lastUpdated:(a==null?void 0:a.ts)||c||Date.now(),scheduledTimeDisplay:h,groupTotal:U,groupsEvaluated:x,groupsPending:v}}function xU(r=[],t=[]){if(!t.length)return{assignmentSummaries:[],overallAverage:0,assignmentAverageMap:new Map};const e=new Map(r.map(o=>[o.id,o])),n=new Map;t.forEach(o=>{if(!o.taskId)return;const A=wU(o,e);if(typeof A!="number"||Number.isNaN(A))return;n.has(o.taskId)||n.set(o.taskId,{total:0,count:0});const l=n.get(o.taskId);l.total+=A,l.count+=1});const i=[],s=new Map;n.forEach((o,A)=>{if(!o.count)return;const l=e.get(A),c=o.total/o.count;i.push({taskId:A,taskTitle:(l==null?void 0:l.title)||(l==null?void 0:l.name)||" ",averagePercent:c,evaluationCount:o.count}),s.set(A,c)});const a=i.length?i.reduce((o,A)=>o+A.averagePercent,0)/i.length:0;return{assignmentSummaries:i,overallAverage:a,assignmentAverageMap:s}}function Ynt(r=[],t=null){if(!Array.isArray(r)||r.length===0)return[];const e=(t==null?void 0:t.taskId)||null;return r.map(n=>{const i=Dd(n),s=n.title||n.name||" ";return{id:n.id??n.uid??n.key??`${s}-${i||Date.now()}`,title:s,timestamp:i,dateLabel:i?bU(i):"  "}}).sort((n,i)=>(i.timestamp||0)-(n.timestamp||0)).slice(0,6).map((n,i)=>{const s=e?n.id===e:i===0;return{...n,index:i+1,isLatest:s,relativeLabel:Xnt(n.timestamp)}})}function Xnt(r){if(!r)return"";const t=new Date(r);if(Number.isNaN(t.getTime()))return"";const e=new Date,n=new Date(t.getFullYear(),t.getMonth(),t.getDate()),i=new Date(e.getFullYear(),e.getMonth(),e.getDate()),s=Math.round((n-i)/(1e3*60*60*24));if(s===0)return"";const a=Math.abs(s),o=sr!=null&&sr.convertToBanglaNumber&&typeof sr.convertToBanglaNumber=="function"?sr.convertToBanglaNumber(String(a)):String(a);return s>0?`${o}  `:`${o}  `}function Jnt(r,t){const e={},n=new Map(t.map(i=>[i.group.id,i.averageScore]));return r.forEach(i=>{const s=i.academicGroup,a=i.groupId;!s||!a||(e[s]||(e[s]={totalStudents:0,scoreSum:0,groupCount:0,processedGroups:new Set}),e[s].totalStudents++,n.has(a)&&!e[s].processedGroups.has(a)&&n.get(a)>0&&(e[s].scoreSum+=n.get(a),e[s].groupCount++,e[s].processedGroups.add(a)))}),Object.keys(e).forEach(i=>{const s=e[i];s.averageScore=s.groupCount>0?s.scoreSum/s.groupCount:0}),e}function Znt(r){const t=(B,I)=>{B&&(B.textContent=I??"-")},e=(B,I=0)=>typeof B!="number"||isNaN(B)?"-":sr.convertToBanglaNumber(B.toFixed(I));t(Vt.totalGroups,e(r.totalGroups)),t(Vt.totalStudents,e(r.totalStudents)),t(Vt.totalAcademicGroups,e(r.totalAcademicGroups)),t(Vt.pendingRoles,e(r.pendingRoles)),t(Vt.maleStudents,e(r.maleStudents)),t(Vt.malePercentage,`${e(r.malePercentage,0)}%`),t(Vt.femaleStudents,e(r.femaleStudents)),t(Vt.femalePercentage,`${e(r.femalePercentage,0)}%`),t(Vt.totalTasks,e(r.totalTasks)),t(Vt.pendingEvaluations,e(r.pendingEvaluations));const n=r.latestAssignmentSummary||null,i=n?Math.min(100,Math.max(0,Number(n.completionPercent)||0)):0,s=n?e(n.evaluated):"-",a=n?e(n.pending):"-",o=n?e(n.total):"-",A=n?e(n.groupsEvaluated):"-",l=n?e(n.groupsPending):"-",c=n?e(n.groupTotal):"-",u=n?bU(n.lastUpdated):"-";let h=n?Vnt(n.lastUpdated):"-";h==="-"&&(n!=null&&n.scheduledTimeDisplay)&&(h=n.scheduledTimeDisplay);const d=u==="-"&&h==="-"?"-":`: ${u} | : ${h}`;if(Vt.latestTaskTitle){const B=(n==null?void 0:n.taskTitle)||" ";t(Vt.latestTaskTitle,B),Vt.latestTaskTitle.setAttribute("title",B)}Vt.latestAssignmentUpdated&&t(Vt.latestAssignmentUpdated,d),Vt.latestAssignmentEvaluated&&t(Vt.latestAssignmentEvaluated,s),Vt.latestAssignmentPending&&t(Vt.latestAssignmentPending,a),Vt.latestAssignmentStudentTotal&&t(Vt.latestAssignmentStudentTotal,o),Vt.latestAssignmentGroupEvaluated&&t(Vt.latestAssignmentGroupEvaluated,A),Vt.latestAssignmentGroupPending&&t(Vt.latestAssignmentGroupPending,l),Vt.latestAssignmentGroupTotal&&t(Vt.latestAssignmentGroupTotal,c);const m=Array.isArray(r.assignmentSummaries)&&r.assignmentSummaries.length>0&&typeof r.overallAssignmentAverage=="number"&&!Number.isNaN(r.overallAssignmentAverage),f=typeof r.latestAssignmentAverage=="number"&&!isNaN(r.latestAssignmentAverage)?Math.min(100,Math.max(0,r.latestAssignmentAverage)):null,b=m?r.overallAssignmentAverage:r.overallProgress,y=typeof b=="number"&&!isNaN(b)?Math.min(100,Math.max(0,b)):0;if(t(Vt.overallProgress,`${e(y,0)}%`),Vt.latestAssignmentAverage&&(f!==null?t(Vt.latestAssignmentAverage,`${e(f,0)}%`):Vt.latestAssignmentAverage.textContent="-"),Vt.overallProgressCircle){const B=y/100*360,I="#0ea5e9",C="rgba(14,165,233,0.1)";Vt.overallProgressCircle.style.background=`conic-gradient(${I} ${B}deg, ${C} ${B}deg)`,Vt.overallProgressCircle.style.boxShadow="0 0 20px rgba(14,165,233,0.3)"}if(Vt.overallProgress,Vt.latestAssignmentCircle&&f!==null){const B=f/100*360,I="#10b981",C="rgba(16,185,129,0.1)";Vt.latestAssignmentCircle.style.background=`conic-gradient(${I} ${B}deg, ${C} ${B}deg)`,Vt.latestAssignmentCircle.style.boxShadow="0 0 20px rgba(16,185,129,0.3)",Vt.latestAssignmentAverage}if(Vt.progressBar){const B=Vt.progressBar,I=dx(i),C=Math.max(0,Math.min(100,i)),N=Number(B.dataset.prevWidth||0);B.classList.add("battery-liquid","shadow-lg"),B.style.setProperty("--fill",I.solid),B.style.boxShadow=`0 8px 20px ${I.shadow}`,B.style.transition="width 900ms cubic-bezier(0.4, 0, 0.2, 1)",N!==C?(B.style.width=`${N}%`,B.offsetWidth,requestAnimationFrame(()=>{B.style.width=`${C}%`})):B.style.width=`${C}%`,B.dataset.prevWidth=String(C)}if(Vt.progressBarLabel){const B=`${e(i,0)}%`;Vt.progressBarLabel.textContent=B;const I=i>=20;Vt.progressBarLabel.style.right=I?"8px":"auto",Vt.progressBarLabel.style.left=I?"auto":"8px",Vt.progressBarLabel.style.color="rgba(255,255,255,0.92)",Vt.progressBarLabel.style.minWidth="32px",Vt.progressBarLabel.style.textAlign=I?"right":"left"}tit(r.assignmentOverview||[],n)}function tit(r=[],t=null){if(!Vt.assignmentOverviewList)return;const e=i=>sr!=null&&sr.convertToBanglaNumber&&typeof sr.convertToBanglaNumber=="function"?sr.convertToBanglaNumber(String(i)):String(i);if(!r.length)Vt.assignmentOverviewList.innerHTML='<div class="py-4 text-sm text-gray-500 dark:text-gray-400">    </div>';else{const i=r.map(s=>{const a=e(s.index),o=s.isLatest?'<span class="inline-flex items-center gap-1 rounded-full bg-emerald-500/10 px-2 py-0.5 text-[0.65rem] font-medium text-emerald-600 dark:text-emerald-300"><i class="fas fa-bolt text-[0.6rem]"></i> </span>':"",A=s.relativeLabel?`<p class="text-xs text-gray-500 dark:text-gray-400">${Gm(s.relativeLabel)}</p>`:"",l=Gm(s.title);return`
          <div class="flex items-center justify-between gap-4 py-3">
            <div class="flex items-center gap-3 min-w-0">
              <span class="flex h-10 w-10 items-center justify-center rounded-2xl bg-indigo-500/10 text-sm font-semibold text-indigo-600 dark:text-indigo-300">${a}</span>
              <div class="min-w-0 space-y-1">
                <p class="text-sm font-semibold text-gray-900 dark:text-white truncate" title="${l}">${l}</p>
                ${o}
              </div>
            </div>
            <div class="text-right">
              <p class="text-sm font-medium text-gray-700 dark:text-gray-200">${Gm(s.dateLabel)}</p>
              ${A}
            </div>
          </div>
        `}).join("");Vt.assignmentOverviewList.innerHTML=i}const n=r.find(i=>i.isLatest)||r[0];if(Vt.assignmentOverviewLatestTitle){const i=(t==null?void 0:t.taskTitle)||(n==null?void 0:n.title)||"-";Vt.assignmentOverviewLatestTitle.textContent=i,Vt.assignmentOverviewLatestTitle.setAttribute("title",i)}if(Vt.assignmentOverviewLatestDate){let i="-";t!=null&&t.lastUpdated?i=mU(t.lastUpdated):n!=null&&n.timestamp&&(i=n.dateLabel||"-"),Vt.assignmentOverviewLatestDate.textContent=i}}function eit(r){if(!Vt.topGroupsContainer)return;Na.clearContainer(Vt.topGroupsContainer);const t=r.filter(d=>d.evalCount>0).slice(0,3);if(t.length===0){Na.displayEmptyMessage(Vt.topGroupsContainer,"     ");return}const e=(d={})=>{const m=typeof d.latestAverageScore=="number"&&!Number.isNaN(d.latestAverageScore)?sr.convertToBanglaNumber(d.latestAverageScore.toFixed(1)):"-",f=typeof d.latestParticipantCount=="number"&&d.latestParticipantCount!==null?sr.convertToBanglaNumber(String(d.latestParticipantCount)):"-",b=typeof d.latestParticipationRate=="number"&&!Number.isNaN(d.latestParticipationRate)?sr.convertToBanglaNumber(String(Math.round(d.latestParticipationRate))):"-";return{avg:m==="-"?"-":`${m}%`,participants:f==="-"?"-":`${f} `,rate:b==="-"?"-":`${b}%`}},n=d=>`
    <div class="elite-latest-metrics">
      <div class="elite-metrics-title">
        <span class="elite-metrics-icon">
          <i class="fas fa-chart-line"></i>
        </span>
        <p class="elite-metrics-headline">   </p>
      </div>
      <div class="elite-metrics-chips">
        <div class="elite-metric-chip">
          <span class="elite-metric-label"></span>
          <span class="elite-metric-value">${d.avg}</span>
        </div>
        <div class="elite-metric-chip">
          <span class="elite-metric-label"></span>
          <span class="elite-metric-value">${d.participants}</span>
        </div>
        <div class="elite-metric-chip">
          <span class="elite-metric-label"> </span>
          <span class="elite-metric-value">${d.rate}</span>
        </div>
      </div>
    </div>
  `,i=[" "," "," "],s=["elite-podium-card relative rounded-3xl bg-gradient-to-br from-amber-400 via-yellow-500 to-orange-500 text-white p-5 md:p-6 shadow-2xl ring-4 ring-yellow-300/60 dark:ring-yellow-400/50 order-1 md:order-2 cursor-pointer","elite-podium-card relative rounded-3xl bg-gradient-to-br from-gray-100 via-gray-200 to-slate-200 dark:from-slate-600 dark:via-slate-500 dark:to-slate-600 text-gray-900 dark:text-gray-100 p-5 shadow-2xl ring-2 ring-slate-300/60 dark:ring-slate-400/40 order-2 md:order-1 cursor-pointer","elite-podium-card relative rounded-3xl bg-gradient-to-br from-amber-200 via-orange-300 to-amber-400 dark:from-amber-700 dark:via-orange-600 dark:to-amber-700 text-gray-900 dark:text-white p-5 shadow-2xl ring-2 ring-amber-300/60 dark:ring-amber-500/50 order-3 md:order-3 cursor-pointer"],a=['<i class="fa-solid fa-crown text-amber-400 dark:text-amber-200"></i>','<i class="fa-solid fa-medal text-slate-700 dark:text-slate-200"></i>','<i class="fa-solid fa-award text-amber-700 dark:text-amber-200"></i>'],o=[{max:34,min:16},{max:30,min:14},{max:28,min:15}],A=()=>{!Vt.topGroupsContainer||typeof window>"u"||typeof window.requestAnimationFrame!="function"||window.requestAnimationFrame(()=>{Vt.topGroupsContainer.querySelectorAll(".elite-card-name").forEach(m=>{const f=window.getComputedStyle(m),b=parseFloat(m.dataset.maxFont||"")||parseFloat(f.fontSize)||22,y=parseFloat(m.dataset.minFont||"")||Math.max(12,b*.65);let B=b;m.style.fontSize=`${B}px`;let I=0;for(;B>y&&m.scrollWidth>m.clientWidth&&I<25;)B-=.5,m.style.fontSize=`${Math.max(B,y)}px`,I+=1})})},l=(d,m)=>{var _;if(!d)return"";const f=typeof d.averageScore=="number"?d.averageScore:0,b=sr.convertToBanglaNumber(f.toFixed(1)),y=typeof d.studentCount=="number"?d.studentCount:0,B=sr.convertToBanglaNumber(y),I=e(d),C=n(I),N=ux(d.groupName),R=o[m]||o[o.length-1],U=m===0?"elite-card-name elite-name-xl font-semibold text-white":"elite-card-name elite-name-lg font-semibold text-gray-900 dark:text-white",x=m===0?"text-white/85":"text-gray-800/80 dark:text-white/80",v=i[m]||sr.convertToBanglaRank(m+1),T=s[m]||s[s.length-1],E=a[m]||'<i class="fa-solid fa-trophy text-amber-700 dark:text-amber-200"></i>';return`
        <article class="${T}" data-group-id="${(_=d.group)==null?void 0:_.id}" role="button" tabindex="0" aria-pressed="false">
          <span class="elite-rank-chip">
            <span class="elite-rank-icon">${E}</span>
            <span class="elite-rank-title">${v}</span>
          </span>
          <div class="elite-card-inner">
            <div class="elite-score-stack">
              <span class="elite-score-value">${b}%</span>
              <span class="elite-score-label">  </span>
            </div>
            <div class="elite-card-body ${m===0?"space-y-1.5":"space-y-1"}">
              <div class="${U}" title="${N}" data-max-font="${R.max}" data-min-font="${R.min}">${N}</div>
              <div class="${x} text-xs sm:text-sm font-medium">
                <span>:</span>
                <span>${B}</span>
              </div>
            </div>
            ${C}
          </div>
        </article>
      `},c=t.map((d,m)=>l(d,m)).join(""),u=["grid","grid-cols-1","gap-6"];t.length>=2&&u.push("sm:grid-cols-2"),t.length>=3&&u.push("md:grid-cols-3"),Vt.topGroupsContainer.innerHTML=`
    <div class="${u.join(" ")}">
      ${c}
    </div>
  `,A(),Vt.topGroupsContainer&&typeof window<"u"&&typeof window.openGroupModalById=="function"&&Na.addListener(Vt.topGroupsContainer,"click",d=>{const m=d.target.closest("[data-group-id]");if(!m)return;const f=m.getAttribute("data-group-id");if(f)try{window.openGroupModalById(f)}catch(b){console.warn("Elite group modal open failed:",b)}});const h=Vt.topGroupsContainer.closest("section");if(h){const d=h.querySelector("h3");d&&(d.textContent=" ");const m=h.querySelector("p.text-xs");m&&(m.textContent="        ");const f=h.querySelector("span.bg-indigo-500\\/10");if(f){const b=f.querySelector("i"),y=b?b.outerHTML:"";f.innerHTML=`${y} Elite Group`}}}function rit(r){if(!Vt.academicGroupStatsList)return;Na.clearContainer(Vt.academicGroupStatsList);const t=Object.entries(r).filter(([,s])=>s.groupCount>0).sort(([,s],[,a])=>a.averageScore-s.averageScore);if(t.length===0){Na.displayEmptyMessage(Vt.academicGroupStatsList,"   ");return}const e=t.slice(0,3),n=e.map(([s,a])=>{const o=a.averageScore,A=dx(o),l=Math.min(100,Math.round(o)),c=sr.convertToBanglaNumber(o.toFixed(1)),u=sr.convertToBanglaNumber(a.totalStudents),h=sr.convertToBanglaNumber(a.groupCount),d=ux(s);return`
        <article class="relative overflow-hidden rounded-2xl border border-gray-200/70 bg-white p-5 shadow-sm transition hover:shadow-lg dark:border-gray-700/70 dark:bg-gray-900/70">
          <div class="absolute inset-0 bg-gradient-to-br ${A.gradient} opacity-60"></div>
          <div class="relative space-y-4">
            <div class="flex items-center justify-between">
              <h4 class="text-base font-semibold text-gray-900 dark:text-white" title="${d}">${d}</h4>
              <span class="inline-flex items-center gap-2 rounded-full bg-white/80 px-3 py-1 text-xs font-semibold text-gray-700 dark:bg-white/10 dark:text-gray-200 shadow">
                <i class="fas fa-signal"></i> : ${c}%
              </span>
            </div>
            <div class="h-2 w-full overflow-hidden rounded-full bg-gray-200 dark:bg-gray-700">
              <div class="h-full rounded-full" style="width: ${l}%; background: ${A.solid}; box-shadow: 0 6px 12px ${A.shadow};"></div>
            </div>
            <div class="grid grid-cols-2 gap-3 text-xs font-medium text-gray-600 dark:text-gray-300">
              <span class="inline-flex items-center gap-2">
                <i class="fas fa-users text-indigo-500"></i> : ${u}
              </span>
              <span class="inline-flex items-center gap-2 justify-end">
                <i class="fas fa-layer-group text-emerald-500"></i> : ${h}
              </span>
            </div>
          </div>
        </article>
      `}).join(""),i=["grid","grid-cols-1","gap-6"];e.length>=2&&i.push("sm:grid-cols-2"),e.length>=3&&i.push("lg:grid-cols-3"),Vt.academicGroupStatsList.innerHTML=`
    <div class="${i.join(" ")}">
      ${n}
    </div>
  `}function nit(r,t){var m;const e=dx(r.averageScore),n=sr.convertToBanglaRank(t),i=ux(r.groupName),s=f=>{const y=`${Math.max(0,Math.round(Number(f)||0))}`;return sr.convertToBanglaNumber?sr.convertToBanglaNumber(y):y},a=f=>{const y=(Number(f)||0).toFixed(2);return sr.convertToBanglaNumber?sr.convertToBanglaNumber(y):y},o=Math.min(100,Math.max(0,Number(r.averageScore)||0)),A=a(o),l=s(r.evalCount||0),c=s(r.studentCount||0),u=s(r.evaluatedMembers||0);s(r.taskCount||0);const h=` : ${c}  : ${u} `;return`
  <article class="relative flex items-center justify-between gap-4 rounded-2xl border border-transparent
                  bg-white/90 p-4 shadow-sm transition hover:-translate-y-0.5 hover:shadow-lg
                  dark:border-transparent dark:bg-slate-900/70 cursor-pointer"
           data-group-id="${((m=r.group)==null?void 0:m.id)||""}"
           style="box-shadow:0 10px 24px ${e.shadow}; border:1px solid ${e.solid}55;">
    <div class="flex items-start gap-3 min-w-0">
      <div class="flex flex-col items-center justify-center rounded-xl bg-slate-900/5 px-3 py-2 text-center
                  text-slate-700 shadow-sm dark:bg-white/10 dark:text-slate-100">
        <div class="text-sm font-bold">${n}</div>
        <div class="text-[10px] font-semibold uppercase tracking-wide text-slate-500 dark:text-slate-300"> </div>
      </div>
      <div class="min-w-0 space-y-2">
        <h4 class="truncate text-base font-semibold text-slate-900 dark:text-white" title="${i}">
          ${i}
        </h4>
        <div class="grid grid-cols-2 gap-2 text-[12px] font-semibold">
          <span class="inline-flex items-center justify-center rounded-lg bg-slate-100 px-2 py-1 text-slate-700
                       dark:bg-slate-800 dark:text-slate-100">
            : ${A}%
          </span>
          <span class="inline-flex items-center justify-center rounded-lg bg-slate-900/5 px-2 py-1 text-slate-700
                       dark:bg-white/10 dark:text-slate-100">
             : ${l} 
          </span>
        </div>
        <p class="text-xs text-slate-600 dark:text-slate-300 truncate" title="${h}">
          ${h}
        </p>
      </div>
    </div>

    <div class="flex flex-col items-center gap-1 shrink-0">
      ${sit(o,e,64)}
      <span class="text-xs font-semibold text-slate-500 dark:text-slate-300">Avg%</span>
    </div>
  </article>`}function iit(r,t=null){if(!Vt.groupsRankingList)return;Na.clearContainer(Vt.groupsRankingList);const e=r.filter(A=>A.evalCount>0);if(e.length===0){Na.displayEmptyMessage(Vt.groupsRankingList,"   ");return}const n=t&&t.map instanceof Map?t.map:new Map,i=A=>jm(A),s=[...e].sort((A,l)=>{var h,d;const c=n.get(i((h=A.group)==null?void 0:h.id)),u=n.get(i((d=l.group)==null?void 0:d.id));return c&&u?c.rank-u.rank:c?-1:u?1:l.averageScore!==A.averageScore?l.averageScore-A.averageScore:l.evalCount!==A.evalCount?l.evalCount-A.evalCount:(A.groupName||"").localeCompare(l.groupName||"","bn")});let a=0;const o=s.map(A=>{var u;const l=n.get(i((u=A.group)==null?void 0:u.id)),c=(l==null?void 0:l.rank)??++a;return nit(A,c)}).join("");Vt.groupsRankingList.innerHTML=`
    <div class="grid grid-cols-1 gap-4 sm:gap-5">
      ${o}
    </div>
  `,Vt.groupsRankingList&&window&&typeof window.openGroupModalById=="function"&&Na.addListener(Vt.groupsRankingList,"click",A=>{const l=A.target.closest("[data-group-id]");if(!l)return;const c=l.getAttribute("data-group-id");if(c)try{window.openGroupModalById(c)}catch(u){console.warn("Group modal open failed:",u)}})}function ux(r){if(r==null)return"";const t=sr!=null&&sr.ensureBengaliText&&typeof sr.ensureBengaliText=="function"?sr.ensureBengaliText(r):String(r);return Gm(t.trim())}function Gm(r){return String(r).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function dx(r){const t=Number(r)||0;return t>=85?{solid:"#22c55e",soft:"rgba(34,197,94,0.18)",gradient:"from-emerald-500/15 via-emerald-400/10 to-transparent",shadow:"rgba(34,197,94,0.28)"}:t>=70?{solid:"#0ea5e9",soft:"rgba(14,165,233,0.18)",gradient:"from-sky-500/15 via-sky-400/10 to-transparent",shadow:"rgba(14,165,233,0.25)"}:t>=55?{solid:"#f59e0b",soft:"rgba(245,158,11,0.18)",gradient:"from-amber-500/15 via-amber-400/10 to-transparent",shadow:"rgba(245,158,11,0.25)"}:{solid:"#f43f5e",soft:"rgba(244,63,94,0.18)",gradient:"from-rose-500/15 via-rose-400/10 to-transparent",shadow:"rgba(244,63,94,0.25)"}}function sit(r,t,e=96){const n=Math.max(0,Math.min(100,Number(r)||0)),i=typeof e=="number"?e:96,s=sr.convertToBanglaNumber(Math.round(n).toString());return`
    <div class="relative flex items-center justify-center" style="width:${i}px;height:${i}px;">
      <div class="absolute inset-0 rounded-full" style="background: conic-gradient(${t.solid} ${n}%, ${t.soft} ${n}% 100%);"></div>
      <div class="absolute inset-[18%] rounded-full bg-white dark:bg-gray-900 flex items-center justify-center shadow-inner" style="box-shadow: 0 8px 18px ${t.shadow};">
        <span class="text-lg font-semibold text-gray-800 dark:text-gray-100">${s}%</span>
      </div>
    </div>
  `}let Hl,fr,gu,Yf,Ob,No;const pi={};function ait(r){return Hl=r.managers.stateManager,fr=r.managers.uiManager,gu=r.services.dataService,No=r.utils.permissionHelper,Yf=r.utils,Ob=r.app,Ait(),lit(),console.log(" Groups component initialized."),{render:oit,populateGroupSelects:fit}}function oit(){if(!pi.page){console.error(" Groups render failed: Page element #page-groups not found.");return}console.log("Rendering Groups page...");const r=Hl.get("groups");cit(r)}function Ait(){if(pi.page=document.getElementById("page-groups"),!pi.page){console.error(" Groups init failed: #page-groups element not found!");return}pi.groupNameInput=pi.page.querySelector("#groupNameInput"),pi.addGroupBtn=pi.page.querySelector("#addGroupBtn"),pi.groupsList=pi.page.querySelector("#groupsList")}function lit(){pi.page&&(fr.addListener(pi.addGroupBtn,"click",uit),fr.addListener(pi.groupsList,"click",r=>{const t=r.target.closest(".edit-group-btn"),e=r.target.closest(".delete-group-btn");if(t){const n=t.dataset.id;dit(n)}else if(e){const n=e.dataset.id;hit(n)}}))}function cit(r){if(!pi.groupsList){console.warn("Groups render: groupsList element not found.");return}if(fr.clearContainer(pi.groupsList),!r||r.length===0){fr.displayEmptyMessage(pi.groupsList,"    ");return}const t=[...r].sort((i,s)=>(i.name||"").localeCompare(s.name||"","bn")),e=Hl.get("students")||[],n=t.map(i=>{const s=e.filter(a=>a.groupId===i.id).length;return`
        <div class="card p-4 flex flex-col sm:flex-row justify-between items-start sm:items-center">
            <div>
                <h4 class="text-lg font-semibold text-gray-800 dark:text-white">${Yf.ensureBengaliText(i.name)}</h4>
                <p class="text-sm text-gray-500 dark:text-gray-400">
                     : ${Yf.convertToBanglaNumber(s)}
                </p>
            </div>
            <div class="flex space-x-2 mt-3 sm:mt-0 self-end sm:self-auto">
                <button data-id="${i.id}" 
                        class="edit-group-btn btn btn-light btn-sm py-1 px-2"
                        aria-label="  ">
                    <i class="fas fa-edit pointer-events-none"></i>
                </button>
                <button data-id="${i.id}" 
                        class="delete-group-btn btn btn-danger btn-sm py-1 px-2"
                        aria-label="  ">
                    <i class="fas fa-trash pointer-events-none"></i>
                </button>
            </div>
        </div>
        `}).join("");pi.groupsList.innerHTML=n}async function uit(){var t;if(!(No!=null&&No.canWrite())){fr.showToast("      ","warning");return}const r=(t=pi.groupNameInput)==null?void 0:t.value.trim();if(!r){fr.showToast("  ","warning");return}if(r.length>50){fr.showToast("      ","warning");return}fr.showLoading("   ...");try{if(await gu.checkGroupNameExists(r)){fr.showToast("     ","warning"),fr.hideLoading();return}const n={name:r};await gu.addGroup(n),await Ob.refreshAllData(),pi.groupNameInput&&(pi.groupNameInput.value=""),fr.showToast("    ","success")}catch(e){console.error(" Error adding group:",e),fr.showToast(`    : ${e.message}`,"error")}finally{fr.hideLoading()}}function dit(r){if(!(No!=null&&No.canEdit())){fr.showToast("     ","warning");return}const t=Hl.get("groups").find(n=>n.id===r);if(!t){fr.showToast("  ","error");return}const e=`
        <div>
            <label class="label" for="editGroupNameInput"> </label>
            <input id="editGroupNameInput" type="text" 
                   class="form-input w-full" 
                   value="${t.name||""}"
                   maxlength="50" />
        </div>
    `;fr.showEditModal(" ",e,async()=>{const n=document.getElementById("editGroupNameInput"),i=n==null?void 0:n.value.trim();if(!i){fr.showToast("     ","warning");return}if(i===t.name){fr.hideModal(fr.elements.editModal);return}fr.showLoading("  ...");try{if(await gu.checkGroupNameExists(i,r)){fr.showToast("     ","warning"),fr.hideLoading();return}await gu.updateGroup(r,{name:i}),await Ob.refreshAllData(),fr.hideModal(fr.elements.editModal),fr.showToast("    ","success")}catch(s){console.error(" Error updating group:",s),fr.showToast(`   : ${s.message}`,"error")}finally{fr.hideLoading()}})}function hit(r){if(!(No!=null&&No.canDelete())){fr.showToast("     ","warning");return}const t=Hl.get("groups").find(i=>i.id===r);if(!t){fr.showToast("  ","error");return}const e=Hl.get("students").filter(i=>i.groupId===r).length;let n=`     "${t.name}"    ?`;e>0&&(n+=` (  ${Yf.convertToBanglaNumber(e)}           !)`),fr.showDeleteModal("  ",n,async()=>{fr.showLoading("  ...");try{const i=Hl.get("students").filter(s=>s.groupId===r).map(s=>s.id);i.length>0&&await gu.batchUpdateStudents(i,{groupId:"",role:""}),await gu.deleteGroup(r),await Ob.refreshAllData(),fr.showToast("    ","success")}catch(i){console.error(" Error deleting group:",i),fr.showToast(`    : ${i.message}`,"error")}finally{fr.hideLoading()}})}function fit(r,t=" "){const n=Hl.get("groups").map(i=>({value:i.id,text:Yf.ensureBengaliText(i.name)})).sort((i,s)=>i.text.localeCompare(s.text,"bn"));r.forEach(i=>{const s=document.getElementById(i);if(s){const a=t.includes("")||t.includes("All")?"all":"";fr.populateSelect(s,n,t,s.value||a),t.includes("")&&s.options[0]&&(s.options[0].disabled=!0)}})}let bi,pe,ec,Pe,BA,ba;const zt={membersPage:null,csvFileInput:null,csvFileName:null,downloadTemplateBtn:null,processImportBtn:null,studentNameInput:null,studentRollInput:null,studentGenderInput:null,studentGroupInput:null,studentContactInput:null,studentAcademicGroupInput:null,studentSessionInput:null,studentRoleInput:null,addStudentBtn:null,membersFilterGroup:null,membersFilterAcademicGroup:null,studentSearchInput:null,studentsListContainer:null,cardsPage:null,cardsFilterGroup:null,cardsFilterAcademicGroup:null,allStudentsSearchInput:null,allStudentsCardsContainer:null};let _U,BU;const CU={membersList:"members-list",studentCards:"student-cards"};let ZS="",tk="";const hx="inline-flex items-center px-2 py-2 text-xs font-semibold rounded-full border",git={"team-leader":{label:" ",className:"bg-amber-100 text-amber-700 border-amber-200 dark:bg-amber-500/20 dark:text-amber-100 dark:border-amber-500/40"},"time-keeper":{label:" ",className:"bg-sky-100 text-sky-700 border-sky-200 dark:bg-sky-500/20 dark:text-sky-100 dark:border-sky-500/40"},reporter:{label:"",className:"bg-purple-100 text-purple-700 border-purple-200 dark:bg-purple-500/20 dark:text-purple-100 dark:border-purple-500/40"},"resource-manager":{label:" ",className:"bg-emerald-100 text-emerald-700 border-emerald-200 dark:bg-emerald-500/20 dark:text-emerald-100 dark:border-emerald-500/40"},"peace-maker":{label:" ",className:"bg-rose-100 text-rose-700 border-rose-200 dark:bg-rose-500/20 dark:text-rose-100 dark:border-rose-500/40"}},pit={science:{className:"bg-sky-100 text-sky-700 border-sky-200 dark:bg-sky-500/15 dark:text-sky-100 dark:border-sky-500/40"},humanities:{className:"bg-amber-100 text-amber-700 border-amber-200 dark:bg-amber-500/15 dark:text-amber-100 dark:border-amber-500/40"},business:{className:"bg-emerald-100 text-emerald-700 border-emerald-200 dark:bg-emerald-500/20 dark:text-emerald-100 dark:border-emerald-500/40"},other:{className:"bg-gray-100 text-gray-600 border-gray-200 dark:bg-gray-800 dark:text-gray-200 dark:border-gray-700"}};function mit(){if(document.getElementById("members-soft3d-styles"))return;const r=document.createElement("style");r.id="members-soft3d-styles",r.textContent=`
  /* Panel (group section wrapper) */
  .panel-3d{
    border-radius: 1rem;
    overflow: hidden;
    box-shadow:
      0 1px 0 rgba(255,255,255,.6) inset,
      0 10px 18px rgba(0,0,0,.06),
      0 2px 4px rgba(0,0,0,.04);
  }
  .dark .panel-3d{
    box-shadow:
      0 1px 0 rgba(255,255,255,.08) inset,
      0 12px 22px rgba(0,0,0,.25),
      0 2px 4px rgba(0,0,0,.18);
  }

  /* Section header gloss */
  .header-3d::after{
    content:""; position:absolute; inset:0; pointer-events:none;
    background: radial-gradient(120% 140% at 110% -20%, rgba(255,255,255,.18), transparent 60%);
  }
  .dark .header-3d::after{
    background: radial-gradient(120% 140% at 110% -20%, rgba(255,255,255,.08), transparent 60%);
  }

  /* Card 3D (student card/list item) */
  .card-3d{
    border-radius: .875rem;
    box-shadow:
      0 1px 0 rgba(255,255,255,.55) inset,
      0 10px 18px rgba(0,0,0,.06),
      0 2px 4px rgba(0,0,0,.04);
    transition: transform .15s ease, box-shadow .15s ease;
    will-change: transform;
  }
  .card-3d:hover{
    transform: translateY(-1px);
    box-shadow:
      0 1px 0 rgba(255,255,255,.6) inset,
      0 14px 24px rgba(0,0,0,.10),
      0 4px 8px rgba(0,0,0,.06);
  }
  .dark .card-3d{
    box-shadow:
      0 1px 0 rgba(255,255,255,.08) inset,
      0 12px 22px rgba(0,0,0,.25),
      0 2px 4px rgba(0,0,0,.18);
  }
  .dark .card-3d:hover{
    box-shadow:
      0 1px 0 rgba(255,255,255,.10) inset,
      0 16px 26px rgba(0,0,0,.35),
      0 4px 8px rgba(0,0,0,.25);
  }

  /* Chip/Badge subtle inner highlight */
  .badge-3d{
    box-shadow: 0 1px 0 rgba(255,255,255,.45) inset, 0 1px 2px rgba(0,0,0,.06);
  }
  .dark .badge-3d{
    box-shadow: 0 1px 0 rgba(255,255,255,.10) inset, 0 1px 2px rgba(0,0,0,.25);
  }
  `,document.head.appendChild(r)}function EU(r){const t=`${hx} badge-3d mt-1`;if(!r)return`<span class="${t} bg-gray-100 text-gray-500 border-gray-200 dark:bg-gray-800 dark:text-gray-300 dark:border-gray-700">  </span>`;const e=git[r]||{label:r,className:"bg-gray-100 text-gray-600 border-gray-200 dark:bg-gray-800 dark:text-gray-200 dark:border-gray-700"},n=e.label?gA(e.label):gA(r);return`<span class="${t} ${e.className||""}">${n}</span>`}function SU(r){const t=`${hx} badge-3d`,e=(r||"").toString().trim();if(!e)return`<span class="${t} bg-gray-100 text-gray-500 border-gray-200 dark:bg-gray-800 dark:text-gray-300 dark:border-gray-700">   </span>`;const n=yit(e),i=pit[n]||{className:"bg-gray-100 text-gray-600 border-gray-200 dark:bg-gray-800 dark:text-gray-200 dark:border-gray-700"},s=gA(e);return`<span class="${t} ${i.className}">${s}</span>`}function gA(r){if(r==null)return"";const t=Pe!=null&&Pe.ensureBengaliText&&typeof Pe.ensureBengaliText=="function"?Pe.ensureBengaliText(r):String(r);return bit(t.trim())}function bit(r){return String(r).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function yit(r){const t=(r||"").toString().toLowerCase();return t?t.includes("science")||t.includes("")?"science":t.includes("human")||t.includes("")?"humanities":t.includes("business")||t.includes("")||t.includes("")?"business":"other":"other"}function om(r){return typeof r=="string"?r.toLowerCase():r==null?"":String(r).toLowerCase()}function wit(r){if(!r)return"";if(typeof r=="number"||typeof r=="string")return String(r);if(typeof r=="object"){if(typeof r.toMillis=="function")try{return String(r.toMillis())}catch{}if(typeof r.seconds=="number"){const t=typeof r.nanoseconds=="number"?r.nanoseconds:0;return`${r.seconds}:${t}`}}return JSON.stringify(r)}function kU(r,t,e){const i=[...r].sort((a,o)=>{const A=(a.groupId||"").localeCompare(o.groupId||"");if(A!==0)return A;const l=`${a.roll??""}`.localeCompare(`${o.roll??""}`,void 0,{numeric:!0});return l!==0?l:(a.name||"").localeCompare(o.name||"","bn")}).map(a=>{const o=a.roll===void 0||a.roll===null?"":`${a.roll}`;return[a.id||"",a.name||"",o,a.groupId||"",a.academicGroup||"",a.session||"",a.gender||"",a.role||"",a.contact||"",wit(a.updatedAt)].join("|")}).join("~"),s=JSON.stringify({group:(t==null?void 0:t.groupFilter)||"all",academic:(t==null?void 0:t.academicFilter)||"all",search:((t==null?void 0:t.searchTerm)||"").toLowerCase()});return`${e}::${s}::${i}`}function vit(r){return bi=r.managers.stateManager,pe=r.managers.uiManager,ec=r.services.dataService,ba=r.utils.permissionHelper,Pe=r.utils,BA=r.app,_U=Pe.createDebouncer(300),BU=Pe.createDebouncer(300),mit(),Bit(),Cit(),console.log(" Members component initialized."),{render:xit,renderStudentCards:_it,populateFilters:fx}}function xit(){if(!zt.membersPage){console.error(" Members render failed: Page element #page-members not found.");return}console.log("Rendering Members (List) page..."),fx(),Km()}function _it(){if(!zt.cardsPage){console.error(" Student Cards render failed: Page element #page-all-students not found.");return}console.log("Rendering All Students (Cards) page..."),fx(),zm()}function Bit(){zt.membersPage=document.getElementById("page-members"),zt.membersPage?(zt.csvFileInput=zt.membersPage.querySelector("#csvFileInput"),zt.csvFileName=zt.membersPage.querySelector("#csvFileName"),zt.downloadTemplateBtn=zt.membersPage.querySelector("#downloadTemplateBtn"),zt.processImportBtn=zt.membersPage.querySelector("#processImportBtn"),zt.studentNameInput=zt.membersPage.querySelector("#studentNameInput"),zt.studentRollInput=zt.membersPage.querySelector("#studentRollInput"),zt.studentGenderInput=zt.membersPage.querySelector("#studentGenderInput"),zt.studentGroupInput=zt.membersPage.querySelector("#studentGroupInput"),zt.studentContactInput=zt.membersPage.querySelector("#studentContactInput"),zt.studentAcademicGroupInput=zt.membersPage.querySelector("#studentAcademicGroupInput"),zt.studentSessionInput=zt.membersPage.querySelector("#studentSessionInput"),zt.studentRoleInput=zt.membersPage.querySelector("#studentRoleInput"),zt.addStudentBtn=zt.membersPage.querySelector("#addStudentBtn"),zt.membersFilterGroup=zt.membersPage.querySelector("#membersFilterGroup"),zt.membersFilterAcademicGroup=zt.membersPage.querySelector("#membersFilterAcademicGroup"),zt.studentSearchInput=zt.membersPage.querySelector("#studentSearchInput"),zt.studentsListContainer=zt.membersPage.querySelector("#studentsList")):console.warn("Members page element (#page-members) not found!"),zt.cardsPage=document.getElementById("page-all-students"),zt.cardsPage?(zt.cardsFilterGroup=zt.cardsPage.querySelector("#cardsFilterGroup"),zt.cardsFilterAcademicGroup=zt.cardsPage.querySelector("#cardsFilterAcademicGroup"),zt.allStudentsSearchInput=zt.cardsPage.querySelector("#allStudentsSearchInput"),zt.allStudentsCardsContainer=zt.cardsPage.querySelector("#allStudentsCards")):console.warn("All Students Cards page element (#page-all-students) not found!")}function Cit(){zt.membersPage&&(pe.addListener(zt.addStudentBtn,"click",Eit),pe.addListener(zt.downloadTemplateBtn,"click",Iit),pe.addListener(zt.csvFileInput,"change",Tit),pe.addListener(zt.processImportBtn,"click",Fit),pe.addListener(zt.membersFilterGroup,"change",r=>{bi.updateFilters("membersList",{groupFilter:r.target.value})&&Km()}),pe.addListener(zt.membersFilterAcademicGroup,"change",r=>{bi.updateFilters("membersList",{academicFilter:r.target.value})&&Km()}),pe.addListener(zt.studentSearchInput,"input",r=>{const t=r.target.value.trim();_U(()=>{bi.updateFilters("membersList",{searchTerm:t})&&Km()})}),pe.addListener(zt.studentsListContainer,"click",r=>{const t=r.target.closest(".edit-student-btn"),e=r.target.closest(".delete-student-btn");t?Sit(t.dataset.id):e&&kit(e.dataset.id)})),zt.cardsPage&&(pe.addListener(zt.cardsFilterGroup,"change",r=>{bi.updateFilters("studentCards",{groupFilter:r.target.value})&&zm()}),pe.addListener(zt.cardsFilterAcademicGroup,"change",r=>{bi.updateFilters("studentCards",{academicFilter:r.target.value})&&zm()}),pe.addListener(zt.allStudentsSearchInput,"input",r=>{const t=r.target.value.trim();BU(()=>{bi.updateFilters("studentCards",{searchTerm:t})&&zm()})}))}function fx(){const r=bi.get("groups")||[],t=JSON.stringify(r.map(s=>`${s.id||""}:${s.name||""}`));if(t!==ZS){ZS=t;const s=[];zt.membersFilterGroup&&s.push("membersFilterGroup"),zt.cardsFilterGroup&&s.push("cardsFilterGroup"),BA.components.groups&&BA.components.groups.populateGroupSelects?(s.length&&BA.components.groups.populateGroupSelects(s," "),zt.studentGroupInput&&(BA.components.groups.populateGroupSelects(["studentGroupInput"],"   "),zt.studentGroupInput.options[0]&&(zt.studentGroupInput.options[0].disabled=!0))):(s.length||zt.studentGroupInput)&&console.warn("Members: Groups component not available to populate group selects.")}const e=bi.get("students")||[],n=[...new Set(e.map(s=>s.academicGroup).filter(Boolean))].sort((s,a)=>(s||"").localeCompare(a||"","bn")),i=JSON.stringify(n);if(i!==tk){tk=i;const s=n.map(o=>({value:o,text:o}));[zt.membersFilterAcademicGroup,zt.cardsFilterAcademicGroup].forEach(o=>{o&&pe.populateSelect(o,s,"  ")})}}function Km(){if(!zt.studentsListContainer)return;const r=bi.getFilterSection("membersList"),t=IU(r),e=kU(t,r,CU.membersList);if(zt.studentsListContainer.dataset.renderSignature===e)return;if(pe.clearContainer(zt.studentsListContainer),!t.length){pe.displayEmptyMessage(zt.studentsListContainer,"   "),zt.studentsListContainer.dataset.renderSignature=e;return}const n=bi.get("groups")||[],i=new Map(n.map(l=>[l.id,l])),s=TU(n),a=new Map;t.forEach(l=>{const c=l.groupId||"unassigned";a.has(c)||a.set(c,[]),a.get(c).push(l)});const A=Array.from(a.entries()).sort((l,c)=>{var d,m;if(l[0]==="unassigned")return 1;if(c[0]==="unassigned")return-1;const u=((d=i.get(l[0]))==null?void 0:d.name)||"",h=((m=i.get(c[0]))==null?void 0:m.name)||"";return u.localeCompare(h,"bn")}).map(([l,c])=>{const u=s[l]||s.__default,h=i.get(l),d=(h==null?void 0:h.name)||"  ",m=Pe!=null&&Pe.ensureBengaliText&&typeof Pe.ensureBengaliText=="function"?Pe.ensureBengaliText(d):d,f=Pe!=null&&Pe.convertToBanglaNumber&&typeof Pe.convertToBanglaNumber=="function"?Pe.convertToBanglaNumber(c.length):c.length;c.sort((C,N)=>{const R=C.roll!==void 0&&C.roll!==null?C.roll.toString():"",U=N.roll!==void 0&&N.roll!==null?N.roll.toString():"",x=R.localeCompare(U,void 0,{numeric:!0});return x!==0?x:(C.name||"").localeCompare(N.name||"","bn")});const b=c.map(C=>{const N=Pe!=null&&Pe.ensureBengaliText&&typeof Pe.ensureBengaliText=="function"?Pe.ensureBengaliText(C.name||""):C.name||"",U=C.roll!==void 0&&C.roll!==null&&`${C.roll}`.trim()!==""?Pe!=null&&Pe.convertToBanglaNumber&&typeof Pe.convertToBanglaNumber=="function"?Pe.convertToBanglaNumber(C.roll):C.roll:"",x=Pe!=null&&Pe.ensureBengaliText&&typeof Pe.ensureBengaliText=="function"?Pe.ensureBengaliText(C.session||""):C.session||"",v=Pe!=null&&Pe.ensureBengaliText&&typeof Pe.ensureBengaliText=="function"?Pe.ensureBengaliText(C.gender||""):C.gender||"",T=Pe!=null&&Pe.ensureBengaliText&&typeof Pe.ensureBengaliText=="function"?Pe.ensureBengaliText(C.academicGroup||""):C.academicGroup||"",E=C.contact?`<div class="mt-2 text-xs text-gray-500 dark:text-gray-400">: ${C.contact}</div>`:"";return`
            <article class="card-3d rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900/70 p-4 hover:shadow-md transition">
              <div class="flex items-start justify-between gap-3">
                <div>
                  <h5 class="text-base font-semibold text-gray-900 dark:text-white">${N||" "}</h5>
                  <div class="mt-2 flex flex-wrap gap-2">
                    ${SU(C.academicGroup)}
                    ${EU(C.role)}
                  </div>
                </div>
                <span class="text-sm font-semibold text-gray-500 dark:text-gray-400">${U?` ${U}`:""}</span>
              </div>
              <div class="mt-3 space-y-1 text-xs text-gray-600 dark:text-gray-300">
                <p><span class="font-medium text-gray-700 dark:text-gray-200">:</span> ${x||"N/A"}</p>
                <p><span class="font-medium text-gray-700 dark:text-gray-200">:</span> ${v||"N/A"}</p>
                <p><span class="font-medium text-gray-700 dark:text-gray-200"> :</span> ${T||"N/A"}</p>
              </div>
              ${E}
              <div class="mt-4 flex justify-end gap-2">
                <button data-id="${C.id}" class="edit-student-btn btn btn-light btn-sm py-1 px-2" aria-label=""><i class="fas fa-edit pointer-events-none"></i></button>
                <button data-id="${C.id}" class="delete-student-btn btn btn-danger btn-sm py-1 px-2" aria-label=""><i class="fas fa-trash pointer-events-none"></i></button>
              </div>
            </article>
          `}).join(""),y=`relative header-3d px-4 py-3 bg-gradient-to-r ${u.headerBg||"from-slate-500 to-slate-600"} text-white flex items-center justify-between`,B=`mb-6 panel-3d rounded-xl overflow-hidden shadow-sm border ${u.panelBorder||"border-gray-200 dark:border-gray-700"}`,I=`p-4 ${u.sectionBg||"bg-gray-50 dark:bg-gray-900/40"}`;return`
        <section class="${B}">
          <header class="${y}">
            <h3 class="text-lg font-semibold">${m}</h3>
            <span class="text-sm font-medium"> : ${f}</span>
          </header>
          <div class="${I}">
            <div class="grid gap-4 md:grid-cols-2 xl:grid-cols-3">
              ${b}
            </div>
          </div>
        </section>
      `}).join("");zt.studentsListContainer.innerHTML=A,zt.studentsListContainer.dataset.renderSignature=e}function zm(){if(!zt.allStudentsCardsContainer)return;const r=bi.getFilterSection("studentCards"),t=IU(r),e=kU(t,r,CU.studentCards);if(zt.allStudentsCardsContainer.dataset.renderSignature===e)return;if(t.sort((o,A)=>(o.groupId||"").localeCompare(A.groupId||"")||(o.name||"").localeCompare(A.name||"","bn")),pe.clearContainer(zt.allStudentsCardsContainer),!t.length){pe.displayEmptyMessage(zt.allStudentsCardsContainer,"   "),zt.allStudentsCardsContainer.dataset.renderSignature=e;return}const n=bi.get("groups")||[],i=new Map(n.map(o=>[o.id,o])),s=TU(n),a=t.map(o=>{const A=i.get(o.groupId),l=(A==null?void 0:A.name)||"  ",c=gA(l),u=s[o.groupId]||s.__default,h=gA(o.name||" "),m=o.roll!==void 0&&o.roll!==null&&`${o.roll}`.trim()!==""?Pe!=null&&Pe.convertToBanglaNumber&&typeof Pe.convertToBanglaNumber=="function"?Pe.convertToBanglaNumber(o.roll):String(o.roll):"",f=gA(o.session||"N/A"),b=gA(o.gender||"N/A");gA(o.academicGroup||"N/A");const y=o.contact?gA(o.contact):"",B=y?`<div class="flex items-center gap-2 rounded-xl bg-gray-100/80 px-3 py-2 text-xs text-gray-600 shadow-sm dark:bg-gray-800/70 dark:text-gray-200"><i class="fas fa-phone text-emerald-500"></i><span>${y}</span></div>`:"";return`
  <article
    class="card-3d relative mx-auto w-full max-w-md md:max-w-lg rounded-2xl border ${u.panelBorder||"border-gray-200 dark:border-gray-700"} bg-white dark:bg-gray-900/80 hover:shadow-lg transition duration-200 cursor-pointer focus-visible:outline focus-visible:outline-2 focus-visible:outline-indigo-500 focus-visible:outline-offset-2"
    data-student-id="${o.id}"
    role="button"
    tabindex="0"
    aria-label="${h} - "
    onclick="_handleStudentCardActivation && _handleStudentCardActivation(event)"
    onkeydown="_handleStudentCardActivation && _handleStudentCardActivation(event)"
  >
    <!-- Top gradient bar -->
    <div class="absolute inset-x-0 top-0 h-1.5 bg-gradient-to-r ${u.headerBg||"from-indigo-500 to-blue-500"} rounded-t-2xl"></div>

    <!-- Body (kept compact) -->
    <div class="relative px-4 pt-8 pb-4 flex flex-col items-center gap-3">

      <!-- Roll: top-center -->
      <span
        class="absolute -top-4 left-1/2 -translate-x-1/2 inline-flex h-10 min-w-[72px] px-3 items-center justify-center rounded-xl
               bg-gray-100 text-[13px] font-semibold text-gray-800 dark:bg-gray-800 dark:text-gray-200 shadow-inner
               ring-1 ring-gray-300 dark:ring-gray-700"
      >
        ${m?` ${m}`:"N/A"}
      </span>

      <!-- Name (below roll) -->
      <h4
        class="mt-1 text-base md:text-lg font-semibold leading-snug text-gray-900 dark:text-white
               text-center whitespace-normal break-words hyphens-auto"
        title="${h}"
      >
        ${h}
      </h4>

      <!-- Badges (tight wrap) -->
      <div class="flex flex-wrap justify-center gap-1.5">
        ${SU(o.academicGroup)}
        ${EU(o.role)}
        <span class="${hx} ${u.chipBg||"bg-gray-200 text-gray-700 border border-gray-300 dark:bg-gray-800 dark:text-gray-200 dark:border-gray-600"} badge-3d">: ${c}</span>
      </div>

      <!-- Info grid (compact, non-overlapping) -->
      <section
        class="w-full grid gap-2 [grid-template-columns:repeat(auto-fit,minmax(160px,1fr))] text-[13px] font-medium"
        aria-label="Student details"
      >
        <div class="flex items-center gap-1.5 rounded-lg border border-gray-200 dark:border-gray-700 bg-gray-50/70 dark:bg-gray-800/50 px-2.5 py-1.5">
          <i class="fas fa-calendar text-indigo-500"></i>
          <span class="text-gray-600 dark:text-gray-300">:</span>
          <span class="text-gray-900 dark:text-gray-100 font-semibold ml-1 break-words">${f}</span>
        </div>

        <div class="flex items-center gap-1.5 rounded-lg border border-gray-200 dark:border-gray-700 bg-gray-50/70 dark:bg-gray-800/50 px-2.5 py-1.5">
          <i class="fas fa-venus-mars text-pink-500"></i>
          <span class="text-gray-600 dark:text-gray-300">:</span>
          <span class="text-gray-900 dark:text-gray-100 font-semibold ml-1 break-words">${b}</span>
        </div>
      </section>

      ${B}
    </div>
  </article>
`}).join("");zt.allStudentsCardsContainer.innerHTML=`
    <div class="grid items-stretch gap-6 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4">
      ${a}
    </div>
  `,zt.allStudentsCardsContainer.dataset.renderSignature=e}function IU(r){const t=bi.get("students")||[],{groupFilter:e,academicFilter:n,searchTerm:i}=r||{},s=om(i||"");return t.filter(a=>{const o=!e||e==="all"||a.groupId===e,A=!n||n==="all"||a.academicGroup===n,l=!s||om(a.name).includes(s)||om(a.roll).includes(s)||om(a.academicGroup).includes(s);return o&&A&&l})}async function Eit(){var l,c,u,h,d,m,f,b;if(!(ba!=null&&ba.canWrite())){pe.showToast("      ","warning");return}const r=(l=zt.studentNameInput)==null?void 0:l.value.trim(),t=(c=zt.studentRollInput)==null?void 0:c.value.trim(),e=(u=zt.studentGenderInput)==null?void 0:u.value,n=(h=zt.studentGroupInput)==null?void 0:h.value,i=(d=zt.studentContactInput)==null?void 0:d.value.trim(),s=(m=zt.studentAcademicGroupInput)==null?void 0:m.value.trim(),a=(f=zt.studentSessionInput)==null?void 0:f.value.trim(),o=(b=zt.studentRoleInput)==null?void 0:b.value;if(!r||!t||!e||!s||!a){pe.showToast(", , ,     ","warning");return}pe.showLoading("   ...");try{if(await ec.checkStudentUniqueness(t,s)){pe.showToast("          ","warning"),pe.hideLoading();return}}catch(y){console.error("Uniqueness check failed:",y),pe.showToast(`    : ${y.message}`,"error"),pe.hideLoading();return}const A={name:r,roll:t,gender:e,groupId:n,contact:i,academicGroup:s,session:a,role:o};pe.showLoading("   ...");try{await ec.addStudent(A),await BA.refreshAllData(),zt.studentNameInput&&(zt.studentNameInput.value=""),zt.studentRollInput&&(zt.studentRollInput.value=""),zt.studentGroupInput&&(zt.studentGroupInput.value=""),zt.studentContactInput&&(zt.studentContactInput.value=""),zt.studentAcademicGroupInput&&(zt.studentAcademicGroupInput.value=""),zt.studentSessionInput&&(zt.studentSessionInput.value=""),zt.studentRoleInput&&(zt.studentRoleInput.value=""),pe.showToast("    ","success")}catch(y){console.error(" Error adding student:",y),pe.showToast(`    : ${y.message}`,"error")}finally{pe.hideLoading()}}function Sit(r){if(!(ba!=null&&ba.canEdit())){pe.showToast("     ","warning");return}const t=bi.get("students").find(a=>a.id===r);if(!t){pe.showToast("  ","error");return}const n=bi.get("groups").map(a=>`<option value="${a.id}" ${a.id===t.groupId?"selected":""}>${Pe.ensureBengaliText(a.name)}</option>`).sort((a,o)=>a.localeCompare(o,"bn")).join(""),i=[{value:"",text:" "},{value:"team-leader",text:" "},{value:"time-keeper",text:" "},{value:"reporter",text:""},{value:"resource-manager",text:" "},{value:"peace-maker",text:" "}].map(a=>`<option value="${a.value}" ${a.value===t.role?"selected":""}>${a.text}</option>`).join(""),s=`
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div><label class="label">*</label><input id="editStudentName" type="text" value="${t.name||""}" class="form-input" maxlength="100"></div>
            <div><label class="label">*</label><input id="editStudentRoll" type="text" value="${t.roll||""}" class="form-input" maxlength="20"></div>
            <div><label class="label">*</label><select id="editStudentGender" class="form-select"><option value="" ${t.gender===""?"selected":""}></option><option value="" ${t.gender===""?"selected":""}></option></select></div>
            <div><label class="label"></label><select id="editStudentGroup" class="form-select"><option value=""> </option>${n}</select></div>
            <div><label class="label"></label><input id="editStudentContact" type="text" value="${t.contact||""}" class="form-input" maxlength="100"></div>
            <div><label class="label"> *</label><input id="editStudentAcademicGroup" type="text" value="${t.academicGroup||""}" class="form-input" maxlength="50"></div>
            <div><label class="label">*</label><input id="editStudentSession" type="text" value="${t.session||""}" class="form-input" maxlength="20"></div>
            <div><label class="label"></label><select id="editStudentRole" class="form-select">${i}</select></div>
        </div>`;pe.showEditModal(" ",s,async()=>{var o,A,l,c,u,h,d,m;const a={name:(o=document.getElementById("editStudentName"))==null?void 0:o.value.trim(),roll:(A=document.getElementById("editStudentRoll"))==null?void 0:A.value.trim(),gender:(l=document.getElementById("editStudentGender"))==null?void 0:l.value,groupId:(c=document.getElementById("editStudentGroup"))==null?void 0:c.value,contact:(u=document.getElementById("editStudentContact"))==null?void 0:u.value.trim(),academicGroup:(h=document.getElementById("editStudentAcademicGroup"))==null?void 0:h.value.trim(),session:(d=document.getElementById("editStudentSession"))==null?void 0:d.value.trim(),role:(m=document.getElementById("editStudentRole"))==null?void 0:m.value};if(!a.name||!a.roll||!a.gender||!a.academicGroup||!a.session){pe.showToast(", , ,     ","warning");return}if(pe.showLoading("  ..."),a.roll!==t.roll||a.academicGroup!==t.academicGroup)try{if(await ec.checkStudentUniqueness(a.roll,a.academicGroup,r)){pe.showToast("          ","warning"),pe.hideLoading();return}}catch(f){pe.showToast(`  : ${f.message}`,"error"),pe.hideLoading();return}pe.showLoading("  ...");try{await ec.updateStudent(r,a),await BA.refreshAllData(),pe.hideModal(pe.elements.editModal),pe.showToast("    ","success")}catch(f){console.error(" Error updating student:",f),pe.showToast(`   : ${f.message}`,"error")}finally{pe.hideLoading()}})}function kit(r){if(!(ba!=null&&ba.canDelete())){pe.showToast("     ","warning");return}const t=bi.get("students").find(n=>n.id===r);if(!t){pe.showToast("  ","error");return}const e=`     "${t.name}" (: ${Pe.convertToBanglaNumber(t.roll)})    ?`;pe.showDeleteModal("  ",e,async()=>{pe.showLoading("  ...");try{await ec.deleteStudent(r),await BA.refreshAllData(),pe.showToast("    ","success")}catch(n){console.error(" Error deleting student:",n),pe.showToast(`   : ${n.message}`,"error")}finally{pe.hideLoading()}})}function Iit(){const r=["","",""," ","",""," "," "],t=[" ","","","HSC 2025","2023-24","01xxxxxxxxx"," ","team-leader"],e="#  : team-leader, time-keeper, reporter, resource-manager, peace-maker (  )",n=Papa.unparse([r,t],{header:!1}),i=e+`
`+n,s=new Blob([`\uFEFF${i}`],{type:"text/csv;charset=utf-8;"}),a=document.createElement("a");a.href=URL.createObjectURL(s),a.download="student_template.csv",a.click(),URL.revokeObjectURL(a.href),pe.showToast("CSV    ","info")}function Tit(){zt.csvFileInput.files.length>0?zt.csvFileName.textContent=` : ${zt.csvFileInput.files[0].name}`:zt.csvFileName.textContent=""}function Fit(){var t;if(!(ba!=null&&ba.canWrite())){pe.showToast(" CSV import   ","warning");return}const r=(t=zt.csvFileInput)==null?void 0:t.files[0];if(!r){pe.showToast("   CSV   ","warning");return}pe.showLoading("CSV    ..."),Papa.parse(r,{header:!0,skipEmptyLines:!0,encoding:"UTF-8",transformHeader:e=>Pe.ensureBengaliText(e).trim(),transform:e=>Pe.ensureBengaliText(e),complete:async e=>{const n=e.data,i=[],s=[];(!n||n.length===0)&&i.push("CSV  ");const o=["","",""," ",""].filter(h=>!e.meta.fields.includes(h));if(o.length>0&&i.push(`  : ${o.join(", ")}`),i.length>0){pe.hideLoading(),pe.showToast(i[0],"error",5e3);return}const A=new Map(bi.get("groups").map(h=>[h.name.toLowerCase(),h.id]));bi.get("students"),pe.showLoading("    ...");const l=n.map(async(h,d)=>{const m=d+2,f=h.,b=h.,y=h.,B=h[" "],I=h.,C=h.||"",N=(h[" "]||"").toLowerCase(),R=(h[" "]||"").toLowerCase();if(!f||!b||!y||!B||!I)return{error:` ${m}:    `};if(!["",""].includes(y))return{error:` ${m}:  (${y})  ''  ''  `};const U=N&&A.get(N)||"";if(N&&!U)return{error:` ${m}: "${h[" "]}"    `};try{if(await ec.checkStudentUniqueness(b,B))return{error:` ${m}:  ${b} (${B})   `}}catch(x){return{error:` ${m}:  ${b}    (${x.message})`}}return{student:{name:f,roll:b,gender:y,groupId:U,contact:C,academicGroup:B,session:I,role:R}}}),c=await Promise.all(l),u=new Set;for(const h of c){if(h.student){const d=`${h.student.roll}|${h.student.academicGroup}`;u.has(d)&&(h.error=` (CSV):  ${h.student.roll} (${h.student.academicGroup})   `,delete h.student),u.add(d)}h.error?i.push(h.error):h.student&&s.push(h.student)}if(i.length>0){pe.hideLoading();const h=i.slice(0,3).join(`
`)+(i.length>3?`
...`:"");pe.showToast(`CSV  ${Pe.convertToBanglaNumber(i.length)}  :
${h}`,"error",1e4),console.error("CSV Import Errors:",i)}else if(s.length>0){pe.showLoading(`(${Pe.convertToBanglaNumber(s.length)})     ...`);try{for(const h of s)await ec.addStudent(h);await BA.refreshAllData(),pe.showToast(`${Pe.convertToBanglaNumber(s.length)}    `,"success")}catch(h){pe.showToast(`   : ${h.message}`,"error")}finally{pe.hideLoading()}}else pe.hideLoading(),pe.showToast("CSV     ","info");zt.csvFileInput&&(zt.csvFileInput.value=""),zt.csvFileName&&(zt.csvFileName.textContent="")},error:e=>{pe.hideLoading(),pe.showToast(`CSV    : ${e.message}`,"error")}})}function TU(r){const t=[{panelBorder:"border-blue-300 dark:border-blue-700",sectionBg:"bg-blue-50/80 dark:bg-blue-900/15",headerBg:"from-blue-500 to-indigo-500",chipBg:"bg-blue-100 text-blue-700 border-blue-200 dark:bg-blue-900/40 dark:text-blue-100 dark:border-blue-800"},{panelBorder:"border-emerald-300 dark:border-emerald-700",sectionBg:"bg-emerald-50/80 dark:bg-emerald-900/15",headerBg:"from-emerald-500 to-teal-500",chipBg:"bg-emerald-100 text-emerald-700 border-emerald-200 dark:bg-emerald-900/40 dark:text-emerald-100 dark:border-emerald-800"},{panelBorder:"border-amber-300 dark:border-amber-700",sectionBg:"bg-amber-50/80 dark:bg-amber-900/20",headerBg:"from-amber-500 to-orange-500",chipBg:"bg-amber-100 text-amber-700 border-amber-200 dark:bg-amber-900/40 dark:text-amber-100 dark:border-amber-800"},{panelBorder:"border-purple-300 dark:border-purple-700",sectionBg:"bg-purple-50/80 dark:bg-purple-900/15",headerBg:"from-violet-500 to-purple-600",chipBg:"bg-purple-100 text-purple-700 border-purple-200 dark:bg-purple-900/40 dark:text-purple-100 dark:border-purple-800"},{panelBorder:"border-rose-300 dark:border-rose-700",sectionBg:"bg-rose-50/80 dark:bg-rose-900/15",headerBg:"from-rose-500 to-pink-500",chipBg:"bg-rose-100 text-rose-700 border-rose-200 dark:bg-rose-900/40 dark:text-rose-100 dark:border-rose-800"},{panelBorder:"border-sky-300 dark:border-sky-700",sectionBg:"bg-sky-50/80 dark:bg-sky-900/15",headerBg:"from-sky-500 to-cyan-500",chipBg:"bg-sky-100 text-sky-700 border-sky-200 dark:bg-sky-900/40 dark:text-sky-100 dark:border-sky-800"},{panelBorder:"border-indigo-300 dark:border-indigo-700",sectionBg:"bg-indigo-50/80 dark:bg-indigo-900/15",headerBg:"from-indigo-500 to-blue-600",chipBg:"bg-indigo-100 text-indigo-700 border-indigo-200 dark:bg-indigo-900/40 dark:text-indigo-100 dark:border-indigo-800"},{panelBorder:"border-lime-300 dark:border-lime-700",sectionBg:"bg-lime-50/80 dark:bg-lime-900/15",headerBg:"from-lime-500 to-green-500",chipBg:"bg-lime-100 text-lime-700 border-lime-200 dark:bg-lime-900/40 dark:text-lime-100 dark:border-lime-800"}],n={__default:{panelBorder:"border-gray-200 dark:border-gray-700",sectionBg:"bg-gray-50 dark:bg-gray-900/40",headerBg:"from-slate-500 to-slate-600",chipBg:"bg-gray-200 text-gray-700 border-gray-300 dark:bg-gray-800 dark:text-gray-200 dark:border-gray-600"}};return(r||[]).forEach((i,s)=>{n[i.id]=t[s%t.length]}),n}let Md,Ve,To,Hs,Ug,Do;const be={},Vc={task:20,team:15,additional:25,mcq:40},FU=100,pu="11:55",Lit=["scheduledTime","scheduleTime","assignmentTime","assignmentClock","time","startTime","timeSlot","meetingTime"],LU=[{value:"upcoming",label:" "},{value:"ongoing",label:" "},{value:"completed",label:" "}],ek={upcoming:{label:"",badge:"bg-sky-100 text-sky-700 dark:bg-sky-900/40 dark:text-sky-200"},ongoing:{label:"",badge:"bg-amber-100 text-amber-700 dark:bg-amber-900/40 dark:text-amber-200"},completed:{label:"",badge:"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/40 dark:text-emerald-200"}},UU=LU.map(r=>r.value);function Uit(r){return Md=r.managers.stateManager,Ve=r.managers.uiManager,To=r.services.dataService,Do=r.utils.permissionHelper,Hs=r.utils,Ug=r.app,Nit(),Dit(),console.log(" Tasks component initialized."),{render:Pit,populateTaskSelects:Git}}function Pit(){if(!be.page)return;const t=Md.get("tasks").filter(e=>gx(e)==="upcoming");Qit(t),NU(Vc,"")}function Nit(){if(be.page=document.getElementById("page-tasks"),!be.page){console.error(" Tasks page element (#page-tasks) not found!");return}be.taskNameInput=be.page.querySelector("#taskNameInput"),be.maxTaskScoreInput=be.page.querySelector("#maxTaskScoreInput"),be.maxTeamScoreInput=be.page.querySelector("#maxTeamScoreInput"),be.maxAdditionalScoreInput=be.page.querySelector("#maxAdditionalScoreInput"),be.maxMcqScoreInput=be.page.querySelector("#maxMcqScoreInput"),be.totalMaxScoreDisplay=be.page.querySelector("#totalMaxScoreDisplay"),be.taskDescriptionInput=be.page.querySelector("#taskDescriptionInput"),be.taskDateInput=be.page.querySelector("#taskDateInput"),be.taskTimeInput=be.page.querySelector("#taskTimeInput"),be.taskStatusInput=be.page.querySelector("#taskStatusInput"),be.addTaskBtn=be.page.querySelector("#addTaskBtn"),be.tasksListContainer=be.page.querySelector("#tasksList"),(!be.maxTaskScoreInput||!be.totalMaxScoreDisplay)&&console.warn("Tasks: One or more score breakdown elements are missing in the HTML."),be.taskStatusInput&&!be.taskStatusInput.value&&(be.taskStatusInput.value="upcoming"),be.taskTimeInput&&!be.taskTimeInput.value&&(be.taskTimeInput.value=pu)}function Dit(){if(!be.page)return;Ve.addListener(be.addTaskBtn,"click",Oit),[be.maxTaskScoreInput,be.maxTeamScoreInput,be.maxAdditionalScoreInput,be.maxMcqScoreInput].forEach(t=>{Ve.addListener(t,"input",()=>V0(""))}),Ve.addListener(be.tasksListContainer,"click",t=>{const e=t.target.closest(".edit-task-btn"),n=t.target.closest(".delete-task-btn");e?Vit(e.dataset.id):n&&$it(n.dataset.id)}),Ve.addListener(be.tasksListContainer,"change",t=>{const e=t.target.closest(".task-status-select");e&&(t.stopPropagation(),jit(e))})}function Xf(r){if(!r)return"";try{if(typeof r=="string")return r.split("T")[0];if(r instanceof Date)return r.toISOString().split("T")[0];if(typeof r.toDate=="function")return r.toDate().toISOString().split("T")[0]}catch(t){console.warn("Unsupported date type for comparison:",r,t)}return""}function Hb(r){const t=Mit(r);if(!t)return null;const e=String(t.hour).padStart(2,"0"),n=String(t.minute).padStart(2,"0");return`${e}:${n}`}function Mit(r){if(r==null)return null;const t=String(r).trim();if(!t)return null;const e=t.toLowerCase(),n=e.match(/(\d{1,2})(?::(\d{1,2}))?\s*(am|pm|a\.m\.|p\.m\.)?/);if(!n){if(/^\d{3,4}$/.test(e)){const o=e.padStart(4,"0"),A=parseInt(o.slice(0,2),10),l=parseInt(o.slice(2),10);if(!Number.isNaN(A)&&!Number.isNaN(l))return{hour:Math.min(Math.max(A,0),23),minute:Math.min(Math.max(l,0),59)}}return null}let i=parseInt(n[1],10),s=n[2]?parseInt(n[2],10):0;if(Number.isNaN(i)||Number.isNaN(s))return null;const a=n[3];if(a){const o=a.includes("p"),A=a.includes("a");o&&i<12&&(i+=12),A&&i===12&&(i=0)}return i=Math.min(Math.max(i,0),23),s=Math.min(Math.max(s,0),59),{hour:i,minute:s}}function PU(r,t){const e=Xf(r);if(!e)return"";const n=Hb(t)||pu;try{const i=new Date(`${e}T${n}:00`);if(!Number.isNaN(i.getTime()))return i.toISOString()}catch{}return r||""}function Rit(r){if(!r)return pu;for(const e of Lit){if(!Object.prototype.hasOwnProperty.call(r,e))continue;const n=Hb(r[e]);if(n)return n}const t=DU(r.date);if(t&&!Number.isNaN(t.getTime())){const e=t.getHours(),n=t.getMinutes();if(e||n)return`${String(e).padStart(2,"0")}:${String(n).padStart(2,"0")}`}return pu}function V0(r=""){var o,A,l,c;const t=parseFloat((o=document.getElementById(`${r}maxTaskScoreInput`))==null?void 0:o.value)||0,e=parseFloat((A=document.getElementById(`${r}maxTeamScoreInput`))==null?void 0:A.value)||0,n=parseFloat((l=document.getElementById(`${r}maxAdditionalScoreInput`))==null?void 0:l.value)||0,i=parseFloat((c=document.getElementById(`${r}maxMcqScoreInput`))==null?void 0:c.value)||0,s=t+e+n+i,a=document.getElementById(`${r}totalMaxScoreDisplay`);return a&&(a.textContent=Hs.convertToBanglaNumber(s)),s}function NU(r,t=""){const e=document.getElementById(`${t}maxTaskScoreInput`),n=document.getElementById(`${t}maxTeamScoreInput`),i=document.getElementById(`${t}maxAdditionalScoreInput`),s=document.getElementById(`${t}maxMcqScoreInput`);e&&(e.value=(r==null?void 0:r.task)??Vc.task),n&&(n.value=(r==null?void 0:r.team)??Vc.team),i&&(i.value=(r==null?void 0:r.additional)??Vc.additional),s&&(s.value=(r==null?void 0:r.mcq)??Vc.mcq),V0(t)}function Qit(r){if(!be.tasksListContainer)return;if(Ve.clearContainer(be.tasksListContainer),!r||r.length===0){Ve.displayEmptyMessage(be.tasksListContainer,"???? ????? ??? ??? ?????");return}const e=[...r].sort((n,i)=>{const s=Xf(n.date);return Xf(i.date).localeCompare(s)}).map(n=>{const i=Hs.formatTimestamp(n.date)||"????? ???",s=n.maxScoreBreakdown?(parseFloat(n.maxScoreBreakdown.task)||0)+(parseFloat(n.maxScoreBreakdown.team)||0)+(parseFloat(n.maxScoreBreakdown.additional)||0)+(parseFloat(n.maxScoreBreakdown.mcq)||0):parseFloat(n.maxScore)||FU,a=Hs.convertToBanglaNumber(s),o=n.description?`<p class="text-sm text-gray-600 dark:text-gray-400 mt-1">${Hs.truncateText(n.description,100)}</p>`:"",A=n.maxScoreBreakdown||{},l=`?????????: ?????-${Hs.convertToBanglaNumber(A.task??"N/A")}, ???-${Hs.convertToBanglaNumber(A.team??"N/A")}, ????????-${Hs.convertToBanglaNumber(A.additional??"N/A")}, MCQ-${Hs.convertToBanglaNumber(A.mcq??"N/A")}`,c=gx(n),u=ek[c]||ek.upcoming,h=`<span class="inline-flex items-center gap-1 rounded-full px-2.5 py-0.5 text-xs font-semibold ${u.badge}">
        <i class="fas fa-circle text-[6px]"></i>${u.label}
      </span>`;return`
        <div class="card p-4 space-y-4">
          <div class="flex flex-col lg:flex-row lg:items-start lg:justify-between gap-4">
            <div class="flex-grow" title="${l}">
              <div class="flex items-center gap-2 flex-wrap">
                <h4 class="text-lg font-semibold text-gray-900 dark:text-white">${Hs.ensureBengaliText(n.name)}</h4>
                ${h}
              </div>
              <p class="text-sm text-gray-500 dark:text-gray-400 mt-1">
                ?????: ${i} | ??? ???????? ?????: ${a}
              </p>
              ${o}
            </div>
            <div class="flex flex-col sm:flex-row lg:flex-col items-stretch sm:items-end gap-2">
              <label class="text-xs font-semibold text-gray-500 dark:text-gray-400"> </label>
              <select
                class="task-status-select form-input text-sm font-medium"
                data-id="${n.id}"
                data-current-status="${c}"
                aria-label="  "
              >
                ${MU(c)}
              </select>
              <div class="flex space-x-2 justify-end">
                <button data-id="${n.id}" class="edit-task-btn btn btn-light btn-sm py-1 px-2" aria-label="????????">
                  <i class="fas fa-edit pointer-events-none"></i>
                </button>
                <button data-id="${n.id}" class="delete-task-btn btn btn-danger btn-sm py-1 px-2" aria-label="?????">
                  <i class="fas fa-trash pointer-events-none"></i>
                </button>
              </div>
            </div>
          </div>
        </div>`}).join("");be.tasksListContainer.innerHTML=e}async function Oit(){var c,u,h,d,m,f,b,y,B;if(!(Do!=null&&Do.canWrite())){Ve.showToast("      ","warning");return}(c=be.taskTitleInput)==null||c.value.trim();const r=(u=be.taskDescriptionInput)==null?void 0:u.value.trim(),t=(h=be.taskDateInput)==null?void 0:h.value,e=(d=be.taskTimeInput)==null?void 0:d.value,n=Hb(e)||pu,i=PU(t,n),a=$0((m=be.taskStatusInput)==null?void 0:m.value)||px(i),o={task:parseFloat((f=be.maxTaskScoreInput)==null?void 0:f.value)||0,team:parseFloat((b=be.maxTeamScoreInput)==null?void 0:b.value)||0,additional:parseFloat((y=be.maxAdditionalScoreInput)==null?void 0:y.value)||0,mcq:parseFloat((B=be.maxMcqScoreInput)==null?void 0:B.value)||0},A=o.task+o.team+o.additional+o.mcq;if(!name){Ve.showToast("  ","warning");return}if(A<=0||Object.values(o).some(I=>I<0)){Ve.showToast("                ","warning");return}if(!date){Ve.showToast("   ","warning");return}Ve.showLoading("   ...");try{if(await To.checkTaskNameExists(name)){Ve.showToast("     ","warning"),Ve.hideLoading();return}}catch(I){Ve.showToast(`   : ${I.message}`,"error"),Ve.hideLoading();return}const l={name,description:r,date:i||t,scheduledTime:n,maxScore:A,maxScoreBreakdown:o,status:a,nameLower:name.toLowerCase()};Ve.showLoading("   ...");try{await To.addTask(l),await Ug.refreshAllData(),be.taskNameInput&&(be.taskNameInput.value=""),NU(Vc,""),be.taskDescriptionInput&&(be.taskDescriptionInput.value=""),be.taskDateInput&&(be.taskDateInput.value=""),be.taskTimeInput&&(be.taskTimeInput.value=pu),be.taskStatusInput&&(be.taskStatusInput.value="upcoming"),Ve.showToast("    ","success")}catch(I){Ve.showToast(`   : ${I.message}`,"error")}finally{Ve.hideLoading()}}function gx(r){return Hit(r==null?void 0:r.status,r==null?void 0:r.date)}function Hit(r,t){return UU.includes(r)?r:px(t)}function $0(r){return UU.includes(r)?r:null}function px(r){const t=DU(r);if(!t)return"upcoming";const e=new Date,n=new Date(t.getFullYear(),t.getMonth(),t.getDate()),i=new Date(e.getFullYear(),e.getMonth(),e.getDate());return n.getTime()===i.getTime()?"ongoing":n>i?"upcoming":"completed"}function DU(r){if(!r)return null;try{return typeof r.toDate=="function"?r.toDate():typeof r=="number"?new Date(r):new Date(r)}catch{return null}}function MU(r){return LU.map(t=>`<option value="${t.value}" ${t.value===r?"selected":""}>${t.label}</option>`).join("")}function Vit(r){if(!(Do!=null&&Do.canEdit())){Ve.showToast("     ","warning");return}const t=Md.get("tasks").find(l=>l.id===r);if(!t){Ve.showToast("  ","error");return}const e=t.maxScoreBreakdown||Vc,n=t.maxScoreBreakdown?(parseFloat(e.task)||0)+(parseFloat(e.team)||0)+(parseFloat(e.additional)||0)+(parseFloat(e.mcq)||0):t.maxScore||FU,i=Xf(t.date)||"",s=Rit(t),a=gx(t),o=`
        <div class="space-y-4">
            <div><label for="editTaskName" class="label"> *</label><input id="editTaskName" type="text" value="${t.name||""}" class="form-input" maxlength="100"></div>
            <fieldset class="border p-3 rounded dark:border-gray-600">
                 <legend class="text-sm font-medium px-1">  *</legend>
                 <div class="grid grid-cols-2 gap-3 mt-2">
                    <div><label for="editmaxTaskScoreInput" class="label text-xs"></label><input id="editmaxTaskScoreInput" type="number" min="0" step="any" value="${e.task??0}" class="form-input breakdown-input"></div>
                    <div><label for="editmaxTeamScoreInput" class="label text-xs"></label><input id="editmaxTeamScoreInput" type="number" min="0" step="any" value="${e.team??0}" class="form-input breakdown-input"></div>
                    <div><label for="editmaxAdditionalScoreInput" class="label text-xs"></label><input id="editmaxAdditionalScoreInput" type="number" min="0" step="any" value="${e.additional??0}" class="form-input breakdown-input"></div>
                    <div><label for="editmaxMcqScoreInput" class="label text-xs">MCQ</label><input id="editmaxMcqScoreInput" type="number" min="0" step="any" value="${e.mcq??0}" class="form-input breakdown-input"></div>
                 </div>
                 <p class="text-sm mt-3 text-gray-600 dark:text-gray-400">  : <strong id="edittotalMaxScoreDisplay">${Hs.convertToBanglaNumber(n)}</strong></p>
            </fieldset>
            <div><label for="editTaskDescription" class="label"></label><textarea id="editTaskDescription" class="form-input" rows="3">${t.description||""}</textarea></div>
            <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
              <div><label for="editTaskDate" class="label">?????*</label><input id="editTaskDate" type="date" value="${i}" class="form-input"></div>
              <div><label for="editTaskTime" class="label">???????? ()</label><input id="editTaskTime" type="time" value="${s}" class="form-input"></div>
            </div>
            <div><label for="editTaskStatus" class="label"></label><select id="editTaskStatus" class="form-input">
              ${MU(a)}
            </select></div>
        </div>`;Ve.showEditModal(" ",o,async()=>{var I,C,N,R,U,x,v,T,E;const l=(I=document.getElementById("editTaskName"))==null?void 0:I.value.trim(),c=(C=document.getElementById("editTaskDescription"))==null?void 0:C.value.trim(),u=(N=document.getElementById("editTaskDate"))==null?void 0:N.value,h=(R=document.getElementById("editTaskTime"))==null?void 0:R.value,d=Hb(h)||pu,m=PU(u,d),f=$0((U=document.getElementById("editTaskStatus"))==null?void 0:U.value)||px(m),b={task:parseFloat((x=document.getElementById("editmaxTaskScoreInput"))==null?void 0:x.value)||0,team:parseFloat((v=document.getElementById("editmaxTeamScoreInput"))==null?void 0:v.value)||0,additional:parseFloat((T=document.getElementById("editmaxAdditionalScoreInput"))==null?void 0:T.value)||0,mcq:parseFloat((E=document.getElementById("editmaxMcqScoreInput"))==null?void 0:E.value)||0},y=b.task+b.team+b.additional+b.mcq;if(!l||y<=0||!u||Object.values(b).some(_=>_<0)){Ve.showToast(",    (>=0)      ","warning");return}Ve.showLoading("  ...");try{if(await To.checkTaskNameExists(l,r)){Ve.showToast("    ","warning"),Ve.hideLoading();return}}catch(_){Ve.showToast(`   : ${_.message}`,"error"),Ve.hideLoading();return}const B={name:l,description:c,date:m||u,scheduledTime:d,maxScore:y,maxScoreBreakdown:b,status:f,nameLower:l.toLowerCase()};Ve.showLoading(" ...");try{await To.updateTask(r,B),await Ug.refreshAllData(),Ve.hideModal(Ve.elements.editModal),Ve.showToast("  ","success")}catch(_){Ve.showToast(` : ${_.message}`,"error")}finally{Ve.hideLoading()}});const A=Ve.elements.editModalContent;A&&(A.querySelectorAll(".breakdown-input").forEach(l=>{l.oninput=()=>V0("edit")}),V0("edit"))}async function $it(r){if(!(Do!=null&&Do.canDelete())){Ve.showToast("     ","warning");return}const t=Md.get("tasks").find(i=>i.id===r);if(!t){Ve.showToast("  ","error");return}const e=Md.get("evaluations").filter(i=>i.taskId===r);let n=`"${t.name}"    ?`;e.length>0&&(n+=`

(  ${Hs.convertToBanglaNumber(e.length)}    !)`),Ve.showDeleteModal(" ",n,async()=>{Ve.showLoading(" ...");try{if(e.length>0&&To.batchDeleteEvaluations)await To.batchDeleteEvaluations(e.map(i=>i.id));else if(e.length>0)for(const i of e)await To.deleteEvaluation(i.id);await To.deleteTask(r),await Ug.refreshAllData(),Ve.showToast("  ","success")}catch(i){Ve.showToast(` : ${i.message}`,"error")}finally{Ve.hideLoading()}})}async function jit(r){const t=r==null?void 0:r.dataset.id,e=$0(r==null?void 0:r.value),n=(r==null?void 0:r.dataset.currentStatus)||$0(r==null?void 0:r.value);if(!(!t||!e||e===n)){r.disabled=!0,Ve.showLoading("  ...");try{await To.updateTask(t,{status:e}),r.dataset.currentStatus=e,await Ug.refreshAllData(),Ve.showToast("  ","success")}catch(i){Ve.showToast(`  : ${i.message}`,"error"),n&&(r.value=n)}finally{r.disabled=!1,Ve.hideLoading()}}}function Git(r,t="  "){const e=Md.get("tasks");if(!e){console.warn("populateTaskSelects: Tasks not loaded yet.");return}const n=e.map(i=>({value:i.id,text:`${Hs.ensureBengaliText(i.name)} (${Hs.formatTimestamp(i.date)||"N/A"})`,date:Xf(i.date)})).sort((i,s)=>s.date.localeCompare(i.date));r.forEach(i=>{const s=document.getElementById(i);s?(Ve.populateSelect(s,n,t),s.options[0]&&s.options[0].value===""&&(s.options[0].disabled=!0)):console.warn(`populateTaskSelects: Element #${i} not found.`)})}let _s,ar,Jf,jr,Zf,Yh,Mo;const Ke={};let Vl=null,rc=null;const RU={task:20,team:15,additional:25,mcq:40},QU=100,Kit={"team-leader":{label:" ",className:"bg-amber-100 text-amber-700 border-amber-200 dark:bg-amber-500/20 dark:text-amber-100 dark:border-amber-500/40"},"time-keeper":{label:" ",className:"bg-sky-100 text-sky-700 border-sky-200 dark:bg-sky-500/20 dark:text-sky-100 dark:border-sky-500/40"},reporter:{label:"",className:"bg-purple-100 text-purple-700 border-purple-200 dark:bg-purple-500/20 dark:text-purple-100 dark:border-purple-500/40"},"resource-manager":{label:" ",className:"bg-emerald-100 text-emerald-700 border-emerald-200 dark:bg-emerald-500/20 dark:text-emerald-100 dark:border-emerald-500/40"},"peace-maker":{label:" ",className:"bg-rose-100 text-rose-700 border-rose-200 dark:bg-rose-500/20 dark:text-rose-100 dark:border-rose-500/40"}},rk={topic:[{id:"topic_none",text:"   ",marks:-5},{id:"topic_understood",text:" ",marks:5},{id:"topic_learned_well",text:"  ",marks:10}],options:[{id:"homework_done",text:"    ",marks:5},{id:"attendance_regular",text:"  ",marks:10}]};function zit(r){const t="inline-flex items-center px-2 py-0.5 text-xs font-semibold rounded-full border mt-1";if(!r)return`<span class="${t} bg-gray-100 text-gray-500 border-gray-200 dark:bg-gray-800 dark:text-gray-300 dark:border-gray-700">  </span>`;const e=Kit[r]||{label:jr!=null&&jr.ensureBengaliText?jr.ensureBengaliText(r):r,className:"bg-gray-100 text-gray-600 border-gray-200 dark:bg-gray-800 dark:text-gray-200 dark:border-gray-700"},n=e.label||(jr!=null&&jr.ensureBengaliText?jr.ensureBengaliText(r):r),i=e.className||"";return`<span class="${t} ${i}">${n}</span>`}function qit(r){return _s=r.managers.stateManager,ar=r.managers.uiManager,Jf=r.services.dataService,Mo=r.utils.permissionHelper,jr=r.utils,Zf=r.app,Yh=r.app.components.tasks,Yit(),Xit(),console.log(" Evaluation component initialized."),{render:Wit}}function Wit(){if(!Ke.page){console.error(" Evaluation render failed: Page element not found.");return}console.log("Rendering Evaluation page..."),Jit(),mx(),Vl||(ar.clearContainer(Ke.evaluationFormContainer),rc=null)}function Yit(){Ke.page=document.getElementById("page-evaluation"),Ke.page?(Ke.evaluationTaskSelect=Ke.page.querySelector("#evaluationTaskSelect"),Ke.evaluationGroupSelect=Ke.page.querySelector("#evaluationGroupSelect"),Ke.startEvaluationBtn=Ke.page.querySelector("#startEvaluationBtn"),Ke.evaluationFormContainer=Ke.page.querySelector("#evaluationForm"),Ke.evaluationListTableBody=Ke.page.querySelector("#evaluationListTable")):console.error(" Evaluation init failed: #page-evaluation element not found!")}function Xit(){Ke.page&&(ar.addListener(Ke.startEvaluationBtn,"click",Zit),ar.addListener(Ke.evaluationFormContainer,"submit",r=>{r.target&&r.target.id==="dynamicEvaluationForm"&&(r.preventDefault(),est())}),ar.addListener(Ke.evaluationFormContainer,"click",r=>{r.target&&r.target.id==="cancelEvaluationBtn"&&Vb()}),ar.addListener(Ke.evaluationFormContainer,"input",r=>{r.target&&(r.target.classList.contains("score-input")||r.target.classList.contains("criteria-input")||r.target.classList.contains("comments-input"))&&tst(r.target)}),ar.addListener(Ke.evaluationListTableBody,"click",r=>{const t=r.target.closest(".edit-evaluation-btn"),e=r.target.closest(".delete-evaluation-btn");t?rst(t.dataset.id):e&&nst(e.dataset.id)}))}function Jit(){var r,t,e;Yh!=null&&Yh.populateTaskSelects&&Yh.populateTaskSelects(["evaluationTaskSelect"],"  "),(r=Zf.components.groups)!=null&&r.populateGroupSelects&&Zf.components.groups.populateGroupSelects(["evaluationGroupSelect"],"  "),(t=Ke.evaluationTaskSelect)!=null&&t.options[0]&&(Ke.evaluationTaskSelect.options[0].disabled=!0),(e=Ke.evaluationGroupSelect)!=null&&e.options[0]&&(Ke.evaluationGroupSelect.options[0].disabled=!0)}async function Zit(){var a,o;const r=(a=Ke.evaluationTaskSelect)==null?void 0:a.value,t=(o=Ke.evaluationGroupSelect)==null?void 0:o.value;if(!r||!t){ar.showToast("      ","warning");return}const e=_s.get("tasks").find(A=>A.id===r),n=_s.get("groups").find(A=>A.id===t);if(!e||!n){ar.showToast("      ","error");return}if(!e.maxScoreBreakdown||e.maxScoreBreakdown.mcq===void 0){ar.showToast("    (task, team, additional, mcq)        ","error",5e3);return}rc=e.maxScoreBreakdown;const i=_s.get("students").filter(A=>A.groupId===t).sort((A,l)=>String(A.roll).localeCompare(String(l.roll),void 0,{numeric:!0}));if(i.length===0){ar.showToast("    ","warning");return}const s=_s.get("evaluations").find(A=>A.taskId===r&&A.groupId===t);s?await HU(s.id,e,n,i):(OU(e,n,i,null),Vl=null)}function OU(r,t,e,n=null){if(!Ke.evaluationFormContainer)return;const i=r.maxScoreBreakdown||RU,s=parseFloat(i.task)||0,a=parseFloat(i.team)||0,o=parseFloat(i.additional)||0,A=parseFloat(i.mcq)||0,l=r.maxScore||s+a+o+A;rc=i;let c=`
    <form id="dynamicEvaluationForm" class="card card-body space-y-6">
        <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center border-b pb-3 dark:border-gray-600">
             <h3 class="text-xl font-semibold text-gray-800 dark:text-white">
                 ${n?"":" "}: ${jr.ensureBengaliText(r.name)} - ${jr.ensureBengaliText(t.name)}
             </h3>
             <p class="text-sm text-gray-600 dark:text-gray-400 mt-1 sm:mt-0" title="-${s}, -${a}, -${o}, MCQ-${A}">
                   : ${jr.convertToBanglaNumber(l)}
             </p>
        </div>
        <div class="overflow-x-auto relative shadow-md sm:rounded-lg">
            <table class="w-full text-sm text-left text-gray-500 dark:text-gray-400">
                <thead class="text-xs text-gray-700 uppercase bg-gray-100 dark:bg-gray-700 dark:text-gray-300">
                    <tr>
                        <th scope="col" class="th w-1/12"></th>
                        <th scope="col" class="th w-2/12">  </th>
                        <th scope="col" class="th text-center w-1/12"> (${jr.convertToBanglaNumber(s)})</th>
                        <th scope="col" class="th text-center w-1/12"> (${jr.convertToBanglaNumber(a)})</th>
                        <th scope="col" class="th text-center w-1/12">MCQ (${jr.convertToBanglaNumber(A)})</th>
                        <th scope="col" class="th text-center w-4/12">  ( ${jr.convertToBanglaNumber(o)})</th>
                        <th scope="col" class="th text-center w-1/12"></th>
                        <th scope="col" class="th text-center w-1/12"> (${jr.convertToBanglaNumber(l)})</th>
                    </tr>
                </thead>
                <tbody>
    `;e.forEach((u,h)=>{const d=n?n[u.id]:null,m=h%2===0?"bg-white dark:bg-gray-800":"bg-gray-50 dark:bg-gray-700",f=(d==null?void 0:d.additionalCriteria)||{},b=f.topic||"",y=f.homework||!1,B=f.attendance||!1,I=(d==null?void 0:d.comments)||"";c+=`
            <tr class="${m} border-b dark:border-gray-600 student-row" data-student-id="${u.id}">
                <td class="td font-medium text-gray-900 dark:text-white">${jr.convertToBanglaNumber(u.roll)}</td>
                <td class="td">
                    <div class="font-semibold text-gray-900 dark:text-white">${jr.ensureBengaliText?jr.ensureBengaliText(u.name||""):u.name||""}</div>
                    ${zit(u.role)}
                </td>
                <td class="td"><input type="number" step="any" class="score-input task-score" min="0" max="${s}" data-max="${s}" value="${(d==null?void 0:d.taskScore)??""}" aria-label="${u.name} Task Score"></td>
                <td class="td"><input type="number" step="any" class="score-input team-score" min="0" max="${a}" data-max="${a}" value="${(d==null?void 0:d.teamScore)??""}" aria-label="${u.name} Team Score"></td>
                <td class="td"><input type="number" step="any" class="score-input mcq-score" min="0" max="${A}" data-max="${A}" value="${(d==null?void 0:d.mcqScore)??""}" aria-label="${u.name} MCQ Score"></td>
                <td class="td criteria-cell" data-max-additional="${o}">
                    <fieldset class="space-y-2">
                        <legend class="sr-only"> </legend>
                        ${rk.topic.map(C=>`
                            <label class="flex items-center text-xs space-x-2 cursor-pointer">
                                <input type="radio" name="topic-${u.id}" value="${C.id}" data-marks="${C.marks}" ${b===C.id?"checked":""} class="criteria-input">
                                <span>${C.text} (${C.marks>0?"+":""}${jr.convertToBanglaNumber(C.marks)})</span>
                            </label>
                        `).join("")}
                        <hr class="dark:border-gray-600 my-1">
                        ${rk.options.map(C=>`
                            <label class="flex items-center text-xs space-x-2 cursor-pointer">
                                <input type="checkbox" name="${C.id}-${u.id}" value="${C.id}" data-marks="${C.marks}" ${y&&C.id==="homework_done"?"checked":""} ${B&&C.id==="attendance_regular"?"checked":""} class="criteria-input">
                                <span>${C.text} (+${jr.convertToBanglaNumber(C.marks)})</span>
                            </label>
                        `).join("")}
                    </fieldset>
                </td>
                <td class="td"><textarea class="form-input text-xs p-1 comments-input" rows="3" placeholder="..." aria-label="${u.name} Comments">${I}</textarea></td>
                <td class="td text-center font-bold text-lg total-score-display dark:text-white" data-total-max="${l}">
                   ${(d==null?void 0:d.totalScore)!==void 0?jr.convertToBanglaNumber(parseFloat(d.totalScore).toFixed(2)):"0"}
                </td>
            </tr>
        `}),c+=`
                </tbody>
            </table>
            <style>
                .td { padding: 8px 6px; border: 1px solid #e5e7eb; vertical-align: top; }
                .dark .td { border-color: #4b5563; }
                .th { padding: 10px 6px; border: 1px solid #e5e7eb; vertical-align: middle; }
                .dark .th { border-color: #4b5563; }
                .score-input, .comments-input { width: 100%; min-width: 50px; padding: 4px; border: 1px solid #d1d5db; border-radius: 4px; text-align: center; background-color: white; }
                .dark .score-input, .dark .comments-input { background-color: #374151; border-color: #4b5563; color: white; }
                .score-input:focus, .comments-input:focus { border-color: #3b82f6; box-shadow: 0 0 0 1px #3b82f6; outline: none; }
                .criteria-cell { background-color: #f9fafb; }
                .dark .criteria-cell { background-color: rgba(31, 41, 55, 0.5); }
                .criteria-input { width: 1rem; height: 1rem; cursor: pointer; border: 1px solid #d1d5db; background-color: transparent; accent-color: #2563eb; }
                .dark .criteria-input { border-color: #4b5563; background-color: #1f2937; accent-color: #60a5fa; }
            </style>
        </div>
        <div class="flex justify-end space-x-3 pt-4 border-t dark:border-gray-600">
             <button type="button" id="cancelEvaluationBtn" class="btn btn-light"></button>
             <button type="submit" class="btn btn-primary">${n?" ":" "}</button>
        </div>
    </form>
    `,Ke.evaluationFormContainer.innerHTML=c}function tst(r){const t=r.closest(".student-row");if(!t)return;const e=t.querySelector(".total-score-display"),n=parseFloat((e==null?void 0:e.dataset.totalMax)||QU),i=rc||RU,s=parseFloat(i.task)||0,a=parseFloat(i.team)||0,o=parseFloat(i.additional)||0,A=parseFloat(i.mcq)||0,l=t.querySelector(".task-score"),c=t.querySelector(".team-score"),u=t.querySelector(".mcq-score"),h=(C,N)=>{if(!C)return 0;let R=C.value===""?null:parseFloat(C.value);return R!==null&&(isNaN(R)||R<0?(R=0,C.value=0):R>N&&(R=N,C.value=N,ar.showToast(`  ${jr.convertToBanglaNumber(N)}`,"warning",1500))),R||0},d=h(l,s),m=h(c,a),f=h(u,A);let b=0;const y=t.querySelector('input[type="radio"]:checked');y&&(b+=parseFloat(y.dataset.marks)||0),t.querySelectorAll('input[type="checkbox"]:checked').forEach(C=>{b+=parseFloat(C.dataset.marks)||0}),b=Math.min(Math.max(b,-5),o);const B=d+m+f+b,I=Math.min(Math.max(B,0),n);e&&(e.textContent=jr.convertToBanglaNumber(I.toFixed(2)))}function Vb(){ar.clearContainer(Ke.evaluationFormContainer),Vl=null,rc=null,Ke.evaluationTaskSelect&&(Ke.evaluationTaskSelect.selectedIndex=0),Ke.evaluationGroupSelect&&(Ke.evaluationGroupSelect.selectedIndex=0),ar.showToast("   ","info")}async function est(){var b,y,B,I;if(!(Mo!=null&&Mo.canWrite())){ar.showToast(" evaluation submit   ","warning");return}const r=(b=Ke.evaluationTaskSelect)==null?void 0:b.value,t=(y=Ke.evaluationGroupSelect)==null?void 0:y.value,e=_s.get("tasks").find(C=>C.id===r);if(!e||!t||!rc){ar.showToast(" , ,      ","error");return}const{task:n,team:i,additional:s,mcq:a}=rc,o=e.maxScore||QU,A={};let l=!0,c=0,u=0;if((B=Ke.evaluationFormContainer)==null||B.querySelectorAll(".student-row").forEach(C=>{var X,At;const N=C.dataset.studentId;if(!N){l=!1;return}const R=C.querySelector(".task-score"),U=C.querySelector(".team-score"),x=C.querySelector(".mcq-score"),v=((X=C.querySelector(".comments-input"))==null?void 0:X.value.trim())||"",T=C.querySelector('input[type="radio"]:checked'),E=C.querySelector('input[type="checkbox"][value="homework_done"]'),_=C.querySelector('input[type="checkbox"][value="attendance_regular"]'),F=R==null?void 0:R.value,k=U==null?void 0:U.value,Z=x==null?void 0:x.value;if(F===""&&k===""&&Z===""&&!T&&!(E!=null&&E.checked)&&!(_!=null&&_.checked)){C.style.outline="";return}const nt=parseFloat(F),j=parseFloat(k),G=parseFloat(Z);let pt=0;const q={topic:(T==null?void 0:T.value)||null,homework:(E==null?void 0:E.checked)||!1,attendance:(_==null?void 0:_.checked)||!1};T&&(pt+=parseFloat(T.dataset.marks)||0),E!=null&&E.checked&&(pt+=parseFloat(E.dataset.marks)||0),_!=null&&_.checked&&(pt+=parseFloat(_.dataset.marks)||0),pt=Math.min(Math.max(pt,-5),s);let L=!0;if((isNaN(nt)||nt<0||nt>n)&&(L=!1),(isNaN(j)||j<0||j>i)&&(L=!1),(isNaN(G)||G<0||G>a)&&(L=!1),T||(L=!1),L)C.style.outline="";else{l=!1,C.style.outline="2px solid red",ar.showToast(` ${((At=C.querySelector("td:nth-child(2)"))==null?void 0:At.textContent)||N}     /`,"warning",2500);return}const O=parseFloat((nt+j+G+pt).toFixed(2)),V=Math.min(Math.max(O,0),o);A[N]={taskScore:nt,teamScore:j,additionalScore:pt,mcqScore:G,totalScore:V,additionalCriteria:q,comments:v},u+=V,c++}),!l){ar.showToast("        ","error");return}if(c===0){ar.showToast("       ","warning");return}const h=u/c,d=o>0?h/o*100:0,m={taskId:r,groupId:t,taskName:e.name,groupName:((I=_s.get("groups").find(C=>C.id===t))==null?void 0:I.name)||"Unknown",scores:A,studentCount:c,groupTotalScore:u,groupAverageScore:d,maxPossibleScore:o,evaluationDate:hu(),taskDate:e.date},f=Vl?"":"";ar.showLoading(` ${f} ...`);try{Vl?(delete m.evaluationDate,await Jf.updateEvaluation(Vl,m)):await Jf.addEvaluation(m),await Zf.refreshAllData(),Vb(),ar.showToast(` ${f} `,"success"),mx()}catch(C){console.error(` Error ${f}ing evaluation:`,C),ar.showToast(` ${f}  : ${C.message}`,"error")}finally{ar.hideLoading()}}function mx(){if(!Ke.evaluationListTableBody)return;const r=_s.get("evaluations"),t=new Map(_s.get("tasks").map(n=>[n.id,n])),e=new Map(_s.get("groups").map(n=>[n.id,n.name]));if(r.sort((n,i)=>(i.taskDate||"").localeCompare(n.taskDate||"")),ar.clearContainer(Ke.evaluationListTableBody),r.length===0){const n=Ke.evaluationListTableBody.insertRow();n.innerHTML='<td colspan="5" class="placeholder-content p-4">    </td>';return}r.forEach(n=>{const i=t.get(n.taskId),s=(i==null?void 0:i.name)||n.taskName||"",a=e.get(n.groupId)||n.groupName||"",o=n.taskDate?jr.formatTimestamp(n.taskDate):"N/A",A=n.groupAverageScore!==void 0?n.groupAverageScore:null,l=A!==null&&!isNaN(A)?`${jr.convertToBanglaNumber(A.toFixed(1))}%`:"N/A",c=A!==null&&!isNaN(A)?jr.getPerformanceColorClass(A):"",u=Ke.evaluationListTableBody.insertRow();u.className="border-b dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700/50",u.innerHTML=`
            <td class="td p-3">${s}</td> <td class="td p-3">${a}</td> <td class="td p-3">${o}</td>
            <td class="td p-3 text-center font-semibold ${c}">${l}</td>
            <td class="td p-3 text-center whitespace-nowrap">
                <button data-id="${n.id}" class="edit-evaluation-btn btn btn-light btn-sm p-1 mx-1" aria-label=""><i class="fas fa-edit pointer-events-none"></i></button>
                <button data-id="${n.id}" class="delete-evaluation-btn btn btn-danger btn-sm p-1 mx-1" aria-label=""><i class="fas fa-trash pointer-events-none"></i></button>
            </td>`})}async function HU(r,t,e,n){var i;ar.showLoading("   ...");try{const s=await Jf.getEvaluationById(r);if(!s||!s.scores)throw new Error("    ");OU(t,e,n,s.scores),Vl=r,(i=Ke.evaluationFormContainer)==null||i.scrollIntoView({behavior:"smooth",block:"start"})}catch(s){console.error(" Error loading evaluation for edit:",s),ar.showToast(`   : ${s.message}`,"error"),Vb()}finally{ar.hideLoading()}}async function rst(r){if(!(Mo!=null&&Mo.canEdit())){ar.showToast(" evaluation    ","warning");return}const t=_s.get("evaluations").find(s=>s.id===r);if(!t){ar.showToast("   ","error");return}const e=_s.get("tasks").find(s=>s.id===t.taskId),n=_s.get("groups").find(s=>s.id===t.groupId);if(!e){ar.showToast("     ","error");return}if(!n){ar.showToast("     ","error");return}if(!e.maxScoreBreakdown||e.maxScoreBreakdown.mcq===void 0){ar.showToast("          ","error",5e3);return}rc=e.maxScoreBreakdown;const i=_s.get("students").filter(s=>s.groupId===t.groupId).sort((s,a)=>String(s.roll).localeCompare(String(a.roll),void 0,{numeric:!0}));if(i.length===0){ar.showToast("     ","warning");return}Ke.evaluationTaskSelect&&(Ke.evaluationTaskSelect.value=t.taskId),Ke.evaluationGroupSelect&&(Ke.evaluationGroupSelect.value=t.groupId),await HU(r,e,n,i)}function nst(r){if(!(Mo!=null&&Mo.canDelete())){ar.showToast(" evaluation    ","warning");return}const t=_s.get("evaluations").find(s=>s.id===r);if(!t){ar.showToast("   ","error");return}const e=t.taskName||" ",n=t.groupName||" ",i=`   "${e}"   "${n}"     ?`;ar.showDeleteModal(" ",i,async()=>{ar.showLoading(" ...");try{await Jf.deleteEvaluation(r),await Zf.refreshAllData(),mx(),Vl===r&&Vb(),ar.showToast("   ","success")}catch(s){ar.showToast(` : ${s.message}`,"error")}finally{ar.hideLoading()}})}let VU,ma,sn,$U;const Bn={},Ga={active:"students"},FA={name:"",roll:""},Gs={rankedStudents:[],rankedGroups:[],groups:[],students:[]},jU=1;function ist(){if(document.getElementById("ranking-soft3d-styles"))return;const r=document.createElement("style");r.id="ranking-soft3d-styles",r.textContent=`
  /* ---------- Global soft page vibe ---------- */
  .rk-soft-page{
    --rk-page-start:#f8fafc;
    --rk-page-mid:#eef2ff;
    --rk-page-end:#ffffff;
    background: radial-gradient(120% 140% at 10% -10%, var(--rk-page-start) 0%, var(--rk-page-mid) 42%, var(--rk-page-end) 100%);
    background-attachment: fixed;
  }
  .dark .rk-soft-page{
    --rk-page-start:#0b1220; --rk-page-mid:#0f172a; --rk-page-end:#111827;
    background: radial-gradient(120% 140% at 10% -10%, var(--rk-page-start) 0%, var(--rk-page-mid) 52%, var(--rk-page-end) 100%);
    background-attachment: fixed;
  }

  .rk-surface{
    --rk-bg:#fff;
    border-radius: 1rem;
    background-color: var(--rk-bg);
    box-shadow:
      8px 8px 20px rgba(0,0,0,.08),
      -6px -6px 16px rgba(255,255,255,.70),
      inset 0 1px 0 rgba(255,255,255,.45);
  }
  .dark .rk-surface{
    --rk-bg: rgba(17,24,39,.92);
    box-shadow:
      10px 10px 26px rgba(0,0,0,.45),
      -6px -6px 14px rgba(255,255,255,.06),
      inset 0 1px 0 rgba(255,255,255,.08);
  }

  .rk-chip{
    border-radius: .65rem;
    background: rgba(255,255,255,.85);
    border: 1px solid rgba(0,0,0,.06);
    box-shadow: 0 1px 0 rgba(255,255,255,.60) inset, 0 2px 6px rgba(0,0,0,.06);
    color: var(--rk-chip-fg, var(--rk-card-fg, #0f172a));
    white-space: nowrap;
  }
  .dark .rk-chip{
    background: rgba(255,255,255,.06);
    border: 1px solid rgba(255,255,255,.08);
    --rk-chip-fg: #f8fafc;
    box-shadow: inset 0 1px 0 rgba(255,255,255,.08), 0 2px 6px rgba(0,0,0,.35);
  }

  .rk-card{
    --rk-card-bg: var(--rk-bg, #fff);
    position: relative;
    border-radius: .9rem;
    background: var(--rk-card-bg);
    color: var(--rk-card-fg, #0f172a);
    border: 1px solid rgba(0,0,0,.06);
    box-shadow:
      6px 6px 16px rgba(0,0,0,.08),
      -4px -4px 12px rgba(255,255,255,.70),
      inset 0 1px 0 rgba(255,255,255,.45);
    transition: transform .2s ease, box-shadow .2s ease, background .25s ease;
  }
  .rk-card:hover{ transform: translateY(-1px); }
  .dark .rk-card{
    --rk-card-bg: rgba(15,23,42,.92);
    --rk-card-fg: #e2e8f0;
    border-color: rgba(255,255,255,.08);
    box-shadow:
      10px 10px 24px rgba(0,0,0,.45),
      -6px -6px 14px rgba(255,255,255,.06),
      inset 0 1px 0 rgba(255,255,255,.08);
  }

  .ranking-card{
    background: var(--rk-card-bg, #fdfefe);
    color: var(--rk-card-fg, #0f172a);
  }
  .dark .ranking-card{
    --rk-card-bg: rgba(13,20,34,.92);
    --rk-card-fg: #e2e8f0;
    border-color: rgba(255,255,255,.08);
  }
  .ranking-card *{
    color: inherit;
  }

  /* Accent border + glow (driven by --rk-grad/--rk-accent/--rk-glow) */
  .rk-card[data-accent]{
    border: 1px solid transparent;
    background-image:
      linear-gradient(var(--rk-card-bg), var(--rk-card-bg)),
      var(--rk-grad, linear-gradient(90deg,#e5e7eb,#e5e7eb));
    background-origin: border-box;
    background-clip: padding-box, border-box;
  }
  .rk-card[data-accent]::after{
    content:""; position:absolute; inset:-6px; z-index:-1; border-radius:inherit;
    background: radial-gradient(60% 60% at 50% -10%, var(--rk-accent, #94a3b8) 0%, transparent 60%);
    filter: blur(16px); opacity:.18; pointer-events:none;
  }
  .dark .rk-card[data-accent]::after{ opacity:.28; }

  .rk-meter-outer{
    box-shadow: inset 0 1px 0 rgba(255,255,255,.6), 0 8px 18px var(--rk-glow, rgba(0,0,0,.10));
  }

  .rk-micro{ font-size: 11px; line-height: 1.1; }

  /* -------- Pretty, soft badges for Branch & Role -------- */
  .rk-badges{
    display: grid;
    grid-template-columns: repeat(2, minmax(0, 1fr)); /* mobile: 2 columns */
    gap: .35rem;
    margin-top: .45rem;

  }
  .rk-badge{
    display:inline-flex; align-items:center; justify-content:center; gap:.35rem;
    padding:.32rem .50rem; border-radius:.65rem;
    border:1px solid var(--rk-badge-border, rgba(0,0,0,.06));
    background: var(--rk-badge-bg, rgba(255,255,255,.85));
    color: var(--rk-badge-fg, #0f172a);
    font-weight:600; font-size:11px;
    box-shadow: 0 1px 0 rgba(255,255,255,.60) inset, 0 2px 6px var(--rk-badge-glow, rgba(0,0,0,.05));
    white-space: nowrap;
    min-width: 0;
    text-align: center;
  }
  .dark .rk-badge{
    border-color: var(--rk-badge-border-dark, rgba(255,255,255,.12));
    background: var(--rk-badge-bg-dark, rgba(255,255,255,.08));
    color: var(--rk-badge-fg-dark, #f8fafc);
    box-shadow: inset 0 1px 0 rgba(255,255,255,.10), 0 2px 8px var(--rk-badge-glow-dark, rgba(0,0,0,.45));
  }
  .rk-badge i{ font-size: 11px; }
  .rk-badge--compact{ padding:.28rem .45rem; font-size:10px; }

  @media (min-width: 640px){
    .rk-badges{ display:flex; flex-wrap:wrap; gap:.4rem; }
    .rk-badge{ padding:.46rem .66rem; font-size:12px; }
    .rk-badge i{ font-size:12px; }
  }

  /* -------- Tabs -------- */
  .rk-tabbar{
    display:flex; flex-wrap:wrap; gap:.6rem; align-items:center; justify-content:space-between;
    padding:.6rem; border-radius:.9rem;
    background: color-mix(in srgb, var(--rk-bg) 88%, transparent);
    backdrop-filter: blur(6px);
  }
  .rk-tabs{
    display:flex; gap:.4rem; align-items:center;
    padding:.25rem; border-radius:999px;
    background: linear-gradient(180deg, rgba(0,0,0,.03), rgba(0,0,0,0));
    border:1px solid rgba(0,0,0,.06);
    box-shadow: 0 1px 0 rgba(255,255,255,.5) inset;
  }
  .dark .rk-tabs{ border-color: rgba(255,255,255,.10); background: rgba(255,255,255,.04); }

  .rk-tab{
    position:relative; border:0; background:transparent; cursor:pointer;
    padding:.55rem .85rem; border-radius:999px; font-weight:600; font-size:14px;
    color: #0f172a;
  }
  .dark .rk-tab{ color:#e5e7eb; }

  .rk-tab[aria-selected="true"]{
    color:white;
    background: var(--rk-grad, linear-gradient(90deg,#0ea5e9,#7dd3fc));
    box-shadow: 0 6px 14px var(--rk-glow, rgba(14,165,233,.25));
  }

  .rk-tab-search{ display:flex; gap:.5rem; width:100%; max-width:560px; }
  .rk-input{
    flex:1 1 auto;
    padding:.55rem .75rem; border-radius:.7rem;
    border:1px solid rgba(0,0,0,.08);
    background: rgba(255,255,255,.85);
    color:#0f172a; font-size: 14px; outline: none;
  }
  .rk-input::placeholder{ color:#94a3b8; }
  .rk-input:focus{ border-color: rgba(14,165,233,.45); box-shadow: 0 0 0 3px rgba(14,165,233,.12); }
  .rk-input:disabled{ opacity:.55; cursor:not-allowed; }

  .dark .rk-input{ background: rgba(255,255,255,.06); border-color: rgba(255,255,255,.10); color:#e5e7eb; }
  .dark .rk-input:focus{ border-color: rgba(14,165,233,.55); box-shadow: 0 0 0 3px rgba(14,165,233,.22); }
  `,document.head.appendChild(r)}function sst(){const r=document.body||document.documentElement;r&&!r.classList.contains("rk-soft-page")&&r.classList.add("rk-soft-page")}function ast(r){return VU=r.managers.stateManager,ma=r.managers.uiManager,r.services.dataService,sn=r.utils,$U=r.app,ist(),sst(),Ast(),lst(),console.log(" Ranking component initialized."),{render:ost}}function ost(){if(!Bn.page){console.error(" Ranking render failed: Page element not found.");return}console.log("Rendering Student Ranking page..."),ma.showLoading("   ...");try{const{students:r,evaluations:t,tasks:e,groups:n}=VU.getState();if(!r||!t||!e){ma.displayEmptyMessage(Bn.studentRankingListContainer,"     ...");return}const i=cst(r,t,e),s=ust(r,t,n||[]);Gs.rankedStudents=i,Gs.rankedGroups=s,Gs.groups=n||[],Gs.students=r||[],FA.name="",FA.roll="",Ga.active="students",bx(i,s,n||[],r)}catch(r){console.error(" Error rendering student ranking:",r),ma.displayEmptyMessage(Bn.studentRankingListContainer,"     ")}finally{ma.hideLoading()}}function Ast(){Bn.page=document.getElementById("page-student-ranking"),Bn.page?(Bn.refreshRankingBtn=Bn.page.querySelector("#refreshRanking"),Bn.studentRankingListContainer=Bn.page.querySelector("#studentRankingList")):console.error(" Ranking init failed: #page-student-ranking element not found!")}function lst(){Bn.page&&(ma.addListener(Bn.refreshRankingBtn,"click",async()=>{ma.showLoading("   ...");try{await $U.refreshAllData()}catch(r){console.error(" Error refreshing ranking data:",r),ma.showToast("    ","error")}}),ma.addListener(Bn.studentRankingListContainer,"click",r=>{const t=r.target.closest("[data-student-id]");if(t&&typeof window<"u"&&typeof window.openStudentModalById=="function"){const n=t.getAttribute("data-student-id");if(n){r.preventDefault();try{window.openStudentModalById(n)}catch{}return}}const e=r.target.closest("[data-group-id]");if(e&&typeof window<"u"&&typeof window.openGroupModalById=="function"){const n=e.getAttribute("data-group-id");if(n){r.preventDefault();try{window.openGroupModalById(n)}catch{}}}}))}function cst(r,t,e){if(!r||!t||!e)return[];const n={};t.forEach(s=>{const a=parseFloat(s.maxPossibleScore)||60,o=GU(s.taskDate||s.updatedAt||s.evaluationDate||s.createdAt),A=s.scores||{};Object.entries(A).forEach(([l,c])=>{n[l]||(n[l]={evalCount:0,totalScore:0,maxScoreSum:0,latestMs:null});const u=parseFloat(c.totalScore)||0,h=n[l];h.evalCount+=1,h.totalScore+=u,h.maxScoreSum+=a,o&&(h.latestMs=h.latestMs?Math.max(h.latestMs,o):o)})});const i=r.map(s=>{const a=n[s.id];if(!a||a.evalCount<jU)return null;const o=a.maxScoreSum>0?a.totalScore/a.maxScoreSum*100:0;return{student:s,evalCount:a.evalCount,totalScore:a.totalScore,maxScoreSum:a.maxScoreSum,efficiency:o,latestEvaluationMs:a.latestMs||null,rank:0}}).filter(Boolean).sort((s,a)=>a.efficiency!==s.efficiency?a.efficiency-s.efficiency:a.evalCount!==s.evalCount?a.evalCount-s.evalCount:a.totalScore!==s.totalScore?a.totalScore-s.totalScore:a.maxScoreSum!==s.maxScoreSum?a.maxScoreSum-s.maxScoreSum:(a.latestEvaluationMs||0)-(s.latestEvaluationMs||0));return i.forEach((s,a)=>s.rank=a+1),i}function ust(r,t,e){if(!r||!t)return[];const n=new Map((e||[]).map(A=>[A.id,A.name||""])),i=new Map((r||[]).map(A=>[A.id,A.groupId||"__none"])),s={};(r||[]).forEach(A=>{const l=A.groupId||"__none";s[l]=(s[l]||0)+1});const a={};t.forEach(A=>{const l=parseFloat(A.maxPossibleScore)||60,c=GU(A.taskDate||A.updatedAt||A.evaluationDate||A.createdAt),u=A.scores||{},h=new Set;Object.entries(u).forEach(([d,m])=>{const f=i.get(d)||"__none";a[f]||(a[f]={evalCount:0,totalScore:0,maxScoreSum:0,latestMs:null,participants:new Set});const b=parseFloat(m.totalScore)||0,y=a[f];h.has(f)||(y.evalCount+=1,h.add(f)),y.totalScore+=b,y.maxScoreSum+=l,y.participants.add(d),c&&(y.latestMs=y.latestMs?Math.max(y.latestMs,c):c)})});const o=Object.entries(a).map(([A,l])=>{if(l.evalCount<jU)return null;const c=l.maxScoreSum>0?l.totalScore/l.maxScoreSum*100:0,u=s[A]||0,h=l.participants.size,d=Math.max(0,u-h);return{groupId:A,groupName:n.get(A)||" ",evalCount:l.evalCount,totalScore:l.totalScore,maxScoreSum:l.maxScoreSum,efficiency:c,latestEvaluationMs:l.latestMs||null,participantsCount:h,groupSize:u,remainingCount:d,rank:0}}).filter(Boolean).sort((A,l)=>l.efficiency!==A.efficiency?l.efficiency-A.efficiency:l.evalCount!==A.evalCount?l.evalCount-A.evalCount:l.totalScore!==A.totalScore?l.totalScore-A.totalScore:l.maxScoreSum!==A.maxScoreSum?l.maxScoreSum-A.maxScoreSum:(l.latestEvaluationMs||0)-(A.latestEvaluationMs||0));return o.forEach((A,l)=>A.rank=l+1),o}function bx(r,t,e,n,i={}){if(!Bn.studentRankingListContainer)return;const s=!!(i!=null&&i.onlyUpdateStudents);let a=null;if(s&&(a=Bn.studentRankingListContainer.querySelector("[data-student-cards]"),!a))return;const o=new Map((e||[]).map(N=>[N.id,N.name])),A=N=>{const R=(Number(N)||0).toFixed(2);return sn!=null&&sn.convertToBanglaNumber?sn.convertToBanglaNumber(R):R},l=N=>{const R=`${Math.round(Number(N)||0)}`;return sn!=null&&sn.convertToBanglaNumber?sn.convertToBanglaNumber(R):R},c=N=>{const R=(N??"").toString();return sn!=null&&sn.convertToBanglaNumber?sn.convertToBanglaNumber(R):R},u=r&&r[0]||null,h=t&&t[0]||null,d=Ga.active==="students"?lm(u?u.efficiency:70):lm(h?h.efficiency:70),m=Ga.active!=="students",f=Nc(FA.name),b=Nc(FA.roll),y=`
    <div class="rk-tabbar rk-surface" style="--rk-accent:${d.solid}; --rk-grad:${d.grad}; --rk-glow:${d.shadow};">
      <div class="rk-tabs">
        <button class="rk-tab" data-tab="students" aria-selected="${Ga.active==="students"}"> </button>
        <button class="rk-tab" data-tab="groups" aria-selected="${Ga.active==="groups"}"> </button>
      </div>
      <div class="rk-tab-search">
        <input id="studentSearchName" type="text" class="rk-input" placeholder="  "
          value="${f}" ${m?"disabled":""} />
        <input id="studentSearchRoll" type="text" inputmode="numeric" autocomplete="off"
          class="rk-input" placeholder=" ()" value="${b}" ${m?"disabled":""} />
      </div>
    </div>
  `,B=r&&r.length?(Ga.active==="students"?gst(r):r).map(N=>{const R=N.student,U=Ak(N.rank),x=A(N.efficiency),v=l(N.evalCount),T=lm(N.efficiency),E=o.get(R.groupId)||" ",_=`: ${c(R.roll||"")}  : ${Nc(E)}`,F=yst(R.academicGroup),k=bst(R.role),Z=sk(F,R.academicGroup||" "),ut=sk(k,mst(R.role));return`
        <article class="ranking-card rk-card p-4 flex items-center gap-3 justify-between"
          data-student-id="${R.id}" data-accent
          style="--rk-accent:${T.solid}; --rk-grad:${T.grad}; --rk-glow:${T.shadow};">
          
          <div class="flex items-start gap-3 min-w-0">
            <div class="rk-chip px-3 py-2 text-center shrink-0">
              <div class="text-sm font-bold">${U}</div>
              <div class="rk-micro text-gray-500 dark:text-gray-400"></div>
            </div>
            <div class="min-w-0">
              <div class="flex items-center gap-2 min-w-0">
                <h4 class="font-semibold truncate" title="${Am(R.name)}">${Am(R.name)}</h4>
              </div>

              <p class="rk-micro mt-1 text-gray-600 dark:text-gray-300 truncate" title="${Nc(_)}">${_}</p>

              <div class="rk-badges">
                ${Z}
                ${ut}
              </div>

              <div class="flex gap-4 sm:gap-8 mt-2 text-[10px] sm:text-sm font-semibold">
                <div class="hidden sm:flex">: ${x}%</div>
                <div class=""> : ${v} </div>
              </div>
             
            </div>
          </div>

          <div class="flex flex-col items-center gap-1 shrink-0">
            ${ok(N.efficiency,T,ak())}
            <span class="rk-micro text-gray-500 dark:text-gray-400">Avg%</span>
          </div>
        </article>`}).join(""):'<div class="rk-card p-4 text-center text-gray-600 dark:text-gray-300">   </div>',I=t&&t.length?t.map(N=>{const R=Ak(N.rank),U=A(N.efficiency),x=l(N.evalCount),v=lm(N.efficiency),T=` : ${l(N.groupSize)}    : ${l(N.participantsCount)}   : ${l(N.remainingCount)}`;return`
        <article class="rk-card p-4 flex items-center gap-3 justify-between"
          data-accent${N.groupId&&N.groupId!=="__none"?` data-group-id="${Nc(N.groupId)}"`:""} style="--rk-accent:${v.solid}; --rk-grad:${v.grad}; --rk-glow:${v.shadow};">
          
          <div class="flex items-start gap-3 min-w-0">
            <div class="rk-chip px-3 py-2 text-center shrink-0">
              <div class="text-sm font-bold">${R}</div>
              <div class="rk-micro text-gray-500 dark:text-gray-400"> </div>
            </div>
            <div class="min-w-0">
              <h4 class="font-semibold truncate" title="${Am(N.groupName)}">${Am(N.groupName)}</h4>
              <div class="mt-1 grid grid-cols-2 gap-2 text-[12px] font-semibold">
                <div class="rk-chip px-2 py-1">: ${U}%</div>
                <div class="rk-chip px-2 py-1"> : ${x} </div>
              </div>
              <p class="rk-micro mt-2 text-gray-600 dark:text-gray-300 truncate" title="${T}">${T}</p>
            </div>
          </div>

          <div class="flex flex-col items-center gap-1 shrink-0">
            ${ok(N.efficiency,v,ak())}
            <span class="rk-micro text-gray-500 dark:text-gray-400">Avg%</span>
          </div>
        </article>`}).join(""):'<div class="rk-card p-4 text-gray-700 dark:text-gray-300">      </div>',C=Ga.active==="students"?`<div class="grid gap-4 grid-cols-1" data-student-cards>${B}</div>`:`<div class="grid gap-4 grid-cols-1">${I}</div>`;if(s&&a){a.innerHTML=B;return}ma.clearContainer(Bn.studentRankingListContainer),Bn.studentRankingListContainer.innerHTML=`
    <div class="space-y-4" style="--rk-accent:${d.solid}; --rk-grad:${d.grad}; --rk-glow:${d.shadow};">
      ${y}
      ${C}
    </div>
  `,dst(),hst()}function dst(){if(!Bn.studentRankingListContainer)return;const r=Bn.studentRankingListContainer;Array.from(r.querySelectorAll(".rk-tab")).forEach(e=>{ma.addListener(e,"click",()=>{const n=e.getAttribute("data-tab");!n||n!=="students"&&n!=="groups"||Ga.active!==n&&(Ga.active=n,bx(Gs.rankedStudents,Gs.rankedGroups,Gs.groups,Gs.students,{onlyUpdateStudents:!1}))})})}function hst(){if(!Bn.studentRankingListContainer)return;const r=Bn.studentRankingListContainer.querySelector("#studentSearchName"),t=Bn.studentRankingListContainer.querySelector("#studentSearchRoll"),e=Ga.active==="students";r&&(Bn.studentSearchNameInput=r,r.disabled=!e,ma.addListener(r,"input",n=>{e&&nk("name",n.target.value||"")})),t&&(Bn.studentSearchRollInput=t,t.disabled=!e,ma.addListener(t,"input",n=>{e&&nk("roll",n.target.value||"")}))}function nk(r,t){if(!Object.prototype.hasOwnProperty.call(FA,r))return;const e=typeof t=="string"?t:(t==null?void 0:t.toString())||"";FA[r]!==e&&(FA[r]=e,fst())}function fst(){Ga.active==="students"&&(!Gs.rankedStudents||Gs.rankedStudents.length===0||bx(Gs.rankedStudents,Gs.rankedGroups,Gs.groups,Gs.students,{onlyUpdateStudents:!0}))}function gst(r=[]){const t=(FA.name||"").trim().toLowerCase(),e=ik(FA.roll);return!t&&!e?r:r.filter(n=>{if(!(n!=null&&n.student))return!1;const i=n.student;if(t&&!(i.name||"").toString().toLowerCase().includes(t))return!1;if(e){const s=ik(i.roll);if(!s||s!==e)return!1}return!0})}const pst={"":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9"};function ik(r){return r==null?"":r.toString().trim().replace(/\s+/g,"").replace(/[-]/g,t=>pst[t]||t)}function Am(r){if(r==null)return"";const t=sn!=null&&sn.ensureBengaliText&&typeof sn.ensureBengaliText=="function"?sn.ensureBengaliText(r):String(r);return Nc(t.trim())}function Nc(r){return String(r).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function lm(r){const t=Number(r)||0;return t>=85?{name:"green",solid:"#16a34a",shadow:"rgba(22,163,74,.35)",grad:"linear-gradient(90deg,#16a34a 0%,#22c55e 40%,#86efac 100%)"}:t>=70?{name:"sky",solid:"#0284c7",shadow:"rgba(2,132,199,.30)",grad:"linear-gradient(90deg,#0284c7 0%,#0ea5e9 40%,#7dd3fc 100%)"}:t>=55?{name:"amber",solid:"#d97706",shadow:"rgba(217,119,6,.35)",grad:"linear-gradient(90deg,#d97706 0%,#f59e0b 40%,#facc15 100%)"}:{name:"rose",solid:"#e11d48",shadow:"rgba(225,29,72,.40)",grad:"linear-gradient(90deg,#e11d48 0%,#f43f5e 40%,#fb7185 100%)"}}function mst(r){const t={"team-leader":" ","time-keeper":" ",reporter:"","resource-manager":" ","peace-maker":" "},e=(r||"").toString().trim();return t[e]||e||" "}function bst(r){const t=(r||"").toString().trim(),e={"team-leader":{icon:"fa-crown",bg:"rgba(251, 191, 36, .18)",fg:"#92400e",border:"rgba(245, 158, 11, .35)",glow:"rgba(251, 191, 36, .28)",darkBg:"rgba(245, 158, 11, .22)",darkFg:"#fde68a",darkBorder:"rgba(251, 191, 36, .45)",darkGlow:"rgba(251, 191, 36, .38)"},"time-keeper":{icon:"fa-stopwatch",bg:"rgba(56, 189, 248, .16)",fg:"#0c4a6e",border:"rgba(59, 130, 246, .35)",glow:"rgba(56, 189, 248, .26)",darkBg:"rgba(56, 189, 248, .22)",darkFg:"#e0f2fe",darkBorder:"rgba(56, 189, 248, .48)",darkGlow:"rgba(14, 165, 233, .35)"},reporter:{icon:"fa-pen-nib",bg:"rgba(196, 181, 253, .18)",fg:"#4c1d95",border:"rgba(167, 139, 250, .35)",glow:"rgba(196, 181, 253, .26)",darkBg:"rgba(167, 139, 250, .24)",darkFg:"#ede9fe",darkBorder:"rgba(196, 181, 253, .48)",darkGlow:"rgba(139, 92, 246, .35)"},"resource-manager":{icon:"fa-box-open",bg:"rgba(134, 239, 172, .18)",fg:"#065f46",border:"rgba(16, 185, 129, .35)",glow:"rgba(134, 239, 172, .26)",darkBg:"rgba(16, 185, 129, .22)",darkFg:"#d1fae5",darkBorder:"rgba(16, 185, 129, .45)",darkGlow:"rgba(5, 150, 105, .32)"},"peace-maker":{icon:"fa-dove",bg:"rgba(253, 164, 175, .18)",fg:"#7f1d1d",border:"rgba(244, 63, 94, .35)",glow:"rgba(253, 164, 175, .28)",darkBg:"rgba(244, 63, 94, .22)",darkFg:"#ffe4e6",darkBorder:"rgba(244, 63, 94, .45)",darkGlow:"rgba(244, 63, 94, .34)"}},n={icon:"fa-id-badge",bg:"rgba(226, 232, 240, .22)",fg:"#111827",border:"rgba(148,163,184,.35)",glow:"rgba(148,163,184,.20)",darkBg:"rgba(148,163,184,.20)",darkFg:"#e2e8f0",darkBorder:"rgba(148,163,184,.45)",darkGlow:"rgba(148,163,184,.30)"};return e[t]||n}function yst(r){const t=(r||"").toString().trim().toLowerCase(),e=/science|/.test(t),n=/arts|/.test(t),i=/commerce||/.test(t),s=/vocational|/.test(t);return e?{icon:"fa-atom",bg:"rgba(153, 246, 228, .18)",fg:"#115e59",border:"rgba(45, 212, 191, .35)",glow:"rgba(94, 234, 212, .26)",darkBg:"rgba(45, 212, 191, .22)",darkFg:"#ccfbf1",darkBorder:"rgba(94, 234, 212, .48)",darkGlow:"rgba(20, 184, 166, .32)"}:n?{icon:"fa-palette",bg:"rgba(254, 215, 170, .20)",fg:"#7c2d12",border:"rgba(251, 146, 60, .35)",glow:"rgba(254, 215, 170, .28)",darkBg:"rgba(251, 146, 60, .24)",darkFg:"#ffedd5",darkBorder:"rgba(251, 146, 60, .48)",darkGlow:"rgba(249, 115, 22, .32)"}:i?{icon:"fa-chart-line",bg:"rgba(191, 219, 254, .20)",fg:"#1e3a8a",border:"rgba(99, 102, 241, .35)",glow:"rgba(191, 219, 254, .28)",darkBg:"rgba(99, 102, 241, .24)",darkFg:"#e0e7ff",darkBorder:"rgba(99, 102, 241, .48)",darkGlow:"rgba(79, 70, 229, .32)"}:s?{icon:"fa-tools",bg:"rgba(165, 243, 252, .20)",fg:"#164e63",border:"rgba(34, 211, 238, .35)",glow:"rgba(165, 243, 252, .28)",darkBg:"rgba(34, 211, 238, .22)",darkFg:"#cffafe",darkBorder:"rgba(34, 211, 238, .48)",darkGlow:"rgba(14, 165, 233, .32)"}:{icon:"fa-layer-group",bg:"rgba(241, 245, 249, .22)",fg:"#0f172a",border:"rgba(148,163,184,.35)",glow:"rgba(148,163,184,.18)",darkBg:"rgba(148,163,184,.20)",darkFg:"#e2e8f0",darkBorder:"rgba(148,163,184,.45)",darkGlow:"rgba(148,163,184,.28)"}}function sk(r,t){const e=Nc(t||""),n=(r==null?void 0:r.bg)||"rgba(255,255,255,.85)",i=(r==null?void 0:r.fg)||"#0f172a",s=(r==null?void 0:r.border)||"rgba(0,0,0,.06)",a=(r==null?void 0:r.glow)||"rgba(0,0,0,.05)",o=(r==null?void 0:r.darkBg)||n,A=(r==null?void 0:r.darkFg)||i,l=(r==null?void 0:r.darkBorder)||s,c=(r==null?void 0:r.darkGlow)||a;return`<span class="rk-badge rk-badge--compact"
    style="--rk-badge-bg:${n};
           --rk-badge-fg:${i};
           --rk-badge-border:${s};
           --rk-badge-glow:${a};
           --rk-badge-bg-dark:${o};
           --rk-badge-fg-dark:${A};
           --rk-badge-border-dark:${l};
           --rk-badge-glow-dark:${c};">
           <i class="fas ${(r==null?void 0:r.icon)||"fa-circle"}"></i>${e}
  </span>`}function ak(){try{return typeof window<"u"&&window.matchMedia("(max-width: 480px)").matches?64:72}catch{return 72}}function ok(r,t,e=72){const n=Math.max(0,Math.min(100,Number(r)||0)),i=sn!=null&&sn.convertToBanglaNumber?sn.convertToBanglaNumber(n.toFixed(2)):n.toFixed(2),s=typeof e=="number"?e:72;return`
    <div class="relative flex items-center justify-center" style="width:${s}px;height:${s}px;">
      <div class="absolute inset-0 rounded-full"
           style="background: conic-gradient(${t.solid} ${n}%,
                                             rgba(0,0,0,0.08) ${n}% 100%);
                  filter: drop-shadow(0 6px 16px ${t.shadow});">
      </div>
      <div class="rk-meter-outer absolute inset-[18%] rounded-full bg-white dark:bg-gray-900 flex items-center justify-center">
        <span class="text-sm font-semibold text-gray-800 dark:text-gray-100">${i}%</span>
      </div>
    </div>
  `}function Ak(r){const t=Number(r)||0,e={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",10:""};if(e[t])return`${e[t]} `;const n=`${t}`;return`${sn!=null&&sn.convertToBanglaNumber?sn.convertToBanglaNumber(n):n} `}function GU(r){if(!r)return null;if(r instanceof Date)return r.getTime();if(typeof r=="number")return r;if(typeof r=="string"){const t=Date.parse(r);return Number.isNaN(t)?null:t}if(typeof r=="object"){if(typeof r.toDate=="function")try{return r.toDate().getTime()}catch{return null}if(typeof r.seconds=="number")return r.seconds*1e3}return null}let qi,Pn,gn;const nc="analysis",wst=100,Ye={summaryPage:null,summaryContent:null,summaryFilterGroup:null,graphPage:null,graphFiltersContainer:null,graphDashboardContainer:null,graphDetailContainer:null,printableArea:null},Zc={TABLE:"table",CHART:"chart"},$c={TABLE:"table",CHART:"chart"},vst={"team-leader":" ","time-keeper":" ",reporter:"","resource-manager":" ","peace-maker":" "},tu={topic:{topic_learned_well:{id:"topic_learned_well",label:"  ",marks:10},topic_understood:{id:"topic_understood",label:" ",marks:5},topic_none:{id:"topic_none",label:"    ",marks:-5}},options:{attendance_regular:{id:"attendance_regular",label:"  ",marks:10},homework_done:{id:"homework_done",label:"   ",marks:5}}},ad={FULL_POSITIVE:{id:"full_positive",label:"  "},IMPROVEMENT_NEEDED:{id:"improvement_needed",label:" "}},yx=(()=>{const r=new Map;return Object.values(tu.topic).forEach(t=>{r.set(t.id,{...t,category:"topic",categoryLabel:" "})}),Object.values(tu.options).forEach(t=>{r.set(t.id,{...t,category:"options",categoryLabel:" "})}),r.set(ad.FULL_POSITIVE.id,{...ad.FULL_POSITIVE,category:"summary",categoryLabel:" "}),r.set(ad.IMPROVEMENT_NEEDED.id,{...ad.IMPROVEMENT_NEEDED,category:"summary",categoryLabel:" "}),r})();let vd=null,pA=null,jc=null,KU=null,Wa=null;function xst(){try{return document.documentElement.classList.contains("dark")}catch{return!1}}function wx(){const r=xst();return{tick:r?"#e5e7eb":"#334155",grid:r?"rgba(148,163,184,0.25)":"rgba(148,163,184,0.2)",legend:r?"#f1f5f9":"#1f2937",tooltipTitle:r?"#e5e7eb":"#111827",tooltipBody:r?"#e5e7eb":"#111827",tooltipBg:r?"rgba(17,24,39,0.9)":"rgba(255,255,255,0.95)",border:r?"#334155":"#e5e7eb"}}function _st(r){return qi=r.managers.stateManager,Pn=r.managers.uiManager,gn=r.utils,Bst(),vx(),Cst(),yv(),window.smartEvaluator||(window.smartEvaluator={}),window.smartEvaluator.components=window.smartEvaluator.components||{},window.smartEvaluator.components.analysis={render:yv,generateGroupAnalysisPDF:vv,generateSelectedGroupPDF:xv,generateGroupWiseFullDetailsPDF:ck,printGroupAnalysis:_v},{renderSummary:zU,renderGraphs:qU,generateGroupAnalysisPDF:vv,generateSelectedGroupPDF:xv,generateGroupWiseFullDetailsPDF:ck,printGroupAnalysis:_v}}function Bst(){Ye.summaryPage=document.getElementById("page-group-analysis"),Ye.summaryContent=document.getElementById("groupAnalysisDetails"),Ye.summaryFilterGroup=document.getElementById("analysisGroupSelect"),Ye.printableArea=document.getElementById("printableAnalysisArea"),Ye.graphPage=document.getElementById("page-graph-analysis"),Ye.graphFiltersContainer=document.getElementById("graphAnalysisContent")}function Cst(){Ye.summaryFilterGroup&&Pn.addListener(Ye.summaryFilterGroup,"change",r=>{dl({groupFilter:r.target.value})}),Ye.summaryContent&&Pn.addListener(Ye.summaryContent,"click",r=>{const t=r.target.closest("[data-summary-action]");if(t){switch(r.preventDefault(),t.dataset.summaryAction){case"print":_v();break;case"pdf-all":vv();break;case"pdf-group":t.disabled||xv();break}return}const e=r.target.closest("[data-summary-eval-view]");if(e){r.preventDefault();const n=e.dataset.analysisValue;n&&dl({summaryEvaluationView:n})}}),Ye.graphFiltersContainer&&(Pn.addListener(Ye.graphFiltersContainer,"click",r=>{const t=r.target.closest("[data-analysis-evaluation]");if(t){const i=t.dataset.analysisValue;dl({evaluationType:i});return}const e=r.target.closest("[data-analysis-view]");if(e){const i=e.dataset.analysisValue;dl({viewMode:i});return}const n=r.target.closest("[data-analysis-criteria-view]");if(n){const i=n.dataset.analysisValue;dl({criteriaView:i})}}),Pn.addListener(Ye.graphFiltersContainer,"change",r=>{switch(r.target.id){case"analysisGraphGroupSelect":dl({groupFilter:r.target.value});break;case"analysisGraphTaskSelect":dl({taskFilter:r.target.value});break;case"analysisFullCriteriaToggle":dl({showFullOnly:r.target.checked});break}})),Ye.graphPage&&Pn.addListener(Ye.graphPage,"click",r=>{const t=r.target.closest("[data-criteria-id]");if(t&&Ye.graphDashboardContainer){const e=t.dataset.criteriaId;if(!e||e===Wa)return;Wa=e,JU(),ZU()}})}function vx(){const r=xx(qi.getFilterSection(nc));return qi.updateFilters(nc,r),r}function xx(r){const t=r&&typeof r=="object"?r:{};return{groupFilter:t.groupFilter??"all",taskFilter:t.taskFilter??"all",evaluationType:t.evaluationType??"all",viewMode:t.viewMode??Zc.TABLE,showFullOnly:!!t.showFullOnly,criteriaView:t.criteriaView??"topic",summaryEvaluationView:t.summaryEvaluationView??$c.TABLE}}function yv(){const r=qi.getFilterSection(nc),t=Pg(r);try{zU(r,t)}catch(e){console.error(" Failed to render summary section:",e),Ye.summaryContent&&(Ye.summaryContent.innerHTML='<div class="card card-body text-rose-600 dark:text-rose-300 p-4">,     </div>')}try{qU(r,t)}catch(e){console.error(" Failed to render graph section:",e),Ye.graphFiltersContainer&&(Ye.graphFiltersContainer.innerHTML+='<div class="card card-body text-rose-600 dark:text-rose-300 p-4 mt-4">,     </div>')}}function dl(r){const e={...{...qi.getFilterSection(nc)||{}},...r};qi.updateFilters(nc,e),yv()}function zU(r,t){if(!Ye.summaryPage||!Ye.summaryContent)return;let e=r;!e||typeof e!="object"?e=vx():e=xx(e);let n=t;if(!n)try{n=Pg(e)}catch{n=null}Est(e,n),Sst(e,n)}function Est(r,t){if(!Ye.summaryFilterGroup)return;const e=t&&t.options&&Array.isArray(t.options.groups)?t.options.groups:[],n=r&&r.groupFilter?r.groupFilter:"all";Ye.summaryFilterGroup.innerHTML=['<option value="all"> </option>',...e.map(i=>`<option value="${i.id}" ${i.id===n?"selected":""}>${i.label}</option>`)].join(""),Ye.summaryFilterGroup.value=n}function Sst(r,t){if(!Ye.summaryContent)return;const{groupMetrics:e,summary:n}=t,i=t.groupDetails||new Map,s=r.groupFilter,a=r.summaryEvaluationView||$c.TABLE,o=s&&s!=="all",A=o?i.get(s):null;if(!o||!A){const m=lk(!1),f=eP(n),b=rP(e,r);Ye.summaryContent.innerHTML=`
      <div class="space-y-6" id="printableAnalysisArea">
        ${m}
        ${f}
        ${b}
      </div>
    `,wv();return}const l=lk(!0),c=kst(A),u=Ist(A.metric),h=Tst(A.members),d=Fst(A.evaluations,a);Ye.summaryContent.innerHTML=`
    <div class="space-y-6" id="printableAnalysisArea">
      ${l}
      ${c}
      ${u}
      ${h}
      ${d}
    </div>
  `,a===$c.CHART?Ust(A.evaluations):wv()}function lk(r){const t="inline-flex items-center gap-2 rounded-lg bg-blue-600 text-white px-4 py-2 shadow transition hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",e="inline-flex items-center gap-2 rounded-lg border border-gray-200 dark:border-gray-700 px-4 py-2 text-gray-800 dark:text-gray-100 bg-white dark:bg-gray-900 hover:bg-gray-100 dark:hover:bg-gray-800 transition focus:outline-none focus:ring-2 focus:ring-blue-500";return`
    <div class="flex flex-wrap items-center justify-end gap-2">
      <button type="button" class="${e}" data-summary-action="print">
        <i class="fas fa-print"></i>
        Print
      </button>
      <button type="button" class="${e}" data-summary-action="pdf-all">
        <i class="fas fa-file-pdf"></i>
        Export PDF
      </button>
      <button type="button" class="${t}${r?"":" opacity-60 cursor-not-allowed"}" data-summary-action="pdf-group" ${r?"":"disabled"}>
        <i class="fas fa-download"></i>
        Selected Group PDF
      </button>
    </div>
  `}function kst(r){var o,A,l;if(!r)return"";const t=r.metric||{},e=t.groupName||"Group",n=Er(t.studentCount||0),i=ro(t.participationRate||0),s=((A=(o=r.evaluations)==null?void 0:o[0])==null?void 0:A.dateLabel)||"-",a=(l=r.group)!=null&&l.mentor?an(r.group.mentor):"";return`
    <div class="card card-body flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 bg-white dark:bg-gray-900 border border-gray-100 dark:border-gray-700">
      <div>
        <h2 class="text-2xl font-semibold text-gray-900 dark:text-gray-50">${e}</h2>
        <p class="text-sm text-gray-700 dark:text-gray-300">: ${n}  : ${i}</p>
        ${a?`<p class="text-sm text-gray-700 dark:text-gray-300">: ${a}</p>`:""}
      </div>
      <div class="text-sm text-gray-700 dark:text-gray-300"> : ${s}</div>
    </div>
  `}function Ist(r){return r?`
    <div class="grid gap-4 md:grid-cols-2 xl:grid-cols-4">
      ${Fl(" ",r.evaluationCount,"bg-blue-50 text-blue-800 dark:bg-blue-900/40 dark:text-blue-100","fa-clipboard-check")}
      ${Fl("   (%)",ro(r.averageScore),"bg-emerald-50 text-emerald-800 dark:bg-emerald-900/40 dark:text-emerald-100","fa-gauge")}
      ${Fl(" ",ro(r.participationRate),"bg-indigo-50 text-indigo-800 dark:bg-indigo-900/40 dark:text-indigo-100","fa-people-group")}
      ${Fl(" ",Er(r.pendingStudents),"bg-amber-50 text-amber-800 dark:bg-amber-900/40 dark:text-amber-100","fa-user-clock")}
    </div>
  `:""}function Tst(r){return!Array.isArray(r)||!r.length?`
      <div class="card card-body bg-white dark:bg-gray-900 border border-gray-100 dark:border-gray-700">
        <div class="placeholder-content text-gray-800 dark:text-gray-200">
          <i class="fas fa-user-group mr-2"></i>
                  
        </div>
      </div>
    `:`
    <div class="card bg-white dark:bg-gray-900 border border-gray-100 dark:border-gray-700">
      <div class="card-header flex items-center justify-between">
        <h3 class="text-lg font-semibold text-gray-900 dark:text-gray-50">  </h3>
      </div>
      <div class="card-body overflow-x-auto">
        <table class="min-w-full text-sm divide-y divide-gray-200 dark:divide-gray-700">
          <thead class="bg-gray-50 dark:bg-gray-800">
            <tr>
              <th class="px-4 py-3 text-left font-semibold uppercase text-gray-700 dark:text-gray-300"> </th>
              <th class="px-4 py-3 text-left font-semibold uppercase text-gray-700 dark:text-gray-300"></th>
              <th class="px-4 py-3 text-left font-semibold uppercase text-gray-700 dark:text-gray-300"> </th>
              <th class="px-4 py-3 text-center font-semibold uppercase text-gray-700 dark:text-gray-300"> </th>
              <th class="px-4 py-3 text-center font-semibold uppercase text-gray-700 dark:text-gray-300"> </th>
              <th class="px-4 py-3 text-center font-semibold uppercase text-gray-700 dark:text-gray-300"> </th>
              <th class="px-4 py-3 text-left font-semibold uppercase text-gray-700 dark:text-gray-300"></th>
              <th class="px-4 py-3 text-center font-semibold uppercase text-gray-700 dark:text-gray-300"> </th>
            </tr>
          </thead>
          <tbody class="divide-y divide-gray-100 dark:divide-gray-800">
            ${r.map(e=>{const n=e.evaluationCount>0,i=n?Fo(e.avgTaskScore):"-",s=n?Fo(e.avgTeamScore):"-",a=n?Fo(e.avgAdditionalScore):"-",o=n?Fo(e.avgTotalScore):"-",A=e.latestComment?an(e.latestComment):"-",l=Pst(e.role),c=Er(e.evaluationCount||0);return`
        <tr class="border-b border-gray-100 dark:border-gray-800 hover:bg-gray-50/70 dark:hover:bg-gray-800/50 transition">
          <td class="px-4 py-3">
            <div class="font-semibold text-gray-900 dark:text-gray-100">${e.name}</div>
            <div class="mt-1 flex flex-wrap items-center gap-2 text-xs text-gray-700 dark:text-gray-300">
              <span>: ${c}</span>
              ${l?`<span class="inline-flex items-center rounded-full bg-blue-100 text-blue-800 dark:bg-blue-900/40 dark:text-blue-100 px-2 py-0.5">${l}</span>`:""}
            </div>
          </td>
          <td class="px-4 py-3 text-gray-800 dark:text-gray-200">${e.roll?an(e.roll):"-"}</td>
          <td class="px-4 py-3 text-gray-800 dark:text-gray-200">${e.academicGroup||"-"}</td>
          <td class="px-4 py-3 text-center text-gray-900 dark:text-gray-100">${s}</td>
          <td class="px-4 py-3 text-center text-gray-900 dark:text-gray-100">${i}</td>
          <td class="px-4 py-3 text-center text-gray-900 dark:text-gray-100">${a}</td>
          <td class="px-4 py-3 text-sm text-gray-800 dark:text-gray-200">${A}</td>
          <td class="px-4 py-3 text-center font-semibold text-indigo-700 dark:text-indigo-300">${o}</td>
        </tr>
      `}).join("")}
          </tbody>
        </table>
      </div>
    </div>
  `}function Fst(r,t){if(!(Array.isArray(r)&&r.length>0))return`
      <div class="card card-body bg-white dark:bg-gray-900 border border-gray-100 dark:border-gray-700">
        <div class="placeholder-content text-gray-800 dark:text-gray-200">
          <i class="fas fa-chart-bar mr-2"></i>
                 
        </div>
      </div>
    `;const n=[$c.TABLE,$c.CHART].map(s=>qm(s,s===$c.TABLE?" ":"  ",t===s,"data-summary-eval-view")).join(""),i=t===$c.CHART?'<div class="h-80"><canvas id="summaryEvaluationChart"></canvas></div>':Lst(r);return`
    <div class="card bg-white dark:bg-gray-900 border border-gray-100 dark:border-gray-700">
      <div class="card-header flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2">
        <h3 class="text-lg font-semibold text-gray-900 dark:text-gray-50">  </h3>
        <div class="flex flex-wrap gap-2">${n}</div>
      </div>
      <div class="card-body space-y-4">
        ${i}
      </div>
    </div>
  `}function Lst(r){return`
    <div class="overflow-x-auto">
      <table class="min-w-full text-sm divide-y divide-gray-200 dark:divide-gray-700">
        <thead class="bg-gray-50 dark:bg-gray-800">
          <tr>
            <th class="px-4 py-3 text-left font-semibold uppercase text-gray-700 dark:text-gray-300"></th>
            <th class="px-4 py-3 text-left font-semibold uppercase text-gray-700 dark:text-gray-300"></th>
            <th class="px-4 py-3 text-center font-semibold uppercase text-gray-700 dark:text-gray-300"></th>
            <th class="px-4 py-3 text-center font-semibold uppercase text-gray-700 dark:text-gray-300"> </th>
            <th class="px-4 py-3 text-center font-semibold uppercase text-gray-700 dark:text-gray-300"> </th>
            <th class="px-4 py-3 text-center font-semibold uppercase text-gray-700 dark:text-gray-300"> </th>
            <th class="px-4 py-3 text-center font-semibold uppercase text-gray-700 dark:text-gray-300"> </th>
            <th class="px-4 py-3 text-center font-semibold uppercase text-gray-700 dark:text-gray-300"> %</th>
          </tr>
        </thead>
        <tbody class="divide-y divide-gray-100 dark:divide-gray-800">
          ${r.map(e=>{const n=e.assessedCount+e.pendingCount;return`
        <tr class="border-b border-gray-100 dark:border-gray-800 hover:bg-gray-50/70 dark:hover:bg-gray-800/50 transition">
          <td class="px-4 py-3 text-gray-900 dark:text-gray-100 font-semibold">${e.taskName}</td>
          <td class="px-4 py-3 text-gray-800 dark:text-gray-200">${e.dateLabel||"-"}</td>
          <td class="px-4 py-3 text-center text-gray-900 dark:text-gray-100">${Er(e.assessedCount)} / ${Er(n)}</td>
          <td class="px-4 py-3 text-center text-gray-900 dark:text-gray-100">${Fo(e.avgTaskScore)}</td>
          <td class="px-4 py-3 text-center text-gray-900 dark:text-gray-100">${Fo(e.avgTeamScore)}</td>
          <td class="px-4 py-3 text-center text-gray-900 dark:text-gray-100">${Fo(e.avgAdditionalScore)}</td>
          <td class="px-4 py-3 text-center text-gray-900 dark:text-gray-100">${Fo(e.avgTotalScore)}</td>
          <td class="px-4 py-3 text-center font-semibold text-indigo-700 dark:text-indigo-300">${ro(e.averagePercentage)}</td>
        </tr>
      `}).join("")}
        </tbody>
      </table>
    </div>
  `}function Ust(r){if(!Array.isArray(r)||!r.length){wv();return}const t=document.getElementById("summaryEvaluationChart");if(!t)return;jc&&(jc.destroy(),jc=null);const e=r.map(A=>A.taskName),n=r.map(A=>A.avgTaskScore||0),i=r.map(A=>A.avgTeamScore||0),s=r.map(A=>A.avgAdditionalScore||0),a=r.map(A=>A.avgTotalScore||0),o=wx();jc=new Chart(t.getContext("2d"),{type:"bar",data:{labels:e,datasets:[{label:"",data:n,backgroundColor:"rgba(99, 102, 241, 0.85)"},{label:"",data:i,backgroundColor:"rgba(16, 185, 129, 0.85)"},{label:"",data:s,backgroundColor:"rgba(251, 191, 36, 0.9)"},{label:"",data:a,backgroundColor:"rgba(59, 130, 246, 0.9)"}]},options:{responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},scales:{x:{stacked:!1,ticks:{color:o.tick},grid:{color:o.grid}},y:{beginAtZero:!0,ticks:{color:o.tick,callback:A=>Fo(A)},grid:{color:o.grid}}},plugins:{legend:{position:"bottom",labels:{usePointStyle:!0,color:o.legend}},tooltip:{backgroundColor:o.tooltipBg,titleColor:o.tooltipTitle,bodyColor:o.tooltipBody,callbacks:{label:A=>`${A.dataset.label}: ${Fo(A.parsed.y)}`}}}}})}function wv(){jc&&(jc.destroy(),jc=null)}function Pst(r){return r?vst[r]||an(r):""}function qU(r,t){if(!Ye.graphPage||!Ye.graphFiltersContainer)return;let e=r;!e||typeof e!="object"?e=vx():e=xx(e);let n=t;if(!n)try{n=Pg(e)}catch{n=null}n||(n={groupMetrics:[],summary:{},chartData:{bar:null,pie:null},criteriaContext:null,selectedGroupDetail:null,groupDetails:new Map,options:{groups:[],tasks:[]}}),Nst(e,n),Dst(e,n)}function Nst(r,t){const e=r||{},n=e.groupFilter||"all",i=e.taskFilter||"all",s=e.viewMode||Zc.TABLE,a=e.evaluationType||"all",o=e.criteriaView||"topic",A=!!e.showFullOnly,l=(t==null?void 0:t.options)||{},c=Array.isArray(l.groups)?l.groups:[],u=Array.isArray(l.tasks)?l.tasks:[],h=(t==null?void 0:t.summary)||{},d=[`<option value="all"${n==="all"?" selected":""}> </option>`,...c.map(R=>`<option value="${R.id}"${R.id===n?" selected":""}>${R.label}</option>`)].join(""),m=[`<option value="all"${i==="all"?" selected":""}> </option>`,...u.map(R=>`<option value="${R.id}"${R.id===i?" selected":""}>${R.label}</option>`)].join(""),f=Object.values(Zc).map(R=>qm(R,R===Zc.TABLE?" ":" ",s===R,"data-analysis-view")).join(""),b=["all","mcq","regular"].map(R=>qm(R,R==="all"?" ":R==="mcq"?"MCQ ":" ",a===R,"data-analysis-evaluation")).join(""),y=["topic","options","summary"].map(R=>qm(R,R==="topic"?" ":R==="options"?" ":"",o===R,"data-analysis-criteria-view")).join(""),B=Er(h.groupsInView??0),I=Er(h.totalGroups??c.length),C=ro(h.participationRate??0),N=h.latestEvaluation||"-";Ye.graphFiltersContainer.innerHTML=`
    <div class="space-y-6">
      <div class="grid gap-4 lg:grid-cols-4">
        <div>
          <label class="label text-gray-900 dark:text-gray-100" for="analysisGraphGroupSelect"> </label>
          <select id="analysisGraphGroupSelect" class="form-select bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 border border-gray-200 dark:border-gray-700">
            ${d}
          </select>
        </div>
        <div>
          <label class="label text-gray-900 dark:text-gray-100" for="analysisGraphTaskSelect"> </label>
          <select id="analysisGraphTaskSelect" class="form-select bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 border border-gray-200 dark:border-gray-700">
            ${m}
          </select>
        </div>
        <div>
          <label class="label text-gray-900 dark:text-gray-100"> </label>
          <div class="flex flex-wrap gap-2" id="analysisGraphEvaluationButtons">
            ${b}
          </div>
        </div>
        <div>
          <label class="label text-gray-900 dark:text-gray-100"> </label>
          <div class="flex flex-wrap gap-2" id="analysisCriteriaViewButtons">
            ${y}
          </div>
        </div>
      </div>
      <div class="flex flex-col sm:flex-row sm:items-center justify-between gap-4">
        <div class="flex flex-wrap gap-2" id="analysisGraphViewButtons">
          ${f}
        </div>
        <label class="inline-flex items-center gap-2 text-sm text-gray-800 dark:text-gray-200">
          <input type="checkbox" class="form-checkbox" id="analysisFullCriteriaToggle" ${A?"checked":""}>
              
        </label>
        <div class="text-sm text-gray-800 dark:text-gray-200">
           : ${B} / ${I}  : ${C}   : ${N}
        </div>
      </div>
    </div>
  `}function Dst(r,t){const{groupMetrics:e,chartData:n,selectedGroupDetail:i,summary:s,criteriaContext:a}=t,o=WU(a,r.criteriaView),A=eP(s),l=Hst(a,r,o),c=r.viewMode===Zc.TABLE?rP(e,r):Kst(n),u=`
    <div class="graph-detail-container space-y-6">
      ${i?qst(i):""}
      ${Vst()}
    </div>
  `,h=`
    <div class="space-y-6">
      ${A}
      ${c}
      ${l}
      ${u}
    </div>
  `;Ye.graphPage&&(Ye.graphDashboardContainer||(Ye.graphDashboardContainer=document.createElement("div"),Ye.graphDashboardContainer.className="graph-dashboard-container space-y-6",Ye.graphPage.appendChild(Ye.graphDashboardContainer)),Ye.graphDashboardContainer.innerHTML=h,Ye.graphDetailContainer=Ye.graphDashboardContainer.querySelector(".graph-detail-container"),JU(),ZU(),r.viewMode===Zc.CHART?zst(n):nP())}function qm(r,t,e,n){return`<button type="button" class="px-4 py-2 rounded-full border text-sm transition-colors ${e?"bg-blue-600 text-white border-blue-600 shadow":"bg-white dark:bg-gray-900 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700 hover:bg-gray-100 dark:hover:bg-gray-800"}" ${n?`${n}=""`:""} data-analysis-value="${r}">${t}</button>`}function Pg(r){const t=qi.get("groups")||[],e=qi.get("students")||[],n=qi.get("tasks")||[],i=qi.get("evaluations")||[],s=new Map(n.map(C=>[C.id,C])),a=new Map(t.map(C=>[C.id,C])),o=new Map(e.map(C=>[C.id,C])),A=new Map;e.forEach(C=>{A.has(C.groupId)||A.set(C.groupId,[]),A.get(C.groupId).push(C)});const l=new Map;t.forEach(C=>{var R;const N=((R=A.get(C.id))==null?void 0:R.length)||0;l.set(C.id,{groupId:C.id,groupName:an(C.name),studentCount:N,evaluationDetails:[]})});const c=new Map,u=new Map;i.forEach(C=>{var N;try{const R=l.get(C.groupId);if(!R)return;const U=s.get(C.taskId);U&&c.set(U.id,{id:U.id,label:an(U.name)});const x=tat(U)?"mcq":"regular",v=C.scores||{},T=new Set,E=new Set,_=new Set,F={learnedWell:0,understood:0,notYet:0},k={attendance:0,homework:0},Z=(((N=R.evaluationDetails)==null?void 0:N.length)||0)+1,ut={evaluationId:C.id,taskId:C.taskId,taskName:Yst(U,C,Z),type:x,dateMs:Wst(C.taskDate||C.updatedAt||C.evaluationDate),dateLabel:"",assessedCount:0,pendingCount:0,averagePercentage:0,participationRate:0,topicCounts:F,optionCounts:k,fullPositiveCount:0,improvementCount:0,fullPositiveAll:!1,participantIds:[],fullPositiveStudentIds:[],improvementStudentIds:[],weightedScoreSum:0,weight:0,studentRecords:[]};Object.entries(v).forEach(([nt,j])=>{try{T.add(nt);const G=(j==null?void 0:j.additionalCriteria)||{},pt=G.topic||tu.topic.topic_none.id,q=pt===tu.topic.topic_learned_well.id?"learnedWell":pt===tu.topic.topic_understood.id?"understood":"notYet";F[q]=(F[q]||0)+1;const L=!!G.attendance,O=!!G.homework;L&&(k.attendance+=1),O&&(k.homework+=1),q==="learnedWell"&&L&&O&&E.add(nt),(q==="notYet"||!L||!O)&&_.add(nt);const At=parseFloat(C.maxPossibleScore)||Zst(U)||wst,et=parseFloat(j.totalScore)||0,st=At>0?et/At*100:0,dt=parseFloat(j==null?void 0:j.taskScore)||0,vt=parseFloat(j==null?void 0:j.teamScore)||0,_t=parseFloat(j==null?void 0:j.additionalScore)||0,Mt=parseFloat(j==null?void 0:j.mcqScore)||0,Ot=typeof(j==null?void 0:j.comments)=="string"?j.comments.trim():"";ut.weightedScoreSum+=st,ut.weight+=1,ut.studentRecords.push({studentId:nt,topicId:pt,topicKey:q,attendance:L,homework:O,taskScore:dt,teamScore:vt,additionalScore:_t,mcqScore:Mt,totalScore:et,maxScore:At,percentage:st,evaluationId:C.id,taskId:ut.taskId,taskName:ut.taskName,dateMs:ut.dateMs,dateLabel:ut.dateLabel,comments:an(Ot)})}catch(G){console.warn(` Skipping score record for student ${nt} in evaluation ${C.id} due to error:`,G,j)}}),ut.assessedCount=T.size,ut.pendingCount=Math.max(R.studentCount-ut.assessedCount,0),ut.averagePercentage=ut.weight>0?ut.weightedScoreSum/ut.weight:0,ut.participationRate=R.studentCount>0?Math.min(100,ut.assessedCount/R.studentCount*100):0,ut.fullPositiveCount=E.size,ut.improvementCount=_.size,ut.fullPositiveAll=ut.assessedCount>0&&ut.fullPositiveCount===ut.assessedCount,ut.dateLabel=ut.dateMs?iP(ut.dateMs):"",ut.participantIds=Array.from(T),ut.fullPositiveStudentIds=Array.from(E),ut.improvementStudentIds=Array.from(_),R.evaluationDetails.push(ut)}catch(R){console.error(` Skipping evaluation ${C.id} due to processing error:`,R,C)}});const h=r.groupFilter,d=r.taskFilter,m=r.evaluationType,f=[];let b=null;l.forEach(C=>{if(h!=="all"&&C.groupId!==h)return;const N=C.evaluationDetails.filter(et=>{const st=d==="all"||et.taskId===d,dt=m==="all"||et.type===m;return st&&dt});if(!N.length){const et=(A.get(C.groupId)||[]).map(st=>({studentId:st.id,name:an(st.name||st.id),roll:st.roll??"",role:st.role||"",academicGroup:an(st.academicGroup||""),avgTaskScore:0,avgTeamScore:0,avgAdditionalScore:0,avgMcqScore:0,avgTotalScore:0,totalScore:0,evaluationCount:0,latestComment:""}));u.set(C.groupId,{metric:{groupId:C.groupId,groupName:C.groupName,studentCount:C.studentCount,evaluationCount:0,mcqEvaluationCount:0,assessedCount:0,assessmentEntries:0,pendingStudents:C.studentCount,averageScore:0,participationRate:0,scoreWeight:0,uniqueParticipantsCount:0,topicCounts:{learnedWell:0,understood:0,notYet:0},optionCounts:{attendance:0,homework:0},fullCriteriaStudents:0,improvementCount:0,fullCriteriaEvaluations:[],evaluationDetails:[],latestEvaluationMs:null},group:a.get(C.groupId)||null,members:et,evaluations:[]});return}const R=N.length,U=N.filter(et=>et.type==="mcq").length,x=N.reduce((et,st)=>et+st.assessedCount,0),v=N.reduce((et,st)=>et+st.weightedScoreSum,0),T=N.reduce((et,st)=>et+st.weight,0),E={learnedWell:0,understood:0,notYet:0},_={attendance:0,homework:0},F=new Set,k=new Set,Z=new Set,ut=[];N.forEach(et=>{E.learnedWell+=et.topicCounts.learnedWell,E.understood+=et.topicCounts.understood,E.notYet+=et.topicCounts.notYet,_.attendance+=et.optionCounts.attendance,_.homework+=et.optionCounts.homework,et.participantIds.forEach(st=>F.add(st)),et.fullPositiveStudentIds.forEach(st=>k.add(st)),et.improvementStudentIds.forEach(st=>Z.add(st)),et.fullPositiveAll&&ut.push(et.taskName)});const nt=T>0?v/T:0,j=F.size,G=Math.max(C.studentCount-j,0),pt=C.studentCount>0?Math.min(100,j/C.studentCount*100):0,q=N.reduce((et,st)=>st.dateMs&&st.dateMs>et?st.dateMs:et,-1/0),L={groupId:C.groupId,groupName:C.groupName,studentCount:C.studentCount,evaluationCount:R,mcqEvaluationCount:U,assessedCount:j,assessmentEntries:x,pendingStudents:G,averageScore:nt,participationRate:pt,scoreWeight:T,uniqueParticipantsCount:j,topicCounts:E,optionCounts:_,fullCriteriaStudents:k.size,improvementCount:Z.size,fullCriteriaEvaluations:ut,evaluationDetails:N.sort((et,st)=>(st.dateMs||0)-(et.dateMs||0)),latestEvaluationMs:q>0?q:null},O=A.get(C.groupId)||[],V=new Map;O.forEach(et=>{V.set(et.id,{studentId:et.id,name:an(et.name||et.id),roll:et.roll??"",role:et.role||"",academicGroup:an(et.academicGroup||""),totalTaskScore:0,totalTeamScore:0,totalAdditionalScore:0,totalMcqScore:0,totalScore:0,evaluationCount:0,latestComment:"",latestCommentDate:-1/0})}),N.forEach(et=>{et.studentRecords.forEach(st=>{const dt=st.studentId;if(!dt)return;if(!V.has(dt)){const _t=o.get(dt)||{};V.set(dt,{studentId:dt,name:an(_t.name||dt),roll:_t.roll??"",role:_t.role||"",academicGroup:an(_t.academicGroup||""),totalTaskScore:0,totalTeamScore:0,totalAdditionalScore:0,totalMcqScore:0,totalScore:0,evaluationCount:0,latestComment:"",latestCommentDate:-1/0})}const vt=V.get(dt);if(vt.totalTaskScore+=st.taskScore||0,vt.totalTeamScore+=st.teamScore||0,vt.totalAdditionalScore+=st.additionalScore||0,vt.totalMcqScore+=st.mcqScore||0,vt.totalScore+=st.totalScore||0,vt.evaluationCount+=1,st.comments){const _t=st.dateMs||0;_t>=vt.latestCommentDate&&(vt.latestComment=st.comments,vt.latestCommentDate=_t)}})});const X=Array.from(V.values()).map(et=>{const st=et.evaluationCount||0,dt=st||1;return{studentId:et.studentId,name:et.name,roll:et.roll,role:et.role,academicGroup:et.academicGroup,avgTaskScore:st?et.totalTaskScore/dt:0,avgTeamScore:st?et.totalTeamScore/dt:0,avgAdditionalScore:st?et.totalAdditionalScore/dt:0,avgMcqScore:st?et.totalMcqScore/dt:0,avgTotalScore:st?et.totalScore/dt:0,totalScore:et.totalScore,evaluationCount:st,latestComment:et.latestComment}}).sort((et,st)=>st.evaluationCount!==et.evaluationCount?st.evaluationCount-et.evaluationCount:et.name.localeCompare(st.name)),At=N.map(et=>{const st=et.studentRecords.length||0,dt=et.studentRecords.reduce((_t,Mt)=>(_t.task+=Mt.taskScore||0,_t.team+=Mt.teamScore||0,_t.additional+=Mt.additionalScore||0,_t.mcq+=Mt.mcqScore||0,_t.total+=Mt.totalScore||0,_t),{task:0,team:0,additional:0,mcq:0,total:0}),vt=st||1;return{evaluationId:et.evaluationId,taskName:et.taskName,dateLabel:et.dateLabel,dateMs:et.dateMs||null,assessedCount:et.assessedCount,pendingCount:et.pendingCount,averagePercentage:et.averagePercentage,avgTaskScore:st?dt.task/vt:0,avgTeamScore:st?dt.team/vt:0,avgAdditionalScore:st?dt.additional/vt:0,avgMcqScore:st?dt.mcq/vt:0,avgTotalScore:st?dt.total/vt:0}}).sort((et,st)=>(st.dateMs||0)-(et.dateMs||0));u.set(C.groupId,{metric:L,group:a.get(C.groupId)||null,members:X,evaluations:At}),!(r.showFullOnly&&L.fullCriteriaEvaluations.length===0)&&(f.push(L),r.groupFilter!=="all"&&C.groupId===r.groupFilter&&(b=L))});const y=Mst(f,h,l.size),B=Rst(f,r),I=Qst(f,o,a);return KU=I,I&&Wa&&!I.criteriaBuckets.has(Wa)&&(Wa=null),{groupMetrics:f,summary:y,chartData:B,criteriaContext:I,selectedGroupDetail:b,groupDetails:u,options:{groups:t.map(C=>({id:C.id,label:an(C.name)})),tasks:Array.from(c.values())}}}function Mst(r,t,e){if(!r.length)return{groupsInView:0,totalGroups:t==="all"?e:1,totalEvaluations:0,totalMcqEvaluations:0,averageScore:0,pendingStudents:0,improvementStudents:0,participationRate:0,latestEvaluation:null,fullCriteriaGroups:0};const n=r.reduce((f,b)=>f+(b.evaluationCount||0),0),i=r.reduce((f,b)=>f+(b.mcqEvaluationCount||0),0),s=r.reduce((f,b)=>f+(b.studentCount||0),0),a=r.reduce((f,b)=>f+(b.uniqueParticipantsCount||0),0),o=Math.max(s-a,0),A=r.reduce((f,b)=>f+(b.improvementCount||0),0),l=r.reduce((f,b)=>f+(b.scoreWeight||0),0),c=r.reduce((f,b)=>f+(b.averageScore||0)*(b.scoreWeight||0),0),u=l>0?c/l:0,h=s>0?Math.min(100,a/s*100):0,d=r.reduce((f,b)=>b.latestEvaluationMs&&b.latestEvaluationMs>f?b.latestEvaluationMs:f,-1/0),m=r.filter(f=>f.fullCriteriaEvaluations.length>0).length;return{groupsInView:r.length,totalGroups:t==="all"?e:1,totalEvaluations:n,totalMcqEvaluations:i,averageScore:u,pendingStudents:o,improvementStudents:A,participationRate:h,latestEvaluation:d>0?iP(d):null,fullCriteriaGroups:m}}function Rst(r,t){if(!r.length)return{bar:null,pie:null};const e=wx(),n=r.map(c=>c.groupName),i=r.map(c=>c.topicCounts.learnedWell),s=r.map(c=>c.topicCounts.understood),a=r.map(c=>c.topicCounts.notYet),o=r.map(c=>c.pendingStudents),A={labels:n,datasets:[{label:"  ",data:i,backgroundColor:"rgba(16, 185, 129, 0.85)",borderRadius:6},{label:" ",data:s,backgroundColor:"rgba(99, 102, 241, 0.85)",borderRadius:6},{label:"    ",data:a,backgroundColor:"rgba(251, 191, 36, 0.9)",borderRadius:6},{label:" ",data:o,type:"line",borderColor:"rgba(239, 68, 68, 0.95)",backgroundColor:"rgba(239, 68, 68, 0.25)",tension:.35,borderWidth:2,fill:!0,yAxisID:"y1"}],options:{responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},scales:{y:{beginAtZero:!0,ticks:{precision:0,color:e.tick,callback:c=>Er(c)},grid:{color:e.grid}},y1:{beginAtZero:!0,position:"right",grid:{drawOnChartArea:!1,color:e.grid},ticks:{precision:0,color:e.tick,callback:c=>Er(c)}},x:{ticks:{color:e.tick},grid:{color:e.grid}}},plugins:{legend:{position:"bottom",labels:{usePointStyle:!0,color:e.legend}},tooltip:{backgroundColor:e.tooltipBg,titleColor:e.tooltipTitle,bodyColor:e.tooltipBody}}}};let l=null;if(t.groupFilter!=="all"&&r.length===1){const c=r[0];c.topicCounts.learnedWell+c.topicCounts.understood+c.topicCounts.notYet>0&&(l={labels:["  "," ","    "],data:[c.topicCounts.learnedWell,c.topicCounts.understood,c.topicCounts.notYet],colors:["#10b981","#6366f1","#f59e0b"],title:`${c.groupName} -  `})}return{bar:A,pie:l}}function Qst(r,t,e){if(!Array.isArray(r)||!r.length)return null;const n=new Map,i={topic:[],options:[],summary:[]},s=new Set,a=l=>{const c=yx.get(l);if(!c)return null;let u=n.get(l);return u||(u={id:l,label:an(c.label),category:c.category,categoryLabel:c.categoryLabel,students:new Map,count:0,totalEntries:0},n.set(l,u),Array.isArray(i[c.category])&&i[c.category].push(u)),u},o=(l,c,u)=>{const h=a(l);if(!h)return;const d=h.students.get(c.studentId)||{studentId:c.studentId,name:c.name,groupId:c.groupId,groupName:c.groupName,records:[]};d.records.push(u),h.students.set(c.studentId,d)};r.forEach(l=>{const c=an(l.groupName);(l.evaluationDetails||[]).forEach(u=>{Array.isArray(u.studentRecords)&&u.studentRecords.forEach(h=>{const d=h.studentId;if(!d)return;s.add(d);const m=t.get(d)||{},f=m.groupId||l.groupId,b=e.get(f),y={studentId:d,name:an(m.name||h.displayName||d),groupId:f,groupName:an((b==null?void 0:b.name)||c)},B={evaluationId:h.evaluationId,taskId:h.taskId,taskName:an(h.taskName),dateMs:h.dateMs,dateLabel:h.dateLabel||"",topicId:h.topicId,topicKey:h.topicKey,attendance:!!h.attendance,homework:!!h.homework,percentage:h.percentage,totalScore:h.totalScore,maxScore:h.maxScore,groupId:l.groupId,groupName:c};h.topicId&&o(h.topicId,y,B),h.attendance&&o(tu.options.attendance_regular.id,y,B),h.homework&&o(tu.options.homework_done.id,y,B);const I=h.topicKey==="learnedWell"&&h.attendance&&h.homework,C=h.topicKey==="notYet"||!h.attendance||!h.homework;I&&o(ad.FULL_POSITIVE.id,y,B),C&&o(ad.IMPROVEMENT_NEEDED.id,y,B)})})}),n.forEach(l=>{l.count=l.students.size,l.totalEntries=Array.from(l.students.values()).reduce((c,u)=>c+u.records.length,0)});const A=l=>l.filter(c=>c.count>0).sort((c,u)=>u.count!==c.count?u.count-c.count:c.label.localeCompare(u.label));return i.topic=A(i.topic),i.options=A(i.options),i.summary=A(i.summary),!i.topic.length&&!i.options.length&&!i.summary.length?null:{criteriaBuckets:n,bucketsByCategory:i,totalUniqueStudents:s.size}}function WU(r,t){var n;if(!r)return[];const e=t==="topic"?"topic":t==="options"?"options":"summary";return Array.isArray((n=r.bucketsByCategory)==null?void 0:n[e])?r.bucketsByCategory[e]:[]}function YU(r){if(!r||!r.length)return Wa=null,null;if(Wa){const t=r.find(e=>e.id===Wa);if(t)return t}return Wa=r[0].id,r[0]}function Ost(r){return r==="topic"?" ":r==="options"?" ":r==="summary"?"":""}function XU(r,t){const e=yx.get(r),n=e?e.label:t||"";return an(n)}function Hst(r,t,e){if(!r)return"";if(!e||!e.length)return Wa=null,`
      <div class="card card-body bg-white dark:bg-gray-900 border border-gray-100 dark:border-gray-700">
        <div class="placeholder-content text-gray-800 dark:text-gray-200">
          <i class="fas fa-user-check mr-2"></i>
                 
        </div>
      </div>
    `;const n=YU(e),i=r.totalUniqueStudents||0,s="criteria-card block w-full rounded-2xl border transition-colors p-4 text-left focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:focus:ring-offset-gray-900",a="border-blue-600 bg-blue-600 text-white shadow-lg",o="border-gray-200 bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 hover:border-blue-400 hover:bg-blue-50/60 dark:hover:bg-gray-800 dark:border-gray-700",A=e.map(c=>{const u=n&&c.id===n.id,h=i>0?c.count/i*100:0,d=u?"text-white/90":"text-gray-700 dark:text-gray-300";return`
        <button
          type="button"
          class="${s} ${u?a:o}"
          data-criteria-id="${c.id}"
          data-base-class="${s}"
          data-active-class="${a}"
          data-inactive-class="${o}"
        >
          <span class="text-xs font-semibold uppercase tracking-wide ${d}">${Ost(c.category)}</span>
          <div class="mt-2 flex items-baseline justify-between gap-2">
            <span class="text-lg font-semibold">${XU(c.id,c.label)}</span>
            <span class="text-3xl font-bold">${Er(c.count)}</span>
          </div>
          <div class="mt-1 flex items-center justify-between text-sm ${d}">
            <span>${Er(c.totalEntries)} </span>
            <span>${ro(h||0)}</span>
          </div>
        </button>
      `}).join("");return`
    <div class="card bg-white dark:bg-gray-900 border border-gray-100 dark:border-gray-700">
      <div class="card-header flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2">
        <h3 class="text-lg font-semibold text-gray-900 dark:text-gray-50">  </h3>
        <span class="text-xs font-semibold uppercase tracking-wide text-blue-700 dark:text-blue-300">${t.criteriaView==="topic"?" ":t.criteriaView==="options"?" ":""}</span>
      </div>
      <div class="card-body">
        <div class="grid gap-4 md:grid-cols-2 xl:grid-cols-${Math.min(e.length||1,4)}" data-criteria-grid>
          ${A}
        </div>
      </div>
    </div>
  `}function JU(){if(!Ye.graphDashboardContainer)return;Ye.graphDashboardContainer.querySelectorAll("[data-criteria-id]").forEach(t=>{const e=t.dataset.baseClass||"",n=t.dataset.activeClass||"",i=t.dataset.inactiveClass||"",s=t.dataset.criteriaId===Wa;t.className=`${e} ${s?n:i}`.trim()})}function Vst(r,t){return'<div class="space-y-4" data-criteria-detail></div>'}function ZU(){if(!Ye.graphDetailContainer)return;const r=Ye.graphDetailContainer.querySelector("[data-criteria-detail]");if(!r)return;const t=qi.getFilterSection(nc),e=WU(KU,t.criteriaView),n=YU(e);r.innerHTML=n?$st(n):tP()}function tP(){return`
    <div class="card card-body bg-white dark:bg-gray-900 border border-gray-100 dark:border-gray-700">
      <div class="placeholder-content text-gray-800 dark:text-gray-200">
        <i class="fas fa-users mr-2"></i>
                
      </div>
    </div>
  `}function $st(r){if(!r||!r.students.size)return tP();const t=Array.from(r.students.values()).sort((e,n)=>n.records.length!==e.records.length?n.records.length-e.records.length:e.name.localeCompare(n.name)).map(e=>{const n=[...e.records].sort((s,a)=>(a.dateMs||0)-(s.dateMs||0)),i=n.map(s=>jst(s)).join("");return`
        <div class="rounded-2xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 p-4 space-y-3">
          <div class="flex flex-col sm:flex-row sm:items-start sm:justify-between gap-2">
            <div>
              <h5 class="text-lg font-semibold text-gray-900 dark:text-gray-50">${e.name}</h5>
              <p class="text-sm text-gray-700 dark:text-gray-300">${e.groupName||"  "}</p>
            </div>
            <div class="text-sm text-gray-700 dark:text-gray-300">
              <span class="inline-flex items-center gap-1 rounded-full bg-blue-100 dark:bg-blue-900/40 px-3 py-1 text-blue-800 dark:text-blue-100 font-medium">
                ${Er(n.length)} 
              </span>
            </div>
          </div>
          <div class="space-y-2">
            ${i}
          </div>
        </div>
      `}).join("");return`
    <div class="space-y-4">
      <div class="card bg-white dark:bg-gray-900 border border-gray-100 dark:border-gray-700">
        <div class="card-header flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2">
          <h4 class="text-lg font-semibold text-gray-900 dark:text-gray-50">${XU(r.id,r.label)}</h4>
          <span class="text-sm text-gray-700 dark:text-gray-300"> : ${Er(r.count)}</span>
        </div>
        <div class="card-body space-y-4">
          ${t}
        </div>
      </div>
    </div>
  `}function jst(r){const t=Gst(r.topicId)||" ",e=r.attendance?"":"",n=r.attendance?"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-100":"bg-rose-100 text-rose-800 dark:bg-rose-900/30 dark:text-rose-100",i=r.homework?" ":" ",s=r.homework?"bg-indigo-100 text-indigo-800 dark:bg-indigo-900/30 dark:text-indigo-100":"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-100";return`
    <div class="rounded-xl border border-gray-100 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50 p-3 space-y-2">
      <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2">
        <div>
          <p class="text-sm font-semibold text-gray-900 dark:text-gray-100">${r.taskName}</p>
          <p class="text-xs text-gray-700 dark:text-gray-300">${r.dateLabel||" "}  ${r.groupName}</p>
        </div>
        <div class="text-sm font-semibold text-indigo-700 dark:text-indigo-300">
          ${ro(r.percentage)}
        </div>
      </div>
      <div class="flex flex-wrap gap-2 text-xs">
        <span class="inline-flex items-center rounded-full bg-sky-100 text-sky-800 dark:bg-sky-900/30 dark:text-sky-100 px-3 py-1 font-medium">${t}</span>
        <span class="inline-flex items-center rounded-full px-3 py-1 font-medium ${n}">${e}</span>
        <span class="inline-flex items-center rounded-full px-3 py-1 font-medium ${s}">${i}</span>
      </div>
    </div>
  `}function Gst(r){const t=yx.get(r);return t?an(t.label):""}function eP(r){return`
    <div class="grid gap-4 md:grid-cols-2 xl:grid-cols-4">
      ${Fl(" ",r.totalEvaluations,"bg-blue-50 text-blue-800 dark:bg-blue-900/40 dark:text-blue-100","fa-clipboard-list")}
      ${Fl("MCQ ",r.totalMcqEvaluations,"bg-purple-50 text-purple-800 dark:bg-purple-900/40 dark:text-purple-100","fa-brain")}
      ${Fl("  (%)",ro(r.averageScore),"bg-emerald-50 text-emerald-800 dark:bg-emerald-900/40 dark:text-emerald-100","fa-gauge")}
      ${Fl(" ",r.pendingStudents,"bg-rose-50 text-rose-800 dark:bg-rose-900/40 dark:text-rose-100","fa-user-clock")}
    </div>
  `}function Fl(r,t,e,n){const i=typeof t=="string"?t:Er(t);return`
    <div class="rounded-2xl border ${e.includes("dark:")?"border-transparent":"border-gray-100"} ${e} p-4 shadow-sm backdrop-blur">
      <div class="flex items-center justify-between">
        <div>
          <div class="text-sm font-medium opacity-90">${r}</div>
          <div class="mt-2 text-2xl font-semibold">${i}</div>
        </div>
        <div class="text-3xl opacity-70"><i class="fas ${n}"></i></div>
      </div>
    </div>
  `}function rP(r,t){if(!r.length)return`
      <div class="card card-body bg-white dark:bg-gray-900 border border-gray-100 dark:border-gray-700">
        <div class="placeholder-content text-gray-800 dark:text-gray-200">
          <i class="fas fa-info-circle mr-2"></i>
                
        </div>
      </div>
    `;const e=[""," "," (/MCQ)","","  (%)","  (%)"," "," "," ","  "],n=r.map(i=>`
        <tr class="border-b border-gray-100 dark:border-gray-700 hover:bg-gray-50/70 dark:hover:bg-gray-800/50 transition">
          <td class="px-4 py-3 font-semibold text-gray-900 dark:text-gray-100">${i.groupName}</td>
          <td class="px-4 py-3 text-center text-gray-900 dark:text-gray-100">${Er(i.studentCount)}</td>
          <td class="px-4 py-3 text-center text-gray-900 dark:text-gray-100">${Er(i.evaluationCount)} / ${Er(i.mcqEvaluationCount)}</td>
          <td class="px-4 py-3 text-center text-gray-900 dark:text-gray-100">${Er(i.uniqueParticipantsCount)}</td>
          <td class="px-4 py-3 text-center ${Jst(i.averageScore)} font-semibold">${ro(i.averageScore)}</td>
          <td class="px-4 py-3 text-center text-indigo-700 dark:text-indigo-300 font-semibold">${ro(i.participationRate)}</td>
          <td class="px-4 py-3 text-center text-gray-900 dark:text-gray-100">${Er(i.pendingStudents)}</td>
          <td class="px-4 py-3 text-center text-emerald-700 dark:text-emerald-300 font-semibold">${Er(i.fullCriteriaStudents)}</td>
          <td class="px-4 py-3 text-center ${i.improvementCount>0?"text-rose-600 dark:text-rose-300 font-semibold":"text-gray-800 dark:text-gray-200"}">${Er(i.improvementCount)}</td>
          <td class="px-4 py-3 text-sm text-gray-800 dark:text-gray-200">${i.fullCriteriaEvaluations.map((s,a)=>{const o=typeof s=="string"&&s.trim().length?s.trim():typeof s=="number"?String(s):"",A=an(o),l=A&&A.length?A:o,c=l&&l.length?l.length>32?`${l.slice(0,30)}`:l:` ${Er(a+1)}`;return`<span class="inline-flex items-center px-2 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-100 rounded-full mr-1 mb-1 whitespace-nowrap" title="${Xst(l||c)}">${c}</span>`}).join("")||'<span class="text-gray-500 dark:text-gray-400"></span>'}</td>
        </tr>
      `).join("");return`
    <div class="card overflow-hidden bg-white dark:bg-gray-900 border border-gray-100 dark:border-gray-700">
      <div class="card-header flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2">
        <h3 class="text-lg font-semibold text-gray-900 dark:text-gray-50">  </h3>
        <p class="text-sm text-gray-800 dark:text-gray-200">
           : ${t.viewMode===Zc.TABLE?"":""}   : ${Er(r.length)}
        </p>
      </div>
      <div class="overflow-x-auto">
        <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700 text-sm">
          <thead class="bg-gray-50 dark:bg-gray-800">
            <tr>
              ${e.map(i=>`<th scope="col" class="px-4 py-3 text-left font-semibold uppercase tracking-wide text-gray-700 dark:text-gray-300">${i}</th>`).join("")}
            </tr>
          </thead>
          <tbody class="bg-white dark:bg-gray-900 divide-y divide-gray-100 dark:divide-gray-800">
            ${n}
          </tbody>
        </table>
      </div>
    </div>
  `}function Kst(r){if(!r.bar)return`
      <div class="card card-body bg-white dark:bg-gray-900 border border-gray-100 dark:border-gray-700">
        <div class="placeholder-content text-gray-800 dark:text-gray-200">
          <i class="fas fa-chart-column mr-2"></i>
               
        </div>
      </div>
    `;const t=r.pie?`
        <div class="card bg-white dark:bg-gray-900 border border-gray-100 dark:border-gray-700">
          <div class="card-header flex items-center justify-between">
            <h3 class="text-lg font-semibold text-gray-900 dark:text-gray-50">${r.pie.title}</h3>
          </div>
          <div class="card-body">
            <div class="h-80">
              <canvas id="analysisPieChart"></canvas>
            </div>
          </div>
        </div>
      `:"";return`
    <div class="grid gap-6 ${r.pie?"lg:grid-cols-3":"lg:grid-cols-1"}">
      <div class="card lg:col-span-2 bg-white dark:bg-gray-900 border border-gray-100 dark:border-gray-700">
        <div class="card-header flex items-center justify-between">
          <h3 class="text-lg font-semibold text-gray-900 dark:text-gray-50">  </h3>
        </div>
        <div class="card-body">
          <div class="h-[420px]">
            <canvas id="analysisBarChart"></canvas>
          </div>
        </div>
      </div>
      ${t}
    </div>
  `}function zst(r){var i,s,a,o,A,l,c,u,h,d,m,f,b,y,B,I,C,N,R,U,x,v,T,E,_,F,k,Z,ut,nt,j,G,pt;if(!r.bar){nP();return}const t=wx(),e=document.getElementById("analysisBarChart");e&&(vd&&vd.destroy(),vd=new Chart(e.getContext("2d"),{type:"bar",data:{labels:r.bar.labels,datasets:r.bar.datasets},options:{...r.bar.options,scales:{...((i=r.bar.options)==null?void 0:i.scales)||{},x:{...((a=(s=r.bar.options)==null?void 0:s.scales)==null?void 0:a.x)||{},ticks:{...((l=(A=(o=r.bar.options)==null?void 0:o.scales)==null?void 0:A.x)==null?void 0:l.ticks)||{},color:t.tick},grid:{...((h=(u=(c=r.bar.options)==null?void 0:c.scales)==null?void 0:u.x)==null?void 0:h.grid)||{},color:t.grid}},y:{...((m=(d=r.bar.options)==null?void 0:d.scales)==null?void 0:m.y)||{},ticks:{...((y=(b=(f=r.bar.options)==null?void 0:f.scales)==null?void 0:b.y)==null?void 0:y.ticks)||{},color:t.tick},grid:{...((C=(I=(B=r.bar.options)==null?void 0:B.scales)==null?void 0:I.y)==null?void 0:C.grid)||{},color:t.grid}},y1:{...((R=(N=r.bar.options)==null?void 0:N.scales)==null?void 0:R.y1)||{},ticks:{...((v=(x=(U=r.bar.options)==null?void 0:U.scales)==null?void 0:x.y1)==null?void 0:v.ticks)||{},color:t.tick},grid:{...((_=(E=(T=r.bar.options)==null?void 0:T.scales)==null?void 0:E.y1)==null?void 0:_.grid)||{},color:t.grid,drawOnChartArea:!1}}},plugins:{...((F=r.bar.options)==null?void 0:F.plugins)||{},legend:{...((Z=(k=r.bar.options)==null?void 0:k.plugins)==null?void 0:Z.legend)||{},labels:{...((j=(nt=(ut=r.bar.options)==null?void 0:ut.plugins)==null?void 0:nt.legend)==null?void 0:j.labels)||{},color:t.legend,usePointStyle:!0}},tooltip:{...((pt=(G=r.bar.options)==null?void 0:G.plugins)==null?void 0:pt.tooltip)||{},backgroundColor:t.tooltipBg,titleColor:t.tooltipTitle,bodyColor:t.tooltipBody}}}}));const n=document.getElementById("analysisPieChart");n&&r.pie?(pA&&pA.destroy(),pA=new Chart(n.getContext("2d"),{type:"doughnut",data:{labels:r.pie.labels,datasets:[{data:r.pie.data,backgroundColor:r.pie.colors}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{color:t.legend}},tooltip:{backgroundColor:t.tooltipBg,titleColor:t.tooltipTitle,bodyColor:t.tooltipBody}}}})):pA&&(pA.destroy(),pA=null)}function nP(){vd&&(vd.destroy(),vd=null),pA&&(pA.destroy(),pA=null)}function qst(r){const t=r.evaluationDetails.map(e=>{const n=e.topicCounts.learnedWell+e.topicCounts.understood+e.topicCounts.notYet,i=`
        <div class="flex flex-wrap gap-2 text-xs">
          <span class="px-3 py-1 rounded-full bg-emerald-100 text-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-100">
              : ${Er(e.topicCounts.learnedWell)}
          </span>
          <span class="px-3 py-1 rounded-full bg-indigo-100 text-indigo-800 dark:bg-indigo-900/30 dark:text-indigo-100">
             : ${Er(e.topicCounts.understood)}
          </span>
          <span class="px-3 py-1 rounded-full bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-100">
                : ${Er(e.topicCounts.notYet)}
          </span>
        </div>
      `,s=`
        <div class="flex flex-wrap gap-2 text-xs mt-2">
          <span class="px-3 py-1 rounded-full bg-sky-100 text-sky-800 dark:bg-sky-900/30 dark:text-sky-100">
             : ${Er(e.optionCounts.attendance)}
          </span>
          <span class="px-3 py-1 rounded-full bg-fuchsia-100 text-fuchsia-800 dark:bg-fuchsia-900/30 dark:text-fuchsia-100">
              : ${Er(e.optionCounts.homework)}
          </span>
        </div>
      `;return`
        <div class="border border-gray-100 dark:border-gray-700 rounded-xl p-4 space-y-3 bg-white dark:bg-gray-900">
          <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3">
            <div>
              <div class="text-base font-semibold text-gray-900 dark:text-gray-50">${an(e.taskName)}</div>
              <div class="text-xs text-gray-700 dark:text-gray-300 mt-1 flex flex-wrap gap-3">
                <span><i class="fas fa-calendar-day mr-1"></i>${e.dateLabel||""}</span>
                <span><i class="fas fa-list-check mr-1"></i>${e.type==="mcq"?"MCQ":"/"}</span>
              </div>
            </div>
            <div class="flex flex-wrap gap-4 text-sm text-gray-900 dark:text-gray-100">
              <span class="font-semibold text-indigo-700 dark:text-indigo-300"> : ${ro(e.averagePercentage)}</span>
              <span>: ${Er(e.assessedCount)}</span>
              <span class="${e.pendingCount>0?"text-rose-700 dark:text-rose-300 font-semibold":""}">: ${Er(e.pendingCount)}</span>
              <span class="text-emerald-700 dark:text-emerald-300 font-semibold">: ${Er(e.fullPositiveCount)}</span>
            </div>
          </div>
          ${n>0?i:""}
          ${s}
        </div>
      `}).join("");return`
    <div class="card card-body space-y-4 bg-white dark:bg-gray-900 border border-gray-100 dark:border-gray-700">
      <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2">
        <h4 class="text-lg font-semibold text-gray-900 dark:text-gray-50">${r.groupName} -  </h4>
        <span class="text-sm text-gray-800 dark:text-gray-200">
           ${Er(r.evaluationCount)}  
        </span>
      </div>
      <div class="space-y-3">
        ${t}
      </div>
    </div>
  `}function Er(r){const t=Number.isFinite(r)?r:0;return gn!=null&&gn.convertToBanglaNumber?gn.convertToBanglaNumber(Math.round(t)):Math.round(t).toString()}function ro(r){const e=(Number.isFinite(r)?r:0).toFixed(1);return gn!=null&&gn.convertToBanglaNumber?`${gn.convertToBanglaNumber(e)}%`:`${e}%`}function Fo(r,t=2){const n=(Number.isFinite(r)?r:0).toFixed(t);return gn!=null&&gn.convertToBanglaNumber?gn.convertToBanglaNumber(n):n}function iP(r){if(!r)return"";if(gn!=null&&gn.formatTimestamp)return gn.formatTimestamp(r instanceof Date?r:new Date(r));const t=r instanceof Date?r:new Date(r);return Number.isNaN(t.getTime())?"":t.toLocaleDateString("bn-BD",{year:"numeric",month:"short",day:"numeric"})}function Wst(r){if(!r)return null;if(r instanceof Date)return r.getTime();if(typeof r=="number")return r;if(typeof r=="string"){const t=Date.parse(r);return Number.isNaN(t)?null:t}if(typeof r=="object"){if(typeof r.toDate=="function")try{return r.toDate().getTime()}catch{return null}if(typeof r.seconds=="number")return r.seconds*1e3}return null}function an(r){return r?gn!=null&&gn.ensureBengaliText&&typeof gn.ensureBengaliText=="function"?gn.ensureBengaliText(r):typeof r=="string"?r.trim():String(r):""}function Yst(r,t,e=1){const n=an((r==null?void 0:r.name)||(t==null?void 0:t.taskName)||"");if(n)return n;const i=an((r==null?void 0:r.code)||(t==null?void 0:t.taskCode)||"");if(i)return i;const s=Number.isFinite(e)?Er(e):"";return s?` ${s}`:""}function Xst(r){const t=an(r);return(typeof t=="string"?t.replace(/\r?\n/g," "):"").replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Jst(r){return r>=80?"text-emerald-700 dark:text-emerald-300":r>=60?"text-blue-700 dark:text-blue-300":r>=40?"text-amber-700 dark:text-amber-300":"text-rose-700 dark:text-rose-300"}function Zst(r){if(!r)return null;if(typeof r.maxScore=="number")return r.maxScore;if(r.maxScoreBreakdown){const t=r.maxScoreBreakdown;return(parseFloat(t.task)||0)+(parseFloat(t.team)||0)+(parseFloat(t.additional)||0)+(parseFloat(t.mcq)||0)}return null}function tat(r){return!r||!r.maxScoreBreakdown?!1:parseFloat(r.maxScoreBreakdown.mcq)>0}async function vv(){Pn.showLoading("PDF  ...");try{const r=qi.getFilterSection(nc),t=Pg(r);if(!t||!t.groupMetrics||t.groupMetrics.length===0){Pn.showToast("    ","warning");return}await gn.pdfGenerator.generateGroupAnalysisPDF(t.groupMetrics,Pn)}catch(r){console.error("Error generating group analysis PDF:",r),Pn.showToast("PDF    ","error")}finally{Pn.hideLoading()}}async function xv(){const r=qi.getFilterSection(nc);if(!r||r.groupFilter==="all"){Pn.showToast("      ","info");return}Pn.showLoading("PDF  ...");try{const n=(Pg(r).groupDetails||new Map).get(r.groupFilter);if(!n){Pn.showToast("    ","warning");return}await gn.pdfGenerator.generateSingleGroupAnalysisPDF(n,Pn)}catch(t){console.error("Error generating selected group PDF:",t),Pn.showToast("PDF    ","error")}finally{Pn.hideLoading()}}function _v(){window.print()}async function ck(r="all",t=null){Pn.showLoading("PDF  ...");try{const e=qi.get("groups")||[],n=qi.get("students")||[],i=qi.get("tasks")||[],s=qi.get("evaluations")||[];if(e.length===0){Pn.showToast("   ","warning");return}await gn.pdfGenerator.generateGroupWiseFullDetailsPDF(e,n,i,s,Pn,r,t)}catch(e){console.error("Error generating group wise full details PDF:",e),Pn.showToast("PDF    ","error")}finally{Pn.hideLoading()}}let Ro,tr,xd,Gc,_x,sP,eu;const yr={};let aP,Dc=null;function eat(r){return Ro=r.managers.stateManager,tr=r.managers.uiManager,xd=r.services.dataService,sP=r.services.auth.authServiceInstance,eu=r.utils.permissionHelper,Gc=r.utils,_x=r.app,aP=Gc.createDebouncer(300),nat(),iat(),console.log(" Admin component initialized."),{render:rat}}async function rat(){if(!yr.page){console.error(" Admin render failed: Page element #page-admin-management not found.");return}console.log("Rendering Admin Management page..."),tr.showLoading("   ...");try{const r=Ro.get("currentUserData");if((r==null?void 0:r.type)!=="super-admin"){Pw([]),tr.displayEmptyMessage(yr.adminManagementContent,"      "),console.warn("Admin Page: Non-super-admin tried to render.");return}const t=await xd.loadAdmins();Ro.set("admins",t||[]),Pw(t),oP()}catch(r){console.error(" Error rendering admin management page:",r),Pw([]),tr.displayEmptyMessage(yr.adminManagementContent,`     : ${r.message}`)}finally{tr.hideLoading()}}function nat(){yr.page=document.getElementById("page-admin-management"),yr.page?(yr.totalUsers=yr.page.querySelector("#totalUsers"),yr.superAdminCount=yr.page.querySelector("#superAdminCount"),yr.adminCount=yr.page.querySelector("#adminCount"),yr.userCount=yr.page.querySelector("#userCount"),yr.adminSearchInput=yr.page.querySelector("#adminSearchInput"),yr.addAdminBtn=yr.page.querySelector("#addAdminBtn"),yr.adminManagementContent=yr.page.querySelector("#adminManagementContent")):console.error(" Admin init failed: #page-admin-management element not found!")}function iat(){yr.page&&(tr.addListener(yr.adminSearchInput,"input",r=>{const t=r.target.value.trim();aP(()=>{Ro.updateFilters("adminManagement",{searchTerm:t.toLowerCase()}),oP()})}),tr.addListener(yr.addAdminBtn,"click",sat),tr.addListener(yr.adminManagementContent,"click",r=>{var i;const t=r.target.closest(".edit-admin-btn"),e=r.target.closest(".delete-admin-btn"),n=(i=Ro.get("currentUser"))==null?void 0:i.uid;if(t)aat(t.dataset.id);else if(e){const s=e.dataset.id;if(s===n){tr.showToast("      ","warning");return}oat(s)}}))}function Pw(r=[]){const t=r.length,e=r.filter(s=>s.type==="super-admin").length,n=r.filter(s=>s.type==="admin").length,i=r.filter(s=>s.type==="user").length;yr.totalUsers&&(yr.totalUsers.textContent=Gc.convertToBanglaNumber(t)),yr.superAdminCount&&(yr.superAdminCount.textContent=Gc.convertToBanglaNumber(e)),yr.adminCount&&(yr.adminCount.textContent=Gc.convertToBanglaNumber(n)),yr.userCount&&(yr.userCount.textContent=Gc.convertToBanglaNumber(i))}function oP(){var s,a;if(!yr.adminManagementContent)return;const r=Ro.get("admins"),t=((s=Ro.getFilterSection("adminManagement"))==null?void 0:s.searchTerm)||"",e=(a=Ro.get("currentUser"))==null?void 0:a.uid,n=(r||[]).filter(o=>{if(!t)return!0;const A=(o.email||"").toLowerCase().includes(t),l=(o.type||"").toLowerCase().includes(t);return A||l});if(n.sort((o,A)=>(o.email||"").localeCompare(A.email||"")),tr.clearContainer(yr.adminManagementContent),n.length===0){tr.displayEmptyMessage(yr.adminManagementContent," /  ");return}let i=`
        <div class="overflow-x-auto">
            <table class="w-full min-w-[700px] border-collapse">
                <thead>
                    <tr class="bg-gray-100 dark:bg-gray-700">
                        <th class="th"></th>
                        <th class="th"></th>
                        <th class="th text-center"></th>
                        <th class="th text-center"></th>
                    </tr>
                </thead>
                <tbody>
    `;n.forEach(o=>{const l={"super-admin":" ",admin:"",user:""}[o.type]||o.type,c=o.permissions||{},u=o.id!==e;let h="";o.type==="super-admin"?h='<i class="fas fa-star text-yellow-500" title=" "></i>':o.type==="admin"?(h+=c.read?'<i class="fas fa-eye text-green-500 mx-1" title=""></i>':"",h+=c.write?'<i class="fas fa-plus text-blue-500 mx-1" title=""></i>':"",h+=c.edit?'<i class="fas fa-edit text-purple-500 mx-1" title=""></i>':"",h+=c.delete?'<i class="fas fa-trash text-red-500 mx-1" title=""></i>':""):h=c.read?'<i class="fas fa-eye text-green-500 mx-1" title=""></i>':'<i class="fas fa-eye-slash text-gray-400 mx-1" title=" "></i>',i+=`
            <tr class="border-b dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700/50">
                <td class="td p-3">${o.email}</td>
                <td class="td p-3">${l}</td>
                <td class="td p-3 text-center">${h||"-"}</td>
                <td class="td p-3 text-center whitespace-nowrap">
                    <button data-id="${o.id}" class="edit-admin-btn btn btn-light btn-sm p-1 mx-1" aria-label="">
                        <i class="fas fa-edit pointer-events-none"></i>
                    </button>
                    ${u?`
                    <button data-id="${o.id}" class="delete-admin-btn btn btn-danger btn-sm p-1 mx-1" aria-label="">
                        <i class="fas fa-trash pointer-events-none"></i>
                    </button>
                    `:`
                    <span class="inline-block p-1 mx-1" title="    ">
                        <i class="fas fa-trash text-gray-400"></i>
                    </span>
                    `}
                </td>
            </tr>
        `}),i+="</tbody></table></div>",yr.adminManagementContent.innerHTML=i}function sat(){Dc=null,tr.showAdminModal(" /  ",null,AP)}function aat(r){if(!(eu!=null&&eu.canEdit())){tr.showToast(" admin    ","warning");return}const t=Ro.get("admins").find(e=>e.id===r);if(!t){tr.showToast("   ","error");return}Dc=r,tr.showAdminModal("/ ",t,AP)}function oat(r){if(!(eu!=null&&eu.canDelete())){tr.showToast(" admin    ","warning");return}const t=Ro.get("admins").find(n=>n.id===r);if(!t){tr.showToast("   ","error");return}if(t.type==="super-admin"){tr.showToast("      ","warning");return}const e=`     "${t.email}" (${t.type})    ?   Firestore    , Firebase Auth  `;tr.showDeleteModal("  ",e,async()=>{tr.showLoading("  ...");try{await xd.deleteAdmin(r),console.warn(`Firestore document for ${t.email} deleted. Corresponding Firebase Auth user MUST be deleted manually or via Cloud Function.`),tr.showToast("Firestore    Auth    ","warning",5e3),await _x.refreshAllData()}catch(n){console.error(" Error deleting admin:",n),tr.showToast(`   : ${n.message}`,"error")}finally{tr.hideLoading()}})}async function AP(){var a,o,A,l,c,u,h;const r=(a=tr.elements.adminEmail)==null?void 0:a.value.trim(),t=(o=tr.elements.adminPassword)==null?void 0:o.value,e=(A=tr.elements.adminTypeSelect)==null?void 0:A.value,n={read:((l=tr.elements.permissionRead)==null?void 0:l.checked)||!1,write:((c=tr.elements.permissionWrite)==null?void 0:c.checked)||!1,edit:((u=tr.elements.permissionEdit)==null?void 0:u.checked)||!1,delete:((h=tr.elements.permissionDelete)==null?void 0:h.checked)||!1};if(!Gc.validateEmail(r)){tr.showToast("   ","warning");return}if(!Dc&&(!t||t.length<6)){tr.showToast("       ","warning");return}if(Dc&&t&&t.length<6){tr.showToast("     ","warning");return}let i={email:r,type:e,permissions:e==="super-admin"?{read:!0,write:!0,edit:!0,delete:!0}:e==="admin"?{read:n.read,write:n.write,edit:!1,delete:!1}:{read:!0,write:!1,edit:!1,delete:!1}};const s=Dc?"":"";tr.showLoading(` ${s}  ...`);try{if(Dc)await xd.updateAdmin(Dc,i),t?(console.warn(`Password change requested for ${r} but NOT PERFORMED. This requires Admin SDK or re-authentication.`),tr.showToast("      ","warning")):tr.showToast("   ","success");else{if(!confirm(`  :

 admin/user       
 Firebase   

    ?`)){tr.hideLoading();return}if(await sP.registerWithEmail(r,t,e),e==="super-admin"){const f=(await xd.loadAdmins()).find(b=>b.email===r);f&&await xd.updateAdmin(f.id,{permissions:i.permissions})}tr.showToast(` ${r}       `,"warning",5e3)}await _x.refreshAllData(),tr.hideModal(tr.elements.adminModal)}catch(d){console.error(` Error ${s}ing admin:`,d),tr.showToast(` ${s}  : ${d.message}`,"error")}finally{tr.hideLoading()}}let hs,de,ed,od,Bv;const qt={},Aat="",lP=" ",Br={TASK_NAME:" ",GROUP_NAME:" ",STUDENT_NAME:" ",ROLL:"",TASK_SCORE:" ",TEAM_SCORE:" ",MCQ_SCORE:"MCQ ",ADDITIONAL_SCORE:" ",TOTAL_SCORE:" ",MAX_SCORE:" ",COMMENTS:"",ACADEMIC_GROUP:" ",STUDENT_ROLE:" "};let cm,cP=!1,uP=!1;const um="https://www.googleapis.com/auth/drive.file https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile";let Rd=null;const lat="528853580065-9rhps4e6qhhot629gjqqiolul9a2luum.apps.googleusercontent.com";function cat(r){return hs=r.managers.stateManager,de=r.managers.uiManager,ed=r.services.dataService,od=r.utils,Bv=r.app,hat(),fat(),gat(),pat(),console.log(" Export component initialized."),{render:uat}}function uat(){if(!qt.page){console.error(" Export render failed: Page element #page-export not found.");return}console.log("Rendering Export page..."),xat(),dat()}function dat(){if(!qt.exportAssignmentFilter)return;const r=hs.get("tasks")||[],t=qt.exportAssignmentFilter.value;for(;qt.exportAssignmentFilter.options.length>1;)qt.exportAssignmentFilter.remove(1);[...r].sort((n,i)=>{const s=new Date(n.date||0);return new Date(i.date||0)-s}).forEach(n=>{const i=document.createElement("option");i.value=n.id,i.textContent=n.name,qt.exportAssignmentFilter.appendChild(i)}),t&&Array.from(qt.exportAssignmentFilter.options).some(n=>n.value===t)&&(qt.exportAssignmentFilter.value=t)}function hat(){if(qt.page=document.getElementById("page-export"),qt.page){if(qt.exportStudentsCSVBtn=qt.page.querySelector("#exportStudentsCSVBtn"),qt.exportGroupsCSVBtn=qt.page.querySelector("#exportGroupsCSVBtn"),qt.exportEvaluationsCSVBtn=qt.page.querySelector("#exportEvaluationsCSVBtn"),qt.exportAllDataJSONBtn=qt.page.querySelector("#exportAllDataJSONBtn"),qt.exportAllDataZipBtn=qt.page.querySelector("#exportAllDataZipBtn"),qt.exportGroupFullDetailsPDFBtn=qt.page.querySelector("#exportGroupFullDetailsPDFBtn"),qt.exportAssignmentFilter=qt.page.querySelector("#exportAssignmentFilter"),qt.totalStudentsCount=qt.page.querySelector("#totalStudentsCount"),qt.totalGroupsCount=qt.page.querySelector("#totalGroupsCount"),qt.totalEvaluationsCount=qt.page.querySelector("#totalEvaluationsCount"),qt.lastExportTime=qt.page.querySelector("#lastExportTime"),qt.backupRestoreContainer=qt.page.querySelector("#backupRestoreContainer"),!qt.backupRestoreContainer){const r=document.createElement("div");r.id="backupRestoreContainer",r.className="mt-8",qt.page.appendChild(r),qt.backupRestoreContainer=r}}else console.error(" Export init failed: #page-export element not found!")}function fat(){qt.backupRestoreContainer&&(qt.backupRestoreContainer.innerHTML=`
    <div class="bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden">
      <div class="p-4 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900/50 flex justify-between items-center">
        <h3 class="text-lg font-semibold text-gray-800 dark:text-gray-200">
          <i class="fas fa-database mr-2 text-indigo-500"></i>  
        </h3>
        <span class="text-xs text-gray-500 bg-gray-200 dark:bg-gray-700 px-2 py-1 rounded">Advanced</span>
      </div>
      
      <div class="p-6 space-y-6">
        <!-- Local Restore -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <div class="space-y-3">
            <h4 class="text-sm font-medium text-gray-700 dark:text-gray-300"> </h4>
            <p class="text-xs text-gray-500 dark:text-gray-400">
                 JSON          
            </p>
            <div class="space-y-3">
              <button id="downloadLocalBackupBtn" class="btn btn-primary w-full">
                <i class="fas fa-download mr-2"></i>   (JSON)
              </button>
              
              <div class="relative">
                <div class="absolute inset-0 flex items-center" aria-hidden="true">
                  <div class="w-full border-t border-gray-300 dark:border-gray-600"></div>
                </div>
                <div class="relative flex justify-center">
                  <span class="bg-white dark:bg-gray-800 px-2 text-xs text-gray-500">  </span>
                </div>
              </div>

              <div class="flex gap-2">
                <input type="file" id="restoreJSONInput" accept=".json" class="hidden" />
                <button id="triggerRestoreBtn" class="btn btn-secondary w-full">
                  <i class="fas fa-upload mr-2"></i>JSON   
                </button>
              </div>
            </div>
          </div>

          <!-- Google Drive -->
          <div class="space-y-3 border-l pl-0 md:pl-6 border-gray-200 dark:border-gray-700">
            <!-- Google Drive Sync -->
            <div class="space-y-3">
              <h4 class="text-sm font-medium text-gray-700 dark:text-gray-300">Google Drive Sync</h4>
              <p class="text-xs text-gray-500 dark:text-gray-400">
                       
              </p>
              
              <div id="gdriveAuthSection">
                <button id="gdriveConnectBtn" class="btn btn-dark w-full">
                  <i class="fab fa-google-drive mr-2"></i>Google Drive  
                </button>
              </div>

              <div id="gdriveActionsSection" class="hidden space-y-3">
                <!-- User Info & Status -->
                <div class="bg-gray-50 dark:bg-gray-800 p-3 rounded-lg border border-gray-200 dark:border-gray-700">
                  <div class="flex items-center justify-between mb-2">
                    <div class="flex items-center gap-2">
                      <img id="gdriveUserAvatar" src="" alt="User" class="w-8 h-8 rounded-full hidden">
                      <div>
                        <p id="gdriveUserEmail" class="text-xs font-medium text-gray-700 dark:text-gray-300">Connected</p>
                        <p class="text-[10px] text-green-600 dark:text-green-400 flex items-center">
                          <i class="fas fa-circle text-[6px] mr-1"></i>Active
                        </p>
                      </div>
                    </div>
                    <button id="gdriveDisconnectBtn" class="text-xs text-red-500 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-900/20 px-2 py-1 rounded transition-colors" title="Disconnect">
                      <i class="fas fa-sign-out-alt"></i>
                    </button>
                  </div>
                  
                  <div class="text-[10px] text-gray-500 dark:text-gray-400 border-t border-gray-200 dark:border-gray-700 pt-2 flex justify-between items-center">
                    <span>Last Backup:</span>
                    <span id="gdriveLastBackupTime" class="font-mono">Checking...</span>
                  </div>
                </div>

                <div class="grid grid-cols-2 gap-2">
                  <button id="gdriveUploadBtn" class="btn btn-success w-full text-xs">
                    <i class="fas fa-cloud-upload-alt mr-1"></i>
                  </button>
                  <button id="gdriveRestoreBtn" class="btn btn-warning w-full text-xs">
                    <i class="fas fa-cloud-download-alt mr-1"></i>
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  `,qt.downloadLocalBackupBtn=qt.backupRestoreContainer.querySelector("#downloadLocalBackupBtn"),qt.restoreJSONInput=qt.backupRestoreContainer.querySelector("#restoreJSONInput"),qt.triggerRestoreBtn=qt.backupRestoreContainer.querySelector("#triggerRestoreBtn"),qt.gdriveConnectBtn=qt.backupRestoreContainer.querySelector("#gdriveConnectBtn"),qt.gdriveDisconnectBtn=qt.backupRestoreContainer.querySelector("#gdriveDisconnectBtn"),qt.gdriveUploadBtn=qt.backupRestoreContainer.querySelector("#gdriveUploadBtn"),qt.gdriveRestoreBtn=qt.backupRestoreContainer.querySelector("#gdriveRestoreBtn"),qt.gdriveAuthSection=qt.backupRestoreContainer.querySelector("#gdriveAuthSection"),qt.gdriveActionsSection=qt.backupRestoreContainer.querySelector("#gdriveActionsSection"),qt.gdriveUserAvatar=qt.backupRestoreContainer.querySelector("#gdriveUserAvatar"),qt.gdriveUserEmail=qt.backupRestoreContainer.querySelector("#gdriveUserEmail"),qt.gdriveLastBackupTime=qt.backupRestoreContainer.querySelector("#gdriveLastBackupTime"))}function gat(){qt.page&&(de.addListener(qt.exportStudentsCSVBtn,"click",_at),de.addListener(qt.exportGroupsCSVBtn,"click",Bat),de.addListener(qt.exportEvaluationsCSVBtn,"click",Cat),de.addListener(qt.exportAllDataJSONBtn,"click",dk),de.addListener(qt.exportAllDataZipBtn,"click",Eat),de.addListener(qt.exportGroupFullDetailsPDFBtn,"click",()=>{var r;if((r=Bv.components.analysis)!=null&&r.generateGroupWiseFullDetailsPDF){de.showToast("    PDF  ...","info");const t=qt.exportAssignmentFilter?qt.exportAssignmentFilter.value:"all";Bv.components.analysis.generateGroupWiseFullDetailsPDF(t)}else de.showToast("      ","error")}),qt.downloadLocalBackupBtn&&de.addListener(qt.downloadLocalBackupBtn,"click",dk),qt.triggerRestoreBtn&&qt.restoreJSONInput&&(de.addListener(qt.triggerRestoreBtn,"click",()=>qt.restoreJSONInput.click()),de.addListener(qt.restoreJSONInput,"change",r=>{const t=r.target.files[0];t&&vat(t),r.target.value=""})),qt.gdriveConnectBtn&&de.addListener(qt.gdriveConnectBtn,"click",mat),qt.gdriveDisconnectBtn&&de.addListener(qt.gdriveDisconnectBtn,"click",bat),qt.gdriveUploadBtn&&de.addListener(qt.gdriveUploadBtn,"click",yat),qt.gdriveRestoreBtn&&de.addListener(qt.gdriveRestoreBtn,"click",wat))}function pat(){const r=document.createElement("script");r.src="https://apis.google.com/js/api.js",r.onload=()=>{gapi.load("client",async()=>{cP=!0,uk()})},document.head.appendChild(r);const t=document.createElement("script");t.src="https://accounts.google.com/gsi/client",t.onload=()=>{uP=!0,uk()},document.head.appendChild(t)}function uk(){if(cP&&uP){console.log("Google APIs loaded.");const r=localStorage.getItem("gdrive_access_token");r&&(console.log("Restoring Drive session from storage..."),Rd=r,Bx(!0),dP(r),$b(r))}}async function mat(){try{await gapi.client.init({discoveryDocs:[]}),cm=google.accounts.oauth2.initTokenClient({client_id:lat,scope:um,callback:""}),cm.callback=async r=>{if(r.error)throw r;if(console.log("Granted Scopes:",r.scope),!google.accounts.oauth2.hasGrantedAllScopes(r,...um.split(" "))){de.showToast("Google Drive   ","error");return}Rd=r.access_token,localStorage.setItem("gdrive_access_token",r.access_token),Bx(!0),de.showToast("Google Drive  !","success"),dP(r.access_token),$b(r.access_token)},gapi.client.getToken()===null?cm.requestAccessToken({prompt:"consent",scope:um}):cm.requestAccessToken({prompt:"consent",scope:um})}catch(r){console.error("Drive Auth Error:",r),de.showToast("Google Drive   ","error")}}function Bx(r){r?(qt.gdriveAuthSection.classList.add("hidden"),qt.gdriveActionsSection.classList.remove("hidden")):(qt.gdriveAuthSection.classList.remove("hidden"),qt.gdriveActionsSection.classList.add("hidden"))}function bat(){de.showDeleteModal("Disconnect Drive?","     Google Drive   ?",()=>{j0(),de.showToast("Google Drive   ","info")})}function j0(){const r=gapi.client.getToken(),t=(r==null?void 0:r.access_token)||Rd;t&&google.accounts.oauth2.revoke(t,()=>{console.log("Access token revoked")}),gapi.client.setToken(null),Rd=null,localStorage.removeItem("gdrive_access_token"),Bx(!1)}async function dP(r){try{console.log("Fetching user info...");const t=await fetch("https://www.googleapis.com/oauth2/v3/userinfo",{headers:{Authorization:"Bearer "+r}});if(t.status===401){console.warn("User info fetch 401: Token invalid. Disconnecting..."),j0();return}if(t.ok){const e=await t.json();console.log("User Data received:",e),qt.gdriveUserEmail&&(qt.gdriveUserEmail.textContent=e.email),qt.gdriveUserAvatar&&(qt.gdriveUserAvatar.src=e.picture||"",qt.gdriveUserAvatar.classList.toggle("hidden",!e.picture))}else console.warn("User info fetch failed:",t.status)}catch(t){console.error("Error fetching user info:",t)}}async function Cx(r){const t="Smart Evaluate Backup System",e=`mimeType = 'application/vnd.google-apps.folder' and name = '${t}' and trashed = false`;try{const n=await fetch(`https://www.googleapis.com/drive/v3/files?q=${encodeURIComponent(e)}&fields=files(id)`,{headers:{Authorization:"Bearer "+r}});if(n.status===401)throw new Error("401 Unauthorized");if(!n.ok)throw new Error("Folder search failed");const i=await n.json();if(i.files&&i.files.length>0)return i.files[0].id;const s={name:t,mimeType:"application/vnd.google-apps.folder"},a=await fetch("https://www.googleapis.com/drive/v3/files",{method:"POST",headers:{Authorization:"Bearer "+r,"Content-Type":"application/json"},body:JSON.stringify(s)});if(!a.ok)throw new Error("Folder creation failed");return(await a.json()).id}catch(n){throw console.error("Error getting/creating backup folder:",n),n}}async function $b(r){try{qt.gdriveLastBackupTime&&(qt.gdriveLastBackupTime.textContent="Checking...");let t;try{t=await Cx(r)}catch(i){if(i.message&&i.message.includes("401")){console.warn("Backup folder check 401. Disconnecting..."),j0();return}console.warn("Could not get backup folder for checking time, falling back to root search",i)}let e="mimeType = 'application/json' and trashed = false";t&&(e+=` and '${t}' in parents`);const n=await fetch(`https://www.googleapis.com/drive/v3/files?q=${encodeURIComponent(e)}&orderBy=createdTime desc&pageSize=1&fields=files(createdTime)`,{headers:{Authorization:"Bearer "+r}});if(n.status===401){console.warn("Last backup fetch 401. Disconnecting..."),j0();return}if(n.ok){const i=await n.json();if(i.files&&i.files.length>0){const s=new Date(i.files[0].createdTime).toLocaleString("bn-BD");qt.gdriveLastBackupTime&&(qt.gdriveLastBackupTime.textContent=s)}else qt.gdriveLastBackupTime&&(qt.gdriveLastBackupTime.textContent="No backup found")}}catch(t){console.error("Error fetching last backup time:",t),qt.gdriveLastBackupTime&&(qt.gdriveLastBackupTime.textContent="Error")}}async function yat(){var r,t;de.showLoading("Google Drive-  ...");try{const e=gapi.client.getToken(),n=(e==null?void 0:e.access_token)||Rd;if(!n){de.showToast("    ","error"),de.hideLoading();return}const{groups:i,students:s,tasks:a,evaluations:o,admins:A}=hs.getState(),l={exportDate:new Date().toISOString(),groups:i,students:s,tasks:a,evaluations:o,admins:((r=hs.get("currentUserData"))==null?void 0:r.type)==="super-admin"?A:void 0},c=JSON.stringify(l,null,2),u=`smart_evaluator_backup_${new Date().toISOString().split("T")[0]}.json`,h=await Cx(n),d=new Blob([c],{type:"application/json"}),m={name:u,mimeType:"application/json",parents:[h]},f=new FormData;f.append("metadata",new Blob([JSON.stringify(m)],{type:"application/json"})),f.append("file",d);const b=await fetch("https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart&fields=id",{method:"POST",headers:new Headers({Authorization:"Bearer "+n}),body:f}),y=await b.json();if(!b.ok)throw console.error("Drive API Error Details:",y),new Error(((t=y.error)==null?void 0:t.message)||"Upload failed");if(y.id)de.showToast("    !","success"),$b(n);else throw new Error("Upload failed")}catch(e){console.error("Drive Upload Error:",e),de.showToast("   ","error")}finally{de.hideLoading()}}async function wat(){de.showLoading("   ...");try{const r=gapi.client.getToken(),t=(r==null?void 0:r.access_token)||Rd;if(!t){de.showToast("    ","error"),de.hideLoading();return}let e;try{e=await Cx(t)}catch(l){console.warn("Could not get backup folder for restore, falling back to root search",l)}let n="mimeType = 'application/json' and trashed = false";e&&(n+=` and '${e}' in parents`);const a=(await(await fetch(`https://www.googleapis.com/drive/v3/files?q=${encodeURIComponent(n)}&orderBy=createdTime desc&pageSize=10&fields=files(id, name, createdTime)`,{headers:{Authorization:"Bearer "+t}})).json()).files;if(!a||a.length===0){de.showToast("    ","info"),de.hideLoading();return}const o=a[0],A=`    :
: ${o.name}
: ${new Date(o.createdTime).toLocaleString("bn-BD")}`;de.hideLoading(),de.showConfirmModal(" ",A,async()=>{de.showLoading("   ...");try{const l=o.id,c=await fetch(`https://www.googleapis.com/drive/v3/files/${l}?alt=media`,{headers:{Authorization:"Bearer "+t}});if(!c.ok)throw new Error("Download failed");const u=await c.json();await hP(u),de.showToast("   !","success"),$b(t)}catch(l){console.error("Restore Error:",l),de.showToast("  ","error")}finally{de.hideLoading()}}," ","btn-warning")}catch(r){console.error("Drive Restore Error:",r),de.showToast("    ","error")}finally{de.hideLoading()}}async function vat(r){de.showLoading("    ...");const t=new FileReader;t.onload=async e=>{try{const n=JSON.parse(e.target.result);await hP(n)}catch(n){console.error("JSON Parse Error:",n),de.showToast(" JSON ","error"),de.hideLoading()}},t.readAsText(r)}async function hP(r){de.showLoading("  ...    ");try{if(!r.students&&!r.groups&&!r.tasks)throw new Error("    ");r.groups&&await ed.restoreCollection("groups",r.groups),r.students&&await ed.restoreCollection("students",r.students),r.tasks&&await ed.restoreCollection("tasks",r.tasks),r.evaluations&&await ed.restoreCollection("evaluations",r.evaluations),r.admins&&await ed.restoreCollection("admins",r.admins),de.showToast("    !   ...","success"),setTimeout(()=>{window.location.reload()},2e3)}catch(t){console.error("Restore Error:",t),de.showToast(` : ${t.message}`,"error"),de.hideLoading()}}function xat(){const{students:r,groups:t,evaluations:e}=hs.getState(),n=(s,a)=>{s&&(s.textContent=od.convertToBanglaNumber(a))};n(qt.totalStudentsCount,(r==null?void 0:r.length)||0),n(qt.totalGroupsCount,(t==null?void 0:t.length)||0),n(qt.totalEvaluationsCount,(e==null?void 0:e.length)||0);const i=localStorage.getItem("lastExportTimestamp");qt.lastExportTime&&(qt.lastExportTime.textContent=i?new Date(i).toLocaleTimeString("bn-BD",{hour:"numeric",minute:"2-digit"}):"-")}async function _at(){de.showLoading(" CSV  ...");try{const r=hs.get("students")||[],t=hs.get("groups")||[],e=new Map(t.map(s=>[s.id,s.name])),n=r.map(s=>({:s.name,:s.roll,:s.gender," ":s.academicGroup,:s.session,:s.contact||""," ":e.get(s.groupId)||""," ":s.role||""})).sort((s,a)=>(s.||"").localeCompare(a.||"","bn"));if(n.length===0){de.showToast("     ","info");return}const i=Papa.unparse(n,{header:!0});Ng(i,"students_export.csv","text/csv;charset=utf-8;"),de.showToast(" CSV    ","success")}catch(r){console.error(" Error exporting students CSV:",r),de.showToast(`CSV   : ${r.message}`,"error")}finally{de.hideLoading(),Dg()}}async function Bat(){de.showLoading(" CSV  ...");try{const r=hs.get("groups")||[],t=hs.get("students")||[],e=r.map(i=>({" ":i.name," ":t.filter(s=>s.groupId===i.id).length})).sort((i,s)=>(i[" "]||"").localeCompare(s[" "]||"","bn"));if(e.length===0){de.showToast("     ","info");return}const n=Papa.unparse(e,{header:!0});Ng(n,"groups_export.csv","text/csv;charset=utf-8;"),de.showToast(" CSV    ","success")}catch(r){console.error(" Error exporting groups CSV:",r),de.showToast(`CSV   : ${r.message}`,"error")}finally{de.hideLoading(),Dg()}}async function Cat(){de.showLoading(" CSV  ...");try{const r=hs.get("evaluations")||[],t=hs.get("students")||[],e=hs.get("tasks")||[],n=hs.get("groups")||[],i=new Map(t.map(l=>[l.id,l])),s=new Map(e.map(l=>[l.id,l])),a=new Map(n.map(l=>[l.id,l.name])),o=[];if(r.forEach(l=>{const c=s.get(l.taskId),u=a.get(l.groupId)||l.groupName||"",h=(c==null?void 0:c.name)||l.taskName||"",d=(c==null?void 0:c.date)||l.taskDate||"",{display:m,sortValue:f}=Cv(d),b=Number.parseFloat(l.maxPossibleScore)||Number.parseFloat(c==null?void 0:c.maxScore)||(typeof TOTAL_MAX_SCORE<"u"?TOTAL_MAX_SCORE:"");l!=null&&l.scores&&typeof l.scores=="object"&&Object.entries(l.scores).forEach(([y,B={}])=>{const I=i.get(String(y));if(!I)return;const C={[Br.TASK_NAME]:h,[Br.GROUP_NAME]:u,[Br.STUDENT_NAME]:I.name??"",[Br.ROLL]:I.roll??"",[Br.ACADEMIC_GROUP]:I.academicGroup??"",[Br.STUDENT_ROLE]:I.role??"",[Br.TASK_SCORE]:B.taskScore??"",[Br.TEAM_SCORE]:B.teamScore??"",[Br.MCQ_SCORE]:B.mcqScore??"",[Br.ADDITIONAL_SCORE]:B.additionalScore??"",[Br.TOTAL_SCORE]:B.totalScore??"",[Br.MAX_SCORE]:b??"",[Br.COMMENTS]:B.comments??"",[lP]:m??"",__sortDate:f??Number.NEGATIVE_INFINITY};o.push(C)})}),o.length===0){de.showToast("     ","info");return}o.sort((l,c)=>{const u=(c.__sortDate??Number.NEGATIVE_INFINITY)-(l.__sortDate??Number.NEGATIVE_INFINITY);if(u!==0)return u;const h=String(l[Br.GROUP_NAME]||"").localeCompare(String(c[Br.GROUP_NAME]||""),"bn");return h!==0?h:String(l[Br.ROLL]||"").localeCompare(String(c[Br.ROLL]||""),void 0,{numeric:!0})}),o.forEach(l=>delete l.__sortDate);const A=Papa.unparse(o,{header:!0});Ng(A,"evaluations_export.csv","text/csv;charset=utf-8;"),de.showToast(" CSV    ","success")}catch(r){console.error(" Error exporting evaluations CSV:",r),de.showToast(`CSV   : ${r.message}`,"error")}finally{de.hideLoading(),Dg()}}function dk(){var r;de.showLoading("JSON   ...");try{const{groups:t,students:e,tasks:n,evaluations:i,admins:s}=hs.getState(),a={exportDate:new Date().toISOString(),groups:t,students:e,tasks:n,evaluations:i,admins:((r=hs.get("currentUserData"))==null?void 0:r.type)==="super-admin"?s:void 0},o=JSON.stringify(a,null,2);Ng(o,"smart_evaluator_backup.json","application/json;charset=utf-8;"),de.showToast("  JSON    ","success")}catch(t){console.error(" Error exporting all data JSON:",t),de.showToast(`JSON   : ${t.message}`,"error")}finally{de.hideLoading(),Dg()}}async function Eat(){const r=window.JSZip;if(!r){de.showToast("ZIP  (JSZip)   ","error"),console.error("JSZip library not found. Please include it in index.html");return}de.showLoading("ZIP   ...");try{const t=new r,{groups:e=[],students:n=[],tasks:i=[],evaluations:s=[]}=hs.getState(),a="\uFEFF",o=new Map(e.map(f=>[f.id,f.name])),A=n.map(f=>({:f.name,:f.roll,:f.gender," ":f.academicGroup,:f.session,:f.contact||""," ":o.get(f.groupId)||""," ":f.role||""})).sort((f,b)=>(f.||"").localeCompare(b.||"","bn"));A.length>0&&t.file("students.csv",a+Papa.unparse(A));const l=e.map(f=>({" ":f.name," ":n.filter(b=>b.groupId===f.id).length})).sort((f,b)=>(f[" "]||"").localeCompare(b[" "]||"","bn"));l.length>0&&t.file("groups.csv",a+Papa.unparse(l));const c=i.map(f=>{var I,C,N,R;const{display:b,sortValue:y}=Cv(f.date),B={" ":f.name,"  ":f.maxScore,_:(I=f.maxScoreBreakdown)==null?void 0:I.task,_:(C=f.maxScoreBreakdown)==null?void 0:C.team,_:(N=f.maxScoreBreakdown)==null?void 0:N.additional,_MCQ:(R=f.maxScoreBreakdown)==null?void 0:R.mcq,:f.description||""};return B[Aat]=b,B.__sortDate=y,B}).sort((f,b)=>{const y=(b.__sortDate??Number.NEGATIVE_INFINITY)-(f.__sortDate??Number.NEGATIVE_INFINITY);return y!==0?y:String(f[" "]||"").localeCompare(String(b[" "]||""),"bn")});c.forEach(f=>delete f.__sortDate),c.length>0&&t.file("tasks.csv",a+Papa.unparse(c));const u=new Map(n.map(f=>[f.id,f])),h=new Map(i.map(f=>[f.id,f])),d=[];s.forEach(f=>{const b=h.get(f.taskId),y=o.get(f.groupId)||f.groupName||"",B=(b==null?void 0:b.name)||f.taskName||"",I=(b==null?void 0:b.date)||f.taskDate||"",{display:C,sortValue:N}=Cv(I),R=Number.parseFloat(f.maxPossibleScore)||Number.parseFloat(b==null?void 0:b.maxScore)||(typeof TOTAL_MAX_SCORE<"u"?TOTAL_MAX_SCORE:"");f!=null&&f.scores&&typeof f.scores=="object"&&Object.entries(f.scores).forEach(([U,x={}])=>{const v=u.get(U);if(!v)return;const T={[Br.TASK_NAME]:B,[Br.GROUP_NAME]:y,[Br.STUDENT_NAME]:v.name??"",[Br.ROLL]:v.roll??"",[Br.ACADEMIC_GROUP]:v.academicGroup??"",[Br.STUDENT_ROLE]:v.role??"",[Br.TASK_SCORE]:x.taskScore??"",[Br.TEAM_SCORE]:x.teamScore??"",[Br.MCQ_SCORE]:x.mcqScore??"",[Br.ADDITIONAL_SCORE]:x.additionalScore??"",[Br.TOTAL_SCORE]:x.totalScore??"",[Br.MAX_SCORE]:R??"",[Br.COMMENTS]:x.comments??""};T[lP]=C??"",T.__sortDate=N??Number.NEGATIVE_INFINITY,d.push(T)})}),d.length>0&&(d.sort((f,b)=>{const y=(b.__sortDate??Number.NEGATIVE_INFINITY)-(f.__sortDate??Number.NEGATIVE_INFINITY);if(y!==0)return y;const B=String(f[Br.GROUP_NAME]||"").localeCompare(String(b[Br.GROUP_NAME]||""),"bn");return B!==0?B:String(f[Br.ROLL]||"").localeCompare(String(b[Br.ROLL]||""),void 0,{numeric:!0})}),d.forEach(f=>delete f.__sortDate),t.file("evaluations_detailed.csv",a+Papa.unparse(d)));const m=await t.generateAsync({type:"blob"});Ng(m,`smart_evaluator_backup_${new Date().toISOString().split("T")[0]}.zip`),de.showToast("  ZIP    ","success")}catch(t){console.error(" Error exporting all data ZIP:",t),de.showToast(`ZIP   : ${t.message}`,"error")}finally{de.hideLoading(),Dg()}}function Cv(r){if(r==null||r==="")return{display:"",sortValue:Number.NEGATIVE_INFINITY};let t=null;if(r instanceof Date)t=r;else if(typeof r=="number")t=new Date(r);else if(typeof r=="string"){const i=Date.parse(r);Number.isNaN(i)||(t=new Date(i))}else if(typeof r=="object")if(typeof r.toDate=="function")try{t=r.toDate()}catch{t=null}else typeof r.seconds=="number"&&(t=new Date(r.seconds*1e3));const e=od!=null&&od.formatTimestamp?od.formatTimestamp(t||r):t?t.toISOString().split("T")[0]:String(r??"");let n=Number.NEGATIVE_INFINITY;if(t instanceof Date&&!Number.isNaN(t.getTime()))n=t.getTime();else if(typeof r=="number"&&Number.isFinite(r))n=r;else if(typeof r=="string"){const i=Date.parse(r);Number.isNaN(i)||(n=i)}return{display:e||"",sortValue:n}}function Ng(r,t,e=""){const n=e.startsWith("text/csv")&&typeof r=="string"?`\uFEFF${r}`:r,i=n instanceof Blob?n:new Blob([n],{type:e}),s=document.createElement("a"),a=URL.createObjectURL(i);s.href=a,s.download=t,document.body.appendChild(s),s.click(),setTimeout(()=>{document.body.removeChild(s),window.URL.revokeObjectURL(a)},100)}function Dg(){const r=new Date,t=r.toLocaleTimeString("bn-BD",{hour:"numeric",minute:"2-digit"});qt.lastExportTime&&(qt.lastExportTime.textContent=t),localStorage.setItem("lastExportTimestamp",r.toISOString())}let So;const Cf={},Ex=[{title:" ",icon:"fas fa-users",tone:"indigo",rules:["  -    (  )","         ","      ","          "]},{title:" ",icon:"fas fa-sitemap",tone:"emerald",rules:["   :  ,  ,  , ,   ","          (  )"," ,         "]},{title:" ",icon:"fas fa-clipboard-check",tone:"amber",rules:["     , MCQ = 40 , = 100 ","   : / ( ),  ( ),   ( )","      ",":    (+),   (+)"]},{title:"  ",icon:"fas fa-trophy",tone:"purple",rules:["   (  )     ","           ","         ","      "]}],hk={indigo:{icon:"bg-indigo-100 text-indigo-700",dot:"bg-indigo-500",border:"border-indigo-100"},emerald:{icon:"bg-emerald-100 text-emerald-700",dot:"bg-emerald-500",border:"border-emerald-100"},amber:{icon:"bg-amber-100 text-amber-700",dot:"bg-amber-500",border:"border-amber-100"},purple:{icon:"bg-purple-100 text-purple-700",dot:"bg-purple-500",border:"border-purple-100"}};let Ef=[...Ex];function Sat(r){return r.managers.uiManager,So=r.utils,Fat(),tg(),console.log(" Policy component initialized."),{render:tg,setPolicyData:kat,expandAll:Iat,collapseAll:Tat}}function tg(){if(!Cf.page||!Cf.policySectionsContainer)return;const t=(Array.isArray(Ef)&&Ef.length?Ef:Ex).map(Lat).join("");Cf.policySectionsContainer.innerHTML=`
    <div class="grid gap-4 lg:grid-cols-2" aria-live="polite">
      ${t}
    </div>
  `}function kat(r=[]){Array.isArray(r)&&r.length?Ef=r.map(Uat):Ef=[...Ex],tg()}function Iat(){tg()}function Tat(){tg()}function Fat(){Cf.page=document.getElementById("page-group-policy"),Cf.policySectionsContainer=document.getElementById("policySections")}function Lat(r,t){const{title:e,icon:n,rules:i,tone:s}=r,a=hk[s]||hk.indigo,o=i.map(l=>`
        <li class="flex gap-3">
          <span class="mt-2 h-2 w-2 rounded-full ${a.dot}"></span>
          <span class="text-sm text-gray-600 dark:text-gray-300">${gk(l)}</span>
        </li>`).join(""),A=So!=null&&So.convertToBanglaNumber?So.convertToBanglaNumber(String(t+1)):t+1;return`
    <article class="rounded-2xl border ${a.border} bg-white dark:bg-gray-900/80 p-4 shadow-sm hover:shadow-xl transition-shadow duration-300">
      <div class="flex items-center gap-3">
        <span class="flex h-10 w-10 items-center justify-center rounded-xl ${a.icon}">
          <i class="${n} text-base"></i>
        </span>
        <div>
          <p class="text-[10px] font-semibold text-gray-400"> ${A}</p>
          <h3 class="text-base font-semibold text-gray-900 dark:text-white">${gk(e)}</h3>
        </div>
      </div>
      <ul class="mt-3 space-y-1.5">${o}</ul>
    </article>
  `}function Uat(r={}){const t=Array.isArray(r.rules)?r.rules.map(e=>fk(e)).filter(Boolean):[];return{title:fk(r.title)||" ",icon:r.icon||"fas fa-book-open",tone:r.tone||"indigo",rules:t.length?t:["    "]}}function fk(r){return r?So!=null&&So.ensureBengaliText&&typeof So.ensureBengaliText=="function"?So.ensureBengaliText(r):typeof r=="string"?r.trim():String(r).trim():""}function gk(r){return String(r||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}let Ev,jb,CA;const Vs={};let dm=null;const fP=["upcoming","ongoing","completed"],Ka={upcoming:{label:" ",chip:"bg-sky-100 text-sky-700 dark:bg-sky-900/30 dark:text-sky-200",card:"border-sky-100 dark:border-sky-800/60",icon:"fas fa-calendar-plus text-sky-500"},ongoing:{label:" ",chip:"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-200",card:"border-amber-100 dark:border-amber-800/60",icon:"fas fa-spinner text-amber-500"},completed:{label:" ",chip:"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-200",card:"border-emerald-100 dark:border-emerald-800/60",icon:"fas fa-check-circle text-emerald-500"}},Wm={active:"upcoming"},Pat=["all","upcoming","ongoing","completed"],Nat={all:{label:" ",description:" ",icon:"fas fa-layer-group",theme:"slate"},upcoming:{label:Ka.upcoming.label,description:" ",icon:Ka.upcoming.icon,theme:"sky"},ongoing:{label:Ka.ongoing.label,description:" ",icon:Ka.ongoing.icon,theme:"amber"},completed:{label:Ka.completed.label,description:" ",icon:Ka.completed.icon,theme:"emerald"}},Dat=11,Mat=55,Rat=0,Qat=["","","","","","","","","","","",""],Oat=["","","","","","",""];function Hat(r){return Ev=r.managers.stateManager,jb=r.managers.uiManager,CA=r.utils,jat(),Gat(),Vat(),$at(),console.log(" UpcomingAssignments (focus-first + 10:20 rule + soft 3D + rose chef) initialized."),{render:yP}}function Vat(){Vs.page=document.getElementById("page-upcoming-assignments"),Vs.summary=document.getElementById("upcomingAssignmentSummary"),Vs.list=document.getElementById("upcomingAssignmentsList"),Vs.filter=document.getElementById("assignmentStatusFilter"),Vs.filter&&(Vs.filter.classList.add("hidden"),Vs.filter.setAttribute("aria-hidden","true"),Vs.filter.style.display="none")}function $at(){jb.addListener(document,"keydown",r=>{r.key==="Escape"&&(document.querySelectorAll('[data-acc-panel][data-open="true"]').forEach(t=>wP(t,!1)),document.querySelectorAll('[data-acc-btn][aria-expanded="true"]').forEach(t=>t.setAttribute("aria-expanded","false")))})}function jat(){if(document.getElementById("ua-tabs-styles"))return;const r=document.createElement("style");r.id="ua-tabs-styles",r.textContent=`
  .ua-tabbar {
    display: flex;
    flex-wrap: wrap;
    gap: 0.75rem;
    justify-content: center;
    padding: 0.5rem;
    background: transparent;
  }
  
  .ua-tab {
    position: relative;
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 0.75rem;
    padding: 0.6rem 1.2rem;
    border-radius: 12px;
    border: 1px solid rgba(148, 163, 184, 0.2);
    background: rgba(255, 255, 255, 0.6);
    color: #475569;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    backdrop-filter: blur(8px);
    overflow: hidden;
    min-width: 160px;
    flex: 1 1 auto;
  }

  .dark .ua-tab {
    background: rgba(30, 41, 59, 0.6);
    border-color: rgba(148, 163, 184, 0.1);
    color: #94a3b8;
  }

  .ua-tab:hover {
    background: rgba(255, 255, 255, 0.9);
    transform: translateY(-1px);
  }
  .dark .ua-tab:hover {
    background: rgba(30, 41, 59, 0.9);
  }

  /* Active State with Animated Border */
  .ua-tab[aria-selected="true"] {
    background: #fff;
    color: #0f172a;
    border-color: transparent;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
  }
  .dark .ua-tab[aria-selected="true"] {
    background: #1e293b;
    color: #fff;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
  }

  /* Animated Border Gradient */
  .ua-tab[aria-selected="true"]::before {
    content: "";
    position: absolute;
    inset: 0;
    border-radius: 12px;
    padding: 2px; /* Border width */
    background: linear-gradient(90deg, #3b82f6, #8b5cf6, #ec4899, #3b82f6);
    background-size: 300% 100%;
    -webkit-mask: 
       linear-gradient(#fff 0 0) content-box, 
       linear-gradient(#fff 0 0);
    -webkit-mask-composite: xor;
    mask-composite: exclude;
    animation: borderFlow 3s linear infinite;
    pointer-events: none;
  }

  @keyframes borderFlow {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
  }

  /* Specific Theme Colors for Active Text/Icons */
  .ua-tab[aria-selected="true"][data-theme="sky"] { color: #0284c7; }
  .dark .ua-tab[aria-selected="true"][data-theme="sky"] { color: #38bdf8; }

  .ua-tab[aria-selected="true"][data-theme="amber"] { color: #d97706; }
  .dark .ua-tab[aria-selected="true"][data-theme="amber"] { color: #fbbf24; }

  .ua-tab[aria-selected="true"][data-theme="emerald"] { color: #059669; }
  .dark .ua-tab[aria-selected="true"][data-theme="emerald"] { color: #34d399; }

  .ua-tab-label {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.95rem;
    z-index: 1;
  }

  .ua-tab-count {
    font-size: 0.85rem;
    padding: 0.15rem 0.6rem;
    border-radius: 999px;
    background: rgba(0, 0, 0, 0.05);
    font-weight: 700;
    z-index: 1;
  }
  .dark .ua-tab-count {
    background: rgba(255, 255, 255, 0.1);
  }
  
  .ua-tab[aria-selected="true"] .ua-tab-count {
    background: currentColor;
    color: #fff;
    opacity: 0.9;
  }
  .dark .ua-tab[aria-selected="true"] .ua-tab-count {
    color: #1e293b; /* Contrast text for pill */
  }

  .ua-tab-desc { display: none; }

  @media (max-width: 640px) {
    .ua-tab {
      padding: 0.5rem 0.8rem;
      min-width: calc(50% - 0.5rem);
      justify-content: center;
    }
    .ua-tab-label { font-size: 0.85rem; }
    .ua-tab-count { font-size: 0.75rem; }
  }
  `,document.head.appendChild(r)}function Gat(){if(document.getElementById("ua-pill-styles"))return;const r=document.createElement("style");r.id="ua-pill-styles",r.textContent=`
  /* Countdown pill (with conditional colors) */
  .cd-pill{
    display:inline-flex; align-items:center; gap:.45rem;
    border-radius:.7rem; padding:.28rem .65rem;
    font-weight:700; font-size:.875rem; line-height:1.1;
    border:1px solid var(--border);
    background: var(--surface-2);
    box-shadow: var(--inner-highlight);
    white-space:nowrap;
  }
  .cd-green{ color:#166534; background:rgba(187,247,208,.65); border-color:rgba(22,101,52,.25); }
  .dark .cd-green{ color:#A7F3D0; background:rgba(6,95,70,.35); border-color:rgba(167,243,208,.2); }
  .cd-amber{ color:#92400e; background:rgba(254,243,199,.65); border-color:rgba(146,64,14,.25); }
  .dark .cd-amber{ color:#FDE68A; background:rgba(120,53,15,.35); border-color:rgba(253,230,138,.2); }
  .cd-red{ color:#7f1d1d; background:rgba(254,226,226,.85); border-color:rgba(127,29,29,.22); }
  .dark .cd-red{ color:#fecaca; background:rgba(127,29,29,.28); border-color:rgba(254,202,202,.18); }
  @keyframes uablink { 0%, 60%, 100% { opacity:1 } 30% { opacity:.35 } }
  .cd-blink { animation: uablink 1.2s linear infinite; }

  /* Flat schedule pill aligned with countdown colors */
  .sched-pill{
    display:inline-flex; flex-wrap:wrap; align-items:center; gap:.45rem;
    border-radius:.75rem; padding:.35rem .8rem;
    font-size:.88rem; line-height:1.15;
    font-weight:600;
    border:1px solid rgba(148,163,184,.35);
    background: rgba(248,250,252,.85);
    color:#0f172a;
    white-space:normal;
    box-shadow: var(--inner-highlight);
  }
  .dark .sched-pill{
    background: rgba(30,41,59,.45);
    border-color: rgba(148,163,184,.35);
    color:#e2e8f0;
  }
  .sched-pill__label{
    font-weight:700;
    letter-spacing:.01em;
  }
  .sched-pill__value{
    font-weight:600;
  }
  .sched-pill[data-status="upcoming"]{
    background: rgba(16,185,129,.15);
    border-color: rgba(16,185,129,.35);
    color:#065f46;
  }
  .dark .sched-pill[data-status="upcoming"]{
    background: rgba(5,150,105,.35);
    border-color: rgba(16,185,129,.45);
    color:#a7f3d0;
  }
  .sched-pill[data-status="ongoing"]{
    background: rgba(251,191,36,.2);
    border-color: rgba(245,158,11,.35);
    color:#7c2d12;
  }
  .dark .sched-pill[data-status="ongoing"]{
    background: rgba(120,53,15,.35);
    border-color: rgba(251,191,36,.45);
    color:#fde68a;
  }
  .sched-pill[data-status="completed"]{
    background: rgba(148,163,184,.25);
    border-color: rgba(71,85,105,.35);
    color:#1f2937;
  }
  .dark .sched-pill[data-status="completed"]{
    background: rgba(30,41,59,.55);
    border-color: rgba(148,163,184,.45);
    color:#cbd5f5;
  }
  `,document.head.appendChild(r)}function Sv(r){if(!r)return null;try{if(typeof r.toDate=="function")return r.toDate();const t=new Date(r);return Number.isNaN(t.getTime())?null:t}catch{return null}}function Kat(r=[]){const t=(r==null?void 0:r.map((n,i)=>{const s=Sv(n==null?void 0:n.createdAt),a=Sv(n==null?void 0:n.date),o=s==null?void 0:s.getTime(),A=a==null?void 0:a.getTime(),l=Number.isFinite(o)?o:Number.isFinite(A)?A:i;return{id:n==null?void 0:n.id,timestamp:l,fallbackIndex:i}}).filter(n=>n.id))||[];t.sort((n,i)=>n.timestamp!==i.timestamp?n.timestamp-i.timestamp:n.fallbackIndex-i.fallbackIndex);const e=new Map;return t.forEach((n,i)=>e.set(n.id,i+1)),e}function gP(r){if(!r)return null;const t=new Date(r);return t.setHours(Dat,Mat,Rat,0),t}function La(r){const t=String(r);return CA!=null&&CA.convertToBanglaNumber?CA.convertToBanglaNumber(t):t}function zat(r){if(!(r instanceof Date)||Number.isNaN(r.getTime()))return"  ";const t=La(String(r.getDate()).padStart(2,"0")),e=Qat[r.getMonth()]||"",n=La(r.getFullYear()),i=Oat[r.getDay()]||"",s=pP(r);return`${t} ${e} ${n} - ${i}, ${s}`}function pP(r){const t=r.getHours(),e=r.getMinutes(),n=qat(t),i=t>=12?"pm":"am",s=t%12||12,a=String(e).padStart(2,"0"),o=`${La(s)}:${La(a)}`;return`${n} ${o} ${i}`}function qat(r){return r<4?"":r<12?"":r<16?"":r<19?"":""}function mP(r){var d;const t=Date.now(),e=((d=r==null?void 0:r.getTime)==null?void 0:d.call(r))??NaN;if(Number.isNaN(e))return{valid:!1};let n=0;try{const m=new Date;m.setHours(0,0,0,0);const f=new Date(r);f.setHours(0,0,0,0),n=Math.round((f.getTime()-m.getTime())/864e5)}catch{n=0}let i=e-t;const s=i<=0;s&&(i=Math.abs(i));const a=Math.floor(i/1e3),o=Math.floor(a/86400),A=Math.floor(a%86400/3600),l=Math.floor(a%3600/60),c=a%60,u=s?0:Math.ceil((e-t)/864e5),h=s?Number.POSITIVE_INFINITY:e-t;return{valid:!0,past:s,days:o,hours:A,minutes:l,seconds:c,remainingDays:u,remainingMs:h,dayDiff:n}}function bP(r,t=!0){if(!r.valid)return" ";const e=La(r.days),n=La(r.hours),i=La(r.minutes),s=La(r.seconds);let a="  ";r.past?a=r.dayDiff===-1?"  ":" ":r.dayDiff===0?a=" ":r.dayDiff===1?a=" ":r.dayDiff===2&&(a=" ");const o=r.past?"":"",A=[];return r.days>0&&A.push(`${e} `),A.push(`${n} `,`${i} `,`${s} `),`${a}: ${A.join(" ")} ${o}`}function Wat(r){if(!r.valid)return"cd-pill";if(r.past)return"cd-pill cd-red";const t=r.remainingDays;return t>10?"cd-pill cd-green":t>=6?"cd-pill cd-amber":t>3?"cd-pill cd-red":"cd-pill cd-red cd-blink"}function yP(){if(!Vs.page)return;const r=Ev.get("tasks")||[],t=Ev.get("evaluations")||[],e=Kat(r),n=r.map(l=>eot(l,t,e)),i=Date.now(),s=l=>l.status==="upcoming"?0:l.status==="ongoing"?1:2,a=l=>{const c=l._dateObj;if(!c)return Number.POSITIVE_INFINITY;const u=c.getTime()-i;return u>0?u:Number.POSITIVE_INFINITY},o=l=>l._dateObj?l._dateObj.getTime():-1/0;n.sort((l,c)=>{const u=s(l),h=s(c);if(u!==h)return u-h;if(u===0){const d=a(l),m=a(c);return d!==m?d-m:o(l)-o(c)}return o(c)-o(l)}),e&&e.size>0?n.forEach((l,c)=>{l.assignmentNumber||(l.assignmentNumber=c+1)}):n.forEach((l,c)=>l.assignmentNumber=c+1),Yat(n),Xat(n),sot()}function Yat(r){if(!Vs.summary)return;const t={all:r.length,upcoming:r.filter(i=>i.status==="upcoming").length,ongoing:r.filter(i=>i.status==="ongoing").length,completed:r.filter(i=>i.status==="completed").length},e=`
    <div class="ua-tabbar" role="tablist" aria-label="Assignment filter tabs">
      ${Pat.map(i=>{const s=Nat[i];if(!s)return"";const a=Wm.active===i,o=La(t[i]??0);return`
          <button type="button" role="tab"
            class="ua-tab"
            data-tab="${i}"
            data-theme="${s.theme}"
            aria-selected="${a}">
            <span class="ua-tab-label"><i class="${s.icon}"></i>${s.label}</span>
            <span class="ua-tab-count">${o}</span>
            <span class="ua-tab-desc">${s.description}</span>
          </button>
        `}).join("")}
    </div>
  `;Vs.summary.innerHTML=e,Vs.summary.querySelectorAll("[data-tab]").forEach(i=>{jb.addListener(i,"click",()=>{const s=i.getAttribute("data-tab");!s||s===Wm.active||(Wm.active=s,yP())})})}function Xat(r){if(!Vs.list)return;const t=Wm.active||"all",e=t==="all"?fP:[t];let n="";e.forEach(i=>{const s=r.filter(o=>o.status===i);if(!s.length)return;const a=s.map(Jat).join("");n+=`
      <section class="space-y-4">
        <div class="flex items-center gap-2">
          <span class="chip-3d inline-flex items-center gap-2 rounded-full px-3 py-1 text-sm font-semibold ${Ka[i].chip}">
            <i class="${Ka[i].icon}"></i>${Ka[i].label}
          </span>
          <span class="text-xs text-gray-500 dark:text-gray-400">${La(s.length)}  </span>
        </div>
        <div class="space-y-3">${a}</div>
      </section>
    `}),Vs.list.innerHTML=n||`
    <div class="placeholder-content">
      <i class="fas fa-inbox mr-2"></i>
           
    </div>
  `,tot()}function Jat(r){const t=Ka[r.status]||Ka.upcoming,e=La(r.participants),n=r.assignmentNumber||0,i=La(n),s=r.dateLabel||"  ",a=`acc_${r.id||Math.random().toString(36).slice(2)}`,o=`panel_${r.id||Math.random().toString(36).slice(2)}`,A=`
    <span class="cd-pill" data-cd data-iso="${r.dateISO||""}" data-mode="start">
      <i class="fas fa-hourglass-half"></i>
      <span class="cd-text text-[11px] sm:text-sm">${bP(mP(r._dateObj))}</span>
    </span>
   
  `,l=`${r.scheduleText||" "} :`,c=`
    <span class="sched-pill" data-status="${r.status}">
      <span class="sched-pill__label text-sm sm:text-base">${l}</span>
      <span class="sched-pill__value text-xs sm:text-sm">${s}</span>
    </span>
  `;return`
    <article class="relative card-3d card-3d--bevel focusable flex flex-col sm:flex-row overflow-visible sm:overflow-hidden" tabindex="0" role="group" aria-label="${CA.ensureBengaliText(r.name)}">
      <!-- Left Rail:   (original design) -->
      <div class="flex-shrink-0 w-full sm:w-24 flex flex-row sm:flex-col items-center justify-center gap-2 bg-gray-50 dark:bg-gray-800/60 p-4 border-b sm:border-b-0 sm:border-r border-gray-100 dark:border-gray-700/50">
        <span class="text-xs font-semibold text-gray-500 dark:text-gray-400"></span>
        <span class="text-3xl font-extrabold text-blue-600 dark:text-blue-400">${i}</span>
      </div>

      <!-- Content -->
      <div class="flex-1 p-4 min-w-0">
        <div class="flex flex-col gap-3 md:flex-row md:items-start md:justify-between">
          <div class="min-w-0">
            <!-- Top row: chip + countdown + rose pill -->
            <div class="flex items-center flex-wrap gap-2">
              <span class="chip-3d inline-flex items-center gap-1 rounded-full px-2.5 py-0.5 text-xs font-semibold ${t.chip}">
                <i class="${t.icon}"></i>${t.label}
              </span>
              ${A}
              ${c}
            </div>

            <h4 class="text-xs sm:text-base font-semibold text-gray-900 dark:text-white mt-2">${r.name}</h4>
          </div>

          <div class="flex sm:flex-col  gap-2 text-[10px] sm:text-base text-gray-600 dark:text-gray-300">
            <span class="inline-flex items-center gap-2 rounded-lg bg-gray-100 dark:bg-gray-800/70 px-3 py-1 border border-gray-200/80 dark:border-white/10 shadow-[var(--inner-highlight)]">
              <i class="fas fa-user-check text-blue-500"></i> : ${e}
            </span>
            <span class="inline-flex items-center gap-2 rounded-lg bg-gray-100 dark:bg-gray-800/70 px-3 py-1 border border-gray-200/80 dark:border-white/10 shadow-[var(--inner-highlight)]">
              <i class="fas fa-clock text-purple-500"></i> : ${r.startTimeLabel||" : am"}
            </span>
          </div>
        </div>

        <!-- Accordion -->
        ${Zat(r,a,o)}
      </div>
    </article>
  `}function Zat(r,t,e){const n=(r.description||"").trim();if(!n)return"";const i=n.split(/[\n,]+/).map(a=>a.trim()).filter(Boolean),s=i.length<=1?`<p class="leading-relaxed">${CA.ensureBengaliText(n)}</p>`:`<ul class="list-disc list-inside space-y-1.5">${i.map(a=>`<li>${CA.ensureBengaliText(a)}</li>`).join("")}</ul>`;return`
    <div class="mt-4">
      <button
        id="${t}"
        data-acc-btn
        class="w-full flex items-center justify-between gap-3 rounded-xl border border-gray-300/80 dark:border-white/10 bg-gray-50 dark:bg-gray-800/60 px-4 py-2.5 text-left focusable"
        aria-expanded="false"
        aria-controls="${e}"
      >
        <span class="inline-flex items-center gap-2 text-sm font-semibold">
          <i class="fas fa-list-check"></i>
          -
        </span>
        <i class="fas fa-chevron-down transition-transform duration-200 ease-out" data-acc-chevron></i>
      </button>

      <div
        id="${e}"
        data-acc-panel
        data-open="false"
        class="overflow-hidden rounded-xl border border-gray-200/80 dark:border-white/10 bg-white/70 dark:bg-gray-900/60 mt-2"
        style="max-height:0; transition:max-height .28s ease;"
      >
        <div class="p-4 text-sm text-gray-700 dark:text-gray-300">${s}</div>
      </div>
    </div>
  `}function tot(){document.querySelectorAll("[data-acc-btn]").forEach(t=>{if(t.__wired)return;t.__wired=!0;const e=t.getAttribute("aria-controls"),n=document.getElementById(e),i=t.querySelector("[data-acc-chevron]");jb.addListener(t,"click",()=>{const s=t.getAttribute("aria-expanded")==="true";t.setAttribute("aria-expanded",String(!s)),wP(n,!s),i&&(i.style.transform=s?"rotate(0deg)":"rotate(180deg)")})})}function wP(r,t){if(!r)return;const e=r.getAttribute("data-open")==="true";if(t===e)return;const n=r.getBoundingClientRect().height;r.style.maxHeight=n+"px",r.style.overflow="hidden",r.setAttribute("data-open",String(t));const i=t?r.scrollHeight:0;requestAnimationFrame(()=>{r.style.maxHeight=i+"px"});const s=()=>{r.style.maxHeight=t?"none":"0",r.style.overflow=t?"visible":"hidden",r.removeEventListener("transitionend",s)};r.addEventListener("transitionend",s,{once:!0})}function eot(r,t,e){const n=Sv(r.date),i=gP(n)||n,s=rot({...r,date:i}),a=vP(i),o=iot(r.id,t),A=e instanceof Map?e.get(r.id):void 0,l=typeof A=="number"&&Number.isFinite(A)?A:typeof r.assignmentNumber=="number"&&r.assignmentNumber>0?r.assignmentNumber:0;return{id:r.id,name:CA.ensureBengaliText(r.name||" "),status:s,dateLabel:a.label,timelineLabel:a.timelineLabel,scheduleText:a.scheduleText,startTimeLabel:a.startTimeLabel,description:r.description||"",participants:o,assignmentNumber:l,dateISO:i?i.toISOString():"",_dateObj:i}}function rot(r){const t=typeof r.status=="string"?r.status.toLowerCase():"";return fP.includes(t)?t:not(r.date)}function not(r){const{isFuture:t,isToday:e}=vP(r);return t?"upcoming":e?"ongoing":"completed"}function vP(r){if(!r)return{label:"  ",scheduleText:"  ",timelineLabel:" ",startTimeLabel:" : am",isFuture:!1,isToday:!1};const t=gP(r)||r,e=new Date,n=t.getTime()>e.getTime(),s=t.getFullYear()===e.getFullYear()&&t.getMonth()===e.getMonth()&&t.getDate()===e.getDate()&&t.getTime()>=e.getTime(),a=zat(t),o=pP(t);let A=" ",l=" ";return n?(A=" ",l=" "):s&&(A=" ",l=" "),{label:a,scheduleText:A,timelineLabel:l,startTimeLabel:o,isFuture:n,isToday:s}}function iot(r,t){if(!r||!(t!=null&&t.length))return 0;const e=new Set;return t.forEach(n=>{if(n.taskId!==r)return;const i=n.scores||{};Object.keys(i).forEach(s=>e.add(s))}),e.size}function sot(){dm&&(clearInterval(dm),dm=null),pk(),dm=setInterval(pk,1e3)}function pk(){document.querySelectorAll("[data-cd][data-iso]").forEach(t=>{const e=t.getAttribute("data-iso")||"",n=t.getAttribute("data-mode")||"start",i=t.querySelector(".cd-text");if(!e||!i){i&&(i.textContent=" ");return}const s=new Date(e),a=mP(s);i.textContent=bP(a,n==="start");const o=Wat(a);t.className=o})}const EA={TABLE:"table",CHART:"chart"},aot={taskFilter:"all",groupFilter:"all",evaluationType:"all",viewMode:EA.TABLE,showPendingOnly:!1},xP=100;let Ll,Ad,Li;const Un={};let $l=null,Ku=null,mk=null,hm=null;function oot(r){var t;Ll=r.managers.stateManager,Ad=r.managers.uiManager,Li=r.utils,Aot();try{window.matchMedia&&(hm=window.matchMedia("(prefers-color-scheme: dark)"),(t=hm.addEventListener)==null||t.call(hm,"change",()=>ld())),Un.statsContentContainer&&"ResizeObserver"in window&&(mk=new ResizeObserver(()=>{$l&&$l.resize()}),mk.observe(Un.statsContentContainer))}catch{}return console.log(" Statistics component initialized."),{render:ld}}function ld(){if(!Un.page){console.error(" Statistics render failed: Page element #page-statistics not found.");return}const r=lot();Iot(Un.page,()=>{try{const t=pot(r);cot(r,t),dot(t,r)}catch(t){console.error(" Error rendering statistics page:",t),Un.statsContentContainer&&Ad.displayEmptyMessage(Un.statsContentContainer,`    : ${t.message}`)}})}function Aot(){if(Un.page=document.getElementById("page-statistics"),!Un.page){console.error(" Statistics init failed: #page-statistics element not found!");return}Un.filterContainer=Un.page.querySelector("#statsFilterContainer"),Un.statsContentContainer=Un.page.querySelector("#statsContentContainer"),Un.filterContainer||console.warn("Statistics: #statsFilterContainer not found."),Un.statsContentContainer||console.warn("Statistics: #statsContentContainer not found.")}function lot(){const r={...aot,...Ll.getFilterSection("statistics")||{}};return Ll.updateFilters("statistics",r),r}function cot(r,t){if(!Un.filterContainer)return;const{summary:e,groupOptions:n}=t,i=`
    <div class="grid gap-4 md:grid-cols-2 xl:grid-cols-4">
      ${fm(" ",e.totalEvaluations,"bg-blue-50 text-blue-700 dark:bg-blue-900/40 dark:text-blue-200","fa-clipboard-list")}
      ${fm("MCQ ",e.totalMcqEvaluations,"bg-purple-50 text-purple-700 dark:bg-purple-900/40 dark:text-purple-200","fa-brain")}
      ${fm("  (%)",Qd(e.averageScore),"bg-emerald-50 text-emerald-700 dark:bg-emerald-900/40 dark:text-emerald-200","fa-gauge")}
      ${fm(" ",e.pendingStudents,"bg-rose-50 text-rose-700 dark:bg-rose-900/40 dark:text-rose-200","fa-user-clock")}
    </div>
  `,s=`
    <div class="card card-body space-y-4">
      <div class="grid gap-4 lg:grid-cols-3">
        <div>
          <label for="statsGroupFilter" class="label"> </label>
          <select id="statsGroupFilter" class="form-select stats-filter">
            <option value="all"> </option>
            ${n.map(a=>`<option value="${a.id}" ${a.id===r.groupFilter?"selected":""}>${a.label}</option>`).join("")}
          </select>
        </div>
        <div>
          <label class="label"> </label>
          <div class="flex flex-wrap gap-2" id="statsEvaluationTypeButtons">
            ${Lh("all"," ",r.evaluationType==="all")}
            ${Lh("mcq"," MCQ",r.evaluationType==="mcq")}
            ${Lh("regular","/",r.evaluationType==="regular")}
          </div>
        </div>
        <div>
          <label class="label"> </label>
          <div class="flex flex-wrap gap-2" id="statsViewModeButtons">
            ${Lh(EA.TABLE," ",r.viewMode===EA.TABLE)}
            ${Lh(EA.CHART," ",r.viewMode===EA.CHART)}
          </div>
        </div>
      </div>
      <div class="flex flex-col sm:flex-row sm:items-center justify-between gap-4">
        <label class="inline-flex items-center gap-2 text-sm text-gray-600 dark:text-gray-300">
          <input type="checkbox" id="statsPendingToggle" class="form-checkbox stats-filter" ${r.showPendingOnly?"checked":""}/>
              
        </label>
        <div class="text-sm text-gray-500 dark:text-gray-400">
           : ${Ua(e.groupsInView)} / ${Ua(e.totalGroups)}
            : ${Qd(e.participationRate)}
            : ${e.latestEvaluation||""}
        </div>
      </div>
    </div>
  `;Un.filterContainer.innerHTML=`
    <div class="space-y-6">
      ${i}
      ${s}
    </div>
  `,uot(r)}function fm(r,t,e,n){const i=typeof t=="string"?t:Ua(t);return`
    <div class="rounded-2xl border ${e} border-gray-200/60 dark:border-white/10 p-4 shadow-sm backdrop-blur">
      <div class="flex items-center justify-between">
        <div>
          <div class="text-sm font-medium opacity-80">${r}</div>
          <div class="mt-2 text-2xl font-semibold">${i}</div>
        </div>
        <div class="text-3xl opacity-70"><i class="fas ${n}"></i></div>
      </div>
    </div>
  `}function Lh(r,t,e){return`<button type="button" class="px-4 py-2 rounded-full border border-gray-200 dark:border-gray-700 text-sm transition-colors ${e?"bg-blue-600 text-white border-blue-600 shadow":"bg-white dark:bg-gray-800 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}" data-stat-value="${r}">${t}</button>`}function uot(r){const t=Un.filterContainer.querySelector("#statsGroupFilter"),e=Un.filterContainer.querySelectorAll("#statsEvaluationTypeButtons button"),n=Un.filterContainer.querySelectorAll("#statsViewModeButtons button"),i=Un.filterContainer.querySelector("#statsPendingToggle");t&&Ad.addListener(t,"change",s=>{Ll.updateFilters("statistics",{...r,groupFilter:s.target.value}),ld()}),e.forEach(s=>{Ad.addListener(s,"click",()=>{const a=s.getAttribute("data-stat-value");a&&a!==r.evaluationType&&(Ll.updateFilters("statistics",{...r,evaluationType:a}),ld())})}),n.forEach(s=>{Ad.addListener(s,"click",()=>{const a=s.getAttribute("data-stat-value");a&&a!==r.viewMode&&(Ll.updateFilters("statistics",{...r,viewMode:a}),ld())})}),i&&Ad.addListener(i,"change",s=>{Ll.updateFilters("statistics",{...r,showPendingOnly:s.target.checked}),ld()})}function dot(r,t){if(!Un.statsContentContainer)return;const{groupMetrics:e,chartData:n}=r;let i='<div class="space-y-6">';t.viewMode===EA.TABLE?i+=hot(e,t):t.viewMode===EA.CHART&&(i+=fot(e)),t.groupFilter!=="all"&&e.length===1&&(i+=got(e[0])),i+="</div>",Un.statsContentContainer.innerHTML=i,t.viewMode===EA.CHART&&n?(wot(n),setTimeout(()=>{$l&&$l.resize()},0)):kv()}function hot(r,t){if(!r.length)return`
      <div class="card card-body">
        <div class="placeholder-content">
          <i class="fas fa-info-circle mr-2"></i>
                
        </div>
      </div>
    `;const e=[""," "," ","MCQ ","  (%)","  (%)"," "," "],n=r.map(i=>`
        <tr class="border-b border-gray-100 dark:border-gray-700 hover:bg-gray-50/60 dark:hover:bg-gray-800/60 transition">
          <td class="px-4 py-3 font-medium text-gray-800 dark:text-gray-100">${K0(i.groupName)}</td>
          <td class="px-4 py-3 text-gray-700 dark:text-gray-300 text-center">${Ua(i.studentCount)}</td>
          <td class="px-4 py-3 text-gray-700 dark:text-gray-300 text-center">${Ua(i.evaluationCount)}</td>
          <td class="px-4 py-3 text-gray-700 dark:text-gray-300 text-center">${Ua(i.mcqEvaluationCount)}</td>
          <td class="px-4 py-3 text-center">
            <span class="font-semibold ${Cot(i.averageScore)}">${Qd(i.averageScore)}</span>
          </td>
          <td class="px-4 py-3 text-center">
            <span class="font-semibold text-indigo-600 dark:text-indigo-300">${Qd(i.participationRate)}</span>
          </td>
          <td class="px-4 py-3 text-center">
            <span class="font-semibold ${i.pendingStudents>0?"text-rose-500":"text-emerald-500"}">
              ${Ua(i.pendingStudents)}
            </span>
          </td>
          <td class="px-4 py-3 text-gray-600 dark:text-gray-300 text-sm text-center">${i.latestEvaluationLabel||""}</td>
        </tr>
      `).join("");return`
    <div class="card overflow-hidden">
      <div class="card-header flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2">
        <h3 class="text-lg font-semibold text-gray-800 dark:text-white">  </h3>
        <p class="text-sm text-gray-500 dark:text-gray-400">
           : ${t.viewMode===EA.TABLE?"":""}   : ${Bot(t.evaluationType)}
        </p>
      </div>
      <div class="overflow-x-auto">
        <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
          <thead class="bg-gray-50 dark:bg-gray-800/60">
            <tr>
              ${e.map(i=>`<th scope="col" class="px-4 py-3 text-left text-xs font-semibold uppercase tracking-wide text-gray-600 dark:text-gray-300">${i}</th>`).join("")}
            </tr>
          </thead>
          <tbody class="bg-white dark:bg-gray-900/60 divide-y divide-gray-100 dark:divide-gray-800">
            ${n}
          </tbody>
        </table>
      </div>
    </div>
  `}function fot(r){return r.length?`
    <div class="card">
      <div class="card-header flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2">
        <h3 class="text-lg font-semibold text-gray-800 dark:text-white">   </h3>
        <p class="text-sm text-gray-500 dark:text-gray-400">   ,     </p>
      </div>
      <div class="card-body">
        <div class="h-96">
          <canvas id="groupStatisticsChart"></canvas>
        </div>
      </div>
    </div>
  `:`
      <div class="card card-body">
        <div class="placeholder-content">
          <i class="fas fa-chart-column mr-2"></i>
               
        </div>
      </div>
    `}function got(r){if(!r||!r.evaluationDetails.length)return"";const t=r.evaluationDetails.map(e=>`
        <div class="border border-gray-100 dark:border-gray-700 rounded-xl p-4 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4">
          <div>
            <div class="text-base font-semibold text-gray-800 dark:text-white">${K0(e.taskName)}</div>
            <div class="text-xs text-gray-500 dark:text-gray-400 mt-1 flex flex-wrap gap-3">
              <span><i class="fas fa-calendar-day mr-1"></i>${e.dateLabel||""}</span>
              <span><i class="fas fa-list-check mr-1"></i>${e.type==="mcq"?"MCQ":"/"}</span>
            </div>
          </div>
          <div class="flex flex-wrap gap-4 text-sm text-gray-700 dark:text-gray-200">
            <span class="font-semibold text-indigo-600 dark:text-indigo-300"> : ${Qd(e.averagePercentage)}</span>
            <span>: ${Ua(e.assessedCount)}</span>
            <span class="${e.pendingCount>0?"text-rose-500 font-medium":""}">: ${Ua(e.pendingCount)}</span>
          </div>
        </div>
      `).join("");return`
    <div class="card card-body space-y-4">
      <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2">
        <h4 class="text-lg font-semibold text-gray-800 dark:text-white">
          ${K0(r.groupName)} -  
        </h4>
        <span class="text-sm text-gray-500 dark:text-gray-400">
           ${Ua(r.evaluationCount)}  
        </span>
      </div>
      <div class="space-y-3">
        ${t}
      </div>
    </div>
  `}function pot(r){const{groups:t,students:e,tasks:n,evaluations:i}=Ll.getState(),s=new Map,a=new Map(n.map(u=>[u.id,u]));t.forEach(u=>{const h=e.filter(d=>d.groupId===u.id).length;s.set(u.id,{groupId:u.id,groupName:K0(u.name),studentCount:h,evaluationDetails:[],evaluationCounts:{all:0,mcq:0,regular:0},participants:{all:new Set,mcq:new Set,regular:new Set},latestEvaluationMs:null})}),i.forEach(u=>{const h=s.get(u.groupId);if(!h)return;const d=a.get(u.taskId),m=parseFloat(u.maxPossibleScore)||xot(d)||xP,b=_ot(d)?"mcq":"regular",y=u.scores||{},B=Object.keys(y),I=B.length,C=Math.max(h.studentCount-I,0);let N=0;B.forEach(v=>{var _;const T=parseFloat((_=y[v])==null?void 0:_.totalScore)||0,E=m>0?T/m*100:0;N+=E,h.participants.all.add(v),h.participants[b].add(v)});const R=I>0?N/I:0,U=h.studentCount>0?Math.min(100,I/h.studentCount*100):0,x=Eot(u.taskDate||u.completedAt||u.updatedAt||u.createdAt||(d==null?void 0:d.date));x&&(!h.latestEvaluationMs||x>h.latestEvaluationMs)&&(h.latestEvaluationMs=x),h.evaluationCounts.all+=1,h.evaluationCounts[b]+=1,h.evaluationDetails.push({type:b,assessedCount:I,pendingCount:C,averagePercentage:R,weightedScoreSum:N,weight:I,participationRate:U,dateMs:x,dateLabel:G0(x||(d==null?void 0:d.date)),taskName:(d==null?void 0:d.name)||u.taskName||" "})});const o=[];s.forEach(u=>{o.push(mot(u,r))});const A=o.filter(u=>r.groupFilter==="all"?!0:u.groupId===r.groupFilter).filter(u=>r.showPendingOnly?u.pendingStudents>0:!0).sort((u,h)=>h.evaluationCount-u.evaluationCount||h.averageScore-u.averageScore),l=bot(o,A,r),c=yot(A);return{filtersUsed:r,groupMetrics:A,summary:l,chartData:c,groupOptions:o.map(u=>({id:u.groupId,label:u.groupName}))}}function mot(r,t){const e=t.evaluationType==="all"?r.evaluationDetails:r.evaluationDetails.filter(u=>u.type===t.evaluationType),n=e.length,i=e.reduce((u,h)=>u+h.assessedCount,0),s=e.reduce((u,h)=>u+h.pendingCount,0),a=e.reduce((u,h)=>u+h.weightedScoreSum,0),o=e.reduce((u,h)=>u+h.weight,0),A=o>0?a/o:0,l=n>0&&r.studentCount>0?Math.min(100,i/(r.studentCount*n)*100):0,c=e.reduce((u,h)=>h.dateMs&&h.dateMs>u.maxDate?{maxDate:h.dateMs,label:h.dateLabel}:u,{maxDate:-1/0,label:null});return{groupId:r.groupId,groupName:r.groupName,studentCount:r.studentCount,evaluationCount:n,mcqEvaluationCount:r.evaluationCounts.mcq,pendingStudents:s,averageScore:A,participationRate:l,assessedCount:i,weightedScoreSum:a,weight:o,latestEvaluationLabel:c.label||(r.latestEvaluationMs?G0(r.latestEvaluationMs):null),uniqueParticipants:vot(r.participants,t.evaluationType),potentialParticipants:r.studentCount*Math.max(n,1),evaluationDetails:e.sort((u,h)=>(h.dateMs||0)-(u.dateMs||0))}}function bot(r,t,e){const n=t.reduce((u,h)=>u+h.evaluationCount,0),i=e.evaluationType==="mcq"?n:t.reduce((u,h)=>u+h.mcqEvaluationCount,0),s=t.reduce((u,h)=>u+h.pendingStudents,0),a=t.reduce((u,h)=>u+h.weightedScoreSum,0),o=t.reduce((u,h)=>u+h.weight,0),A=t.reduce((u,h)=>u+h.assessedCount,0),l=t.reduce((u,h)=>u+h.potentialParticipants,0),c=t.reduce((u,h)=>{const d=h.evaluationDetails[0];return d!=null&&d.dateMs&&d.dateMs>u?d.dateMs:u},-1/0);return{totalGroups:r.length,groupsInView:t.length,totalEvaluations:n,totalMcqEvaluations:i,averageScore:o>0?a/o:0,pendingStudents:s,participationRate:l>0?Math.min(100,A/l*100):0,latestEvaluation:c>0?G0(c):null}}function yot(r){if(!r.length)return null;const t=kot(),e=r.map(o=>o.groupName),n=r.map(o=>Number(o.averageScore.toFixed(2))),i=r.map(o=>Number(o.participationRate.toFixed(2))),s=r.map(o=>o.pendingStudents),a=s.length?Math.max(...s):0;return{labels:e,datasets:[{type:"bar",label:"  (%)",data:n,backgroundColor:t.scoreBar,borderRadius:8,yAxisID:"y"},{type:"bar",label:"  (%)",data:i,backgroundColor:t.partBar,borderRadius:8,yAxisID:"y"},{type:"line",label:"  ()",data:s,backgroundColor:t.pendLine,borderColor:t.pendLineBorder,pointBackgroundColor:t.pendLineBorder,pointBorderColor:t.pendLineBorder,pointRadius:3,borderWidth:2,tension:.35,fill:!1,yAxisID:"y1"}],options:{maintainAspectRatio:!1,responsive:!0,interaction:{mode:"index",intersect:!1},scales:{y:{beginAtZero:!0,max:xP,ticks:{color:t.ticks,callback:o=>`${o}%`},grid:{color:t.grid}},y1:{beginAtZero:!0,position:"right",suggestedMax:a*1.2||10,ticks:{color:t.ticks,callback:o=>Ua(o)},grid:{drawOnChartArea:!1}},x:{ticks:{color:t.ticks},grid:{color:t.grid}}},plugins:{tooltip:{backgroundColor:t.tooltipBg,titleColor:t.tooltipFg,bodyColor:t.tooltipFg,callbacks:{label:o=>o.dataset.yAxisID==="y1"?`${o.dataset.label}: ${Ua(o.parsed.y)} `:`${o.dataset.label}: ${Qd(o.parsed.y)}`}},legend:{labels:{usePointStyle:!0,color:t.legend}}},animation:!1}}}function wot(r){const t=document.getElementById("groupStatisticsChart");t&&(kv(),$l=new Chart(t.getContext("2d"),{type:"bar",data:{labels:r.labels,datasets:r.datasets},options:r.options}))}function kv(){$l&&($l.destroy(),$l=null)}function vot(r,t){return t==="mcq"?r.mcq.size:t==="regular"?r.regular.size:r.all.size}function xot(r){if(!r)return null;if(typeof r.maxScore=="number")return r.maxScore;if(r.maxScoreBreakdown){const t=r.maxScoreBreakdown;return(parseFloat(t.task)||0)+(parseFloat(t.team)||0)+(parseFloat(t.additional)||0)+(parseFloat(t.mcq)||0)}return null}function _ot(r){return!r||!r.maxScoreBreakdown?!1:parseFloat(r.maxScoreBreakdown.mcq)>0}function Bot(r){switch(r){case"mcq":return"MCQ";case"regular":return"/";default:return" "}}function Cot(r){return r>=80?"text-emerald-500":r>=60?"text-blue-500":r>=40?"text-amber-500":"text-rose-500"}function Ua(r){return Li!=null&&Li.convertToBanglaNumber?Li.convertToBanglaNumber(Math.round(r??0)):Math.round(r??0).toString()}function Qd(r){const e=(Number.isFinite(r)?r:0).toFixed(1);return Li!=null&&Li.convertToBanglaNumber?`${Li.convertToBanglaNumber(e)}%`:`${e}%`}function G0(r){if(!r)return"";if(Li!=null&&Li.formatTimestamp)return Li.formatTimestamp(r instanceof Date?r:new Date(r));const t=r instanceof Date?r:new Date(r);return Number.isNaN(t.getTime())?"":t.toLocaleDateString("bn-BD",{year:"numeric",month:"short",day:"numeric"})}function Eot(r){if(!r)return null;if(r instanceof Date)return r.getTime();if(typeof r=="number")return r;if(typeof r=="string"){const t=Date.parse(r);return Number.isNaN(t)?null:t}if(typeof r=="object"){if(typeof r.toDate=="function")try{return r.toDate().getTime()}catch{return null}if(typeof r.seconds=="number")return r.seconds*1e3}return null}function K0(r){return r?Li!=null&&Li.ensureBengaliText&&typeof Li.ensureBengaliText=="function"?Li.ensureBengaliText(r):typeof r=="string"?r.trim():String(r):""}function Sot(){const r=document.documentElement;return r.classList.contains("dark")?!0:r.classList.contains("light")?!1:window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches}function kot(){const r=Sot();return{dark:r,scoreBar:r?"rgba(96, 165, 250, 0.9)":"rgba(37, 99, 235, 0.9)",partBar:r?"rgba(52, 211, 153, 0.9)":"rgba(16, 185, 129, 0.9)",pendLine:r?"rgba(248, 113, 113, 1.0)":"rgba(220, 38, 38, 1.0)",pendLineBorder:r?"rgba(252, 165, 165, 1.0)":"rgba(239, 68, 68, 1.0)",grid:r?"rgba(148,163,184,0.25)":"rgba(100,116,139,0.2)",ticks:r?"#E5E7EB":"#334155",legend:r?"#F1F5F9":"#0F172A",tooltipBg:r?"rgba(2,6,23,0.9)":"rgba(255,255,255,0.95)",tooltipFg:r?"#F8FAFC":"#0F172A"}}function Iot(r,t){if(!r)return;if(!!(r.offsetParent||r.getClientRects().length)){t();return}Ku==null||Ku.disconnect(),Ku=new MutationObserver(()=>{!!(r.offsetParent||r.getClientRects().length)&&(Ku.disconnect(),t())});let n=r;for(;n&&n!==document;)Ku.observe(n,{attributes:!0,attributeFilter:["class","style"],subtree:!1}),n=n.parentElement}Od.register(...mI);Od.register(Jv);let Qo,_P,Xh,wl,Iv=[];const us={page:null,container:null};let _r={group:"all",academicGroup:"all",session:"all",gender:"all",role:"all",assignment:"all",extra:[]};const BP=[{id:"topic_none",text:"    (-)",type:"topic"},{id:"topic_understood",text:"  (+)",type:"topic"},{id:"topic_learned_well",text:"   (+)",type:"topic"},{id:"homework_done",text:"     (+)",type:"option"},{id:"attendance_regular",text:"   (+)",type:"option"}];function Tot(r){return Qo=r.managers.stateManager,_P=r.managers.uiManager,Xh=r.services.dataService,wl=r.utils,Fot(),CP(),console.log(" Student Filter component initialized."),{render:Lot}}async function CP(){try{await Promise.all([Xh.loadStudents(),Xh.loadGroups(),Xh.loadEvaluations(),Xh.loadTasks()]),console.log(" Student Filter data loaded."),us.container&&Mc()}catch(r){console.error("Failed to load data for Student Filter:",r)}}function Fot(){us.page=document.getElementById("page-student-filter"),us.page&&(us.container=us.page.querySelector("#studentFilterContainer"))}function Lot(){!us.page||!us.container||(console.log("Rendering Student Filter page..."),us.container.innerHTML=`
    <div class="space-y-6">
      <!-- Top Filter Panel -->
      <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-200 dark:border-gray-700 p-5 transition-all duration-300 hover:shadow-md">
        <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-4 border-b border-gray-100 dark:border-gray-700 pb-2">
          <h3 class="font-bold text-lg text-gray-800 dark:text-white flex items-center gap-2">
             
          </h3>
          <div class="flex items-center gap-2 mt-2 md:mt-0">
             <button id="sfRefreshBtn" class="text-xs font-medium text-blue-500 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 transition-colors flex items-center gap-1">
              <i class="fas fa-sync-alt"></i> 
            </button>
            <button id="sfResetBtn" class="text-xs font-medium text-red-500 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 transition-colors flex items-center gap-1">
              
            </button>
          </div>
        </div>
        
        <!-- Primary Filters Grid -->
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-4 mb-4">
          <!-- Group -->
          <div class="relative">
            <label class="block text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-1.5"></label>
            <div class="relative">
               <select id="sfGroup" class="w-full form-select rounded-lg border-gray-200 dark:bg-gray-700/50 dark:border-gray-600 dark:text-gray-100 text-sm focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all">
                <option value="all"> </option>
              </select>
            </div>
          </div>

          <!-- Academic Group -->
          <div class="relative">
            <label class="block text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-1.5"> </label>
            <div class="relative">
               <select id="sfAcademic" class="w-full form-select rounded-lg border-gray-200 dark:bg-gray-700/50 dark:border-gray-600 dark:text-gray-100 text-sm focus:ring-2 focus:ring-emerald-500/20 focus:border-emerald-500 transition-all">
                <option value="all"></option>
              </select>
            </div>

          </div>

           <!-- Session -->
          <div class="relative">
            <label class="block text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-1.5"></label>
            <div class="relative">
               <select id="sfSession" class="w-full form-select rounded-lg border-gray-200 dark:bg-gray-700/50 dark:border-gray-600 dark:text-gray-100 text-sm focus:ring-2 focus:ring-purple-500/20 focus:border-purple-500 transition-all">
                <option value="all"></option>
              </select>
            </div>
          </div>

          <!-- Gender -->
          <div class="relative">
            <label class="block text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-1.5"></label>
            <div class="relative">
               <select id="sfGender" class="w-full form-select rounded-lg border-gray-200 dark:bg-gray-700/50 dark:border-gray-600 dark:text-gray-100 text-sm focus:ring-2 focus:ring-pink-500/20 focus:border-pink-500 transition-all">
                <option value="all"></option>
                <option value=""></option>
                <option value=""></option>
              </select>
            </div>
          </div>

          <!-- Role -->
           <div class="relative">
            <label class="block text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-1.5"></label>
            <div class="relative">
               <select id="sfRole" class="w-full form-select rounded-lg border-gray-200 dark:bg-gray-700/50 dark:border-gray-600 dark:text-gray-100 text-sm focus:ring-2 focus:ring-orange-500/20 focus:border-orange-500 transition-all">
                <option value="all"></option>
                <option value="team-leader"> </option>
                <option value="time-keeper"> </option>
                <option value="reporter"></option>
                <option value="resource-manager"> </option>
                <option value="peace-maker"> </option>
              </select>
            </div>
          </div>

           <!-- Assignment (Target Assignment) -->
          <div class="relative">
            <label class="block text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-1.5"></label>
             <div class="relative">
               <select id="sfAssignment" class="w-full form-select rounded-lg border-gray-200 dark:bg-gray-700/50 dark:border-gray-600 dark:text-gray-100 text-sm focus:ring-2 focus:ring-cyan-500/20 focus:border-cyan-500 transition-all">
                <option value="all">  ()</option>
              </select>
            </div>
          </div>
        </div>

        <!-- Extra Filters (Chips Layout) -->
        <div class="pt-4 border-t border-gray-100 dark:border-gray-700">
          <label class="block text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-3">  </label>
          <div class="flex flex-wrap gap-2">
            ${BP.map(r=>`
              <label class="group relative cursor-pointer select-none">
                <input type="checkbox" value="${r.id}" class="peer sr-only sf-extra-check">
                <div class="px-3 py-1.5 rounded-full border border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-700/50 text-gray-600 dark:text-gray-300 text-xs font-medium transition-all peer-checked:bg-blue-50 peer-checked:text-blue-600 peer-checked:border-blue-200 dark:peer-checked:bg-blue-900/30 dark:peer-checked:text-blue-300 dark:peer-checked:border-blue-700/50 hover:bg-gray-100 dark:hover:bg-gray-700">
                  ${r.text}
                </div>
              </label>
            `).join("")}
             <label class="group relative cursor-pointer select-none">
                <input type="checkbox" value="unevaluated" class="peer sr-only sf-extra-check">
                <div class="px-3 py-1.5 rounded-full border border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-700/50 text-gray-600 dark:text-gray-300 text-xs font-medium transition-all peer-checked:bg-amber-50 peer-checked:text-amber-600 peer-checked:border-amber-200 dark:peer-checked:bg-amber-900/30 dark:peer-checked:text-amber-300 dark:peer-checked:border-amber-700/50 hover:bg-gray-100 dark:hover:bg-gray-700">
                   
                </div>
              </label>
             
              <label class="group relative cursor-pointer select-none">
                <input type="checkbox" value="absent_mcq" class="peer sr-only sf-extra-check">
                <div class="px-3 py-1.5 rounded-full border border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-700/50 text-gray-600 dark:text-gray-300 text-xs font-medium transition-all peer-checked:bg-rose-50 peer-checked:text-rose-600 peer-checked:border-rose-200 dark:peer-checked:bg-rose-900/30 dark:peer-checked:text-rose-300 dark:peer-checked:border-rose-700/50 hover:bg-gray-100 dark:hover:bg-gray-700">
                  MCQ  
                </div>
              </label>
          </div>
        </div>
      </div>

      <!-- Main Content (Table & Chart) -->
      <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden">
        <div class="px-6 py-4 border-b border-gray-200 dark:border-gray-700 flex flex-col sm:flex-row justify-between items-center gap-4 bg-gray-50/50 dark:bg-gray-900/50 backdrop-blur-sm">
          <div class="flex flex-col sm:flex-row items-start sm:items-center gap-2 sm:gap-4 w-full sm:w-auto">
            <div class="flex items-center gap-2">
              <span class="flex h-8 w-8 items-center justify-center rounded-lg bg-blue-100 text-blue-600 dark:bg-blue-900/30 dark:text-blue-400">
                <i class="fas fa-list-ul"></i>
              </span>
              <h3 class="font-bold text-gray-800 dark:text-gray-200" id="sfResultCount">: ...</h3>
            </div>
            
             <!-- Color Legend (Header) -->
            <div id="sfChartLegend" class="hidden flex-wrap gap-2 sm:ml-2">
              <span class="inline-flex items-center gap-1 text-[10px] text-gray-500 dark:text-gray-400 bg-white dark:bg-gray-700 px-2 py-0.5 rounded-full border border-gray-100 dark:border-gray-600 shadow-sm">
                <span class="w-2 h-2 rounded-full bg-purple-400"></span> 
              </span>
              <span class="inline-flex items-center gap-1 text-[10px] text-gray-500 dark:text-gray-400 bg-white dark:bg-gray-700 px-2 py-0.5 rounded-full border border-gray-100 dark:border-gray-600 shadow-sm">
                <span class="w-2 h-2 rounded-full bg-orange-400"></span> 
              </span>
              <span class="inline-flex items-center gap-1 text-[10px] text-gray-500 dark:text-gray-400 bg-white dark:bg-gray-700 px-2 py-0.5 rounded-full border border-gray-100 dark:border-gray-600 shadow-sm">
                <span class="w-2 h-2 rounded-full bg-blue-400"></span> 
              </span>
            </div>
          </div>
          
          <div class="flex items-center gap-3 w-full sm:w-auto justify-between sm:justify-end">
             <!-- View Toggle -->
            <div class="flex items-center bg-gray-100 dark:bg-gray-700 rounded-lg p-1">
              <button id="sfViewTable" class="px-3 py-1.5 rounded-md text-xs font-bold bg-white dark:bg-gray-600 shadow-sm text-gray-800 dark:text-white transition-all flex items-center gap-1.5">
                <i class="fas fa-table"></i> 
              </button>
              <button id="sfViewChart" class="px-3 py-1.5 rounded-md text-xs font-bold text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 transition-all flex items-center gap-1.5">
                <i class="fas fa-chart-bar"></i> 
              </button>
            </div>

            <button id="sfPrintBtn" class="btn btn-sm btn-primary shadow-sm flex items-center gap-2">
              <i class="fas fa-print"></i>  
            </button>
          </div>
        </div>

        <!-- Table View -->
        <div id="sfTableContainer" class="overflow-x-auto transition-all duration-300">
          <table class="w-full text-sm text-left">
            <thead class="text-xs text-gray-500 uppercase bg-gray-50 dark:bg-gray-900/30 dark:text-gray-400 border-b border-gray-100 dark:border-gray-700">
              <tr>
                <th class="px-6 py-3 font-semibold tracking-wider">#</th>
                <th class="px-6 py-3 font-semibold tracking-wider"></th>
                <th class="px-6 py-3 font-semibold tracking-wider"></th>
                <th class="px-6 py-3 font-semibold tracking-wider"></th>
                <th class="px-6 py-3 font-semibold tracking-wider"></th>
                <th class="px-6 py-3 font-semibold tracking-wider"> </th>
                <th class="px-6 py-3 font-semibold tracking-wider"></th>
                <th class="px-6 py-3 font-semibold tracking-wider"></th>
                <th class="px-6 py-3 font-semibold tracking-wider"></th>
                <th class="px-6 py-3 text-center font-semibold tracking-wider" id="sfScoreHeader"> </th>
              </tr>
            </thead>
            <tbody id="sfTableBody" class="divide-y divide-gray-100 dark:divide-gray-700/50">
              <!-- Rows will be injected here -->
            </tbody>
          </table>
        </div>

        <!-- Chart View -->
        <div id="sfChartContainer" class="hidden p-4 sm:p-6 w-full h-[500px] sm:h-[600px] bg-white dark:bg-gray-800 transition-all duration-300">
             <canvas id="sfChartCanvas"></canvas>
        </div>

        <div id="sfEmptyState" class="hidden py-12 flex flex-col items-center justify-center text-gray-400 dark:text-gray-500">
          <div class="bg-gray-50 dark:bg-gray-800 p-4 rounded-full mb-3">
             <i class="fas fa-search text-3xl opacity-50"></i>
          </div>
          <p class="text-lg font-medium">   </p>
          <p class="text-sm opacity-75">     </p>
        </div>
      </div>
    </div>
  `,Uot(),Pot(),Mc())}function Uot(){const r=Qo.get("groups")||[],t=Qo.get("students")||[],e=Qo.get("tasks")||[],n=document.getElementById("sfGroup");n&&r.forEach(o=>{const A=document.createElement("option");A.value=o.id,A.textContent=o.name,n.appendChild(A)});const i=document.getElementById("sfAcademic");i&&[...new Set(t.map(A=>A.academicGroup).filter(Boolean))].sort().forEach(A=>{const l=document.createElement("option");l.value=A,l.textContent=A,i.appendChild(l)});const s=document.getElementById("sfSession");s&&[...new Set(t.map(A=>A.session).filter(Boolean))].sort().forEach(A=>{const l=document.createElement("option");l.value=A,l.textContent=A,s.appendChild(l)});const a=document.getElementById("sfAssignment");a&&(e.sort((o,A)=>(A.date||"").localeCompare(o.date||"")),e.forEach(o=>{const A=document.createElement("option");A.value=o.id,A.textContent=o.name,a.appendChild(A)}))}function Pot(){const r=us.container,t=r.querySelector("#sfViewTable"),e=r.querySelector("#sfViewChart");t&&e&&(t.addEventListener("click",()=>{_r.viewMode="table",bk(),Mc()}),e.addEventListener("click",()=>{_r.viewMode="chart",bk(),Mc()})),["sfGroup","sfAcademic","sfSession","sfGender","sfRole","sfAssignment"].forEach(o=>{const A=r.querySelector(`#${o}`);A&&A.addEventListener("change",l=>{const c=o.replace("sf","");let u=c.charAt(0).toLowerCase()+c.slice(1);u==="academic"&&(u="academicGroup"),_r[u]=l.target.value,Mc()})}),r.querySelectorAll(".sf-extra-check").forEach(o=>{o.addEventListener("change",A=>{A.target.checked?_r.extra.push(A.target.value):_r.extra=_r.extra.filter(l=>l!==A.target.value),Mc()})});const i=r.querySelector("#sfResetBtn");i&&i.addEventListener("click",()=>{_r={group:"all",academicGroup:"all",session:"all",gender:"all",role:"all",assignment:"all",extra:[],viewMode:_r.viewMode||"table"},["sfGroup","sfAcademic","sfSession","sfGender","sfRole","sfAssignment"].forEach(o=>{const A=r.querySelector(`#${o}`);A&&(A.value="all")}),r.querySelectorAll(".sf-extra-check").forEach(o=>o.checked=!1),Mc()});const s=r.querySelector("#sfRefreshBtn");s&&s.addEventListener("click",()=>{CP()});const a=r.querySelector("#sfPrintBtn");a&&a.addEventListener("click",()=>{if(Iv.length===0){_P.showToast("     ","warning");return}const o=Qo.get("evaluations")||[],A=Qo.get("groups")||[],l=Qo.get("tasks")||[],c=new Map(A.map(d=>[d.id,d])),u=new Map(l.map(d=>[d.id,d])),h=new Map(BP.map(d=>[d.id,d.text]));h.set("unevaluated"," "),h.set("absent_mcq","MCQ  "),pU(Iv,_r,o,c,h,u)})}function bk(){const r=us.container,t=r.querySelector("#sfViewTable"),e=r.querySelector("#sfViewChart"),n=r.querySelector("#sfTableContainer"),i=r.querySelector("#sfChartContainer"),s=r.querySelector("#sfChartLegend");_r.viewMode==="chart"?(t.className="px-3 py-1.5 rounded-md text-xs font-bold text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 transition-all flex items-center gap-1.5",e.className="px-3 py-1.5 rounded-md text-xs font-bold bg-white dark:bg-gray-600 shadow-sm text-gray-800 dark:text-white transition-all flex items-center gap-1.5",n.classList.add("hidden"),i.classList.remove("hidden"),s&&s.classList.remove("hidden"),s&&s.classList.add("flex")):(t.className="px-3 py-1.5 rounded-md text-xs font-bold bg-white dark:bg-gray-600 shadow-sm text-gray-800 dark:text-white transition-all flex items-center gap-1.5",e.className="px-3 py-1.5 rounded-md text-xs font-bold text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 transition-all flex items-center gap-1.5",n.classList.remove("hidden"),i.classList.add("hidden"),s&&s.classList.add("hidden"),s&&s.classList.remove("flex"))}function Mc(){const r=Qo.get("students")||[],t=Qo.get("groups")||[],e=Qo.get("evaluations")||[],n=new Map(t.map(h=>[h.id,h])),i=r.filter(h=>{if(_r.group!=="all"&&h.groupId!==_r.group||_r.academicGroup!=="all"&&(h.academicGroup||"").trim()!==_r.academicGroup||_r.session!=="all"&&h.session!==_r.session)return!1;if(_r.gender!=="all"){const m=(h.gender||"").trim().normalize("NFC"),f=_r.gender.trim().normalize("NFC");if(m!==f)return!1}if(_r.role!=="all"&&h.role!==_r.role)return!1;const d=[];if(e.forEach(m=>{m.scores&&m.scores[h.id]&&d.push({taskId:m.taskId,taskDate:m.taskDate,...m.scores[h.id]})}),_r.extra.length>0){for(const m of _r.extra)if(m==="unevaluated"){if(d.length>0)return!1}else if(m==="absent_task")if(_r.assignment!=="all"){const f=d.find(b=>b.taskId===_r.assignment);return!f||!f.taskScore}else return!!(d.length===0||d.some(b=>!b.taskScore));else if(m==="absent_mcq")if(_r.assignment!=="all"){const f=d.find(b=>b.taskId===_r.assignment);return!f||!f.mcqScore}else return!!(d.length===0||d.some(b=>!b.mcqScore));else if(!d.some(b=>{const y=b.additionalCriteria||{};return m.startsWith("topic_")?y.topic===m:m==="homework_done"?y.homework===!0:m==="attendance_regular"?y.attendance===!0:!1}))return!1}return!0});Iv=i;const s=us.container.querySelector("#sfTableBody"),a=us.container.querySelector("#sfResultCount"),o=us.container.querySelector("#sfEmptyState"),A=us.container.querySelector("#sfTableContainer"),l=us.container.querySelector("#sfChartContainer");if(a&&(a.textContent=`: ${wl.convertToBanglaNumber(i.length)} `),i.length===0){A&&A.classList.add("hidden"),l&&l.classList.add("hidden"),o&&o.classList.remove("hidden");return}if(o&&o.classList.add("hidden"),_r.viewMode==="chart"){A&&A.classList.add("hidden"),l&&l.classList.remove("hidden"),Not(i,e);return}else A&&A.classList.remove("hidden"),l&&l.classList.add("hidden");s&&(s.innerHTML="");const c=us.container.querySelector("thead tr");let u=c.querySelector("#sfSpecificScoreHeader");_r.assignment!=="all"?u||(u=document.createElement("th"),u.id="sfSpecificScoreHeader",u.className="px-6 py-3 text-center font-semibold tracking-wider text-blue-600 dark:text-blue-400 whitespace-nowrap",u.textContent=" ",c.appendChild(u)):u&&u.remove(),i.forEach((h,d)=>{var x;const m=document.createElement("tr");m.className="bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors cursor-pointer";const f=((x=n.get(h.groupId))==null?void 0:x.name)||"-",b=[];e.forEach(v=>{v.scores&&v.scores[h.id]&&b.push({taskId:v.taskId,...v.scores[h.id]})});const y=b.reduce((v,T)=>v+(T.totalScore||0),0),B=b.length?(y/b.length).toFixed(1):0,I=b.length?wl.convertToBanglaNumber(B):"-";let C="-",N="text-gray-500";if(_r.assignment!=="all"){const v=b.find(T=>T.taskId===_r.assignment);v&&(C=wl.convertToBanglaNumber(v.totalScore),N="font-bold text-blue-600 dark:text-blue-400")}let R="-";const U=(h.gender||"").trim();U===""||U.toLowerCase()==="male"?R='<span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300"></span>':U===""||U.toLowerCase()==="female"?R='<span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-pink-100 text-pink-800 dark:bg-pink-900/30 dark:text-pink-300"></span>':U&&(R=`<span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300">${U}</span>`),m.innerHTML=`
        <td class="px-6 py-3 font-medium text-gray-500 dark:text-gray-400">${wl.convertToBanglaNumber(d+1)}</td>
        <td class="px-6 py-3 font-medium text-gray-900 dark:text-white whitespace-nowrap">${h.name}</td>
        <td class="px-6 py-3">${wl.convertToBanglaNumber(h.roll)}</td>
        <td class="px-6 py-3">${R}</td>
        <td class="px-6 py-3 whitespace-nowrap">${f}</td>
        <td class="px-6 py-3 whitespace-nowrap">${Mot(h.academicGroup)}</td>
        <td class="px-6 py-3">${h.session||"-"}</td>
        <td class="px-6 py-3 whitespace-nowrap">${Rot(h.role)}</td>
        <td class="px-6 py-3 text-xs text-gray-500">${h.contact||"-"}</td>
        <td class="px-6 py-3 text-center font-medium">${I}</td>
        ${_r.assignment!=="all"?`<td class="px-6 py-3 text-center ${N}">${C}</td>`:""}
      `,m.addEventListener("click",()=>{typeof window<"u"&&typeof window.openStudentModalById=="function"?window.openStudentModalById(h.id):console.warn("Student modal function not available")}),s.appendChild(m)})}let Nw=null;function Not(r,t){const e=document.getElementById("sfChartCanvas");if(!e)return;const n=r.map(o=>{const A=[];t.forEach(c=>{c.scores&&c.scores[o.id]&&A.push({taskId:c.taskId,...c.scores[o.id]})});let l=0;if(_r.assignment!=="all"){const c=A.find(u=>u.taskId===_r.assignment);l=c&&Number(c.totalScore)||0}else{const c=A.reduce((u,h)=>u+(Number(h.totalScore)||0),0);l=A.length?c/A.length:0}return{name:o.name,roll:o.roll,academicGroup:o.academicGroup,score:Number(l.toFixed(1))}});n.sort((o,A)=>A.score-o.score);const i=n.map(o=>o.name),s=n.map(o=>o.score),a=n.map(o=>Dot(o.academicGroup));Nw&&Nw.destroy(),Nw=new Od(e,{type:"bar",data:{labels:i,datasets:[{label:_r.assignment!=="all"?" ":" ",data:s,backgroundColor:a,borderRadius:6,borderSkipped:!1,barPercentage:.7,categoryPercentage:.8}]},options:{responsive:!0,maintainAspectRatio:!1,indexAxis:"x",plugins:{legend:{display:!1},tooltip:{callbacks:{label:function(o){const A=n[o.dataIndex];return`${A.name} (${A.roll}) - ${wl.convertToBanglaNumber(A.score)}`}}},datalabels:{anchor:"end",align:"top",formatter:o=>wl.convertToBanglaNumber(o),font:{weight:"bold",size:11},color:"#6b7280"}},scales:{y:{beginAtZero:!0,grid:{color:"rgba(0, 0, 0, 0.05)",borderDash:[5,5]},ticks:{font:{family:"'Noto Sans Bengali', sans-serif"}}},x:{grid:{display:!1},ticks:{autoSkip:!1,maxRotation:90,minRotation:45,font:{size:10,family:"'Noto Sans Bengali', sans-serif"}}}},onClick:(o,A)=>{if(A.length>0){const l=A[0].index,c=r.find(u=>u.name===n[l].name&&u.roll===n[l].roll);c&&typeof window<"u"&&typeof window.openStudentModalById=="function"&&window.openStudentModalById(c.id)}}}})}function Dot(r){const t=(r||"").toString().trim().toLowerCase();return/science|/.test(t)?"rgba(168, 85, 247, 0.7)":/arts|/.test(t)?"rgba(249, 115, 22, 0.7)":/commerce||/.test(t)?"rgba(59, 130, 246, 0.7)":/vocational|/.test(t)?"rgba(6, 182, 212, 0.7)":"rgba(107, 114, 128, 0.7)"}function Mot(r){if(!r)return"-";const t={Science:"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-300","Business Studies":"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300",Humanities:"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-300"};let e="bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300";return r.includes("Science")||r.includes("")?e=t.Science:r.includes("Business")||r.includes("")?e=t["Business Studies"]:(r.includes("Humanities")||r.includes(""))&&(e=t.Humanities),`<span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${e}">${r}</span>`}function Rot(r){if(!r)return"-";const e={"team-leader":{label:" ",cls:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300"},"time-keeper":{label:" ",cls:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300"},reporter:{label:"",cls:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300"},"resource-manager":{label:" ",cls:"bg-indigo-100 text-indigo-800 dark:bg-indigo-900/30 dark:text-indigo-300"},"peace-maker":{label:" ",cls:"bg-pink-100 text-pink-800 dark:bg-pink-900/30 dark:text-pink-300"}}[r]||{label:r,cls:"bg-gray-100 text-gray-800"};return`<span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${e.cls}">${e.label}</span>`}const ja={dashboardSections:{hero:!0,stats:!0,eliteGroups:!0,topGroups:!0,academicStats:!0,ranking:!0},sidebar:{dashboard:{visible:!0,type:"public",label:"",icon:"fa-tachometer-alt",locked:!0},"upcoming-assignments":{visible:!0,type:"public",label:" ",icon:"fa-calendar-week"},"student-ranking":{visible:!0,type:"public",label:" ",icon:"fa-trophy"},"all-students":{visible:!0,type:"public",label:" ",icon:"fa-user-graduate"},"student-filter":{visible:!0,type:"public",label:" ",icon:"fa-filter"},"group-analysis":{visible:!0,type:"public",label:" ",icon:"fa-chart-bar"},"graph-analysis":{visible:!0,type:"public",label:" ",icon:"fa-chart-line"},statistics:{visible:!0,type:"public",label:" ",icon:"fa-calculator"},"group-policy":{visible:!0,type:"public",label:" ",icon:"fa-book"},export:{visible:!0,type:"public",label:"",icon:"fa-file-export"},groups:{visible:!0,type:"private",label:" ",icon:"fa-layer-group"},members:{visible:!0,type:"private",label:" ",icon:"fa-users"},tasks:{visible:!0,type:"private",label:" ",icon:"fa-tasks"},evaluation:{visible:!0,type:"private",label:"",icon:"fa-clipboard-check"},settings:{visible:!0,type:"private",label:"",icon:"fa-cog",locked:!0}}};let Lr=JSON.parse(JSON.stringify(ja));const EP="app_settings_v2";function Qot(r){return Kot(),Oot(),eg(),console.log(" Settings component initialized"),{render:SP,applySettings:eg,isPagePublic:Got,toggleSidebarType:$ot,toggleDashboardSection:jot,toggleSidebarVisibility:Vot}}function Oot(){Object.keys(Lr.sidebar).forEach(r=>{ja.sidebar.hasOwnProperty(r)||delete Lr.sidebar[r]}),Object.keys(ja.sidebar).forEach(r=>{Lr.sidebar[r]?(ja.sidebar[r].locked&&(Lr.sidebar[r].locked=!0,Lr.sidebar[r].visible=!0,Lr.sidebar[r].type=ja.sidebar[r].type),Lr.sidebar[r].label=ja.sidebar[r].label,Lr.sidebar[r].icon=ja.sidebar[r].icon):Lr.sidebar[r]=ja.sidebar[r]}),Object.keys(ja.dashboardSections).forEach(r=>{Lr.dashboardSections[r]===void 0&&(Lr.dashboardSections[r]=ja.dashboardSections[r])})}function SP(){const r=document.getElementById("settingsContent");r&&(r.innerHTML=`
    <div class="space-y-8">
      <!-- Header Section -->
      <div class="bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-sm border border-gray-100 dark:border-gray-700">
        <h3 class="text-xl font-bold text-gray-800 dark:text-white mb-2"> </h3>
        <p class="text-gray-500 dark:text-gray-400 text-sm">      </p>
      </div>

      <div class="grid grid-cols-1 xl:grid-cols-3 gap-8">
        <!-- Sidebar Management (Left - Wider) -->
        <div class="xl:col-span-2 space-y-6">
          <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700 overflow-hidden">
            <div class="p-6 border-b border-gray-100 dark:border-gray-700 flex justify-between items-center bg-gray-50/50 dark:bg-gray-800/50">
              <div class="flex items-center gap-3">
                <div class="w-10 h-10 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center text-blue-600 dark:text-blue-400">
                  <i class="fas fa-bars"></i>
                </div>
                <div>
                  <h4 class="font-bold text-gray-800 dark:text-white"> </h4>
                  <p class="text-xs text-gray-500 dark:text-gray-400">    </p>
                </div>
              </div>
            </div>
            
            <div class="overflow-x-auto">
              <table class="w-full text-sm text-left">
                <thead class="text-xs text-gray-500 uppercase bg-gray-50/80 dark:bg-gray-700/50 dark:text-gray-400">
                  <tr>
                    <th scope="col" class="px-6 py-4 font-semibold"> </th>
                    <th scope="col" class="px-6 py-4 text-center font-semibold"></th>
                    <th scope="col" class="px-6 py-4 text-center font-semibold"> </th>
                  </tr>
                </thead>
                <tbody class="divide-y divide-gray-100 dark:divide-gray-700/50">
                  ${Hot()}
                </tbody>
              </table>
            </div>
          </div>
        </div>

        <!-- Dashboard & Other Settings (Right) -->
        <div class="space-y-6">
          <!-- Dashboard Sections -->
          <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700 overflow-hidden">
            <div class="p-6 border-b border-gray-100 dark:border-gray-700 bg-gray-50/50 dark:bg-gray-800/50">
              <div class="flex items-center gap-3">
                <div class="w-10 h-10 rounded-full bg-purple-100 dark:bg-purple-900/30 flex items-center justify-center text-purple-600 dark:text-purple-400">
                  <i class="fas fa-tachometer-alt"></i>
                </div>
                <div>
                  <h4 class="font-bold text-gray-800 dark:text-white"> </h4>
                  <p class="text-xs text-gray-500 dark:text-gray-400">   </p>
                </div>
              </div>
            </div>
            <div class="p-6 space-y-4">
              ${Uh("hero"," ","    ","fa-star","indigo")}
              ${Uh("stats"," "," ,    ","fa-chart-pie","blue")}
              ${Uh("topGroups","  ( )","    ","fa-crown","yellow")}
              ${Uh("academicStats"," "," ","fa-university","sky")}
              ${Uh("ranking"," ","   ","fa-list-ol","emerald")}
            </div>
          </div>
          
          <!-- Info Card -->
          <div class="bg-blue-50 dark:bg-blue-900/20 rounded-2xl p-6 border border-blue-100 dark:border-blue-800/30">
            <div class="flex gap-3">
              <i class="fas fa-info-circle text-blue-600 dark:text-blue-400 mt-1"></i>
              <div>
                <h5 class="font-semibold text-blue-800 dark:text-blue-300 text-sm"> </h5>
                <p class="text-xs text-blue-700/80 dark:text-blue-300/70 mt-1 leading-relaxed">
                  ''         ''          
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  `)}function Uh(r,t,e,n,i){const s=Lr.dashboardSections[r];return`
    <div class="flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700/30 rounded-xl border border-gray-100 dark:border-gray-700 hover:border-purple-200 dark:hover:border-purple-500/30 transition-colors">
      <div class="flex items-center gap-4">
        <div class="w-10 h-10 rounded-lg bg-${i}-100 dark:bg-${i}-900/30 flex items-center justify-center text-${i}-600 dark:text-${i}-400 shadow-sm">
          <i class="fas ${n}"></i>
        </div>
        <div>
          <p class="font-semibold text-gray-900 dark:text-white">${t}</p>
          <p class="text-xs text-gray-500 dark:text-gray-400 mt-0.5">${e}</p>
        </div>
      </div>
      <label class="relative inline-flex items-center cursor-pointer">
        <input type="checkbox" class="sr-only peer" 
          ${s?"checked":""}
          onchange="window.smartEvaluator.components.settings.toggleDashboardSection('${r}', this.checked)">
        <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300/50 dark:peer-focus:ring-purple-800/50 rounded-full peer dark:bg-gray-600 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-purple-600"></div>
      </label>
    </div>
  `}function Hot(){return Object.keys(ja.sidebar).map(r=>{const t=Lr.sidebar[r];if(!t)return"";const e=t.locked;return`
    <tr class="group hover:bg-gray-50 dark:hover:bg-gray-700/30 transition-colors border-b border-gray-50 dark:border-gray-800 last:border-0">
      <td class="px-6 py-4">
        <div class="flex items-center gap-4">
          <div class="w-8 h-8 rounded-lg bg-gray-100 dark:bg-gray-700 flex items-center justify-center text-gray-500 dark:text-gray-400 group-hover:bg-white group-hover:shadow-sm dark:group-hover:bg-gray-600 transition-all">
            <i class="fas ${t.icon}"></i>
          </div>
          <span class="font-medium text-gray-700 dark:text-gray-200">${t.label}</span>
        </div>
      </td>
      <td class="px-6 py-4 text-center">
        <label class="relative inline-flex items-center ${e?"cursor-not-allowed opacity-60":"cursor-pointer"}">
          <input type="checkbox" class="sr-only peer" 
            ${t.visible?"checked":""} 
            ${e?"disabled":""}
            onchange="window.smartEvaluator.components.settings.toggleSidebarVisibility('${r}', this.checked)">
          <div class="w-9 h-5 bg-gray-200 peer-focus:outline-none rounded-full peer dark:bg-gray-600 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"></div>
        </label>
      </td>
      <td class="px-6 py-4 text-center">
        <button 
          class="relative inline-flex items-center justify-center px-4 py-1.5 overflow-hidden text-xs font-medium transition-all duration-300 ease-out rounded-full group-btn ${e?"cursor-not-allowed opacity-60":"hover:shadow-md cursor-pointer"} ${t.type==="private"?"bg-red-50 text-red-600 dark:bg-red-900/20 dark:text-red-400 border border-red-200 dark:border-red-800":"bg-emerald-50 text-emerald-600 dark:bg-emerald-900/20 dark:text-emerald-400 border border-emerald-200 dark:border-emerald-800"}"
          ${e?"disabled":""}
          onclick="window.smartEvaluator.components.settings.toggleSidebarType('${r}')">
          <span class="mr-1.5">
            <i class="fas ${t.type==="private"?"fa-lock":"fa-globe"}"></i>
          </span>
          ${t.type==="private"?"":""}
        </button>
      </td>
    </tr>
  `}).join("")}function Vot(r,t){Lr.sidebar[r]&&!Lr.sidebar[r].locked&&(Lr.sidebar[r].visible=t,Sx(),eg())}function $ot(r){Lr.sidebar[r]&&!Lr.sidebar[r].locked&&(Lr.sidebar[r].type=Lr.sidebar[r].type==="public"?"private":"public",Sx(),eg(),SP())}function jot(r,t){Lr.dashboardSections.hasOwnProperty(r)&&(Lr.dashboardSections[r]=t,Sx(),eg())}function Got(r){return Lr.sidebar[r]?Lr.sidebar[r].type==="public":!1}function Kot(){const r=localStorage.getItem(EP);if(r)try{const t=JSON.parse(r);Lr.dashboardSections={...Lr.dashboardSections,...t.dashboardSections},Lr.sidebar={...Lr.sidebar,...t.sidebar}}catch(t){console.error("Failed to parse settings",t)}}function Sx(){localStorage.setItem(EP,JSON.stringify(Lr)),Jr.showToast("   ","success")}function eg(){Object.entries(Lr.sidebar).forEach(([t,e])=>{const n=document.querySelector(`button[data-page="${t}"]`);n&&(e.visible?n.removeAttribute("data-settings-hidden"):(n.classList.add("hidden"),n.setAttribute("data-settings-hidden","true")),e.type==="private"?n.classList.add("private-tab"):n.classList.remove("private-tab"))});const r={hero:"dashboard-hero",stats:"dashboard-stats",topGroups:"dashboard-top-groups",academicStats:"dashboard-academic-stats",ranking:"dashboard-ranking",eliteGroups:"elite-groups"};Object.entries(Lr.dashboardSections).forEach(([t,e])=>{const n=r[t];if(n){const i=document.getElementById(n);i&&(e?i.classList.remove("hidden"):i.classList.add("hidden"))}}),zot()}function zot(){const r=ki.get("currentUserData"),t=r&&(r.type==="admin"||r.type==="super-admin");console.log(" _refreshSidebarAuth called"),console.log(" Current User Data:",r),console.log(" Is Admin:",t),document.querySelectorAll(".nav-btn").forEach(n=>{if(n.hasAttribute("data-settings-hidden")){n.classList.add("hidden");return}n.classList.contains("private-tab")?t?n.classList.remove("hidden"):n.classList.add("hidden"):n.classList.remove("hidden")});const e=document.querySelector(".private-tab-divider");e&&(Array.from(document.querySelectorAll(".private-tab")).some(i=>!i.classList.contains("hidden"))?e.classList.remove("hidden"):e.classList.add("hidden"))}class qot{constructor(){this.services={dataService:pnt,auth:{loginWithEmail:bnt,registerWithEmail:ynt,signInWithGoogle:wnt,logout:vnt,authServiceInstance:rU}},this.managers={stateManager:ki,uiManager:Jr,cacheManager:gs},this.utils={...TW,permissionHelper:_nt,pdfGenerator:Unt},this.components={},this.publicPages=["dashboard","upcoming-assignments","all-students","group-policy","export","student-ranking","group-analysis","graph-analysis","graph-analysis","statistics","student-filter"],console.log("SmartGroupEvaluator app instantiated.")}async init(){console.log(" Initializing application..."),Jr.showLoading("  ...");try{this._initComponents(),this._setupGlobalEventListeners(),await this._loadInitialData(),this._populateInitialFilters(),this.showPage("dashboard"),console.log(" Application initialized successfully.")}catch(t){console.error(" Initialization failed:",t),Jr.showToast(`    : ${t.message}`,"error",1e4),Jr.elements.appContainer&&(Jr.elements.appContainer.innerHTML='<div class="p-6 text-center text-red-600 dark:text-red-400">      </div>')}finally{ki.get("authLoading")||Jr.hideLoading()}}_initComponents(){console.log(" Initializing components...");const t={managers:this.managers,services:this.services,utils:this.utils,app:this};try{this.components.groups=ait(t),this.components.tasks=Uit(t),this.components.dashboard=Dnt(t),this.components.members=vit(t),this.components.evaluation=qit(t),this.components.ranking=ast(t),this.components.analysis=_st(t),this.components.admin=eat(t),this.components.exportModule=cat(t),this.components.policy=Sat(t),this.components.upcomingAssignments=Hat(t),this.components.statistics=oot(t),this.components.studentFilter=Tot(t),this.components.settings=Qot(t),console.log(" All components initialized.")}catch(e){throw console.error(" Error initializing components:",e),new Error(`Component initialization failed: ${e.message}`)}}_setupGlobalEventListeners(){console.log(" Setting up global event listeners...");const t=this.managers.uiManager;t.elements.sidebar?t.addListener(t.elements.sidebar,"click",e=>{const n=e.target.closest(".nav-btn");if(n&&!n.disabled){const i=n.dataset.page;i&&(e.preventDefault(),this.showPage(i))}}):console.warn("Sidebar element not found for setting up navigation."),t.addListener(t.elements.loginBtn,"click",()=>this._handleLogin()),t.addListener(t.elements.registerBtn,"click",()=>this._handleRegister()),t.addListener(t.elements.googleSignInBtn,"click",()=>this._handleGoogleSignIn()),t.addListener(t.elements.confirmLogout,"click",()=>this._handleLogout()),console.log(" Global event listeners attached.")}async _loadInitialData(){console.log(" Loading initial data...");try{const[t,e,n,i]=await Promise.all([this.services.dataService.loadGroups(),this.services.dataService.loadStudents(),this.services.dataService.loadTasks(),this.services.dataService.loadEvaluations()]);this.managers.stateManager.update({groups:t||[],students:e||[],tasks:n||[],evaluations:i||[]}),console.log(" Initial data loaded and state updated.")}catch(t){console.error(" Error loading initial data:",t),this.managers.uiManager.showToast(`      : ${t.message}`,"error")}}_populateInitialFilters(){var t,e,n,i;console.log(" Populating initial filters...");try{(t=this.components.members)==null||t.populateFilters(),(e=this.components.evaluation)==null||e.render(),(n=this.components.analysis)==null||n.renderSummary(),(i=this.components.statistics)==null||i.render()}catch(s){console.error(" Error populating initial filters:",s),this.managers.uiManager.showToast("     ","warning")}}showPage(t){var e,n;if((!t||typeof t!="string")&&(console.warn(`showPage: Invalid pageId "${t}". Defaulting to dashboard.`),t="dashboard"),console.log(`Navigating to page: ${t}`),!this._checkAuthAndPermissions(t)){this.managers.uiManager.showToast("      ","warning"),this.managers.stateManager.get("activePage")!=="dashboard"&&(console.log("Redirecting to dashboard due to permissions."),this.showPage("dashboard"));return}this.managers.uiManager.showPage(t);try{const i=this._getComponentKeyForPage(t),s=i?this.components[i]:null;if(s){let a=s.render;t==="all-students"&&s.renderStudentCards?a=s.renderStudentCards:t==="group-analysis"&&s.renderSummary?a=s.renderSummary:t==="graph-analysis"&&s.renderGraphs&&(a=s.renderGraphs),typeof a=="function"?(console.log(`Rendering component "${i}" for page: ${t}`),a(),(n=(e=window.smartEvaluator)==null?void 0:e.components.settings)==null||n.applySettings()):console.warn(`No suitable render function found on component "${i}" for page: ${t}`)}else console.warn(`No component instance found for page key "${i}" (derived from page ID "${t}")`)}catch(i){console.error(` Error rendering page ${t}:`,i),this.managers.uiManager.showToast(`'${t}'     `,"error");const s=document.getElementById(`page-${t}`);s&&this.managers.uiManager.displayEmptyMessage(s,"       ")}}_getComponentKeyForPage(t){switch(t){case"export":return"exportModule";case"all-students":return"members";case"group-analysis":return"analysis";case"graph-analysis":return"analysis";case"student-ranking":return"ranking";case"admin-management":return"admin";case"group-policy":return"policy";case"upcoming-assignments":return"upcomingAssignments";case"student-filter":return"studentFilter";default:return t}}_checkAuthAndPermissions(t){if(this.publicPages.includes(t))return!0;if(!this.managers.stateManager.get("currentUser"))return!1;const n=this.managers.stateManager.get("currentUserData"),i=(n==null?void 0:n.type)||"user";return t==="admin-management"?i==="super-admin":i==="admin"||i==="super-admin"}async _handleLogin(){var n,i;const t=(n=this.managers.uiManager.elements.loginEmail)==null?void 0:n.value,e=(i=this.managers.uiManager.elements.loginPassword)==null?void 0:i.value;if(!t||!e){this.managers.uiManager.showToast("   ","warning");return}this.managers.uiManager.showLoading("  ...");try{await this.services.auth.loginWithEmail(t,e)}catch(s){console.error("Login failed (handled by authService):",s.message)}finally{this.managers.uiManager.hideLoading()}}async _handleRegister(){var i,s,a;const t=(i=this.managers.uiManager.elements.registerEmail)==null?void 0:i.value,e=(s=this.managers.uiManager.elements.registerPassword)==null?void 0:s.value,n=(a=this.managers.uiManager.elements.adminType)==null?void 0:a.value;if(!t||!e||e.length<6){this.managers.uiManager.showToast("       ","warning");return}this.managers.uiManager.showLoading(" ...");try{await this.services.auth.registerWithEmail(t,e,n),this.managers.uiManager._toggleAuthForm(!1)}catch(o){console.error("Registration failed (handled by authService):",o.message)}finally{this.managers.uiManager.hideLoading()}}async _handleGoogleSignIn(){this.managers.uiManager.showLoading("Google    ...");try{await this.services.auth.signInWithGoogle()}catch(t){console.error("Google Sign-In failed (handled by authService):",t.message)}finally{this.managers.uiManager.hideLoading()}}async _handleLogout(){this.managers.uiManager.showLoading("  ...");try{await this.services.auth.logout(),this.managers.uiManager.hideModal(this.managers.uiManager.elements.logoutModal)}catch(t){console.error("Logout failed (handled by authService):",t.message)}finally{this.managers.uiManager.hideLoading()}}async refreshAllData(){console.log(" Forcing data refresh..."),this.managers.cacheManager.setForceRefresh(),this.managers.uiManager.showLoading("   ...");try{await this._loadInitialData(),this._populateInitialFilters();const t=this.managers.stateManager.get("activePage");t&&this.showPage(t),this.managers.uiManager.showToast("    !","success")}catch(t){console.error(" Data refresh failed:",t),this.managers.uiManager.showToast("   ","error")}finally{this.managers.uiManager.hideLoading()}}}document.addEventListener("DOMContentLoaded",()=>{try{const r=new qot;window.smartEvaluator=r,r.init(),console.log(" Application instance created and init sequence started.")}catch(r){console.error(" Failed to instantiate/initialize SmartGroupEvaluator:",r);const t=document.getElementById("appContainer")||document.body;t.innerHTML=`<div class="p-6 text-center text-red-600 dark:text-red-400">   : ${r.message}</div>`}});(()=>{if(window.__SDM_MODAL_INIT__)return;window.__SDM_MODAL_INIT__=!0;const r={els:{},chart:null,bound:!1},t=(()=>{try{return new Intl.DateTimeFormat("bn-BD",{year:"numeric",month:"short",day:"numeric"})}catch{return null}})(),e=new Intl.DateTimeFormat(void 0,{year:"numeric",month:"short",day:"numeric"}),n=document.createElement("canvas"),i=n.getContext("2d"),s=j=>document.getElementById(j),a=j=>Array.from(document.querySelectorAll(j)),o=(j,G="")=>j==null?G:String(j),A=j=>String(j).replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),l=j=>{var G,pt;try{return((pt=(G=window.smartEvaluator)==null?void 0:G.utils)==null?void 0:pt.convertToBanglaNumber(String(j)))??String(j)}catch{return String(j)}},c=(j,G=2)=>{const pt=typeof j=="number"?j:parseFloat(j||0);return l((Number.isFinite(pt)?pt:0).toFixed(G))},u=j=>j instanceof Date&&!Number.isNaN(j.getTime())?t?t.format(j):e.format(j):"-",h=j=>({"team-leader":"bg-amber-50 text-amber-700 border-amber-200 dark:bg-amber-900/20 dark:text-amber-200 dark:border-amber-700/40","time-keeper":"bg-sky-50 text-sky-700 border-sky-200 dark:bg-sky-900/20 dark:text-sky-200 dark:border-sky-700/40",reporter:"bg-purple-50 text-purple-700 border-purple-200 dark:bg-purple-900/20 dark:text-purple-200 dark:border-purple-700/40","resource-manager":"bg-emerald-50 text-emerald-700 border-emerald-200 dark:bg-emerald-900/20 dark:text-emerald-200 dark:border-emerald-700/40","peace-maker":"bg-rose-50 text-rose-700 border-rose-200 dark:bg-rose-900/20 dark:text-rose-200 dark:border-rose-700/40"})[j]||"bg-gray-50 text-gray-700 border-gray-200 dark:bg-gray-800/40 dark:text-gray-200 dark:border-gray-700/40",d=j=>({"team-leader":" ","time-keeper":" ",reporter:"","resource-manager":" ","peace-maker":" "})[j]||(j?String(j):""),m=j=>{const G=Number(j)||0;return G>=85?{badge:"bg-emerald-50 text-emerald-700 dark:bg-emerald-900/25 dark:text-emerald-300",chip:"text-emerald-600"}:G>=70?{badge:"bg-sky-50 text-sky-700 dark:bg-sky-900/25 dark:text-sky-300",chip:"text-sky-600"}:G>=55?{badge:"bg-amber-50 text-amber-700 dark:bg-amber-900/25 dark:text-amber-300",chip:"text-amber-600"}:{badge:"bg-rose-50 text-rose-700 dark:bg-rose-900/25 dark:text-rose-300",chip:"text-rose-600"}},f=j=>j==null?"":String(j).trim();function b(){var pt,q,L;const j=window.smartEvaluator;if(!j)return{students:[],evaluations:[],tasks:[],groups:[]};const G=((L=(q=(pt=j.managers)==null?void 0:pt.stateManager)==null?void 0:q.getState)==null?void 0:L.call(q))||{};return{students:Array.isArray(G.students)?G.students:[],evaluations:Array.isArray(G.evaluations)?G.evaluations:[],tasks:Array.isArray(G.tasks)?G.tasks:[],groups:Array.isArray(G.groups)?G.groups:[]}}async function y(j){var O,V;const G=window.smartEvaluator,pt=(O=G==null?void 0:G.services)==null?void 0:O.dataService;if(!pt)return j;const q=(V=G.managers)==null?void 0:V.stateManager,L=[["students","loadStudents"],["groups","loadGroups"],["tasks","loadTasks"],["evaluations","loadEvaluations"]].map(async([X,At])=>{if(Array.isArray(j[X])&&j[X].length)return;const et=pt[At];if(typeof et=="function")try{j[X]=await et()||[],q!=null&&q.set&&q.set(X,j[X])}catch(st){console.warn(`[SDM] Failed to load ${X}:`,st)}});return await Promise.all(L),j}function B(j,G){const pt=f(j),q=new Map(G.tasks.map(L=>[L==null?void 0:L.id,L]));return G.evaluations.map(L=>{var D,$,bt;const O=(D=L==null?void 0:L.scores)==null?void 0:D[pt];if(!O)return null;const V=q.get(L==null?void 0:L.taskId)||null,X=parseFloat(L==null?void 0:L.maxPossibleScore)||parseFloat(V==null?void 0:V.maxScore)||100,At=parseFloat(O==null?void 0:O.totalScore)||0,et=X>0?At/X*100:0;let st=null;($=L==null?void 0:L.taskDate)!=null&&$.seconds?st=L.taskDate.seconds*1e3:(bt=L==null?void 0:L.evaluationDate)!=null&&bt.seconds?st=L.evaluationDate.seconds*1e3:st=Date.parse(L==null?void 0:L.taskDate)||0||Date.parse(L==null?void 0:L.updatedAt)||0||Date.parse(V==null?void 0:V.date)||0||null;const dt=(V==null?void 0:V.maxScoreBreakdown)||(L==null?void 0:L.maxScoreBreakdown)||{},vt=parseFloat(dt.task)||0,_t=parseFloat(dt.team)||0,Mt=parseFloat(dt.additional)||0,Ot=parseFloat(dt.mcq)||0;return{taskName:(V==null?void 0:V.name)||(L==null?void 0:L.taskName)||"",date:st?new Date(st):null,taskScore:parseFloat(O==null?void 0:O.taskScore)||0,teamScore:parseFloat(O==null?void 0:O.teamScore)||0,additional:parseFloat(O==null?void 0:O.additionalScore)||0,mcq:parseFloat(O==null?void 0:O.mcqScore)||0,maxTask:vt,maxTeam:_t,maxAdditional:Mt,maxMcq:Ot,total:At,max:X,pct:et,comments:typeof(O==null?void 0:O.comments)=="string"?O.comments.trim():""}}).filter(Boolean).sort((L,O)=>{var V,X;return(((V=L.date)==null?void 0:V.getTime())??0)-(((X=O.date)==null?void 0:X.getTime())??0)})}function I(j,G){try{const pt=f(j),q=new Map(G.tasks.map(V=>[V==null?void 0:V.id,V])),O=G.students.map(V=>{const X=f(V==null?void 0:V.id),At=G.evaluations.map(et=>{var Mt;const st=(Mt=et==null?void 0:et.scores)==null?void 0:Mt[X],dt=q.get(et==null?void 0:et.taskId);if(!st||!dt)return null;const vt=parseFloat(et==null?void 0:et.maxPossibleScore)||parseFloat(dt==null?void 0:dt.maxScore)||100,_t=parseFloat(st==null?void 0:st.totalScore)||0;return vt>0?_t/vt*100:0}).filter(et=>typeof et=="number");return{id:X,avg:At.length?At.reduce((et,st)=>et+st,0)/At.length:-1}}).filter(V=>((V==null?void 0:V.avg)??-1)>=0).sort((V,X)=>X.avg-V.avg).findIndex(V=>(V==null?void 0:V.id)===pt);return O>=0?l(O+1):"-"}catch{return"-"}}async function C(j){try{if(!bn)return null;const G=await Sg(qs(bn,"students",String(j)));if(G.exists()){const L=G.data()||{};return L.role||L.duty||null}const pt=Zd(cc(bn,"students"),Nd("id","==",String(j)),Eg(1)),q=await Cu(pt);if(!q.empty){const L=q.docs[0].data()||{};return L.role||L.duty||null}}catch(G){console.warn("Error fetching student role:",G)}return null}function N(j,G){const pt=s(j);pt&&(pt.textContent=G||"")}function R(j,G){const pt=s(j);pt&&(pt.innerHTML=G)}function U(j,G,pt,q,L,O){const V=s("sdmAvatar");V&&(V.src=j.photoURL||j.avatar||"images/smart.png",V.onerror=()=>{V.onerror=null,V.src="images/smart.png"},V.alt=`${j.name||j.id||"Student"} avatar`),N("sdmTitle"," "),N("sdmRoll",j.roll?`: ${l(j.roll)}`:"");const X=A(j.name||j.id||""),At=o(j.role).trim(),et=d(At),st=h(At),dt=et?`<span class="inline-flex items-center gap-1 rounded-full border px-2 py-0.5 text-[11px] font-semibold ${st}">
           <i class="fas fa-id-badge"></i>${A(et)}
         </span>`:"";R("sdmName",`<span class="mr-2 align-middle">${X}</span>${dt}`),N("sdmTitle","  "),N("sdmRoll",j.roll?`: ${l(j.roll)}`:""),N("sdmGroup",G?`: ${G}`:""),N("sdmAcademic",j.academicGroup?` : ${j.academicGroup}`:""),N("sdmSession",j.session?`: ${j.session}`:"");const vt=!!j.email||!!j.contact;N("sdmContact",vt?`: ${j.email||""} ${j.contact||""}`:""),N("sdmGroup",G?`: ${G}`:""),N("sdmAcademic",j.academicGroup?` : ${j.academicGroup}`:""),N("sdmSession",j.session?`: ${j.session}`:""),N("sdmContact",j.email||j.contact?`: ${j.email||""} ${j.contact||""}`:""),N("sdmAvgTotal",c(L)),N("sdmAvgPct",`${c(q,1)}%`),N("sdmRank",O);const _t=s("sdmParamList");if(_t){const Ot=document.createDocumentFragment();_t.innerHTML="";const D=Math.max(1,pt.length),$=pt.reduce((rt,W)=>({task:rt.task+(W.taskScore||0),team:rt.team+(W.teamScore||0),additional:rt.additional+(W.additional||0),mcq:rt.mcq+(W.mcq||0),total:rt.total+(W.total||0)}),{task:0,team:0,additional:0,mcq:0,total:0}),bt=$.total/D||0;[["",$.task/D],["",$.team/D],["",$.additional/D],["MCQ",$.mcq/D]].forEach(([rt,W])=>{const at=document.createElement("li"),Ct=m(bt>0?W/bt*100:0);at.className=`rounded border border-gray-200 dark:border-gray-700 px-3 py-2 bg-white dark:bg-gray-800 ${Ct.chip}`,at.textContent=`${rt}: ${c(W)}`,Ot.appendChild(at)}),_t.appendChild(Ot);try{const rt=Math.max(1,pt.length),W=pt.reduce((yt,kt)=>({task:yt.task+(kt.taskScore||0),team:yt.team+(kt.teamScore||0),additional:yt.additional+(kt.additional||0),mcq:yt.mcq+(kt.mcq||0),total:yt.total+(kt.total||0)}),{task:0,team:0,additional:0,mcq:0,total:0}),at=W.total/rt||0,xt=[{key:"task",label:"",color:"indigo",value:W.task/rt},{key:"team",label:"",color:"emerald",value:W.team/rt},{key:"additional",label:"",color:"amber",value:W.additional/rt},{key:"mcq",label:"MCQ",color:"sky",value:W.mcq/rt}].map(({label:yt,color:kt,value:Rt})=>{const Lt=at>0?Math.max(0,Math.min(1,Rt/at)):0,Qt=Math.round(Lt*100);return`
            <li class="rounded-lg border border-gray-200 dark:border-gray-700 p-3 bg-white dark:bg-gray-800">
              <div class="flex items-center justify-between mb-2">
                <span class="inline-flex items-center gap-1 rounded-full px-2 py-0.5 text-xs font-semibold bg-${kt}-50 text-${kt}-700 dark:bg-${kt}-900/20 dark:text-${kt}-200">${A(yt)}</span>
                <span class="text-sm font-semibold text-${kt}-600 dark:text-${kt}-300">${c(Rt)}</span>
              </div>
              <div class="h-2 w-full rounded-full bg-slate-100 dark:bg-slate-700 overflow-hidden">
                <div class="h-2 rounded-full bg-${kt}-500" style="width:${Qt}%"></div>
              </div>
              <div class="mt-1 text-[11px] text-gray-500 dark:text-gray-400"> : ${l(Qt)}%</div>
            </li>`}).join("");_t.innerHTML=xt}catch{}try{const rt=Math.max(1,pt.length),W=pt.reduce((yt,kt)=>({task:yt.task+(kt.taskScore||0),team:yt.team+(kt.teamScore||0),additional:yt.additional+(kt.additional||0),mcq:yt.mcq+(kt.mcq||0)}),{task:0,team:0,additional:0,mcq:0}),at=pt.reduce((yt,kt)=>({task:yt.task+(kt.maxTask||0),team:yt.team+(kt.maxTeam||0),additional:yt.additional+(kt.maxAdditional||0),mcq:yt.mcq+(kt.maxMcq||0)}),{task:0,team:0,additional:0,mcq:0}),xt=[{key:"task",label:"",color:"indigo"},{key:"team",label:"",color:"emerald"},{key:"additional",label:"",color:"amber"},{key:"mcq",label:"MCQ",color:"sky"}].map(({key:yt,label:kt,color:Rt})=>{const Lt=W[yt]/rt||0,Qt=at[yt]||0,se=Qt>0?Math.round(Math.max(0,Math.min(1,W[yt]/Qt))*100):0;return`
            <li class="rounded-lg border border-gray-200 dark:border-gray-700 p-3 bg-white dark:bg-gray-800">
              <div class="flex items-center justify-between mb-2">
                <span class="inline-flex items-center gap-1 rounded-full px-2 py-0.5 text-xs font-semibold bg-${Rt}-50 text-${Rt}-700 dark:bg-${Rt}-900/20 dark:text-${Rt}-200">${A(kt)}</span>
                <span class="text-sm font-semibold text-${Rt}-600 dark:text-${Rt}-300">${c(Lt)}</span>
              </div>
              <div class="h-2 w-full rounded-full bg-slate-100 dark:bg-slate-700 overflow-hidden">
                <div class="h-2 rounded-full bg-${Rt}-500" style="width:${se}%"></div>
              </div>
              <div class="mt-1 text-[11px] text-gray-500 dark:text-gray-400">  : ${l(se)}%</div>
            </li>`}).join("");_t.innerHTML=xt}catch{}}const Mt=s("sdmFootnote");Mt&&(Mt.textContent=`${l(pt.length)}     `)}function x(j){const G=s("sdmTableBody");if(!G)return;if(!Array.isArray(j)||j.length===0){G.innerHTML='<tr><td colspan="9" class="px-3 py-4 text-center text-sm text-gray-500 dark:text-gray-400">     </td></tr>';return}const pt=document.createDocumentFragment();for(const q of j){const L=document.createElement("tr"),O=m(q.pct),V=q.date?u(q.date):"-";L.innerHTML=`
        <td class="px-3 py-2">${A(q.taskName||"-")}</td>
        <td class="px-3 py-2"><span class="inline-block rounded px-2 py-0.5 text-xs font-medium bg-sky-50 text-sky-700 dark:bg-sky-900/20 dark:text-sky-300">${c(q.taskScore)}</span></td>
        <td class="px-3 py-2"><span class="inline-block rounded px-2 py-0.5 text-xs font-medium bg-emerald-50 text-emerald-700 dark:bg-emerald-900/20 dark:text-emerald-300">${c(q.teamScore)}</span></td>
        <td class="px-3 py-2"><span class="inline-block rounded px-2 py-0.5 text-xs font-medium bg-amber-50 text-amber-700 dark:bg-amber-900/20 dark:text-amber-300">${c(q.additional)}</span></td>
        <td class="px-3 py-2"><span class="inline-block rounded px-2 py-0.5 text-xs font-medium bg-indigo-50 text-indigo-700 dark:bg-indigo-900/20 dark:text-indigo-300">${c(q.mcq)}</span></td>
        <td class="px-3 py-2">${c(q.total)}</td>
        <td class="px-3 py-2"><span class="inline-block rounded px-2 py-0.5 text-xs font-semibold ${O.badge}">${c(q.pct,1)}%</span></td>
        <td class="px-3 py-2">${A(q.comments||"")}</td>
        <td class="px-3 py-2">${A(V)}</td>`,pt.appendChild(L)}G.innerHTML="",G.appendChild(pt)}function v(j){var O;const G=s("sdmChart");if(!G||!window.Chart)return;const pt=j.map(V=>V.taskName||(V.date?u(V.date):"N/A")),q=j.map(V=>Number((V.pct||0).toFixed(1))),L=q.map((V,X,At)=>X===At.length-1?"#22c55e":"#94a3b8");if(r.chart&&Array.isArray((O=r.chart.data)==null?void 0:O.labels)&&r.chart.data.labels.length===pt.length){r.chart.data.labels=pt,r.chart.data.datasets[0].data=q,r.chart.data.datasets[0].backgroundColor=L,r.chart.update("none");return}if(r.chart){try{r.chart.destroy()}catch{}r.chart=null}r.chart=new window.Chart(G,{type:"bar",data:{labels:pt,datasets:[{data:q,backgroundColor:L,borderRadius:6,maxBarThickness:32,categoryPercentage:.6,barPercentage:.8}]},options:{responsive:!0,maintainAspectRatio:!1,animation:{duration:150},plugins:{legend:{display:!1},tooltip:{displayColors:!1}},scales:{x:{grid:{display:!1},ticks:{maxRotation:0,autoSkip:!0,autoSkipPadding:8}},y:{beginAtZero:!0,max:100,grace:"5%",grid:{color:"rgba(148,163,184,0.25)"},ticks:{stepSize:20,callback:V=>l(V)}}}}})}function T(j,G){const pt=URL.createObjectURL(j);try{const q=document.createElement("a");q.href=pt,q.download=G,document.body.appendChild(q),q.click(),q.remove()}finally{setTimeout(()=>URL.revokeObjectURL(pt),1200)}}function E(){const j=r.els.modal;if(!j)return;const G=j.__evals||[],pt=j.__student||{};if(!G.length)return;const q=["Title","Task","Team","Additional","MCQ","Total","Percent","Comments","Date"],L=dt=>{var vt;try{return((vt=dt?new Date(dt):null)==null?void 0:vt.toISOString().slice(0,10))||""}catch{return""}},O=G.map(dt=>[dt.taskName||"",Number(dt.taskScore||0).toFixed(2),Number(dt.teamScore||0).toFixed(2),Number(dt.additional||0).toFixed(2),Number(dt.mcq||0).toFixed(2),Number(dt.total||0).toFixed(2),Number(dt.pct||0).toFixed(1),(dt.comments||"").replace(/\r?\n/g," "),L(dt.date)]),V=dt=>{const vt=String(dt??"");return/[",\n]/.test(vt)?`"${vt.replace(/"/g,'""')}"`:vt},X="\uFEFF",At=[q.map(V).join(","),...O.map(dt=>dt.map(V).join(","))].join(`\r
`),et=new Blob([X+At],{type:"text/csv;charset=utf-8;"}),st=`${(pt.name||pt.id||"student").replace(/[\\/:*?"<>|]+/g,"_").trim()||"student"}_report.csv`;T(et,st)}function _(){var ie;const j=r.els.modal;if(!j)return;const G=j.__evals||[],pt=j.__student||{};if(!G.length)return;const q=window.jspdf&&window.jspdf.jsPDF||null;if(!q){console.error("jsPDF not loaded");return}if(!!!((ie=window.jspdf)!=null&&ie.autoTable||q!=null&&q.autoTable||q!=null&&q.API&&q.API.autoTable)){console.error("autoTable plugin missing");return}const O=new q("p","pt","a4"),V=36,X=[79,70,229],At=O.internal.pageSize.getWidth(),et=O.internal.pageSize.getHeight(),st=(Ae,ee,re,he={})=>O.text(Ae,ee,re,he),dt=(Ae,ee,re,he,Fe=[226,232,240])=>{O.setDrawColor(...Fe),O.line(Ae,ee,re,he)},vt=(Ae,ee)=>O.splitTextToSize(Ae,ee),_t=(Ae,ee,re,he=200,Fe=10,xe="#0f172a")=>{try{const De=String(Ae??"");if(!De)return;const Le=2,or=6*Le;i.font=`${Fe*Le}px 'Noto Sans Bengali','Hind Siliguri','SolaimanLipi','Segoe UI',sans-serif`;const kr=i.measureText(De);n.width=Math.ceil(kr.width)+or,n.height=Math.ceil(Fe*1.6*Le)+or;const Se=n.getContext("2d");Se.font=i.font,Se.fillStyle=xe,Se.textBaseline="top",Se.fillText(De,or/2,or/2);const ke=n.toDataURL("image/png"),rr=.75;let ei=n.width*rr,_n=n.height*rr;if(ei>he){const Yi=he/ei;ei=he,_n*=Yi}O.addImage(ke,"PNG",ee,re-Fe*.8,ei,_n)}catch{}},Mt=78,Ot=28,D=()=>{const Ae=V+12,ee=new Date,re=ee.getFullYear(),he=String(ee.getMonth()+1).padStart(2,"0"),Fe=String(ee.getDate()).padStart(2,"0"),xe=ee.getHours(),De=String(ee.getMinutes()).padStart(2,"0"),Le=xe>=12?"pm":"am",or=xe%12||12,kr=String(or).padStart(2,"0"),Se=`Generated: ${re}-${he}-${Fe} ${kr}:${De} ${Le}`;O.setFont("helvetica","normal"),O.setFontSize(9),O.setTextColor(71,85,105),st(Se,At-V-8,V+14,{align:"right"}),O.setTextColor(17,24,39),O.setFont("helvetica","bold"),O.setFontSize(12),st("SMART EVALUATE Automated SYSTEM",At/2,Ae+6,{align:"center"}),O.setFontSize(14),st("Student Result Report",At/2,Ae+22,{align:"center"}),O.setDrawColor(226,232,240),O.setTextColor(17,24,39),dt(V,V+Mt-8,At-V,V+Mt-8)},$=()=>{const Ae=et-Ot;dt(V,Ae,At-V,Ae),O.setFont("helvetica","normal"),O.setFontSize(9),O.setTextColor(107,114,128),st(`Page ${O.internal.getCurrentPageInfo().pageNumber}`,At-V-40,et-10)},bt=()=>{const Ae=O.internal.getNumberOfPages();for(let ee=1;ee<=Ae;ee++)O.setPage(ee),D(),$()};let rt=V+Mt+2;const W="Institution: Muktijoddha Major Mostofa College, Rajapur, Mirsharai, Chattogram",at="Developed by: Mustafa Rahman Sir, Senior Software Engineer",Ct="Query for Contact: 01840-643946";O.setTextColor(17,24,39),O.setFont("helvetica","normal"),O.setFontSize(11),O.text(vt(W,At-V*2),V,rt),rt+=22;const xt=40;O.setDrawColor(99,102,241),O.setFillColor(238,242,255),O.rect(V,rt,At-V*2,xt,"FD"),O.setTextColor(55,48,163),O.setFont("helvetica","bold"),O.setFontSize(10),O.text(at,V+10,rt+16),O.setFont("helvetica","normal"),O.text(Ct,V+10,rt+30),rt+=xt+10;const yt=96,kt=(At-V*2)/2,Rt=V+kt+12,Lt=rt+20;O.setDrawColor(226,232,240),O.setFillColor(248,250,252),O.rect(V,rt,At-V*2,yt,"FD"),O.setTextColor(15,23,42);const Qt=(Ae,ee,re)=>{O.setFont("helvetica","bold"),O.setFontSize(10),st(Ae,V+12,re),O.setFont("helvetica","normal");const he=V+12+120,Fe=(At-V*2)/2-(he-(V+12))-12;/[^\x00-\x7F]/.test(String(ee||""))?_t(ee,he,re,Fe,10):st(String(ee??""),he,re)};Qt("Student:",pt.name||pt.id||"",Lt),Qt("Roll:",pt.roll||"-",Lt+16),Qt("Group:",r.els.modal.__groupName||"-",Lt+32),Qt("Academic Group:",pt.academicGroup||"-",Lt+48);const se=d(pt.role)||"-";O.setFont("helvetica","bold"),O.setFontSize(10),st("Duty:",V+12,Lt+64),_t(String(se),V+12+120,Lt+64,(At-V*2)/2-132,10),O.setFont("helvetica","bold"),O.setFontSize(10),st("Average Total:",Rt,Lt),O.setFont("helvetica","normal"),st(String((r.els.modal.__avgTotal||0).toFixed(2)),Rt+90,Lt),O.setFont("helvetica","bold"),st("Average %:",Rt,Lt+16),O.setFont("helvetica","normal"),st(`${(r.els.modal.__avgPct||0).toFixed(1)}%`,Rt+90,Lt+16),O.setFont("helvetica","bold"),st("Rank:",Rt,Lt+32),O.setFont("helvetica","normal"),_t(String(r.els.modal.__rank??"-"),Rt+90,Lt+32,40,10),rt+=yt+14;const te=[["Assignment","Task","Team","Additional","MCQ","Total","%","Comments","Date"]],ae=G.map((Ae,ee)=>{const re=(Ae.comments||"").replace(/\r?\n/g," ").trim(),he=re.length>240?"Comment too long. See in app.":re;return[`Assignment-${ee+1}`,Number(Ae.taskScore||0).toFixed(2),Number(Ae.teamScore||0).toFixed(2),Number(Ae.additional||0).toFixed(2),Number(Ae.mcq||0).toFixed(2),Number(Ae.total||0).toFixed(2),Number(Ae.pct||0).toFixed(1),he,Ae.date?new Date(Ae.date).toISOString().slice(0,10):""]});(O.autoTable||q.API.autoTable).call(O,{startY:rt,head:te,body:ae,styles:{font:"helvetica",fontSize:9,cellPadding:4,lineWidth:.25,lineColor:[226,232,240]},headStyles:{fillColor:X,textColor:255,halign:"left"},alternateRowStyles:{fillColor:[248,250,252]},columnStyles:{0:{cellWidth:64},1:{cellWidth:44,halign:"right"},2:{cellWidth:44,halign:"right"},3:{cellWidth:50,halign:"right"},4:{cellWidth:40,halign:"right"},5:{cellWidth:48,halign:"right"},6:{cellWidth:30,halign:"right"},7:{cellWidth:120},8:{cellWidth:90,halign:"center"}},margin:{left:V,right:V,top:V+Mt,bottom:Ot+6},tableWidth:At-V*2,pageBreak:"auto"}),bt();const ve=`${(pt.name||pt.id||"student").replace(/[\\/:*?"<>|]+/g,"_").trim()||"student"}_report.pdf`;O.save(ve)}async function F(j,G){if(!j||j.dataset.busy==="1")return;j.dataset.busy="1";const pt=j.disabled;j.disabled=!0,j.classList.add("opacity-60","pointer-events-none");try{await Promise.resolve(G())}finally{setTimeout(()=>{j.dataset.busy="0",j.disabled=pt,j.classList.remove("opacity-60","pointer-events-none")},500)}}async function k(j,G={}){var D;const pt=r.els.modal;if(!pt)return;const q=f(j);if(!q){console.warn("[SDM] openStudentModalById called without a valid studentId.");return}const L=b(),O=(G==null?void 0:G.state)||{},V={students:Array.isArray(O.students)&&O.students.length?O.students:L.students,evaluations:Array.isArray(O.evaluations)&&O.evaluations.length?O.evaluations:L.evaluations,tasks:Array.isArray(O.tasks)&&O.tasks.length?O.tasks:L.tasks,groups:Array.isArray(O.groups)&&O.groups.length?O.groups:L.groups};await y(V);let X=null;if(G.student&&f(G.student.id)===q)X={...G.student};else{const $=V.students.findIndex(bt=>f(bt==null?void 0:bt.id)===q);$>=0&&(X={...V.students[$]})}if(!X){console.warn("[SDM] Student not found for modal:",j);return}const At=await C(q);At&&(X.role=At);const et=G.groupName||((D=V.groups.find($=>f($==null?void 0:$.id)===f(X.groupId)))==null?void 0:D.name)||"",st=B(q,V),dt=Math.max(1,st.length),vt=st.reduce(($,bt)=>({total:$.total+(bt.total||0),pct:$.pct+(bt.pct||0)}),{total:0,pct:0}),_t=vt.pct/dt,Mt=vt.total/dt,Ot=I(j,V);U(X,et,st,_t,Mt,Ot),x(st),v(st),pt.__evals=st,pt.__student=X,pt.__groupName=et,pt.__avgPct=_t,pt.__avgTotal=Mt,pt.__rank=Ot!=="-"?Ot:null,Z("table"),pt.classList.remove("hidden")}function Z(j){var pt,q,L,O,V,X;const G=j==="chart";(pt=r.els.wrapChart)==null||pt.classList.toggle("hidden",!G),(q=r.els.wrapTable)==null||q.classList.toggle("hidden",G),(L=r.els.btnTable)==null||L.classList.toggle("bg-gray-100",!G),(O=r.els.btnTable)==null||O.classList.toggle("dark:bg-gray-800",!G),(V=r.els.btnChart)==null||V.classList.toggle("bg-gray-100",G),(X=r.els.btnChart)==null||X.classList.toggle("dark:bg-gray-800",G)}function ut(){var j,G,pt,q;r.bound||(r.bound=!0,document.addEventListener("click",L=>{var O;if(L.target.closest("[data-modal-close]")&&((O=r.els.modal)==null||O.classList.add("hidden"),r.chart)){try{r.chart.destroy()}catch{}r.chart=null}}),document.addEventListener("keydown",L=>{if(L.key==="Escape"&&r.els.modal&&!r.els.modal.classList.contains("hidden")&&(r.els.modal.classList.add("hidden"),r.chart)){try{r.chart.destroy()}catch{}r.chart=null}}),document.addEventListener("click",L=>{const O=L.target.closest(".ranking-card, .view-rank-details-btn");if(!O)return;const V=O.getAttribute("data-student-id");V&&(L.preventDefault(),window.openStudentModalById(V))}),(j=r.els.btnCsv)==null||j.addEventListener("click",L=>{L.stopPropagation(),F(r.els.btnCsv,E)}),(G=r.els.btnPdf)==null||G.addEventListener("click",L=>{L.stopPropagation(),F(r.els.btnPdf,_)}),(pt=r.els.btnTable)==null||pt.addEventListener("click",()=>Z("table")),(q=r.els.btnChart)==null||q.addEventListener("click",()=>Z("chart")),a('img[src="avatar.png"]').forEach(L=>{L.src="images/smart.png",L.onerror=()=>{L.onerror=null,L.src="images/smart.png"}}))}function nt(){if(r.els.modal=s("studentDetailModal"),r.els.btnCsv=s("sdmDownloadCsv"),r.els.btnPdf=s("sdmDownloadPdf"),r.els.btnTable=s("sdmBtnTable"),r.els.btnChart=s("sdmBtnChart"),r.els.wrapTable=s("sdmTableWrap"),r.els.wrapChart=s("sdmChartWrap"),!r.els.modal){console.warn("[SDM] modal node missing; script loaded but no #studentDetailModal.");return}ut(),window.openStudentModalById||(window.openStudentModalById=k)}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",nt,{once:!0}):nt()})();(()=>{if(window.__GDM_MODAL_INIT__)return;window.__GDM_MODAL_INIT__=!0;const r={els:{},bound:!1,state:{currentGroupId:null}},t=b=>document.getElementById(b),e=b=>{var y,B;try{return((B=(y=window.smartEvaluator)==null?void 0:y.utils)==null?void 0:B.convertToBanglaNumber(String(b)))??String(b)}catch{return String(b)}},n=b=>String(b??"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),i=b=>({"team-leader":" ","time-keeper":" ",reporter:"","resource-manager":" ","peace-maker":" "})[String(b||"").trim()]||(b?String(b):""),s=b=>({"team-leader":"bg-amber-50 text-amber-700 border-amber-200","time-keeper":"bg-sky-50 text-sky-700 border-sky-200",reporter:"bg-purple-50 text-purple-700 border-purple-200","resource-manager":"bg-emerald-50 text-emerald-700 border-emerald-200","peace-maker":"bg-rose-50 text-rose-700 border-rose-200"})[String(b||"").trim()]||"bg-gray-50 text-gray-700 border-gray-200",a=["bg-emerald-50 text-emerald-700 border-emerald-200 dark:bg-emerald-500/10 dark:text-emerald-300 dark:border-emerald-700/40","bg-indigo-50 text-indigo-700 border-indigo-200 dark:bg-indigo-500/10 dark:text-indigo-300 dark:border-indigo-700/40","bg-rose-50 text-rose-700 border-rose-200 dark:bg-rose-500/10 dark:text-rose-300 dark:border-rose-700/40","bg-amber-50 text-amber-700 border-amber-200 dark:bg-amber-500/10 dark:text-amber-300 dark:border-amber-700/40","bg-sky-50 text-sky-700 border-sky-200 dark:bg-sky-500/10 dark:text-sky-300 dark:border-sky-700/40","bg-fuchsia-50 text-fuchsia-700 border-fuchsia-200 dark:bg-fuchsia-500/10 dark:text-fuchsia-300 dark:border-fuchsia-700/40","bg-lime-50 text-lime-700 border-lime-200 dark:bg-lime-500/10 dark:text-lime-300 dark:border-lime-700/40","bg-teal-50 text-teal-700 border-teal-200 dark:bg-teal-500/10 dark:text-teal-300 dark:border-teal-700/40","bg-orange-50 text-orange-700 border-orange-200 dark:bg-orange-500/10 dark:text-orange-300 dark:border-orange-700/40","bg-cyan-50 text-cyan-700 border-cyan-200 dark:bg-cyan-500/10 dark:text-cyan-300 dark:border-cyan-700/40"],o=b=>{const y=String(b||"").trim();if(!y)return"bg-gray-50 text-gray-700 border-gray-200 dark:bg-gray-800/40 dark:text-gray-300 dark:border-gray-700/60";let B=0;for(let I=0;I<y.length;I++)B=B*31+y.charCodeAt(I)>>>0;return a[B%a.length]},A=b=>{const y=Number(b)||0;return y>=85?"bg-emerald-50 text-emerald-700":y>=70?"bg-sky-50 text-sky-700":y>=55?"bg-amber-50 text-amber-700":"bg-rose-50 text-rose-700"};function l(){var B,I,C;const b=window.smartEvaluator;if(!b)return{groups:[],students:[],tasks:[],evaluations:[]};const y=((C=(I=(B=b.managers)==null?void 0:B.stateManager)==null?void 0:I.getState)==null?void 0:C.call(I))||{};return{groups:Array.isArray(y.groups)?y.groups:[],students:Array.isArray(y.students)?y.students:[],tasks:Array.isArray(y.tasks)?y.tasks:[],evaluations:Array.isArray(y.evaluations)?y.evaluations:[]}}function c(b){if(!b)return 0;if(typeof b=="object"&&b.seconds)return b.seconds*1e3;const y=Date.parse(b);return Number.isFinite(y)?y:0}function u(b,y){const B=new Map(y.tasks.map(T=>[T==null?void 0:T.id,T])),I=y.students.filter(T=>String(T==null?void 0:T.groupId)===String(b)),C=new Set(I.map(T=>String(T==null?void 0:T.id))),R=y.evaluations.filter(T=>String(T==null?void 0:T.groupId)===String(b)).map(T=>{const E=B.get(T==null?void 0:T.taskId),_=parseFloat(T==null?void 0:T.maxPossibleScore)||parseFloat(E==null?void 0:E.maxScore)||100;let F=0,k=0,Z=null,ut=-1;if(_>0&&(T!=null&&T.scores))for(const[j,G]of Object.entries(T.scores)){if(!C.has(String(j)))continue;const q=(parseFloat(G==null?void 0:G.totalScore)||0)/_*100;F++,k+=q,q>ut&&(ut=q,Z=j)}const nt=c((T==null?void 0:T.taskDate)||(T==null?void 0:T.updatedAt)||(T==null?void 0:T.evaluationDate)||(T==null?void 0:T.createdAt)||(E==null?void 0:E.date));return{ev:T,task:E,ts:nt,avgPct:F?k/F:0,count:F,topStudentId:Z,topPct:ut}}),U=R.length?R.reduce((T,E)=>T+E.avgPct,0)/R.length:0,v=y.groups.map(T=>{const E=String(T==null?void 0:T.id),F=y.evaluations.filter(k=>String(k==null?void 0:k.groupId)===E).map(k=>{const Z=B.get(k==null?void 0:k.taskId),ut=parseFloat(k==null?void 0:k.maxPossibleScore)||parseFloat(Z==null?void 0:Z.maxScore)||100;if(ut<=0||!(k!=null&&k.scores))return 0;let nt=0,j=0;for(const G of Object.values(k.scores)){const pt=parseFloat(G==null?void 0:G.totalScore)||0;nt++,j+=pt/ut*100}return nt?j/nt:0});return{id:E,avg:F.length?F.reduce((k,Z)=>k+Z,0)/F.length:-1}}).filter(T=>T.avg>=0).sort((T,E)=>E.avg-T.avg).findIndex(T=>T.id===String(b));return{members:I,perEval:R,groupAvg:U,rank:v>=0?v+1:null}}function h(b){var y;try{r.state.currentGroupId=b;const B=l(),I=B.groups.find(F=>String(F==null?void 0:F.id)===String(b));if(!I)return;const{perEval:C,groupAvg:N,rank:R}=u(b,B),U=(I==null?void 0:I.name)||(I==null?void 0:I.label)||b,x=t("gdmTitle");x&&(x.textContent="  ");const v=t("gdmGroupName");v&&(v.textContent=U);const T=t("gdmGroupAvg");T&&(T.textContent=`${(N||0).toFixed(1)}%`);const E=t("gdmGroupRank");E&&(E.textContent=R?e(R):"-");try{const F=t("gdmAssignSelect"),k=t("gdmAssignBody"),Z=t("gdmAssignMeta");if(F&&k){const ut=C.slice().sort((j,G)=>(G.ts||0)-(j.ts||0));F.innerHTML=ut.map((j,G)=>{var L;const pt=j.ts?new Date(j.ts).toISOString().slice(0,10):"-",q=((L=j.task)==null?void 0:L.name)||`Assignment-${G+1}`;return`<option value="${G}">${n(q)} (${pt})</option>`}).join("");const nt=j=>{var V,X;const G=ut[j|0];if(!G){k.innerHTML="";const At=t("gdmAssignAvg");At&&(At.textContent="-"),Z&&(Z.textContent="Task: - | Date: -");const et=t("gdmAssignName");et&&(et.textContent="");const st=t("gdmAssignTitle");st&&(st.textContent="Assignment-wise Details");return}try{const At=G.ts?new Date(G.ts).toISOString().slice(0,10):"-",et=((V=G.task)==null?void 0:V.name)||`Assignment-${j+1}`;Z&&(Z.textContent="Task: "+et+" | Date: "+At);const st=t("gdmAssignName");st&&(st.textContent=et);const dt=t("gdmAssignTitle");dt&&(dt.textContent="Assignment-wise Details")}catch{}const pt=t("gdmAssignAvg");pt&&(pt.textContent=(G.avgPct||0).toFixed(1)+"%");const q=((X=G.ev)==null?void 0:X.scores)||{},L=B.students.filter(At=>String(At.groupId)===String(b)).map(At=>{var xt,yt;const et=q[At.id],st=parseFloat(et==null?void 0:et.taskScore)||0,dt=parseFloat(et==null?void 0:et.teamScore)||0,vt=parseFloat(et==null?void 0:et.additionalScore)||0,_t=parseFloat(et==null?void 0:et.mcqScore)||0,Mt=parseFloat(et==null?void 0:et.totalScore)||st+dt+vt+_t,Ot=parseFloat((xt=G.ev)==null?void 0:xt.maxPossibleScore)||parseFloat((yt=G.task)==null?void 0:yt.maxScore)||100,D=Ot>0?Mt/Ot*100:0,$=At.role||At.duty||"",bt=i($),rt=bt?`<span class="inline-flex items-center gap-1 rounded-full border px-2 py-0.5 text-[11px] font-semibold ${s($)}"><i class="fas fa-id-badge"></i>${n(bt)}</span>`:"-",W=typeof(et==null?void 0:et.comments)=="string"?et.comments.trim():"",at=At.academicGroup||At.academic_group||At.academic||"",Ct=o(at);return{roll:At.roll||At.studentRoll||At.classRoll||At.rollNumber||null,badge:rt,name:At.name||At.id,agName:at,agClass:Ct,taskScore:st,teamScore:dt,additional:vt,mcq:_t,total:Mt,pct:D,comment:W}}).filter(At=>Number.isFinite(At.total)).sort((At,et)=>et.pct-At.pct),O=document.createDocumentFragment();L.forEach(At=>{const et=document.createElement("tr"),st=A(At.pct),dt=At.comment.length>120?At.comment.slice(0,117)+".":At.comment;et.innerHTML=`
                <td class="px-3 py-2 whitespace-nowrap">${e(At.roll??"-")}</td>
                <td class="px-3 py-2 whitespace-nowrap">${At.badge}</td>
                <td class="px-3 py-2 whitespace-nowrap">
                  <span class="font-medium">${n(At.name)}</span>
                  ${At.agName?`<span class="ml-2 inline-flex items-center gap-1 rounded-full border px-2 py-0.5 text-[11px] font-semibold ${At.agClass}"><i class="fas fa-graduation-cap"></i>${n(At.agName)}</span>`:""}
                </td>
                <td class="px-3 py-2 text-right">${At.taskScore.toFixed(2)}</td>
                <td class="px-3 py-2 text-right">${At.teamScore.toFixed(2)}</td>
                <td class="px-3 py-2 text-right">${At.additional.toFixed(2)}</td>
                <td class="px-3 py-2 text-right">${At.mcq.toFixed(2)}</td>
                <td class="px-3 py-2 text-right font-semibold">${At.total.toFixed(2)}</td>
                <td class="px-3 py-2 text-right"><span class="inline-block rounded px-2 py-0.5 text-xs font-semibold ${st}">${At.pct.toFixed(1)}%</span></td>
                <td class="px-3 py-2 comments-cell">${n(dt)}</td>`,O.appendChild(et)}),k.innerHTML="",k.appendChild(O)};nt(0),F.onchange=j=>{const G=parseInt(j.target.value,10)||0;nt(G)}}}catch{}const _=t("gdmEvalsBody");if(_){_.innerHTML="";const F=C.slice().sort((ut,nt)=>(nt.ts||0)-(ut.ts||0)),k=document.createDocumentFragment(),Z=new Map(B.students.map(ut=>[String(ut==null?void 0:ut.id),(ut==null?void 0:ut.name)||(ut==null?void 0:ut.id)]));F.forEach((ut,nt)=>{var q;const j=document.createElement("tr"),G=ut.ts?new Date(ut.ts).toISOString().slice(0,10):"-",pt=ut.topStudentId?Z.get(String(ut.topStudentId))||ut.topStudentId:"-";j.innerHTML=`
            <td class="px-3 py-2 whitespace-nowrap">${n(((q=ut.task)==null?void 0:q.name)||`Assignment-${nt+1}`)}</td>
            <td class="px-3 py-2 whitespace-nowrap">${G}</td>
            <td class="px-3 py-2">${ut.count}</td>
            <td class="px-3 py-2">${ut.avgPct.toFixed(1)}%</td>
            <td class="px-3 py-2 whitespace-nowrap">${n(pt)}</td>`,k.appendChild(j)}),_.appendChild(k)}(y=r.els.modal)==null||y.classList.remove("hidden"),d("members")}catch(B){console.error("[GDM] renderGroupModal failed:",B)}}function d(b){var B,I,C,N;const y=b==="members";(B=r.els.members)==null||B.classList.toggle("hidden",!y),(I=r.els.evals)==null||I.classList.toggle("hidden",y),(C=r.els.btnMembers)==null||C.classList.toggle("bg-gray-100",y),(N=r.els.btnEvals)==null||N.classList.toggle("bg-gray-100",!y)}function m(){var b,y,B;r.bound||(r.bound=!0,document.addEventListener("click",I=>{var C;I.target.closest("[data-group-modal-close]")&&((C=r.els.modal)==null||C.classList.add("hidden"))}),(b=r.els.btnMembers)==null||b.addEventListener("click",()=>d("members")),(y=r.els.btnEvals)==null||y.addEventListener("click",()=>d("evals")),(B=r.els.btnPrint)==null||B.addEventListener("click",()=>{var E,_;const I=window.smartEvaluator;if(!((_=(E=I==null?void 0:I.components)==null?void 0:E.analysis)!=null&&_.generateGroupWiseFullDetailsPDF)){console.warn("PDF generator not found");return}const C=r.state.currentGroupId;if(!C)return;let N="all";const R=r.els.assignSelect;if(R&&R.value){const F=l(),{perEval:k}=u(C,F),Z=k.slice().sort((j,G)=>(G.ts||0)-(j.ts||0)),ut=parseInt(R.value,10)||0,nt=Z[ut];nt&&nt.task&&(N=nt.task.id)}I.managers.uiManager.showToast("PDF  ...","info");const{groups:U,students:x,tasks:v,evaluations:T}=l();I.components.analysis.generateGroupWiseFullDetailsPDF(N,C)}))}function f(){if(r.els.modal=t("groupDetailModal"),r.els.btnMembers=t("gdmBtnMembers"),r.els.btnEvals=t("gdmBtnEvals"),r.els.btnPrint=t("gdmBtnPrint"),r.els.members=t("gdmMembersWrap"),r.els.evals=t("gdmEvalsWrap"),r.els.assignSelect=t("gdmAssignSelect"),!r.els.modal){console.warn("[GDM] modal node missing; script loaded but no #groupDetailModal.");return}m(),window.openGroupModalById||(window.openGroupModalById=h)}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",f,{once:!0}):f()})();document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll("img:not([loading])").forEach(e=>{e.dataset.priority||(e.loading="lazy",e.decoding=e.decoding||"async")});const t=()=>{document.documentElement.classList.add("perf-hydrated")};"requestIdleCallback"in window?requestIdleCallback(t,{timeout:2e3}):setTimeout(t,1500)});_e.prototype.autoTable=function(...r){return f2(this,...r)};_e.API=_e.API||{};_e.API.autoTable=function(...r){return f2(this,...r)};Od.register(...mI,Jv,sT);typeof window<"u"&&(window.Chart=Od,window.ChartDataLabels=Jv,window.ChartZoom=sT,window.html2canvas=l4,window.jsPDF=_e,window.jspdf=window.jspdf||{},window.jspdf.jsPDF=_e,window.jspdf.autoTable=f2,window.JSZip=fW,window.Papa=bW);export{Vr as _,wp as c,Zv as g};
